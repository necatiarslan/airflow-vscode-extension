/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t={505:e=>{"use strict";function t(e,t,o){e instanceof RegExp&&(e=r(e,o)),t instanceof RegExp&&(t=r(t,o));var s=n(e,t,o);return s&&{start:s[0],end:s[1],pre:o.slice(0,s[0]),body:o.slice(s[0]+e.length,s[1]),post:o.slice(s[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,o,s,a,i,l=r.indexOf(e),c=r.indexOf(t,l+1),u=l;if(l>=0&&c>0){if(e===t)return[l,c];for(n=[],s=r.length;u>=0&&!i;)u==l?(n.push(u),l=r.indexOf(e,u+1)):1==n.length?i=[n.pop(),c]:((o=n.pop())<s&&(s=o,a=c),c=r.indexOf(t,u+1)),u=l<c&&l>=0?l:c;n.length&&(i=[s,a])}return i}e.exports=t,t.range=n},914:function(e,t,r){var n;e=r.nmd(e),function(){var o=(e&&e.exports,"object"==typeof global&&global);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var a=function(e){throw new s(e)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,c={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,s=e.length%3,l="",c=-1,u=e.length-s;++c<u;)t=e.charCodeAt(c)<<16,r=e.charCodeAt(++c)<<8,n=e.charCodeAt(++c),l+=i.charAt((o=t+r+n)>>18&63)+i.charAt(o>>12&63)+i.charAt(o>>6&63)+i.charAt(63&o);return 2==s?(t=e.charCodeAt(c)<<8,r=e.charCodeAt(++c),l+=i.charAt((o=t+r)>>10)+i.charAt(o>>4&63)+i.charAt(o<<2&63)+"="):1==s&&(o=e.charCodeAt(c),l+=i.charAt(o>>2)+i.charAt(o<<4&63)+"=="),l},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,s="",c=-1;++c<t;)n=i.indexOf(e.charAt(c)),r=o%4?64*r+n:n,o++%4&&(s+=String.fromCharCode(255&r>>(-2*o&6)));return s},version:"1.0.0"};void 0===(n=function(){return c}.call(t,r,t,e))||(e.exports=n)}()},547:(e,t,r)=>{var n=r(818),o=r(505);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),b(function(e){return e.split("\\\\").join(s).split("\\{").join(a).split("\\}").join(i).split("\\,").join(l).split("\\.").join(c)}(e),!0).map(d)):[]};var s="\0SLASH"+Math.random()+"\0",a="\0OPEN"+Math.random()+"\0",i="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(s).join("\\").split(a).join("{").split(i).join("}").split(l).join(",").split(c).join(".")}function h(e){if(!e)return[""];var t=[],r=o("{","}",e);if(!r)return e.split(",");var n=r.pre,s=r.body,a=r.post,i=n.split(",");i[i.length-1]+="{"+s+"}";var l=h(a);return a.length&&(i[i.length-1]+=l.shift(),i.push.apply(i,l)),t.push.apply(t,i),t}function f(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function m(e,t){return e>=t}function b(e,t){var r=[],s=o("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var a,l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),d=l||c,y=s.body.indexOf(",")>=0;if(!d&&!y)return s.post.match(/,.*\}/)?b(e=s.pre+"{"+s.body+i+s.post):[e];if(d)a=s.body.split(/\.\./);else if(1===(a=h(s.body)).length&&1===(a=b(a[0],!1).map(f)).length)return(_=s.post.length?b(s.post,!1):[""]).map((function(e){return s.pre+a[0]+e}));var w,v=s.pre,_=s.post.length?b(s.post,!1):[""];if(d){var S=u(a[0]),T=u(a[1]),R=Math.max(a[0].length,a[1].length),E=3==a.length?Math.abs(u(a[2])):1,D=g;T<S&&(E*=-1,D=m);var A=a.some(p);w=[];for(var O=S;D(O,T);O+=E){var k;if(c)"\\"===(k=String.fromCharCode(O))&&(k="");else if(k=String(O),A){var P=R-k.length;if(P>0){var C=new Array(P+1).join("0");k=O<0?"-"+C+k.slice(1):C+k}}w.push(k)}}else w=n(a,(function(e){return b(e,!1)}));for(var I=0;I<w.length;I++)for(var L=0;L<_.length;L++){var j=v+w[I]+_[L];(!t||d||j)&&r.push(j)}return r}},818:e=>{e.exports=function(e,r){for(var n=[],o=0;o<e.length;o++){var s=r(e[o],o);t(s)?n.push.apply(n,s):n.push(s)}return n};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},455:(e,t,r)=>{e.exports=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=function(){n.realpath=u,n.realpathSync=d},u.unmonkeypatch=function(){n.realpath=o,n.realpathSync=s};var n=r(896),o=n.realpath,s=n.realpathSync,a=process.version,i=/^v[0-5]\./.test(a),l=r(674);function c(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,r){if(i)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,(function(n,o){c(n)?l.realpath(e,t,r):r(n,o)}))}function d(e,t){if(i)return s(e,t);try{return s(e,t)}catch(r){if(c(r))return l.realpathSync(e,t);throw r}}},674:(e,t,r)=>{var n=r(928),o="win32"===process.platform,s=r(896),a=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(n.normalize,o)var i=/(.*?)(?:[\/\\]+|$)/g;else i=/(.*?)(?:[\/]+|$)/g;if(o)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,a,c,u,d=e,h={},f={};function p(){var t=l.exec(e);r=t[0].length,a=t[0],c=t[0],u="",o&&!f[c]&&(s.lstatSync(c),f[c]=!0)}for(p();r<e.length;){i.lastIndex=r;var g=i.exec(e);if(u=a,a+=g[0],c=u+g[1],r=i.lastIndex,!(f[c]||t&&t[c]===c)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,c))m=t[c];else{var b=s.lstatSync(c);if(!b.isSymbolicLink()){f[c]=!0,t&&(t[c]=c);continue}var y=null;if(!o){var w=b.dev.toString(32)+":"+b.ino.toString(32);h.hasOwnProperty(w)&&(y=h[w])}null===y&&(s.statSync(c),y=s.readlinkSync(c)),m=n.resolve(u,y),t&&(t[c]=m),o||(h[w]=y)}e=n.resolve(m,e.slice(r)),p()}}return t&&(t[d]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=function(e){return"function"==typeof e?e:function(){var e;if(a){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var c,u,d,h,f=e,p={},g={};function m(){var t=l.exec(e);c=t[0].length,u=t[0],d=t[0],h="",o&&!g[d]?s.lstat(d,(function(e){if(e)return r(e);g[d]=!0,b()})):process.nextTick(b)}function b(){if(c>=e.length)return t&&(t[f]=e),r(null,e);i.lastIndex=c;var n=i.exec(e);return h=u,u+=n[0],d=h+n[1],c=i.lastIndex,g[d]||t&&t[d]===d?process.nextTick(b):t&&Object.prototype.hasOwnProperty.call(t,d)?v(t[d]):s.lstat(d,y)}function y(e,n){if(e)return r(e);if(!n.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(b);if(!o){var a=n.dev.toString(32)+":"+n.ino.toString(32);if(p.hasOwnProperty(a))return w(null,p[a],d)}s.stat(d,(function(e){if(e)return r(e);s.readlink(d,(function(e,t){o||(p[a]=t),w(e,t)}))}))}function w(e,o,s){if(e)return r(e);var a=n.resolve(h,o);t&&(t[s]=a),v(a)}function v(t){e=n.resolve(t,e.slice(c)),m()}m()}},423:(e,t,r)=>{var n=r(587),o=Object.create(null),s=r(519);e.exports=n((function(e,t){return o[e]?(o[e].push(t),null):(o[e]=[t],function(e){return s((function t(){var r=o[e],n=r.length,s=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,s)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,s)}))):delete o[e]}}))}(e))}))},17:(e,t,r)=>{try{var n=r(23);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(698)}},698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},27:(e,t,r)=>{e.exports=h,h.Minimatch=f;var n=function(){try{return r(928)}catch(e){}}()||{sep:"/"};h.sep=n.sep;var o=h.GLOBSTAR=f.GLOBSTAR={},s=r(547),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},i="[^/]",l=i+"*?",c="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),u=/\/+/;function d(e,t){t=t||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function h(e,t,r){return g(t),r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&new f(t,r).match(e)}function f(e,t){if(!(this instanceof f))return new f(e,t);g(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===n.sep||(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function p(e,t){return t||(t=this instanceof f?this.options:{}),e=void 0===e?this.pattern:e,g(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:s(e)}h.filter=function(e,t){return t=t||{},function(r,n,o){return h(r,e,t)}},h.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return h;var t=h,r=function(r,n,o){return t(r,n,d(e,o))};return(r.Minimatch=function(r,n){return new t.Minimatch(r,d(e,n))}).defaults=function(r){return t.defaults(d(e,r)).Minimatch},r.filter=function(r,n){return t.filter(r,d(e,n))},r.defaults=function(r){return t.defaults(d(e,r))},r.makeRe=function(r,n){return t.makeRe(r,d(e,n))},r.braceExpand=function(r,n){return t.braceExpand(r,d(e,n))},r.match=function(r,n,o){return t.match(r,n,d(e,o))},r},f.defaults=function(e){return h.defaults(e).Minimatch},f.prototype.debug=function(){},f.prototype.make=function(){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(u)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0},f.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var n=0,o=e.length;n<o&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}},h.braceExpand=function(e,t){return p(e,t)},f.prototype.braceExpand=p;var g=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};f.prototype.parse=function(e,t){g(e);var r=this.options;if("**"===e){if(!r.noglobstar)return o;e="*"}if(""===e)return"";var n,s="",u=!!r.nocase,d=!1,h=[],f=[],p=!1,b=-1,y=-1,w="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function _(){if(n){switch(n){case"*":s+=l,u=!0;break;case"?":s+=i,u=!0;break;default:s+="\\"+n}v.debug("clearStateChar %j %j",n,s),n=!1}}for(var S,T=0,R=e.length;T<R&&(S=e.charAt(T));T++)if(this.debug("%s\t%s %s %j",e,T,s,S),d&&c[S])s+="\\"+S,d=!1;else switch(S){case"/":return!1;case"\\":_(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,T,s,S),p){this.debug("  in class"),"!"===S&&T===y+1&&(S="^"),s+=S;continue}v.debug("call clearStateChar %j",n),_(),n=S,r.noext&&_();continue;case"(":if(p){s+="(";continue}if(!n){s+="\\(";continue}h.push({type:n,start:T-1,reStart:s.length,open:a[n].open,close:a[n].close}),s+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,s),n=!1;continue;case")":if(p||!h.length){s+="\\)";continue}_(),u=!0;var E=h.pop();s+=E.close,"!"===E.type&&f.push(E),E.reEnd=s.length;continue;case"|":if(p||!h.length||d){s+="\\|",d=!1;continue}_(),s+="|";continue;case"[":if(_(),p){s+="\\"+S;continue}p=!0,y=T,b=s.length,s+=S;continue;case"]":if(T===y+1||!p){s+="\\"+S,d=!1;continue}var D=e.substring(y+1,T);try{RegExp("["+D+"]")}catch(e){var A=this.parse(D,m);s=s.substr(0,b)+"\\["+A[0]+"\\]",u=u||A[1],p=!1;continue}u=!0,p=!1,s+=S;continue;default:_(),d?d=!1:!c[S]||"^"===S&&p||(s+="\\"),s+=S}for(p&&(D=e.substr(y+1),A=this.parse(D,m),s=s.substr(0,b)+"\\["+A[0],u=u||A[1]),E=h.pop();E;E=h.pop()){var O=s.slice(E.reStart+E.open.length);this.debug("setting tail",s,E),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",O,O,E,s);var k="*"===E.type?l:"?"===E.type?i:"\\"+E.type;u=!0,s=s.slice(0,E.reStart)+k+"\\("+O}_(),d&&(s+="\\\\");var P=!1;switch(s.charAt(0)){case"[":case".":case"(":P=!0}for(var C=f.length-1;C>-1;C--){var I=f[C],L=s.slice(0,I.reStart),j=s.slice(I.reStart,I.reEnd-8),M=s.slice(I.reEnd-8,I.reEnd),x=s.slice(I.reEnd);M+=x;var q=L.split("(").length-1,F=x;for(T=0;T<q;T++)F=F.replace(/\)[+*?]?/,"");var $="";""===(x=F)&&t!==m&&($="$"),s=L+j+x+$+M}if(""!==s&&u&&(s="(?=.)"+s),P&&(s=w+s),t===m)return[s,u];if(!u)return e.replace(/\\(.)/g,"$1");var U=r.nocase?"i":"";try{var B=new RegExp("^"+s+"$",U)}catch(e){return new RegExp("$.")}return B._glob=e,B._src=s,B};var m={};h.makeRe=function(e,t){return new f(e,t||{}).makeRe()},f.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?l:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",s=e.map((function(e){return e.map((function(e){return e===o?r:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,n)}catch(e){this.regexp=!1}return this.regexp},h.match=function(e,t,r){var n=new f(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},f.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/")),e=e.split(u),this.debug(this.pattern,"split",e);var o,s,a=this.set;for(this.debug(this.pattern,"set",a),s=e.length-1;s>=0&&!(o=e[s]);s--);for(s=0;s<a.length;s++){var i=a[s],l=e;if(r.matchBase&&1===i.length&&(l=[o]),this.matchOne(l,i,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},f.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,i=e.length,l=t.length;s<i&&a<l;s++,a++){this.debug("matchOne loop");var c,u=t[a],d=e[s];if(this.debug(t,u,d),!1===u)return!1;if(u===o){this.debug("GLOBSTAR",[t,u,d]);var h=s,f=a+1;if(f===l){for(this.debug("** at the end");s<i;s++)if("."===e[s]||".."===e[s]||!n.dot&&"."===e[s].charAt(0))return!1;return!0}for(;h<i;){var p=e[h];if(this.debug("\nglobstar while",e,h,t,f,p),this.matchOne(e.slice(h),t.slice(f),r))return this.debug("globstar found match!",h,i,p),!0;if("."===p||".."===p||!n.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,h,t,f);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,f),h!==i))}if("string"==typeof u?(c=d===u,this.debug("string match",u,d,c)):(c=d.match(u),this.debug("pattern match",u,d,c)),!c)return!1}if(s===i&&a===l)return!0;if(s===i)return r;if(a===l)return s===i-1&&""===e[s];throw new Error("wtf?")}},157:(e,t,r)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=r(167),t=(new e).port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},519:(e,t,r)=>{var n=r(587);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(s),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},641:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},293:(e,t,r)=>{function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.setopts=function(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||o,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,r),e.changedCwd=!1;var a=process.cwd();n(r,"cwd")?(e.cwd=s.resolve(r.cwd),e.changedCwd=e.cwd!==a):e.cwd=a,e.root=r.root||s.resolve(e.cwd,"/"),e.root=s.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=i(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,r.allowWindowsEscape=!1,e.minimatch=new l(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var s=e.matches[n];if(s&&0!==Object.keys(s).length){var a=Object.keys(s);t?r.push.apply(r,a):a.forEach((function(e){r[e]=!0}))}else if(e.nonull){var i=e.minimatch.globSet[n];t?r.push(i):r[i]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(c)),e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[d(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!h(e,t)}))),e.found=r},t.mark=function(e,t){var r=d(e,t),n=e.cache[r],o=t;if(n){var s="DIR"===n||Array.isArray(n),a="/"===t.slice(-1);if(s&&!a?o+="/":!s&&a&&(o=o.slice(0,-1)),o!==t){var i=d(e,o);e.statCache[i]=e.statCache[r],e.cache[i]=e.cache[r]}}return o},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var o=r(896),s=r(928),a=r(27),i=r(641),l=a.Minimatch;function c(e,t){return e.localeCompare(t,"en")}function u(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new l(r,{dot:!0})}return{matcher:new l(e,{dot:!0}),gmatcher:t}}function d(e,t){var r=t;return r="/"===t.charAt(0)?s.join(e.root,t):i(t)||""===t?t:e.changedCwd?s.resolve(e.cwd,t):s.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},734:(e,t,r)=>{e.exports=y;var n=r(455),o=r(27),s=(o.Minimatch,r(17)),a=r(434).EventEmitter,i=r(928),l=r(613),c=r(641),u=r(331),d=r(293),h=d.setopts,f=d.ownProp,p=r(423),g=(r(23),d.childrenIgnored),m=d.isIgnored,b=r(519);function y(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return u(e,t)}return new v(e,t,r)}y.sync=u;var w=y.GlobSync=u.GlobSync;function v(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new w(e,t)}if(!(this instanceof v))return new v(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=b(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return i();for(var s=!0,a=0;a<n;a++)this._process(this.minimatch.set[a],a,!1,i);function i(){--o._processing,o._processing<=0&&(s?process.nextTick((function(){o._finish()})):o._finish())}s=!1}y.glob=y,y.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new v(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},y.Glob=v,s(v,a),v.prototype._finish=function(){if(l(this instanceof v),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},v.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},v.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var o=Object.keys(r),s=this,a=o.length;if(0===a)return t();var i=this.matches[e]=Object.create(null);o.forEach((function(r,o){r=s._makeAbs(r),n.realpath(r,s.realpathCache,(function(n,o){n?"stat"===n.syscall?i[r]=!0:s.emit("error",n):i[o]=!0,0==--a&&(s.matches[e]=i,t())}))}))},v.prototype._mark=function(e){return d.mark(this,e)},v.prototype._makeAbs=function(e){return d.makeAbs(this,e)},v.prototype.abort=function(){this.aborted=!0,this.emit("abort")},v.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},v.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},v.prototype._process=function(e,t,r,n){if(l(this instanceof v),l("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var s,a=0;"string"==typeof e[a];)a++;switch(a){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:s=null;break;default:s=e.slice(0,a).join("/")}var i,u=e.slice(a);null===s?i=".":c(s)||c(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(s&&c(s)||(s="/"+s),i=s):i=s;var d=this._makeAbs(i);if(g(this,i))return n();u[0]===o.GLOBSTAR?this._processGlobStar(s,i,d,u,t,r,n):this._processReaddir(s,i,d,u,t,r,n)}},v.prototype._processReaddir=function(e,t,r,n,o,s,a){var i=this;this._readdir(r,s,(function(l,c){return i._processReaddir2(e,t,r,n,o,s,c,a)}))},v.prototype._processReaddir2=function(e,t,r,n,o,s,a,l){if(!a)return l();for(var c=n[0],u=!!this.minimatch.negate,d=c._glob,h=this.dot||"."===d.charAt(0),f=[],p=0;p<a.length;p++)("."!==(m=a[p]).charAt(0)||h)&&(u&&!e?!m.match(c):m.match(c))&&f.push(m);var g=f.length;if(0===g)return l();if(1===n.length&&!this.mark&&!this.stat){for(this.matches[o]||(this.matches[o]=Object.create(null)),p=0;p<g;p++){var m=f[p];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=i.join(this.root,m)),this._emitMatch(o,m)}return l()}for(n.shift(),p=0;p<g;p++)m=f[p],e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(n),o,s,l);l()},v.prototype._emitMatch=function(e,t){if(!this.aborted&&!m(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=c(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},v.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=p("lstat\0"+e,(function(n,o){if(n&&"ENOENT"===n.code)return t();var s=o&&o.isSymbolicLink();r.symlinks[e]=s,s||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&r.fs.lstat(e,n)}},v.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=p("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}this.fs.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},v.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},v.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},v.prototype._processGlobStar=function(e,t,r,n,o,s,a){var i=this;this._readdir(r,s,(function(l,c){i._processGlobStar2(e,t,r,n,o,s,c,a)}))},v.prototype._processGlobStar2=function(e,t,r,n,o,s,a,i){if(!a)return i();var l=n.slice(1),c=e?[e]:[],u=c.concat(l);this._process(u,o,!1,i);var d=this.symlinks[r],h=a.length;if(d&&s)return i();for(var f=0;f<h;f++)if("."!==a[f].charAt(0)||this.dot){var p=c.concat(a[f],l);this._process(p,o,!0,i);var g=c.concat(a[f],n);this._process(g,o,!0,i)}i()},v.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(o,s){n._processSimple2(e,t,o,s,r)}))},v.prototype._processSimple2=function(e,t,r,n,o){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return o();if(e&&c(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=i.join(this.root,e):(e=i.resolve(this.root,e),s&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),o()},v.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!n||"DIR"===o)return t(null,o);if(n&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&"FILE"===a?t():t(null,a,s)}var i=this,l=p("stat\0"+r,(function(n,o){if(o&&o.isSymbolicLink())return i.fs.stat(r,(function(n,s){n?i._stat2(e,r,null,o,t):i._stat2(e,r,n,s,t)}));i._stat2(e,r,n,o,t)}));l&&i.fs.lstat(r,l)},v.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var s="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var a=!0;return n&&(a=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||a,s&&"FILE"===a?o():o(null,a,n)}},331:(e,t,r)=>{e.exports=f,f.GlobSync=p;var n=r(455),o=r(27),s=(o.Minimatch,r(734).Glob,r(23),r(928)),a=r(613),i=r(641),l=r(293),c=l.setopts,u=l.ownProp,d=l.childrenIgnored,h=l.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new p(e,t).found}function p(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof p))return new p(e,t);if(c(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}p.prototype._finish=function(){if(a.ok(this instanceof p),this.realpath){var e=this;this.matches.forEach((function(t,r){var o=e.matches[r]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),o[n.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;o[e._makeAbs(s)]=!0}}))}l.finish(this)},p.prototype._process=function(e,t,r){a.ok(this instanceof p);for(var n,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,s).join("/")}var l,c=e.slice(s);null===n?l=".":i(n)||i(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(n&&i(n)||(n="/"+n),l=n):l=n;var u=this._makeAbs(l);d(this,l)||(c[0]===o.GLOBSTAR?this._processGlobStar(n,l,u,c,t,r):this._processReaddir(n,l,u,c,t,r))},p.prototype._processReaddir=function(e,t,r,n,o,a){var i=this._readdir(r,a);if(i){for(var l=n[0],c=!!this.minimatch.negate,u=l._glob,d=this.dot||"."===u.charAt(0),h=[],f=0;f<i.length;f++)("."!==(m=i[f]).charAt(0)||d)&&(c&&!e?!m.match(l):m.match(l))&&h.push(m);var p=h.length;if(0!==p)if(1!==n.length||this.mark||this.stat)for(n.shift(),f=0;f<p;f++){var g;m=h[f],g=e?[e,m]:[m],this._process(g.concat(n),o,a)}else{this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<p;f++){var m=h[f];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(o,m)}}}},p.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},p.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},p.prototype._readdir=function(e,t){if(t&&!u(this.symlinks,e))return this._readdirInGlobStar(e);if(u(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},p.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},p.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},p.prototype._processGlobStar=function(e,t,r,n,o,s){var a=this._readdir(r,s);if(a){var i=n.slice(1),l=e?[e]:[],c=l.concat(i);this._process(c,o,!1);var u=a.length;if(!this.symlinks[r]||!s)for(var d=0;d<u;d++)if("."!==a[d].charAt(0)||this.dot){var h=l.concat(a[d],i);this._process(h,o,!0);var f=l.concat(a[d],n);this._process(f,o,!0)}}},p.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&i(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},p.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var o=this.statCache[t];if(!o){var s;try{s=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=this.fs.statSync(t)}catch(e){o=s}else o=s}return this.statCache[t]=o,n=!0,o&&(n=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},p.prototype._mark=function(e){return l.mark(this,e)},p.prototype._makeAbs=function(e){return l.makeAbs(this,e)}},239:(e,t,r)=>{const n=r(613),o=r(928),s=r(896);let a;try{a=r(734)}catch(e){}const i={nosort:!0,silent:!0};let l=0;const c="win32"===process.platform,u=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===a)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||i},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),u(t);let o=0,s=null,i=0;const c=(e,n)=>e?r(e):(i=n.length,0===i?r():void n.forEach((e=>{const n=a=>{if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&o<t.maxBusyTries)return o++,setTimeout((()=>h(e,t,n)),100*o);if("EMFILE"===a.code&&l<t.emfileWait)return setTimeout((()=>h(e,t,n)),l++);"ENOENT"===a.code&&(a=null)}l=0,(e=>{s=s||e,0==--i&&r(s)})(a)};h(e,t,n)})));if(t.disableGlob||!a.hasMagic(e))return c(null,[e]);t.lstat(e,((r,n)=>{if(!r)return c(null,[e]);a(e,t.glob,c)}))},h=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.lstat(e,((n,o)=>n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&c&&f(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return c?f(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))))},f=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.chmod(e,438,(n=>{n?o("ENOENT"===n.code?null:r):t.stat(e,((n,s)=>{n?o("ENOENT"===n.code?null:r):s.isDirectory()?g(e,t,r,o):t.unlink(e,o)}))}))},p=(e,t,r)=>{n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let o;try{o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?y(e,t,r):t.unlinkSync(e)},g=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.rmdir(e,(n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?o(r):o(n):m(e,t,o)}))},m=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.readdir(e,((n,s)=>{if(n)return r(n);let a,i=s.length;if(0===i)return t.rmdir(e,r);s.forEach((n=>{d(o.join(e,n),t,(n=>{if(!a)return n?r(a=n):void(0==--i&&t.rmdir(e,r))}))}))}))},b=(e,t)=>{let r;if(u(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!a.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=a.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const n=r[e];let o;try{o=t.lstatSync(n)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&c&&p(n,t,e)}try{o&&o.isDirectory()?y(n,t,null):t.unlinkSync(n)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return c?p(n,t,e):y(n,t,e);if("EISDIR"!==e.code)throw e;y(n,t,e)}}},y=(e,t,r)=>{n(e),n(t);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||w(e,t)}},w=(e,t)=>{n(e),n(t),t.readdirSync(e).forEach((r=>b(o.join(e,r),t)));const r=c?100:1;let s=0;for(;;){let n=!0;try{const r=t.rmdirSync(e,t);return n=!1,r}finally{if(++s<r&&n)continue}}};e.exports=d,d.sync=b},83:(e,t,r)=>{const n=r(896),o=r(857),s=r(928),a=r(982),i={fs:n.constants,os:o.constants},l=r(239),c=/XXXXXX/,u=(i.O_CREAT||i.fs.O_CREAT)|(i.O_EXCL||i.fs.O_EXCL)|(i.O_RDWR||i.fs.O_RDWR),d="win32"===o.platform(),h=i.EBADF||i.os.errno.EBADF,f=i.ENOENT||i.os.errno.ENOENT,p=[],g=n.rmdirSync.bind(n),m=l.sync;let b=!1;function y(e,t){const r=O(e,t),o=r[0],s=r[1];try{P(o)}catch(e){return s(e)}let a=o.tries;!function e(){try{const t=k(o);n.stat(t,(function(r){if(!r)return a-- >0?e():s(new Error("Could not get a unique tmp filename, max tries reached "+t));s(null,t)}))}catch(e){s(e)}}()}function w(e){const t=O(e)[0];P(t);let r=t.tries;do{const e=k(t);try{n.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function v(e,t){const r=function(e){if(e&&!j(e))return t(e);t()};0<=e[0]?n.close(e[0],(function(){n.unlink(e[1],r)})):n.unlink(e[1],r)}function _(e){let t=null;try{0<=e[0]&&n.closeSync(e[0])}catch(e){if(!M(e,-h,"EBADF")&&!j(e))throw e}finally{try{n.unlinkSync(e[1])}catch(e){j(e)||(t=e)}}if(null!==t)throw t}function S(e,t,r,n){const o=R(_,[t,e],n),s=R(v,[t,e],n,o);return r.keep||p.unshift(o),n?o:s}function T(e,t,r){const o=t.unsafeCleanup?l:n.rmdir.bind(n),s=R(t.unsafeCleanup?m:g,e,r),a=R(o,e,r,s);return t.keep||p.unshift(s),r?s:a}function R(e,t,r,n){let o=!1;return function s(a){if(!o){const i=n||s,l=p.indexOf(i);return l>=0&&p.splice(l,1),o=!0,r||e===g||e===m?e(t):e(t,a||function(){})}}}function E(e){let t=[],r=null;try{r=a.randomBytes(e)}catch(t){r=a.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[r[n]%62]);return t.join("")}function D(e){return null===e||A(e)||!e.trim()}function A(e){return void 0===e}function O(e,t){if("function"==typeof e)return[{},e];if(A(e))return[{},t];const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=e[t];return[r,t]}function k(e){const t=e.tmpdir;if(!A(e.name))return s.join(t,e.dir,e.name);if(!A(e.template))return s.join(t,e.dir,e.template).replace(c,E(6));const r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",E(12),e.postfix?"-"+e.postfix:""].join("");return s.join(t,e.dir,r)}function P(e){e.tmpdir=x(e);const t=e.tmpdir;if(A(e.name)||L(e.name,"name",t),A(e.dir)||L(e.dir,"dir",t),!A(e.template)&&(L(e.template,"template",t),!e.template.match(c)))throw new Error(`Invalid template, found "${e.template}".`);if(!A(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=A(e.name)?e.tries||3:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=A(e.dir)?"":s.relative(t,C(e.dir,t)),e.template=A(e.template)?void 0:s.relative(t,C(e.template,t)),e.template=D(e.template)?void 0:s.relative(e.dir,e.template),e.name=A(e.name)?void 0:I(e.name),e.prefix=A(e.prefix)?"":e.prefix,e.postfix=A(e.postfix)?"":e.postfix}function C(e,t){const r=I(e);return r.startsWith(t)?s.resolve(r):s.resolve(s.join(t,r))}function I(e){return D(e)?e:e.replace(/["']/g,"")}function L(e,t,r){if("name"===t){if(s.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=s.basename(e);if(".."===r||"."===r||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(s.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=C(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function j(e){return M(e,-f,"ENOENT")}function M(e,t,r){return d?e.code===r:e.code===r&&e.errno===t}function x(e){return s.resolve(I(e&&e.tmpdir||o.tmpdir()))}process.addListener("exit",(function(){if(b)for(;p.length;)try{p[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return x()}}),e.exports.dir=function(e,t){const r=O(e,t),o=r[0],s=r[1];y(o,(function(e,t){if(e)return s(e);n.mkdir(t,o.mode||448,(function(e){if(e)return s(e);s(null,t,T(t,o,!1))}))}))},e.exports.dirSync=function(e){const t=O(e)[0],r=w(t);return n.mkdirSync(r,t.mode||448),{name:r,removeCallback:T(r,t,!0)}},e.exports.file=function(e,t){const r=O(e,t),o=r[0],s=r[1];y(o,(function(e,t){if(e)return s(e);n.open(t,u,o.mode||384,(function(e,r){if(e)return s(e);if(o.discardDescriptor)return n.close(r,(function(e){return s(e,t,void 0,S(t,-1,o,!1))}));{const e=o.discardDescriptor||o.detachDescriptor;s(null,t,r,S(t,e?-1:r,o,!1))}}))}))},e.exports.fileSync=function(e){const t=O(e)[0],r=t.discardDescriptor||t.detachDescriptor,o=w(t);var s=n.openSync(o,u,t.mode||384);return t.discardDescriptor&&(n.closeSync(s),s=void 0),{name:o,fd:s,removeCallback:S(o,r?-1:s,t,!0)}},e.exports.tmpName=y,e.exports.tmpNameSync=w,e.exports.setGracefulCleanup=function(){b=!0}},300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0;const n=r(914),o=r(60),s=r(606),a=r(65);class i{static async getJwtToken(){if(o.logToOutput("api.getJwtToken started"),!i.jwtToken)try{let e={method:"POST",headers:{"Content-Type":"application/json"},body:'{"username": "'+i.apiUserName+'", "password": "'+i.apiPassword+'"}'},t=await(0,a.default)(i.apiUrl.replace("/api/v2","")+"/auth/token",e),r=await t.json();201===t.status?(o.logToOutput("api.getJwtToken completed"),i.jwtToken=r.access_token):(o.showApiErrorMessage("getJwtToken Error !!!",r),o.logToOutput("api.getJwtToken Error !!!"+r),i.jwtToken=void 0)}catch(e){o.showErrorMessage("getJwtToken Error !!!",e),o.logToOutput("api.getJwtToken Error !!!",e),i.jwtToken=void 0}return i.jwtToken}static async getHeaders(){let e="";return i.apiUrl.includes("v1")?e="Basic "+(0,n.encode)(i.apiUserName+":"+i.apiPassword):i.apiUrl.includes("v2")&&(e="Bearer "+await i.getJwtToken()),{"Content-Type":"application/json",Authorization:e}}static isApiParamsSet(){return!!(this.apiUrl&&this.apiUserName&&this.apiPassword)||(o.showWarningMessage("Please set Api URL, UserName and PassWord"),!1)}static async triggerDag(e,t=void 0,r=void 0){if(o.logToOutput("api.triggerDag started"),!i.isApiParamsSet())return;let n=new s.MethodResult;t||(t="{}");let l="";r&&(l=', "logical_date": "'+r+'T00:00:00Z",');try{let r={method:"POST",headers:await i.getHeaders(),body:'{"conf": '+t+l+"}"},s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns",r);return n.result=await s.json(),200===s.status?(o.showInfoMessage(e+" Dag Triggered."),n.isSuccessful=!0,o.logToOutput("api.triggerDag completed"),n):(o.showApiErrorMessage(e+" Api Call Error !!!",n.result),n.isSuccessful=!1,o.logToOutput("api.triggerDag completed"),n)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),n.isSuccessful=!1,n.error=t,o.logToOutput("api.triggerDag Error !!!",t),n}}static async getDagRun(e,t){o.logToOutput("api.getDagRun started");let r=new s.MethodResult;try{let n={method:"GET",headers:await i.getHeaders()},s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+t,n);return r.result=await s.json(),200===s.status?(r.isSuccessful=!0,o.logToOutput("api.getDagRun completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.getDagRun completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.getDagRun Error !!!",t),r}}static async cancelDagRun(e,t){o.logToOutput("api.cancelDagRun started");let r=new s.MethodResult;try{let n={method:"PATCH",headers:await i.getHeaders(),body:JSON.stringify({state:"failed"})},s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+t,n);return r.result=await s.json(),200===s.status?(r.isSuccessful=!0,o.logToOutput("api.cancelDagRun completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.cancelDagRun completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.cancelDagRun Error !!!",t),r}}static async pauseDag(e,t=!0){o.logToOutput("api.pauseDag started");let r=new s.MethodResult;try{let n={method:"PATCH",headers:await i.getHeaders(),body:JSON.stringify({is_paused:t})},s=await(0,a.default)(i.apiUrl+"/dags/"+e,n);return r.result=s.json(),200===s.status?(o.showInfoMessage(e+" Dag "+(t?"PAUSED":"UN-PAUSED")),r.isSuccessful=!0,o.logToOutput("api.pauseDag completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.pauseDag completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.pauseDag Error !!!",t),r}}static async getSourceCode(e,t){o.logToOutput("api.getSourceCode started");let r=new s.MethodResult;try{let n={method:"GET",headers:await i.getHeaders()},s=await(0,a.default)(i.apiUrl+"/dagSources/"+t,n);return r.result=await s.text(),200===s.status?(r.isSuccessful=!0,o.logToOutput("api.getSourceCode completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.getSourceCode completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.getSourceCode Error !!!",t),r}}static async getDagInfo(e){o.logToOutput("api.getDagInfo started");let t=new s.MethodResult;try{let r={method:"GET",headers:await i.getHeaders()},n=await(0,a.default)(i.apiUrl+"/dags/"+e+"/details",r);return t.result=await n.json(),200===n.status?(t.isSuccessful=!0,o.logToOutput("api.getDagInfo completed"),t):(o.showApiErrorMessage(e+" Api Call Error !!!",t.result),t.isSuccessful=!1,o.logToOutput("api.getDagInfo completed"),t)}catch(r){return o.showErrorMessage(e+" System Error !!!",r),t.isSuccessful=!1,t.error=r,o.logToOutput("api.getDagInfo Error !!!",r),t}}static async getDagTasks(e){o.logToOutput("api.getDagTasks started");let t=new s.MethodResult;try{let r={method:"GET",headers:await i.getHeaders()},n=await(0,a.default)(i.apiUrl+"/dags/"+e+"/tasks",r);return t.result=await n.json(),200===n.status?(t.isSuccessful=!0,o.logToOutput("api.getDagTasks completed"),t):(o.showApiErrorMessage(e+" Api Call Error !!!",t.result),t.isSuccessful=!1,o.logToOutput("api.getDagTasks completed"),t)}catch(r){return o.showErrorMessage(e+" System Error !!!",r),t.isSuccessful=!1,t.error=r,o.logToOutput("api.getDagTasks Error !!!",r),t}}static async getLastDagRun(e){o.logToOutput("api.getLastDagRun started");let t=await this.getDagRunHistory(e,1);return t.isSuccessful&&Object.keys(t.result.dag_runs).length>0?this.getDagRun(e,t.result.dag_runs[0].dag_run_id):(t.isSuccessful=!1,t.result=void 0,t.error=new Error("No Dag Run Found for "+e),t)}static async getDagRunHistory(e,t){o.logToOutput("api.getDagRunHistory started");let r=new s.MethodResult;try{let n={method:"GET",headers:await i.getHeaders()},s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns?order_by=-start_date&limit="+t,n);return r.result=await s.json(),200===s.status?(r.isSuccessful=!0,o.logToOutput("api.getDagRunHistory completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.getDagRunHistory completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.getDagRunHistory Error !!!",t),r}}static async getTaskInstances(e,t){o.logToOutput("api.getTaskInstances started");let r=new s.MethodResult;try{let n={method:"GET",headers:await i.getHeaders()},s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+t+"/taskInstances",n);return r.result=await s.json(),200===s.status?(r.isSuccessful=!0,o.logToOutput("api.getTaskInstances completed"),r):(o.showApiErrorMessage(e+" Api Call Error !!!",r.result),r.isSuccessful=!1,o.logToOutput("api.getTaskInstances completed"),r)}catch(t){return o.showErrorMessage(e+" System Error !!!",t),r.isSuccessful=!1,r.error=t,o.logToOutput("api.getTaskInstances Error !!!",t),r}}static async getLastDagRunLog(e){o.logToOutput("api.getLastDagRunLog started");let t=new s.MethodResult;try{let n={method:"GET",headers:await i.getHeaders()};o.showInfoMessage("Fecthing Latest DAG Run Logs, wait please ...");let s=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns?order_by=-start_date&limit=1",n);if(200===s.status){let l=(await s.json()).dag_runs[0].dag_run_id,c=await await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+l+"/taskInstances",n),u=await c.json();for(var r of(t.result="###################### BEGINING OF DAG RUN ######################\n\n",u.task_instances)){let o=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+l+"/taskInstances/"+r.task_id+"/logs/"+r.try_number,n),s=await o.text();t.result+="############################################################\n",t.result+="Dag="+e+"\n",t.result+="DagRun="+l+"\n",t.result+="TaskId="+r.task_id+"\n",t.result+="Try="+r.try_number+"\n",t.result+="############################################################\n\n",t.result+=s}return t.result+="\n\n###################### END OF DAG RUN ######################\n\n",t.isSuccessful=!0,o.logToOutput("api.getLastDagRunLog completed"),t}return o.showErrorMessage("Error !!!\n"+s.statusText),t.isSuccessful=!1,o.logToOutput("api.getLastDagRunLog completed"),t}catch(r){return o.showErrorMessage(e+" System Error !!!",r),t.isSuccessful=!1,t.error=r,o.logToOutput("api.getLastDagRunLog Error !!!",r),t}}static async getTaskInstanceLog(e,t,r){o.logToOutput("api.getTaskInstanceLog started");let n=new s.MethodResult;try{let s={method:"GET",headers:await i.getHeaders()};o.showInfoMessage("Fecthing Latest DAG Run Logs, wait please ...");let c=await await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+t+"/taskInstances",s),u=await c.json();for(var l of(n.result="",u.task_instances)){if(l.task_id!==r)continue;let o=await(0,a.default)(i.apiUrl+"/dags/"+e+"/dagRuns/"+t+"/taskInstances/"+l.task_id+"/logs/"+l.try_number,s),c=await o.text();n.result+="############################################################\n",n.result+="Dag="+e+"\n",n.result+="DagRun="+t+"\n",n.result+="TaskId="+l.task_id+"\n",n.result+="Try="+l.try_number+"\n",n.result+="############################################################\n\n",n.result+=c}return n.result+="",n.isSuccessful=!0,o.logToOutput("api.getTaskInstanceLog completed"),n}catch(t){return o.showErrorMessage(e+" System Error !!!",t),n.isSuccessful=!1,n.error=t,o.logToOutput("api.getTaskInstanceLog Error !!!",t),n}}static async getDagList(){o.logToOutput("api.getDagList started");let e=new s.MethodResult,t=[],r=0;try{for(;;){let n={method:"GET",headers:await i.getHeaders()},s=await(0,a.default)(`${i.apiUrl}/dags?limit=100&offset=${r}`,n),l=await s.json();if(200!==s.status)return o.showApiErrorMessage("Api Call Error !!!",l),e.isSuccessful=!1,o.logToOutput("api.getDagList completed with error"),e;if(t.push(...l.dags),l.dags.length<100)break;r+=100}return e.result=t,e.isSuccessful=!0,o.logToOutput("api.getDagList completed successfully"),e}catch(t){return o.showErrorMessage("Can not connect to Airflow. Please check URL, Username, and Password.\n",t),e.isSuccessful=!1,e.error=t,o.logToOutput("api.getDagList Error !!!",t),e}}static async getImportErrors(){o.logToOutput("api.getImportErrors started");let e=new s.MethodResult;try{let t={method:"GET",headers:await i.getHeaders()},r=await(0,a.default)(i.apiUrl+"/importErrors",t);return e.result=await r.json(),200===r.status?(e.isSuccessful=!0,o.logToOutput("api.getImportErrors completed"),e):(o.showApiErrorMessage("Api Call Error !!!",e.result),e.isSuccessful=!1,o.logToOutput("api.getImportErrors completed"),e)}catch(t){return o.showErrorMessage("System Error !!!",t),e.isSuccessful=!1,e.error=t,o.logToOutput("api.getImportErrors Error !!!",t),e}}}t.Api=i,i.apiUrl="",i.apiUserName="",i.apiPassword="",i.jwtToken=""},445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeDataProvider=void 0;const n=r(398),o=r(15),s=r(537);t.DagTreeDataProvider=class{constructor(){this._onDidChangeTreeData=new n.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.dagTreeItemList=[],this.visibleDagList=[]}refresh(){this._onDidChangeTreeData.fire()}loadDagTreeItemsFromApiResponse(){if(this.dagTreeItemList=[],this.dagList)for(var e of this.dagList)if(e){let t=new o.DagTreeItem(e);this.dagTreeItemList.push(t)}}getChildren(e){return e?Promise.resolve([]):(this.visibleDagList=this.getVisibleDagList(),Promise.resolve(this.visibleDagList))}getVisibleDagList(){var e=[];for(var t of this.dagTreeItemList)s.DagTreeView.Current.filterString&&!t.doesFilterMatch(s.DagTreeView.Current.filterString)||s.DagTreeView.Current.ShowOnlyActive&&t.IsPaused||s.DagTreeView.Current.ShowOnlyFavorite&&!t.IsFav||e.push(t);return e}getTreeItem(e){return e}}},15:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeItem=void 0;const n=r(398);class o extends n.TreeItem{constructor(e){super(e.dag_id),this.IsFav=!1,this.setApiResponse(e),this.refreshUI()}setApiResponse(e){this.ApiResponse=e,this.DagId=e.dag_id,this.IsActive=e.is_active,this.IsPaused=e.is_paused,this.Owners=e.owners,this.Tags=e.tags,this.FileToken=e.file_token}isDagRunning(){return"queued"===this.LatestDagState||"running"===this.LatestDagState}refreshUI(){super.label=this.DagId,this.IsPaused?(this.iconPath=new n.ThemeIcon("circle-outline"),this.ApiResponse.is_paused=!0):("queued"===this.LatestDagState||"running"===this.LatestDagState?this.iconPath=new n.ThemeIcon("loading~spin"):"success"===this.LatestDagState?this.iconPath=new n.ThemeIcon("check"):"failed"===this.LatestDagState?this.iconPath=new n.ThemeIcon("error"):this.iconPath=new n.ThemeIcon("circle-filled"),this.ApiResponse.is_paused=!1)}doesFilterMatch(e){let t=e.split(","),r=[];for(var n of t)if("active"!==n||this.IsPaused)if("paused"===n&&this.IsPaused)r.push(n);else if(this.DagId.includes(n))r.push(n);else if(this.Owners.includes(n))r.push(n);else if("fav"===n&&this.IsFav)r.push(n);else for(var o of this.Tags)o.name.includes(n)&&r.push(n);else r.push(n);return t.length===r.length}}t.DagTreeItem=o},537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeView=void 0;const n=r(398),o=r(777),s=r(445),a=r(60),i=r(300);class l{constructor(e){this.filterString="",this.ShowOnlyActive=!0,this.ShowOnlyFavorite=!1,this.ServerList=[],a.logToOutput("DagTreeView.constructor Started"),this.context=e,this.loadState(),this.treeDataProvider=new s.DagTreeDataProvider,this.view=n.window.createTreeView("dagTreeView",{treeDataProvider:this.treeDataProvider,showCollapseAll:!0}),this.refresh(),e.subscriptions.push(this.view),l.Current=this,this.setFilterMessage()}refresh(){a.logToOutput("DagTreeView.refresh Started"),n.window.withProgress({location:n.ProgressLocation.Window,title:"Airflow: Loading..."},((e,t)=>(e.report({increment:0}),this.loadDags(),new Promise((e=>{e()}))))),this.getImportErrors()}resetView(){a.logToOutput("DagTreeView.resetView Started"),i.Api.apiUrl="",i.Api.apiUserName="",i.Api.apiPassword="",this.filterString="",this.dagList=void 0,this.treeDataProvider.dagList=this.dagList,this.treeDataProvider.refresh(),this.setViewTitle(),this.saveState(),this.refresh()}viewDagView(e){a.logToOutput("DagTreeView.viewDagView Started"),o.DagView.render(this.context.extensionUri,e.DagId)}async addToFavDAG(e){a.logToOutput("DagTreeView.addToFavDAG Started"),e.IsFav=!0}async deleteFromFavDAG(e){a.logToOutput("DagTreeView.deleteFromFavDAG Started"),e.IsFav=!1}async triggerDag(e){if(a.logToOutput("DagTreeView.triggerDag Started"),!i.Api.isApiParamsSet())return;if(e.IsPaused)return void a.showWarningMessage("Dag is PAUSED !!!");if(e.isDagRunning())return void a.showWarningMessage("Dag is ALREADY RUNNING !!!");let t=await i.Api.triggerDag(e.DagId);if(t.isSuccessful){var r=t.result;e.LatestDagRunId=r.dag_run_id,e.LatestDagState=r.state,e.refreshUI(),this.treeDataProvider.refresh(),this.dagStatusInterval?this.dagStatusInterval.refresh():this.dagStatusInterval=setInterval(this.refreshRunningDagState,1e4,this)}}async refreshRunningDagState(e){if(a.logToOutput("DagTreeView.refreshRunningDagState Started"),!i.Api.isApiParamsSet())return;let t=!0;for(var r of e.treeDataProvider.visibleDagList){if(r.isDagRunning()){t=!1;let e=await i.Api.getDagRun(r.DagId,r.LatestDagRunId);e.isSuccessful?(r.LatestDagState=e.result.state,r.refreshUI()):(r.LatestDagRunId="",r.LatestDagState="")}e.treeDataProvider.refresh()}t&&e.dagStatusInterval&&(clearInterval(e.dagStatusInterval),a.showInfoMessage("All Dag Run(s) Completed"),a.logToOutput("All Dag Run(s) Completed"))}async triggerDagWConfig(e){if(a.logToOutput("DagTreeView.triggerDagWConfig Started"),!i.Api.isApiParamsSet())return;let t=await n.window.showInputBox({placeHolder:"Enter Configuration JSON (Optional, must be a dict object) or Press Enter"});if(t||(t="{}"),void 0!==t){let n=await i.Api.triggerDag(e.DagId,t);if(n.isSuccessful){var r=n.result;e.LatestDagRunId=r.dag_run_id,e.LatestDagState=r.state,e.refreshUI(),this.treeDataProvider.refresh(),this.dagStatusInterval?this.dagStatusInterval.refresh():this.dagStatusInterval=setInterval(this.refreshRunningDagState,1e4,this)}}}async checkAllDagsRunState(){if(a.logToOutput("DagTreeView.checkAllDagsRunState Started"),this.treeDataProvider)for(var e of this.treeDataProvider.visibleDagList)e.IsPaused||this.checkDagRunState(e)}async notifyDagStateWithDagId(e){if(a.logToOutput("DagTreeView.checDagStateWitDagId Started"),this.treeDataProvider)for(var t of this.treeDataProvider.visibleDagList)t.DagId===e&&this.checkDagRunState(t)}async checkDagRunState(e){if(a.logToOutput("DagTreeView.checkDagRunState Started"),!i.Api.isApiParamsSet())return;if(!e)return;if(!this.treeDataProvider)return;if(e.IsPaused)return void a.showWarningMessage(e.DagId+"Dag is PAUSED");let t=await i.Api.getLastDagRun(e.DagId);t.isSuccessful&&(e.LatestDagRunId=t.result.dag_run_id,e.LatestDagState=t.result.state,e.refreshUI(),this.treeDataProvider.refresh(),e.isDagRunning&&(this.dagStatusInterval?this.dagStatusInterval.refresh():this.dagStatusInterval=setInterval(this.refreshRunningDagState,1e4,this)))}async pauseDAG(e){a.logToOutput("DagTreeView.pauseDAG Started"),i.Api.isApiParamsSet()&&(e.IsPaused?a.showWarningMessage(e.DagId+"Dag is already PAUSED"):(await i.Api.pauseDag(e.DagId,!0)).isSuccessful&&(e.IsPaused=!0,e.refreshUI(),this.treeDataProvider.refresh()))}async notifyDagPaused(e){if(a.logToOutput("DagTreeView.notifyDagPaused Started"),this.treeDataProvider)for(var t of this.treeDataProvider.visibleDagList)t.DagId===e&&(t.IsPaused=!0,t.refreshUI(),this.treeDataProvider.refresh())}async notifyDagUnPaused(e){if(a.logToOutput("DagTreeView.notifyDagPaused Started"),this.treeDataProvider)for(var t of this.treeDataProvider.visibleDagList)t.DagId===e&&(t.IsPaused=!1,t.refreshUI(),this.treeDataProvider.refresh())}async unPauseDAG(e){a.logToOutput("DagTreeView.unPauseDAG Started"),i.Api.isApiParamsSet()&&(e.IsPaused?(await i.Api.pauseDag(e.DagId,!1)).isSuccessful&&(e.IsPaused=!1,e.refreshUI(),this.treeDataProvider.refresh()):a.showInfoMessage(e.DagId+"Dag is already UNPAUSED"))}async lastDAGRunLog(e){if(a.logToOutput("DagTreeView.lastDAGRunLog Started"),!i.Api.isApiParamsSet())return;let t=await i.Api.getLastDagRunLog(e.DagId);if(t.isSuccessful){const o=r(83);var n=r(896);const s=o.fileSync({mode:420,prefix:e.DagId,postfix:".log"});n.appendFileSync(s.name,t.result),a.openFile(s.name)}}async dagSourceCode(e){if(a.logToOutput("DagTreeView.dagSourceCode Started"),!i.Api.isApiParamsSet())return;let t=await i.Api.getSourceCode(e.DagId,e.FileToken);if(t.isSuccessful){const o=r(83);var n=r(896);const s=o.fileSync({mode:420,prefix:e.DagId,postfix:".py"});n.appendFileSync(s.name,t.result),a.openFile(s.name)}}async filter(){a.logToOutput("DagTreeView.filter Started");let e=await n.window.showInputBox({value:this.filterString,placeHolder:"Enter your filters seperated by comma"});void 0!==e&&(this.filterString=e,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState())}async showOnlyActive(){a.logToOutput("DagTreeView.showOnlyActive Started"),this.ShowOnlyActive=!this.ShowOnlyActive,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState()}async showOnlyFavorite(){a.logToOutput("DagTreeView.showOnlyFavorite Started"),this.ShowOnlyFavorite=!this.ShowOnlyFavorite,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState()}async addServer(){a.logToOutput("DagTreeView.addServer Started");let e=await n.window.showInputBox({value:"http://localhost:8080/api/v1",placeHolder:"API Full URL (Exp:http://localhost:8080/api/v1)"});if(!e)return;let t=await n.window.showInputBox({placeHolder:"User Name"});if(!t)return;let r=await n.window.showInputBox({placeHolder:"Password"});r&&(this.ServerList.push({apiUrl:e,apiUserName:t,apiPassword:r}),i.Api.apiUrl=e,i.Api.apiUserName=t,i.Api.apiPassword=r,this.saveState(),this.refresh())}async removeServer(){if(a.logToOutput("DagTreeView.removeServer Started"),0===this.ServerList.length)return;var e=[];for(var t of this.ServerList)e.push(t.apiUrl+" - "+t.apiUserName);let r=(await n.window.showQuickPick(e,{canPickMany:!1,placeHolder:"Select To Remove"})).split(" - ");r[0]&&(this.ServerList=this.ServerList.filter((e=>!(e.apiUrl===r[0]&&e.apiUserName===r[1]))),this.saveState(),a.showInfoMessage("Server removed, you can remain working on it or connect a new one."))}async connectServer(){if(a.logToOutput("DagTreeView.connectServer Started"),0===this.ServerList.length)return void this.addServer();var e=[];for(var t of this.ServerList)e.push(t.apiUrl+" - "+t.apiUserName);let r=(await n.window.showQuickPick(e,{canPickMany:!1,placeHolder:"Select To Connect"})).split(" - ");if(r[0]){var o=this.ServerList.find((e=>e.apiUrl===r[0]&&e.apiUserName===r[1]));i.Api.apiUrl=r[0],i.Api.apiUserName=o.apiUserName,i.Api.apiPassword=o.apiPassword,this.saveState(),this.refresh()}}async clearServers(){a.logToOutput("DagTreeView.clearServers Started"),this.ServerList=[],this.saveState(),a.showInfoMessage("Server List Cleared")}async loadDags(){if(a.logToOutput("DagTreeView.loadDags Started"),!i.Api.isApiParamsSet())return;this.dagList=void 0,this.treeDataProvider.dagList=this.dagList;let e=await i.Api.getDagList();e.isSuccessful&&(this.dagList=e.result,this.treeDataProvider.dagList=this.dagList,this.treeDataProvider.loadDagTreeItemsFromApiResponse()),this.treeDataProvider.refresh(),this.setViewTitle()}async setViewTitle(){i.Api.apiUrl&&i.Api.apiUserName&&(this.view.title=i.Api.apiUrl+" - "+i.Api.apiUserName)}async getImportErrors(){if(a.logToOutput("DagTreeView.getImportErrors Started"),!i.Api.isApiParamsSet())return;let e=await i.Api.getImportErrors();e.isSuccessful&&(this.ImportErrorsJson=e.result,this.ImportErrorsJson.total_entries>0&&a.showOutputMessage(e.result,"Import Dag Errors! Check Output Panel"))}saveState(){a.logToOutput("DagTreeView.saveState Started");try{this.context.globalState.update("apiUrl",i.Api.apiUrl),this.context.globalState.update("apiUserName",i.Api.apiUserName),this.context.globalState.update("apiPassword",i.Api.apiPassword),this.context.globalState.update("filterString",this.filterString),this.context.globalState.update("ShowOnlyActive",this.ShowOnlyActive),this.context.globalState.update("ShowOnlyFavorite",this.ShowOnlyFavorite),this.context.globalState.update("ServerList",this.ServerList)}catch(e){a.logToOutput("dagTreeView.saveState Error !!!",e)}}setFilterMessage(){this.view.message=this.getBoolenSign(this.ShowOnlyFavorite)+"Fav, "+this.getBoolenSign(this.ShowOnlyActive)+"Active, Filter : "+this.filterString}getBoolenSign(e){return e?"✓":"𐄂"}loadState(){a.logToOutput("DagTreeView.loadState Started");try{let e=this.context.globalState.get("apiUrl");e&&(i.Api.apiUrl=e);let t=this.context.globalState.get("apiUserName");t&&(i.Api.apiUserName=t);let r=this.context.globalState.get("apiPassword");r&&(i.Api.apiPassword=r);let n=this.context.globalState.get("filterString");n&&(this.filterString=n,this.setFilterMessage());let o=this.context.globalState.get("ShowOnlyActive");o&&(this.ShowOnlyActive=o);let s=this.context.globalState.get("ShowOnlyFavorite");s&&(this.ShowOnlyFavorite=s),e&&!this.ServerList.find((t=>t.apiUrl===e))&&this.ServerList.push({apiUrl:e,apiUserName:t,apiPassword:r});let a=this.context.globalState.get("ServerList");a&&(this.ServerList=a)}catch(e){a.logToOutput("dagTreeView.loadState Error !!!",e)}}}t.DagTreeView=l},777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagView=void 0;const n=r(398),o=r(60),s=r(300),a=r(537);class i{constructor(e,t,r){this._disposables=[],this.activetabid="tab-1",o.logToOutput("DagView.constructor Started"),this.dagId=r,this.extensionUri=t,this._panel=e,this._panel.onDidDispose(this.dispose,null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadAllDagData(),o.logToOutput("DagView.constructor Completed")}resetDagData(){this.activetabid="tab-1",this.triggeredDagRunId=void 0,this.dagJson=void 0,this.dagRunJson=void 0,this.dagRunHistoryJson=void 0,this.dagTaskInstancesJson=void 0,this.dagTasksJson=void 0,this.stopCheckingDagRunStatus()}async loadAllDagData(){o.logToOutput("DagView.loadAllDagData Started"),await this.getDagInfo(),await this.getLastRun(),await this.getDagTasks(),await this.renderHmtl()}async loadDagDataOnly(){o.logToOutput("DagView.loadDagDataOnly Started"),await this.getDagInfo(),await this.renderHmtl()}async renderHmtl(){o.logToOutput("DagView.renderHmtl Started"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,this.extensionUri),o.logToOutput("DagView.renderHmtl Completed")}static render(e,t){if(o.logToOutput("DagView.render Started"),i.Current)this.Current.dagId=t,i.Current._panel.reveal(n.ViewColumn.Two),i.Current.resetDagData(),i.Current.loadAllDagData();else{const r=n.window.createWebviewPanel("dagView","Dag View",n.ViewColumn.Two,{enableScripts:!0});i.Current=new i(r,e,t)}}async getLastRun(){if(o.logToOutput("DagView.getLastRun Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getLastDagRun(this.dagId);e.isSuccessful&&(this.dagRunJson=e.result,this.getTaskInstances(this.dagRunJson.dag_run_id),this.dagRunJson&&"running"===this.dagRunJson.state&&this.startCheckingDagRunStatus(this.dagRunJson.dag_run_id))}async getDagRun(e,t){if(o.logToOutput("DagView.getDagRun Started"),!s.Api.isApiParamsSet())return;let r=await s.Api.getDagRun(e,t);r.isSuccessful&&(this.dagRunJson=r.result,this.getTaskInstances(this.dagRunJson.dag_run_id)),await this.renderHmtl()}async getRunHistory(){if(o.logToOutput("DagView.getRunHistory Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getDagRunHistory(this.dagId,10);e.isSuccessful&&(this.dagRunHistoryJson=e.result)}async getTaskInstances(e){if(o.logToOutput("DagView.getTaskInstances Started"),!s.Api.isApiParamsSet())return;let t=await s.Api.getTaskInstances(this.dagId,e);t.isSuccessful&&(this.dagTaskInstancesJson=t.result)}async getDagInfo(){if(o.logToOutput("DagView.getDagInfo Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getDagInfo(this.dagId);e.isSuccessful&&(this.dagJson=e.result)}async getDagTasks(){if(o.logToOutput("DagView.getDagTasks Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getDagTasks(this.dagId);e.isSuccessful&&(this.dagTasksJson=e.result)}dispose(){for(o.logToOutput("DagView.dispose Started"),i.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("DagView._getWebviewContent Started");const r=o.getUri(e,t,["node_modules","@vscode","webview-ui-toolkit","dist","toolkit.js"]),n=o.getUri(e,t,["media","main.js"]),s=o.getUri(e,t,["media","style.css"]);let a,i,l,c="",u="",d="",h="",f=!1,p=!1;this.dagRunJson&&(c=this.dagRunJson.state,a=this.dagRunJson.logical_date,i=this.dagRunJson.start_date,l=this.dagRunJson.end_date,u=new Date(a).toLocaleDateString(),d=new Date(i).toLocaleString(),h=o.getDuration(new Date(i),new Date(l)),f="queued"===c||"running"===c,p=!0);let g="";if(this.dagTaskInstancesJson)for(var m of this.dagTaskInstancesJson.task_instances)"running"!==m.state&&"failed"!==m.state||(g+=m.task_id+", ");let b=this.dagJson?this.dagJson.owners.join(", "):"",y="";this.dagJson.tags.forEach((e=>{y+=e.name+", "}));let w=this.dagJson&&this.dagJson.schedule_interval&&this.dagJson.schedule_interval.value?this.dagJson.schedule_interval.value:"",v=this.dagJson?this.dagJson.is_paused?"true":"false":"unknown",_="true"===v,S="";if(this.dagTaskInstancesJson)for(var m of this.dagTaskInstancesJson.task_instances.sort(((e,t)=>e.start_date>t.start_date?1:-1)))S+=`\n                <tr>\n                    <td>\n                        <div style="display: flex; align-items: center;">\n                            <div class="state-${m.state}" title="${m.state}" ></div>\n                            &nbsp; ${m.task_id} (${m.try_number})\n                        </div>\n                    </td>\n                    <td><vscode-link id="task-log-link-${m.task_id}">Log</vscode-link></td>\n                    <td>${o.getDuration(new Date(m.start_date),new Date(m.end_date))}</td>\n                    <td>${m.operator}</td>\n                </tr>\n                `;let T="";if(this.dagRunHistoryJson)for(var m of this.dagRunHistoryJson.dag_runs)T+=`\n                <tr>\n                    <td>\n                        <div style="display: flex; align-items: center;">\n                            <div class="state-${m.state}" title="${m.state}"></div>\n                            &nbsp; ${m.state}\n                        </div>\n                    </td>\n                    <td><vscode-link id="history-dag-run-id-${m.dag_run_id}">${new Date(m.start_date).toLocaleString()}</vscode-link></td>\n                    <td>${o.getDuration(new Date(m.start_date),new Date(m.end_date))}</td>\n                </tr>\n                `;let R=`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${r}"><\/script>\n        <script type="module" src="${n}"><\/script>\n        <link rel="stylesheet" href="${s}">\n        <title>DAG</title>\n      </head>\n      <body>  \n\n\n        <div style="display: flex; align-items: center;">\n            <div class="dag-paused-${v}"></div>\n            &nbsp; &nbsp; <h2>${this.dagId}</h2>\n            <div style="visibility: ${f?"visible":"hidden"}; display: flex; align-items: center;">\n            &nbsp; &nbsp; <vscode-progress-ring></vscode-progress-ring>\n            </div>\n        </div>\n                    \n\n        <vscode-panels id="tab-control" activeid="${this.activetabid}">\n            <vscode-panel-tab id="tab-1">RUN</vscode-panel-tab>\n            <vscode-panel-tab id="tab-2">TASKS</vscode-panel-tab>\n            <vscode-panel-tab id="tab-3">INFO</vscode-panel-tab>\n            <vscode-panel-tab id="tab-4">PREV RUNS</vscode-panel-tab>\n            \n            <vscode-panel-view id="view-1">\n                \n            <section>\n\n                    <table>\n                        <tr>\n                            <th colspan=3>Last Run</th>\n                        </tr>\n                        <tr>\n                            <td>State</td>\n                            <td>:</td>\n                            <td>\n                                <div style="display: flex; align-items: center;">\n                                    <div class="state-${c}"></div> &nbsp; ${c}\n                                </div>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>Tasks</td>\n                            <td>:</td>\n                            <td>${g}</td>\n                        </tr>\n                        <tr>\n                            <td>Date</td>\n                            <td>:</td>\n                            <td>${u}</td>\n                        </tr>\n                        <tr>\n                            <td>StartDate</td>\n                            <td>:</td>\n                            <td>${d}</td>\n                        </tr>\n                        <tr>\n                            <td>Duration</td>\n                            <td>:</td>\n                            <td>${h}</td>\n                        </tr>\n                        <tr>\n                            <td colspan="3">\n                                <vscode-button appearance="secondary" id="run-lastrun-check" ${_?"disabled":""}>Check</vscode-button>  \n                                <vscode-button appearance="secondary" id="run-lastrun-cancel" ${_||!f?"disabled":""}>Cancel</vscode-button>     \n                                <vscode-button appearance="secondary" id="run-view-log" ${p?"":"disabled"}>View Log</vscode-button>  \n                                <vscode-button appearance="secondary" id="run-more-dagrun-detail" ${p?"":"disabled"}>More</vscode-button>\n                            </td>\n                        </tr>\n                    </table>\n            \n                    <br>\n            \n                    <table>\n                        <tr>\n                            <th colspan="3">Trigger</th>\n                        </tr>\n                        <tr>\n                            <td>Date</td>\n                            <td>:</td>\n                            <td><vscode-text-field size="30" id="run_date" placeholder="YYYY-MM-DD (Optional)" maxlength="10"></vscode-text-field></td>\n                        </tr>\n                        <tr>\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><vscode-text-area id="run_config" cols="50" placeholder="Config in JSON Format (Optional)"></vscode-text-area></td>\n                        </tr>\n                        <tr>           \n                            <td colspan="3"><vscode-button appearance="secondary" id="run-trigger-dag" ${_?"disabled":""}>\n                            Run\n                            </vscode-button></td>\n                        </tr>\n                    </table>\n\n                    <br>\n\n                    <table>\n                        <tr>\n                            <th colspan="3">\n                            <vscode-button appearance="secondary" id="run-pause-dag" ${_?"disabled":""}>\n                            Pause\n                            </vscode-button>\n                            <vscode-button appearance="secondary" id="run-unpause-dag" ${_?"":"disabled"}>\n                            Un Pause\n                            </vscode-button>\n                            </th>\n                        </tr>\n                    </table>\n\n                    <br>\n                    <br>\n                    <br>\n                    \n                    <table>\n                        <tr>\n                            <td colspan="3">\n                                <vscode-link href="https://github.com/necatiarslan/airflow-vscode-extension/issues/new">Bug Report & Feature Request</vscode-link>\n                            </td>\n                        </tr>\n                    </table>\n                    <table>\n                        <tr>\n                            <td colspan="3">\n                                <vscode-link href="https://bit.ly/airflow-extension-survey">New Feature Survey</vscode-link>\n                            </td>\n                        </tr>\n                    </table>\n                    <table>\n                        <tr>\n                            <td colspan="3">\n                                <vscode-link href="https://github.com/sponsors/necatiarslan">Support Me</vscode-link>\n                            </td>\n                        </tr>\n                    </table>\n            </section>\n            </vscode-panel-view>\n\n\n            <vscode-panel-view id="view-2">\n\n            <section>\n\n                    <table>\n                        <tr>\n                            <th colspan="4">Tasks</th>\n                        </tr>\n                        <tr>\n                            <td>Task</td>\n                            <td></td>\n                            <td>Duration</td>            \n                            <td>Operator</td>\n                        </tr>\n\n                        ${S}\n\n                        <tr>          \n                            <td colspan="4">\n                                <vscode-button appearance="secondary" id="tasks-refresh">Refresh</vscode-button>\n                                <vscode-button appearance="secondary" id="tasks-more-detail" ${this.dagTaskInstancesJson?"":"disabled"}>More</vscode-button>\n                            </td>\n                        </tr>\n                    </table>\n\n            </section>\n            </vscode-panel-view>\n            \n            <vscode-panel-view id="view-3">\n            <section>\n\n                    <table>\n                    <tr>\n                        <th colspan=3>Other</th>\n                    </tr>\n                    <tr>\n                        <td>Owners</td>\n                        <td>:</td>\n                        <td>${b}</td>\n                    </tr>\n                    <tr>\n                        <td>Tags</td>\n                        <td>:</td>\n                        <td>${y}</td>\n                    </tr>\n                    <tr>\n                        <td>Schedule</td>\n                        <td>:</td>\n                        <td>${w}</td>\n                    </tr>\n                    <tr>           \n                        <td colspan="3"><vscode-button appearance="secondary" id="info-source-code">Source Code</vscode-button> <vscode-button appearance="secondary" id="other-dag-detail">More</vscode-button></td>\n                    </tr>\n                    </table>\n\n            </section>\n            </vscode-panel-view>\n\n            <vscode-panel-view id="view-4">\n\n            <section>\n    \n                    <table>\n                        <tr>\n                            <th colspan=3>PREV RUNS</th>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>Start Time</td>            \n                            <td>Duration</td>\n                        </tr>\n                        ${T}\n\n                        <tr>\n                            <td colspan="3"><vscode-button appearance="secondary" id="rev-runs-refresh">Refresh</vscode-button></td>\n                        </tr>\n                    </table>   \n    \n            </section>\n            </vscode-panel-view>\n\n        </vscode-panels>\n      </body>\n    </html>\n    `;return o.logToOutput("DagView._getWebviewContent Completed"),R}_setWebviewMessageListener(e){o.logToOutput("DagView._setWebviewMessageListener Started"),e.onDidReceiveMessage((e=>{const t=e.command;let r=e.activetabid;switch(["tab-1","tab-2","tab-3","tab-4"].includes(r)&&(this.activetabid=e.activetabid),o.logToOutput("DagView._setWebviewMessageListener Message Received "+e.command),t){case"run-trigger-dag":return void this.triggerDagWConfig(e.config,e.date);case"run-view-log":return void this.showLastDAGRunLog();case"run-more-dagrun-detail":return void o.showOutputMessage(this.dagRunJson);case"other-dag-detail":return void o.showOutputMessage(this.dagJson);case"tasks-more-detail":return void o.showOutputMessage(this.dagTaskInstancesJson);case"rev-runs-refresh":return void this.getRunHistoryAndRenderHtml();case"info-source-code":return void this.showSourceCode();case"run-pause-dag":return void this.pauseDAG(!0);case"run-unpause-dag":return void this.pauseDAG(!1);case"run-lastrun-check":return this.getLastRun(),void(this.dagRunJson&&this.startCheckingDagRunStatus(this.dagRunJson.dag_run_id));case"run-lastrun-cancel":return void(this.dagRunJson&&this.cancelDagRun(this.dagRunJson.dag_run_id));case"history-dag-run-id":let t=e.id;return t=t.replace("history-dag-run-id-",""),this.activetabid="tab-1",void this.getDagRun(this.dagId,t);case"task-log-link":let r=e.id;return r=r.replace("task-log-link-",""),void this.showLastTaskInstanceLog(this.dagId,this.dagRunJson.dag_run_id,r);case"tasks-refresh":return void this.getTasksAndRenderHtml();case"tabControlChanged":return this.activetabid=e.activeid,void o.logToOutput("tab changed to "+e.activeid)}}),void 0,this._disposables)}async getTasksAndRenderHtml(){this.getDagTasks(),this.renderHmtl()}async cancelDagRun(e){o.logToOutput("DagView.cancelDagRun Started"),s.Api.isApiParamsSet()&&(await s.Api.cancelDagRun(this.dagId,e)).isSuccessful}async pauseDAG(e){o.logToOutput("DagTreeView.pauseDAG Started"),s.Api.isApiParamsSet()&&(e&&this.dagJson.is_paused?o.showWarningMessage(this.dagId+"Dag is already PAUSED"):e||this.dagJson.is_paused?(await s.Api.pauseDag(this.dagId,e)).isSuccessful&&(this.loadDagDataOnly(),e?a.DagTreeView.Current.notifyDagPaused(this.dagId):a.DagTreeView.Current.notifyDagUnPaused(this.dagId)):o.showWarningMessage(this.dagId+"Dag is already ACTIVE"))}async showSourceCode(){if(o.logToOutput("DagView.showSourceCode Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getSourceCode(this.dagId,this.dagJson.file_token);if(e.isSuccessful){const n=r(83);var t=r(896);const s=n.fileSync({mode:420,prefix:this.dagId,postfix:".py"});t.appendFileSync(s.name,e.result),o.openFile(s.name)}}async getRunHistoryAndRenderHtml(){o.logToOutput("DagView.getRunHistoryAndRenderHtml Started"),await this.getRunHistory(),await this.renderHmtl()}async showLastDAGRunLog(){if(o.logToOutput("DagView.lastDAGRunLog Started"),!s.Api.isApiParamsSet())return;let e=await s.Api.getLastDagRunLog(this.dagId);if(e.isSuccessful){const n=r(83);var t=r(896);const s=n.fileSync({mode:420,prefix:this.dagId,postfix:".log"});t.appendFileSync(s.name,e.result),o.openFile(s.name)}}async showLastTaskInstanceLog(e,t,n){if(o.logToOutput("DagView.showLastTaskInstanceLog Started"),!s.Api.isApiParamsSet())return;let a=await s.Api.getTaskInstanceLog(e,t,n);if(a.isSuccessful){const t=r(83);var i=r(896);const s=t.fileSync({mode:420,prefix:e+"-"+n,postfix:".log"});i.appendFileSync(s.name,a.result),o.openFile(s.name)}}async triggerDagWConfig(e="",t=""){if(o.logToOutput("DagView.triggerDagWConfig Started"),s.Api.isApiParamsSet())if(!e||o.isJsonString(e))if(!t||o.isValidDate(t)){if(e||(e="{}"),void 0!==e){let t=await s.Api.triggerDag(this.dagId,e);t.isSuccessful&&(this.startCheckingDagRunStatus(t.result.dag_run_id),a.DagTreeView.Current.notifyDagStateWithDagId(this.dagId))}}else o.showWarningMessage("Date is not a valid DATE");else o.showWarningMessage("Config is not a valid JSON")}async startCheckingDagRunStatus(e){o.logToOutput("DagView.startCheckingDagRunStatus Started"),this.triggeredDagRunId=e,await this.refreshRunningDagState(this),this.dagStatusInterval&&clearInterval(this.dagStatusInterval),this.dagStatusInterval=setInterval(this.refreshRunningDagState,5e3,this)}async stopCheckingDagRunStatus(){o.logToOutput("DagView.stopCheckingDagRunStatus Started"),this.dagStatusInterval&&clearInterval(this.dagStatusInterval)}async refreshRunningDagState(e){if(o.logToOutput("DagView.refreshRunningDagState Started"),!s.Api.isApiParamsSet())return;if(!e.dagId||!e.triggeredDagRunId)return void e.stopCheckingDagRunStatus();let t=await s.Api.getDagRun(e.dagId,e.triggeredDagRunId);if(!t.isSuccessful)return void e.stopCheckingDagRunStatus();{e.dagRunJson=t.result;let r=await s.Api.getTaskInstances(e.dagId,e.triggeredDagRunId);t.isSuccessful&&(e.dagTaskInstancesJson=r.result)}let r=e.dagRunJson?e.dagRunJson.state:"";"queued"===r||"running"===r||e.stopCheckingDagRunStatus(),e.renderHmtl()}}t.DagView=i},606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodResult=void 0,t.MethodResult=class{}},60:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=t.isJsonString=t.convertMsToTime=t.getDuration=t.openFile=t.getExtensionVersion=t.showApiErrorMessage=t.showErrorMessage=t.showWarningMessage=t.showInfoMessage=t.logToOutput=t.showOutputMessage=t.getUri=void 0;const n=r(398),o=r(398),s=r(896),a=r(928);var i,l;function c(e){n.window.showInformationMessage(e)}function u(e){return e.toString().padStart(2,"0")}function d(e){let t=Math.floor(e/1e3),r=Math.floor(t/60);const n=Math.floor(r/60);return t%=60,r%=60,`${u(n)}:${u(r)}:${u(t)}`}t.getUri=function(e,t,r){return e.asWebviewUri(o.Uri.joinPath(t,...r))},t.showOutputMessage=function(e,t="Results are printed to OUTPUT / Airflow-Extension"){i||(i=n.window.createOutputChannel("Airflow-Extension")),i.clear(),"object"==typeof e?i.appendLine(JSON.stringify(e,null,4)):i.appendLine(e),i.show(),c(t)},t.logToOutput=function(e,t=void 0){let r=(new Date).toLocaleString();l||(l=n.window.createOutputChannel("Airflow-Log")),"object"==typeof e?l.appendLine("["+r+"] "+JSON.stringify(e,null,4)):l.appendLine("["+r+"] "+e),t&&(l.appendLine(t.name),l.appendLine(t.message),l.appendLine(t.stack))},t.showInfoMessage=c,t.showWarningMessage=function(e){n.window.showWarningMessage(e)},t.showErrorMessage=function(e,t=void 0){t?n.window.showErrorMessage(e+"\n\n"+t.name+"\n\n"+t.message):n.window.showErrorMessage(e)},t.showApiErrorMessage=function(e,t){let r="";t?403===t.status?(r="Permission Denied !!!",n.window.showErrorMessage(r)):401===t.status?(r="Invalid Authentication Info !!!",n.window.showErrorMessage(r)):404===t.status?(r="Resource Not Found !!!",n.window.showErrorMessage(r)):n.window.showErrorMessage(r):n.window.showErrorMessage(e)},t.getExtensionVersion=function(){const{version:e}=JSON.parse((0,s.readFileSync)((0,a.join)(__dirname,"..","package.json"),{encoding:"utf8"}));return e},t.openFile=function(e){n.commands.executeCommand("vscode.open",n.Uri.file(e),n.ViewColumn.One)},t.getDuration=function(e,t){return e?((!t||t<e)&&(t=new Date),d(t.valueOf()-e.valueOf())):""},t.convertMsToTime=d,t.isJsonString=function(e){try{return"object"==typeof JSON.parse(e)}catch(e){return!1}},t.isValidDate=function(e){if(!e.match(/^\d{4}-\d{2}-\d{2}$/))return!1;var t=new Date(e),r=t.getTime();return!(!r&&0!==r)&&t.toISOString().slice(0,10)===e}},10:function(e,t){var r;r=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function r(){}const n="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function o(e){return"object"==typeof e&&null!==e||"function"==typeof e}const s=r,a=Promise,i=Promise.prototype.then,l=Promise.resolve.bind(a),c=Promise.reject.bind(a);function u(e){return new a(e)}function d(e){return l(e)}function h(e){return c(e)}function f(e,t,r){return i.call(e,t,r)}function p(e,t,r){f(f(e,t,r),void 0,s)}function g(e,t){p(e,t)}function m(e,t){p(e,void 0,t)}function b(e,t,r){return f(e,t,r)}function y(e){f(e,void 0,s)}const w=(()=>{const e=n&&n.queueMicrotask;if("function"==typeof e)return e;const t=d(void 0);return e=>f(t,e)})();function v(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function _(e,t,r){try{return d(v(e,t,r))}catch(e){return h(e)}}class S{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let n=r+1;const o=e._elements,s=o[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,s}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&void 0===r._next||t===n.length&&(r=r._next,n=r._elements,t=0,0===n.length));)e(n[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function T(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?A(e):"closed"===t._state?function(e){A(e),P(e)}(e):O(e,t._storedError)}function R(e,t){return vr(e._ownerReadableStream,t)}function E(e){"readable"===e._ownerReadableStream._state?k(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e){O(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function D(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function A(e){e._closedPromise=u(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function O(e,t){A(e),k(e,t)}function k(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function P(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const C=t("[[AbortSteps]]"),I=t("[[ErrorSteps]]"),L=t("[[CancelSteps]]"),j=t("[[PullSteps]]"),M=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},x=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function q(e,t){if(void 0!==e&&"object"!=typeof(r=e)&&"function"!=typeof r)throw new TypeError(`${t} is not an object.`);var r}function F(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function $(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function U(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function B(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function W(e){return Number(e)}function N(e){return 0===e?0:e}function V(e,t){const r=Number.MAX_SAFE_INTEGER;let n=Number(e);if(n=N(n),!M(n))throw new TypeError(`${t} is not a finite number`);if(n=function(e){return N(x(e))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return M(n)&&0!==n?n:0}function z(e,t){if(!yr(e))throw new TypeError(`${t} is not a ReadableStream.`)}function H(e){return new X(e)}function G(e,t){e._reader._readRequests.push(t)}function J(e,t,r){const n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function Q(e){return e._reader._readRequests.length}function Y(e){const t=e._reader;return void 0!==t&&!!Z(t)}class X{constructor(e){if(U(e,1,"ReadableStreamDefaultReader"),z(e,"First parameter"),wr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");T(this,e),this._readRequests=new S}get closed(){return Z(this)?this._closedPromise:h(ee("closed"))}cancel(e=void 0){return Z(this)?void 0===this._ownerReadableStream?h(D("cancel")):R(this,e):h(ee("cancel"))}read(){if(!Z(this))return h(ee("read"));if(void 0===this._ownerReadableStream)return h(D("read from"));let e,t;const r=u(((r,n)=>{e=r,t=n}));return K(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!Z(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");E(this)}}}function Z(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof X}function K(e,t){const r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[j](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(X.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(X.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class re{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?b(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?b(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return h(D("iterate"));let t,r;const n=u(((e,n)=>{t=e,r=n}));return K(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,w((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,E(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,E(e),r(t)}}),n}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return h(D("finish iterating"));if(!this._preventCancel){const r=R(t,e);return E(t),b(r,(()=>({value:e,done:!0})))}return E(t),d({value:e,done:!0})}}const ne={next(){return oe(this)?this._asyncIteratorImpl.next():h(se("next"))},return(e){return oe(this)?this._asyncIteratorImpl.return(e):h(se("return"))}};function oe(e){if(!o(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof re}catch(e){return!1}}function se(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(ne,te);const ae=Number.isNaN||function(e){return e!=e};function ie(e){return e.slice()}function le(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function ce(e,t,r){if(e.slice)return e.slice(t,r);const n=r-t,o=new ArrayBuffer(n);return le(o,0,e,t,n),o}function ue(e){const t=ce(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function de(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function he(e,t,r){if("number"!=typeof(n=r)||ae(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function fe(e){e._queue=new S,e._queueTotalSize=0}class pe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!be(this))throw $e("view");return this._view}respond(e){if(!be(this))throw $e("respond");if(U(e,1,"respond"),e=V(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,xe(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!be(this))throw $e("respondWithNewView");if(U(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,qe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(pe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(pe.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ge{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!me(this))throw Ue("byobRequest");return je(this)}get desiredSize(){if(!me(this))throw Ue("desiredSize");return Me(this)}close(){if(!me(this))throw Ue("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ce(this)}enqueue(e){if(!me(this))throw Ue("enqueue");if(U(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Ie(this,e)}error(e=void 0){if(!me(this))throw Ue("error");Le(this,e)}[L](e){we(this),fe(this);const t=this._cancelAlgorithm(e);return Pe(this),t}[j](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Ee(this);const r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(r)}const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}G(t,e),ye(this)}}function me(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof ge}function be(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof pe}function ye(e){const t=function(e){const t=e._controlledReadableByteStream;if("readable"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(Y(t)&&Q(t)>0)return!0;if(Ve(t)&&Ne(t)>0)return!0;return Me(e)>0}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ye(e))}),(t=>{Le(e,t)}))))}function we(e){De(e),e._pendingPullIntos=new S}function ve(e,t){let r=!1;"closed"===e._state&&(r=!0);const n=_e(t);"default"===t.readerType?J(e,n,r):function(e,t,r){const n=e._reader._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,n,r)}function _e(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Se(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function Te(e,t){const r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),s=t.bytesFilled+o,a=s-s%r;let i=o,l=!1;a>n&&(i=a-t.bytesFilled,l=!0);const c=e._queue;for(;i>0;){const r=c.peek(),n=Math.min(i,r.byteLength),o=t.byteOffset+t.bytesFilled;le(t.buffer,o,r.buffer,r.byteOffset,n),r.byteLength===n?c.shift():(r.byteOffset+=n,r.byteLength-=n),e._queueTotalSize-=n,Re(0,n,t),i-=n}return l}function Re(e,t,r){r.bytesFilled+=t}function Ee(e){0===e._queueTotalSize&&e._closeRequested?(Pe(e),_r(e._controlledReadableByteStream)):ye(e)}function De(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ae(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Te(e,t)&&(ke(e),ve(e._controlledReadableByteStream,t))}}function Oe(e,t){const r=e._pendingPullIntos.peek();De(e),"closed"===e._controlledReadableByteStream._state?function(e){const t=e._controlledReadableByteStream;if(Ve(t))for(;Ne(t)>0;)ve(t,ke(e))}(e):function(e,t,r){if(Re(0,t,r),r.bytesFilled<r.elementSize)return;ke(e);const n=r.bytesFilled%r.elementSize;if(n>0){const t=r.byteOffset+r.bytesFilled,o=ce(r.buffer,t-n,t);Se(e,o,0,o.byteLength)}r.bytesFilled-=n,ve(e._controlledReadableByteStream,r),Ae(e)}(e,t,r),ye(e)}function ke(e){return e._pendingPullIntos.shift()}function Pe(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ce(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Le(e,t),t}Pe(e),_r(t)}}function Ie(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;const n=t.buffer,o=t.byteOffset,s=t.byteLength,a=n;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}De(e),Y(r)?0===Q(r)?Se(e,a,o,s):(e._pendingPullIntos.length>0&&ke(e),J(r,new Uint8Array(a,o,s),!1)):Ve(r)?(Se(e,a,o,s),Ae(e)):Se(e,a,o,s),ye(e)}function Le(e,t){const r=e._controlledReadableByteStream;"readable"===r._state&&(we(e),fe(e),Pe(e),Sr(r,t))}function je(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(pe.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(n,e,r),e._byobRequest=n}return e._byobRequest}function Me(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function xe(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer,Oe(e,t)}function qe(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=t.byteLength;r.buffer=t.buffer,Oe(e,n)}function Fe(e,t,r,n,o,s,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,fe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=a,t._pendingPullIntos=new S,e._readableStreamController=t,p(d(r()),(()=>{t._started=!0,ye(t)}),(e=>{Le(t,e)}))}function $e(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ue(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Be(e){return new ze(e)}function We(e,t){e._reader._readIntoRequests.push(t)}function Ne(e){return e._reader._readIntoRequests.length}function Ve(e){const t=e._reader;return void 0!==t&&!!He(t)}Object.defineProperties(ge.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ge.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class ze{constructor(e){if(U(e,1,"ReadableStreamBYOBReader"),z(e,"First parameter"),wr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!me(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");T(this,e),this._readIntoRequests=new S}get closed(){return He(this)?this._closedPromise:h(Je("closed"))}cancel(e=void 0){return He(this)?void 0===this._ownerReadableStream?h(D("cancel")):R(this,e):h(Je("cancel"))}read(e){if(!He(this))return h(Je("read"));if(!ArrayBuffer.isView(e))return h(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return h(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return h(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return h(D("read from"));let t,r;const n=u(((e,n)=>{t=e,r=n}));return Ge(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>r(e)}),n}releaseLock(){if(!He(this))throw Je("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");E(this)}}}function He(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof ze}function Ge(e,t,r){const n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){const n=e._controlledReadableByteStream;let o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);const s=t.constructor,a=t.buffer,i={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:s,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(i),void We(n,r);if("closed"!==n._state){if(e._queueTotalSize>0){if(Te(e,i)){const t=_e(i);return Ee(e),void r._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Le(e,t),void r._errorSteps(t)}}e._pendingPullIntos.push(i),We(n,r),ye(e)}else{const e=new s(i.buffer,i.byteOffset,0);r._closeSteps(e)}}(n._readableStreamController,t,r)}function Je(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Qe(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(ae(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Ye(e){const{size:t}=e;return t||(()=>1)}function Xe(e,t){q(e,t);const r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:W(r),size:void 0===n?void 0:Ze(n,`${t} has member 'size' that`)}}function Ze(e,t){return F(e,t),t=>W(e(t))}function Ke(e,t,r){return F(e,r),r=>_(e,t,[r])}function et(e,t,r){return F(e,r),()=>_(e,t,[])}function tt(e,t,r){return F(e,r),r=>v(e,t,[r])}function rt(e,t,r){return F(e,r),(r,n)=>_(e,t,[r,n])}function nt(e,t){if(!lt(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(ze.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ze.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const ot="function"==typeof AbortController;class st{constructor(e={},t={}){void 0===e?e=null:$(e,"First parameter");const r=Xe(t,"Second parameter"),n=function(e,t){q(e,t);const r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,s=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:Ke(r,e,`${t} has member 'abort' that`),close:void 0===n?void 0:et(n,e,`${t} has member 'close' that`),start:void 0===o?void 0:tt(o,e,`${t} has member 'start' that`),write:void 0===a?void 0:rt(a,e,`${t} has member 'write' that`),type:s}}(e,"First parameter");if(it(this),void 0!==n.type)throw new RangeError("Invalid type is specified");const o=Ye(r);!function(e,t,r,n){const o=Object.create(Et.prototype);let s=()=>{},a=()=>d(void 0),i=()=>d(void 0),l=()=>d(void 0);void 0!==t.start&&(s=()=>t.start(o)),void 0!==t.write&&(a=e=>t.write(e,o)),void 0!==t.close&&(i=()=>t.close()),void 0!==t.abort&&(l=e=>t.abort(e)),At(e,o,s,a,i,l,r,n)}(this,n,Qe(r,1),o)}get locked(){if(!lt(this))throw jt("locked");return ct(this)}abort(e=void 0){return lt(this)?ct(this)?h(new TypeError("Cannot abort a stream that already has a writer")):ut(this,e):h(jt("abort"))}close(){return lt(this)?ct(this)?h(new TypeError("Cannot close a stream that already has a writer")):gt(this)?h(new TypeError("Cannot close an already-closing stream")):dt(this):h(jt("close"))}getWriter(){if(!lt(this))throw jt("getWriter");return at(this)}}function at(e){return new yt(e)}function it(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new S,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function lt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof st}function ct(e){return void 0!==e._writer}function ut(e,t){var r;if("closed"===e._state||"errored"===e._state)return d(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();const n=e._state;if("closed"===n||"errored"===n)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let o=!1;"erroring"===n&&(o=!0,t=void 0);const s=u(((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}}));return e._pendingAbortRequest._promise=s,o||ft(e,t),s}function dt(e){const t=e._state;if("closed"===t||"errored"===t)return h(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=u(((t,r)=>{const n={_resolve:t,_reject:r};e._closeRequest=n})),n=e._writer;var o;return void 0!==n&&e._backpressure&&"writable"===t&&Ht(n),he(o=e._writableStreamController,Rt,0),Pt(o),r}function ht(e,t){"writable"!==e._state?pt(e):ft(e,t)}function ft(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const n=e._writer;void 0!==n&&_t(n,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&pt(e)}function pt(e){e._state="errored",e._writableStreamController[I]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new S,void 0===e._pendingAbortRequest)return void mt(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void mt(e);p(e._writableStreamController[C](r._reason),(()=>{r._resolve(),mt(e)}),(t=>{r._reject(t),mt(e)}))}function gt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function mt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Ut(t,e._storedError)}function bt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Wt(e)}(r):Ht(r)),e._backpressure=t}Object.defineProperties(st.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(st.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class yt{constructor(e){if(U(e,1,"WritableStreamDefaultWriter"),nt(e,"First parameter"),ct(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!gt(e)&&e._backpressure?Wt(this):Vt(this),Ft(this);else if("erroring"===t)Nt(this,e._storedError),Ft(this);else if("closed"===t)Vt(this),Ft(this),Bt(this);else{const t=e._storedError;Nt(this,t),$t(this,t)}}get closed(){return wt(this)?this._closedPromise:h(xt("closed"))}get desiredSize(){if(!wt(this))throw xt("desiredSize");if(void 0===this._ownerWritableStream)throw qt("desiredSize");return function(e){const t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:kt(t._writableStreamController)}(this)}get ready(){return wt(this)?this._readyPromise:h(xt("ready"))}abort(e=void 0){return wt(this)?void 0===this._ownerWritableStream?h(qt("abort")):function(e,t){return ut(e._ownerWritableStream,t)}(this,e):h(xt("abort"))}close(){if(!wt(this))return h(xt("close"));const e=this._ownerWritableStream;return void 0===e?h(qt("close")):gt(e)?h(new TypeError("Cannot close an already-closing stream")):vt(this)}releaseLock(){if(!wt(this))throw xt("releaseLock");void 0!==this._ownerWritableStream&&St(this)}write(e=void 0){return wt(this)?void 0===this._ownerWritableStream?h(qt("write to")):Tt(this,e):h(xt("write"))}}function wt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof yt}function vt(e){return dt(e._ownerWritableStream)}function _t(e,t){"pending"===e._readyPromiseState?zt(e,t):function(e,t){Nt(e,t)}(e,t)}function St(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");_t(e,r),function(e,t){"pending"===e._closedPromiseState?Ut(e,t):function(e,t){$t(e,t)}(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Tt(e,t){const r=e._ownerWritableStream,n=r._writableStreamController,o=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Ct(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return h(qt("write to"));const s=r._state;if("errored"===s)return h(r._storedError);if(gt(r)||"closed"===s)return h(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===s)return h(r._storedError);const a=function(e){return u(((t,r)=>{const n={_resolve:t,_reject:r};e._writeRequests.push(n)}))}(r);return function(e,t,r){try{he(e,t,r)}catch(t){return void Ct(e,t)}const n=e._controlledWritableStream;gt(n)||"writable"!==n._state||bt(n,It(e)),Pt(e)}(n,t,o),a}Object.defineProperties(yt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(yt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Rt={};class Et{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Dt(this))throw Mt("abortReason");return this._abortReason}get signal(){if(!Dt(this))throw Mt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!Dt(this))throw Mt("error");"writable"===this._controlledWritableStream._state&&Lt(this,e)}[C](e){const t=this._abortAlgorithm(e);return Ot(this),t}[I](){fe(this)}}function Dt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Et}function At(e,t,r,n,o,s,a,i){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,fe(t),t._abortReason=void 0,t._abortController=function(){if(ot)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=i,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=s;const l=It(t);bt(e,l),p(d(r()),(()=>{t._started=!0,Pt(t)}),(r=>{t._started=!0,ht(e,r)}))}function Ot(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function kt(e){return e._strategyHWM-e._queueTotalSize}function Pt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void pt(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===Rt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),de(e);const r=e._closeAlgorithm();Ot(e),p(r,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Bt(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),ht(e,t)}(t,e)}))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);p(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(de(e),!gt(r)&&"writable"===t){const t=It(e);bt(r,t)}Pt(e)}),(t=>{"writable"===r._state&&Ot(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,ht(e,t)}(r,t)}))}(e,r)}function Ct(e,t){"writable"===e._controlledWritableStream._state&&Lt(e,t)}function It(e){return kt(e)<=0}function Lt(e,t){const r=e._controlledWritableStream;Ot(e),ft(r,t)}function jt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Mt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function xt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function qt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Ft(e){e._closedPromise=u(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function $t(e,t){Ft(e),Ut(e,t)}function Ut(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Bt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Wt(e){e._readyPromise=u(((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function Nt(e,t){Wt(e),zt(e,t)}function Vt(e){Wt(e),Ht(e)}function zt(e,t){void 0!==e._readyPromise_reject&&(y(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ht(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Et.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Et.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Gt="undefined"!=typeof DOMException?DOMException:void 0,Jt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Gt)?Gt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Qt(e,t,n,o,s,a){const i=H(e),l=at(t);e._disturbed=!0;let c=!1,b=d(void 0);return u(((w,v)=>{let _;if(void 0!==a){if(_=()=>{const r=new Jt("Aborted","AbortError"),n=[];o||n.push((()=>"writable"===t._state?ut(t,r):d(void 0))),s||n.push((()=>"readable"===e._state?vr(e,r):d(void 0))),O((()=>Promise.all(n.map((e=>e())))),!0,r)},a.aborted)return void _();a.addEventListener("abort",_)}var S,T,R;if(A(e,i._closedPromise,(e=>{o?k(!0,e):O((()=>ut(t,e)),!0,e)})),A(t,l._closedPromise,(t=>{s?k(!0,t):O((()=>vr(e,t)),!0,t)})),S=e,T=i._closedPromise,R=()=>{n?k():O((()=>function(e){const t=e._ownerWritableStream,r=t._state;return gt(t)||"closed"===r?d(void 0):"errored"===r?h(t._storedError):vt(e)}(l)))},"closed"===S._state?R():g(T,R),gt(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");s?k(!0,t):O((()=>vr(e,t)),!0,t)}function D(){const e=b;return f(b,(()=>e!==b?D():void 0))}function A(e,t,r){"errored"===e._state?r(e._storedError):m(t,r)}function O(e,r,n){function o(){p(e(),(()=>P(r,n)),(e=>P(!0,e)))}c||(c=!0,"writable"!==t._state||gt(t)?o():g(D(),o))}function k(e,r){c||(c=!0,"writable"!==t._state||gt(t)?P(e,r):g(D(),(()=>P(e,r))))}function P(e,t){St(l),E(i),void 0!==a&&a.removeEventListener("abort",_),e?v(t):w(void 0)}y(u(((e,t)=>{!function n(o){o?e():f(c?d(!0):f(l._readyPromise,(()=>u(((e,t)=>{K(i,{_chunkSteps:t=>{b=f(Tt(l,t),void 0,r),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),n,t)}(!1)})))}))}class Yt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Xt(this))throw ir("desiredSize");return or(this)}close(){if(!Xt(this))throw ir("close");if(!sr(this))throw new TypeError("The stream is not in a state that permits close");tr(this)}enqueue(e=void 0){if(!Xt(this))throw ir("enqueue");if(!sr(this))throw new TypeError("The stream is not in a state that permits enqueue");return rr(this,e)}error(e=void 0){if(!Xt(this))throw ir("error");nr(this,e)}[L](e){fe(this);const t=this._cancelAlgorithm(e);return er(this),t}[j](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=de(this);this._closeRequested&&0===this._queue.length?(er(this),_r(t)):Zt(this),e._chunkSteps(r)}else G(t,e),Zt(this)}}function Xt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Yt}function Zt(e){Kt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Zt(e))}),(t=>{nr(e,t)}))))}function Kt(e){const t=e._controlledReadableStream;return!!sr(e)&&!!e._started&&(!!(wr(t)&&Q(t)>0)||or(e)>0)}function er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tr(e){if(!sr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(er(e),_r(t))}function rr(e,t){if(!sr(e))return;const r=e._controlledReadableStream;if(wr(r)&&Q(r)>0)J(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw nr(e,t),t}try{he(e,t,r)}catch(t){throw nr(e,t),t}}Zt(e)}function nr(e,t){const r=e._controlledReadableStream;"readable"===r._state&&(fe(e),er(e),Sr(r,t))}function or(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function sr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function ar(e,t,r,n,o,s,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,fe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,p(d(r()),(()=>{t._started=!0,Zt(t)}),(e=>{nr(t,e)}))}function ir(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function lr(e,t,r){return F(e,r),r=>_(e,t,[r])}function cr(e,t,r){return F(e,r),r=>_(e,t,[r])}function ur(e,t,r){return F(e,r),r=>v(e,t,[r])}function dr(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function hr(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fr(e,t){q(e,t);const r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,s=null==e?void 0:e.signal;return void 0!==s&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(s,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:s}}Object.defineProperties(Yt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Yt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class pr{constructor(e={},t={}){void 0===e?e=null:$(e,"First parameter");const r=Xe(t,"Second parameter"),n=function(e,t){q(e,t);const r=e,n=null==r?void 0:r.autoAllocateChunkSize,o=null==r?void 0:r.cancel,s=null==r?void 0:r.pull,a=null==r?void 0:r.start,i=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===n?void 0:V(n,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===o?void 0:lr(o,r,`${t} has member 'cancel' that`),pull:void 0===s?void 0:cr(s,r,`${t} has member 'pull' that`),start:void 0===a?void 0:ur(a,r,`${t} has member 'start' that`),type:void 0===i?void 0:dr(i,`${t} has member 'type' that`)}}(e,"First parameter");if(br(this),"bytes"===n.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){const n=Object.create(ge.prototype);let o=()=>{},s=()=>d(void 0),a=()=>d(void 0);void 0!==t.start&&(o=()=>t.start(n)),void 0!==t.pull&&(s=()=>t.pull(n)),void 0!==t.cancel&&(a=e=>t.cancel(e));const i=t.autoAllocateChunkSize;if(0===i)throw new TypeError("autoAllocateChunkSize must be greater than 0");Fe(e,n,o,s,a,r,i)}(this,n,Qe(r,0))}else{const e=Ye(r);!function(e,t,r,n){const o=Object.create(Yt.prototype);let s=()=>{},a=()=>d(void 0),i=()=>d(void 0);void 0!==t.start&&(s=()=>t.start(o)),void 0!==t.pull&&(a=()=>t.pull(o)),void 0!==t.cancel&&(i=e=>t.cancel(e)),ar(e,o,s,a,i,r,n)}(this,n,Qe(r,1),e)}}get locked(){if(!yr(this))throw Tr("locked");return wr(this)}cancel(e=void 0){return yr(this)?wr(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):vr(this,e):h(Tr("cancel"))}getReader(e=void 0){if(!yr(this))throw Tr("getReader");return void 0===function(e,t){q(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:hr(r,`${t} has member 'mode' that`)}}(e,"First parameter").mode?H(this):Be(this)}pipeThrough(e,t={}){if(!yr(this))throw Tr("pipeThrough");U(e,1,"pipeThrough");const r=function(e,t){q(e,t);const r=null==e?void 0:e.readable;B(r,"readable","ReadableWritablePair"),z(r,`${t} has member 'readable' that`);const n=null==e?void 0:e.writable;return B(n,"writable","ReadableWritablePair"),nt(n,`${t} has member 'writable' that`),{readable:r,writable:n}}(e,"First parameter"),n=fr(t,"Second parameter");if(wr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ct(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return y(Qt(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){if(!yr(this))return h(Tr("pipeTo"));if(void 0===e)return h("Parameter 1 is required in 'pipeTo'.");if(!lt(e))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=fr(t,"Second parameter")}catch(e){return h(e)}return wr(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ct(e)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Qt(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!yr(this))throw Tr("tee");return ie(me((e=this)._readableStreamController)?function(e){let t,r,n,o,s,a=H(e),i=!1,l=!1,c=!1,h=!1,f=!1;const p=u((e=>{s=e}));function g(e){m(e._closedPromise,(t=>{e===a&&(Le(n._readableStreamController,t),Le(o._readableStreamController,t),h&&f||s(void 0))}))}function b(){He(a)&&(E(a),a=H(e),g(a)),K(a,{_chunkSteps:t=>{w((()=>{l=!1,c=!1;const r=t;let a=t;if(!h&&!f)try{a=ue(t)}catch(t){return Le(n._readableStreamController,t),Le(o._readableStreamController,t),void s(vr(e,t))}h||Ie(n._readableStreamController,r),f||Ie(o._readableStreamController,a),i=!1,l?v():c&&_()}))},_closeSteps:()=>{i=!1,h||Ce(n._readableStreamController),f||Ce(o._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&xe(n._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&xe(o._readableStreamController,0),h&&f||s(void 0)},_errorSteps:()=>{i=!1}})}function y(t,r){Z(a)&&(E(a),a=Be(e),g(a));const u=r?o:n,d=r?n:o;Ge(a,t,{_chunkSteps:t=>{w((()=>{l=!1,c=!1;const n=r?f:h;if(r?h:f)n||qe(u._readableStreamController,t);else{let r;try{r=ue(t)}catch(t){return Le(u._readableStreamController,t),Le(d._readableStreamController,t),void s(vr(e,t))}n||qe(u._readableStreamController,t),Ie(d._readableStreamController,r)}i=!1,l?v():c&&_()}))},_closeSteps:e=>{i=!1;const t=r?f:h,n=r?h:f;t||Ce(u._readableStreamController),n||Ce(d._readableStreamController),void 0!==e&&(t||qe(u._readableStreamController,e),!n&&d._readableStreamController._pendingPullIntos.length>0&&xe(d._readableStreamController,0)),t&&n||s(void 0)},_errorSteps:()=>{i=!1}})}function v(){if(i)return l=!0,d(void 0);i=!0;const e=je(n._readableStreamController);return null===e?b():y(e._view,!1),d(void 0)}function _(){if(i)return c=!0,d(void 0);i=!0;const e=je(o._readableStreamController);return null===e?b():y(e._view,!0),d(void 0)}function S(){}return n=mr(S,v,(function(n){if(h=!0,t=n,f){const n=ie([t,r]),o=vr(e,n);s(o)}return p})),o=mr(S,_,(function(n){if(f=!0,r=n,h){const n=ie([t,r]),o=vr(e,n);s(o)}return p})),g(a),[n,o]}(e):function(e){const t=H(e);let r,n,o,s,a,i=!1,l=!1,c=!1,h=!1;const f=u((e=>{a=e}));function p(){return i?(l=!0,d(void 0)):(i=!0,K(t,{_chunkSteps:e=>{w((()=>{l=!1;const t=e,r=e;c||rr(o._readableStreamController,t),h||rr(s._readableStreamController,r),i=!1,l&&p()}))},_closeSteps:()=>{i=!1,c||tr(o._readableStreamController),h||tr(s._readableStreamController),c&&h||a(void 0)},_errorSteps:()=>{i=!1}}),d(void 0))}function g(){}return o=gr(g,p,(function(t){if(c=!0,r=t,h){const t=ie([r,n]),o=vr(e,t);a(o)}return f})),s=gr(g,p,(function(t){if(h=!0,n=t,c){const t=ie([r,n]),o=vr(e,t);a(o)}return f})),m(t._closedPromise,(e=>{nr(o._readableStreamController,e),nr(s._readableStreamController,e),c&&h||a(void 0)})),[o,s]}(e));var e}values(e=void 0){if(!yr(this))throw Tr("values");return function(e,t){const r=H(e),n=new re(r,t),o=Object.create(ne);return o._asyncIteratorImpl=n,o}(this,function(e){q(e,"First parameter");const t=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(t)}}(e).preventCancel)}}function gr(e,t,r,n=1,o=()=>1){const s=Object.create(pr.prototype);return br(s),ar(s,Object.create(Yt.prototype),e,t,r,n,o),s}function mr(e,t,r){const n=Object.create(pr.prototype);return br(n),Fe(n,Object.create(ge.prototype),e,t,r,0,void 0),n}function br(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function yr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof pr}function wr(e){return void 0!==e._reader}function vr(e,t){if(e._disturbed=!0,"closed"===e._state)return d(void 0);if("errored"===e._state)return h(e._storedError);_r(e);const n=e._reader;return void 0!==n&&He(n)&&(n._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),n._readIntoRequests=new S),b(e._readableStreamController[L](t),r)}function _r(e){e._state="closed";const t=e._reader;void 0!==t&&(P(t),Z(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new S))}function Sr(e,t){e._state="errored",e._storedError=t;const r=e._reader;void 0!==r&&(k(r,t),Z(r)?(r._readRequests.forEach((e=>{e._errorSteps(t)})),r._readRequests=new S):(r._readIntoRequests.forEach((e=>{e._errorSteps(t)})),r._readIntoRequests=new S))}function Tr(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Rr(e,t){q(e,t);const r=null==e?void 0:e.highWaterMark;return B(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:W(r)}}Object.defineProperties(pr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(pr.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(pr.prototype,t.asyncIterator,{value:pr.prototype.values,writable:!0,configurable:!0});const Er=e=>e.byteLength;try{Object.defineProperty(Er,"name",{value:"size",configurable:!0})}catch(e){}class Dr{constructor(e){U(e,1,"ByteLengthQueuingStrategy"),e=Rr(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Or(this))throw Ar("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Or(this))throw Ar("size");return Er}}function Ar(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Or(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Dr}Object.defineProperties(Dr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Dr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const kr=()=>1;try{Object.defineProperty(kr,"name",{value:"size",configurable:!0})}catch(e){}class Pr{constructor(e){U(e,1,"CountQueuingStrategy"),e=Rr(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ir(this))throw Cr("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ir(this))throw Cr("size");return kr}}function Cr(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ir(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Pr}function Lr(e,t,r){return F(e,r),r=>_(e,t,[r])}function jr(e,t,r){return F(e,r),r=>v(e,t,[r])}function Mr(e,t,r){return F(e,r),(r,n)=>_(e,t,[r,n])}Object.defineProperties(Pr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class xr{constructor(e={},t={},r={}){void 0===e&&(e=null);const n=Xe(t,"Second parameter"),o=Xe(r,"Third parameter"),s=function(e,t){q(e,t);const r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,s=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:Lr(r,e,`${t} has member 'flush' that`),readableType:n,start:void 0===o?void 0:jr(o,e,`${t} has member 'start' that`),transform:void 0===s?void 0:Mr(s,e,`${t} has member 'transform' that`),writableType:a}}(e,"First parameter");if(void 0!==s.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==s.writableType)throw new RangeError("Invalid writableType specified");const a=Qe(o,0),i=Ye(o),l=Qe(n,1),c=Ye(n);let f;!function(e,t,r,n,o,s){function a(){return t}e._writable=function(e,t,r,n,o=1,s=()=>1){const a=Object.create(st.prototype);return it(a),At(a,Object.create(Et.prototype),e,t,r,n,o,s),a}(a,(function(t){return function(e,t){const r=e._transformStreamController;return e._backpressure?b(e._backpressureChangePromise,(()=>{const n=e._writable;if("erroring"===n._state)throw n._storedError;return zr(r,t)})):zr(r,t)}(e,t)}),(function(){return function(e){const t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return Nr(r),b(n,(()=>{if("errored"===t._state)throw t._storedError;tr(t._readableStreamController)}),(r=>{throw Fr(e,r),t._storedError}))}(e)}),(function(t){return function(e,t){return Fr(e,t),d(void 0)}(e,t)}),r,n),e._readable=gr(a,(function(){return function(e){return Ur(e,!1),e._backpressureChangePromise}(e)}),(function(t){return $r(e,t),d(void 0)}),o,s),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ur(e,!0),e._transformStreamController=void 0}(this,u((e=>{f=e})),l,c,a,i),function(e,t){const r=Object.create(Br.prototype);let n=e=>{try{return Vr(r,e),d(void 0)}catch(e){return h(e)}},o=()=>d(void 0);void 0!==t.transform&&(n=e=>t.transform(e,r)),void 0!==t.flush&&(o=()=>t.flush(r)),function(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n}(e,r,n,o)}(this,s),void 0!==s.start?f(s.start(this._transformStreamController)):f(void 0)}get readable(){if(!qr(this))throw Gr("readable");return this._readable}get writable(){if(!qr(this))throw Gr("writable");return this._writable}}function qr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof xr}function Fr(e,t){nr(e._readable._readableStreamController,t),$r(e,t)}function $r(e,t){Nr(e._transformStreamController),Ct(e._writable._writableStreamController,t),e._backpressure&&Ur(e,!1)}function Ur(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(xr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(xr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class Br{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Wr(this))throw Hr("desiredSize");return or(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!Wr(this))throw Hr("enqueue");Vr(this,e)}error(e=void 0){if(!Wr(this))throw Hr("error");var t;t=e,Fr(this._controlledTransformStream,t)}terminate(){if(!Wr(this))throw Hr("terminate");!function(e){const t=e._controlledTransformStream;tr(t._readable._readableStreamController);$r(t,new TypeError("TransformStream terminated"))}(this)}}function Wr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Br}function Nr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Vr(e,t){const r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!sr(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{rr(n,t)}catch(e){throw $r(r,e),r._readable._storedError}const o=function(e){return!Kt(e)}(n);o!==r._backpressure&&Ur(r,!0)}function zr(e,t){return b(e._transformAlgorithm(t),void 0,(t=>{throw Fr(e._controlledTransformStream,t),t}))}function Hr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Gr(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Br.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Br.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Dr,e.CountQueuingStrategy=Pr,e.ReadableByteStreamController=ge,e.ReadableStream=pr,e.ReadableStreamBYOBReader=ze,e.ReadableStreamBYOBRequest=pe,e.ReadableStreamDefaultController=Yt,e.ReadableStreamDefaultReader=X,e.TransformStream=xr,e.TransformStreamDefaultController=Br,e.WritableStream=st,e.WritableStreamDefaultController=Et,e.WritableStreamDefaultWriter=yt,Object.defineProperty(e,"__esModule",{value:!0})},r(t)},587:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},398:e=>{"use strict";e.exports=require("vscode")},613:e=>{"use strict";e.exports=require("assert")},181:e=>{"use strict";e.exports=require("buffer")},982:e=>{"use strict";e.exports=require("crypto")},434:e=>{"use strict";e.exports=require("events")},896:e=>{"use strict";e.exports=require("fs")},708:e=>{"use strict";e.exports=require("node:process")},830:e=>{"use strict";e.exports=require("node:stream/web")},857:e=>{"use strict";e.exports=require("os")},928:e=>{"use strict";e.exports=require("path")},23:e=>{"use strict";e.exports=require("util")},167:e=>{"use strict";e.exports=require("worker_threads")},328:(e,t,r)=>{if(!globalThis.ReadableStream)try{const e=r(708),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,r(830)),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch(e){Object.assign(globalThis,r(10))}try{const{Blob:e}=r(181);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const r=this;return new ReadableStream({type:"bytes",async pull(e){const n=r.slice(t,Math.min(r.size,t+65536)),o=await n.arrayBuffer();t+=o.byteLength,e.enqueue(new Uint8Array(o)),t===r.size&&e.close()}})})}catch(e){}},288:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(720);const o=class extends n.A{#e=0;#t="";constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),null===r&&(r={});const n=void 0===r.lastModified?Date.now():Number(r.lastModified);Number.isNaN(n)||(this.#e=n),this.#t=String(t)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof n.A&&/^(File)$/.test(e[Symbol.toStringTag])}}},730:(e,t,r)=>{"use strict";r.d(t,{YQ:()=>i.A,ZH:()=>a.A,k4:()=>u,F8:()=>c,NX:()=>d,_M:()=>h});const n=require("node:fs"),o=require("node:path");var s=r(157),a=r(288),i=r(720);const{stat:l}=n.promises,c=(e,t)=>f((0,n.statSync)(e),e,t),u=(e,t)=>l(e).then((r=>f(r,e,t))),d=(e,t)=>l(e).then((r=>p(r,e,t))),h=(e,t)=>p((0,n.statSync)(e),e,t),f=(e,t,r="")=>new i.A([new g({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),p=(e,t,r="")=>new a.A([new g({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,o.basename)(t),{type:r,lastModified:e.mtimeMs});class g{#r;#n;constructor(e){this.#r=e.path,this.#n=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new g({path:this.#r,lastModified:this.lastModified,size:t-e,start:this.#n+e})}async*stream(){const{mtimeMs:e}=await l(this.#r);if(e>this.lastModified)throw new s("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,n.createReadStream)(this.#r,{start:this.#n,end:this.#n+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}},720:(e,t,r)=>{"use strict";async function*n(e,t=!0){for(const r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let e=r.byteOffset;const t=r.byteOffset+r.byteLength;for(;e!==t;){const n=Math.min(t-e,65536),o=r.buffer.slice(e,e+n);e+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let e=0,t=r;for(;e!==t.size;){const r=t.slice(e,Math.min(t.size,e+65536)),n=await r.arrayBuffer();e+=n.byteLength,yield new Uint8Array(n)}}}r.d(t,{A:()=>s}),r(328);const o=class e{#o=[];#s="";#a=0;#i="transparent";constructor(t=[],r={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});const n=new TextEncoder;for(const r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof e?r:n.encode(`${r}`),this.#a+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#o.push(t)}this.#i=`${void 0===r.endings?"transparent":r.endings}`;const o=void 0===r.type?"":String(r.type);this.#s=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#a}get type(){return this.#s}async text(){const e=new TextDecoder;let t="";for await(const r of n(this.#o,!1))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of n(this.#o,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){const e=n(this.#o,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,n=""){const{size:o}=this;let s=t<0?Math.max(o+t,0):Math.min(t,o),a=r<0?Math.max(o+r,0):Math.min(r,o);const i=Math.max(a-s,0),l=this.#o,c=[];let u=0;for(const e of l){if(u>=i)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(s&&t<=s)s-=t,a-=t;else{let r;ArrayBuffer.isView(e)?(r=e.subarray(s,Math.min(t,a)),u+=r.byteLength):(r=e.slice(s,Math.min(t,a)),u+=r.size),a-=t,c.push(r),s=0}}const d=new e([],{type:String(n).toLowerCase()});return d.#a=i,d.#o=c,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(o.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const s=o},435:(e,t,r)=>{"use strict";r.d(t,{$n:()=>p,fS:()=>f});var n=r(720),o=r(288),{toStringTag:s,iterator:a,hasInstance:i}=Symbol,l=Math.random,c="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),u=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[s])?[(r=void 0!==r?r+"":"File"==t[s]?t.name:"blob",e),t.name!==r||"blob"==t[s]?new o.A([t],r,t):t]:[e,t+""]),d=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),h=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};const f=class{#l=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[s](){return"FormData"}[a](){return this.entries()}static[i](e){return e&&"object"==typeof e&&"FormData"===e[s]&&!c.some((t=>"function"!=typeof e[t]))}append(...e){h("append",arguments,2),this.#l.push(u(...e))}delete(e){h("delete",arguments,1),e+="",this.#l=this.#l.filter((([t])=>t!==e))}get(e){h("get",arguments,1),e+="";for(var t=this.#l,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return h("getAll",arguments,1),t=[],e+="",this.#l.forEach((r=>r[0]===e&&t.push(r[1]))),t}has(e){return h("has",arguments,1),e+="",this.#l.some((t=>t[0]===e))}forEach(e,t){for(var[r,n]of(h("forEach",arguments,1),this))e.call(t,n,r,this)}set(...e){h("set",arguments,2);var t=[],r=!0;e=u(...e),this.#l.forEach((n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)})),r&&t.push(e),this.#l=t}*entries(){yield*this.#l}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function p(e,t=n.A){var r=`${l()}${l()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],s=`--${r}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?o.push(s+d(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):o.push(s+d(t)+`"; filename="${d(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),o.push(`--${r}--`),new t(o,{type:"multipart/form-data; boundary="+r})}},65:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AbortError:()=>V,Blob:()=>z.YQ,FetchError:()=>f,File:()=>z.ZH,FormData:()=>d.fS,Headers:()=>k,Request:()=>W,Response:()=>L,blobFrom:()=>z.k4,blobFromSync:()=>z.F8,default:()=>G,fileFrom:()=>z.NX,fileFromSync:()=>z._M,isRedirect:()=>C});const n=require("node:http"),o=require("node:https"),s=require("node:zlib"),a=require("node:stream"),i=require("node:buffer"),l=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const r=e.substring(5,t).split(";");let n="",o=!1;const s=r[0]||"text/plain";let a=s;for(let e=1;e<r.length;e++)"base64"===r[e]?o=!0:(a+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(a+=";charset=US-ASCII",n="US-ASCII");const i=o?"base64":"ascii",l=unescape(e.substring(t+1)),c=Buffer.from(l,i);return c.type=s,c.typeFull=a,c.charset=n,c},c=require("node:util");var u=r(720),d=r(435);class h extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class f extends h{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const p=Symbol.toStringTag,g=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[p],m=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[p]),b=(e,t)=>{const r=new URL(t).hostname,n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)},y=(e,t)=>new URL(t).protocol===new URL(e).protocol,w=(0,c.promisify)(a.pipeline),v=Symbol("Body internals");class _{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:g(e)?e=i.Buffer.from(e.toString()):m(e)||i.Buffer.isBuffer(e)||(c.types.isAnyArrayBuffer(e)?e=i.Buffer.from(e):ArrayBuffer.isView(e)?e=i.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof a||(e instanceof d.fS?r=(e=(0,d.$n)(e)).type.split("=")[1]:e=i.Buffer.from(String(e))));let n=e;i.Buffer.isBuffer(e)?n=a.Readable.from(e):m(e)&&(n=a.Readable.from(e.stream())),this[v]={body:e,stream:n,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof a&&e.on("error",(e=>{const t=e instanceof h?e:new f(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[v].error=t}))}get body(){return this[v].stream}get bodyUsed(){return this[v].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await S(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new d.fS,t=new URLSearchParams(await this.text());for(const[r,n]of t)e.append(r,n);return e}const{toFormData:t}=await r.e(460).then(r.bind(r,460));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[v].body&&this[v].body.type||"",t=await this.arrayBuffer();return new u.A([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await S(this);return(new TextDecoder).decode(e)}buffer(){return S(this)}}async function S(e){if(e[v].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[v].disturbed=!0,e[v].error)throw e[v].error;const{body:t}=e;if(null===t)return i.Buffer.alloc(0);if(!(t instanceof a))return i.Buffer.alloc(0);const r=[];let n=0;try{for await(const o of t){if(e.size>0&&n+o.length>e.size){const r=new f(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}n+=o.length,r.push(o)}}catch(t){throw t instanceof h?t:new f(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new f(`Premature close of server response while trying to fetch ${e.url}`);try{return r.every((e=>"string"==typeof e))?i.Buffer.from(r.join("")):i.Buffer.concat(r,n)}catch(t){throw new f(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}_.prototype.buffer=(0,c.deprecate)(_.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(_.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,c.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const T=(e,t)=>{let r,n,{body:o}=e[v];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof a&&"function"!=typeof o.getBoundary&&(r=new a.PassThrough({highWaterMark:t}),n=new a.PassThrough({highWaterMark:t}),o.pipe(r),o.pipe(n),e[v].stream=r,o=n),o},R=(0,c.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),E=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":g(e)?"application/x-www-form-urlencoded;charset=UTF-8":m(e)?e.type||null:i.Buffer.isBuffer(e)||c.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof d.fS?`multipart/form-data; boundary=${t[v].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${R(e)}`:e instanceof a?null:"text/plain;charset=UTF-8",D=async(e,{body:t})=>{null===t?e.end():await w(t,e)},A="function"==typeof n.validateHeaderName?n.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},O="function"==typeof n.validateHeaderValue?n.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class k extends URLSearchParams{constructor(e){let t=[];if(e instanceof k){const r=e.raw();for(const[e,n]of Object.entries(r))t.push(...n.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(A(e),O(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>(A(r),O(r,String(n)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return r=>(A(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t=void 0){for(const r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const r=this.getAll(t);return e[t]="host"===t?r[0]:r.length>1?r:r[0],e}),{})}}Object.defineProperties(k.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const P=new Set([301,302,303,307,308]),C=e=>P.has(e),I=Symbol("Response internals");class L extends _{constructor(e=null,t={}){super(e,t);const r=null!=t.status?t.status:200,n=new k(t.headers);if(null!==e&&!n.has("Content-Type")){const t=E(e,this);t&&n.append("Content-Type",t)}this[I]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[I].type}get url(){return this[I].url||""}get status(){return this[I].status}get ok(){return this[I].status>=200&&this[I].status<300}get redirected(){return this[I].counter>0}get statusText(){return this[I].statusText}get headers(){return this[I].headers}get highWaterMark(){return this[I].highWaterMark}clone(){return new L(T(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!C(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new L(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new L(null,{status:0,statusText:""});return e[I].type="error",e}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(L.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const j=require("node:url"),M=require("node:net");function x(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const q=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function F(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),r=(0,M.isIP)(t);return!(4!==r||!/^127\./.test(t))||!(6!==r||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const $=Symbol("Request internals"),U=e=>"object"==typeof e&&"object"==typeof e[$],B=(0,c.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class W extends _{constructor(e,t={}){let r;if(U(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw new TypeError(`${r} is an url with embedded credentials.`);let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!U(t)&&"data"in t&&B(),(null!=t.body||U(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");const o=t.body?t.body:U(e)&&null!==e.body?T(e):null;super(o,{size:t.size||e.size||0});const s=new k(t.headers||e.headers||{});if(null!==o&&!s.has("Content-Type")){const e=E(o,this);e&&s.set("Content-Type",e)}let a=U(e)?e.signal:null;if("signal"in t&&(a=t.signal),null!=a&&("object"!=typeof(i=a)||"AbortSignal"!==i[p]&&"EventTarget"!==i[p]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var i;let l=null==t.referrer?e.referrer:t.referrer;if(""===l)l="no-referrer";else if(l){const e=new URL(l);l=/^about:(\/\/)?client$/.test(e)?"client":e}else l=void 0;this[$]={method:n,redirect:t.redirect||e.redirect||"follow",headers:s,parsedURL:r,signal:a,referrer:l},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[$].method}get url(){return(0,j.format)(this[$].parsedURL)}get headers(){return this[$].headers}get redirect(){return this[$].redirect}get signal(){return this[$].signal}get referrer(){return"no-referrer"===this[$].referrer?"":"client"===this[$].referrer?"about:client":this[$].referrer?this[$].referrer.toString():void 0}get referrerPolicy(){return this[$].referrerPolicy}set referrerPolicy(e){this[$].referrerPolicy=function(e){if(!q.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new W(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(W.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const N=e=>{const{parsedURL:t}=e[$],r=new k(e[$].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){const t=(e=>{const{body:t}=e[v];return null===t?0:m(t)?t.size:i.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(n=String(t))}n&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[$].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const o=e.referrer;let s=x(o),a=x(o,!0);s.toString().length>4096&&(s=a),t&&(s=t(s)),r&&(a=r(a));const i=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return s;case"strict-origin":return F(s)&&!F(i)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return s.origin===i.origin?s:F(s)&&!F(i)?"no-referrer":a;case"same-origin":return s.origin===i.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===i.origin?s:a;case"no-referrer-when-downgrade":return F(s)&&!F(i)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[$].referrer="no-referrer",e[$].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=e;"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close");const s=(e=>{if(e.search)return e.search;const t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+s,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o}}};class V extends h{constructor(e,t="aborted"){super(e,t)}}var z=r(730);const H=new Set(["data:","http:","https:"]);async function G(e,t){return new Promise(((r,c)=>{const u=new W(e,t),{parsedURL:d,options:h}=N(u);if(!H.has(d.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${d.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===d.protocol){const e=l(u.url),t=new L(e,{headers:{"Content-Type":e.typeFull}});return void r(t)}const p=("https:"===d.protocol?o:n).request,{signal:g}=u;let m=null;const w=()=>{const e=new V("The operation was aborted.");c(e),u.body&&u.body instanceof a.Readable&&u.body.destroy(e),m&&m.body&&m.body.emit("error",e)};if(g&&g.aborted)return void w();const v=()=>{w(),S()},_=p(d.toString(),h);g&&g.addEventListener("abort",v);const S=()=>{_.abort(),g&&g.removeEventListener("abort",v)};_.on("error",(e=>{c(new f(`request to ${u.url} failed, reason: ${e.message}`,"system",e)),S()})),function(e){const t=i.Buffer.from("0\r\n\r\n");let r,n=!1,o=!1;e.on("response",(e=>{const{headers:t}=e;n="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(s=>{const a=()=>{if(n&&!o){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{m&&m.body&&m.body.destroy(e)})(e)}},l=e=>{o=0===i.Buffer.compare(e.slice(-5),t),!o&&r&&(o=0===i.Buffer.compare(r.slice(-3),t.slice(0,3))&&0===i.Buffer.compare(e.slice(-2),t.slice(3))),r=e};s.prependListener("close",a),s.on("data",l),e.on("close",(()=>{s.removeListener("close",a),s.removeListener("data",l)}))}))}(_),process.version<"v14"&&_.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(r=>{if(m&&t<e._eventsCount&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",e)}}))})),_.on("response",(e=>{_.setTimeout(0);const n=function(e=[]){return new k(e.reduce(((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e)),[]).filter((([e,t])=>{try{return A(e),O(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(C(e.statusCode)){const o=n.get("Location");let s=null;try{s=null===o?null:new URL(o,u.url)}catch{if("manual"!==u.redirect)return c(new f(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect")),void S()}switch(u.redirect){case"error":return c(new f(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect")),void S();case"manual":break;case"follow":{if(null===s)break;if(u.counter>=u.follow)return c(new f(`maximum redirect reached at: ${u.url}`,"max-redirect")),void S();const o={headers:new k(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:T(u),signal:u.signal,size:u.size,referrer:u.referrer,referrerPolicy:u.referrerPolicy};if(!b(u.url,s)||!y(u.url,s))for(const e of["authorization","www-authenticate","cookie","cookie2"])o.headers.delete(e);if(303!==e.statusCode&&u.body&&t.body instanceof a.Readable)return c(new f("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void S();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==u.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length"));const i=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let r="";for(const e of t)e&&q.has(e)&&(r=e);return r}(n);return i&&(o.referrerPolicy=i),r(G(new W(s,o))),void S()}default:return c(new TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}g&&e.once("end",(()=>{g.removeEventListener("abort",v)}));let o=(0,a.pipeline)(e,new a.PassThrough,(e=>{e&&c(e)}));process.version<"v12.10"&&e.on("aborted",v);const i={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:n,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark},l=n.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===l||204===e.statusCode||304===e.statusCode)return m=new L(o,i),void r(m);const d={flush:s.Z_SYNC_FLUSH,finishFlush:s.Z_SYNC_FLUSH};if("gzip"===l||"x-gzip"===l)return o=(0,a.pipeline)(o,s.createGunzip(d),(e=>{e&&c(e)})),m=new L(o,i),void r(m);if("deflate"===l||"x-deflate"===l){const t=(0,a.pipeline)(e,new a.PassThrough,(e=>{e&&c(e)}));return t.once("data",(e=>{o=8==(15&e[0])?(0,a.pipeline)(o,s.createInflate(),(e=>{e&&c(e)})):(0,a.pipeline)(o,s.createInflateRaw(),(e=>{e&&c(e)})),m=new L(o,i),r(m)})),void t.once("end",(()=>{m||(m=new L(o,i),r(m))}))}if("br"===l)return o=(0,a.pipeline)(o,s.createBrotliDecompress(),(e=>{e&&c(e)})),m=new L(o,i),void r(m);m=new L(o,i),r(m)})),D(_,u).catch(c)}))}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".extension.js",n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e={792:1},n.f.require=(t,r)=>{e[t]||(t=>{var r=t.modules,o=t.ids,s=t.runtime;for(var a in r)n.o(r,a)&&(n.m[a]=r[a]);s&&s(n);for(var i=0;i<o.length;i++)e[o[i]]=1})(require("./"+n.u(t)))};var o={};(()=>{"use strict";var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(398),r=n(537),s=n(60);e.activate=function(e){s.logToOutput("Extension activation started");let n=new r.DagTreeView(e);t.commands.registerCommand("dagTreeView.refreshServer",(()=>{n.refresh()})),t.commands.registerCommand("dagTreeView.addServer",(()=>{n.addServer()})),t.commands.registerCommand("dagTreeView.removeServer",(()=>{n.removeServer()})),t.commands.registerCommand("dagTreeView.connectServer",(()=>{n.connectServer()})),t.commands.registerCommand("dagTreeView.clearServers",(()=>{n.clearServers()})),t.commands.registerCommand("dagTreeView.filter",(()=>{n.filter()})),t.commands.registerCommand("dagTreeView.showOnlyActive",(()=>{n.showOnlyActive()})),t.commands.registerCommand("dagTreeView.showOnlyFavorite",(()=>{n.showOnlyFavorite()})),t.commands.registerCommand("dagTreeView.viewDagView",(e=>{n.viewDagView(e)})),t.commands.registerCommand("dagTreeView.triggerDag",(e=>{n.triggerDag(e)})),t.commands.registerCommand("dagTreeView.triggerDagWithConfig",(e=>{n.triggerDagWConfig(e)})),t.commands.registerCommand("dagTreeView.checkDagRunState",(e=>{n.checkDagRunState(e)})),t.commands.registerCommand("dagTreeView.checkAllDagsRunState",(e=>{n.checkAllDagsRunState()})),t.commands.registerCommand("dagTreeView.pauseDAG",(e=>{n.pauseDAG(e)})),t.commands.registerCommand("dagTreeView.unPauseDAG",(e=>{n.unPauseDAG(e)})),t.commands.registerCommand("dagTreeView.lastDAGRunLog",(e=>{n.lastDAGRunLog(e)})),t.commands.registerCommand("dagTreeView.dagSourceCode",(e=>{n.dagSourceCode(e)})),t.commands.registerCommand("dagTreeView.addToFavDAG",(e=>{n.addToFavDAG(e)})),t.commands.registerCommand("dagTreeView.deleteFromFavDAG",(e=>{n.deleteFromFavDAG(e)})),t.commands.registerCommand("dagTreeView.showDagView",(e=>{n.viewDagView(e)})),s.logToOutput("Extension activation completed")},e.deactivate=function(){s.logToOutput("Extension is now deactive!")}})(),module.exports=o})();