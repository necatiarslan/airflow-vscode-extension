/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t={2:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeView=void 0;const r=n(1398),o=n(5083),a=n(9896),i=n(2614),s=n(1430),u=n(7738),l=n(9071),c=n(6304),d=n(5744),g=n(2636),f=n(5072),p=n(6967);class h{constructor(){this.FilterString="",this.ShowOnlyActive=!0,this.ShowOnlyFavorite=!1,this.FavoriteDags=[],c.logToOutput("DagTreeView.constructor Started"),p.Telemetry.Current.send("dagTreeView.constructor.called"),this.treeDataProvider=new i.DagTreeDataProvider,this.view=r.window.createTreeView("dagTreeView",{treeDataProvider:this.treeDataProvider,showCollapseAll:!0}),this.loadState(),g.Session.Current.Context.subscriptions.push(this.view),g.Session.Current.Context.subscriptions.push({dispose:()=>this.dispose()}),h.Current=this,this.setFilterMessage(),this.refresh()}dispose(){c.logToOutput("DagTreeView.dispose Started"),this.dagStatusInterval&&clearInterval(this.dagStatusInterval)}async refresh(){if(c.logToOutput("DagTreeView.refresh Started"),p.Telemetry.Current.send("dagTreeView.refresh.called"),!g.Session.Current.Api)return this.treeDataProvider.dagList=[],void this.treeDataProvider.refresh();await r.window.withProgress({location:r.ProgressLocation.Window,title:"Airflow: Loading..."},(async e=>{e.report({increment:0}),await this.loadDags()})),await this.getImportErrors()}viewDagView(e){c.logToOutput("DagTreeView.viewDagView Started"),p.Telemetry.Current.send("dagTreeView.viewDagView.called"),g.Session.Current.Api&&s.DagView.render(e.DagId)}async addToFavDAG(e){c.logToOutput("DagTreeView.addToFavDAG Started"),p.Telemetry.Current.send("dagTreeView.addToFavDAG.called"),e.IsFav=!0,this.FavoriteDags.includes(e.DagId)||this.FavoriteDags.push(e.DagId),this.treeDataProvider.refresh()}async deleteFromFavDAG(e){c.logToOutput("DagTreeView.deleteFromFavDAG Started"),p.Telemetry.Current.send("dagTreeView.deleteFromFavDAG.called"),e.IsFav=!1,this.FavoriteDags=this.FavoriteDags.filter((t=>t!==e.DagId)),this.treeDataProvider.refresh()}createAndOpenTempFile(e,t,n){const r=o.fileSync({mode:420,prefix:t,postfix:n});a.appendFileSync(r.name,e),c.openFile(r.name)}startDagStatusInterval(){this.dagStatusInterval||(this.dagStatusInterval=setInterval((()=>{this.refreshRunningDagState(this).catch((e=>c.logToOutput("refreshRunningDagState Error",e)))}),1e4))}handleTriggerSuccess(e,t){e.LatestDagRunId=t.dag_run_id,e.LatestDagState=t.state,e.refreshUI(),this.treeDataProvider.refresh(),this.startDagStatusInterval(),d.DagTriggered(this,e.DagId,e.LatestDagRunId)}async triggerDag(e){if(c.logToOutput("DagTreeView.triggerDag Started"),p.Telemetry.Current.send("dagTreeView.triggerDag.called"),!g.Session.Current.Api)return;if(e.IsPaused)return void c.showWarningMessage("Dag is PAUSED !!!");if(e.isDagRunning())return void c.showWarningMessage("Dag is ALREADY RUNNING !!!");const t=await g.Session.Current.Api.triggerDag(e.DagId);t.isSuccessful&&this.handleTriggerSuccess(e,t.result)}async refreshRunningDagState(e){if(c.logToOutput("DagTreeView.refreshRunningDagState Started"),!g.Session.Current.Api)return;let t=!0;for(const n of e.treeDataProvider.visibleDagList){if(n.isDagRunning()){t=!1;const e=await g.Session.Current.Api.getDagRun(n.DagId,n.LatestDagRunId);e.isSuccessful?(n.LatestDagState=e.result.state,n.refreshUI()):(n.LatestDagRunId="",n.LatestDagState="")}e.treeDataProvider.refresh()}t&&e.dagStatusInterval&&(clearInterval(e.dagStatusInterval),e.dagStatusInterval=void 0,c.logToOutput("All Dag Run(s) Completed"))}async triggerDagWConfig(e){if(c.logToOutput("DagTreeView.triggerDagWConfig Started"),p.Telemetry.Current.send("dagTreeView.triggerDagWConfig.called"),!g.Session.Current.Api)return;let t=await r.window.showInputBox({placeHolder:"Enter Configuration JSON (Optional, must be a dict object) or Press Enter"});if(t||(t="{}"),void 0!==t){const n=await g.Session.Current.Api.triggerDag(e.DagId,t);n.isSuccessful&&this.handleTriggerSuccess(e,n.result)}}async checkAllDagsRunState(){if(c.logToOutput("DagTreeView.checkAllDagsRunState Started"),p.Telemetry.Current.send("dagTreeView.checkAllDagsRunState.called"),this.treeDataProvider)for(const e of this.treeDataProvider.visibleDagList)e.IsPaused||this.checkDagRunState(e)}async notifyDagStateWithDagId(e,t,n){if(c.logToOutput("DagTreeView.notifyDagStateWithDagId Started"),p.Telemetry.Current.send("dagTreeView.notifyDagStateWithDagId.called"),this.treeDataProvider)for(const r of this.treeDataProvider.visibleDagList)r.DagId===e&&(r.LatestDagRunId=t,r.LatestDagState=n,r.refreshUI(),this.treeDataProvider.refresh(),r.isDagRunning()&&this.startDagStatusInterval())}async checkDagRunState(e){if(c.logToOutput("DagTreeView.checkDagRunState Started"),p.Telemetry.Current.send("dagTreeView.checkDagRunState.called"),!g.Session.Current.Api)return;if(!e)return;if(e.IsPaused)return void c.showWarningMessage(e.DagId+"Dag is PAUSED");const t=await g.Session.Current.Api.getLastDagRun(e.DagId);t.isSuccessful&&(e.LatestDagRunId=t.result.dag_run_id,e.LatestDagState=t.result.state,e.refreshUI(),this.treeDataProvider.refresh(),e.isDagRunning()&&this.startDagStatusInterval())}async pauseDAG(e){c.logToOutput("DagTreeView.pauseDAG Started"),p.Telemetry.Current.send("dagTreeView.pauseDAG.called"),g.Session.Current.Api&&(e.IsPaused?c.showWarningMessage(e.DagId+"Dag is already PAUSED"):(await g.Session.Current.Api.pauseDag(e.DagId,!0)).isSuccessful&&(e.IsPaused=!0,e.refreshUI(),this.treeDataProvider.refresh(),d.DagPaused(this,e.DagId)))}async notifyDagPaused(e){c.logToOutput("DagTreeView.notifyDagPaused Started"),this.refresh()}async notifyDagUnPaused(e){c.logToOutput("DagTreeView.notifyDagUnPaused Started"),this.refresh()}async unPauseDAG(e){c.logToOutput("DagTreeView.unPauseDAG Started"),p.Telemetry.Current.send("dagTreeView.unPauseDAG.called"),g.Session.Current.Api&&(e.IsPaused?(await g.Session.Current.Api.pauseDag(e.DagId,!1)).isSuccessful&&(e.IsPaused=!1,e.refreshUI(),this.treeDataProvider.refresh(),d.DagUnPaused(this,e.DagId)):c.showInfoMessage(e.DagId+"Dag is already UNPAUSED"))}async cancelDagRun(e){c.logToOutput("DagTreeView.cancelDagRun Started"),p.Telemetry.Current.send("dagTreeView.cancelDagRun.called"),g.Session.Current.Api&&(e.isDagRunning()?e.LatestDagRunId?(await g.Session.Current.Api.cancelDagRun(e.DagId,e.LatestDagRunId)).isSuccessful&&(e.LatestDagState="failed",e.refreshUI(),this.treeDataProvider.refresh(),d.DagRunCancelled(this,e.DagId,e.LatestDagRunId)):c.showWarningMessage("No DAG run ID found"):c.showWarningMessage("No running DAG to cancel"))}async lastDAGRunLog(e){c.logToOutput("DagTreeView.lastDAGRunLog Started"),p.Telemetry.Current.send("dagTreeView.lastDAGRunLog.called"),g.Session.Current.Api&&f.DagLogView.render(e.DagId,e.LatestDagRunId)}async dagSourceCode(e){if(c.logToOutput("DagTreeView.dagSourceCode Started"),p.Telemetry.Current.send("dagTreeView.dagSourceCode.called"),!g.Session.Current.Api)return;const t=await g.Session.Current.Api.getSourceCode(e.DagId,e.FileToken);t.isSuccessful?this.createAndOpenTempFile(t.result,e.DagId,".py"):(c.logToOutput(t.result),c.showErrorMessage(t.result))}async showDagInfo(e){if(c.logToOutput("DagTreeView.showDagInfo Started"),p.Telemetry.Current.send("dagTreeView.showDagInfo.called"),!g.Session.Current.Api)return;const t=await g.Session.Current.Api.getDagInfo(e.DagId);t.isSuccessful?this.createAndOpenTempFile(JSON.stringify(t.result,null,2),e.DagId+"_info",".json"):(c.logToOutput(t.result),c.showErrorMessage("Failed to fetch DAG info"))}async filter(){c.logToOutput("DagTreeView.filter Started"),p.Telemetry.Current.send("dagTreeView.filter.called");const e=await r.window.showInputBox({value:this.FilterString,placeHolder:"Enter your filters seperated by comma"});void 0!==e&&(this.FilterString=e,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState())}async showOnlyActive(){c.logToOutput("DagTreeView.showOnlyActive Started"),p.Telemetry.Current.send("dagTreeView.showOnlyActive.called"),this.ShowOnlyActive=!this.ShowOnlyActive,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState()}async showOnlyFavorite(){c.logToOutput("DagTreeView.showOnlyFavorite Started"),p.Telemetry.Current.send("dagTreeView.showOnlyFavorite.called"),this.ShowOnlyFavorite=!this.ShowOnlyFavorite,this.treeDataProvider.refresh(),this.setFilterMessage(),this.saveState()}async addServer(){c.logToOutput("DagTreeView.addServer Started"),p.Telemetry.Current.send("dagTreeView.addServer.called");const e=await r.window.showInputBox({value:"http://localhost:8080/api/v2",placeHolder:"API Full URL (Exp:http://localhost:8080/api/v2)"});if(!e)return;const t=await r.window.showInputBox({placeHolder:"User Name"});if(!t)return;const n=await r.window.showInputBox({placeHolder:"Password"});if(!n)return;const o={apiUrl:e,apiUserName:t,apiPassword:n};await g.Session.Current.TestServer(o)?(g.Session.Current.AddServer(o),g.Session.Current.SetServer(o),this.refresh()):c.showErrorMessage("Failed to connect to server.")}async removeServer(){if(c.logToOutput("DagTreeView.removeServer Started"),p.Telemetry.Current.send("dagTreeView.removeServer.called"),0===g.Session.Current.ServerList.length)return;const e=g.Session.Current.ServerList.map((e=>`${e.apiUrl} - ${e.apiUserName}`)),t=await r.window.showQuickPick(e,{canPickMany:!1,placeHolder:"Select To Remove"});if(!t)return;const n=t.split(" - ");n[0]&&(g.Session.Current.RemoveServer(n[0],n[1]),c.showInfoMessage("Server removed."))}async connectServer(){if(c.logToOutput("DagTreeView.connectServer Started"),p.Telemetry.Current.send("dagTreeView.connectServer.called"),0===g.Session.Current.ServerList.length)return void this.addServer();const e=[];for(const t of g.Session.Current.ServerList)e.push(t.apiUrl+" - "+t.apiUserName);const t=await r.window.showQuickPick(e,{canPickMany:!1,placeHolder:"Select To Connect"});if(!t)return;const n=t.split(" - ");if(n[0]){const e=g.Session.Current.GetServer(n[0],n[1]);e&&(await g.Session.Current.TestServer(e)?(g.Session.Current.SetServer(e),this.refresh()):c.showErrorMessage("Failed to connect to server."))}}async clearServers(){c.logToOutput("DagTreeView.clearServers Started"),p.Telemetry.Current.send("dagTreeView.clearServers.called"),g.Session.Current.ClearServers(),this.treeDataProvider.dagList=void 0,this.treeDataProvider.refresh(),c.showInfoMessage("Server List Cleared")}async loadDags(){if(c.logToOutput("DagTreeView.loadDags Started"),p.Telemetry.Current.send("dagTreeView.loadDags.called"),!g.Session.Current.Api)return;this.treeDataProvider.dagList=void 0;const e=await g.Session.Current.Api.getDagList();e.isSuccessful&&(this.treeDataProvider.dagList=e.result,this.treeDataProvider.loadDagTreeItemsFromApiResponse()),this.treeDataProvider.refresh(),this.setViewTitle()}async loadLatestRunStatusForAllDags(){if(c.logToOutput("DagTreeView.loadLatestRunStatusForAllDags Started"),p.Telemetry.Current.send("dagTreeView.loadLatestRunStatusForAllDags.called"),!g.Session.Current.Api)return;const e=this.treeDataProvider.visibleDagList.slice(0,50);for(const t of e)if(!t.IsPaused)try{const e=await g.Session.Current.Api.getLastDagRun(t.DagId);e.isSuccessful&&e.result&&(t.LatestDagRunId=e.result.dag_run_id,t.LatestDagState=e.result.state,t.refreshUI())}catch(e){c.logToOutput(`Failed to fetch last run for ${t.DagId}`,e)}this.treeDataProvider.refresh()}async setViewTitle(){g.Session.Current.Server?this.view.title=g.Session.Current.Server.apiUrl+" - "+g.Session.Current.Server.apiUserName:this.view.title="Airflow"}async getImportErrors(){if(c.logToOutput("DagTreeView.getImportErrors Started"),!g.Session.Current.Api)return;const e=await g.Session.Current.Api.getImportErrors();e.isSuccessful&&e.result.total_entries>0&&c.showOutputMessage(e.result,"Import Dag Errors! Check Output Panel")}saveState(){c.logToOutput("DagTreeView.saveState Started"),p.Telemetry.Current.send("dagTreeView.saveState.called");try{g.Session.Current.Context.globalState.update("FilterString",this.FilterString),g.Session.Current.Context.globalState.update("ShowOnlyActive",this.ShowOnlyActive),g.Session.Current.Context.globalState.update("ShowOnlyFavorite",this.ShowOnlyFavorite),g.Session.Current.Context.globalState.update("FavoriteDags",this.FavoriteDags)}catch(e){c.logToOutput("dagTreeView.saveState Error !!!",e)}}setFilterMessage(){g.Session.Current.Server&&(this.view.message=this.getBoolenSign(this.ShowOnlyFavorite)+"Fav, "+this.getBoolenSign(this.ShowOnlyActive)+"Active, Filter : "+this.FilterString)}getBoolenSign(e){return e?"âœ“":"ð„‚"}loadState(){c.logToOutput("DagTreeView.loadState Started"),p.Telemetry.Current.send("dagTreeView.loadState.called");try{const e=g.Session.Current.Context.globalState.get("FilterString")||"";e&&(this.FilterString=e,this.setFilterMessage());const t=g.Session.Current.Context.globalState.get("ShowOnlyActive");void 0!==t&&(this.ShowOnlyActive=t);const n=g.Session.Current.Context.globalState.get("ShowOnlyFavorite");void 0!==n&&(this.ShowOnlyFavorite=n);const r=g.Session.Current.Context.globalState.get("FavoriteDags");void 0!==r&&(this.FavoriteDags=r)}catch(e){c.logToOutput("dagTreeView.loadState Error !!!",e)}}async viewConnections(){if(c.logToOutput("DagTreeView.viewConnections Started"),p.Telemetry.Current.send("dagTreeView.viewConnections.called"),g.Session.Current.Api){const{ConnectionsView:e}=await Promise.resolve().then((()=>n(9880)));e.render()}}async viewVariables(){if(c.logToOutput("DagTreeView.viewVariables Started"),p.Telemetry.Current.send("dagTreeView.viewVariables.called"),g.Session.Current.Api){const{VariablesView:e}=await Promise.resolve().then((()=>n(8404)));e.render()}}async viewProviders(){if(c.logToOutput("DagTreeView.viewProviders Started"),p.Telemetry.Current.send("dagTreeView.viewProviders.called"),g.Session.Current.Api){const{ProvidersView:e}=await Promise.resolve().then((()=>n(7295)));e.render()}}async viewConfigs(){if(c.logToOutput("DagTreeView.viewConfigs Started"),p.Telemetry.Current.send("dagTreeView.viewConfigs.called"),g.Session.Current.Api){const{ConfigsView:e}=await Promise.resolve().then((()=>n(3374)));e.render()}}async viewPlugins(){if(c.logToOutput("DagTreeView.viewPlugins Started"),p.Telemetry.Current.send("dagTreeView.viewPlugins.called"),g.Session.Current.Api){const{PluginsView:e}=await Promise.resolve().then((()=>n(6925)));e.render()}}async viewDagRuns(){c.logToOutput("DagTreeView.viewDagRuns Started"),p.Telemetry.Current.send("dagTreeView.viewDagRuns.called"),g.Session.Current.Api&&u.DailyDagRunView.render()}async viewDagRunHistory(){c.logToOutput("DagTreeView.viewDagRunHistory Started"),p.Telemetry.Current.send("dagTreeView.viewDagRunHistory.called"),g.Session.Current.Api&&l.DagRunView.render()}async viewServerHealth(){if(c.logToOutput("DagTreeView.viewServerHealth Started"),p.Telemetry.Current.send("dagTreeView.viewServerHealth.called"),g.Session.Current.Api){const{ServerHealthView:e}=await Promise.resolve().then((()=>n(702)));e.render()}}}t.DagTreeView=h},107:(e,t,n)=>{"use strict";n.d(t,{_:()=>de});var r,o,a,i=n(659),s=n(8279),u=n(8205),l=n(269),c=n(6987),d=n(4875),g=n(6182),f=n(4013),p=n(7847),h=n(2475),v=n(3775),m=n(7292),y=n(3673),w=n(6492),b="toGMTString",_="toUTCString",S="cookie",T="expires",D="isCookieUseDisabled",C="disableCookiesUsage",I="_ckMgr",R=null,A=null,k=null,x={},P={},E=((r={cookieCfg:(0,h.NU)((o={},o[w.Fk]={fb:"cookieDomain",dfVal:y.Gh},o.path={fb:"cookiePath",dfVal:y.Gh},o.enabled=w.HP,o.ignoreCookies=w.HP,o.blockedCookies=w.HP,o.disableCookieDefer=!1,o)),cookieDomain:w.HP,cookiePath:w.HP})[C]=w.HP,r);function O(){!a&&(a=(0,l.nRs)((function(){return(0,l.YEm)()})))}function L(e){return!e||e.isEnabled()}function V(e,t){return!!(t&&e&&(0,l.cyL)(e.ignoreCookies))&&-1!==(0,l.rDm)(e.ignoreCookies,t)}function $(e,t){return!!(t&&e&&(0,l.cyL)(e.blockedCookies)&&-1!==(0,l.rDm)(e.blockedCookies,t))||V(e,t)}function M(e,t){var n=t[g.XM];if((0,l.hXl)(n)){var r=void 0;(0,l.b07)(e[D])||(r=!e[D]),(0,l.b07)(e[C])||(r=!e[C]),n=r}return n}function H(e,t){var n,r,o,a,i,s,u,d,f=[];function p(e){var t,n=((t={})[w.QW]=e||"/",t[T]="Thu, 01 Jan 1970 00:00:01 GMT",t);return(0,m.lT)()||(n["max-age"]="0"),q(w.m5,n)}function h(e){if(f)for(var t=f[g.oI]-1;t>=0;t--)f[t].n===e&&f[g.Ic](t,1)}e=(0,c.e)(e||P,null,t).cfg,a=(0,c.a)(e,(function(a){a.setDf(a.cfg,E),n=a.ref(a.cfg,"cookieCfg"),r=n[w.QW]||"/",o=n[w.Fk],n.disableCookieDefer?f=null:null===f&&(f=[]);var c=i;i=!1!==M(e,n),s=n.getCookie||j,u=n.setCookie||G,d=n.delCookie||G,!c&&i&&f&&F(t)&&f&&((0,l.Iuo)(f,(function(e){$(n,e.n)||(0===e.o?u(e.n,e.v):1===e.o&&d(e.n,e.v))})),f=[])}),t);var v={isEnabled:function(){var r=!1!==M(e,n)&&i&&F(t),o=P[I];return r&&o&&v!==o&&(r=L(o)),r},setEnabled:function(t){n[g.XM]=t,(0,l.b07)(e[C])||(e[C]=!t)},set:function(e,t,a,i,s){var c=!1;if(!$(n,e)){var d=function(e,t,n,a){var i={},s=(0,l.EHq)(e||w.m5),u=(0,l.HzD)(s,";");if(-1!==u&&(s=(0,l.EHq)((0,l.ZWZ)(e,u)),i=N((0,l.P0f)(e,u+1))),(0,y.KY)(i,w.Fk,n||o,l.zzB,l.b07),!(0,l.hXl)(t)){var c=(0,m.lT)();if((0,l.b07)(i[T])){var d=(0,l.f0d)()+1e3*t;if(d>0){var f=new Date;f.setTime(d),(0,y.KY)(i,T,z(f,c?b:_)||z(f,c?b:_)||w.m5,l.zzB)}}c||(0,y.KY)(i,"max-age",w.m5+t,null,l.b07)}var p,h=(0,m.g$)();return h&&"https:"===h.protocol&&((0,y.KY)(i,"secure",null,null,l.b07),null===A&&(p=((0,l.w3n)()||{})[g.tX],A=!((0,l.KgX)(p)&&((0,y.Ju)(p,"CPU iPhone OS 12")||(0,y.Ju)(p,"iPad; CPU OS 12")||(0,y.Ju)(p,"Macintosh; Intel Mac OS X 10_14")&&(0,y.Ju)(p,"Version/")&&(0,y.Ju)(p,"Safari")||(0,y.Ju)(p,"Macintosh; Intel Mac OS X 10_14")&&(0,l.Cv9)(p,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,y.Ju)(p,"Chrome/5")||(0,y.Ju)(p,"Chrome/6")||(0,y.Ju)(p,"UnrealEngine")&&!(0,y.Ju)(p,"Chrome")||(0,y.Ju)(p,"UCBrowser/12")||(0,y.Ju)(p,"UCBrowser/11")))),A&&(0,y.KY)(i,"SameSite","None",null,l.b07)),(0,y.KY)(i,w.QW,a||r,null,l.b07),q(s,i)}(t,a,i,s);L(v)?(u(e,d),c=!0):f&&(h(e),f[g.y5]({n:e,o:0,v:d}),c=!0)}return c},get:function(e){var t=w.m5;if(!V(n,e))if(L(v))t=s(e);else if(f)for(var r=f[g.oI]-1;r>=0;r--){var o=f[r];if(o.n===e){if(0===o.o){var a=o.v,i=(0,l.HzD)(a,";");t=-1!==i?(0,l.EHq)((0,l.ZWZ)(a,i)):(0,l.EHq)(a)}break}}return t},del:function(e,t){var n=!1;return L(v)?n=v.purge(e,t):f&&(h(e),f[g.y5]({n:e,o:1,v:p(t)}),n=!0),n},purge:function(e,n){var r=!1;return F(t)&&(d(e,p(n)),r=!0),r},unload:function(e){a&&a.rm(),a=null,f=null}};return v[I]=v,v}function F(e){if(null===R){R=!1,!a&&O();try{var t=a.v||{};R=void 0!==t[S]}catch(t){(0,v.ZP)(e,2,68,"Cannot access document.cookie - "+(0,y.lL)(t),{exception:(0,l.mmD)(t)})}}return R}function N(e){var t={};if(e&&e[g.oI]){var n=(0,l.EHq)(e)[g.sY](";");(0,l.Iuo)(n,(function(e){if(e=(0,l.EHq)(e||w.m5)){var n=(0,l.HzD)(e,"=");-1===n?t[e]=null:t[(0,l.EHq)((0,l.ZWZ)(e,n))]=(0,l.EHq)((0,l.P0f)(e,n+1))}}))}return t}function z(e,t){return(0,l.Tnt)(e[t])?e[t]():null}function q(e,t){var n=e||w.m5;return(0,l.zav)(t,(function(e,t){n+="; "+e+((0,l.hXl)(t)?w.m5:"="+t)})),n}function j(e){var t=w.m5;if(!a&&O(),a.v){var n=a.v[S]||w.m5;k!==n&&(x=N(n),k=n),t=(0,l.EHq)(x[e]||w.m5)}return t}function G(e,t){!a&&O(),a.v&&(a.v[S]=e+"="+t)}var U=n(737),W=n(7867),B={perfEvtsSendAll:!1};function J(e){e.h=null;var t=e.cb;e.cb=[],(0,l.Iuo)(t,(function(e){(0,l.gBW)(e.fn,[e.arg])}))}function X(e,t,n,r){(0,l.Iuo)(e,(function(e){e&&e[t]&&(n?(n.cb[g.y5]({fn:r,arg:e}),n.h=n.h||(0,l.dRz)(J,0,n)):(0,l.gBW)(r,[e]))}))}var Z,K=function(){function e(t){var n,r;this.listeners=[];var o=[],a={h:null,cb:[]},i=(0,c.e)(t,B);r=i[g.x6]((function(e){n=!!e.cfg.perfEvtsSendAll})),(0,s.A)(e,this,(function(e){(0,l.vF1)(e,"listeners",{g:function(){return o}}),e[g.vR]=function(e){o[g.y5](e)},e[g.h3]=function(e){for(var t=(0,l.rDm)(o,e);t>-1;)o[g.Ic](t,1),t=(0,l.rDm)(o,e)},e[w.fc]=function(e){X(o,w.fc,a,(function(t){t[w.fc](e)}))},e[w.Yp]=function(e,t,n){X(o,w.Yp,a,(function(r){r[w.Yp](e,t,n)}))},e[w.dI]=function(e,t){X(o,w.dI,t?a:null,(function(n){n[w.dI](e,t)}))},e[w.l0]=function(e){e&&(!n&&e[g.Zu]()||X(o,w.l0,null,(function(t){e.isAsync?(0,l.dRz)((function(){return t[w.l0](e)}),0):t[w.l0](e)})))},e[w.s4]=function(e){e&&e[g.oI]&&X(o,w.s4,a,(function(t){t[w.s4](e)}))},e[w.Vj]=function(e){e&&e[g.Cd]&&X(o,w.Vj,a,(function(t){t[w.Vj](e)}))},e[w.Ev]=function(e,t){if(e>0){var n=t||0;X(o,w.Ev,a,(function(t){t[w.Ev](e,n)}))}},e[g.tI]=function(e){var t,n=function(){r&&r.rm(),r=null,o=[],a.h&&a.h[g._w](),a.h=null,a.cb=[]};if(X(o,"unload",null,(function(n){var r=n[g.tI](e);r&&(t||(t=[]),t[g.y5](r))})),t)return(0,u.Qo)((function(e){return(0,u.Dv)((0,u.Xf)(t),(function(){n(),e()}))}));n()}}))}return e.__ieDyn=1,e}(),Y=n(8156),Q=n(2317),ee=n(2991),te=function(e){function t(){var n,r,o=e.call(this)||this;function a(){n=0,r=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,a(),(0,s.A)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,n){var r={id:t,fn:n};return(0,l.Yny)(e,r),{remove:function(){(0,l.Iuo)(e,(function(t,n){if(t.id===r.id)return e[g.Ic](n,1),-1}))}}}(r,n++,e)},e[w.qT]=function(t,n){(function(e,t,n){for(var r=!1,o=e[g.oI],a=0;a<o;++a){var i=e[a];if(i)try{if(!1===i.fn[g.y9](null,[t])){r=!0;break}}catch(e){(0,v.ZP)(n,2,64,"Telemetry initializer failed: "+(0,y.lL)(e),{exception:(0,l.mmD)(e)},!0)}}return!r})(r,t,n?n[g.e4]():e[g.e4]())&&e[g.$5](t,n)},e[g.tn]=function(){a()}})),o}return(0,i.qU)(t,e),t.__ieDyn=1,t}(n(8257).s),ne=n(836),re=n(8969),oe="Plugins must provide initialize method",ae="SDK is still unloading...",ie=(0,l.ZHX)(((Z={cookieCfg:{}})[w.jy]={rdOnly:!0,ref:!0,v:[]},Z[w.LZ]={rdOnly:!0,ref:!0,v:[]},Z[w.Bw]={ref:!0,v:{}},Z[w.Yd]=w.HP,Z.loggingLevelConsole=0,Z.diagnosticLogInterval=w.HP,Z));function se(e,t){return new Y.NS(t)}function ue(e,t){var n=!1;return(0,l.Iuo)(t,(function(t){if(t===e)return n=!0,-1})),n}function le(e,t,n,r){n&&(0,l.zav)(n,(function(n,o){r&&(0,l.QdQ)(o)&&(0,l.QdQ)(t[n])&&le(e,t[n],o,r),r&&(0,l.QdQ)(o)&&(0,l.QdQ)(t[n])?le(e,t[n],o,r):e.set(t,n,o)}))}function ce(e,t){var n=null,r=-1;return(0,l.Iuo)(e,(function(e,o){if(e.w===t)return n=e,r=o,-1})),{i:r,l:n}}var de=function(){function e(){var t,n,r,o,a,h,m,b,_,S,T,D,C,I,R,A,k,x,P,E,O,L,V,$,M,F,N,z,q,j,G,B,J;(0,s.A)(e,this,(function(e){function s(){q=!0,(0,l.hXl)(O)?(F=d.f.INACTIVE,(0,v.ZP)(r,1,112,"ikey can't be resolved from promises")):F=d.f.ACTIVE,X()}function X(){n&&(e.releaseQueue(),e.pollInternalLogs())}function Z(e){return G&&G[g.XM]||J||(e||r&&r.queue[g.oI]>0)&&(B||(B=!0,Te(t[g.x6]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var n=!1;G&&(n=G[g.XM],G[g._w]()),(G=(0,l.AHH)(ye,t)).unref(),G[g.XM]=n})))),G[g.XM]=!0),G}function de(){var e={};$=[];var t=function(t){t&&(0,l.Iuo)(t,(function(t){if(t[g.Ju]&&t[g.s]&&!e[t.identifier]){var n=t[g.Ju]+"="+t[g.s];$[g.y5](n),e[t.identifier]=t}}))};t(D),T&&(0,l.Iuo)(T,(function(e){t(e)})),t(S)}function ge(){n=!1,(t=(0,c.e)({},ie,e[g.Uw])).cfg[g.Bl]=1,(0,l.vF1)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,l.vF1)(e,"pluginVersionStringArr",{g:function(){return $||de(),$}}),(0,l.vF1)(e,"pluginVersionString",{g:function(){return M||($||de(),M=$.join(";")),M||w.m5}}),(0,l.vF1)(e,"logger",{g:function(){return r||(r=new v.wq(t.cfg),t[g.Uw]=r),r},s:function(e){t[g.Uw]=e,r!==e&&((0,f.K)(r,!1),r=e)}}),e[g.Uw]=new v.wq(t.cfg),V=[];var i=e.config[w.jy]||[];i.splice(0,i[g.oI]),(0,l.Yny)(i,V),I=new te,o=[],(0,f.K)(a,!1),a=null,h=null,m=null,(0,f.K)(b,!1),b=null,_=null,S=[],T=null,D=null,C=!1,R=null,A=(0,U.Z)("AIBaseCore",!0),k=(0,ne.P)(),E=null,O=null,x=(0,re.w)(),L=[],M=null,$=null,J=!1,G=null,B=!1,F=0,N=null,z=null,q=!1,j=null}function fe(){var n=(0,Q.i8)(ve(),t.cfg,e);return n[g.by](Z),n}function pe(t){var n=function(e,t,n){var r=[],o=[],a={};return(0,l.Iuo)(n,(function(n){((0,l.hXl)(n)||(0,l.hXl)(n[g.mE]))&&(0,l.$8)(oe);var i=n[w.Vo],s=n[g.Ju];n&&i&&((0,l.hXl)(a[i])?a[i]=s:(0,v.OG)(e,"Two extensions have same priority #"+i+" - "+a[i]+", "+s)),!i||i<t?r[g.y5](n):o[g.y5](n)})),{core:r,channels:o}}(e[g.Uw],p.i,S);_=null,M=null,$=null,D=(T||[])[0]||[],D=(0,ee.Xc)((0,l.Yny)(D,n[w.LZ]));var r=(0,l.Yny)((0,ee.Xc)(n[w.eT]),D);V=(0,l.N6t)(r);var o=e.config[w.jy]||[];o.splice(0,o[g.oI]),(0,l.Yny)(o,V);var a=fe();D&&D[g.oI]>0&&(0,ee.pI)(a[g.$o](D),r),(0,ee.pI)(a,r),t&&be(t)}function he(e){var t=null,n=null,r=[];return(0,l.Iuo)(V,(function(t){if(t[g.Ju]===e&&t!==I)return n=t,-1;t.getChannel&&r[g.y5](t)})),!n&&r[g.oI]>0&&(0,l.Iuo)(r,(function(t){if(!(n=t.getChannel(e)))return-1})),n&&(t={plugin:n,setEnabled:function(e){(0,ee.Cr)(n)[w.Hr]=!e},isEnabled:function(){var e=(0,ee.Cr)(n);return!e[g.Ik]&&!e[w.Hr]},remove:function(e,t){void 0===e&&(e=!0);var r=[n];me(r,{reason:1,isAsync:e},(function(e){e&&pe({reason:32,removed:r}),t&&t(e)}))}}),t}function ve(){if(!_){var n=(V||[]).slice();-1===(0,l.rDm)(n,I)&&n[g.y5](I),_=(0,Q.PV)((0,ee.Xc)(n),t.cfg,e)}return _}function me(n,r,o){if(n&&n[g.oI]>0){var a=(0,Q.PV)(n,t.cfg,e),i=(0,Q.tS)(a,e);i[g.by]((function(){var e=!1,t=[];(0,l.Iuo)(S,(function(r,o){ue(r,n)?e=!0:t[g.y5](r)})),S=t,M=null,$=null;var r=[];T&&((0,l.Iuo)(T,(function(t,o){var a=[];(0,l.Iuo)(t,(function(t){ue(t,n)?e=!0:a[g.y5](t)})),r[g.y5](a)})),T=r),o&&o(e),Z()})),i[g.$5](r)}else o(!1)}function ye(){if(r&&r.queue){var t=r.queue.slice(0);r.queue[g.oI]=0,(0,l.Iuo)(t,(function(t){var n={name:R||"InternalMessageId: "+t[g.JR],iKey:O,time:(0,y._u)(new Date),baseType:v.WD.dataType,baseData:{message:t[g.pM]}};e.track(n)}))}}function we(e,t,n,r){var o=1,a=!1,i=null;function s(){o--,a&&0===o&&(i&&i[g._w](),i=null,t&&t(a),t=null)}return r=r||5e3,D&&D[g.oI]>0&&fe()[g.$o](D).iterate((function(t){if(t.flush){o++;var a=!1;t.flush(e,(function(){a=!0,s()}),n)||a||(e&&null==i?i=(0,l.dRz)((function(){i=null,s()}),r):s())}})),a=!0,s(),!0}function be(t){var n=(0,Q.nU)(ve(),e);n[g.by](Z),e._updateHook&&!0===e._updateHook(n,t)||n[g.$5](t)}function _e(t){var n=e[g.Uw];n?((0,v.ZP)(n,2,73,t),Z()):(0,l.$8)(t)}function Se(t){var n=e[g.RF]();n&&n[w.Yp]([t],2)}function Te(e){x.add(e)}ge(),e._getDbgPlgTargets=function(){return[V,o]},e[g.tZ]=function(){return n},e.activeStatus=function(){return F},e._setPendingStatus=function(){F=3},e[g.mE]=function(o,f,p,b){var _;C&&(0,l.$8)(ae),e[g.tZ]()&&(0,l.$8)("Core cannot be initialized more than once"),o=(t=(0,c.e)(o,ie,p||e[g.Uw],!1)).cfg,Te(t[g.x6]((function(e){var t=e.cfg;z=t.initInMemoMaxSize||100,function(e){var t=e.instrumentationKey,o=e.endpointUrl;if(3!==F){if((0,l.hXl)(t)){O=null,F=d.f.INACTIVE;var a="Please provide instrumentation key";return void(n?((0,v.ZP)(r,1,100,a),X()):(0,l.$8)(a))}var i=[];(0,l.$XS)(t)?(i[g.y5](t),O=null):O=t,(0,l.$XS)(o)?(i[g.y5](o),N=null):N=o,i[g.oI]?function(e,t){q=!1,F=3;var n=(0,y.Gh)(e.initTimeOut)?e.initTimeOut:5e4,r=(0,u.lh)(t);j&&j[g._w](),j=(0,l.dRz)((function(){j=null,q||s()}),n),(0,u.Dv)(r,(function(t){try{if(q)return;if(!t.rejected){var n=t[g.pF];if(n&&n[g.oI]){var r=n[0];if(O=r&&r[g.pF],n[g.oI]>1){var o=n[1];N=o&&o[g.pF]}}O&&(e.instrumentationKey=O,e.endpointUrl=N)}s()}catch(e){q||s()}}))}(e,i):s()}}(t);var o=e.ref(e.cfg,w.Bw);(0,l.zav)(o,(function(t){e.ref(o,t)}))}))),P=function(e,t,n,r){return t.add(e[g.x6]((function(e){var t=e.cfg.disableDbgExt;!0===t&&r&&(n[g.h3](r),r=null),n&&!r&&!0!==t&&(r=(0,W.M)(e.cfg),n[g.vR](r))}))),r}(t,x,(a=b)&&e[g.RF](),P),Te(t[g.x6]((function(t){if(t.cfg.enablePerfMgr){var n=t.cfg[w.Yd];_===n&&_||(n||(n=se),(0,y.c2)(t.cfg,w.Yd,n),_=n,m=null),h||m||!(0,l.Tnt)(n)||(m=n(e,e[g.RF]()))}else m=null,_=null}))),e[g.Uw]=p;var I=o[w.jy];if((S=[])[g.y5].apply(S,(0,i.vz)((0,i.vz)([],f,!1),I,!1)),T=o[w.LZ],pe(null),D&&0!==D[g.oI]||(0,l.$8)("No "+w.LZ+" available"),T&&T[g.oI]>1){var R=e[g.AP]("TeeChannelController");R&&R.plugin||(0,v.ZP)(r,1,28,"TeeChannel required")}!function(e,t,n){(0,l.Iuo)(t,(function(t){var r=(0,c.a)(e,t.w,n);delete t.w,t.rm=function(){r.rm()}}))}(o,L,r),L=null,n=!0,F===d.f.ACTIVE&&X()},e.getChannels=function(){var e=[];return D&&(0,l.Iuo)(D,(function(t){e[g.y5](t)})),(0,l.N6t)(e)},e.track=function(t){(0,Y.r2)(e[w.kI](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(Se(t),(0,l.$8)("Invalid telemetry item")),!t[g.RS]&&(0,l.hXl)(t[g.RS])&&(Se(t),(0,l.$8)("telemetry name required")),t.iKey=t.iKey||O,t.time=t.time||(0,y._u)(new Date),t.ver=t.ver||"4.0",!C&&e[g.tZ]()&&F===d.f.ACTIVE?fe()[g.$5](t):F!==d.f.INACTIVE&&o[g.oI]<=z&&o[g.y5](t)}),(function(){return{item:t}}),!t.sync)},e[g.DI]=fe,e[g.RF]=function(){return a||(a=new K(t.cfg),e._notificationManager=a),a},e[g.vR]=function(t){e.getNotifyMgr()[g.vR](t)},e[g.h3]=function(e){a&&a[g.h3](e)},e.getCookieMgr=function(){return b||(b=H(t.cfg,e[g.Uw])),b},e.setCookieMgr=function(e){b!==e&&((0,f.K)(b,!1),b=e)},e[w.kI]=function(){return h||m||(0,Y.Z4)()},e.setPerfMgr=function(e){h=e},e.eventCnt=function(){return o[g.oI]},e.releaseQueue=function(){if(n&&o[g.oI]>0){var e=o;o=[],2===F?(0,l.Iuo)(e,(function(e){e.iKey=e.iKey||O,fe()[g.$5](e)})):(0,v.ZP)(r,2,20,"core init status is not active")}},e.pollInternalLogs=function(e){return R=e||null,J=!1,G&&G[g._w](),Z(!0)},e[g.Di]=function(){J=!0,G&&G[g._w](),ye()},(0,y.o$)(e,(function(){return I}),["addTelemetryInitializer"]),e[g.tI]=function(t,o,i){void 0===t&&(t=!0),n||(0,l.$8)("SDK is not initialized"),C&&(0,l.$8)(ae);var s,c={reason:50,isAsync:t,flushComplete:!1};t&&!o&&(s=(0,u.Qo)((function(e){o=e})));var d=(0,Q.tS)(ve(),e);function p(t){c.flushComplete=t,C=!0,k.run(d,c),e[g.Di](),d[g.$5](c)}return d[g.by]((function(){x.run(e[g.Uw]),(0,f.k)([b,a,r],t,(function(){ge(),o&&o(c)}))}),e),ye(),we(t,p,6,i)||p(!1),s},e[g.AP]=he,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void _e(oe);var o=he(e[g.Ju]);if(o&&!t)return r&&r(!1),void _e("Plugin ["+e[g.Ju]+"] is already loaded!");var a={reason:16};function i(t){S[g.y5](e),a.added=[e],pe(a),r&&r(!0)}if(o){var s=[o.plugin];me(s,{reason:2,isAsync:!!n},(function(e){e?(a.removed=s,a.reason|=32,i()):r&&r(!1)}))}else i()},e.updateCfg=function(n,r){var o;if(void 0===r&&(r=!0),e[g.tZ]()){o={reason:1,cfg:t.cfg,oldCfg:(0,l.zwS)({},t.cfg),newConfig:(0,l.zwS)({},n),merge:r},n=o.newConfig;var a=t.cfg;n[w.jy]=a[w.jy],n[w.LZ]=a[w.LZ]}t._block((function(e){var t=e.cfg;le(e,t,n,r),r||(0,l.zav)(t,(function(r){(0,l.KhI)(n,r)||e.set(t,r,w.HP)})),e.setDf(t,ie)}),!0),t.notify(),o&&be(o)},e.evtNamespace=function(){return A},e.flush=we,e.getTraceCtx=function(e){return E||(E=(0,ee.u7)()),E},e.setTraceCtx=function(e){E=e||null},e.addUnloadHook=Te,(0,y.RF)(e,"addUnloadCb",(function(){return k}),"add"),e.onCfgChange=function(r){var o,a,i,s;return n?o=(0,c.a)(t.cfg,r,e[g.Uw]):((s=ce(a=L,i=r).l)||(s={w:i,rm:function(){var e=ce(a,i);-1!==e.i&&a[g.Ic](e.i,1)}},a[g.y5](s)),o=s),function(e){return(0,l.vF1)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(o)},e.getWParam=function(){return(0,l.Wtk)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},181:e=>{"use strict";e.exports=require("buffer")},269:(e,t,n)=>{"use strict";function r(e,t){return e||t}function o(e,t){return e[t]}n.d(t,{$8:()=>ee,$XS:()=>B,AHH:()=>Dn,Cv9:()=>cn,DA8:()=>Ot,EHq:()=>Jt,EtT:()=>G,GuU:()=>ut,Gvm:()=>z,HzD:()=>gn,Iuo:()=>le,JBS:()=>Fe,KTd:()=>Ft,KVm:()=>Mt,KgX:()=>F,KhI:()=>ie,Lln:()=>Tt,Lmq:()=>U,Lok:()=>It,N6t:()=>Ae,O9V:()=>H,P0f:()=>ze,QdQ:()=>Kt,R3R:()=>an,SZ2:()=>L,Tnt:()=>N,UUD:()=>sn,UxO:()=>he,Vdv:()=>vt,W$7:()=>$t,WSA:()=>xe,Wtk:()=>pt,Y0g:()=>At,YEm:()=>ht,Yny:()=>Lt,ZHX:()=>Re,ZWZ:()=>Ge,ZrT:()=>Xt,aqQ:()=>jt,b07:()=>V,bJ7:()=>W,cGk:()=>Ce,cyL:()=>q,dRz:()=>Sn,eCG:()=>xt,f0d:()=>Je,fn0:()=>Ee,gBW:()=>P,hKY:()=>qe,hXl:()=>$,iho:()=>Zt,isD:()=>ve,jjc:()=>kt,jn:()=>un,kgX:()=>ln,mS$:()=>gt,mmD:()=>Q,nRs:()=>Ye,oJg:()=>K,rDm:()=>Vt,rpU:()=>He,sSX:()=>We,tGl:()=>fn,v0u:()=>oe,vE3:()=>De,vF1:()=>me,vKV:()=>Tn,w3n:()=>St,w9M:()=>yt,xZI:()=>Et,zS2:()=>ft,zav:()=>ue,zkX:()=>mt,zkd:()=>te,zwS:()=>rn,zzB:()=>J});var a,i=void 0,s=null,u="",l="function",c="object",d="prototype",g="__proto__",f="undefined",p="constructor",h="Symbol",v="length",m="name",y="call",w="toString",b="getOwnPropertyDescriptor",_=r(Object),S=o(_,d),T=r(String),D=o(T,d),C=r(Math),I=r(Array),R=o(I,d),A=o(R,"slice"),k="_polyfill",x="__nw21$polytype__";function P(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function E(e){return function(t){return typeof t===e}}function O(e){var t="[object "+e+"]";return function(e){return!(!e||L(e)!==t)}}function L(e){return S[w].call(e)}function V(e){return typeof e===f||e===f}function $(e){return e===s||V(e)}function M(e){return e===s||e===i}function H(e){return!!e||e!==i}var F=E("string"),N=E(l);function z(e){return!(!e&&$(e)||!e||typeof e!==c)}var q=o(I,"isArray"),j=O("Date"),G=E("number"),U=E("boolean"),W=O("Error");function B(e){return!!(e&&e.then&&N(e.then))}function J(e){return!(!e||(t=function(){return!(e&&0+e)},n=!e,r=P(t,undefined),r.e?n:r.v));var t,n,r}function X(){}function Z(){return!1}var K=r(T),Y="[object Error]";function Q(e,t){var n=u,r=S[w][y](e);r===Y&&(e={stack:K(e.stack),message:K(e.message),name:K(e.name)});try{n=((n=JSON.stringify(e,s,t?"number"==typeof t?t:4:i))?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||K(e)}catch(e){n=" - "+Q(e,t)}return r+": "+n}function ee(e){throw new Error(e)}function te(e){throw new TypeError(e)}function ne(e){M(e)&&te("Cannot convert undefined or null to object")}function re(e){F(e)||te("'"+Q(e)+"' is not a string")}function oe(e,t){return!!e&&S.hasOwnProperty[y](e,t)}var ae=r(o(_,b),X),ie=r(o(_,"hasOwn"),se);function se(e,t){return ne(e),oe(e,t)||!!ae(e,t)}function ue(e,t,n){if(e&&(z(e)||N(e)))for(var r in e)if(ie(e,r)&&-1===t[y](n||e,r,e[r]))break}function le(e,t,n){if(e)for(var r=e[v]>>>0,o=0;o<r&&(!(o in e)||-1!==t[y](n||e,e[o],o,e));o++);}var ce=de;function de(e,t,n){var r=t?t[e]:s;return function(t){var o=(t?t[e]:s)||r;if(o||n){var a=arguments;return(o||n).apply(t,o?A[y](a,1):a)}te('"'+K(e)+'" not defined for '+Q(t))}}function ge(e){return function(t){return t[e]}}var fe=r(o(_,b),X),pe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};var he=o(_,"defineProperty"),ve=o(_,"defineProperties");function me(e,t,n){return he(e,t,function(e){var t={};if(t[pe.c]=!0,t[pe.e]=!0,e.l){t.get=function(){return e.l.v};var n=fe(e.l,"v");n&&n.set&&(t.set=function(t){e.l.v=t})}return ue(e,(function(e,n){t[pe[e]]=n===i?t[pe[e]]:n})),t}(n))}function ye(e,t,n,r,o){var a={};return ue(e,(function(e,r){we(a,e,t?r:e),we(a,r,n?r:e)})),r?r(a):a}function we(e,t,n,r){he(e,t,{value:n,enumerable:!0,writable:!1})}var be=r(o(_,"isFrozen"),Z),_e=o(_,"freeze");function Se(e){return e}function Te(e){return ne(e),e[g]||s}var De=o(_,"assign"),Ce=o(_,"keys");function Ie(e,t){if((q(e)||z(e)||N(e))&&!be(e)){for(var n=0;n<t.length;n++)if(t[n]===e)return e;t.push(e),ue(e,(function(e,n){Ie(n,t)})),Ae(e)}return e}function Re(e){return _e?Ie(e,[]):e}var Ae=r(_e,Se),ke=r(o(_,"getPrototypeOf"),Te);function xe(e){return ye(e,1,0,Ae)}function Pe(e){return ye(e,0,0,Ae)}function Ee(e){return function(e){var t={};return ue(e,(function(e,n){we(t,e,n[1]),we(t,n[0],n[1])})),Ae(t)}(e)}var Oe,Le=Pe({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ve="__tsUtils$gblCfg";function $e(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function Me(){if(!Oe){var e=P($e).v||{};Oe=e[Ve]=e[Ve]||{}}return Oe}var He=o(C,"min"),Fe=o(C,"max"),Ne=ce("slice",D),ze=ce("substring",D),qe=de("substr",D,je);function je(e,t,n){return ne(e),n<0?u:((t=t||0)<0&&(t=Fe(t+e[v],0)),V(n)?Ne(e,t):Ne(e,t,t+n))}function Ge(e,t){return ze(e,0,t)}var Ue,We=r(o(_,"create"),Be);function Be(e,t){var n=null;function r(){}if(M(e))n={};else{var o=typeof e;o!==c&&o!==l&&te("Prototype must be an Object or function: "+Q(e)),r[d]=e,P((function(){r[g]=e})),n=new r}return t&&P(ve,[n,t]),n}function Je(){return(Date.now||Xe)()}function Xe(){return(new Date).getTime()}function Ze(e,t,n){return e.apply(t,n)}function Ke(){Ue=Me()}function Ye(e,t){var n={};return!Ue&&Ke(),n.b=Ue.lzy,he(n,"v",{configurable:!0,get:function(){var r=Ze(e,null,t);return Ue.lzy||he(n,"v",{value:r}),n.b=Ue.lzy,r}}),n}var Qe,et,tt=o(C,"random"),nt=Ye((function(){for(var e=Je().toString(36).slice(2);e.length<16;)e+=tt().toString(36).slice(2);return e.substring(0,16)})),rt="_urid",ot="$nw21sym",at=0;function it(e){var t="_"+at+++"_"+nt.v,n=h+"("+e+")";function r(e,t){me(i,e,{v:t,e:!1,w:!1})}var o,a,i=We(null);return r("description",K(e)),r(w,(function(){return n+ot+t})),r("valueOf",(function(){return i})),r("v",n),r("_uid",t),a="symbol",(o=i)&&(P((function(){o[k]=!0,o[x]=a})),P(me,[o,k,{v:!0,w:!1,e:!1}]),P(me,[o,x,{v:a,w:!1,e:!1}])),o}function st(e){var t=function(){if(!Qe){var e=Me();Qe=e.gblSym=e.gblSym||{k:{},s:{}}}return Qe}();if(!ie(t.k,e)){var n=it(e),r=Ce(t.s).length;n[rt]=function(){return r+"_"+n[w]()},t.k[e]=n,t.s[n[rt]()]=K(e)}return t.k[e]}function ut(e){return he({toJSON:function(){return e}},"v",{value:e})}var lt,ct="window";function dt(e,t){var n;return function(){return!Ue&&Ke(),n&&!Ue.lzy||(n=ut(P(e,t).v)),n.v}}function gt(e){return!Ue&&Ke(),lt&&!1!==e&&!Ue.lzy||(lt=ut(P($e).v||s)),lt.v}function ft(e,t){var n;if((n=lt&&!1!==t?lt.v:gt(t))&&n[e])return n[e];if(e===ct)try{return window}catch(e){}return s}function pt(){return!!ht()}var ht=dt(ft,["document"]);function vt(){return!!mt()}var mt=dt(ft,[ct]);function yt(){return!!St()}var wt,bt,_t,St=dt(ft,["navigator"]),Tt=dt((function(){return!!P((function(){return process&&(process.versions||{}).node})).v}));function Dt(){return wt=ut(P(ft,[h]).v)}function Ct(e){var t=(Ue.lzy?0:wt)||Dt();return t.v?t.v[e]:i}function It(){return!!Rt()}function Rt(){return!Ue&&Ke(),((Ue.lzy?0:wt)||Dt()).v}function At(e,t){var n=Le[e];!Ue&&Ke();var r=(Ue.lzy?0:wt)||Dt();return r.v?r.v[n||e]:t?i:function(e){var t;!et&&(et={});var n=Le[e];return n&&(t=et[n]=et[n]||it(h+"."+n)),t}(e)}function kt(e,t){!Ue&&Ke();var n=(Ue.lzy?0:wt)||Dt();return n.v?n.v(e):t?s:it(e)}function xt(e){return!Ue&&Ke(),((bt=(Ue.lzy?0:bt)||ut(P(Ct,["for"]).v)).v||st)(e)}function Pt(e){return!!e&&N(e.next)}function Et(e){return!M(e)&&N(e[At(3)])}function Ot(e,t,n){if(e&&(Pt(e)||(!_t&&(_t=ut(At(3))),e=e[_t.v]?e[_t.v]():s),Pt(e))){var r=i,o=i;try{for(var a=0;!(o=e.next()).done&&-1!==t[y](n||e,o.value,a,e);)a++}catch(t){r={e:t},e.throw&&(o=s,e.throw(r))}finally{try{o&&!o.done&&e.return&&e.return(o)}finally{if(r)throw r.e}}}}function Lt(e,t){return!V(t)&&e&&(q(t)?Ze(e.push,e,t):Pt(t)||Et(t)?Ot(t,(function(t){e.push(t)})):e.push(t)),e}var Vt=ce("indexOf",R),$t=ce("map",R);function Mt(e,t,n){return((e?e.slice:s)||A).apply(e,A[y](arguments,1))}var Ht,Ft=ce("reduce",R),Nt=r(o(_,"setPrototypeOf"),zt);function zt(e,t){var n;return!Ht&&(Ht=ut(((n={})[g]=[],n instanceof Array))),Ht.v?e[g]=t:ue(t,(function(t,n){return e[t]=n})),e}function qt(e,t){t&&(e[m]=t)}function jt(e,t,n){var r=n||Error,o=r[d][m],a=Error.captureStackTrace;return function(e,t,n){function r(){this[p]=t,P(me,[this,m,{v:e,c:!0,e:!1}])}return P(me,[t,m,{v:e,c:!0,e:!1}]),(t=Nt(t,n))[d]=n===s?We(n):(r[d]=n[d],new r),t}(e,(function(){var n=this,i=arguments;try{P(qt,[r,e]);var s=Ze(r,n,A[y](i))||n;if(s!==n){var u=ke(n);u!==ke(s)&&Nt(s,u)}return a&&a(s,n[p]),t&&t(s,i),s}finally{P(qt,[r,o])}}),r)}function Gt(e){return function(t){return ne(t),t&&t.replace&&(t=t.replace(e,u)),t}}var Ut,Wt,Bt,Jt=de("trim",D,Gt(/^\s+|(?=\s)\s+$/g)),Xt=o(C,"floor"),Zt=o(C,"ceil");function Kt(e){if(!e||typeof e!==c)return!1;Bt||(Bt=!vt()||mt());var t=!1;if(e!==Bt){Wt||(Ut=Function[d][w],Wt=Ut[y](_));try{var n=ke(e);(t=!n)||(oe(n,p)&&(n=n[p]),t=!(!n||typeof n!==l||Ut[y](n)!==Wt))}catch(e){}}return t}function Yt(e){return e.value&&nn(e),!0}var Qt=[function(e){var t=e.value;if(q(t)){var n=e.result=[];return n.length=t.length,e.copyTo(n,t),!0}return!1},nn,function(e){return e.type===l},function(e){var t=e.value;return!!j(t)&&(e.result=new Date(t.getTime()),!0)}];function en(e,t,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],u={handler:n.handler,src:n.src,path:i},l=typeof t,d=!1,g=t===s;g||(t&&l===c?d=Kt(t):g=function(e){return!a&&(a=["string","number","boolean",f,"symbol","bigint"]),!(e===c||-1===a.indexOf(e))}(l));var p={type:l,isPrim:g,isPlain:d,value:t,result:t,path:i,origin:n.src,copy:function(t,r){return en(e,t,r?u:n,r)},copyTo:function(t,n){return tn(e,t,n,u)}};return p.isPrim?o&&o[y](n,p)?p.result:t:function(e,t){var r;return le(e,(function(e){if(e.k===t)return r=e,-1})),r||(r={k:t,v:t},e.push(r),function(e){me(p,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,r=o;!(r||(t<Qt.length?Qt[t++]:Yt))[y](n,p);)r=s}(r)),r.v}(e,t)}function tn(e,t,n,r){if(!$(n))for(var o in n)t[o]=en(e,n[o],r,o);return t}function nn(e){var t=e.value;if(t&&e.isPlain){var n=e.result={};return e.copyTo(n,t),!0}return!1}function rn(e,t,n,r,o,a,i){return function(e,t){return le(t,(function(t){!function(e,t){tn([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(en([],s=e,{handler:undefined,src:s})||{},A[y](arguments));var s}var on,an=ge(v);function sn(){var e=(!Ue&&Ke(),on&&!Ue.lzy||(on=ut(P(ft,["performance"]).v)),on.v);return e&&e.now?e.now():Je()}var un=o(C,"round"),ln=r(o(_,b),X),cn=de("endsWith",D,dn);function dn(e,t,n){re(e);var r=F(t)?t:K(t),o=!V(n)&&n<e[v]?n:e[v];return ze(e,o-r[v],o)===r}var gn=ce("indexOf",D),fn=de("startsWith",D,pn);function pn(e,t,n){re(e);var r=F(t)?t:K(t),o=n>0?n:0;return ze(e,o,o+r[v])===r}var hn,vn,mn="ref",yn="unref",wn="hasRef",bn="enabled";function _n(e,t,n){var r=q(t),o=r?t.length:0,a=function(e){var t=N(e)?e:hn;if(!t){var n=Me().tmOut||[];q(n)&&n.length>0&&N(n[0])&&(t=n[0])}return t||setTimeout}(o>0?t[0]:r?i:t),u=function(e){var t=N(e)?e:vn;if(!t){var n=Me().tmOut||[];q(n)&&n.length>1&&N(n[1])&&(t=n[1])}return t||clearTimeout}(o>1?t[1]:i),l=n[0];n[0]=function(){c.dn(),Ze(l,i,A[y](arguments))};var c=function(e,t,n){var r,o=!0,a=e?t(s):s;function i(){return o=!1,a&&a[yn]&&a[yn](),r}function u(){a&&n(a),a=s}function l(){return a=t(a),o||i(),r}return(r={cancel:u,refresh:l})[wn]=function(){return a&&a[wn]?a[wn]():o},r[mn]=function(){return o=!0,a&&a[mn]&&a[mn](),r},r[yn]=i,{h:r=he(r,bn,{get:function(){return!!a},set:function(e){!e&&a&&u(),e&&!a&&l()}}),dn:function(){a=s}}}(e,(function(e){if(e){if(e.refresh)return e.refresh(),e;Ze(u,i,[e])}return Ze(a,i,n)}),(function(e){Ze(u,i,[e])}));return c.h}function Sn(e,t){return _n(!0,i,A[y](arguments))}function Tn(e,t,n){return _n(!0,e,A[y](arguments,1))}function Dn(e,t){return _n(!1,i,A[y](arguments))}},547:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToProvidersViewTool=void 0;const r=n(1398),o=n(2636),a=n(7295),i=n(6967);t.GoToProvidersViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Providers View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToProvidersViewTool.invoke");try{return o.Session.Current.Api?(a.ProvidersView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Providers View - showing installed Airflow providers with their versions")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToProvidersViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Providers View: ${e instanceof Error?e.message:String(e)}`)])}}}},581:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AirflowClientAdapter=void 0;const r=n(2636),o=n(5744);t.AirflowClientAdapter=class{async triggerDagRun(e,t="{}",n){try{JSON.parse(t)}catch(e){throw new Error(`Invalid JSON in config_json parameter: ${e instanceof Error?e.message:String(e)}`)}const a=await r.Session.Current.Api.triggerDag(e,t,n);if(!a.isSuccessful)throw new Error(a.error?.message||"Failed to trigger DAG run");o.DagTriggered(this,e,a.result.dag_run_id);const i=a.result;return{dag_id:i.dag_id||e,dag_run_id:i.dag_run_id||i.run_id||"",state:i.state||"queued",execution_date:i.execution_date||i.logical_date||(new Date).toISOString(),logical_date:i.logical_date||i.execution_date||(new Date).toISOString(),start_date:i.start_date,end_date:i.end_date,conf:i.conf}}async queryFailedRuns(e=24,t){const n=[];try{if(t){const o=await r.Session.Current.Api.getDagRunHistory(t);o.isSuccessful&&o.result?.dag_runs&&n.push(...this.filterFailedRuns(o.result.dag_runs,e))}else{const t=await r.Session.Current.Api.getDagList();if(t.isSuccessful&&t.result){const o=t.result,a=(Array.isArray(o)?o:o.dags||[]).slice(0,20).map((async t=>{try{const n=t.dag_id,o=await r.Session.Current.Api.getDagRunHistory(n);if(o.isSuccessful&&o.result?.dag_runs)return this.filterFailedRuns(o.result.dag_runs,e)}catch(e){return[]}return[]}));(await Promise.all(a)).forEach((e=>n.push(...e)))}}return n}catch(e){throw new Error(`Failed to query failed runs: ${e instanceof Error?e.message:String(e)}`)}}async getDags(e){try{const t=await r.Session.Current.Api.getDagList();if(!t.isSuccessful||!t.result)throw new Error(t.error?.message||"Failed to fetch DAG list");const n=t.result;return(Array.isArray(n)?n:n.dags||[]).filter((t=>t.is_paused===e)).map((e=>({dag_id:e.dag_id,is_paused:e.is_paused,is_active:void 0!==e.is_active?e.is_active:!e.is_paused,description:e.description,owners:e.owners,tags:e.tags})))}catch(e){throw new Error(`Failed to get DAG list: ${e instanceof Error?e.message:String(e)}`)}}async getRunningDags(){try{const e=await r.Session.Current.Api.getDagList();if(!e.isSuccessful||!e.result)throw new Error(e.error?.message||"Failed to fetch DAG list");const t=e.result,n=Array.isArray(t)?t:t.dags||[],o=[];for(const e of n)if(!e.is_paused)try{const t=await this.getLatestDagRun(e.dag_id);!t||"running"!==t.state&&"queued"!==t.state||o.push({dag_id:e.dag_id,is_paused:e.is_paused,is_active:void 0!==e.is_active?e.is_active:!e.is_paused,description:e.description,owners:e.owners,tags:e.tags,latest_run_state:t.state,latest_run_id:t.dag_run_id})}catch(e){continue}return o}catch(e){throw new Error(`Failed to get running DAGs: ${e instanceof Error?e.message:String(e)}`)}}async pauseDag(e,t){try{const n=await r.Session.Current.Api.pauseDag(e,t);if(!n.isSuccessful)throw new Error(n.error?.message||`Failed to ${t?"pause":"unpause"} DAG`);o.DagPaused(this,e)}catch(e){throw new Error(`Failed to change DAG state: ${e instanceof Error?e.message:String(e)}`)}}async getLatestDagRun(e){try{const t=await r.Session.Current.Api.getLastDagRun(e);if(!t.isSuccessful||!t.result)return;const n=t.result;return{dag_id:n.dag_id||e,dag_run_id:n.dag_run_id||n.run_id||"",state:n.state||"unknown",execution_date:n.execution_date||n.logical_date||(new Date).toISOString(),logical_date:n.logical_date||n.execution_date||(new Date).toISOString(),start_date:n.start_date,end_date:n.end_date,conf:n.conf}}catch(e){return}}async getTaskInstances(e,t){try{const n=await r.Session.Current.Api.getTaskInstances(e,t);return n.isSuccessful&&n.result&&n.result.task_instances||[]}catch(e){return[]}}async getTaskLog(e,t,n,o){try{const o=await r.Session.Current.Api.getTaskInstanceLogText(e,t,n);if(!o.isSuccessful)throw new Error(o.error?.message||"Failed to retrieve task log");const a=o.result||"";return a.length>400?"..."+a.slice(-400):a}catch(e){throw new Error(`Failed to get task log: ${e instanceof Error?e.message:String(e)}`)}}filterFailedRuns(e,t){const n=new Date;n.setHours(n.getHours()-t);const r=["failed","upstream_failed","skipped"];return e.filter((e=>!!r.includes(e.state)&&new Date(e.execution_date||e.logical_date||e.start_date)>=n)).map((e=>({dag_id:e.dag_id,dag_run_id:e.dag_run_id||e.run_id,state:e.state,execution_date:e.execution_date||e.logical_date,logical_date:e.logical_date||e.execution_date,start_date:e.start_date,end_date:e.end_date,error_message:this.extractErrorMessage(e)})))}async getDagRunHistory(e,t){try{const n=await r.Session.Current.Api.getDagRunHistory(e,t);if(!n.isSuccessful||!n.result)throw new Error(n.error?.message||"Failed to fetch DAG run history");return n.result}catch(e){throw new Error(`Failed to get DAG run history: ${e instanceof Error?e.message:String(e)}`)}}async cancelDagRun(e,t){try{const n=await r.Session.Current.Api.cancelDagRun(e,t);if(!n.isSuccessful)throw new Error(n.error?.message||"Failed to cancel DAG run");o.DagRunCancelled(this,e,t)}catch(e){throw new Error(`Failed to stop DAG run: ${e instanceof Error?e.message:String(e)}`)}}async getDagSource(e){try{const t=await r.Session.Current.Api.getSourceCode(e);if(!t.isSuccessful||!t.result)throw new Error(t.error?.message||"Failed to fetch DAG source code");return t.result}catch(e){throw new Error(`Failed to get DAG source code: ${e instanceof Error?e.message:String(e)}`)}}async getDagSourceCode(e){try{const t=await r.Session.Current.Api.getDagInfo(e);let n;t.isSuccessful&&t.result?.file_token&&(n=t.result.file_token);const o=await r.Session.Current.Api.getSourceCode(e,n);if(!o.isSuccessful||!o.result)throw new Error(o.error?.message||"Failed to fetch DAG source code");return o.result}catch(e){throw new Error(`Failed to get DAG source code: ${e instanceof Error?e.message:String(e)}`)}}extractErrorMessage(e){return e.note?e.note:"failed"===e.state?"DAG run failed":"upstream_failed"===e.state?"Upstream task(s) failed":"skipped"===e.state?"DAG run was skipped":void 0}}},659:(e,t,n)=>{"use strict";n.d(t,{Im:()=>i,qU:()=>u,vz:()=>l});var r=n(269),o=n(5664),a=(((0,r.mS$)()||{}).Symbol,((0,r.mS$)()||{}).Reflect,"hasOwnProperty"),i=r.vE3||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])o.Wy[a].call(t,i)&&(e[i]=t[i]);return e},s=function(e,t){return s=o.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[a](n)&&(e[n]=t[n])},s(e,t)};function u(e,t){function n(){this.constructor=e}typeof t!==o.hW&&null!==t&&(0,r.zkd)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[o.vR]=null===t?(0,r.sSX)(t):(n[o.vR]=t[o.vR],new n)}function l(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}},702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerHealthView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("ServerHealthView.constructor Started"),i.Telemetry.Current.send("ServerHealthView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("ServerHealthView.constructor Completed")}async loadData(){if(o.logToOutput("ServerHealthView.loadData Started"),i.Telemetry.Current.send("ServerHealthView.loadData.called"),!a.Session.Current.Api)return;const e=await a.Session.Current.Api.getHealth();e.isSuccessful&&(this.healthJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("ServerHealthView.renderHtml Started"),i.Telemetry.Current.send("ServerHealthView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("ServerHealthView.renderHtml Completed")}static render(){if(o.logToOutput("ServerHealthView.render Started"),i.Telemetry.Current.send("ServerHealthView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("serverHealthView","Server Health",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("ServerHealthView.dispose Started"),i.Telemetry.Current.send("ServerHealthView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("ServerHealthView._getWebviewContent Started"),i.Telemetry.Current.send("ServerHealthView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),s=o.getUri(e,t,["media","style.css"]);let u="";if(this.healthJson){if(this.healthJson.metadatabase){const e=this.healthJson.metadatabase.status||"N/A";u+=`\n                <tr class="table-row">\n                    <td>Metadatabase</td>\n                    <td>${this._getHealthEmoji(e)} ${this._escapeHtml(e)}</td>\n                </tr>`}if(this.healthJson.scheduler){const e=this.healthJson.scheduler.status||"N/A",t=o.toISODateTimeString(new Date(this.healthJson.scheduler.latest_scheduler_heartbeat))||"N/A";u+=`\n                <tr class="table-row">\n                    <td>Scheduler</td>\n                    <td>${this._getHealthEmoji(e)} ${this._escapeHtml(e)}</td>\n                </tr>`,"N/A"!==t&&(u+=`\n                    <tr class="table-row">\n                        <td>Latest Scheduler Heartbeat</td>\n                        <td>${this._escapeHtml(t)}</td>\n                    </tr>`)}if(this.healthJson.triggerer){const e=this.healthJson.triggerer.status||"N/A",t=o.toISODateTimeString(new Date(this.healthJson.triggerer.latest_triggerer_heartbeat))||"N/A";u+=`\n                <tr class="table-row">\n                    <td>Triggerer</td>\n                    <td>${this._getHealthEmoji(e)} ${this._escapeHtml(e)}</td>\n                </tr>`,"N/A"!==t&&(u+=`\n                    <tr class="table-row">\n                        <td>Latest Triggerer Heartbeat</td>\n                        <td>${this._escapeHtml(t)}</td>\n                    </tr>`)}if(this.healthJson.dag_processor){const e=this.healthJson.dag_processor.status||"N/A",t=o.toISODateTimeString(new Date(this.healthJson.dag_processor.latest_dag_processor_heartbeat))||"N/A";u+=`\n                <tr class="table-row">\n                    <td>DAG Processor</td>\n                    <td>${this._getHealthEmoji(e)} ${this._escapeHtml(e)}</td>\n                </tr>`,"N/A"!==t&&(u+=`\n                    <tr class="table-row">\n                        <td>Latest DAG Processor Heartbeat</td>\n                        <td>${this._escapeHtml(t)}</td>\n                    </tr>`)}}return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${s}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            h3 {\n                font-size: var(--font-size-md);\n                color: var(--vscode-descriptionForeground);\n                margin-top: -16px;\n                margin-bottom: var(--spacing-lg);\n                font-weight: normal;\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Server Health</title>\n      </head>\n      <body>  \n        <h2>Server Health</h2>\n        <h3>${a.Session.Current.Server?.apiUrl}</h3>\n        <div class="controls">\n            <vscode-button id="refresh-btn" appearance="secondary">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Component</th>\n                    <th>Status</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${u||'<tr><td colspan="2" style="text-align:center; padding: 20px; opacity: 0.7;">No health data available</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('refresh-btn').addEventListener('click', () => {\n                vscode.postMessage({ command: 'refresh' });\n            });\n        <\/script>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,(e=>t[e]))}_getHealthEmoji(e){const t=e.toLowerCase();return"healthy"===t?"âœ…":"unhealthy"===t?"âŒ":"âš ï¸"}_setWebviewMessageListener(e){o.logToOutput("ServerHealthView._setWebviewMessageListener Started"),i.Telemetry.Current.send("ServerHealthView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("ServerHealthView._setWebviewMessageListener Message Received "+e.command),"refresh"!==e.command||this.loadData()}),void 0,this._disposables)}}t.ServerHealthView=s},737:(e,t,n)=>{"use strict";n.d(t,{T:()=>S,Z:()=>_});var r=n(269),o=n(3673),a=n(6492),i=n(6182),s=n(7292),u=4294967296,l=4294967295,c=123456789,d=987654321,g=!1,f=c,p=d;function h(){try{var e=2147483647&(0,r.f0d)();(t=(Math.random()*u^e)+e)<0&&(t>>>=0),f=c+t&l,p=d-t&l,g=!0}catch(e){}var t}function v(e){var t=0,n=(0,s.MY)()||(0,s.iN)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&l),0===t&&(0,s.lT)()&&(g||h(),t=function(){var e=((p=36969*(65535&p)+(p>>16)&l)<<16)+(65535&(f=18e3*(65535&f)+(f>>16)&l))>>>0&l;return e>>>=0}()&l),0===t&&(t=(0,r.ZrT)(u*Math.random()|0)),e||(t>>>=0),t}var m="3.3.11",y="."+function(e){void 0===e&&(e=22);for(var t=v()>>>0,n=0,r=a.m5;r[i.oI]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(v()<<2&4294967295|3&t)>>>0,n=0);return r}(6),w=0;function b(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function _(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+w+++(t?"."+m:a.m5)+y)}function S(e){var t={id:_("_aiData-"+(e||a.m5)+"."+m),accept:function(e){return b(e)},get:function(e,n,a,i){var s=e[t.id];return s?s[(0,o.cH)(n)]:(i&&(s=function(e,t){var n=t[e.id];if(!n){n={};try{b(t)&&(0,r.vF1)(t,e.id,{e:!1,v:n})}catch(e){}}return n}(t,e),s[(0,o.cH)(n)]=a),a)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AirflowApi=void 0;const r=n(5914),o=n(6304),a=n(970),i=n(6967),s=async(e,t)=>(await Promise.resolve().then((()=>n(2065)))).default(e,t);t.AirflowApi=class{constructor(e){this.config=e}get version(){return this.config.apiUrl.includes("v1")?"v1":this.config.apiUrl.includes("v2")?"v2":"unknown"}async getJwtToken(){if(this.jwtToken)return this.jwtToken;try{const e=await s(this.config.apiUrl.replace("/api/v2","")+"/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.config.apiUserName,password:this.config.apiPassword})}),t=await e.json();if(201===e.status||200===e.status)return this.jwtToken=t.access_token,this.jwtToken;o.logToOutput(`getJwtToken failed: ${e.status} - ${JSON.stringify(t)}`)}catch(e){o.logToOutput("getJwtToken Error",e),i.Telemetry.Current.send("AirflowApi.getJwtToken.error",{error:e.message})}}async getHeaders(){const e={"Content-Type":"application/json"};if("v1"===this.version)e.Authorization="Basic "+(0,r.encode)(`${this.config.apiUserName}:${this.config.apiPassword}`);else if("v2"===this.version){const t=await this.getJwtToken();t?e.Authorization="Bearer "+t:o.showWarningMessage("Unable to obtain JWT token for Airflow API v2.")}return e}async checkConnection(){try{const e=await this.getHeaders();return 200===(await s(`${this.config.apiUrl}/dags?limit=1`,{method:"GET",headers:e})).status}catch(e){return i.Telemetry.Current.send("AirflowApi.checkConnection.error",{error:e.message}),!1}}async getDagList(){const e=new a.MethodResult,t=[];let n=0;try{for(;;){const r=await this.getHeaders(),a=await s(`${this.config.apiUrl}/dags?limit=100&offset=${n}`,{method:"GET",headers:r}),i=await a.json();if(200!==a.status)return o.showApiErrorMessage("Api Call Error",i),e.isSuccessful=!1,e;if(t.push(...i.dags),i.dags.length<100)break;n+=100}e.result=t,e.isSuccessful=!0}catch(t){o.showErrorMessage("Cannot connect to Airflow.",t),i.Telemetry.Current.send("AirflowApi.getDagList.error",{error:t.message}),e.isSuccessful=!1,e.error=t}return e}async triggerDag(e,t="{}",n){const r=new a.MethodResult;try{const a=await this.getHeaders();let i={conf:JSON.parse(t)};"v1"===this.version&&n?i.logical_date=n+"T00:00:00Z":"v2"===this.version&&(i.logical_date=n?n+"T00:00:00Z":(new Date).toISOString());const u=await s(`${this.config.apiUrl}/dags/${e}/dagRuns`,{method:"POST",headers:a,body:JSON.stringify(i)}),l=await u.json();200===u.status||201===u.status?(r.result=l,r.isSuccessful=!0):(o.showApiErrorMessage(`${e} Trigger Error`,l),r.isSuccessful=!1)}catch(t){o.showErrorMessage(`${e} Trigger Error`,t),i.Telemetry.Current.send("AirflowApi.triggerDag.error",{dagId:e,error:t.message}),r.isSuccessful=!1,r.error=t}return r}async getDagRun(e,t){const n=new a.MethodResult;try{const r=await this.getHeaders(),o=await s(`${this.config.apiUrl}/dags/${e}/dagRuns/${t}`,{method:"GET",headers:r}),a=await o.json();200===o.status?(n.result=a,n.isSuccessful=!0):n.isSuccessful=!1}catch(r){i.Telemetry.Current.send("AirflowApi.getDagRun.error",{dagId:e,dagRunId:t,error:r.message}),n.isSuccessful=!1,n.error=r}return n}async getLastDagRun(e){const t=await this.getDagRunHistory(e);if(t.isSuccessful&&t.result&&t.result.dag_runs&&t.result.dag_runs.length>0)return this.getDagRun(e,t.result.dag_runs[0].dag_run_id);const n=new a.MethodResult;return n.isSuccessful=!1,n}async getDagRunHistory(e,t){const n=new a.MethodResult;try{const r=await this.getHeaders();let o=`${this.config.apiUrl}/dags/${e}/dagRuns?order_by=-start_date`;if(t){const e=`${t}T00:00:00Z`,n=`${t}T23:59:59Z`;o+=`&start_date_gte=${encodeURIComponent(e)}&start_date_lte=${encodeURIComponent(n)}`}const a=await s(o,{method:"GET",headers:r}),i=await a.json();200===a.status?(n.result=i,n.isSuccessful=!0):n.isSuccessful=!1}catch(t){i.Telemetry.Current.send("AirflowApi.getDagRunHistory.error",{dagId:e,error:t.message}),n.isSuccessful=!1,n.error=t}return n}async pauseDag(e,t){const n=new a.MethodResult;try{const r=await this.getHeaders(),a=await s(`${this.config.apiUrl}/dags/${e}`,{method:"PATCH",headers:r,body:JSON.stringify({is_paused:t})}),i=await a.json();200===a.status?(n.result=i,n.isSuccessful=!0):(o.showApiErrorMessage(`${e} Pause Error`,i),n.isSuccessful=!1)}catch(t){o.showErrorMessage(`${e} Pause Error`,t),i.Telemetry.Current.send("AirflowApi.pauseDag.error",{dagId:e,error:t.message}),n.isSuccessful=!1,n.error=t}return n}async getSourceCode(e,t){const n=new a.MethodResult;try{const r=await this.getHeaders();let a="";if("v1"===this.version&&t)a=`${this.config.apiUrl}/dagSources/${t}`;else{if("v2"!==this.version)throw new Error("Unknown Airflow Version or missing file token");a=`${this.config.apiUrl}/dagSources/${e}`}const i=await s(a,{method:"GET",headers:r});if(200===i.status){if("v2"===this.version){const e=await i.json();n.result=e.content}else n.result=await i.text();n.isSuccessful=!0}else{const t=await i.json();o.showApiErrorMessage(`${e} Source Code Error`,t),n.isSuccessful=!1}}catch(t){o.showErrorMessage(`${e} Source Code Error`,t),i.Telemetry.Current.send("AirflowApi.getSourceCode.error",{dagId:e,error:t.message}),n.isSuccessful=!1,n.error=t}return n}async getImportErrors(){const e=new a.MethodResult;try{const t=await this.getHeaders(),n=await s(`${this.config.apiUrl}/importErrors`,{method:"GET",headers:t}),r=await n.json();200===n.status?(e.result=r,e.isSuccessful=!0):e.isSuccessful=!1}catch(t){i.Telemetry.Current.send("AirflowApi.getImportErrors.error",{error:t.message}),e.isSuccessful=!1,e.error=t}return e}async getTaskInstanceLog(e,t,n,r){const u=new a.MethodResult;try{const o=await this.getHeaders(),a=await s(`${this.config.apiUrl}/dags/${e}/dagRuns/${t}/taskInstances/${n}/logs/${r}`,{method:"GET",headers:o}),i=await a.json();u.result=i,u.isSuccessful=!0}catch(a){o.showErrorMessage(`${e} Log Error`,a),i.Telemetry.Current.send("AirflowApi.getTaskInstanceLog.error",{dagId:e,dagRunId:t,taskId:n,tryNumber:r.toString(),error:a.message}),u.isSuccessful=!1,u.error=a}return u}async getTaskInstanceLogText(e,t,n,r){const s=new a.MethodResult;try{if(void 0===r){const o=await this.getTaskInstances(e,t);if(!o.isSuccessful)return s.isSuccessful=!1,s.error=o.error,s;const a=o.result.task_instances.find((e=>e.task_id===n));if(!a)throw new Error(`Task instance not found for taskId: ${n}`);r=a.try_number}const o=await this.getTaskInstanceLog(e,t,n,r);if(!o.isSuccessful)return s.isSuccessful=!1,s.error=o.error,s;const a=o.result,i=JSON.stringify(a,null,2);let u="";u+="############################################################\n",u+=`Dag=${e}\nDagRun=${t}\nTaskId=${n}\nTry=${r}\n`,u+="############################################################\n\n",u+=i,s.result=u,s.isSuccessful=!0}catch(a){o.showErrorMessage(`${e} Log Error`,a),i.Telemetry.Current.send("AirflowApi.getTaskInstanceLogText.error",{dagId:e,dagRunId:t,taskId:n,tryNumber:r?.toString()||"undefined",error:a.message}),s.isSuccessful=!1,s.error=a}return s}async getLastDagRunLogText(e){const t=new a.MethodResult;try{const n=await this.getDagRunHistory(e);if(!n.isSuccessful||!n.result.dag_runs.length)throw new Error("No DAG runs found");const r=n.result.dag_runs[0].dag_run_id;let o=await this.getDagRunLogText(e,r);if(!o.isSuccessful)return t.isSuccessful=!1,t.error=o.error,t;t.result=o.result,t.isSuccessful=!0}catch(n){o.showErrorMessage(`${e} Log Error`,n),i.Telemetry.Current.send("AirflowApi.getLastDagRunLogText.error",{dagId:e,error:n.message}),t.isSuccessful=!1,t.error=n}return t}async getDagRunLogText(e,t){const n=new a.MethodResult;try{const r=await this.getTaskInstances(e,t);if(!r.isSuccessful)return n.isSuccessful=!1,n.error=r.error,n;let o="";for(const a of r.result.task_instances){const r=a.task_id,i=a.try_number,s=await this.getTaskInstanceLogText(e,t,r,i);if(!s.isSuccessful)return n.isSuccessful=!1,n.error=s.error,n;o+=s.result+"\n\n"}return n.result=o,n.isSuccessful=!0,n}catch(r){o.showErrorMessage(`${e} Log Error`,r),i.Telemetry.Current.send("AirflowApi.getDagRunLogText.error",{dagId:e,dagRunId:t,error:r.message}),n.isSuccessful=!1,n.error=r}}async getDagInfo(e){return this.genericGet(`/dags/${e}`)}async getDagTasks(e){return this.genericGet(`/dags/${e}/tasks`)}async getTaskInstances(e,t){return this.genericGet(`/dags/${e}/dagRuns/${t}/taskInstances`)}async cancelDagRun(e,t){const n=new a.MethodResult;try{const r=await this.getHeaders(),a=await s(`${this.config.apiUrl}/dags/${e}/dagRuns/${t}`,{method:"PATCH",headers:r,body:JSON.stringify({state:"failed"})}),i=await a.json();200===a.status?(n.result=i,n.isSuccessful=!0):(o.showApiErrorMessage(`${e} Cancel Error`,i),n.isSuccessful=!1)}catch(r){o.showErrorMessage(`${e} Cancel Error`,r),i.Telemetry.Current.send("AirflowApi.cancelDagRun.error",{dagId:e,dagRunId:t,error:r.message}),n.isSuccessful=!1,n.error=r}return n}async getTaskXComs(e,t,n){const r=new a.MethodResult;try{const a=await this.getHeaders(),i=await s(`${this.config.apiUrl}/dags/${e}/dagRuns/${t}/taskInstances/${n}/xcomEntries`,{method:"GET",headers:a});if(200===i.status){const e=await i.json();r.result=e,r.isSuccessful=!0}else{const e=await i.json();o.showApiErrorMessage(`XCom fetch error for ${n}`,e),r.isSuccessful=!1}}catch(a){o.showErrorMessage(`XCom fetch error for ${n}`,a),i.Telemetry.Current.send("AirflowApi.getTaskXComs.error",{dagId:e,dagRunId:t,taskId:n,error:a.message}),r.isSuccessful=!1,r.error=a}return r}async updateDagRunNote(e,t,n){const r=new a.MethodResult;try{const a=await this.getHeaders(),i=await s(`${this.config.apiUrl}/dags/${e}/dagRuns/${t}`,{method:"PATCH",headers:a,body:JSON.stringify({note:n})}),u=await i.json();200===i.status?(r.result=u,r.isSuccessful=!0):(o.showApiErrorMessage("Failed to update note",u),r.isSuccessful=!1)}catch(n){o.showErrorMessage("Failed to update note",n),i.Telemetry.Current.send("AirflowApi.updateDagRunNote.error",{dagId:e,dagRunId:t,error:n.message}),r.isSuccessful=!1,r.error=n}return r}async getConnections(){return this.genericGet("/connections")}async getVariables(){return this.genericGet("/variables")}async getProviders(){return this.genericGet("/providers")}async getConfig(){return this.genericGet("/config")}async getPlugins(){return this.genericGet("/plugins")}async getHealth(){return this.genericGet("/monitor/health")}async genericGet(e){const t=new a.MethodResult;try{const n=await this.getHeaders(),r=await s(`${this.config.apiUrl}${e}`,{method:"GET",headers:n}),a=await r.json();200===r.status?(t.result=a,t.isSuccessful=!0):(o.showApiErrorMessage(`Error fetching ${e}`,a),t.isSuccessful=!1)}catch(n){o.showErrorMessage(`Error fetching ${e}`,n),i.Telemetry.Current.send("AirflowApi.genericGet.error",{endpoint:e,error:n.message}),t.isSuccessful=!1,t.error=n}return t}}},836:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});var r=n(269),o=n(6182),a=n(3775);function i(){var e=[];return{add:function(t){t&&e[o.y5](t)},run:function(t,n){(0,r.Iuo)(e,(function(e){try{e(t,n)}catch(e){(0,a.ZP)(t[o.e4](),2,73,"Unexpected error calling unload handler - "+(0,r.mmD)(e))}})),e=[]}}}},856:(e,t,n)=>{"use strict";n.d(t,{v:()=>p});var r=n(8279),o=n(8205),a=n(269),i=n(6182),s=n(7847),u=n(3775),l=n(7292),c=n(3673),d="",g="&NoResponseBody=true",f="POST",p=function(){function e(){var t,n,p,h,v,m,y,w,b,_,S,T,D,C,I=0;(0,r.A)(e,this,(function(e,r){var R=!0;function A(e,t){(0,u.ZP)(p,2,26,"Failed to send telemetry.",{message:e}),x(t,400,{})}function k(e){A("No endpoint url is provided for the batch",e)}function x(e,t,n,r){try{e&&e(t,n,r)}catch(e){}}function P(e,t){var n=(0,a.w3n)(),r=e[i.Vq];if(!r)return k(t),!0;r=e[i.Vq]+(D?g:d);var o=e[i.Cd],s=h?o:new Blob([o],{type:"text/plain;charset=UTF-8"});return n.sendBeacon(r,s)}function E(e,t,n){var r=e[i.Cd];try{if(r)if(P(e,t))x(t,200,{},d);else{var o=v&&v.beaconOnRetry;o&&(0,a.Tnt)(o)?o(e,t,P):(w&&w.sendPOST(e,t,!0),(0,u.ZP)(p,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){h&&(0,u.OG)(p,"Failed to send telemetry using sendBeacon API. Ex:"+(0,a.mmD)(e)),x(t,h?0:400,{},d)}}function O(e,n,r){var s,u,l,g=e[i.c1]||{};!r&&t&&(s=(0,o.Qo)((function(e,t){u=e,l=t}))),h&&r&&e.disableXhrSync&&(r=!1);var p=e[i.Vq];if(!p)return k(n),void(u&&u(!1));var m=(0,c.H$)(f,p,R,!0,r,e[i.do]);function y(t){var r=v&&v.xhrOnComplete;if(r&&(0,a.Tnt)(r))r(t,n,e);else{var o=(0,c.Lo)(t);x(n,t[i.cV],(0,c.w3)(t,h),o)}}return h||m.setRequestHeader("Content-type","application/json"),(0,a.Iuo)((0,a.cGk)(g),(function(e){m.setRequestHeader(e,g[e])})),m.onreadystatechange=function(){h||(y(m),4===m.readyState&&u&&u(!0))},m.onload=function(){h&&y(m)},m.onerror=function(e){x(n,h?m[i.cV]:400,(0,c.w3)(m,h),h?d:(0,c.r4)(m)),l&&l(e)},m.ontimeout=function(){x(n,h?m[i.cV]:500,(0,c.w3)(m,h),h?d:(0,c.r4)(m)),u&&u(!1)},m.send(e[i.Cd]),s}function L(e,n,r){var u,l,c,p,m=e[i.Vq],w=e[i.Cd],b=h?w:new Blob([w],{type:"application/json"}),_=new Headers,S=w[i.oI],T=!1,A=!1,P=e[i.c1]||{},E=((u={method:f,body:b})[s.x]=!0,u);e.headers&&(0,a.cGk)(e.headers)[i.oI]>0&&((0,a.Iuo)((0,a.cGk)(P),(function(e){_.append(e,P[e])})),E[i.c1]=_),y?E.credentials=y:R&&h&&(E.credentials="include"),r&&(E.keepalive=!0,I+=S,h?2===e._sendReason&&(T=!0,D&&(m+=g)):T=!0);var O=new Request(m,E);try{O[s.x]=!0}catch(e){}if(!r&&t&&(l=(0,o.Qo)((function(e,t){c=e,p=t}))),!m)return k(n),void(c&&c(!1));function L(e,t){x(n,t?h?0:t:h?0:400,{},h?d:e)}function V(e,t,r){var o=e[i.cV],s=v.fetchOnComplete;s&&(0,a.Tnt)(s)?s(e,n,r||d,t):x(n,o,{},r||d)}try{(0,o.Dv)(fetch(h?m:O,h?E:null),(function(t){if(r&&(I-=S,S=0),!A)if(A=!0,t.rejected)L(t.reason&&t.reason[i.pM],499),p&&p(t.reason);else{var n=t[i.pF];try{h||n.ok?h&&!n.body?(V(n,null,d),c&&c(!0)):(0,o.Dv)(n.text(),(function(t){V(n,e,t[i.pF]),c&&c(!0)})):(n[i.cV]?L(n.statusText,n[i.cV]):L(n.statusText,499),c&&c(!1))}catch(e){n&&n[i.cV]?L((0,a.mmD)(e),n[i.cV]):L((0,a.mmD)(e),499),p&&p(e)}}}))}catch(e){A||(L((0,a.mmD)(e),499),p&&p(e))}return T&&!A&&(A=!0,x(n,200,{}),c&&c(!0)),h&&!A&&e[i.do]>0&&C&&C.set((function(){A||(A=!0,x(n,500,{}),c&&c(!0))}),e[i.do]),l}function V(e,t,n){var r=(0,a.zkX)(),o=new XDomainRequest,s=e[i.Cd];o.onload=function(){var n=(0,c.Lo)(o),r=v&&v.xdrOnComplete;r&&(0,a.Tnt)(r)?r(o,t,e):x(t,200,{},n)},o.onerror=function(){x(t,400,{},h?d:(0,c.HU)(o))},o.ontimeout=function(){x(t,500,{})},o.onprogress=function(){};var l=r&&r.location&&r.location.protocol||"",g=e[i.Vq];if(g){if(!h&&0!==g.lastIndexOf(l,0)){var m="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,u.ZP)(p,2,40,". "+m),void A(m,t)}var y=h?g:g[i.W7](/^(https?:)/,"");o.open(f,y),e[i.do]&&(o[i.do]=e[i.do]),o.send(s),h&&n?C&&C.set((function(){o.send(s)}),0):o.send(s)}else k(t)}function $(){I=0,n=!1,t=!1,p=null,h=null,v=null,m=null,y=null,w=null,b=!1,_=!1,S=!1,T=!1,D=!1,C=null}$(),e[i.mE]=function(t,r){p=r,n&&(0,u.ZP)(p,1,28,"Sender is already initialized"),e.SetConfig(t),n=!0},e._getDbgPlgTargets=function(){return[n,h,m,t]},e.SetConfig=function(e){try{if(v=e.senderOnCompleteCallBack||{},m=!!e.disableCredentials,y=e.fetchCredentials,h=!!e.isOneDs,t=!!e.enableSendPromise,b=!!e.disableXhr,_=!!e.disableBeacon,S=!!e.disableBeaconSync,C=e.timeWrapper,D=!!e.addNoResponse,T=!!e.disableFetchKeepAlive,w={sendPOST:O},h||(R=!1),m){var n=(0,l.g$)();n&&n.protocol&&"file:"===n.protocol[i.OL]()&&(R=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return I},e.getSenderInst=function(e,t){return e&&e[i.oI]?function(e,t){for(var n=0,r=null,o=0;null==r&&o<e[i.oI];)n=e[o],b||1!==n?2!==n||!(0,l.R7)(t)||t&&T?3!==n||!(0,l.Uf)()||(t?S:_)||(r=E):r=L:(0,l.PV)()?r=V:(0,l.xk)()&&(r=O),o++;return r?{_transport:n,_isSync:t,sendPOST:r}:null}(e,t):null},e.getFallbackInst=function(){return w},e[i.tn]=function(e,t){$()},e.preparePayload=function(e,t,n,r){if(t&&!r&&n[i.Cd])try{var s=(0,a.zS2)("CompressionStream");if(!(0,a.Tnt)(s))return void e(n);var u=new ReadableStream({start:function(e){e.enqueue((0,a.KgX)(n[i.Cd])?(new TextEncoder).encode(n[i.Cd]):n[i.Cd]),e.close()}}).pipeThrough(new s("gzip")).getReader(),l=[],c=0,d=!1;return(0,o.Dv)(u.read(),(function t(r){if(!d&&!r.rejected){var a=r[i.pF];if(!a.done)return l[i.y5](a[i.pF]),c+=a.value[i.oI],(0,o.Dv)(u.read(),t);for(var s=new Uint8Array(c),g=0,f=0,p=l;f<p.length;f++){var h=p[f];s.set(h,g),g+=h[i.oI]}n[i.Cd]=s,n[i.c1]["Content-Encoding"]="gzip",n._chunkCount=l[i.oI]}d||(d=!0,e(n))})),u}catch(t){return void e(n)}else e(n)}}))}return e.__ieDyn=1,e}()},857:e=>{"use strict";e.exports=require("os")},937:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,_0:()=>i,hj:()=>a,m5:()=>r});var r="",o="https://browser.events.data.microsoft.com/OneCollector/1.0/",a="version",i="properties"},970:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodResult=void 0,t.MethodResult=class{constructor(){this.result=void 0,this.isSuccessful=!1,this.error=void 0}}},991:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(269),o=n(6182);function a(e){return e&&(0,r.Gvm)(e)&&!(0,r.cyL)(e)&&(e.isVal||e.fb||(0,r.KhI)(e,"v")||(0,r.KhI)(e,"mrg")||(0,r.KhI)(e,"ref")||e.set)}function i(e,t,n){var a,i=n.dfVal||r.O9V;if(t&&n.fb){var s=n.fb;(0,r.cyL)(s)||(s=[s]);for(var u=0;u<s[o.oI];u++){var l=s[u],c=t[l];if(i(c)?a=c:e&&(i(c=e.cfg[l])&&(a=c),e.set(e.cfg,(0,r.oJg)(l),c)),i(a))break}}return!i(a)&&i(n.v)&&(a=n.v),a}function s(e,t,n){var u,l=n;return n&&a(n)&&(l=i(e,t,n)),l&&(a(l)&&(l=s(e,t,l)),(0,r.cyL)(l)?(u=[])[o.oI]=l[o.oI]:(0,r.QdQ)(l)&&(u={}),u&&((0,r.zav)(l,(function(n,r){r&&a(r)&&(r=s(e,t,r)),u[n]=r})),l=u)),l}function u(e,t,n,o){var l,c,d,g,f,p,h,v,m=o;a(m)?(l=m.isVal,c=m.set,p=m.rdOnly,h=m.blkVal,g=m.mrg,!(f=m.ref)&&(0,r.b07)(f)&&(f=!!g),d=i(e,t,m)):d=o,h&&e.blkVal(t,n);var y=!0,w=t[n];!w&&(0,r.hXl)(w)||(v=w,y=!1,l&&v!==d&&!l(v)&&(v=d,y=!0),c&&(y=(v=c(v,d,t))===d)),y?v=d?s(e,t,d):d:((0,r.QdQ)(v)||(0,r.cyL)(d))&&g&&d&&((0,r.QdQ)(d)||(0,r.cyL)(d))&&(0,r.zav)(d,(function(t,n){u(e,v,t,n)})),e.set(t,n,v),f&&e.ref(t,n),p&&e.rdOnly(t,n)}},1165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDagHistoryTool=void 0;const r=n(1398),o=n(6304),a=n(5617),i=n(6967);t.GetDagHistoryTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n,date:r}=e.input;return{invocationMessage:`Retrieving history for DAG '${n}' (date: ${r||o.toISODateString(new Date)})`}}async invoke(e,t){const{dagId:n,date:s}=e.input;a.AIHandler.Current.currentDagId=n,i.Telemetry.Current.send("GetDagHistoryTool.invoke");const u=s||o.toISODateString(new Date);try{const e=await this.client.getDagRunHistory(n,u);if(!e||!e.dag_runs||0===e.dag_runs.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No run history found for DAG '${n}' on ${u}.`)]);const t=e.dag_runs;let o=`## ðŸ“œ DAG Run History for '${n}'\n\n`;return o+=`**Date Filter:** ${u}\n`,o+=`**Total Runs:** ${t.length}\n\n`,o+="---\n\n",o+="| # | Date/Time | Status | Duration | Note |\n",o+="|---|-----------|--------|----------|------|\n",t.forEach(((e,t)=>{const n=e.execution_date||e.logical_date||"N/A",r=this.getStatusEmoji(e.state)+" "+(e.state||"unknown");let a="N/A";if(e.start_date&&e.end_date){const t=new Date(e.start_date),n=new Date(e.end_date).getTime()-t.getTime(),r=Math.floor(n/1e3);a=`${Math.floor(r/60)}m ${r%60}s`}else e.start_date&&!e.end_date&&(a="â³ Running");const i=e.note||"-";o+=`| ${t+1} | ${n} | ${r} | ${a} | ${i} |\n`})),o+="\n---\n\n",o+="### Detailed Breakdown\n\n",t.forEach(((e,t)=>{if(o+=`#### ${t+1}. Run ID: ${e.dag_run_id||e.run_id}\n\n`,o+=`- **Status:** ${this.getStatusEmoji(e.state)} ${e.state||"unknown"}\n`,o+=`- **Execution Date:** ${e.execution_date||e.logical_date}\n`,o+=`- **Logical Date:** ${e.logical_date||e.execution_date}\n`,e.start_date&&(o+=`- **Start Date:** ${e.start_date}\n`),e.end_date){o+=`- **End Date:** ${e.end_date}\n`;const t=new Date(e.start_date),n=new Date(e.end_date).getTime()-t.getTime(),r=Math.floor(n/1e3),a=Math.floor(r/60);o+=`- **Duration:** ${a}m ${r%60}s\n`}e.note&&(o+=`- **Note:** ${e.note}\n`),e.conf&&Object.keys(e.conf).length>0&&(o+=`- **Configuration:** \`${JSON.stringify(e.conf)}\`\n`),o+="\n"})),o+="---\n\n**Raw Data (JSON):**\n\n",o+=`\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n`,new r.LanguageModelToolResult([new r.LanguageModelTextPart(o)])}catch(e){const t=`\nâŒ Failed to retrieve DAG history\n\n**Error:** ${e instanceof Error?e.message:String(e)}\n\nPlease check:\n- The DAG ID is correct\n- The date format is YYYY-MM-DD\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();return i.Telemetry.Current.sendError("GetDagHistoryTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",up_for_retry:"ðŸ”„",up_for_reschedule:"ðŸ“…",removed:"ðŸ—‘ï¸",scheduled:"ðŸ“†"}[e?.toLowerCase()]||"â“"}}},1398:e=>{"use strict";e.exports=require("vscode")},1430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagView=void 0;const r=n(1398),o=n(5083),a=n(9896),i=n(6304),s=n(2),u=n(5744),l=n(2636),c=n(5617),d=n(5072),g=n(6967);class f{constructor(e,t,n){this._disposables=[],this.dagHistorySelectedDate=i.toISODateString(new Date),this.activetabid="tab-1",i.logToOutput("DagView.constructor Started"),g.Telemetry.Current.send("dagView.constructor.called"),this.dagId=t,this.dagRunId=n,this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadAllDagData(),i.logToOutput("DagView.constructor Completed")}resetDagData(){this.activetabid="tab-1",this.dagJson=void 0,this.dagRunJson=void 0,this.dagRunHistoryJson=void 0,this.dagTaskInstancesJson=void 0,this.dagTasksJson=void 0,this.stopCheckingDagRunStatus()}async loadAllDagData(){i.logToOutput("DagView.loadAllDagData Started"),g.Telemetry.Current.send("dagView.loadAllDagData.called"),await this.getDagInfo(),this.dagRunId?await this.getDagRun():await this.getLastRun(),await this.getDagTasks(),await this.renderHmtl()}async loadDagInfoOnly(){i.logToOutput("DagView.loadDagInfoOnly Started"),g.Telemetry.Current.send("dagView.loadDagInfoOnly.called"),await this.getDagInfo(),await this.renderHmtl()}async renderHmtl(){i.logToOutput("DagView.renderHmtl Started"),g.Telemetry.Current.send("dagView.renderHmtl.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,l.Session.Current.ExtensionUri),i.logToOutput("DagView.renderHmtl Completed")}static render(e,t){if(i.logToOutput("DagView.render Started"),g.Telemetry.Current.send("dagView.render.called"),f.Current)f.Current.dagId=e,f.Current.dagRunId=t,f.Current._panel.reveal(r.ViewColumn.Two),f.Current.resetDagData(),f.Current.loadAllDagData();else{const n=r.window.createWebviewPanel("dagView","Dag View",r.ViewColumn.Two,{enableScripts:!0});f.Current=new f(n,e,t)}}createAndOpenTempFile(e,t,n){const r=o.fileSync({mode:420,prefix:t,postfix:n});a.appendFileSync(r.name,e),i.openFile(r.name)}async getLastRun(){if(i.logToOutput("DagView.getLastRun Started"),g.Telemetry.Current.send("dagView.getLastRun.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getLastDagRun(this.dagId);e.isSuccessful&&(this.dagRunJson=e.result,this.dagRunId=this.dagRunJson.dag_run_id,this.getTaskInstances(),this.dagRunJson&&"running"===this.dagRunJson.state&&this.startCheckingDagRunStatus())}goToDagRun(e,t){this.dagId=e,this.dagRunId=t,this.getDagRun()}goToDag(e){this.dagId=e,this.dagRunId=void 0,this.getLastRun()}async getDagRun(){if(i.logToOutput("DagView.getDagRun Started"),g.Telemetry.Current.send("dagView.getDagRun.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getDagRun(this.dagId,this.dagRunId);e.isSuccessful&&(this.dagRunJson=e.result,this.dagRunId=this.dagRunJson.dag_run_id,this.getTaskInstances()),await this.renderHmtl()}async getRunHistory(e){if(i.logToOutput("DagView.getRunHistory Started"),g.Telemetry.Current.send("dagView.getRunHistory.called"),!l.Session.Current.Api)return;const t=await l.Session.Current.Api.getDagRunHistory(this.dagId,e);t.isSuccessful&&(this.dagRunHistoryJson=t.result)}async getTaskInstances(){if(i.logToOutput("DagView.getTaskInstances Started"),g.Telemetry.Current.send("dagView.getTaskInstances.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getTaskInstances(this.dagId,this.dagRunId);e.isSuccessful&&(this.dagTaskInstancesJson=e.result)}async getDagInfo(){if(i.logToOutput("DagView.getDagInfo Started"),g.Telemetry.Current.send("dagView.getDagInfo.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getDagInfo(this.dagId);e.isSuccessful&&(this.dagJson=e.result)}async getDagTasks(){if(i.logToOutput("DagView.getDagTasks Started"),g.Telemetry.Current.send("dagView.getDagTasks.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getDagTasks(this.dagId);e.isSuccessful&&(this.dagTasksJson=e.result)}dispose(){for(i.logToOutput("DagView.dispose Started"),g.Telemetry.Current.send("dagView.dispose.called"),f.Current=void 0,this.stopCheckingDagRunStatus(),this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){i.logToOutput("DagView._getWebviewContent Started"),g.Telemetry.Current.send("dagView.getWebviewContent.called");const n=i.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=i.getUri(e,t,["media","main.js"]),o=i.getUri(e,t,["media","style.css"]);let a,s,u,l="",c="",d="",f="",p=!1,h=!1;this.dagRunJson&&(l=this.dagRunJson.state,a=this.dagRunJson.logical_date,s=this.dagRunJson.start_date,u=this.dagRunJson.end_date,c=a?i.toISODateTimeString(new Date(a)):"",d=s?i.toISODateTimeString(new Date(s)):"",f=s?i.getDuration(new Date(s),u?new Date(u):new Date):"",p="queued"===l||"running"===l,h=!0);let v="";if(this.dagTaskInstancesJson)for(const e of this.dagTaskInstancesJson.task_instances)"running"!==e.state&&"failed"!==e.state&&"up_for_retry"!==e.state&&"up_for_reschedule"!==e.state&&"deferred"!==e.state||(v+=`<span class="task-tag state-${e.state}">${e.task_id}</span> `);let m=this.dagJson&&Array.isArray(this.dagJson.owners)?this.dagJson.owners.join(", "):"",y="";this.dagJson&&Array.isArray(this.dagJson.tags)&&this.dagJson.tags.forEach((e=>{y+=`<span class="tag">${e.name}</span> `}));let w=this.dagJson&&this.dagJson.timetable_description?this.dagJson.timetable_description+" - "+this.dagJson.timetable_summary:"",b=this.dagJson&&this.dagJson.next_dagrun_data_interval_start?i.toISODateTimeString(new Date(this.dagJson.next_dagrun_data_interval_start)):"None",_=this.dagJson?this.dagJson.is_paused?"true":"false":"unknown",S="true"===_,T="";if(this.dagTaskInstancesJson)for(const e of this.dagTaskInstancesJson.task_instances.sort(((e,t)=>e.start_date>t.start_date?1:-1)))T+=`\n                <tr class="table-row">\n                    <td>\n                        <div style="display: flex; align-items: center;">\n                            <div class="state-indicator state-${e.state}" title="${e.state}" ></div>\n                            <span class="task-name">${e.task_id}</span> <span class="try-number">(${e.try_number})</span>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="action-links">\n                            <a href="#" class="link-button" id="task-log-link-${e.task_id}">Logs</a>\n                            <a href="#" class="link-button" id="task-xcom-link-${e.task_id}">XComs</a>\n                        </div>\n                    </td>\n                    <td><span class="duration-badge">${i.getDuration(new Date(e.start_date),new Date(e.end_date))}</span></td>\n                    <td class="operator-type">${e.operator}</td>\n                </tr>\n                `;let D="";this.dagTasksJson&&this.dagTasksJson.tasks&&this.dagTasksJson.tasks.length>0&&(D=this.buildTaskDependencyTree(this.dagTasksJson.tasks));let C="";if(this.dagRunHistoryJson)for(const e of this.dagRunHistoryJson.dag_runs)C+=`\n                <tr class="table-row">\n                    <td>\n                        <div style="display: flex; align-items: center;">\n                            <div class="state-indicator state-${e.state}" title="${e.state}"></div>\n                            <span class="state-text">${e.state}</span>\n                        </div>\n                    </td>\n                    <td><a href="#" class="history-link" id="history-dag-run-id-${e.dag_run_id}">${i.toISODateTimeString(new Date(e.start_date))}</a></td>\n                    <td><span class="duration-badge">${i.getDuration(new Date(e.start_date),new Date(e.end_date))}</span></td>\n                    <td><span class="note-text">${e.note||""}</span></td>\n                </tr>\n                `;let I=`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${o}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n            }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            /* Header Section */\n            .header-container {\n                display: flex;\n                align-items: center;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                padding-bottom: var(--spacing-md);\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            .dag-paused-indicator {\n                width: 12px;\n                height: 12px;\n                border-radius: 50%;\n            }\n            .dag-paused-true { background-color: var(--vscode-disabledForeground); }\n            .dag-paused-false { background-color: var(--vscode-testing-iconPassed); }\n\n            /* Tabs */\n            vscode-tabs {\n                border-radius: var(--border-radius);\n            }\n\n            section {\n                padding: 20px 0;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n            }\n            \n            th.section-header {\n                font-size: 13px;\n                color: var(--vscode-editor-foreground);\n                background-color: transparent;\n                border-bottom: 2px solid var(--vscode-button-background);\n                padding-bottom: 8px;\n                padding-left: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* Detail Layouts */\n            .detail-row td:first-child {\n                width: 120px;\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n            }\n            .detail-row td:nth-child(2) {\n                width: 20px;\n                text-align: center;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            /* States & Badges */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Map existing state classes to colors if possible, or assume external CSS handles it */\n            \n            .task-tag {\n                display: inline-block;\n                padding: 2px 8px;\n                background-color: var(--vscode-badge-background);\n                color: var(--vscode-badge-foreground);\n                border-radius: 12px;\n                font-size: 11px;\n                margin-right: 4px;\n                margin-bottom: 4px;\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 12px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .operator-type {\n                font-style: italic;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            .try-number {\n                font-size: 11px;\n                color: var(--vscode-descriptionForeground);\n                margin-left: 4px;\n            }\n\n            .action-links {\n                display: flex;\n                gap: 12px;\n            }\n\n            .link-button {\n                font-size: 12px;\n            }\n\n            /* Inputs */\n            input[type="date"], vscode-textfield, vscode-textarea {\n                width: 100%;\n                box-sizing: border-box;\n                font-family: inherit;\n            }\n            input[type="date"] {\n                padding: 6px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 2px;\n            }\n\n            vscode-button {\n                margin-right: 8px;\n            }\n            \n            /* Utils */\n            .mt-md { margin-top: var(--spacing-md); }\n            .mb-md { margin-bottom: var(--spacing-md); }\n\n            /* Code block for JSON/Config */\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 8px;\n                border-radius: 4px;\n                white-space: pre-wrap;\n                font-size: 12px;\n                max-height: 200px;\n                overflow-y: auto;\n            }\n\n        </style>\n        <title>DAG</title>\n      </head>\n      <body>  \n\n        <div class="header-container">\n            <div class="dag-paused-indicator dag-paused-${_}"></div>\n            <h2>${this.dagId}</h2>\n            <div style="visibility: ${p?"visible":"hidden"}; display: flex; align-items: center;">\n                <vscode-progress-ring></vscode-progress-ring>\n            </div>\n        </div>\n                    \n        <vscode-tabs id="tab-control" selected-index="${"tab-1"===this.activetabid?0:"tab-2"===this.activetabid?1:"tab-3"===this.activetabid?2:3}">\n            <vscode-tab-header slot="header">RUN</vscode-tab-header>\n            <vscode-tab-header slot="header">TASKS</vscode-tab-header>\n            <vscode-tab-header slot="header">INFO</vscode-tab-header>\n            <vscode-tab-header slot="header">HISTORY</vscode-tab-header>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr>\n                            <th colspan="3" class="section-header">Dag Run Details</th>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>State</td>\n                            <td>:</td>\n                            <td>\n                                <div style="display: flex; align-items: center;">\n                                    <div class="state-indicator state-${l}"></div> <span>${l}</span>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Tasks</td>\n                            <td>:</td>\n                            <td>${v||'<span style="opacity:0.5">None active</span>'}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td>${c}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>StartDate</td>\n                            <td>:</td>\n                            <td>${d}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Duration</td>\n                            <td>:</td>\n                            <td>${f}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Note</td>\n                            <td>:</td>\n                            <td><a href="#" id="run-update-note-link" title="Click to update note">${this.dagRunJson?.note||'<span style="opacity:0.5; font-style:italic;">Add a note...</span>'}</a></td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><div class="code-block">${this.dagRunJson?.conf?JSON.stringify(this.dagRunJson.conf,null,2):"{}"}</div></td>\n                        </tr>\n                    </table>\n                    \n                    <div class="mb-md">\n                        <vscode-button appearance="secondary" id="run-ask-ai" ${h?"":"disabled"}>Ask AI</vscode-button>    \n                        <vscode-button appearance="secondary" id="run-view-log" ${h?"":"disabled"}>Log</vscode-button> \n                        <vscode-button appearance="secondary" id="run-lastrun-check" ${S?"disabled":""}>Refresh</vscode-button>  \n                        <vscode-button appearance="secondary" id="run-more-dagrun-detail" ${h?"":"disabled"}>More</vscode-button>\n                    </div>\n            \n                    <br>\n            \n                    <table>\n                        <tr>\n                            <th colspan="3" class="section-header">Trigger Run</th>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td><vscode-textfield id="run_date" placeholder="YYYY-MM-DD (Optional)" maxlength="10"></vscode-textfield></td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><vscode-textarea id="run_config" rows="3" placeholder='{"key": "value"}'></vscode-textarea></td>\n                        </tr>\n                    </table>\n                    \n                    <div class="mb-md">\n                        <vscode-button appearance="primary" id="run-trigger-dag" ${S?"disabled":""}>Run</vscode-button>\n                        <vscode-button appearance="secondary" id="run-lastrun-cancel" ${S||!p?"disabled":""}>Cancel</vscode-button>  \n                    </div>\n\n                    <br>\n\n                    <table>\n                        <tr>\n                            <th colspan="3" class="section-header">Control</th>\n                        </tr>\n                    </table>\n                    <div class="mb-md">\n                         <vscode-button appearance="secondary" id="run-pause-dag" ${S?"disabled":""}>Pause</vscode-button>\n                         <vscode-button appearance="secondary" id="run-unpause-dag" ${S?"":"disabled"}>Unpause</vscode-button>\n                    </div>\n\n                    <br><br>\n                    \n                    <div style="opacity: 0.7; font-size: 12px; margin-top: 40px; border-top: 1px solid var(--vscode-widget-border); padding-top: 20px;">\n                        <div style="margin-bottom: 8px;"><a href="https://github.com/necatiarslan/airflow-vscode-extension/issues/new">Report Bug / Request Feature</a></div>\n                        <div style="margin-bottom: 8px;"><a href="https://bit.ly/airflow-extension-survey">New Feature Survey</a></div>\n                        <div><a href="https://github.com/sponsors/necatiarslan">Support this extension</a></div>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n\n            <vscode-tab-panel>\n                <section>\n                    ${D?`\n                    <div style="margin-bottom: 20px; border: 1px solid var(--vscode-widget-border); border-radius: 4px; padding: 10px;">\n                        <vscode-tree>\n                        ${D}\n                        </vscode-tree>\n                    </div>\n                    `:""}\n\n                    <table>\n                        <tr>\n                            <th>Task</th>\n                            <th>Actions</th>\n                            <th>Duration</th>            \n                            <th>Operator</th>\n                        </tr>\n                        ${T}\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance="secondary" id="tasks-refresh">Refresh</vscode-button>\n                        <vscode-button appearance="secondary" id="tasks-more-detail" ${this.dagTaskInstancesJson?"":"disabled"}>Raw JSON</vscode-button>\n                    </div>\n\n                </section>\n            </vscode-tab-panel>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr class="detail-row">\n                            <td>Owners</td>\n                            <td>:</td>\n                            <td>${m}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Tags</td>\n                            <td>:</td>\n                            <td>${y}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Schedule</td>\n                            <td>:</td>\n                            <td>${w}</td>\n                        </tr>\n                        <tr class="detail-row">\n                            <td>Next Run</td>\n                            <td>:</td>\n                            <td>${b}</td>\n                        </tr>\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance="secondary" id="info-source-code">Source Code</vscode-button> \n                        <vscode-button appearance="secondary" id="other-dag-detail">Raw JSON</vscode-button>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n            <vscode-tab-panel>\n                <section>                    \n                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; background: var(--vscode-editor-inactiveSelectionBackground); padding: 10px; border-radius: 4px;">\n                        <label for="history_date" style="font-weight: 600;">Filter Date:</label>\n                        <input type="date" id="history_date" value="${this.dagHistorySelectedDate}" style="width: 150px;">\n                        <vscode-button appearance="secondary" id="history-load-runs">Load Runs</vscode-button>\n                    </div>\n\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>State</th>\n                                <th>Start Time</th>            \n                                <th>Duration</th>\n                                <th>Notes</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${C}\n                        </tbody>\n                    </table>   \n                </section>\n            </vscode-tab-panel>\n\n        </vscode-tabs>\n      </body>\n    </html>\n    `;return i.logToOutput("DagView._getWebviewContent Completed"),I}_setWebviewMessageListener(e){i.logToOutput("DagView._setWebviewMessageListener Started"),g.Telemetry.Current.send("dagView.setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{const t=e.command;let n=e.activetabid;switch(["tab-1","tab-2","tab-3","tab-4"].includes(n)&&(this.activetabid=e.activetabid),i.logToOutput("DagView._setWebviewMessageListener Message Received "+e.command),t){case"run-trigger-dag":return void this.triggerDagWConfig(e.config,e.date);case"run-view-log":return void this.showDAGRunLog();case"run-more-dagrun-detail":return void i.showOutputMessage(this.dagRunJson);case"other-dag-detail":return void i.showOutputMessage(this.dagJson);case"tasks-more-detail":return void i.showOutputMessage(this.dagTaskInstancesJson);case"history-load-runs":return void this.getRunHistoryAndRenderHtml(e.date);case"info-source-code":return void this.showSourceCode();case"run-pause-dag":return void this.pauseDAG(!0);case"run-unpause-dag":return void this.pauseDAG(!1);case"run-ask-ai":return void this.askAI();case"run-lastrun-check":return this.getLastRun(),void(this.dagRunJson&&this.startCheckingDagRunStatus());case"run-lastrun-cancel":return void(this.dagRunJson&&this.cancelDagRun());case"run-update-note":return void(this.dagRunJson&&this.updateDagRunNote());case"history-dag-run-id":let t=e.id;return t=t.replace("history-dag-run-id-",""),this.activetabid="tab-1",this.dagRunId=t,void this.getDagRun();case"task-log-link":let n=e.id;return n=n.replace("task-log-link-",""),void this.showTaskInstanceLog(this.dagId,this.dagRunId,n);case"task-xcom-link":let r=e.id;return r=r.replace("task-xcom-link-",""),void this.showTaskXComs(this.dagId,this.dagRunId,r);case"tasks-refresh":return void this.getTasksAndRenderHtml();case"tabControlChanged":return this.activetabid=e.activeid,void i.logToOutput("tab changed to "+e.activeid)}}),void 0,this._disposables)}async getTasksAndRenderHtml(){await this.getDagTasks(),await this.renderHmtl()}async cancelDagRun(){i.logToOutput("DagView.cancelDagRun Started"),g.Telemetry.Current.send("dagView.cancelDagRun.called"),l.Session.Current.Api&&(await l.Session.Current.Api.cancelDagRun(this.dagId,this.dagRunId)).isSuccessful&&(i.logToOutput(`Dag ${this.dagId} Run ${this.dagRunId} cancelled successfully.`),await this.getDagRun(),u.DagRunCancelled(this,this.dagId,this.dagRunId))}async updateDagRunNote(){if(i.logToOutput("DagView.updateDagRunNote Started"),g.Telemetry.Current.send("dagView.updateDagRunNote.called"),!l.Session.Current.Api||!this.dagRunJson)return;const e=await r.window.showInputBox({prompt:"Enter note for this DAG run",value:this.dagRunJson.note||"",placeHolder:"Add a note for this DAG run"});void 0!==e&&(await l.Session.Current.Api.updateDagRunNote(this.dagId,this.dagRunId,e)).isSuccessful&&await this.getDagRun()}async pauseDAG(e){i.logToOutput("DagView.pauseDAG Started"),g.Telemetry.Current.send("dagView.pauseDAG.called"),l.Session.Current.Api&&(e&&this.dagJson.is_paused?i.showWarningMessage(this.dagId+"Dag is already PAUSED"):e||this.dagJson.is_paused?(await l.Session.Current.Api.pauseDag(this.dagId,e)).isSuccessful&&(this.loadDagInfoOnly(),e?u.DagPaused(this,this.dagId):u.DagUnPaused(this,this.dagId)):i.showWarningMessage(this.dagId+"Dag is already ACTIVE"))}async askAI(){if(i.logToOutput("DagView.askAI Started"),g.Telemetry.Current.send("dagView.askAI.called"),!l.Session.Current.Api)return;if(!s.DagTreeView.Current)return void i.showErrorMessage("DagTreeView is not available");if(!this.dagJson)return void i.showErrorMessage("DAG information is not available");const e=await l.Session.Current.Api.getSourceCode(this.dagId,this.dagJson.file_token);if(!e.isSuccessful)return void i.showErrorMessage("Failed to retrieve DAG source code for AI context");const t=await l.Session.Current.Api.getDagRunLogText(this.dagId,this.dagRunId);t.isSuccessful?await c.AIHandler.Current.askAIWithContext({code:e.result,logs:t.result,dag:this.dagJson,dagRun:this.dagRunJson,tasks:this.dagTasksJson,taskInstances:this.dagTaskInstancesJson}):i.showErrorMessage("Failed to retrieve DAG logs for AI context")}async showSourceCode(){if(i.logToOutput("DagView.showSourceCode Started"),g.Telemetry.Current.send("dagView.showSourceCode.called"),!l.Session.Current.Api)return;const e=await l.Session.Current.Api.getSourceCode(this.dagId,this.dagJson.file_token);e.isSuccessful?this.createAndOpenTempFile(e.result,this.dagId,".py"):(i.logToOutput(e.result),i.showErrorMessage(e.result))}async getRunHistoryAndRenderHtml(e){i.logToOutput("DagView.getRunHistoryAndRenderHtml Started"),g.Telemetry.Current.send("dagView.getRunHistoryAndRenderHtml.called"),this.dagHistorySelectedDate=e,await this.getRunHistory(e),await this.renderHmtl()}async showDAGRunLog(){i.logToOutput("DagView.showDAGRunLog Started"),g.Telemetry.Current.send("dagView.showDAGRunLog.called"),l.Session.Current.Api&&d.DagLogView.render(this.dagId,this.dagRunId)}async showTaskInstanceLog(e,t,n){i.logToOutput("DagView.showTaskInstanceLog Started"),g.Telemetry.Current.send("dagView.showTaskInstanceLog.called"),l.Session.Current.Api&&d.DagLogView.render(e,t,n)}async showTaskXComs(e,t,n){if(i.logToOutput("DagView.showTaskXComs Started"),g.Telemetry.Current.send("dagView.showTaskXComs.called"),!l.Session.Current.Api)return;const r=await l.Session.Current.Api.getTaskXComs(e,t,n);r.isSuccessful?this.createAndOpenTempFile(JSON.stringify(r.result,null,2),e+"-"+n+"_xcom",".json"):i.showInfoMessage(`No XCom entries found for task: ${n}`)}async triggerDagWConfig(e="",t=""){if(i.logToOutput("DagView.triggerDagWConfig Started"),g.Telemetry.Current.send("dagView.triggerDagWConfig.called"),l.Session.Current.Api)if(!e||i.isJsonString(e))if(!t||i.isValidDate(t)){if(e||(e="{}"),void 0!==e){const n=await l.Session.Current.Api.triggerDag(this.dagId,e,t);n.isSuccessful&&(this.dagRunId=n.result.dag_run_id,this.startCheckingDagRunStatus(),u.DagTriggered(this,this.dagId,this.dagRunId))}}else i.showWarningMessage("Date is not a valid DATE");else i.showWarningMessage("Config is not a valid JSON")}async startCheckingDagRunStatus(){i.logToOutput("DagView.startCheckingDagRunStatus Started"),g.Telemetry.Current.send("dagView.startCheckingDagRunStatus.called"),await this.refreshRunningDagState(this),this.dagStatusInterval&&clearInterval(this.dagStatusInterval),this.dagStatusInterval=setInterval((()=>{this.refreshRunningDagState(this).catch((e=>i.logToOutput("refreshRunningDagState Error",e)))}),5e3)}async stopCheckingDagRunStatus(){i.logToOutput("DagView.stopCheckingDagRunStatus Started"),g.Telemetry.Current.send("dagView.stopCheckingDagRunStatus.called"),this.dagStatusInterval&&clearInterval(this.dagStatusInterval)}async refreshRunningDagState(e){if(i.logToOutput("DagView.refreshRunningDagState Started"),g.Telemetry.Current.send("dagView.refreshRunningDagState.called"),!l.Session.Current.Api)return;if(!e.dagId||!e.dagRunId)return void e.stopCheckingDagRunStatus();const t=await l.Session.Current.Api.getDagRun(e.dagId,e.dagRunId);if(!t.isSuccessful)return void e.stopCheckingDagRunStatus();{e.dagRunJson=t.result;const n=await l.Session.Current.Api.getTaskInstances(e.dagId,e.dagRunId);n.isSuccessful&&(e.dagTaskInstancesJson=n.result)}let n=e.dagRunJson?e.dagRunJson.state:"";"queued"===n||"running"===n||e.stopCheckingDagRunStatus(),e.renderHmtl()}buildTaskDependencyTree(e){i.logToOutput("DagView.buildTaskDependencyTree Started"),g.Telemetry.Current.send("dagView.buildTaskDependencyTree.called");const t=new Map;e.forEach((e=>{t.set(e.task_id,e)}));const n=e.filter((e=>!e.upstream_task_ids||0===e.upstream_task_ids.length));if(0===n.length)return"No task dependencies found or circular dependencies detected.";const r=new Set;let o="";const a=e=>{if(r.has(e))return"";r.add(e);const n=t.get(e);if(!n)return"";let o="<vscode-tree-item>\n";o+=`${n.task_id}\n`;const i=n.downstream_task_ids||[];return i.length>0&&i.forEach((e=>{o+=a(e)})),o+="</vscode-tree-item>\n",o};return n.forEach((e=>{o+=a(e.task_id)})),o||"No tasks to display."}}t.DagView=f},1652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnpauseDagTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.UnpauseDagTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n}=e.input,o=new r.MarkdownString;return o.isTrusted=!0,o.appendMarkdown("## âš ï¸ Unpause DAG Confirmation\n\n"),o.appendMarkdown("You are about to **UNPAUSE** (activate) the following DAG:\n\n"),o.appendMarkdown(`**DAG ID:** \`${n}\`\n\n`),o.appendMarkdown("**Effect:** New runs will be scheduled for this DAG.\n\n"),o.appendMarkdown("Do you want to proceed?"),{invocationMessage:`Unpausing DAG: ${n}`,confirmationMessages:{title:"Confirm Unpause DAG",message:o}}}async invoke(e,t){const{dagId:n}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("UnpauseDagTool.invoke");try{return await this.client.pauseDag(n,!1),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âœ… Successfully UNPAUSED DAG: **${n}**`)])}catch(e){return a.Telemetry.Current.sendError("UnpauseDagTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to unpause DAG ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},1708:e=>{"use strict";e.exports=require("node:process")},1739:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>l,Sj:()=>o,dg:()=>a,h4:()=>i,mE:()=>r,oI:()=>u,pF:()=>s});var r="initialize",o="indexOf",a="timings",i="pollInternalLogs",s="value",u="length",l="processTelemetryStart"},1841:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToDagViewTool=void 0;const r=n(1398),o=n(2636),a=n(1430),i=n(5617),s=n(6967);t.GoToDagViewTool=class{constructor(){}async prepareInvocation(e,t){const{dagId:n,dagRunId:r}=e.input;let o=`Opening DAG View for: **${n}**`;return r&&(o+=`\nDAG Run ID: **${r}**`),{invocationMessage:o}}async invoke(e,t){const{dagId:n,dagRunId:u}=e.input;i.AIHandler.Current.currentDagId=n,s.Telemetry.Current.send("GoToDagViewTool.invoke");try{if(!o.Session.Current.Api)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")]);a.DagView.render(n,u);let e=`âœ… Opened DAG View for: **${n}**`;return e+=u?`\nðŸ“‹ Showing DAG Run: **${u}**`:"\nðŸ“‹ Showing latest DAG run",new r.LanguageModelToolResult([new r.LanguageModelTextPart(e)])}catch(e){return s.Telemetry.Current.sendError("GoToDagViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open DAG View for ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},1978:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListPausedDagsTool=void 0;const r=n(1398),o=n(6967);t.ListPausedDagsTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){return{invocationMessage:"Listing paused DAGs..."}}async invoke(e,t){o.Telemetry.Current.send("ListPausedDagsTool.invoke");try{const e=await this.client.getDags(!0);if(0===e.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… No paused DAGs found.")]);let t=`## â¸ï¸ Paused DAGs (${e.length})\n\n`;return e.forEach((e=>{t+=`- **${e.dag_id}**`,e.description&&(t+=`: ${e.description}`),t+="\n"})),t+=`\n---\n**Raw Data:**\n\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\``,new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){return o.Telemetry.Current.sendError("ListPausedDagsTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to list paused DAGs: ${e instanceof Error?e.message:String(e)}`)])}}}},2065:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbortError:()=>G,Blob:()=>U.YQ,FetchError:()=>f,File:()=>U.ZH,FormData:()=>d.fS,Headers:()=>k,Request:()=>q,Response:()=>O,blobFrom:()=>U.k4,blobFromSync:()=>U.F8,default:()=>B,fileFrom:()=>U.NX,fileFromSync:()=>U._M,isRedirect:()=>P});const r=require("node:http"),o=require("node:https"),a=require("node:zlib"),i=require("node:stream"),s=require("node:buffer"),u=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const n=e.substring(5,t).split(";");let r="",o=!1;const a=n[0]||"text/plain";let i=a;for(let e=1;e<n.length;e++)"base64"===n[e]?o=!0:(i+=`;${n[e]}`,0===n[e].indexOf("charset=")&&(r=n[e].substring(8)));n[0]||r.length||(i+=";charset=US-ASCII",r="US-ASCII");const s=o?"base64":"ascii",u=unescape(e.substring(t+1)),l=Buffer.from(u,s);return l.type=a,l.typeFull=i,l.charset=r,l},l=require("node:util");var c=n(3720),d=n(8435);class g extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class f extends g{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const p=Symbol.toStringTag,h=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[p],v=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[p]),m=(e,t)=>{const n=new URL(t).hostname,r=new URL(e).hostname;return n===r||n.endsWith(`.${r}`)},y=(e,t)=>new URL(t).protocol===new URL(e).protocol,w=(0,l.promisify)(i.pipeline),b=Symbol("Body internals");class _{constructor(e,{size:t=0}={}){let n=null;null===e?e=null:h(e)?e=s.Buffer.from(e.toString()):v(e)||s.Buffer.isBuffer(e)||(l.types.isAnyArrayBuffer(e)?e=s.Buffer.from(e):ArrayBuffer.isView(e)?e=s.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof i||(e instanceof d.fS?n=(e=(0,d.$n)(e)).type.split("=")[1]:e=s.Buffer.from(String(e))));let r=e;s.Buffer.isBuffer(e)?r=i.Readable.from(e):v(e)&&(r=i.Readable.from(e.stream())),this[b]={body:e,stream:r,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof i&&e.on("error",(e=>{const t=e instanceof g?e:new f(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[b].error=t}))}get body(){return this[b].stream}get bodyUsed(){return this[b].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:n}=await S(this);return e.slice(t,t+n)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new d.fS,t=new URLSearchParams(await this.text());for(const[n,r]of t)e.append(n,r);return e}const{toFormData:t}=await n.e(460).then(n.bind(n,7460));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[b].body&&this[b].body.type||"",t=await this.arrayBuffer();return new c.A([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await S(this);return(new TextDecoder).decode(e)}buffer(){return S(this)}}async function S(e){if(e[b].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[b].disturbed=!0,e[b].error)throw e[b].error;const{body:t}=e;if(null===t)return s.Buffer.alloc(0);if(!(t instanceof i))return s.Buffer.alloc(0);const n=[];let r=0;try{for await(const o of t){if(e.size>0&&r+o.length>e.size){const n=new f(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(n),n}r+=o.length,n.push(o)}}catch(t){throw t instanceof g?t:new f(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new f(`Premature close of server response while trying to fetch ${e.url}`);try{return n.every((e=>"string"==typeof e))?s.Buffer.from(n.join("")):s.Buffer.concat(n,r)}catch(t){throw new f(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}_.prototype.buffer=(0,l.deprecate)(_.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(_.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,l.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const T=(e,t)=>{let n,r,{body:o}=e[b];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof i&&"function"!=typeof o.getBoundary&&(n=new i.PassThrough({highWaterMark:t}),r=new i.PassThrough({highWaterMark:t}),o.pipe(n),o.pipe(r),e[b].stream=n,o=r),o},D=(0,l.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),C=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":h(e)?"application/x-www-form-urlencoded;charset=UTF-8":v(e)?e.type||null:s.Buffer.isBuffer(e)||l.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof d.fS?`multipart/form-data; boundary=${t[b].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${D(e)}`:e instanceof i?null:"text/plain;charset=UTF-8",I=async(e,{body:t})=>{null===t?e.end():await w(t,e)},R="function"==typeof r.validateHeaderName?r.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},A="function"==typeof r.validateHeaderValue?r.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class k extends URLSearchParams{constructor(e){let t=[];if(e instanceof k){const n=e.raw();for(const[e,r]of Object.entries(n))t.push(...r.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const n=e[Symbol.iterator];if(null==n)t.push(...Object.entries(e));else{if("function"!=typeof n)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(R(e),A(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,n){switch(t){case"append":case"set":return(n,r)=>(R(n),A(n,String(r)),URLSearchParams.prototype[t].call(e,String(n).toLowerCase(),String(r)));case"delete":case"has":case"getAll":return n=>(R(n),URLSearchParams.prototype[t].call(e,String(n).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,n)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(const n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const n=this.getAll(t);return e[t]="host"===t?n[0]:n.length>1?n:n[0],e}),{})}}Object.defineProperties(k.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const x=new Set([301,302,303,307,308]),P=e=>x.has(e),E=Symbol("Response internals");class O extends _{constructor(e=null,t={}){super(e,t);const n=null!=t.status?t.status:200,r=new k(t.headers);if(null!==e&&!r.has("Content-Type")){const t=C(e,this);t&&r.append("Content-Type",t)}this[E]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:r,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[E].type}get url(){return this[E].url||""}get status(){return this[E].status}get ok(){return this[E].status>=200&&this[E].status<300}get redirected(){return this[E].counter>0}get statusText(){return this[E].statusText}get headers(){return this[E].headers}get highWaterMark(){return this[E].highWaterMark}clone(){return new O(T(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!P(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new O(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new O(null,{status:0,statusText:""});return e[E].type="error",e}static json(e=void 0,t={}){const n=JSON.stringify(e);if(void 0===n)throw new TypeError("data is not JSON serializable");const r=new k(t&&t.headers);return r.has("content-type")||r.set("content-type","application/json"),new O(n,{...t,headers:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(O.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const L=require("node:url"),V=require("node:net");function $(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const M=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function H(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),n=(0,V.isIP)(t);return!(4!==n||!/^127\./.test(t))||!(6!==n||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const F=Symbol("Request internals"),N=e=>"object"==typeof e&&"object"==typeof e[F],z=(0,l.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class q extends _{constructor(e,t={}){let n;if(N(e)?n=new URL(e.url):(n=new URL(e),e={}),""!==n.username||""!==n.password)throw new TypeError(`${n} is an url with embedded credentials.`);let r=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(r)&&(r=r.toUpperCase()),!N(t)&&"data"in t&&z(),(null!=t.body||N(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");const o=t.body?t.body:N(e)&&null!==e.body?T(e):null;super(o,{size:t.size||e.size||0});const a=new k(t.headers||e.headers||{});if(null!==o&&!a.has("Content-Type")){const e=C(o,this);e&&a.set("Content-Type",e)}let i=N(e)?e.signal:null;if("signal"in t&&(i=t.signal),null!=i&&("object"!=typeof(s=i)||"AbortSignal"!==s[p]&&"EventTarget"!==s[p]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var s;let u=null==t.referrer?e.referrer:t.referrer;if(""===u)u="no-referrer";else if(u){const e=new URL(u);u=/^about:(\/\/)?client$/.test(e)?"client":e}else u=void 0;this[F]={method:r,redirect:t.redirect||e.redirect||"follow",headers:a,parsedURL:n,signal:i,referrer:u},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[F].method}get url(){return(0,L.format)(this[F].parsedURL)}get headers(){return this[F].headers}get redirect(){return this[F].redirect}get signal(){return this[F].signal}get referrer(){return"no-referrer"===this[F].referrer?"":"client"===this[F].referrer?"about:client":this[F].referrer?this[F].referrer.toString():void 0}get referrerPolicy(){return this[F].referrerPolicy}set referrerPolicy(e){this[F].referrerPolicy=function(e){if(!M.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new q(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const j=e=>{const{parsedURL:t}=e[F],n=new k(e[F].headers);n.has("Accept")||n.set("Accept","*/*");let r=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(r="0"),null!==e.body){const t=(e=>{const{body:t}=e[b];return null===t?0:v(t)?t.size:s.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(r=String(t))}r&&n.set("Content-Length",r),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[F].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:n}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const r=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const o=e.referrer;let a=$(o),i=$(o,!0);a.toString().length>4096&&(a=i),t&&(a=t(a)),n&&(i=n(i));const s=new URL(e.url);switch(r){case"no-referrer":return"no-referrer";case"origin":return i;case"unsafe-url":return a;case"strict-origin":return H(a)&&!H(s)?"no-referrer":i.toString();case"strict-origin-when-cross-origin":return a.origin===s.origin?a:H(a)&&!H(s)?"no-referrer":i;case"same-origin":return a.origin===s.origin?a:"no-referrer";case"origin-when-cross-origin":return a.origin===s.origin?a:i;case"no-referrer-when-downgrade":return H(a)&&!H(s)?"no-referrer":a;default:throw new TypeError(`Invalid referrerPolicy: ${r}`)}}(e):e[F].referrer="no-referrer",e[F].referrer instanceof URL&&n.set("Referer",e.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=e;"function"==typeof o&&(o=o(t));const a=(e=>{if(e.search)return e.search;const t=e.href.length-1,n=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-n.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+a,method:e.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o}}};class G extends g{constructor(e,t="aborted"){super(e,t)}}var U=n(9730);const W=new Set(["data:","http:","https:"]);async function B(e,t){return new Promise(((n,l)=>{const c=new q(e,t),{parsedURL:d,options:g}=j(c);if(!W.has(d.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${d.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===d.protocol){const e=u(c.url),t=new O(e,{headers:{"Content-Type":e.typeFull}});return void n(t)}const p=("https:"===d.protocol?o:r).request,{signal:h}=c;let v=null;const w=()=>{const e=new G("The operation was aborted.");l(e),c.body&&c.body instanceof i.Readable&&c.body.destroy(e),v&&v.body&&v.body.emit("error",e)};if(h&&h.aborted)return void w();const b=()=>{w(),S()},_=p(d.toString(),g);h&&h.addEventListener("abort",b);const S=()=>{_.abort(),h&&h.removeEventListener("abort",b)};_.on("error",(e=>{l(new f(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),S()})),function(e){const t=s.Buffer.from("0\r\n\r\n");let n,r=!1,o=!1;e.on("response",(e=>{const{headers:t}=e;r="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(a=>{const i=()=>{if(r&&!o){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{v&&v.body&&v.body.destroy(e)})(e)}},u=e=>{o=0===s.Buffer.compare(e.slice(-5),t),!o&&n&&(o=0===s.Buffer.compare(n.slice(-3),t.slice(0,3))&&0===s.Buffer.compare(e.slice(-2),t.slice(3))),n=e};a.prependListener("close",i),a.on("data",u),e.on("close",(()=>{a.removeListener("close",i),a.removeListener("data",u)}))}))}(_),process.version<"v14"&&_.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(n=>{if(v&&t<e._eventsCount&&!n){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",v.body.emit("error",e)}}))})),_.on("response",(e=>{_.setTimeout(0);const r=function(e=[]){return new k(e.reduce(((e,t,n,r)=>(n%2==0&&e.push(r.slice(n,n+2)),e)),[]).filter((([e,t])=>{try{return R(e),A(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(P(e.statusCode)){const o=r.get("Location");let a=null;try{a=null===o?null:new URL(o,c.url)}catch{if("manual"!==c.redirect)return l(new f(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect")),void S()}switch(c.redirect){case"error":return l(new f(`uri requested responds with a redirect, redirect mode is set to error: ${c.url}`,"no-redirect")),void S();case"manual":break;case"follow":{if(null===a)break;if(c.counter>=c.follow)return l(new f(`maximum redirect reached at: ${c.url}`,"max-redirect")),void S();const o={headers:new k(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:T(c),signal:c.signal,size:c.size,referrer:c.referrer,referrerPolicy:c.referrerPolicy};if(!m(c.url,a)||!y(c.url,a))for(const e of["authorization","www-authenticate","cookie","cookie2"])o.headers.delete(e);if(303!==e.statusCode&&c.body&&t.body instanceof i.Readable)return l(new f("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void S();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length"));const s=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let n="";for(const e of t)e&&M.has(e)&&(n=e);return n}(r);return s&&(o.referrerPolicy=s),n(B(new q(a,o))),void S()}default:return l(new TypeError(`Redirect option '${c.redirect}' is not a valid value of RequestRedirect`))}}h&&e.once("end",(()=>{h.removeEventListener("abort",b)}));let o=(0,i.pipeline)(e,new i.PassThrough,(e=>{e&&l(e)}));process.version<"v12.10"&&e.on("aborted",b);const s={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:r,size:c.size,counter:c.counter,highWaterMark:c.highWaterMark},u=r.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===u||204===e.statusCode||304===e.statusCode)return v=new O(o,s),void n(v);const d={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"===u||"x-gzip"===u)return o=(0,i.pipeline)(o,a.createGunzip(d),(e=>{e&&l(e)})),v=new O(o,s),void n(v);if("deflate"===u||"x-deflate"===u){const t=(0,i.pipeline)(e,new i.PassThrough,(e=>{e&&l(e)}));return t.once("data",(e=>{o=8==(15&e[0])?(0,i.pipeline)(o,a.createInflate(),(e=>{e&&l(e)})):(0,i.pipeline)(o,a.createInflateRaw(),(e=>{e&&l(e)})),v=new O(o,s),n(v)})),void t.once("end",(()=>{v||(v=new O(o,s),n(v))}))}if("br"===u)return o=(0,i.pipeline)(o,a.createBrotliDecompress(),(e=>{e&&l(e)})),v=new O(o,s),void n(v);v=new O(o,s),n(v)})),I(_,c).catch(l)}))}},2110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportTreeItem=void 0;const r=n(1398);class o extends r.TreeItem{constructor(e,t,n,r){super(e,t),this.label=e,this.collapsibleState=t,this.command=n,this.iconPath=r,this.command=n,this.iconPath=r}}t.ReportTreeItem=o},2317:(e,t,n)=>{"use strict";n.d(t,{PV:()=>w,i8:()=>v,nU:()=>y,tS:()=>m});var r=n(269),o=n(991),a=n(6987),i=n(6182),s=n(3775),u=(n(3673),n(6492)),l=n(8156),c=n(2991),d="TelemetryPluginChain",g="_hasRun",f="_getTelCtx",p=0;function h(e,t,n,l){var c=null,d=[];t||(t=(0,a.e)({},null,n[i.Uw])),null!==l&&(c=l?function(e,t,n){for(;e;){if(e[i.AP]()===n)return e;e=e[i.uR]()}return w([n],t.config||{},t)}(e,n,l):e);var g={_next:function(){var e=c;if(c=e?e[i.uR]():null,!e){var t=d;t&&t[i.oI]>0&&((0,r.Iuo)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,s.ZP)(n[i.Uw],2,73,"Unexpected Exception during onComplete - "+(0,r.mmD)(e))}})),d=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,s.y0)(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,n){var a=f(e,!0);return n&&(0,r.zav)(n,(function(e,n){if((0,r.hXl)(a[e])){var i=t.cfg[e];!i&&(0,r.hXl)(i)||(a[e]=i)}(0,o.q)(t,a,e,n)})),t.setDf(a,n)},getConfig:function(e,n,o){void 0===o&&(o=!1);var a,i=f(e,!1),s=t.cfg;return!i||!i[n]&&(0,r.hXl)(i[n])?!s[n]&&(0,r.hXl)(s[n])||(a=s[n]):a=i[n],a||!(0,r.hXl)(a)?a:o},hasNext:function(){return!!c},getNext:function(){return c},setNext:function(e){c=e},iterate:function(e){for(var t;t=g._next();){var n=t[i.AP]();n&&e(n)}},onComplete:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];e&&d[i.y5]({func:e,self:(0,r.b07)(t)?g.ctx:t,args:n})}}};function f(e,n){var r=null,o=t.cfg;if(o&&e){var a=o[u.Bw];!a&&n&&(a={}),o[u.Bw]=a,(a=t.ref(o,u.Bw))&&(!(r=a[e])&&n&&(r={}),a[e]=r,r=t.ref(a,e))}return r}return g}function v(e,t,n,o){var s=(0,a.e)(t),l=h(e,s,n,o),c=l.ctx;return c[i.$5]=function(e){var t=l._next();return t&&t[u.qT](e,c),!t},c[i.$o]=function(e,t){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,s.cfg,n,t)),v(e||c[i.uR](),s.cfg,n,t)},c}function m(e,t,n){var o=(0,a.e)(t.config),s=h(e,o,t,n),u=s.ctx;return u[i.$5]=function(e){var t=s._next();return t&&t[i.tI](u,e),!t},u[i.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,o.cfg,t,n)),m(e||u[i.uR](),t,n)},u}function y(e,t,n){var o=(0,a.e)(t.config),s=h(e,o,t,n).ctx;return s[i.$5]=function(e){return s.iterate((function(t){(0,r.Tnt)(t[i.HC])&&t[i.HC](s,e)}))},s[i.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cyL)(e)&&(e=w(e,o.cfg,t,n)),y(e||s[i.uR](),t,n)},s}function w(e,t,n,o){var a=null,h=!o;if((0,r.cyL)(e)&&e[i.oI]>0){var m=null;(0,r.Iuo)(e,(function(e){if(h||o!==e||(h=!0),h&&e&&(0,r.Tnt)(e[u.qT])){var y=function(e,t,n){var o,a=null,h=(0,r.Tnt)(e[u.qT]),m=(0,r.Tnt)(e[i.YH]),y={getPlugin:function(){return e},getNext:function(){return a},processTelemetry:function(o,s){w(s=s||function(){var o;return e&&(0,r.Tnt)(e[f])&&(o=e[f]()),o||(o=v(y,t,n)),o}(),(function(t){if(!e||!h)return!1;var n=(0,c.Cr)(e);return!n[i.Ik]&&!n[u.Hr]&&(m&&e[i.YH](a),e[u.qT](o,t),!0)}),"processTelemetry",(function(){return{item:o}}),!o.sync)||s[i.$5](o)},unload:function(t,n){w(t,(function(){var r=!1;if(e){var o=(0,c.Cr)(e),a=e[u.eT]||o[u.eT];!e||a&&a!==t.core()||o[i.Ik]||(o[u.eT]=null,o[i.Ik]=!0,o[i.tZ]=!1,e[i.Ik]&&!0===e[i.Ik](t,n)&&(r=!0))}return r}),"unload",(function(){}),n.isAsync)||t[i.$5](n)},update:function(t,n){w(t,(function(){var r=!1;if(e){var o=(0,c.Cr)(e),a=e[u.eT]||o[u.eT];!e||a&&a!==t.core()||o[i.Ik]||e[i.HC]&&!0===e[i.HC](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[i.$5](n)},_id:o=e?e[i.Ju]+"-"+e[u.Vo]+"-"+p++:"Unknown-0-"+p++,_setNext:function(e){a=e}};function w(t,n,c,f,p){var h=!1,v=e?e[i.Ju]:d,m=t[g];return m||(m=t[g]={}),t.setNext(a),e&&(0,l.r2)(t[u.eT](),(function(){return v+":"+c}),(function(){m[o]=!0;try{var e=a?a._id:u.m5;e&&(m[e]=!1),h=n(t)}catch(e){var l=!a||m[a._id];l&&(h=!0),a&&l||(0,s.ZP)(t[i.e4](),1,73,"Plugin ["+v+"] failed during "+c+" - "+(0,r.mmD)(e)+", run flags: "+(0,r.mmD)(m))}}),f,p),h}return(0,r.N6t)(y)}(e,t,n);a||(a=y),m&&m._setNext(y),m=y}}))}return o&&!a?w([o],t,n):a}},2432:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToConnectionsViewTool=void 0;const r=n(1398),o=n(2636),a=n(9880),i=n(6967);t.GoToConnectionsViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Connections View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToConnectionsViewTool.invoke");try{return o.Session.Current.Api?(a.ConnectionsView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Connections View - showing Airflow connections (databases, APIs, cloud services, etc.)")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToConnectionsViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Connections View: ${e instanceof Error?e.message:String(e)}`)])}}}},2475:(e,t,n)=>{"use strict";n.d(t,{DD:()=>u,Lx:()=>s,NU:()=>i});var r=n(269),o=n(6182);function a(e,t,n){return!e&&(0,r.hXl)(e)?t:(0,r.Lmq)(e)?e:"true"===(0,r.oJg)(e)[o.OL]()}function i(e){return{mrg:!0,v:e}}function s(e,t,n){return{fb:n,isVal:e,v:t}}function u(e,t){return{fb:t,set:a,v:!!e}}},2614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeDataProvider=void 0;const r=n(1398),o=n(8576),a=n(2);t.DagTreeDataProvider=class{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.dagTreeItemList=[],this.visibleDagList=[]}refresh(){this._onDidChangeTreeData.fire()}loadDagTreeItemsFromApiResponse(){if(this.dagTreeItemList=[],this.dagList)for(var e of this.dagList)if(e){let t=new o.DagTreeItem(e);this.dagTreeItemList.push(t)}}getChildren(e){return e?Promise.resolve([]):(this.visibleDagList=this.getVisibleDagList(),Promise.resolve(this.visibleDagList))}getVisibleDagList(){var e=[];for(var t of this.dagTreeItemList)a.DagTreeView.Current.FilterString&&!t.doesFilterMatch(a.DagTreeView.Current.FilterString)||a.DagTreeView.Current.ShowOnlyActive&&t.IsPaused||a.DagTreeView.Current.ShowOnlyFavorite&&!t.IsFav||e.push(t);return e}getTreeItem(e){return e}}},2636:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;const r=n(768),o=n(6304);class a{constructor(e){this.ServerList=[],a.Current=this,this.Context=e,this.ExtensionUri=e.extensionUri,this.LoadState()}SaveState(){o.logToOutput("Saving state..."),this.Context.globalState.update("apiUrl",this.Server?.apiUrl),this.Context.globalState.update("apiUserName",this.Server?.apiUserName),this.Context.globalState.update("apiPassword",this.Server?.apiPassword),this.Context.globalState.update("serverList",this.ServerList)}LoadState(){o.logToOutput("Loading state...");const e=this.Context.globalState.get("apiUrl")||"",t=this.Context.globalState.get("apiUserName")||"",n=this.Context.globalState.get("apiPassword")||"";e&&t&&(this.Server={apiUrl:e,apiUserName:t,apiPassword:n},this.Api=new r.AirflowApi(this.Server)),this.ServerList=this.Context.globalState.get("serverList")||[]}SetServer(e){this.Server=e,this.Api=new r.AirflowApi(this.Server),this.SaveState()}ChangeServer(e,t){this.Server=this.ServerList.find((n=>n.apiUrl===e&&n.apiUserName===t)),this.Server&&(this.Api=new r.AirflowApi(this.Server),this.SaveState())}RemoveServer(e,t){this.ServerList=this.ServerList.filter((n=>!(n.apiUrl===e&&n.apiUserName===t))),this.SaveState()}AddServer(e){this.ServerList.some((t=>t.apiUrl===e.apiUrl&&t.apiUserName===e.apiUserName))||(this.ServerList.push(e),this.SaveState())}TestServer(e){return new r.AirflowApi(e).checkConnection()}ClearServers(){this.ServerList=[],this.Server=void 0,this.Api=void 0,this.SaveState()}GetServer(e,t){return this.ServerList.find((n=>n.apiUrl===e&&n.apiUserName===t))}dispose(){a.Current=void 0}}t.Session=a},2838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdminTreeView=void 0;const r=n(1398),o=n(7364),a=n(6967);t.AdminTreeView=class{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,a.Telemetry.Current.send("AdminTreeViewInitialized")}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(e){return e}getChildren(e){return e?Promise.resolve([]):Promise.resolve([new o.AdminTreeItem("Variables",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewVariables",title:"View Variables",arguments:[]},new r.ThemeIcon("symbol-variable")),new o.AdminTreeItem("Connections",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewConnections",title:"View Connections",arguments:[]},new r.ThemeIcon("link")),new o.AdminTreeItem("Providers",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewProviders",title:"View Providers",arguments:[]},new r.ThemeIcon("package")),new o.AdminTreeItem("Configs",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewConfigs",title:"View Configs",arguments:[]},new r.ThemeIcon("settings-gear")),new o.AdminTreeItem("Plugins",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewPlugins",title:"View Plugins",arguments:[]},new r.ThemeIcon("extensions")),new o.AdminTreeItem("Server Health",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewServerHealth",title:"View Server Health",arguments:[]},new r.ThemeIcon("pulse"))])}}},2845:(e,t,n)=>{"use strict";n.d(t,{Uu:()=>r});var r="AppInsightsChannelPlugin"},2991:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>d,u7:()=>p,pI:()=>g,Xc:()=>f});var r=n(269),o=n(6182),a=n(737),i=n(6492),s="00000000000000000000000000000000",u="0000000000000000";function l(e,t,n){return!(!e||e[o.oI]!==t||e===n||!e.match(/^[\da-f]*$/i))}var c=(0,a.T)("plugin");function d(e){return c.get(e,"state",{},!0)}function g(e,t){for(var n,a=[],s=null,u=e[o.uR]();u;){var l=u[o.AP]();if(l){s&&s[o.YH]&&l[i.qT]&&s[o.YH](l);var c=!!(n=d(l))[o.tZ];l[o.tZ]&&(c=l[o.tZ]()),c||a[o.y5](l),s=l,u=u[o.uR]()}}(0,r.Iuo)(a,(function(r){var a=e[i.eT]();r[o.mE](e.getCfg(),a,t,e[o.uR]()),n=d(r),r[i.eT]||n[i.eT]||(n[i.eT]=a),n[o.tZ]=!0,delete n[o.Ik]}))}function f(e){return e.sort((function(e,t){var n=0;if(t){var r=t[i.qT];e[i.qT]?n=r?e[i.Vo]-t[i.Vo]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function p(e){var t={};return{getName:function(){return t[o.RS]},setName:function(n){e&&e.setName(n),t[o.RS]=n},getTraceId:function(){return t.traceId},setTraceId:function(n){e&&e.setTraceId(n),l(n,32,s)&&(t.traceId=n)},getSpanId:function(){return t.spanId},setSpanId:function(n){e&&e.setSpanId(n),l(n,16,u)&&(t.spanId=n)},getTraceFlags:function(){return t[o.Rr]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[o.Rr]=n}}}},3144:(e,t,n)=>{"use strict";n.d(t,{PostChannel:()=>ct});var r=n(659),o=n(8279),a=n(4822),i=n(269),s=n(8156),u=n(6149),l=n(737),c=n(6987),d=n(2317),g=n(3673),f=(0,n(4282).H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5,BeaconSendFailure:6}),p=n(3775),h=n(8257),v=n(8205),m="REAL_TIME",y="",w="drop",b="requeue",_="no-cache, no-store",S="application/x-json-stream",T="cache-control",D="content-type",C="client-version",I="client-id",R="time-delta-to-apply-millis",A="upload-time",k="apikey",x="AuthMsaDeviceTicket",P="WebAuthToken",E="AuthXToken",O="msfpc",L="trace",V="user",$="allowRequestSending",M="shouldAddClockSkewHeaders",H="getClockSkewHeaderValue",F="setClockSkew",N="length",z="concat",q="iKey",j="count",G="events",U="push",W="split",B="toLowerCase",J="hdrs",X="useHdrs",Z="initialize",K="setTimeoutOverride",Y="clearTimeoutOverride",Q="overrideEndpointUrl",ee="avoidOptions",te="enableCompoundKey",ne="disableXhrSync",re="disableFetchKeepAlive",oe="useSendBeacon",ae="fetchCredentials",ie="alwaysUseXhrOverride",se="serializeOfflineEvt",ue="getOfflineRequestDetails",le="createPayload",ce="createOneDSPayload",de="payloadBlob",ge="headers",fe="_thePayload",pe="batches",he="sendType",ve="canSendRequest",me="sendQueuedRequests",ye="setUnloading",we="sendSynchronousBatch",be="_transport",_e="getWParam",Se="isBeacon",Te="timings",De="isTeardown",Ce="_sendReason",Ie="setKillSwitchTenants",Re="_backOffTransmission",Ae="identifier",ke="autoFlushEventsLimit",xe="sendAttempt",Pe="latency",Ee="sync";function Oe(e){var t=(e.ext||{}).intweb;return t&&(0,a.yD)(t[O])?t[O]:null}function Le(e){for(var t=null,n=0;null===t&&n<e[N];n++)t=Oe(e[n]);return t}var Ve=function(){function e(t,n){var r=n?[][z](n):[],o=this,a=Le(r);o[q]=function(){return t},o.Msfpc=function(){return a||y},o[j]=function(){return r[N]},o[G]=function(){return r},o.addEvent=function(e){return!!e&&(r[U](e),a||(a=Oe(e)),!0)},o[W]=function(n,o){var s;if(n<r[N]){var u=r[N]-n;(0,i.hXl)(o)||(u=o<u?o:u),s=r.splice(n,u),a=Le(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}(),$e=n(7292),Me=n(856),He=n(5664),Fe=function(){function e(){var t=!0,n=!0,r=!0,a="use-collector-delta",i=!1;(0,o.A)(e,this,(function(e){e[$]=function(){return t},e.firstRequestSent=function(){r&&(r=!1,i||(t=!1))},e[M]=function(){return n},e[H]=function(){return a},e[F]=function(e){i||(e?(a=e,n=!0,i=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),Ne=function(){function e(){var t={};(0,o.A)(e,this,(function(e){e[Ie]=function(e,n){if(e&&n)try{var r=(s=e[W](","),u=[],s&&(0,i.Iuo)(s,(function(e){u[U]((0,i.EHq)(e))})),u);if("this-request-only"===n)return r;for(var o=1e3*parseInt(n,10),a=0;a<r[N];++a)t[r[a]]=(0,i.f0d)()+o}catch(e){return[]}var s,u;return[]},e.isTenantKilled=function(e){var n=t,r=(0,i.EHq)(e);return void 0!==n[r]&&n[r]>(0,i.f0d)()||(delete n[r],!1)}}))}return e.__ieDyn=1,e}();function ze(e){var t,n=(0,i.ZrT)(1200*Math.random())+2400;return t=Math.pow(2,e)*n,(0,i.rpU)(t,6e5)}var qe,je=2e6,Ge=(0,i.rpU)(je,65e3),Ue="metadata",We="f",Be=/\./,Je=function(){function e(t,n,r,u,l,c,d){var g="data",f="baseData",p=!!u,h=!0,v=n,m={},w=!!c,b=l||a.Go,_=function(e){return e&&e.requestLimit?e.requestLimit:{}}(d),S=Xe(_.requestLimit,3145728,0),T=Xe(_.requestLimit,65e3,1),D=Xe(_.recordLimit,je,0),C=Math.min(Xe(_.recordLimit,Ge,1),T);(0,o.A)(e,this,(function(e){function n(e,t,o,s,u,l,c){(0,i.zav)(e,(function(e,d){var g=null;if(d||(0,a.yD)(d)){var f=o,h=e,y=u,w=t;if(p&&!s&&Be.test(e)){var b=e.split("."),_=b.length;if(_>1){y&&(y=y.slice());for(var S=0;S<_-1;S++){var T=b[S];w=w[T]=w[T]||{},f+="."+T,y&&y.push(T)}h=b[_-1]}}var D=s&&function(e){var t=m[e];return void 0===t&&(e.length>=7&&(t=(0,i.tGl)(e,"ext.metadata")||(0,i.tGl)(e,"ext.web")),m[e]=t),t}(f);if(g=!D&&v&&v.handleField(f,h)?v.value(f,h,d,r):(0,a.TC)(h,d,r)){var C=g.value;if(w[h]=C,l&&l(y,h,g),c&&"object"==typeof C&&!(0,i.cyL)(C)){var I=y;I&&(I=I.slice()).push(h),n(d,C,f+"."+h,s,I,l,c)}}}}))}e.createPayload=function(e,t,n,r,o,a){return{apiKeys:[],payloadBlob:y,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:a,sendReason:o}},e.appendPayload=function(n,r,o){var a=n&&r&&!n.overflow;return a&&(0,s.r2)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),a=n.payloadBlob,s=n.numEvents,u=!1,l=[],c=[],d=n.isBeacon,g=d?T:S,f=d?C:D,p=0,h=0;p<t.length;){var v=t[p];if(v){if(s>=o){n.overflow=r.split(p);break}var m=e.getEventBlob(v);if(m&&m.length<=f){var y=m.length;if(a.length+y>g){n.overflow=r.split(p);break}a&&(a+="\n"),a+=m,++h>20&&((0,i.hKY)(a,0,1),h=0),u=!0,s++}else m?l.push(v):c.push(v),t.splice(p,1),p--}p++}if(l.length>0&&n.sizeExceed.push(Ve.create(r.iKey(),l)),c.length>0&&n.failedEvts.push(Ve.create(r.iKey(),c)),u){n.batches.push(r),n.payloadBlob=a,n.numEvents=s;var w=r.iKey();-1===(0,i.rDm)(n.apiKeys,w)&&n.apiKeys.push(w)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:o}})),a},e.getEventBlob=function(e){try{return(0,s.r2)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,a.EO)(e.iKey);var r,o={};w||(r=function(e,t,n){!function(e,t,n,r,o){if(o&&t){var a=e(o.value,o.kind,o.propertyType);if(a>-1){var s=t[Ue];s||(s=t[Ue]={f:{}});var u=s[We];if(u||(u=s[We]={}),n)for(var l=0;l<n.length;l++){var c=n[l];u[c]||(u[c]={f:{}});var d=u[c][We];d||(d=u[c][We]={}),u=d}u=u[r]={},(0,i.cyL)(o.value)?u.a={t:a}:u.t=a}}}(b,o,e,t,n)});var s=e.ext;s&&(t.ext=o,(0,i.zav)(s,(function(e,t){n(t,o[e]={},"ext."+e,!0,null,null,!0)})));var u=t[g]={};u.baseType=e.baseType;var l=u[f]={};return n(e.baseData,l,f,!1,[f],r,h),n(e.data,u,g,!1,[],r,h),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function Xe(e,t,n){if((0,i.cyL)(e)){var r=e[n];if(r>0&&r<=t)return r}return t}function Ze(e,t){return{set:function(n,r){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return(0,i.vKV)([e,t],n,r,o)}}}var Ke="sendAttempt",Ye="?cors=true&"+D[B]()+"="+S,Qe=((qe={})[1]=b,qe[100]=b,qe[200]="sent",qe[8004]=w,qe[8003]=w,qe[8006]=w,qe),et={},tt={};function nt(e,t,n){et[e]=t,!1!==n&&(tt[t]=e)}function rt(e,t){var n=!1;if(e&&t){var r=(0,i.cGk)(e);if(r&&r[N]>0)for(var o=t[B](),a=0;a<r[N];a++){var s=r[a];if(s&&(0,i.v0u)(t,s)&&s[B]()===o){n=!0;break}}}return n}function ot(e,t,n,r){t&&n&&n[N]>0&&(r&&et[t]?(e[J][et[t]]=n,e[X]=!0):e.url+="&"+t+"="+n)}nt(x,x,!1),nt(C,C),nt(I,"Client-Id"),nt(k,k),nt(R,R),nt(A,A),nt(E,E);var at=function(){function e(t,n,r,u){var l,d,f,h,v,m,b,x,P,E,L,V,B,Ae,ke,xe,Pe,Ee,Oe,Le,qe,je,Ge,Ue,We,Be,Xe,et,nt,at,it,st,ut,lt=!1,ct=t;(0,o.A)(e,this,(function(e){function o(e,t){try{return st&&st.getSenderInst(e,t)}catch(e){}return null}function dt(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,fetchCredentials:ut,disableXhr:!1,disableBeacon:!lt,disableBeaconSync:!lt,disableFetchKeepAlive:je,timeWrapper:at,addNoResponse:Ue,senderOnCompleteCallBack:{xdrOnComplete:gt,fetchOnComplete:ft,xhrOnComplete:pt,beaconOnRetry:vt}}}catch(e){}return null}function gt(e,t,n){var r=(0,g.Lo)(e);ht(t,200,{},r),At(r)}function ft(e,t,n,r){var o={},a=e[ge];a&&a.forEach((function(e,t){o[t]=e})),function(e,n,r){ht(t,e,n,r),At(r)}(e.status,o,n||y)}function pt(e,t,n){var r=(0,g.Lo)(e);ht(t,e.status,(0,g.w3)(e,!0),r),At(r)}function ht(e,t,n,r){try{e(t,n,r)}catch(e){(0,p.ZP)(b,2,518,(0,i.mmD)(e))}}function vt(e,t,n){var r=200,o=e[fe],a=e.urlString+(Ue?"&NoResponseBody=true":y);try{var s=(0,i.w3n)();if(o){var u=!!P.getPlugin("LocalStorage"),l=[],c=[];(0,i.Iuo)(o[pe],(function(e){if(l&&e&&e[j]()>0)for(var t=e[G](),n=0;n<t[N];n++){if(!s.sendBeacon(a,Ae.getEventBlob(t[n]))){l[U](e[W](n));break}c[U](e[n])}else l[U](e[W](0))})),c[N]>0&&(o.sentEvts=c),u||kt(l,8006,o[he],!0)}else r=0}catch(e){(0,p.OG)(b,"Failed to send telemetry using sendBeacon API. Ex:"+(0,i.mmD)(e)),r=0}finally{ht(t,r,{},y)}}function mt(e){return 2===e||3===e}function yt(e){return Pe&&mt(e)&&(e=2),e}function wt(){return!f&&v<n}function bt(){var e=B;return B=[],e}function _t(e,t,n){var r=!1;return e&&e[N]>0&&!f&&x[t]&&Ae&&(r=0!==t||wt()&&(n>0||h[$]())),r}function St(e){var t={};return e&&(0,i.Iuo)(e,(function(e,n){t[n]={iKey:e[q](),evts:e[G]()}})),t}function Tt(e,t,n,r,o){if(e&&0!==e[N])if(f)kt(e,1,r);else{r=yt(r);try{var u=e,l=0!==r;(0,s.r2)(P,(function(){return"HttpManager:_sendBatches"}),(function(i){i&&(e=e.slice(0));for(var s=[],u=null,c=(0,a.WB)(),g=x[r]||(l?x[1]:x[0]),f=g&&g[be],p=Ge&&(Pe||mt(r)||3===f||g._isSync&&2===f);_t(e,r,t);){var h=e.shift();h&&h[j]()>0&&(d.isTenantKilled(h[q]())?s[U](h):(u=u||Ae[le](t,n,l,p,o,r),Ae.appendPayload(u,h,ct)?null!==u.overflow&&(e=[u.overflow][z](e),u.overflow=null,It(u,c,(0,a.WB)(),o),c=(0,a.WB)(),u=null):(It(u,c,(0,a.WB)(),o),c=(0,a.WB)(),e=[h][z](e),u=null)))}u&&It(u,c,(0,a.WB)(),o),e[N]>0&&(B=e[z](B)),kt(s,8004,r)}),(function(){return{batches:St(u),retryCount:t,isTeardown:n,isSynchronous:l,sendReason:o,useSendBeacon:mt(r),sendType:r}}),!l)}catch(e){(0,p.ZP)(b,2,48,"Unexpected Exception sending batch: "+(0,i.mmD)(e))}}}function Dt(e,t){var n={url:l,hdrs:{},useHdrs:!1};t?(n[J]=(0,a.X$)(n[J],V),n.useHdrs=(0,i.cGk)(n.hdrs)[N]>0):(0,i.zav)(V,(function(e,t){tt[e]?ot(n,tt[e],t,!1):(n[J][e]=t,n[X]=!0)})),ot(n,I,"NO_AUTH",t),ot(n,C,a.xE,t);var r=y;(0,i.Iuo)(e.apiKeys,(function(e){r[N]>0&&(r+=","),r+=e})),ot(n,k,r,t),ot(n,A,(0,i.f0d)().toString(),t);var o=function(e){for(var t=0;t<e.batches[N];t++){var n=e[pe][t].Msfpc();if(n)return encodeURIComponent(n)}return y}(e);if((0,a.yD)(o)&&(n.url+="&ext.intweb.msfpc="+o),h[M]()&&ot(n,R,h[H](),t),P[_e]){var s=P[_e]();s>=0&&(n.url+="&w="+s)}for(var u=0;u<L[N];u++)n.url+="&"+L[u].name+"="+L[u].value;return n}function Ct(e,t,n){e[t]=e[t]||{},e[t][m.identifier]=n}function It(t,n,o,u){if(t&&t.payloadBlob&&t.payloadBlob[N]>0){var l=!!Be,c=x[t.sendType];!mt(t[he])&&t[Se]&&2===t.sendReason&&(c=x[2]||x[3]||c);var g=Ee;(t.isBeacon||3===c[be])&&(g=!1);var f=Dt(t,g);g=g||f[X];var y=(0,a.WB)();(0,s.r2)(P,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var w=0;w<t.batches[N];w++)for(var C=t[pe][w][G](),I=0;I<C[N];I++){var R=C[I];if(ke){var A=R[Te]=R[Te]||{};Ct(A,"sendEventStart",y),Ct(A,"serializationStart",n),Ct(A,"serializationCompleted",o)}R[Ke]>0?R[Ke]++:R[Ke]=1}kt(t[pe],1e3+(u||0),t[he],!0);var k={data:t[de],urlString:f.url,headers:f[J],_thePayload:t,_sendReason:u,timeout:Oe,disableXhrSync:qe,disableFetchKeepAlive:je};g&&(rt(k[ge],T)||(k[ge][T]=_),rt(k[ge],D)||(k[ge][D]=S));var x=null;c&&(x=function(n){h.firstRequestSent();var o=function(n,o){!function(t,n,o,s){var u,l=9e3,c=null,g=!1,f=!1;try{var p=!0;if(typeof t!==He.bA){if(n){h[F](n["time-delta-millis"]);var y=n["kill-duration"]||n["kill-duration-seconds"];(0,i.Iuo)(d[Ie](n["kill-tokens"],y),(function(e){(0,i.Iuo)(o[pe],(function(t){if(t[q]()===e){c=c||[];var n=t[W](0);o.numEvents-=n[j](),c[U](n)}}))}))}if(200==t||204==t)return void(l=200);((u=t)>=300&&u<500&&429!=u||501==u||505==u||o.numEvents<=0)&&(p=!1),l=9e3+t%1e3}if(p){l=100;var w=o.retryCnt;0===o[he]&&(w<r?(g=!0,Rt((function(){0===o[he]&&v--,Tt(o[pe],w+1,o[De],Pe?2:o[he],5)}),Pe,ze(w))):(f=!0,Pe&&(l=8001)))}}finally{g||(h[F](),function(t,n,r,o){try{o&&m[Re]();var s=t[pe];200===n&&(s=t.sentEvts||t[pe],o||t.isSync||m._clearBackOff(),function(e){if(ke){var t=(0,a.WB)();(0,i.Iuo)(e,(function(e){e&&e[j]()>0&&function(e,t){ke&&(0,i.Iuo)(e,(function(e){Ct(e[Te]=e[Te]||{},"sendEventCompleted",t)}))}(e[G](),t)}))}}(s)),kt(s,n,t[he],!0)}finally{0===t[he]&&(v--,5!==r&&e.sendQueuedRequests(t[he],r))}}(o,l,s,f)),kt(c,8004,o[he])}}(n,o,t,u)},s=t[De]||t.isSync;st.preparePayload((function(e){try{c.sendPOST(e,o,s),Xe&&Xe(k,e,s,t[Se])}catch(e){ht(o,0,{}),(0,p.OG)(b,"Unexpected exception sending payload. Ex:"+(0,i.mmD)(e))}}),Le,n,s)}),(0,s.r2)(P,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(x)if(0===t[he]&&v++,l&&!t.isBeacon&&3!==c[be]){var e={data:k.data,urlString:k.urlString,headers:(0,a.X$)({},k[ge]),timeout:k.timeout,disableXhrSync:k[ne],disableFetchKeepAlive:k[re]},n=!1;(0,s.r2)(P,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{Be(e,(function(e){n=!0,E||e[fe]||(e[fe]=e[fe]||k[fe],e[Ce]=e[Ce]||k[Ce]),x(e)}),t.isSync||t[De])}catch(e){n||x(k)}}))}else x(k)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:o,sendReason:u}}),t.isSync)}t.sizeExceed&&t.sizeExceed[N]>0&&kt(t.sizeExceed,8003,t[he]),t.failedEvts&&t.failedEvts[N]>0&&kt(t.failedEvts,8002,t[he])}function Rt(e,t,n){t?e():at.set(e,n)}function At(e){var t=et;try{for(var n=0;n<t[N];n++)try{t[n](e)}catch(e){(0,p.ZP)(b,1,519,"Response handler failed: "+e)}if(e){var r=JSON.parse(e);(0,a.yD)(r.webResult)&&(0,a.yD)(r.webResult[O])&&xe.set("MSFPC",r.webResult[O],31536e3)}}catch(e){}}function kt(e,t,n,r){if(e&&e[N]>0&&u){var o=u[(l=t,c=Qe[l],(0,a.yD)(c)||(c="oth",l>=9e3&&l<=9999?c="rspFail":l>=8e3&&l<=8999?c=w:l>=1e3&&l<=1999&&(c="send")),c)];if(o){var i=0!==n;(0,s.r2)(P,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Rt((function(){try{o.call(u,e,t,i,n)}catch(e){(0,p.ZP)(b,1,74,"send request notification failed: "+e)}}),r||i,0)}),(function(){return{batches:St(e),reason:t,isSync:i,sendSync:r,sendType:n}}),!i)}}var l,c}!function(){var e;l=null,d=new Ne,f=!1,h=new Fe,lt=!1,v=0,m=null,b=null,x=null,P=null,E=!0,L=[],V={},B=[],Ae=null,ke=!1,xe=null,Pe=!1,Ee=!1,Oe=e,qe=e,je=e,Ge=e,Ue=e,We=[],Be=e,Xe=e,et=[],nt=!1,at=Ze(),it=!1,st=null,ct=null}(),e[Z]=function(e,n,r){nt||(P=n,xe=n.getCookieMgr(),b=(m=r).diagLog(),(0,i.Yny)(We,(0,c.a)(e,(function(e){var s,u=e.cfg,c=e.cfg.extensionConfig[r.identifier];at=Ze(c[K],c[Y]),(0,a.yD)(u.anonCookieName)?function(e,t,n){for(var r=0;r<e[N];r++)if(e[r].name===t)return void(e[r].value=n);e[U]({name:t,value:n})}(L,"anoncknm",u.anonCookieName):function(e){for(var t=0;t<e[N];t++)if("anoncknm"===e[t].name)return void e.splice(t,1)}(L),Be=c.payloadPreprocessor,Xe=c.payloadListener;var d=c.httpXHROverride,f=c[Q]?c[Q]:u.endpointUrl;l=f+Ye,Ee=!!(0,i.b07)(c[ee])||!c[ee],ke=!c.disableEventTimings;var h=c.maxEvtPerBatch;ct=h&&h<=t?h:t;var v=c.valueSanitizer,m=c.stringifyObjects,y=!!u[te];(0,i.b07)(c[te])||(y=!!c[te]),Oe=c.xhrTimeout;var w=(0,i.zS2)("CompressionStream");Le=(0,g.G7)("zipPayload",u,!1),(0,i.Tnt)(w)&&!Be||(Le=!1),qe=!!c[ne],je=!!c[re],Ue=!1!==c.addNoResponse,it=!!c.excludeCsMetaData,n.getPlugin("LocalStorage")&&(je=!0),lt=!(0,$e.lV)(),Ae=new Je(P,v,m,y,a.Go,it,c),(0,i.hXl)(c[oe])||(lt=!!c[oe]),c[ae]&&(ut=c[ae]);var _=dt();st?st.SetConfig(_):(st=new Me.v)[Z](_,b);var S=d,T=c[ie]?d:null,D=c[ie]?d:null,C=[3,2];if(!d){E=!1;var I=[];(0,$e.lV)()?(I=[2,1],C=[2,1,3]):I=[1,2,3],(d=o(I=(0,g.jL)(I,c.transports),!1))||(0,p.OG)(b,"No available transport to send events"),S=o(I,!0)}T||(T=o(C=(0,g.jL)(C,c.unloadTransports),!0)),Ge=!E&&(lt&&(0,$e.Uf)()||!je&&(0,$e.R7)(!0)),(s={})[0]=d,s[1]=S||o([1,2,3],!0),s[2]=T||S||o([1],!0),s[3]=D||o([2,3],!0)||S||o([1],!0),x=s}))),nt=!0)},e.addResponseHandler=function(e){return et[U](e),{rm:function(){var t=et.indexOf(e);t>=0&&et.splice(t,1)}}},e[se]=function(e){try{if(Ae)return Ae.getEventBlob(e)}catch(e){}return y},e[ue]=function(){try{return Dt(Ae&&Ae[le](0,!1,!1,!1,1,0),Ee)}catch(e){}return null},e[ce]=function(e,t){try{var n=[];(0,i.Iuo)(e,(function(e){t&&(e=(0,g.hW)(e));var r=Ve.create(e[q],[e]);n[U](r)}));for(var r=null;n[N]>0&&Ae;){var o=n.shift();o&&o[j]()>0&&(r=r||Ae[le](0,!1,!1,!1,1,0),Ae.appendPayload(r,o,ct))}var a=Dt(r,Ee),s={data:r[de],urlString:a.url,headers:a[J],timeout:Oe,disableXhrSync:qe,disableFetchKeepAlive:je};return Ee&&(rt(s[ge],T)||(s[ge][T]=_),rt(s[ge],D)||(s[ge][D]=S)),s}catch(e){}return null},e._getDbgPlgTargets=function(){return[x[0],d,Ae,x,dt(),l,ct]},e.addHeader=function(e,t){V[e]=t},e.removeHeader=function(e){delete V[e]},e[ve]=function(){return wt()&&h[$]()},e[me]=function(e,t){(0,i.b07)(e)&&(e=0),Pe&&(e=yt(e),t=2),_t(B,e,0)&&Tt(bt(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!f&&0===v&&0===B[N]},e[ye]=function(e){Pe=e},e.addBatch=function(e){if(e&&e[j]()>0){if(d.isTenantKilled(e[q]()))return!1;B[U](e)}return!0},e.teardown=function(){B[N]>0&&Tt(bt(),0,!0,2,2),(0,i.Iuo)(We,(function(e){e&&e.rm&&e.rm()})),We=[]},e.pause=function(){f=!0},e.resume=function(){f=!1,e[me](0,4)},e[we]=function(e,t,n){e&&e[j]()>0&&((0,i.hXl)(t)&&(t=1),Pe&&(t=yt(t),n=2),Tt([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}(),it=1e4,st="eventsDiscarded",ut=void 0,lt=(0,i.ZHX)({eventsLimitInMem:{isVal:a.ei,v:it},immediateEventLimit:{isVal:a.ei,v:500},autoFlushEventsLimit:{isVal:a.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:ut},overrideInstrumentationKey:ut,overrideEndpointUrl:ut,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:ut,clearTimeoutOverride:ut,payloadPreprocessor:ut,payloadListener:ut,disableEventTimings:ut,valueSanitizer:ut,stringifyObjects:ut,enableCompoundKey:ut,disableOptimizeObj:!1,fetchCredentials:ut,transports:ut,unloadTransports:ut,useSendBeacon:ut,disableFetchKeepAlive:ut,avoidOptions:!1,xhrTimeout:ut,disableXhrSync:ut,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:i.EtT,v:6},maxUnloadEventRetryAttempts:{isVal:i.EtT,v:2},addNoResponse:ut,maxEvtPerBatch:{isVal:i.EtT,v:500},excludeCsMetaData:ut,requestLimit:{}}),ct=function(e){function t(){var n,r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="4.3.11";var h,y,w,b,_,S,T,D,C,I,R,A,k,E,O,$,M,H,F,B,J,X,Q,ee,te,ne,re=!1,oe=[],ae=!1,ie=0,le=0,de={},ge=m;return(0,o.A)(t,r,(function(e,t){function r(){(0,u.Ds)(null,H),(0,u.sq)(null,H),(0,u.vF)(null,H)}function o(e){var t="";return e&&e[N]&&(0,i.Iuo)(e,(function(e){t&&(t+="\n"),t+=e})),t}function fe(e){var t="";try{Se(e),t=D[se](e)}catch(e){}return t}function he(e){"beforeunload"!==(e||(0,i.zkX)().event).type&&(O=!0,D[ye](O)),Me(2,2)}function be(e){O=!1,D[ye](O)}function Se(e){e.ext&&e.ext[L]&&delete e.ext[L],e.ext&&e.ext[V]&&e.ext[V].id&&delete e.ext[V].id,E&&(e.ext=(0,g.hW)(e.ext),e.baseData&&(e.baseData=(0,g.hW)(e.baseData)),e.data&&(e.data=(0,g.hW)(e.data)))}function Te(e,t){if(e[xe]||(e[xe]=0),e[Pe]||(e[Pe]=1),Se(e),e[Ee])if(S||ae)e[Pe]=3,e[Ee]=!1;else if(D)return E&&(e=(0,g.hW)(e)),void D[we](Ve.create(e[q],[e]),!0===e[Ee]?1:e[Ee],3);var n=e[Pe],r=le,o=w;4===n&&(r=ie,o=y);var a=!1;if(r<o)a=!Ne(e,t);else{var i=1,s=20;4===n&&(i=4,s=1),a=!0,function(e,t,n,r){for(;n<=t;){var o=He(e,t,!0);if(o&&o[j]()>0){var a=o[W](0,r),i=a[j]();if(i>0)return 4===n?ie-=i:le-=i,Ke(st,[a],f.QueueFull,void 0),!0}n++}return qe(),!1}(e[q],e[Pe],i,s)&&(a=!Ne(e,t))}a&&Xe(st,[e],f.QueueFull)}function De(e,t,n){var r=je(e,t,n);return D[me](t,n),r}function Ce(){return le>0}function Ie(){if(A>=0&&je(A,0,k)&&D[me](0,k),ie>0&&!_&&!ae){var e=de[ge][2];e>=0&&(_=Le((function(){_=null,De(4,0,1),Ie()}),e))}var t=de[ge][1];!b&&!h&&t>=0&&!ae&&(Ce()?b=Le((function(){b=null,De(0===T?3:1,0,1),T++,T%=2,Ie()}),t):T=0)}function Oe(){n=null,re=!1,oe=[],h=null,ae=!1,ie=0,y=500,le=0,w=it,de={},ge=m,b=null,_=null,S=0,T=0,C={},I=0,Q=!1,R=0,A=-1,k=null,E=!0,O=!1,$=6,M=2,H=null,ee=null,ne=null,te=!1,F=Ze(),D=new at(500,2,1,{requeue:Be,send:Ye,sent:Qe,drop:et,rspFail:tt,oth:nt}),We(),C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}},rt()}function Le(e,t){0===t&&S&&(t=1);var n=1e3;return S&&(n=ze(S-1)),F.set(e,t*n)}function $e(){return null!==b&&(b.cancel(),b=null,T=0,!0)}function Me(e,t){$e(),h&&(h.cancel(),h=null),ae||De(1,e,t)}function He(e,t,n){var r=C[t];r||(r=C[t=1]);var o=r.iKeyMap[e];return!o&&n&&(o=Ve.create(e),r.batches[U](o),r.iKeyMap[e]=o),o}function Fe(t,n){D[ve]()&&!S&&(I>0&&le>I&&(n=!0),n&&null==h&&e.flush(t,(function(){}),20))}function Ne(e,t){E&&(e=(0,g.hW)(e));var n=e[Pe],r=He(e[q],n,!0);return!!r.addEvent(e)&&(4!==n?(le++,t&&0===e[xe]&&Fe(!e.sync,R>0&&r[j]()>=R)):ie++,!0)}function qe(){for(var e=0,t=0,n=function(n){var r=C[n];r&&r[pe]&&(0,i.Iuo)(r[pe],(function(r){4===n?e+=r[j]():t+=r[j]()}))},r=1;r<=4;r++)n(r);le=t,ie=e}function je(t,n,r){var o=!1,a=0===n;return!a||D[ve]()?(0,s.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=C[n];r&&r.batches&&r.batches[N]>0&&((0,i.Iuo)(r[pe],(function(t){D.addBatch(t)?o=o||t&&t[j]()>0:e=e[z](t[G]()),4===n?ie-=t[j]():le-=t[j]()})),r[pe]=[],r.iKeyMap={}),n--}e[N]>0&&Xe(st,e,f.KillSwitch),o&&A>=t&&(A=-1,k=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!a):(A=A>=0?(0,i.rpU)(A,t):t,k=(0,i.JBS)(k,r)),o}function Ge(e,t){De(1,0,t),qe(),Ue((function(){e&&e(),oe[N]>0?h=Le((function(){h=null,Ge(oe.shift(),t)}),0):(h=null,Ie())}))}function Ue(e){D.isCompletelyIdle()?e():h=Le((function(){h=null,Ue(e)}),.25)}function We(){(de={})[m]=[2,1,0],de.NEAR_REAL_TIME=[6,3,0],de.BEST_EFFORT=[18,9,0]}function Be(t,n){var r=[],o=$;O&&(o=M),(0,i.Iuo)(t,(function(t){t&&t[j]()>0&&(0,i.Iuo)(t[G](),(function(t){t&&(t[Ee]&&(t[Pe]=4,t[Ee]=!1),t[xe]<o?((0,a.u9)(t,e[Ae]),Te(t,!1)):r[U](t))}))})),r[N]>0&&Xe(st,r,f.NonRetryableStatus),O&&Me(2,2)}function Je(t,n){var r=X||{},o=r[t];if(o)try{o.apply(r,n)}catch(n){(0,p.ZP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function Xe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[N]>0&&Je(e,[t][z](n))}function Ke(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[N]>0&&(0,i.Iuo)(t,(function(t){t&&t[j]()>0&&Je(e,[t.events()][z](n))}))}function Ye(e,t,n){e&&e[N]>0&&Je("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function Qe(e,t){Ke("eventsSent",e,t),Ie()}function et(e,t,n,r){Ke(st,e,t>=8e3&&t<=8999?t-8e3:f.Unknown,r)}function tt(e,t,n,r){Ke(st,e,f.NonRetryableStatus,r),Ie()}function nt(e,t,n,r){Ke(st,e,f.Unknown,r),Ie()}function rt(){R=J?0:(0,i.JBS)(3*ne,w/6)}Oe(),e._getDbgPlgTargets=function(){return[D,n]},e[Z]=function(o,g,f){(0,s.r2)(g,(function(){return"PostChannel:initialize"}),(function(){t[Z](o,g,f),X=g.getNotifyMgr();try{H=(0,u.Hm)((0,l.Z)(e[Ae]),g.evtNamespace&&g.evtNamespace()),e._addHook((0,c.a)(o,(function(t){var o=t.cfg,s=(0,d.i8)(null,o,g);n=s.getExtCfg(e[Ae],lt),F=Ze(n[K],n[Y]),E=!n.disableOptimizeObj&&(0,a.F2)(),B=n.ignoreMc1Ms0CookieProcessing,function(e){var t=e[_e];e[_e]=function(){var n=0;return B&&(n|=2),n|t.call(e)}}(g),w=n.eventsLimitInMem,y=n.immediateEventLimit,I=n[ke],$=n.maxEventRetryAttempts,M=n.maxUnloadEventRetryAttempts,J=n.disableAutoBatchFlushLimit,ne=n.maxEvtPerBatch,(0,i.$XS)(o.endpointUrl)?e.pause():ae&&e.resume(),rt(),ee=n.overrideInstrumentationKey,te=!!n.disableTelemetry,Q&&r();var l=o.disablePageUnloadEvents||[];Q=(0,u.ee)(he,l,H),Q=(0,u.Fc)(he,l,H)||Q,Q=(0,u.oS)(be,o.disablePageShowEvents,H)||Q}))),D[Z](o,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:o,core:g,extensions:f}}))},e.processTelemetry=function(t,n){(0,a.u9)(t,e[Ae]),n=n||e._getTelCtx(n);var r=t;te||re||(ee&&(r[q]=ee),Te(r,!0),O?Me(2,2):Ie()),e.processNext(r,n)},e.getOfflineSupport=function(){try{var e=D&&D[ue]();if(D)return{getUrl:function(){return e?e.url:null},serialize:fe,batch:o,shouldProcess:function(e){return!te},createPayload:function(e){return null},createOneDSPayload:function(e){if(D[ce])return D[ce](e,E)}}}catch(e){}return null},e._doTeardown=function(e,t){Me(2,2),re=!0,D.teardown(),r(),Oe()},e.setEventQueueLimits=function(e,t){n.eventsLimitInMem=w=(0,a.ei)(e)?e:it,n[ke]=I=(0,a.ei)(t)?t:0,rt();var r=le>e;if(!r&&R>0)for(var o=1;!r&&o<=3;o++){var s=C[o];s&&s[pe]&&(0,i.Iuo)(s[pe],(function(e){e&&e[j]()>=R&&(r=!0)}))}Fe(!0,r)},e.pause=function(){$e(),ae=!0,D&&D.pause()},e.resume=function(){ae=!1,D&&D.resume(),Ie()},e._loadTransmitProfiles=function(e){$e(),We(),ge=m,Ie(),(0,i.zav)(e,(function(e,t){var n=t[N];if(n>=2){var r=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var o=t[0]/t[1];t[0]=(0,i.iho)(o)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t[U](r),de[e]=t}}))},e.flush=function(e,t,n){var r;if(void 0===e&&(e=!0),!ae)if(n=n||1,e)t||(r=(0,v.Qo)((function(e){t=e}))),null==h?($e(),je(1,0,n),h=Le((function(){h=null,Ge(t,n)}),0)):oe[U](t);else{var o=$e();De(1,1,n),t&&t(),o&&Ie()}return r},e.setMsaAuthTicket=function(e){D.addHeader(x,e)},e.setAuthPluginHeader=function(e){D.addHeader(P,e)},e.removeAuthPluginHeader=function(){D.removeHeader(P)},e.hasEvents=Ce,e._setTransmitProfile=function(e){ge!==e&&void 0!==de[e]&&($e(),ge=e,Ie())},(0,g.o$)(e,(function(){return D}),["addResponseHandler"]),e[Re]=function(){S<4&&(S++,$e(),Ie())},e._clearBackOff=function(){S&&(S=0,$e(),Ie())}})),r}return(0,r.qU)(t,e),t.__ieDyn=1,t}(h.s)},3328:(e,t,n)=>{if(!globalThis.ReadableStream)try{const e=n(1708),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,n(7830)),e.emitWarning=t}catch(n){throw e.emitWarning=t,n}}catch(e){Object.assign(globalThis,n(5010))}try{const{Blob:e}=n(181);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const n=this;return new ReadableStream({type:"bytes",async pull(e){const r=n.slice(t,Math.min(n.size,t+65536)),o=await r.arrayBuffer();t+=o.byteLength,e.enqueue(new Uint8Array(o)),t===n.size&&e.close()}})})}catch(e){}},3374:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigsView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("ConfigsView.constructor Started"),i.Telemetry.Current.send("ConfigsView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("ConfigsView.constructor Completed")}async loadData(){o.logToOutput("ConfigsView.loadData Started"),i.Telemetry.Current.send("ConfigsView.loadData.called");const e=await a.Session.Current.Api.getConfig();e.isSuccessful&&(this.configJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("ConfigsView.renderHtml Started"),i.Telemetry.Current.send("ConfigsView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("ConfigsView.renderHtml Completed")}static render(){if(o.logToOutput("ConfigsView.render Started"),i.Telemetry.Current.send("ConfigsView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("configsView","Configs",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("ConfigsView.dispose Started"),i.Telemetry.Current.send("ConfigsView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("ConfigsView._getWebviewContent Started"),i.Telemetry.Current.send("ConfigsView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]);let s="";if(this.configJson&&this.configJson.sections)for(const e of this.configJson.sections){const t=e.name||"N/A";if(e.options&&Array.isArray(e.options))for(const n of e.options){const e=n.key||"N/A",r=n.value||"N/A";s+=`\n                        <tr class="table-row">\n                            <td>${this._escapeHtml(t)}</td>\n                            <td>${this._escapeHtml(e)}</td>\n                            <td><code>${this._escapeHtml(String(r))}</code></td>\n                        </tr>`}}return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${a}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Configs</title>\n      </head>\n      <body>  \n        <h2>Airflow Configuration</h2>\n        <div class="controls">\n            <vscode-button appearance="secondary" id="refresh-configs">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Section</th>\n                    <th>Key</th>\n                    <th>Value</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${s}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("ConfigsView._setWebviewMessageListener Started"),i.Telemetry.Current.send("ConfigsView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("ConfigsView._setWebviewMessageListener Message Received "+e.command),"refresh-configs"!==e.command||this.loadData()}),void 0,this._disposables)}}t.ConfigsView=s},3499:(e,t,n)=>{"use strict";n.d(t,{ApplicationInsights:()=>Bn});var r=n(8279),o=n(659),a="sampleRate",i="ProcessLegacy",s="http.method",u="https://dc.services.visualstudio.com",l="/v2/track",c="not_specified",d="split",g="length",f="toLowerCase",p="ingestionendpoint",h="toString",v="removeItem",m="message",y="stringify",w="pathname",b="match",_="name",S="properties",T="measurements",D="sizeInBytes",C="typeName",I="exceptions",R="severityLevel",A="problemGroup",k="parsedStack",x="hasFullStack",P="assembly",E="fileName",O="line",L="aiDataContract",V="duration",$=n(269),M=n(3775),H=n(7292);function F(e,t,n){var r,o=t[g],a=function(e,t){var n;return t&&(t=(0,$.EHq)((0,$.oJg)(t)))[g]>150&&(n=(0,$.P0f)(t,0,150),(0,M.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}(e,t);if(a[g]!==o){for(var i=0,s=a;void 0!==n[s];)i++,s=(0,$.P0f)(a,0,147)+(void 0,r="00"+i,(0,$.hKY)(r,r[g]-3));a=s}return a}function N(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=(0,$.EHq)((0,$.oJg)(t)))[g]>n&&(r=(0,$.P0f)(t,0,n),(0,M.ZP)(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function z(e,t,n){return(0,$.KgX)(t)&&(t=(0,H.S4)(t,n)),U(e,t,2048,66)}function q(e,t){var n;return t&&t[g]>32768&&(n=(0,$.P0f)(t,0,32768),(0,M.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function j(e,t){if(t){var n={};(0,$.zav)(t,(function(t,r){if((0,$.Gvm)(r)&&(0,H.Z)())try{r=(0,H.hm)()[y](r)}catch(t){(0,M.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}r=N(e,r,8192),t=F(e,t,n),n[t]=r})),t=n}return t}function G(e,t){if(t){var n={};(0,$.zav)(t,(function(t,r){t=F(e,t,n),n[t]=r})),t=n}return t}function U(e,t,n,r){var o;return t&&(t=(0,$.EHq)((0,$.oJg)(t)))[g]>n&&(o=(0,$.P0f)(t,0,n),(0,M.ZP)(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),o||t}var W=function(){function e(e,t,n,r){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var o=this;o.ver=2,o[_]=N(e,t)||c,o[S]=j(e,n),o[T]=G(e,r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),B=function(){function e(e,t,n,r,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var a=this;a.ver=2,t=t||c,a[m]=q(e,t),a[S]=j(e,r),a[T]=G(e,o),n&&(a[R]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}();function J(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=(0,$.jn)(e))%1e3,n=""+(0,$.ZrT)(e/1e3)%60,r=""+(0,$.ZrT)(e/6e4)%60,o=""+(0,$.ZrT)(e/36e5)%24,a=(0,$.ZrT)(e/864e5);return t=1===t[g]?"00"+t:2===t[g]?"0"+t:t,n=n[g]<2?"0"+n:n,r=r[g]<2?"0"+r:r,(a>0?a+".":"")+(o=o[g]<2?"0"+o:o)+":"+r+":"+n+"."+t}var X=function(){function e(e,t,n,r,o,a,i){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var s=this;s.ver=2,s.id=function(e,t){return t?U(e,t,128,69)[h]():t}(e,i),s.url=z(e,n),s[_]=N(e,t)||c,isNaN(r)||(s[V]=J(r)),s[S]=j(e,o),s[T]=G(e,a)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),Z=function(){function e(e,t,n,r,o,a,i){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var s=this;s.ver=2,s.url=z(e,n),s[_]=N(e,t)||c,s[S]=j(e,o),s[T]=G(e,a),i&&(s.domProcessing=i.domProcessing,s[V]=i[V],s.networkConnect=i.networkConnect,s.perfTotal=i.perfTotal,s.receivedResponse=i.receivedResponse,s.sentRequest=i.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),K=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Y=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Q=/([^\(\s\n]+):([0-9]+)$/,ee="<no_method>",te="error",ne="stack",re="stackDetails",oe="errorSrc",ae="message",ie="description",se=[{re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,len:5,m:1,fn:2,ln:3,col:4},{chk:function(e){return(0,$.HzD)(e,"[native")<0},pre:function(e){return e.replace(/(\(anonymous\))/,"<anonymous>")},re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,len:4,m:1,fn:2,ln:3},{re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,len:3,m:1,fn:2,hdl:be},{re:/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,len:2,fn:1,hdl:be}];function ue(e,t){var n=e;return n&&!(0,$.KgX)(n)&&(JSON&&JSON[y]?(n=JSON[y](e),!t||n&&"{}"!==n||(n=(0,$.Tnt)(e[h])?e[h]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function le(e,t){var n=e;return e&&(n&&!(0,$.KgX)(n)&&(n=e[ae]||e[ie]||n),n&&!(0,$.KgX)(n)&&(n=ue(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,$.HzD)(n||"",t)&&(n=t+": "+n),n||""}function ce(e){return e&&e.src&&(0,$.KgX)(e.src)&&e.obj&&(0,$.cyL)(e.obj)}function de(e){var t=e||"";(0,$.KgX)(t)||(t=(0,$.KgX)(t[ne])?t[ne]:""+t);var n=t[d]("\n");return{src:t,obj:n}}function ge(e){var t=null;if(e)try{if(e[ne])t=de(e[ne]);else if(e[te]&&e[te][ne])t=de(e[te][ne]);else if(e.exception&&e.exception[ne])t=de(e.exception[ne]);else if(ce(e))t=e;else if(ce(e[re]))t=e[re];else if((0,$.zkX)()&&(0,$.zkX)().opera&&e[ae])t=function(e){for(var t=[],n=e[d]("\n"),r=0;r<n[g];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),t.push(o)}return{src:e,obj:t}}(e[m]);else if(e.reason&&e.reason[ne])t=de(e.reason[ne]);else if((0,$.KgX)(e))t=de(e);else{var n=e[ae]||e[ie]||"";(0,$.KgX)(e[oe])&&(n&&(n+="\n"),n+=" from "+e[oe]),n&&(t=de(n))}}catch(e){t=de(e)}return t||{src:"",obj:null}}function fe(e){var t="";if(e&&!(t=e.typeName||e[_]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[h]());t=n&&n[g]>1?n[1]:""}catch(e){}return t}function pe(e){if(e)try{if(!(0,$.KgX)(e)){var t=fe(e),n=ue(e,!1);return n&&"{}"!==n||(e[te]&&(t=fe(e=e[te])),n=ue(e,!0)),0!==(0,$.HzD)(n,t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var he=function(){function e(e,t,n,r,o,a){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var i=this;i.ver=2,function(e){try{if((0,$.Gvm)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(i[I]=t[I]||[],i[S]=t[S],i[T]=t[T],t[R]&&(i[R]=t[R]),t.id&&(i.id=t.id,t[S].id=t.id),t[A]&&(i[A]=t[A]),(0,$.hXl)(t.isManual)||(i.isManual=t.isManual)):(n||(n={}),a&&(n.id=a),i[I]=[ye(e,t,n)],i[S]=j(e,n),i[T]=G(e,r),o&&(i[R]=o),a&&(i.id=a))}return e.CreateAutoException=function(e,t,n,r,o,a,i,s){var u=fe(o||a||e);return{message:le(e,u),url:t,lineNumber:n,columnNumber:r,error:pe(o||a||e),evt:pe(a||e),typeName:u,stackDetails:ge(i||o||a),errorSrc:s}},e.CreateFromInterface=function(t,n,r,a){var i=n[I]&&(0,$.W$7)(n[I],(function(e){return function(e,t){var n=(0,$.cyL)(t[k])&&(0,$.W$7)(t[k],(function(e){return function(e){var t;return Se(((t={})[L]=_e,t.level=e.level,t.method=e.method,t.assembly=e[P],t.fileName=e[E],t.line=e[O],t.sizeInBytes=0,t))}(e)}))||t[k];return ye(e,(0,o.Im)((0,o.Im)({},t),{parsedStack:n}))}(t,e)}));return new e(t,(0,o.Im)((0,o.Im)({},n),{exceptions:i}),r,a)},e.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,o=e.severityLevel,a=e.problemGroup,i=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&(0,$.W$7)(t,(function(e){return e.toInterface()}))||void 0,severityLevel:o,properties:n,measurements:r,problemGroup:a,id:i,isManual:s}},e.CreateSimpleException=function(e,t,n,r,o,a){var i;return{exceptions:[(i={},i[x]=!0,i.message=e,i.stack=o,i.typeName=t,i)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=pe,e}(),ve=(0,$.N6t)({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function me(){var e=this,t=(0,$.cyL)(e[k])&&(0,$.W$7)(e[k],(function(e){return function(e){return{level:e.level,method:e.method,assembly:e[P],fileName:e[E],line:e[O]}}(e)}));return{id:e.id,outerId:e.outerId,typeName:e[C],message:e[m],hasFullStack:e[x],stack:e[ne],parsedStack:t||void 0}}function ye(e,t,n){var r,o,a,i,s,u;if(function(e){try{if((0,$.Gvm)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))o=t[C],a=t[m],s=t[ne],u=t[k]||[],i=t[x];else{var l=t,d=l&&l.evt;(0,$.bJ7)(l)||(l=l[te]||d||l),o=N(e,fe(l))||c,a=q(e,le(t||l,o))||c;var f=t[re]||ge(t);u=function(e){var t,n=e.obj;if(n&&n[g]>0){t=[];var r=0,o=!1,a=0;if((0,$.Iuo)(n,(function(e){if(o||function(e){var t=!1;if(e&&(0,$.KgX)(e)){var n=(0,$.EHq)(e);n&&(t=K.test(n))}return t}(e)){var n=(0,$.oJg)(e);o=!0;var i=function(e,t){var n,r;if(e&&(0,$.KgX)(e)&&(0,$.EHq)(e)){(n={})[L]=_e,n.level=t,n.assembly=(0,$.EHq)(e),n.method=ee,n.fileName="",n.line=0,n.sizeInBytes=0,r=n;for(var o=0;o<se[g];){var a=se[o];if(a.chk&&!a.chk(e))break;a.pre&&(e=a.pre(e));var i=e[b](a.re);if(i&&i[g]>=a.len){a.m&&(r.method=(0,$.EHq)(i[a.m]||ee)),a.hdl?a.hdl(r,a,i):a.fn&&(a.ln?(r[E]=(0,$.EHq)(i[a.fn]||""),r[O]=parseInt((0,$.EHq)(i[a.ln]||""))||0):we(r,i[a.fn]||""));break}o++}}return Se(r)}(n,r);i&&(a+=i[D],t.push(i),r++)}})),a>32768)for(var i=0,s=t[g]-1,u=0,l=i,c=s;i<s;){if((u+=t[i][D]+t[s][D])>32768){var d=c-l+1;t.splice(l,d);break}l=i,c=s,i++,s--}}return t}(f),(0,$.cyL)(u)&&(0,$.W$7)(u,(function(t){t[P]=N(e,t[P]),t[E]=N(e,t[E])})),s=function(e,t){var n;if(t){var r=""+t;r[g]>32768&&(n=(0,$.P0f)(r,0,32768),(0,M.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}(e,function(e){var t="";return e&&(t=e.obj?e.obj.join("\n"):e.src||""),t}(f)),i=(0,$.cyL)(u)&&u[g]>0,n&&(n[C]=n[C]||o)}return(r={})[L]=ve,r.id=void 0,r.outerId=void 0,r.typeName=o,r.message=a,r[x]=i,r.stack=s,r.parsedStack=u,r.toInterface=me,r}function we(e,t){var n=t[b](Y);if(n&&n[g]>=4)e[E]=n[1],e[O]=parseInt(n[2]);else{var r=t[b](Q);r&&r[g]>=3?(e[E]=r[1],e[O]=parseInt(r[2])):e[E]=t}}function be(e,t,n){var r=e[E];t.fn&&n&&n[g]>t.fn&&(t.ln&&n[g]>t.ln?(r=(0,$.EHq)(n[t.fn]||""),e[O]=parseInt((0,$.EHq)(n[t.ln]||""))||0):r=(0,$.EHq)(n[t.fn]||"")),r&&we(e,r)}var _e=(0,$.N6t)({level:1,method:1,assembly:0,fileName:0,line:0});function Se(e){var t=58;return e&&(t+=e.method[g],t+=e.assembly[g],t+=e.fileName[g],t+=e.level.toString()[g],t+=e.line.toString()[g],e[D]=t),e}var Te=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},De=function(){function e(e,t,n,r,o,a,i,s,u){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var d=new Te;d.count=r>0?r:void 0,d.max=isNaN(a)||null===a?void 0:a,d.min=isNaN(o)||null===o?void 0:o,d[_]=N(e,t)||c,d.value=n,d.stdDev=isNaN(i)||null===i?void 0:i,l.metrics=[d],l[S]=j(e,s),l[T]=G(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),Ce=(0,$.YEm)()||{},Ie=0,Re=[null,null,null,null,null];function Ae(e,t){var n=function(e,t){var n=null;if(e){var r=e[b](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[g]>2&&(0,$.KgX)(r[2])&&r[2][g]>0&&(n=r[2]||"",t&&r[g]>2)){var o=(r[1]||"")[f](),a=r[3]||"";("http"===o&&":80"===a||"https"===o&&":443"===a)&&(a=""),n+=a}}return n}(e,t)||"";if(n){var r=n[b](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[g]>3&&(0,$.KgX)(r[2])&&r[2][g]>0)return r[2]+(r[3]||"")}return n}var ke=[u+l,"https://breeze.aimon.applicationinsights.io"+l,"https://dc-int.services.visualstudio.com"+l];function xe(e){return-1!==(0,$.rDm)(ke,e[f]())}var Pe=function(){function e(e,t,n,r,o,a,i,s,u,l,c,d){void 0===u&&(u="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var f=this;f.ver=2,f.id=t,f[V]=J(o),f.success=a,f.resultCode=i+"",f.type=N(e,u);var p=function(e,t,n,r){var o,a,i,s,u,l=r,c=r;if(t&&t[g]>0){var d=(a=t,u=(s=Re)[i=Ie],Ce.createElement?s[i]||(u=s[i]=Ce.createElement("a")):u={host:Ae(a,!0)},u.href=a,++i>=s[g]&&(i=0),Ie=i,u);if(o=d.host,!l)if(null!=d[w]){var f=0===d.pathname[g]?"/":d[w];"/"!==f.charAt(0)&&(f="/"+f),c=d[w],l=N(e,n?n+" "+f:f)}else l=N(e,t)}else o=r,l=r;return{target:o,name:l,data:c}}(e,n,s,r);f.data=z(e,r)||p.data,f.target=N(e,p.target),l&&(f.target="".concat(f.target," | ").concat(l)),f[_]=N(e,p[_]),f[S]=j(e,c),f[T]=G(e,d)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),Ee=n(2845),Oe=n(6149),Le=n(737);function Ve(e,t){(0,Oe.ML)(e,null,null,t)}var $e=n(3673),Me=n(4282),He=(0,Me.H)({LocalStorage:0,SessionStorage:1}),Fe=void 0,Ne="";function ze(e){try{if((0,$.hXl)((0,$.mS$)()))return null;var t=(new Date)[h](),n=(0,$.zS2)(e===He.LocalStorage?"localStorage":"sessionStorage"),r=Ne+t;n.setItem(r,t);var o=n.getItem(r)!==t;if(n[v](r),!o)return n}catch(e){}return null}function qe(){return je()?ze(He.SessionStorage):null}function je(e){return(e||void 0===Fe)&&(Fe=!!ze(He.SessionStorage)),Fe}function Ge(e,t){var n=qe();if(null!==n)try{return n.getItem(t)}catch(t){Fe=!1,(0,M.ZP)(e,2,2,"Browser failed read of session storage. "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}return null}function Ue(e,t,n){var r=qe();if(null!==r)try{return r.setItem(t,n),!0}catch(t){Fe=!1,(0,M.ZP)(e,2,4,"Browser failed write to session storage. "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}return!1}var We=(0,Me.o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Be=n(2475),Je=n(6987),Xe=n(2317),Ze=n(4875),Ke=n(856),Ye=n(4013),Qe=n(6182);function et(e,t){try{if(e&&""!==e){var n=(0,H.hm)().parse(e);if(n&&n[Qe.cp]&&n[Qe.cp]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[Qe.oI])return n}}catch(n){(0,M.ZP)(t,1,43,"Cannot parse the response. "+(n[Qe.RS]||(0,$.mmD)(n)),{response:e})}return null}var tt=n(8257),nt=n(8205);function rt(e){var t="ai."+e+".";return function(e){return t+e}}var ot=rt("application"),at=rt("device"),it=rt("location"),st=rt("operation"),ut=rt("session"),lt=rt("user"),ct=rt("cloud"),dt=rt("internal"),gt=function(e){function t(){return e.call(this)||this}return(0,o.qU)(t,e),t}((0,$e.SZ)({applicationVersion:ot("ver"),applicationBuild:ot("build"),applicationTypeId:ot("typeId"),applicationId:ot("applicationId"),applicationLayer:ot("layer"),deviceId:at("id"),deviceIp:at("ip"),deviceLanguage:at("language"),deviceLocale:at("locale"),deviceModel:at("model"),deviceFriendlyName:at("friendlyName"),deviceNetwork:at("network"),deviceNetworkName:at("networkName"),deviceOEMName:at("oemName"),deviceOS:at("os"),deviceOSVersion:at("osVersion"),deviceRoleInstance:at("roleInstance"),deviceRoleName:at("roleName"),deviceScreenResolution:at("screenResolution"),deviceType:at("type"),deviceMachineName:at("machineName"),deviceVMName:at("vmName"),deviceBrowser:at("browser"),deviceBrowserVersion:at("browserVersion"),locationIp:it("ip"),locationCountry:it("country"),locationProvince:it("province"),locationCity:it("city"),operationId:st("id"),operationName:st("name"),operationParentId:st("parentId"),operationRootId:st("rootId"),operationSyntheticSource:st("syntheticSource"),operationCorrelationVector:st("correlationVector"),sessionId:ut("id"),sessionIsFirst:ut("isFirst"),sessionIsNew:ut("isNew"),userAccountAcquisitionDate:lt("accountAcquisitionDate"),userAccountId:lt("accountId"),userAgent:lt("userAgent"),userId:lt("id"),userStoreRegion:lt("storeRegion"),userAuthUserId:lt("authUserId"),userAnonymousUserAcquisitionDate:lt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:lt("authUserAcquisitionDate"),cloudName:ct("name"),cloudRole:ct("role"),cloudRoleVer:ct("roleVer"),cloudRoleInstance:ct("roleInstance"),cloudEnvironment:ct("environment"),cloudLocation:ct("location"),cloudDeploymentUnit:ct("deploymentUnit"),internalNodeName:dt("nodeName"),internalSdkVersion:dt("sdkVersion"),internalAgentVersion:dt("agentVersion"),internalSnippet:dt("snippet"),internalSdkSrc:dt("sdkSrc")})),ft=new gt,pt=function(e,t,n){var r=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[_]=N(e,n)||c,o.data=t,o.time=(0,$e._u)(new Date),o[L]={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1}},ht=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t},vt="duration",mt="tags",yt="deviceType",wt="data",bt="name",_t="traceID",St="length",Tt="stringify",Dt="measurements",Ct="dataType",It="envelopeType",Rt="toString",At="enqueue",kt="count",xt="push",Pt="emitLineDelimitedJson",Et="clear",Ot="markAsSent",Lt="clearSent",Vt="bufferOverride",$t="BUFFER_KEY",Mt="SENT_BUFFER_KEY",Ht="concat",Ft="MAX_BUFFER_SIZE",Nt="triggerSend",zt="diagLog",qt="initialize",jt="_sender",Gt="endpointUrl",Ut="instrumentationKey",Wt="customHeaders",Bt="maxBatchSizeInBytes",Jt="onunloadDisableBeacon",Xt="isBeaconApiDisabled",Zt="alwaysUseXhrOverride",Kt="enableSessionStorageBuffer",Yt="_buffer",Qt="onunloadDisableFetch",en="disableSendBeaconSplit",tn="getSenderInst",nn="_onError",rn="_onPartialSuccess",on="_onSuccess",an="itemsReceived",sn="itemsAccepted",un="baseType",ln="sampleRate",cn="baseType",dn="baseData",gn="properties",fn="true";function pn(e,t,n){return(0,$e.KY)(e,t,n,$.zzB)}function hn(e,t,n){(0,$.hXl)(e)||(0,$.zav)(e,(function(e,r){(0,$.EtT)(r)?n[e]=r:(0,$.KgX)(r)?t[e]=r:(0,H.Z)()&&(t[e]=(0,H.hm)()[Tt](r))}))}function vn(e,t){(0,$.hXl)(e)||(0,$.zav)(e,(function(n,r){e[n]=r||t}))}function mn(e,t,n,r){var i=new pt(e,r,t);pn(i,"sampleRate",n[a]),(n[dn]||{}).startTime&&(i.time=(0,$e._u)(n[dn].startTime)),i.iKey=n.iKey;var s=n.iKey.replace(/-/g,"");return i[bt]=i[bt].replace("{0}",s),function(e,t,n){var r=n[mt]=n[mt]||{},a=t.ext=t.ext||{},i=t[mt]=t[mt]||[],s=a.user;s&&(pn(r,ft.userAuthUserId,s.authId),pn(r,ft.userId,s.id||s.localId));var u=a.app;u&&pn(r,ft.sessionId,u.sesId);var l=a.device;l&&(pn(r,ft.deviceId,l.id||l.localId),pn(r,ft[yt],l.deviceClass),pn(r,ft.deviceIp,l.ip),pn(r,ft.deviceModel,l.model),pn(r,ft[yt],l[yt]));var c=t.ext.web;if(c){pn(r,ft.deviceLanguage,c.browserLang),pn(r,ft.deviceBrowserVersion,c.browserVer),pn(r,ft.deviceBrowser,c.browser);var d=n[wt]=n[wt]||{},g=d[dn]=d[dn]||{},f=g[gn]=g[gn]||{};pn(f,"domain",c.domain),pn(f,"isManual",c.isManual?fn:null),pn(f,"screenRes",c.screenRes),pn(f,"userConsent",c.userConsent?fn:null)}var p=a.os;p&&(pn(r,ft.deviceOS,p[bt]),pn(r,ft.deviceOSVersion,p.osVer));var h=a.trace;h&&(pn(r,ft.operationParentId,h.parentID),pn(r,ft.operationName,N(e,h[bt])),pn(r,ft.operationId,h[_t]));for(var v={},m=i[St]-1;m>=0;m--){var y=i[m];(0,$.zav)(y,(function(e,t){v[e]=t})),i.splice(m,1)}(0,$.zav)(i,(function(e,t){v[e]=t}));var w=(0,o.Im)((0,o.Im)({},r),v);w[ft.internalSdkVersion]||(w[ft.internalSdkVersion]=N(e,"javascript:".concat(wn.Version),64)),n[mt]=(0,$e.hW)(w)}(e,n,i),n[mt]=n[mt]||[],(0,$e.hW)(i)}function yn(e,t){(0,$.hXl)(t[dn])&&(0,M.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var wn={Version:"3.3.11"};function bn(e,t,n){yn(e,t);var r={},o={};t[cn]!==W[Ct]&&(r.baseTypeSource=t[cn]),t[cn]===W[Ct]?(r=t[dn][gn]||{},o=t[dn][Dt]||{}):t[dn]&&hn(t[dn],r,o),hn(t[wt],r,o),(0,$.hXl)(n)||vn(r,n);var a=t[dn][bt],i=new W(e,a,r,o),s=new ht(W[Ct],i);return mn(e,W[It],t,s)}var _n,Sn,Tn=function(){function e(t,n){var o=[],a=!1,i=n.maxRetryCnt;this._get=function(){return o},this._set=function(e){return o=e},(0,r.A)(e,this,(function(e){e[At]=function(r){e[kt]()>=n.eventsLimitInMem?a||((0,M.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[kt](),!0),a=!0):(r.cnt=r.cnt||0,!(0,$.hXl)(i)&&r.cnt>i||o[xt](r))},e[kt]=function(){return o[St]},e.size=function(){for(var e=o[St],t=0;t<o[St];t++)e+=o[t].item[St];return n[Pt]||(e+=2),e},e[Et]=function(){o=[],a=!1},e.getItems=function(){return o.slice(0)},e.batchPayloads=function(e){if(e&&e[St]>0){var t=[];return(0,$.Iuo)(e,(function(e){t[xt](e.item)})),n[Pt]?t.join("\n"):"["+t.join(",")+"]"}return null},e.createNew=function(e,n,r){var a=o.slice(0);e=e||t,n=n||{};var i=r?new In(e,n):new Dn(e,n);return(0,$.Iuo)(a,(function(e){i[At](e)})),i}}))}return e.__ieDyn=1,e}(),Dn=function(e){function t(n,o){var a=e.call(this,n,o)||this;return(0,r.A)(t,a,(function(e,t){e[Ot]=function(e){t[Et]()},e[Lt]=function(e){}})),a}return(0,o.qU)(t,e),t.__ieDyn=1,t}(Tn),Cn=["AI_buffer","AI_sentBuffer"],In=function(e){function t(n,o){var a=e.call(this,n,o)||this,i=!1,s=null==o?void 0:o.namePrefix,u=o[Vt]||{getItem:Ge,setItem:Ue},l=u.getItem,c=u.setItem,d=o.maxRetryCnt;return(0,r.A)(t,a,(function(e,r){var o=h(t[$t]),a=h(t[Mt]),u=function(){var e=[];try{return(0,$.Iuo)(Cn,(function(t){var n=w(t);if(e=e[Ht](n),s){var r=w(s+"_"+t);e=e[Ht](r)}})),e}catch(e){(0,M.ZP)(n,2,41,"Transfer events from previous buffers: "+(0,$e.lL)(e)+". previous Buffer items can not be removed",{exception:(0,$.mmD)(e)})}return[]}(),g=a[Ht](u),f=e._set(o[Ht](g));function p(e,t){var n=[],r=[];return(0,$.Iuo)(e,(function(e){r[xt](e.item)})),(0,$.Iuo)(t,(function(e){(0,$.Tnt)(e)||-1!==(0,$.rDm)(r,e.item)||n[xt](e)})),n}function h(e){return m(s?s+"_"+e:e)}function m(e){try{var t=l(n,e);if(t){var r=(0,H.hm)().parse(t);if((0,$.KgX)(r)&&(r=(0,H.hm)().parse(r)),r&&(0,$.cyL)(r))return r}}catch(t){(0,M.ZP)(n,1,42," storage key: "+e+", "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}return[]}function y(e,t){var r=e;try{r=s?s+"_"+r:r;var o=JSON[Tt](t);c(n,r,o)}catch(e){c(n,r,JSON[Tt]([])),(0,M.ZP)(n,2,41," storage key: "+r+", "+(0,$e.lL)(e)+". Buffer cleared",{exception:(0,$.mmD)(e)})}}function w(e){try{var t=m(e),r=[];return(0,$.Iuo)(t,(function(e){var t={item:e,cnt:0};r[xt](t)})),function(e,t){var n=qe();if(null!==n)try{return n[v](t),!0}catch(t){Fe=!1,(0,M.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}}(n,e),r}catch(e){}return[]}f[St]>t[Ft]&&(f[St]=t[Ft]),y(t[Mt],[]),y(t[$t],f),e[At]=function(o){e[kt]()>=t[Ft]?i||((0,M.ZP)(n,2,67,"Maximum buffer size reached: "+e[kt](),!0),i=!0):(o.cnt=o.cnt||0,!(0,$.hXl)(d)&&o.cnt>d||(r[At](o),y(t[$t],e._get())))},e[Et]=function(){r[Et](),y(t[$t],e._get()),y(t[Mt],[]),i=!1},e[Ot]=function(r){y(t[$t],e._set(p(r,e._get())));var o=h(t[Mt]);o instanceof Array&&r instanceof Array&&((o=o[Ht](r))[St]>t[Ft]&&((0,M.ZP)(n,1,67,"Sent buffer reached its maximum size: "+o[St],!0),o[St]=t[Ft]),y(t[Mt],o))},e[Lt]=function(e){var n=h(t[Mt]);n=p(e,n),y(t[Mt],n)},e.createNew=function(r,o,a){a=!!a;var i=e._get().slice(0),s=h(t[Mt]).slice(0);r=r||n,o=o||{},e[Et]();var u=a?new t(r,o):new Dn(r,o);return(0,$.Iuo)(i,(function(e){u[At](e)})),a&&u[Ot](s),u}})),a}var n;return(0,o.qU)(t,e),n=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+n.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(Tn),Rn=function(){function e(t){(0,r.A)(e,this,(function(e){function n(e,a){var i="__aiCircularRefCheck",s={};if(!e)return(0,M.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),s;if(e[i])return(0,M.ZP)(t,2,50,"Circular reference detected while serializing object",{name:a},!0),s;if(!e.aiDataContract){if("measurements"===a)s=o(e,"number",a);else if("properties"===a)s=o(e,"string",a);else if("tags"===a)s=o(e,"string",a);else if((0,$.cyL)(e))s=r(e,a);else{(0,M.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{(0,H.hm)()[Tt](e),s=e}catch(e){(0,M.ZP)(t,1,48,e&&(0,$.Tnt)(e[Rt])?e[Rt]():"Error serializing object",null,!0)}}return s}return e[i]=!0,(0,$.zav)(e.aiDataContract,(function(o,i){var u=(0,$.Tnt)(i)?1&i():1&i,l=(0,$.Tnt)(i)?4&i():4&i,c=2&i,d=void 0!==e[o],g=(0,$.Gvm)(e[o])&&null!==e[o];if(!u||d||c){if(!l){var f;void 0!==(f=g?c?r(e[o],o):n(e[o],o):e[o])&&(s[o]=f)}}else(0,M.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:o,name:a})})),delete e[i],s}function r(e,r){var o;if(e)if((0,$.cyL)(e)){o=[];for(var a=0;a<e[St];a++){var i=n(e[a],r+"["+a+"]");o[xt](i)}}else(0,M.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return o}function o(e,n,r){var o;return e&&(o={},(0,$.zav)(e,(function(e,a){if("string"===n)void 0===a?o[e]="undefined":null===a?o[e]="null":a[Rt]?o[e]=a[Rt]():o[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===a)o[e]="undefined";else if(null===a)o[e]="null";else{var i=parseFloat(a);o[e]=i}else o[e]="invalid field: "+r+" is of unknown type.",(0,M.ZP)(t,1,o[e],null,!0)}))),o}e.serialize=function(e){var r=n(e,"root");try{return(0,H.hm)()[Tt](r)}catch(e){(0,M.ZP)(t,1,48,e&&(0,$.Tnt)(e[Rt])?e[Rt]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),An=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[St]<8;)e=e[Ht](e);for(var t=5381,n=0;n<e[St];++n)t=(t<<5)+t+e.charCodeAt(n),t|=0;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),kn=function(){var e=new An,t=new gt;this.getSamplingScore=function(n){return n[mt]&&n[mt][t.userId]?e.getHashCodeScore(n[mt][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[mt]&&n[mt][t.operationId]?e.getHashCodeScore(n[mt][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[_t]?e.getHashCodeScore(n.ext.telemetryTrace[_t]):100*Math.random()}},xn=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||(0,M.y0)(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[ln]=e,this.samplingScoreGenerator=new kn}return e.prototype.isSampledIn=function(e){var t=this[ln];return null==t||t>=100||e.baseType===De[Ct]||this.samplingScoreGenerator.getSamplingScore(e)<t},e}(),Pn=void 0;function En(e){try{return e.responseText}catch(e){}return null}var On=(0,$.ZHX)(((_n={endpointUrl:(0,Be.Lx)($.zzB,u+l)})[Pt]=(0,Be.DD)(),_n.maxBatchInterval=15e3,_n[Bt]=102400,_n.disableTelemetry=(0,Be.DD)(),_n[Kt]=(0,Be.DD)(!0),_n.isRetryDisabled=(0,Be.DD)(),_n[Xt]=(0,Be.DD)(!0),_n[en]=(0,Be.DD)(!0),_n.disableXhr=(0,Be.DD)(),_n[Qt]=(0,Be.DD)(),_n[Jt]=(0,Be.DD)(),_n[Ut]=Pn,_n.namePrefix=Pn,_n.samplingPercentage=(0,Be.Lx)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),_n[Wt]=Pn,_n.convertUndefined=Pn,_n.eventsLimitInMem=1e4,_n[Vt]=!1,_n.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:Pn},_n[Zt]=(0,Be.DD)(),_n.transports=Pn,_n.retryCodes=Pn,_n.corsPolicy=Pn,_n.maxRetryCnt={isVal:$.EtT,v:10},_n)),Ln="X-Set-Cross-Origin-Resource-Policy",Vn=((Sn={})[W.dataType]=bn,Sn[B.dataType]=function(e,t,n){yn(e,t);var r=t[dn].message,o=t[dn].severityLevel,a=t[dn][gn]||{},i=t[dn][Dt]||{};hn(t[wt],a,i),(0,$.hXl)(n)||vn(a,n);var s=new B(e,r,o,a,i),u=new ht(B[Ct],s);return mn(e,B[It],t,u)},Sn[X.dataType]=function(e,t,n){var r;yn(e,t);var o=t[dn];(0,$.hXl)(o)||(0,$.hXl)(o[gn])||(0,$.hXl)(o[gn][vt])?(0,$.hXl)(t[wt])||(0,$.hXl)(t[wt][vt])||(r=t[wt][vt],delete t[wt][vt]):(r=o[gn][vt],delete o[gn][vt]);var a,i=t[dn];((t.ext||{}).trace||{})[_t]&&(a=t.ext.trace[_t]);var s=i.id||a,u=i[bt],l=i.uri,c=i[gn]||{},d=i[Dt]||{};if((0,$.hXl)(i.refUri)||(c.refUri=i.refUri),(0,$.hXl)(i.pageType)||(c.pageType=i.pageType),(0,$.hXl)(i.isLoggedIn)||(c.isLoggedIn=i.isLoggedIn[Rt]()),!(0,$.hXl)(i[gn])){var g=i[gn];(0,$.zav)(g,(function(e,t){c[e]=t}))}hn(t[wt],c,d),(0,$.hXl)(n)||vn(c,n);var f=new X(e,u,l,r,c,d,s),p=new ht(X[Ct],f);return mn(e,X[It],t,p)},Sn[Z.dataType]=function(e,t,n){yn(e,t);var r=t[dn],o=r[bt],a=r.uri||r.url,i=r[gn]||{},s=r[Dt]||{};hn(t[wt],i,s),(0,$.hXl)(n)||vn(i,n);var u=new Z(e,o,a,void 0,i,s,r),l=new ht(Z[Ct],u);return mn(e,Z[It],t,l)},Sn[he.dataType]=function(e,t,n){yn(e,t);var r=t[dn][Dt]||{},o=t[dn][gn]||{};hn(t[wt],o,r),(0,$.hXl)(n)||vn(o,n);var a=t[dn],i=he.CreateFromInterface(e,a,o,r),s=new ht(he[Ct],i);return mn(e,he[It],t,s)},Sn[De.dataType]=function(e,t,n){yn(e,t);var r=t[dn],o=r[gn]||{},a=r[Dt]||{};hn(t[wt],o,a),(0,$.hXl)(n)||vn(o,n);var i=new De(e,r[bt],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,a),s=new ht(De[Ct],i);return mn(e,De[It],t,s)},Sn[Pe.dataType]=function(e,t,n){yn(e,t);var r=t[dn][Dt]||{},o=t[dn][gn]||{};hn(t[wt],o,r),(0,$.hXl)(n)||vn(o,n);var a=t[dn];if((0,$.hXl)(a))return(0,M.OG)(e,"Invalid input for dependency data"),null;var i=a[gn]&&a[gn][s]?a[gn][s]:"GET",u=new Pe(e,a.id,a.target,a[bt],a[vt],a.success,a.responseCode,i,a.type,a.correlationContext,o,r),l=new ht(Pe[Ct],u);return mn(e,Pe[It],t,l)},Sn),$n=function(e){function t(){var n,o,s,u,l,c,d,g=e.call(this)||this;g.priority=1001,g.identifier=Ee.Uu;var f,p,h,v,m,y,w,b,_,S,T,D,C,I,R,A,k,x,P,E,O,L,V,F,N,z,q,j,G=0;return(0,r.A)(t,g,(function(e,r){function U(t,r){var o=En(t);if(!t||o+""!="200"&&""!==o){var a=et(o);a&&a[an]&&a[an]>a[sn]&&!I?e[rn](r,a):e[nn](r,(0,$e.HU)(t))}else n=0,e[on](r,0)}function W(e,t,n){4===e.readyState&&re(e.status,t,e.responseURL,n,(0,$e.r4)(e),En(e)||e.response)}function B(e){try{if(e){var t=e.oriPayload;return t&&t[St]?t:null}}catch(e){}return null}function J(t,n){return!(T||(t?t.baseData&&!t[un]?(n&&(0,M.ZP)(n,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[un]||(t[un]="EventData"),e[jt]?(r=t,e._sample.isSampledIn(r)?(t[a]=e._sample[ln],0):(n&&(0,M.ZP)(n,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[ln]}),1)):(n&&(0,M.ZP)(n,1,28,"Sender was not initialized"),1)):(n&&(0,M.ZP)(n,1,7,"Cannot send empty telemetry"),1)));var r}function X(e,n){var r=e.iKey||D,o=t.constructEnvelope(e,r,n,C);if(o){var a=!1;if(e[mt]&&e[mt][i]&&((0,$.Iuo)(e[mt][i],(function(e){try{e&&!1===e(o)&&(a=!0,(0,M.OG)(n,"Telemetry processor check returns false"))}catch(e){(0,M.ZP)(n,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,$e.lL)(e),{exception:(0,$.mmD)(e)},!0)}})),delete e[mt][i]),!a)return o}else(0,M.ZP)(n,1,47,"Unable to create an AppInsights envelope")}function Z(t){var n="",r=e[zt]();try{var o=J(t,r),a=null;o&&(a=X(t,r)),a&&(n=l.serialize(a))}catch(e){}return n}function K(e){var t="";return e&&e[St]&&(t="["+e.join(",")+"]"),t}function Y(e){var t=te();return{urlString:v,data:e,headers:t}}function Q(t,n,r,o){void 0===o&&(o=!0);var a=function(t,r,o){return function(t,n,r,o){200===n&&t?e._onSuccess(t,t[St]):o&&e[nn](t,o)}(n,t,0,o)},i=ee(n),s=t&&t.sendPOST;if(s&&i){var u;o&&e._buffer[Ot](n);var l,c,d=!1;return z.preparePayload((function(e){u=s(e,a,!r),d=!0,l&&(0,nt.yN)(u,l,c)}),j,i,!r),d?u:(0,nt.Qo)((function(e,t){l=e,c=t}))}return null}function ee(t){if((0,$.cyL)(t)&&t[St]>0){var n=e[Yt].batchPayloads(t),r=te();return{data:n,urlString:v,headers:r,disableXhrSync:O,disableFetchKeepAlive:!L,oriPayload:t}}return null}function te(){try{var e=d||{};return xe(v)&&(e[We[6]]=We[7]),e}catch(e){}return null}function ne(t){var n=t?t[St]:0;return e[Yt].size()+n>y&&(p&&!p.isOnline()||e[Nt](!0,null,10),!0)}function re(t,r,o,a,i,s){var u=null;if(e._appId||(u=et(s))&&u.appId&&(e._appId=u.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!oe(o))return void e[nn](r,i);if(p&&!p.isOnline())return void(I||(ue(r,10),(0,M.ZP)(e[zt](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!p.isOnline(),". Will retry to send ").concat(r.length," items."))));!I&&de(t)?(ue(r),(0,M.ZP)(e[zt](),2,40,". Response code "+t+". Will retry to send "+r[St]+" items.")):e[nn](r,i)}else oe(o),206===t?(u||(u=et(s)),u&&!I?e[rn](r,u):e[nn](r,i)):(n=0,e[on](r,a))}function oe(e){return!(c>=10||(0,$.hXl)(e)||""===e||e===v||(v=e,++c,0))}function ae(e,t){if(!f)return Q(z&&z[tn]([3],!0),e,t);f(e,!1)}function ie(e){try{if(e&&e[St])return(0,$.KgX)(e[0])}catch(e){}return null}function se(t,n){var r=null;if((0,$.cyL)(t)){for(var o=t[St],a=0;a<t[St];a++)o+=t[a].item[St];return z.getSyncFetchPayload()+o<=65e3?r=2:(0,H.Uf)()?r=3:(r=1,(0,M.ZP)(e[zt](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Q(z&&z[tn]([r],!0),t,n)}return null}function ue(t,r){if(void 0===r&&(r=1),t&&0!==t[St]){var a=e[Yt];a[Lt](t),n++;for(var i=0,s=t;i<s.length;i++){var u=s[i];u.cnt=u.cnt||0,u.cnt++,a[At](u)}!function(e){var t;if(n<=1)t=10;else{var r=(Math.pow(2,n)-1)/2,a=(0,$.ZrT)(Math.random()*r*10)+1;a*=e,t=(0,$.JBS)((0,$.rpU)(a,3600),10)}var i=(0,$.f0d)()+1e3*t;o=i}(r),le()}}function le(){if(!u&&!s){var t=o?(0,$.JBS)(0,o-(0,$.f0d)()):0,n=(0,$.JBS)(R,t);u=(0,$.dRz)((function(){u=null,e[Nt](!0,null,1)}),n)}}function ce(){u&&u.cancel(),u=null,o=null}function de(e){return(0,$.hXl)(q)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:q[St]&&q.indexOf(e)>-1}function ge(){e[jt]=null,e[Yt]=null,e._appId=null,e._sample=null,d={},p=null,n=0,o=null,s=!1,u=null,l=null,c=0,G=0,f=null,h=null,v=null,m=null,y=0,w=!1,S=null,T=!1,D=null,C=Pn,I=!1,A=null,x=Pn,O=!1,L=!1,N=!1,V=null,F=null,z=null,(0,$.vF1)(e,"_senderConfig",{g:function(){return(0,$e.CP)({},On)}})}ge(),e.pause=function(){ce(),s=!0},e.resume=function(){s&&(s=!1,o=null,ne(),le())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!s){ce();try{var o=e[Nt](t,null,r||1);return(0,nt.Dv)(o,(function(e){return n?(n(!e.rejected),!0):t?(0,nt.Qo)((function(t){t(!e.rejected)})):o}))}catch(t){(0,M.ZP)(e[zt](),1,22,"flush failed, telemetry will not be collected: "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}}},e.onunloadFlush=function(){if(!s)if(w||E)try{return e[Nt](!0,ae,2)}catch(t){(0,M.ZP)(e[zt](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}else e.flush(!1)},e.addHeader=function(e,t){d[e]=t},e[qt]=function(t,a,i,s){e.isInitialized()&&(0,M.ZP)(e[zt](),1,28,"Sender is already initialized"),r[qt](t,a,i,s);var u=e.identifier;l=new Rn(a.logger),n=0,o=null,e[jt]=null,c=0;var G=e[zt]();h=(0,Oe.Hm)((0,Le.Z)("Sender"),a.evtNamespace&&a.evtNamespace()),p=function(e){var t=(0,$.YEm)(),n=(0,$.w3n)(),r=!1,o=[],a=1;!n||(0,$.hXl)(n.onLine)||n.onLine||(a=2);var i=0,s=d(),u=(0,Oe.Hm)((0,Le.Z)("OfflineListener"),e);try{if(c((0,$.zkX)())&&(r=!0),t){var l=t.body||t;l.ononline&&c(l)&&(r=!0)}}catch(e){r=!1}function c(e){var t=!1;return e&&(t=(0,Oe.mB)(e,"online",f,u))&&(0,Oe.mB)(e,"offline",p,u),t}function d(){return 2!==i&&2!==a}function g(){var e=d();s!==e&&(s=e,(0,$.Iuo)(o,(function(e){var t={isOnline:s,rState:a,uState:i};try{e(t)}catch(e){}})))}function f(){a=1,g()}function p(){a=2,g()}return{isOnline:function(){return s},isListening:function(){return r},unload:function(){var e=(0,$.zkX)();if(e&&r){if(Ve(e,u),t){var n=t.body||t;(0,$.b07)(n.ononline)||Ve(n,u)}r=!1}},addListener:function(e){return o.push(e),{rm:function(){var t=o.indexOf(e);return t>-1?o.splice(t,1):void 0}}},setOnlineState:function(e){i=e,g()}}}(h),e._addHook((0,Je.a)(t,(function(t){var n,r=t.cfg;r.storagePrefix&&(n=r.storagePrefix,Ne=n||"");var o=(0,Xe.i8)(null,r,a).getExtCfg(u,On),i=o[Gt];if(v&&i===v){var s=r[Gt];s&&s!==i&&(o[Gt]=s)}var l=(0,$.zS2)("CompressionStream");j=(0,$e.G7)("zipPayload",r,!1),(0,$.Tnt)(l)||(j=!1);var c=o.corsPolicy;c?"same-origin"!==c&&"same-site"!==c&&"cross-origin"!==c||g.addHeader(Ln,c):delete d[Ln],(0,$.$XS)(o[Ut])&&(o[Ut]=r[Ut]),(0,$.vF1)(e,"_senderConfig",{g:function(){return o}}),m!==o[Gt]&&(v=m=o[Gt]),a.activeStatus()===Ze.f.PENDING?e.pause():a.activeStatus()===Ze.f.ACTIVE&&e.resume(),S&&S!==o[Wt]&&(0,$.Iuo)(S,(function(e){delete d[e.header]})),y=o[Bt],w=(!1===o[Jt]||!1===o[Xt])&&(0,H.Uf)(),b=!1===o[Jt]&&(0,H.Uf)(),_=!1===o[Xt]&&(0,H.Uf)(),E=o[Zt],O=!!o.disableXhr,q=o.retryCodes;var p=o[Vt],h=!!o[Kt]&&(!!p||je()),J=o.namePrefix,X=h!==A||h&&x!==J||h&&k!==p;if(e[Yt]){if(X)try{e[Yt]=e[Yt].createNew(G,o,h)}catch(t){(0,M.ZP)(e[zt](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}ne()}else e[Yt]=h?new In(G,o):new Dn(G,o);x=J,A=h,k=p,L=!o[Qt]&&(0,H.R7)(!0),N=!!o[en],e._sample=new xn(o.samplingPercentage,G),D=o[Ut],(0,$.$XS)(D)||function(e,t){var n=t.disableInstrumentationKeyValidation;return!((0,$.hXl)(n)||!n)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}(D,r)||(0,M.ZP)(G,1,100,"Invalid Instrumentation key "+D),S=o[Wt],(0,$.KgX)(v)&&!xe(v)&&S&&S[St]>0?(0,$.Iuo)(S,(function(e){g.addHeader(e.header,e.value)})):S=null,P=o.enableSendPromise;var Z=function(){try{return{enableSendPromise:P,isOneDs:!1,disableCredentials:!1,disableXhr:O,disableBeacon:!_,disableBeaconSync:!b,senderOnCompleteCallBack:{xdrOnComplete:function(e,t,n){var r=B(n);if(r)return U(e,r)},fetchOnComplete:function(e,t,n,r){var o=B(r);if(o)return re(e.status,o,e.url,o[St],e.statusText,n||"")},xhrOnComplete:function(e,t,n){var r=B(n);if(r)return W(e,r,r[St])},beaconOnRetry:function(t,n,r){return function(t,n,r){var o=t&&t.oriPayload;if(N)F&&F(o,!0),(0,M.ZP)(e[zt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var a=[],i=0;i<o[St];i++){var s=o[i],u=[s];r(ee(u),n)?e._onSuccess(u,u[St]):a[xt](s)}a[St]>0&&(F&&F(a,!0),(0,M.ZP)(e[zt](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,n,r)}}}}catch(e){}return null}();z?z.SetConfig(Z):(z=new Ke.v)[qt](Z,G);var K=o.httpXHROverride,Y=null,te=null,oe=(0,$e.jL)([3,1,2],o.transports);Y=z&&z[tn](oe,!1);var ae=z&&z.getFallbackInst();V=function(e,t){return Q(ae,e,t)},F=function(e,t){return Q(ae,e,t,!1)},Y=E?K:Y||K||ae,e[jt]=function(e,t){return Q(Y,e,t)},L&&(f=se);var ie=(0,$e.jL)([3,1],o.unloadTransports);L||(ie=ie.filter((function(e){return 2!==e}))),te=z&&z[tn](ie,!0),te=E?K:te||K,(E||o.unloadTransports||!f)&&te&&(f=function(e,t){return Q(te,e,t)}),f||(f=V),T=o.disableTelemetry,C=o.convertUndefined||Pn,I=o.isRetryDisabled,R=o.maxBatchInterval})))},e.processTelemetry=function(t,n){var r=(n=e._getTelCtx(n))[zt]();try{if(!J(t,r))return;var o=X(t,r);if(!o)return;var a=l.serialize(o),i=e[Yt];ne(a);var s={item:a,cnt:0};i[At](s),le()}catch(e){(0,M.ZP)(r,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,$e.lL)(e),{exception:(0,$.mmD)(e)})}e.processNext(t,n)},e.isCompletelyIdle=function(){return!s&&0===G&&0===e._buffer[kt]()},e.getOfflineListener=function(){return p},e._xhrReadyStateChange=function(e,t,n){if(!ie(t))return W(e,t,n)},e[Nt]=function(t,n,r){var o;if(void 0===t&&(t=!0),!s)try{var a=e[Yt];if(T)a[Et]();else{if(a[kt]()>0){var i=a.getItems();!function(t,n){var r=function(){var t,n="getNotifyMgr",r=e.core;return r&&(t=r[n]?r[n]():r._notificationManager),t}();if(r&&r.eventsSendRequest)try{r.eventsSendRequest(t,n)}catch(t){(0,M.ZP)(e[zt](),1,74,"send request notification failed: "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}}(r||0,t),o=n?n.call(e,i,t):e[jt](i,t)}new Date}ce()}catch(t){var u=(0,H.L0)();(!u||u>9)&&(0,M.ZP)(e[zt](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,$e.lL)(t),{exception:(0,$.mmD)(t)})}return o},e.getOfflineSupport=function(){return{getUrl:function(){return v},createPayload:Y,serialize:Z,batch:K,shouldProcess:function(e){return!!J(e)}}},e._doTeardown=function(t,n){e.onunloadFlush(),(0,Ye.K)(p,!1),ge()},e[nn]=function(t,n,r){if(!ie(t))return function(t,n){(0,M.ZP)(e[zt](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[Lt](t)}(t,n)},e[rn]=function(t,n){if(!ie(t))return function(t,n){for(var r=[],o=[],a=0,i=n.errors.reverse();a<i.length;a++){var s=i[a],u=t.splice(s.index,1)[0];de(s.statusCode)?o[xt](u):r[xt](u)}t[St]>0&&e[on](t,n[sn]),r[St]>0&&e[nn](r,(0,$e.r4)(null,["partial success",n[sn],"of",n.itemsReceived].join(" "))),o[St]>0&&(ue(o),(0,M.ZP)(e[zt](),2,40,"Partial success. Delivered: "+t[St]+", Failed: "+r[St]+". Will retry to send "+o[St]+" our of "+n[an]+" items"))}(t,n)},e[on]=function(t,n){if(!ie(t))return function(t){e._buffer&&e._buffer[Lt](t)}(t)},e._xdrOnLoad=function(e,t){if(!ie(t))return U(e,t)}})),g}return(0,o.qU)(t,e),t.constructEnvelope=function(e,t,n,r){var a;return a=t===e.iKey||(0,$.hXl)(t)?e:(0,o.Im)((0,o.Im)({},e),{iKey:t}),(Vn[a.baseType]||bn)(n,a,r)},t}(tt.s);function Mn(e){if(!e)return{};var t=e[d](";"),n=(0,$.KTd)(t,(function(e,t){var n=t[d]("=");if(2===n[g]){var r=n[0][f](),o=n[1];e[r]=o}return e}),{});if((0,$.cGk)(n)[g]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[p]=n[p]||"https://"+r+"dc."+n.endpointsuffix}n[p]=n[p]||u,(0,$.Cv9)(n[p],"/")&&(n[p]=n[p].slice(0,-1))}return n}var Hn,Fn,Nn=n(107),zn="instrumentationKey",qn="connectionString",jn="endpointUrl",Gn="userOverrideEndpointUrl",Un=void 0,Wn=((Hn={diagnosticLogInterval:(0,Be.Lx)((function(e){return e&&e>0}),1e4)})[qn]=Un,Hn.endpointUrl=Un,Hn[zn]=Un,Hn.featureOptIn=((Fn={}).zipPayload={mode:1},Fn),Hn.extensionConfig={},Hn),Bn=function(){function e(t){var n,o=new Nn._;function a(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),o.track(e)}((0,$.hXl)(t)||(0,$.hXl)(t[zn])&&(0,$.hXl)(t[qn]))&&(0,$.$8)("Invalid input configuration"),(0,r.A)(e,this,(function(e){function r(){var e=(0,Je.e)(t||{},Wn);n=e.cfg,o.addUnloadHook((0,Je.a)(e,(function(){var e=n[qn];if((0,$.$XS)(e)){var t=(0,nt.Rf)((function(t,r){(0,nt.Dv)(e,(function(e){var r=e.value,o=n[zn];!e.rejected&&r&&(n[qn]=r,o=Mn(r).instrumentationkey||o),t(o)}))})),r=(0,nt.Rf)((function(t,r){(0,nt.Dv)(e,(function(e){var r=e.value,o=n[jn];if(!e.rejected&&r){var a=Mn(r).ingestionendpoint;o=a?a+l:o}t(o)}))}));n[zn]=t,n[jn]=n[Gn]||r}if((0,$.KgX)(e)){var o=Mn(e),a=o.ingestionendpoint;n[jn]=n[Gn]?n[Gn]:a+l,n[zn]=o.instrumentationkey||n[zn]}n[jn]=n[Gn]?n[Gn]:n[jn]}))),o.initialize(n,[new $n])}(0,$.vF1)(e,"config",{g:function(){return n}}),r(),e.initialize=r,e.track=a,(0,$e.o$)(e,o,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"])}))}return e.__ieDyn=1,e}()},3673:(e,t,n)=>{"use strict";n.d(t,{CP:()=>_,G7:()=>S,Gh:()=>c,H$:()=>x,HU:()=>D,Ju:()=>g,KY:()=>h,Lo:()=>T,RF:()=>m,SZ:()=>w,_u:()=>f,c2:()=>v,cH:()=>d,hW:()=>b,jL:()=>I,lL:()=>p,o$:()=>y,r4:()=>C,w3:()=>V});var r=n(5664),o=n(269),a=n(6182),i=n(6492),s=/-([a-z])/g,u=/([^\w\d_$])/g,l=/^(\d+[\w\d_$])/;function c(e){return!(0,o.hXl)(e)}function d(e){var t=e;return t&&(0,o.KgX)(t)&&(t=(t=(t=t[a.W7](s,(function(e,t){return t.toUpperCase()})))[a.W7](u,"_"))[a.W7](l,(function(e,t){return"_"+t}))),t}function g(e,t){return!(!e||!t)&&-1!==(0,o.HzD)(e,t)}function f(e){return e&&e.toISOString()||""}function p(e){return(0,o.bJ7)(e)?e[a.RS]:i.m5}function h(e,t,n,r,o){var a=n;return e&&((a=e[t])===n||o&&!o(a)||r&&!r(n)||(a=n,e[t]=a)),a}function v(e,t,n){var r;return e?!(r=e[t])&&(0,o.hXl)(r)&&(r=(0,o.b07)(n)?{}:n,e[t]=r):r=(0,o.b07)(n)?{}:n,r}function m(e,t,n,r,i){e&&t&&n&&(!1!==i||(0,o.b07)(e[t]))&&(e[t]=function(e,t){var n=null,r=null;return(0,o.Tnt)(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][a.y9](r,e)}}(n,r))}function y(e,t,n,r){return e&&t&&(0,o.Gvm)(e)&&(0,o.cyL)(n)&&(0,o.Iuo)(n,(function(n){(0,o.KgX)(n)&&m(e,n,t,n,r)})),e}function w(e){return function(){var t=this;e&&(0,o.zav)(e,(function(e,n){t[e]=n}))}}function b(e){return e&&o.vE3&&(e=(0,r.s6)((0,o.vE3)({},e))),e}function _(e,t,n,r,i,s){var u=arguments,l=u[0]||{},c=u[a.oI],d=!1,g=1;for(c>0&&(0,o.Lmq)(l)&&(d=l,l=u[g]||{},g++),(0,o.Gvm)(l)||(l={});g<c;g++){var f=u[g],p=(0,o.cyL)(f),h=(0,o.Gvm)(f);for(var v in f)if(p&&v in f||h&&(0,o.KhI)(f,v)){var m=f[v],y=void 0;if(d&&m&&((y=(0,o.cyL)(m))||(0,o.QdQ)(m))){var w=l[v];y?(0,o.cyL)(w)||(w=[]):(0,o.QdQ)(w)||(w={}),m=_(d,w,m)}void 0!==m&&(l[v]=m)}}return l}function S(e,t,n){var r=t&&t.featureOptIn&&t.featureOptIn[e];if(e&&r){var o=r.mode;if(3===o)return!0;if(2===o)return!1}return n}function T(e){try{return e.responseText}catch(e){}return null}function D(e,t){return e?"XDomainRequest,Response:"+T(e)||0:t}function C(e,t){return e?"XMLHttpRequest,Status:"+e[a.cV]+",Response:"+T(e)||0:t}function I(e,t){return t&&((0,o.EtT)(t)?e=[t].concat(e):(0,o.cyL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var R="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",A="withCredentials",k="timeout";function x(e,t,n,r,o,a){function i(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===o&&(o=!1);var s=new XMLHttpRequest;return r&&i(s,R,r),n&&i(s,A,n),s.open(e,t,!o),n&&i(s,A,n),!o&&a&&i(s,k,a),s}function P(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var r=t.getResponseHeader(n);r&&(e[n]=(0,o.EHq)(r))}return e}var E="kill-duration",O="kill-duration-seconds",L="time-delta-millis";function V(e,t){var n={};return e[a.wJ]?n=function(e){var t={};if((0,o.KgX)(e)){var n=(0,o.EHq)(e)[a.sY](/[\r\n]+/);(0,o.Iuo)(n,(function(e){if(e){var n=e[a.Sj](": ");if(-1!==n){var r=(0,o.EHq)(e.substring(0,n))[a.OL](),i=(0,o.EHq)(e[a.Re](n+1));t[r]=i}else t[(0,o.EHq)(e)]=1}}))}return t}(e[a.wJ]()):t&&(n=P(n,e,L),n=P(n,e,E),n=P(n,e,O)),n}},3720:(e,t,n)=>{"use strict";async function*r(e,t=!0){for(const n of e)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let e=n.byteOffset;const t=n.byteOffset+n.byteLength;for(;e!==t;){const r=Math.min(t-e,65536),o=n.buffer.slice(e,e+r);e+=o.byteLength,yield new Uint8Array(o)}}else yield n;else{let e=0,t=n;for(;e!==t.size;){const n=t.slice(e,Math.min(t.size,e+65536)),r=await n.arrayBuffer();e+=r.byteLength,yield new Uint8Array(r)}}}n.d(t,{A:()=>a}),n(3328);const o=class e{#e=[];#t="";#n=0;#r="transparent";constructor(t=[],n={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===n&&(n={});const r=new TextEncoder;for(const n of t){let t;t=ArrayBuffer.isView(n)?new Uint8Array(n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)):n instanceof ArrayBuffer?new Uint8Array(n.slice(0)):n instanceof e?n:r.encode(`${n}`),this.#n+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#e.push(t)}this.#r=`${void 0===n.endings?"transparent":n.endings}`;const o=void 0===n.type?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#n}get type(){return this.#t}async text(){const e=new TextDecoder;let t="";for await(const n of r(this.#e,!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const n of r(this.#e,!1))e.set(n,t),t+=n.length;return e.buffer}stream(){const e=r(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(t=0,n=this.size,r=""){const{size:o}=this;let a=t<0?Math.max(o+t,0):Math.min(t,o),i=n<0?Math.max(o+n,0):Math.min(n,o);const s=Math.max(i-a,0),u=this.#e,l=[];let c=0;for(const e of u){if(c>=s)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(a&&t<=a)a-=t,i-=t;else{let n;ArrayBuffer.isView(e)?(n=e.subarray(a,Math.min(t,i)),c+=n.byteLength):(n=e.slice(a,Math.min(t,i)),c+=n.size),i-=t,l.push(n),a=0}}const d=new e([],{type:String(r).toLowerCase()});return d.#n=s,d.#e=l,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(o.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const a=o},3775:(e,t,n)=>{"use strict";n.d(t,{OG:()=>_,WD:()=>v,ZP:()=>b,wq:()=>y,y0:()=>m});var r,o=n(8279),a=n(269),i=n(6987),s=n(6182),u=n(7867),l=n(7292),c=n(6492),d="warnToConsole",g={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((r={})[0]=null,r[1]="errorToConsole",r[2]=d,r[3]="debugToConsole",r);function p(e){return e?'"'+e[s.W7](/\"/g,c.m5)+'"':c.m5}function h(e,t){var n=(0,l.U5)();if(n){var r="log";n[e]&&(r=e),(0,a.Tnt)(n[r])&&n[r](t)}}var v=function(){function e(e,t,n,r){void 0===n&&(n=!1);var o=this;o[s.JR]=e,o[s.pM]=(n?"AI: ":"AI (Internal): ")+e;var a=c.m5;(0,l.Z)()&&(a=(0,l.hm)().stringify(r));var i=(t?" message:"+p(t):c.m5)+(r?" props:"+p(a):c.m5);o[s.pM]+=i}return e.dataType="MessageData",e}();function m(e,t){return(e||{})[s.Uw]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,l,c,p,m=0,y={};(0,o.A)(e,this,(function(e){function o(t,n){if(!(m>=l)){var o=!0,a="AITR_"+n[s.JR];if(y[a]?o=!1:y[a]=!0,o&&(t<=r&&(e.queue[s.y5](n),m++,w(1===t?"error":"warn",n)),m===l)){var i="Internal events throttle limit per PageView reached for this app.",u=new v(23,i,!1);e.queue[s.y5](u),1===t?e.errorToConsole(i):e[s.on](i)}}}function w(e,n){var r=(0,u.$)(t||{});r&&r[s.e4]&&r[s.e4](e,n)}p=function(t){return(0,i.a)((0,i.e)(t,g,e).cfg,(function(e){var t=e.cfg;n=t[s.Bl],r=t.loggingLevelTelemetry,l=t.maxMessageLimit,c=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return n},e[s.ih]=function(t,r,i,u,l){void 0===l&&(l=!1);var g=new v(r,i,l,u);if(c)throw(0,a.mmD)(g);var p=f[t]||d;if((0,a.b07)(g[s.pM]))w("throw"+(1===t?"Critical":"Warning"),g);else{if(l){var h=+g[s.JR];!y[h]&&n>=t&&(e[p](g[s.pM]),y[h]=!0)}else n>=t&&e[p](g[s.pM]);o(t,g)}},e.debugToConsole=function(e){h("debug",e),w("warning",e)},e[s.on]=function(e){h("warn",e),w("warning",e)},e.errorToConsole=function(e){h("error",e),w("error",e)},e.resetInternalMessageCount=function(){m=0,y={}},e.logInternalMessage=o,e[s.tI]=function(e){p&&p.rm(),p=null}}))}return e.__ieDyn=1,e}();function w(e){return e||new y}function b(e,t,n,r,o,a){void 0===a&&(a=!1),w(e)[s.ih](t,n,r,o,a)}function _(e,t){w(e)[s.on](t)}},3842:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToServerHealthViewTool=void 0;const r=n(1398),o=n(2636),a=n(702),i=n(6967);t.GoToServerHealthViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Server Health View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToServerHealthViewTool.invoke");try{return o.Session.Current.Api?(a.ServerHealthView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Server Health View - showing Airflow server health status, scheduler status, and metadata database status")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToServerHealthViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Server Health View: ${e instanceof Error?e.message:String(e)}`)])}}}},4013:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,k:()=>s});var r=n(8205),o=n(269),a=n(6182);function i(e,t){if(e&&e[a.tI])return e[a.tI](t)}function s(e,t,n){var a;return n||(a=(0,r.Qo)((function(e){n=e}))),e&&(0,o.R3R)(e)>0?(0,r.Dv)(i(e[0],t),(function(){s((0,o.KVm)(e,1),t,n)})):n(),a}},4282:(e,t,n)=>{"use strict";n.d(t,{H:()=>o,o:()=>a});var r=n(269),o=r.WSA,a=r.fn0},4681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDagSourceCodeTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.GetDagSourceCodeTool=class{constructor(e){this.airflowClient=e}async invoke(e,t){const{dagId:n}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("GetDagSourceCodeTool.invoke");try{const e=await this.airflowClient.getDagSourceCode(n),t=`## DAG Source Code: ${n}\n\n\`\`\`python\n${e}\n\`\`\`\n\n**Total Lines:** ${e.split("\n").length}\n\nThe source code has been retrieved successfully. You can analyze it for:\n- DAG structure and task dependencies\n- Operator configurations\n- Schedule and retry settings\n- Custom logic and parameters\n- Potential issues or improvements\n`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){const t=`Failed to retrieve source code for DAG '${n}': ${e instanceof Error?e.message:String(e)}`;return a.Telemetry.Current.sendError("GetDagSourceCodeTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}async prepareInvocation(e,t){return{invocationMessage:`Retrieving source code for DAG '${e.input.dagId}'...`}}}},4685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDagRunDetailTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.GetDagRunDetailTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n,dagRunId:r}=e.input;return{invocationMessage:`Analyzing DAG run '${r}' for DAG '${n}'...`}}async invoke(e,t){const{dagId:n,dagRunId:i}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("GetDagRunDetailTool.invoke");try{const e=await this.client.getTaskInstances(n,i);if(!e||0===e.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No task instances found for DAG run '${i}' in DAG '${n}'.`)]);let t="N/A";try{t=await this.client.getDagSource(n)}catch(e){t=`Failed to retrieve source code: ${e instanceof Error?e.message:String(e)}`}const o=[],a=[...e].sort(((e,t)=>{const n=["failed","upstream_failed"],r=n.includes(e.state),o=n.includes(t.state);return r&&!o?-1:!r&&o?1:0})).slice(0,5);for(const e of a)try{const t=await this.client.getTaskLog(n,i,e.task_id,e.try_number?.toString()||"1");o.push({task_id:e.task_id,state:e.state,log:t})}catch(t){o.push({task_id:e.task_id,state:e.state,log:`Failed to retrieve log: ${t instanceof Error?t.message:String(t)}`})}const s={dag_id:n,dag_run_id:i,state:this.deriveDagRunState(e),execution_date:e[0]?.execution_date||"N/A",logical_date:e[0]?.execution_date||"N/A",start_date:this.getEarliestStartDate(e),end_date:this.getLatestEndDate(e)};let u=this.buildAnalysisReport(n,s,e,t,o);return new r.LanguageModelToolResult([new r.LanguageModelTextPart(u)])}catch(e){const t=`\nâŒ Failed to analyze DAG run\n\n**Error:** ${e instanceof Error?e.message:String(e)}\n\nPlease check:\n- The DAG ID is correct\n- The DAG run ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();return a.Telemetry.Current.sendError("GetDagRunDetailTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}deriveDagRunState(e){return e.some((e=>"failed"===e.state))?"failed":e.some((e=>"running"===e.state))?"running":e.some((e=>"queued"===e.state))?"queued":e.every((e=>"success"===e.state))?"success":"unknown"}getEarliestStartDate(e){const t=e.filter((e=>e.start_date)).map((e=>new Date(e.start_date).getTime()));if(0===t.length)return;const n=Math.min(...t);return new Date(n).toISOString()}getLatestEndDate(e){const t=e.filter((e=>e.end_date)).map((e=>new Date(e.end_date).getTime()));if(0===t.length)return;const n=Math.max(...t);return new Date(n).toISOString()}buildAnalysisReport(e,t,n,r,o){let a="# ðŸ” Comprehensive DAG Run Analysis\n\n";if(a+=`## DAG: ${e}\n\n`,a+="---\n\n",a+="## ðŸ“Š DAG Run Overview\n\n",a+=`- **Run ID:** \`${t.dag_run_id}\`\n`,a+=`- **State:** ${this.getStatusEmoji(t.state)} **${t.state}**\n`,a+=`- **Execution Date:** ${t.execution_date}\n`,a+=`- **Logical Date:** ${t.logical_date}\n`,t.start_date&&(a+=`- **Start Date:** ${t.start_date}\n`),t.end_date){a+=`- **End Date:** ${t.end_date}\n`;const e=new Date(t.start_date),n=new Date(t.end_date).getTime()-e.getTime(),r=Math.floor(n/1e3),o=Math.floor(r/60);a+=`- **Duration:** ${o}m ${r%60}s\n`}a+="\n---\n\n",a+=`## ðŸ“‹ Task Instances (${n.length} tasks)\n\n`;const i={};n.forEach((e=>{const t=e.state||"unknown";i[t]||(i[t]=[]),i[t].push(e)}));for(const[e,t]of Object.entries(i))a+=`### ${this.getStatusEmoji(e)} ${e} (${t.length})\n`,t.forEach((e=>{a+=`- **${e.task_id}**`,e.duration&&(a+=` - Duration: ${Math.round(e.duration)}s`),e.start_date&&(a+=` - Started: ${e.start_date}`),a+="\n"})),a+="\n";return a+="---\n\n",o.length>0&&(a+=`## ðŸ“ Task Logs (Top ${o.length} tasks)\n\n`,o.forEach(((e,t)=>{a+=`### ${t+1}. Task: ${e.task_id} (${this.getStatusEmoji(e.state)} ${e.state})\n\n`,a+=`\`\`\`\n${e.log}\n\`\`\`\n\n`})),a+="---\n\n"),a+="## ðŸ’» DAG Source Code\n\n",a+=`\`\`\`python\n${r}\n\`\`\`\n\n`,a+="---\n\n",a+="## ðŸ“¦ Raw Data (JSON)\n\n",a+=`### DAG Run\n\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n\n`,a+=`### Task Instances\n\`\`\`json\n${JSON.stringify(n,null,2)}\n\`\`\`\n\n`,a+="---\n\n",a+="## ðŸ¤– Analysis Request\n\n",a+="Please analyze the above information and provide:\n",a+="1. **Summary of Execution:** What happened during this DAG run?\n",a+="2. **Issues Identified:** What errors or problems occurred?\n",a+="3. **Root Cause Analysis:** What likely caused any failures?\n",a+="4. **Recommendations:** How can these issues be resolved?\n",a+="5. **Code Review:** Any issues in the DAG code that need attention?\n",a}getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",up_for_retry:"ðŸ”„",up_for_reschedule:"ðŸ“…",removed:"ðŸ—‘ï¸",scheduled:"ðŸ“†",none:"âšª",unknown:"â“"}[e?.toLowerCase()]||"â“"}}},4740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyseDagLatestRunTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.AnalyseDagLatestRunTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n}=e.input;return{invocationMessage:`Analyzing latest run for DAG '${n}'...`}}async invoke(e,t){const{dagId:n}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("AnalyseDagLatestRunTool.invoke");try{const e=await this.client.getLatestDagRun(n);if(!e)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No DAG run found for '${n}'.`)]);const t=await this.client.getTaskInstances(n,e.dag_run_id);let o="N/A";try{o=await this.client.getDagSource(n)}catch(e){o=`Failed to retrieve source code: ${e instanceof Error?e.message:String(e)}`}const a=[],i=[...t].sort(((e,t)=>{const n=["failed","upstream_failed"],r=n.includes(e.state),o=n.includes(t.state);return r&&!o?-1:!r&&o?1:0})).slice(0,5);for(const t of i)try{const r=await this.client.getTaskLog(n,e.dag_run_id,t.task_id,t.try_number?.toString()||"1");a.push({task_id:t.task_id,state:t.state,log:r})}catch(e){a.push({task_id:t.task_id,state:t.state,log:`Failed to retrieve log: ${e instanceof Error?e.message:String(e)}`})}let s=this.buildAnalysisReport(n,e,t,o,a);return new r.LanguageModelToolResult([new r.LanguageModelTextPart(s)])}catch(e){const t=`\nâŒ Failed to analyze DAG run\n\n**Error:** ${e instanceof Error?e.message:String(e)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();return a.Telemetry.Current.sendError("AnalyseDagLatestRunTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}buildAnalysisReport(e,t,n,r,o){let a="# ðŸ” Comprehensive DAG Run Analysis\n\n";if(a+=`## DAG: ${e}\n\n`,a+="---\n\n",a+="## ðŸ“Š DAG Run Overview\n\n",a+=`- **Run ID:** \`${t.dag_run_id}\`\n`,a+=`- **State:** ${this.getStatusEmoji(t.state)} **${t.state}**\n`,a+=`- **Execution Date:** ${t.execution_date}\n`,a+=`- **Logical Date:** ${t.logical_date}\n`,t.start_date&&(a+=`- **Start Date:** ${t.start_date}\n`),t.end_date){a+=`- **End Date:** ${t.end_date}\n`;const e=new Date(t.start_date),n=new Date(t.end_date).getTime()-e.getTime(),r=Math.floor(n/1e3),o=Math.floor(r/60);a+=`- **Duration:** ${o}m ${r%60}s\n`}a+="\n---\n\n",a+=`## ðŸ“‹ Task Instances (${n.length} tasks)\n\n`;const i={};n.forEach((e=>{const t=e.state||"unknown";i[t]||(i[t]=[]),i[t].push(e)}));for(const[e,t]of Object.entries(i))a+=`### ${this.getStatusEmoji(e)} ${e} (${t.length})\n`,t.forEach((e=>{a+=`- **${e.task_id}**`,e.duration&&(a+=` - Duration: ${Math.round(e.duration)}s`),e.start_date&&(a+=` - Started: ${e.start_date}`),a+="\n"})),a+="\n";return a+="---\n\n",o.length>0&&(a+=`## ðŸ“ Task Logs (Top ${o.length} tasks)\n\n`,o.forEach(((e,t)=>{a+=`### ${t+1}. Task: ${e.task_id} (${this.getStatusEmoji(e.state)} ${e.state})\n\n`,a+=`\`\`\`\n${e.log}\n\`\`\`\n\n`})),a+="---\n\n"),a+="## ðŸ’» DAG Source Code\n\n",a+=`\`\`\`python\n${r}\n\`\`\`\n\n`,a+="---\n\n",a+="## ðŸ“¦ Raw Data (JSON)\n\n",a+=`### DAG Run\n\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n\n`,a+=`### Task Instances\n\`\`\`json\n${JSON.stringify(n,null,2)}\n\`\`\`\n\n`,a+="---\n\n",a+="## ðŸ¤– Analysis Request\n\n",a+="Please analyze the above information and provide:\n",a+="1. **Summary of Execution:** What happened during this DAG run?\n",a+="2. **Issues Identified:** What errors or problems occurred?\n",a+="3. **Root Cause Analysis:** What likely caused any failures?\n",a+="4. **Recommendations:** How can these issues be resolved?\n",a+="5. **Code Review:** Any issues in the DAG code that need attention?\n",a}getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",up_for_retry:"ðŸ”„",up_for_reschedule:"ðŸ“…",removed:"ðŸ—‘ï¸",scheduled:"ðŸ“†",none:"âšª",unknown:"â“"}[e?.toLowerCase()]||"â“"}}},4820:(e,t,n)=>{"use strict";n.d(t,{AppInsightsCore:()=>p});var r=n(659),o=n(8279),a=n(269),i=n(8156),s=n(6987),u=n(3775),l=n(107),c=n(937),d=n(4822),g=n(1739),f=(0,a.ZHX)({endpointUrl:c.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,a.$8)("Invalid property storage override passed."),!0}}}),p=function(e){function t(){var n=e.call(this)||this;return(0,o.A)(t,n,(function(e,t){e[g.mE]=function(n,r,o,l){(0,i.r2)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[g.mE]((0,s.e)(n,f,o||e.logger,!1).cfg,r,o,l)}catch(t){var i=e.logger,c=(0,a.mmD)(t);-1!==c[g.Sj]("channels")&&(c+="\n - Channels must be provided through config.channels only!"),(0,u.ZP)(i,1,514,"SDK Initialization Failed - no telemetry will be sent: "+c)}}),(function(){return{config:n,extensions:r,logger:o,notificationManager:l}}))},e.track=function(n){(0,i.r2)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r[g.dg]=r[g.dg]||{},r[g.dg].trackStart=(0,d.WB)(),(0,d.Hh)(r.latency)||(r.latency=1);var o=r.ext=r.ext||{};o.sdk=o.sdk||{},o.sdk.ver=d.xE;var a=r.baseData=r.baseData||{};a[c._0]=a[c._0]||{};var i=a[c._0];i[c.hj]=i[c.hj]||e.pluginVersionString||c.m5}t.track(r)}),(function(){return{item:n}}),!n.sync)},e[g.h4]=function(e){return t[g.h4](e||"InternalLog")}})),n}return(0,r.qU)(t,e),t.__ieDyn=1,t}(l._)},4822:(e,t,n)=>{"use strict";n.d(t,{EO:()=>g,F2:()=>b,Go:()=>h,Hh:()=>f,TC:()=>p,WB:()=>m,X$:()=>v,ei:()=>_,u9:()=>y,xE:()=>u,yD:()=>d});var r,o=n(269),a=n(5664),i=n(937),s=n(1739),u="1DS-Web-JS-4.3.11",l=a.Wy.hasOwnProperty,c=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r);function d(e){return!(e===i.m5||(0,o.hXl)(e))}function g(e){if(e){var t=(0,o.HzD)(e,"-");if(t>-1)return(0,o.ZWZ)(e,t)}return i.m5}function f(e){return!!(e&&(0,o.EtT)(e)&&e>=1&&e<=4)}function p(e,t,n){if(!t&&!d(t)||"string"!=typeof e)return null;var r,a=typeof t;if("string"===a||"number"===a||"boolean"===a||(0,o.cyL)(t))t={value:t};else if("object"!==a||l.call(t,"value")){if((0,o.hXl)(t[s.pF])||t[s.pF]===i.m5||!(0,o.KgX)(t[s.pF])&&!(0,o.EtT)(t[s.pF])&&!(0,o.Lmq)(t[s.pF])&&!(0,o.cyL)(t[s.pF]))return null}else t={value:n?JSON.stringify(t):t};if((0,o.cyL)(t[s.pF])&&!(t[s.pF][s.oI]>0))return null;if(!(0,o.hXl)(t.kind)){if((0,o.cyL)(t[s.pF])||!(0===(r=t.kind)||r>0&&r<=13||32===r))return null;t[s.pF]=t[s.pF].toString()}return t}function h(e,t,n){var r=-1;if(!(0,o.b07)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var a=c[w(e)]||-1;-1!==r&&-1!==a?r|=a:6===a&&(r=a)}return r}function v(e,t,n,r,a){var i={},u=!1,l=0,c=arguments[s.oI],d=arguments;for((0,o.Lmq)(d[0])&&(u=d[0],l++);l<c;l++)e=d[l],(0,o.zav)(e,(function(e,t){u&&t&&(0,o.Gvm)(t)?(0,o.cyL)(t)?(i[e]=i[e]||[],(0,o.Iuo)(t,(function(t,n){t&&(0,o.Gvm)(t)?i[e][n]=v(!0,i[e][n],t):i[e][n]=t}))):i[e]=v(!0,i[e],t):i[e]=t}));return i}(0,o.Wtk)(),(0,o.Vdv)();var m=o.UUD;function y(e,t){var n=e;n[s.dg]=n[s.dg]||{},n[s.dg][s.Jg]=n[s.dg][s.Jg]||{},n[s.dg][s.Jg][t]=m()}function w(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===a._1&&(t=4,(0,o.cyL)(e)?(t=4096,e[s.oI]>0&&(t|=w(e[0]))):l.call(e,"value")&&(t=8192|w(e[s.pF])))}return t}function b(){return!!(0,o.zS2)("chrome")}function _(e){return e>0}},4875:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r=(0,n(4282).H)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},4876:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToVariablesViewTool=void 0;const r=n(1398),o=n(2636),a=n(8404),i=n(6967);t.GoToVariablesViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Variables View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToVariablesViewTool.invoke");try{return o.Session.Current.Api?(a.VariablesView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Variables View - showing Airflow variables (key-value configuration settings)")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToVariablesViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Variables View: ${e instanceof Error?e.message:String(e)}`)])}}}},4976:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerDagRunTool=void 0;const r=n(1398),o=n(9896),a=n(5617),i=n(6967);t.TriggerDagRunTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n,configJson:a,date:i}=e.input;let s=a||"{}",u="Inline";if(a&&!a.trim().startsWith("{"))try{const e=a.replace(/^['"]|['"]$/g,"");o.existsSync(e)&&(s=o.readFileSync(e,"utf8"),u=`File: ${e}`)}catch(e){console.warn(`Failed to read config file: ${e}`)}try{JSON.parse(s)}catch(e){throw new Error(`Invalid JSON configuration: ${e instanceof Error?e.message:String(e)}`)}const l=new r.MarkdownString;return l.isTrusted=!0,l.appendMarkdown("## âš ï¸ Trigger DAG Confirmation\n\n"),l.appendMarkdown("You are about to trigger the following DAG:\n\n"),l.appendMarkdown(`**DAG ID:** \`${n}\`\n`),i&&l.appendMarkdown(`**Logical Date:** \`${i}\`\n`),l.appendMarkdown(`**Config Source:** ${u}\n\n`),l.appendMarkdown("**Configuration Payload:**\n"),l.appendCodeblock(s,"json"),l.appendMarkdown("\nDo you want to proceed?"),{invocationMessage:`Triggering DAG: ${n}`,confirmationMessages:{title:"Confirm DAG Trigger",message:l}}}async invoke(e,t){const{dagId:n,configJson:s,date:u}=e.input;a.AIHandler.Current.currentDagId=n,i.Telemetry.Current.send("TriggerDagRunTool.invoke");try{let e=s||"{}";if(s&&!s.trim().startsWith("{"))try{const t=s.replace(/^['"]|['"]$/g,"");o.existsSync(t)&&(e=o.readFileSync(t,"utf8"))}catch(e){}const t=await this.client.triggerDagRun(n,e,u),a=["âœ… **Success!** DAG Run triggered.","",`- **DAG ID:** ${t.dag_id}`,`- **Run ID:** ${t.dag_run_id}`,`- **State:** ${t.state}`,`- **Logical Date:** ${t.logical_date}`,u?`- **Requested Date:** ${u}`:""].filter(Boolean).join("\n");return new r.LanguageModelToolResult([new r.LanguageModelTextPart(a)])}catch(e){return i.Telemetry.Current.sendError("TriggerDagRunTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to trigger DAG ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},5010:function(e,t){var n;n=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function n(){}const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function o(e){return"object"==typeof e&&null!==e||"function"==typeof e}const a=n,i=Promise,s=Promise.prototype.then,u=Promise.resolve.bind(i),l=Promise.reject.bind(i);function c(e){return new i(e)}function d(e){return u(e)}function g(e){return l(e)}function f(e,t,n){return s.call(e,t,n)}function p(e,t,n){f(f(e,t,n),void 0,a)}function h(e,t){p(e,t)}function v(e,t){p(e,void 0,t)}function m(e,t,n){return f(e,t,n)}function y(e){f(e,void 0,a)}const w=(()=>{const e=r&&r.queueMicrotask;if("function"==typeof e)return e;const t=d(void 0);return e=>f(t,e)})();function b(e,t,n){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function _(e,t,n){try{return d(b(e,t,n))}catch(e){return g(e)}}class S{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let n=t;16383===t._elements.length&&(n={_elements:[],_next:void 0}),t._elements.push(e),n!==t&&(this._back=n,t._next=n),++this._size}shift(){const e=this._front;let t=e;const n=this._cursor;let r=n+1;const o=e._elements,a=o[n];return 16384===r&&(t=e._next,r=0),--this._size,this._cursor=r,e!==t&&(this._front=t),o[n]=void 0,a}forEach(e){let t=this._cursor,n=this._front,r=n._elements;for(;!(t===r.length&&void 0===n._next||t===r.length&&(n=n._next,r=n._elements,t=0,0===r.length));)e(r[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function T(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?R(e):"closed"===t._state?function(e){R(e),x(e)}(e):A(e,t._storedError)}function D(e,t){return _n(e._ownerReadableStream,t)}function C(e){"readable"===e._ownerReadableStream._state?k(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e){A(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function I(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function R(e){e._closedPromise=c(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n}))}function A(e,t){R(e),k(e,t)}function k(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function x(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const P=t("[[AbortSteps]]"),E=t("[[ErrorSteps]]"),O=t("[[CancelSteps]]"),L=t("[[PullSteps]]"),V=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},$=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function M(e,t){if(void 0!==e&&"object"!=typeof(n=e)&&"function"!=typeof n)throw new TypeError(`${t} is not an object.`);var n}function H(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function F(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function N(e,t,n){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${n}'.`)}function z(e,t,n){if(void 0===e)throw new TypeError(`${t} is required in '${n}'.`)}function q(e){return Number(e)}function j(e){return 0===e?0:e}function G(e,t){const n=Number.MAX_SAFE_INTEGER;let r=Number(e);if(r=j(r),!V(r))throw new TypeError(`${t} is not a finite number`);if(r=function(e){return j($(e))}(r),r<0||r>n)throw new TypeError(`${t} is outside the accepted range of 0 to ${n}, inclusive`);return V(r)&&0!==r?r:0}function U(e,t){if(!wn(e))throw new TypeError(`${t} is not a ReadableStream.`)}function W(e){return new K(e)}function B(e,t){e._reader._readRequests.push(t)}function J(e,t,n){const r=e._reader._readRequests.shift();n?r._closeSteps():r._chunkSteps(t)}function X(e){return e._reader._readRequests.length}function Z(e){const t=e._reader;return void 0!==t&&!!Y(t)}class K{constructor(e){if(N(e,1,"ReadableStreamDefaultReader"),U(e,"First parameter"),bn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");T(this,e),this._readRequests=new S}get closed(){return Y(this)?this._closedPromise:g(ee("closed"))}cancel(e=void 0){return Y(this)?void 0===this._ownerReadableStream?g(I("cancel")):D(this,e):g(ee("cancel"))}read(){if(!Y(this))return g(ee("read"));if(void 0===this._ownerReadableStream)return g(I("read from"));let e,t;const n=c(((n,r)=>{e=n,t=r}));return Q(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),n}releaseLock(){if(!Y(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");C(this)}}}function Y(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof K}function Q(e,t){const n=e._ownerReadableStream;n._disturbed=!0,"closed"===n._state?t._closeSteps():"errored"===n._state?t._errorSteps(n._storedError):n._readableStreamController[L](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(K.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(K.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class ne{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?m(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?m(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return g(I("iterate"));let t,n;const r=c(((e,r)=>{t=e,n=r}));return Q(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,w((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,C(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,C(e),n(t)}}),r}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return g(I("finish iterating"));if(!this._preventCancel){const n=D(t,e);return C(t),m(n,(()=>({value:e,done:!0})))}return C(t),d({value:e,done:!0})}}const re={next(){return oe(this)?this._asyncIteratorImpl.next():g(ae("next"))},return(e){return oe(this)?this._asyncIteratorImpl.return(e):g(ae("return"))}};function oe(e){if(!o(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ne}catch(e){return!1}}function ae(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(re,te);const ie=Number.isNaN||function(e){return e!=e};function se(e){return e.slice()}function ue(e,t,n,r,o){new Uint8Array(e).set(new Uint8Array(n,r,o),t)}function le(e,t,n){if(e.slice)return e.slice(t,n);const r=n-t,o=new ArrayBuffer(r);return ue(o,0,e,t,r),o}function ce(e){const t=le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function de(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ge(e,t,n){if("number"!=typeof(r=n)||ie(r)||r<0||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var r;e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function fe(e){e._queue=new S,e._queueTotalSize=0}class pe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!me(this))throw Fe("view");return this._view}respond(e){if(!me(this))throw Fe("respond");if(N(e,1,"respond"),e=G(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,$e(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!me(this))throw Fe("respondWithNewView");if(N(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,Me(this._associatedReadableByteStreamController,e)}}Object.defineProperties(pe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(pe.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class he{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ve(this))throw Ne("byobRequest");return Le(this)}get desiredSize(){if(!ve(this))throw Ne("desiredSize");return Ve(this)}close(){if(!ve(this))throw Ne("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Pe(this)}enqueue(e){if(!ve(this))throw Ne("enqueue");if(N(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Ee(this,e)}error(e=void 0){if(!ve(this))throw Ne("error");Oe(this,e)}[O](e){we(this),fe(this);const t=this._cancelAlgorithm(e);return xe(this),t}[L](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Ce(this);const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(n)}const n=this._autoAllocateChunkSize;if(void 0!==n){let t;try{t=new ArrayBuffer(n)}catch(t){return void e._errorSteps(t)}const r={buffer:t,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(r)}B(t,e),ye(this)}}function ve(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof he}function me(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof pe}function ye(e){const t=function(e){const t=e._controlledReadableByteStream;if("readable"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(Z(t)&&X(t)>0)return!0;if(Ge(t)&&je(t)>0)return!0;return Ve(e)>0}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ye(e))}),(t=>{Oe(e,t)}))))}function we(e){Ie(e),e._pendingPullIntos=new S}function be(e,t){let n=!1;"closed"===e._state&&(n=!0);const r=_e(t);"default"===t.readerType?J(e,r,n):function(e,t,n){const r=e._reader._readIntoRequests.shift();n?r._closeSteps(t):r._chunkSteps(t)}(e,r,n)}function _e(e){const t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function Se(e,t,n,r){e._queue.push({buffer:t,byteOffset:n,byteLength:r}),e._queueTotalSize+=r}function Te(e,t){const n=t.elementSize,r=t.bytesFilled-t.bytesFilled%n,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),a=t.bytesFilled+o,i=a-a%n;let s=o,u=!1;i>r&&(s=i-t.bytesFilled,u=!0);const l=e._queue;for(;s>0;){const n=l.peek(),r=Math.min(s,n.byteLength),o=t.byteOffset+t.bytesFilled;ue(t.buffer,o,n.buffer,n.byteOffset,r),n.byteLength===r?l.shift():(n.byteOffset+=r,n.byteLength-=r),e._queueTotalSize-=r,De(0,r,t),s-=r}return u}function De(e,t,n){n.bytesFilled+=t}function Ce(e){0===e._queueTotalSize&&e._closeRequested?(xe(e),Sn(e._controlledReadableByteStream)):ye(e)}function Ie(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Re(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Te(e,t)&&(ke(e),be(e._controlledReadableByteStream,t))}}function Ae(e,t){const n=e._pendingPullIntos.peek();Ie(e),"closed"===e._controlledReadableByteStream._state?function(e){const t=e._controlledReadableByteStream;if(Ge(t))for(;je(t)>0;)be(t,ke(e))}(e):function(e,t,n){if(De(0,t,n),n.bytesFilled<n.elementSize)return;ke(e);const r=n.bytesFilled%n.elementSize;if(r>0){const t=n.byteOffset+n.bytesFilled,o=le(n.buffer,t-r,t);Se(e,o,0,o.byteLength)}n.bytesFilled-=r,be(e._controlledReadableByteStream,n),Re(e)}(e,t,n),ye(e)}function ke(e){return e._pendingPullIntos.shift()}function xe(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Pe(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Oe(e,t),t}xe(e),Sn(t)}}function Ee(e,t){const n=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==n._state)return;const r=t.buffer,o=t.byteOffset,a=t.byteLength,i=r;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}Ie(e),Z(n)?0===X(n)?Se(e,i,o,a):(e._pendingPullIntos.length>0&&ke(e),J(n,new Uint8Array(i,o,a),!1)):Ge(n)?(Se(e,i,o,a),Re(e)):Se(e,i,o,a),ye(e)}function Oe(e,t){const n=e._controlledReadableByteStream;"readable"===n._state&&(we(e),fe(e),xe(e),Tn(n,t))}function Le(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),r=Object.create(pe.prototype);!function(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}(r,e,n),e._byobRequest=r}return e._byobRequest}function Ve(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function $e(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,Ae(e,t)}function Me(e,t){const n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const r=t.byteLength;n.buffer=t.buffer,Ae(e,r)}function He(e,t,n,r,o,a,i){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,fe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=a,t._pullAlgorithm=r,t._cancelAlgorithm=o,t._autoAllocateChunkSize=i,t._pendingPullIntos=new S,e._readableStreamController=t,p(d(n()),(()=>{t._started=!0,ye(t)}),(e=>{Oe(t,e)}))}function Fe(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ne(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ze(e){return new Ue(e)}function qe(e,t){e._reader._readIntoRequests.push(t)}function je(e){return e._reader._readIntoRequests.length}function Ge(e){const t=e._reader;return void 0!==t&&!!We(t)}Object.defineProperties(he.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(he.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Ue{constructor(e){if(N(e,1,"ReadableStreamBYOBReader"),U(e,"First parameter"),bn(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ve(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");T(this,e),this._readIntoRequests=new S}get closed(){return We(this)?this._closedPromise:g(Je("closed"))}cancel(e=void 0){return We(this)?void 0===this._ownerReadableStream?g(I("cancel")):D(this,e):g(Je("cancel"))}read(e){if(!We(this))return g(Je("read"));if(!ArrayBuffer.isView(e))return g(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return g(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return g(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return g(I("read from"));let t,n;const r=c(((e,r)=>{t=e,n=r}));return Be(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>n(e)}),r}releaseLock(){if(!We(this))throw Je("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");C(this)}}}function We(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Ue}function Be(e,t,n){const r=e._ownerReadableStream;r._disturbed=!0,"errored"===r._state?n._errorSteps(r._storedError):function(e,t,n){const r=e._controlledReadableByteStream;let o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);const a=t.constructor,i=t.buffer,s={buffer:i,bufferByteLength:i.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:a,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(s),void qe(r,n);if("closed"!==r._state){if(e._queueTotalSize>0){if(Te(e,s)){const t=_e(s);return Ce(e),void n._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Oe(e,t),void n._errorSteps(t)}}e._pendingPullIntos.push(s),qe(r,n),ye(e)}else{const e=new a(s.buffer,s.byteOffset,0);n._closeSteps(e)}}(r._readableStreamController,t,n)}function Je(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Xe(e,t){const{highWaterMark:n}=e;if(void 0===n)return t;if(ie(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function Ze(e){const{size:t}=e;return t||(()=>1)}function Ke(e,t){M(e,t);const n=null==e?void 0:e.highWaterMark,r=null==e?void 0:e.size;return{highWaterMark:void 0===n?void 0:q(n),size:void 0===r?void 0:Ye(r,`${t} has member 'size' that`)}}function Ye(e,t){return H(e,t),t=>q(e(t))}function Qe(e,t,n){return H(e,n),n=>_(e,t,[n])}function et(e,t,n){return H(e,n),()=>_(e,t,[])}function tt(e,t,n){return H(e,n),n=>b(e,t,[n])}function nt(e,t,n){return H(e,n),(n,r)=>_(e,t,[n,r])}function rt(e,t){if(!ut(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(Ue.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ue.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const ot="function"==typeof AbortController;class at{constructor(e={},t={}){void 0===e?e=null:F(e,"First parameter");const n=Ke(t,"Second parameter"),r=function(e,t){M(e,t);const n=null==e?void 0:e.abort,r=null==e?void 0:e.close,o=null==e?void 0:e.start,a=null==e?void 0:e.type,i=null==e?void 0:e.write;return{abort:void 0===n?void 0:Qe(n,e,`${t} has member 'abort' that`),close:void 0===r?void 0:et(r,e,`${t} has member 'close' that`),start:void 0===o?void 0:tt(o,e,`${t} has member 'start' that`),write:void 0===i?void 0:nt(i,e,`${t} has member 'write' that`),type:a}}(e,"First parameter");if(st(this),void 0!==r.type)throw new RangeError("Invalid type is specified");const o=Ze(n);!function(e,t,n,r){const o=Object.create(Ct.prototype);let a=()=>{},i=()=>d(void 0),s=()=>d(void 0),u=()=>d(void 0);void 0!==t.start&&(a=()=>t.start(o)),void 0!==t.write&&(i=e=>t.write(e,o)),void 0!==t.close&&(s=()=>t.close()),void 0!==t.abort&&(u=e=>t.abort(e)),Rt(e,o,a,i,s,u,n,r)}(this,r,Xe(n,1),o)}get locked(){if(!ut(this))throw Lt("locked");return lt(this)}abort(e=void 0){return ut(this)?lt(this)?g(new TypeError("Cannot abort a stream that already has a writer")):ct(this,e):g(Lt("abort"))}close(){return ut(this)?lt(this)?g(new TypeError("Cannot close a stream that already has a writer")):ht(this)?g(new TypeError("Cannot close an already-closing stream")):dt(this):g(Lt("close"))}getWriter(){if(!ut(this))throw Lt("getWriter");return it(this)}}function it(e){return new yt(e)}function st(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new S,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ut(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof at}function lt(e){return void 0!==e._writer}function ct(e,t){var n;if("closed"===e._state||"errored"===e._state)return d(void 0);e._writableStreamController._abortReason=t,null===(n=e._writableStreamController._abortController)||void 0===n||n.abort();const r=e._state;if("closed"===r||"errored"===r)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let o=!1;"erroring"===r&&(o=!0,t=void 0);const a=c(((n,r)=>{e._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:r,_reason:t,_wasAlreadyErroring:o}}));return e._pendingAbortRequest._promise=a,o||ft(e,t),a}function dt(e){const t=e._state;if("closed"===t||"errored"===t)return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const n=c(((t,n)=>{const r={_resolve:t,_reject:n};e._closeRequest=r})),r=e._writer;var o;return void 0!==r&&e._backpressure&&"writable"===t&&Wt(r),ge(o=e._writableStreamController,Dt,0),xt(o),n}function gt(e,t){"writable"!==e._state?pt(e):ft(e,t)}function ft(e,t){const n=e._writableStreamController;e._state="erroring",e._storedError=t;const r=e._writer;void 0!==r&&_t(r,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&n._started&&pt(e)}function pt(e){e._state="errored",e._writableStreamController[E]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new S,void 0===e._pendingAbortRequest)return void vt(e);const n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(t),void vt(e);p(e._writableStreamController[P](n._reason),(()=>{n._resolve(),vt(e)}),(t=>{n._reject(t),vt(e)}))}function ht(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function vt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Nt(t,e._storedError)}function mt(e,t){const n=e._writer;void 0!==n&&t!==e._backpressure&&(t?function(e){qt(e)}(n):Wt(n)),e._backpressure=t}Object.defineProperties(at.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(at.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class yt{constructor(e){if(N(e,1,"WritableStreamDefaultWriter"),rt(e,"First parameter"),lt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!ht(e)&&e._backpressure?qt(this):Gt(this),Ht(this);else if("erroring"===t)jt(this,e._storedError),Ht(this);else if("closed"===t)Gt(this),Ht(this),zt(this);else{const t=e._storedError;jt(this,t),Ft(this,t)}}get closed(){return wt(this)?this._closedPromise:g($t("closed"))}get desiredSize(){if(!wt(this))throw $t("desiredSize");if(void 0===this._ownerWritableStream)throw Mt("desiredSize");return function(e){const t=e._ownerWritableStream,n=t._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:kt(t._writableStreamController)}(this)}get ready(){return wt(this)?this._readyPromise:g($t("ready"))}abort(e=void 0){return wt(this)?void 0===this._ownerWritableStream?g(Mt("abort")):function(e,t){return ct(e._ownerWritableStream,t)}(this,e):g($t("abort"))}close(){if(!wt(this))return g($t("close"));const e=this._ownerWritableStream;return void 0===e?g(Mt("close")):ht(e)?g(new TypeError("Cannot close an already-closing stream")):bt(this)}releaseLock(){if(!wt(this))throw $t("releaseLock");void 0!==this._ownerWritableStream&&St(this)}write(e=void 0){return wt(this)?void 0===this._ownerWritableStream?g(Mt("write to")):Tt(this,e):g($t("write"))}}function wt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof yt}function bt(e){return dt(e._ownerWritableStream)}function _t(e,t){"pending"===e._readyPromiseState?Ut(e,t):function(e,t){jt(e,t)}(e,t)}function St(e){const t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");_t(e,n),function(e,t){"pending"===e._closedPromiseState?Nt(e,t):function(e,t){Ft(e,t)}(e,t)}(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function Tt(e,t){const n=e._ownerWritableStream,r=n._writableStreamController,o=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Pt(e,t),1}}(r,t);if(n!==e._ownerWritableStream)return g(Mt("write to"));const a=n._state;if("errored"===a)return g(n._storedError);if(ht(n)||"closed"===a)return g(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===a)return g(n._storedError);const i=function(e){return c(((t,n)=>{const r={_resolve:t,_reject:n};e._writeRequests.push(r)}))}(n);return function(e,t,n){try{ge(e,t,n)}catch(t){return void Pt(e,t)}const r=e._controlledWritableStream;ht(r)||"writable"!==r._state||mt(r,Et(e)),xt(e)}(r,t,o),i}Object.defineProperties(yt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(yt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Dt={};class Ct{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!It(this))throw Vt("abortReason");return this._abortReason}get signal(){if(!It(this))throw Vt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!It(this))throw Vt("error");"writable"===this._controlledWritableStream._state&&Ot(this,e)}[P](e){const t=this._abortAlgorithm(e);return At(this),t}[E](){fe(this)}}function It(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Ct}function Rt(e,t,n,r,o,a,i,s){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,fe(t),t._abortReason=void 0,t._abortController=function(){if(ot)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=s,t._strategyHWM=i,t._writeAlgorithm=r,t._closeAlgorithm=o,t._abortAlgorithm=a;const u=Et(t);mt(e,u),p(d(n()),(()=>{t._started=!0,xt(t)}),(n=>{t._started=!0,gt(e,n)}))}function At(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function kt(e){return e._strategyHWM-e._queueTotalSize}function xt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void pt(t);if(0===e._queue.length)return;const n=e._queue.peek().value;n===Dt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),de(e);const n=e._closeAlgorithm();At(e),p(n,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&zt(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),gt(e,t)}(t,e)}))}(e):function(e,t){const n=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(n);p(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(n);const t=n._state;if(de(e),!ht(n)&&"writable"===t){const t=Et(e);mt(n,t)}xt(e)}),(t=>{"writable"===n._state&&At(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,gt(e,t)}(n,t)}))}(e,n)}function Pt(e,t){"writable"===e._controlledWritableStream._state&&Ot(e,t)}function Et(e){return kt(e)<=0}function Ot(e,t){const n=e._controlledWritableStream;At(e),ft(n,t)}function Lt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Vt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function $t(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Mt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Ht(e){e._closedPromise=c(((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function Ft(e,t){Ht(e),Nt(e,t)}function Nt(e,t){void 0!==e._closedPromise_reject&&(y(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function zt(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function qt(e){e._readyPromise=c(((t,n)=>{e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}function jt(e,t){qt(e),Ut(e,t)}function Gt(e){qt(e),Wt(e)}function Ut(e,t){void 0!==e._readyPromise_reject&&(y(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Wt(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Ct.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ct.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Bt="undefined"!=typeof DOMException?DOMException:void 0,Jt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Bt)?Bt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Xt(e,t,r,o,a,i){const s=W(e),u=it(t);e._disturbed=!0;let l=!1,m=d(void 0);return c(((w,b)=>{let _;if(void 0!==i){if(_=()=>{const n=new Jt("Aborted","AbortError"),r=[];o||r.push((()=>"writable"===t._state?ct(t,n):d(void 0))),a||r.push((()=>"readable"===e._state?_n(e,n):d(void 0))),A((()=>Promise.all(r.map((e=>e())))),!0,n)},i.aborted)return void _();i.addEventListener("abort",_)}var S,T,D;if(R(e,s._closedPromise,(e=>{o?k(!0,e):A((()=>ct(t,e)),!0,e)})),R(t,u._closedPromise,(t=>{a?k(!0,t):A((()=>_n(e,t)),!0,t)})),S=e,T=s._closedPromise,D=()=>{r?k():A((()=>function(e){const t=e._ownerWritableStream,n=t._state;return ht(t)||"closed"===n?d(void 0):"errored"===n?g(t._storedError):bt(e)}(u)))},"closed"===S._state?D():h(T,D),ht(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");a?k(!0,t):A((()=>_n(e,t)),!0,t)}function I(){const e=m;return f(m,(()=>e!==m?I():void 0))}function R(e,t,n){"errored"===e._state?n(e._storedError):v(t,n)}function A(e,n,r){function o(){p(e(),(()=>x(n,r)),(e=>x(!0,e)))}l||(l=!0,"writable"!==t._state||ht(t)?o():h(I(),o))}function k(e,n){l||(l=!0,"writable"!==t._state||ht(t)?x(e,n):h(I(),(()=>x(e,n))))}function x(e,t){St(u),C(s),void 0!==i&&i.removeEventListener("abort",_),e?b(t):w(void 0)}y(c(((e,t)=>{!function r(o){o?e():f(l?d(!0):f(u._readyPromise,(()=>c(((e,t)=>{Q(s,{_chunkSteps:t=>{m=f(Tt(u,t),void 0,n),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),r,t)}(!1)})))}))}class Zt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Kt(this))throw un("desiredSize");return on(this)}close(){if(!Kt(this))throw un("close");if(!an(this))throw new TypeError("The stream is not in a state that permits close");tn(this)}enqueue(e=void 0){if(!Kt(this))throw un("enqueue");if(!an(this))throw new TypeError("The stream is not in a state that permits enqueue");return nn(this,e)}error(e=void 0){if(!Kt(this))throw un("error");rn(this,e)}[O](e){fe(this);const t=this._cancelAlgorithm(e);return en(this),t}[L](e){const t=this._controlledReadableStream;if(this._queue.length>0){const n=de(this);this._closeRequested&&0===this._queue.length?(en(this),Sn(t)):Yt(this),e._chunkSteps(n)}else B(t,e),Yt(this)}}function Kt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Zt}function Yt(e){Qt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Yt(e))}),(t=>{rn(e,t)}))))}function Qt(e){const t=e._controlledReadableStream;return!!an(e)&&!!e._started&&(!!(bn(t)&&X(t)>0)||on(e)>0)}function en(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tn(e){if(!an(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(en(e),Sn(t))}function nn(e,t){if(!an(e))return;const n=e._controlledReadableStream;if(bn(n)&&X(n)>0)J(n,t,!1);else{let n;try{n=e._strategySizeAlgorithm(t)}catch(t){throw rn(e,t),t}try{ge(e,t,n)}catch(t){throw rn(e,t),t}}Yt(e)}function rn(e,t){const n=e._controlledReadableStream;"readable"===n._state&&(fe(e),en(e),Tn(n,t))}function on(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function an(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function sn(e,t,n,r,o,a,i){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,fe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=i,t._strategyHWM=a,t._pullAlgorithm=r,t._cancelAlgorithm=o,e._readableStreamController=t,p(d(n()),(()=>{t._started=!0,Yt(t)}),(e=>{rn(t,e)}))}function un(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ln(e,t,n){return H(e,n),n=>_(e,t,[n])}function cn(e,t,n){return H(e,n),n=>_(e,t,[n])}function dn(e,t,n){return H(e,n),n=>b(e,t,[n])}function gn(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function fn(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function pn(e,t){M(e,t);const n=null==e?void 0:e.preventAbort,r=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,a=null==e?void 0:e.signal;return void 0!==a&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(a,`${t} has member 'signal' that`),{preventAbort:Boolean(n),preventCancel:Boolean(r),preventClose:Boolean(o),signal:a}}Object.defineProperties(Zt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Zt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class hn{constructor(e={},t={}){void 0===e?e=null:F(e,"First parameter");const n=Ke(t,"Second parameter"),r=function(e,t){M(e,t);const n=e,r=null==n?void 0:n.autoAllocateChunkSize,o=null==n?void 0:n.cancel,a=null==n?void 0:n.pull,i=null==n?void 0:n.start,s=null==n?void 0:n.type;return{autoAllocateChunkSize:void 0===r?void 0:G(r,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===o?void 0:ln(o,n,`${t} has member 'cancel' that`),pull:void 0===a?void 0:cn(a,n,`${t} has member 'pull' that`),start:void 0===i?void 0:dn(i,n,`${t} has member 'start' that`),type:void 0===s?void 0:gn(s,`${t} has member 'type' that`)}}(e,"First parameter");if(yn(this),"bytes"===r.type){if(void 0!==n.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,n){const r=Object.create(he.prototype);let o=()=>{},a=()=>d(void 0),i=()=>d(void 0);void 0!==t.start&&(o=()=>t.start(r)),void 0!==t.pull&&(a=()=>t.pull(r)),void 0!==t.cancel&&(i=e=>t.cancel(e));const s=t.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");He(e,r,o,a,i,n,s)}(this,r,Xe(n,0))}else{const e=Ze(n);!function(e,t,n,r){const o=Object.create(Zt.prototype);let a=()=>{},i=()=>d(void 0),s=()=>d(void 0);void 0!==t.start&&(a=()=>t.start(o)),void 0!==t.pull&&(i=()=>t.pull(o)),void 0!==t.cancel&&(s=e=>t.cancel(e)),sn(e,o,a,i,s,n,r)}(this,r,Xe(n,1),e)}}get locked(){if(!wn(this))throw Dn("locked");return bn(this)}cancel(e=void 0){return wn(this)?bn(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):_n(this,e):g(Dn("cancel"))}getReader(e=void 0){if(!wn(this))throw Dn("getReader");return void 0===function(e,t){M(e,t);const n=null==e?void 0:e.mode;return{mode:void 0===n?void 0:fn(n,`${t} has member 'mode' that`)}}(e,"First parameter").mode?W(this):ze(this)}pipeThrough(e,t={}){if(!wn(this))throw Dn("pipeThrough");N(e,1,"pipeThrough");const n=function(e,t){M(e,t);const n=null==e?void 0:e.readable;z(n,"readable","ReadableWritablePair"),U(n,`${t} has member 'readable' that`);const r=null==e?void 0:e.writable;return z(r,"writable","ReadableWritablePair"),rt(r,`${t} has member 'writable' that`),{readable:n,writable:r}}(e,"First parameter"),r=pn(t,"Second parameter");if(bn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return y(Xt(this,n.writable,r.preventClose,r.preventAbort,r.preventCancel,r.signal)),n.readable}pipeTo(e,t={}){if(!wn(this))return g(Dn("pipeTo"));if(void 0===e)return g("Parameter 1 is required in 'pipeTo'.");if(!ut(e))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=pn(t,"Second parameter")}catch(e){return g(e)}return bn(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(e)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Xt(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!wn(this))throw Dn("tee");return se(ve((e=this)._readableStreamController)?function(e){let t,n,r,o,a,i=W(e),s=!1,u=!1,l=!1,g=!1,f=!1;const p=c((e=>{a=e}));function h(e){v(e._closedPromise,(t=>{e===i&&(Oe(r._readableStreamController,t),Oe(o._readableStreamController,t),g&&f||a(void 0))}))}function m(){We(i)&&(C(i),i=W(e),h(i)),Q(i,{_chunkSteps:t=>{w((()=>{u=!1,l=!1;const n=t;let i=t;if(!g&&!f)try{i=ce(t)}catch(t){return Oe(r._readableStreamController,t),Oe(o._readableStreamController,t),void a(_n(e,t))}g||Ee(r._readableStreamController,n),f||Ee(o._readableStreamController,i),s=!1,u?b():l&&_()}))},_closeSteps:()=>{s=!1,g||Pe(r._readableStreamController),f||Pe(o._readableStreamController),r._readableStreamController._pendingPullIntos.length>0&&$e(r._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&$e(o._readableStreamController,0),g&&f||a(void 0)},_errorSteps:()=>{s=!1}})}function y(t,n){Y(i)&&(C(i),i=ze(e),h(i));const c=n?o:r,d=n?r:o;Be(i,t,{_chunkSteps:t=>{w((()=>{u=!1,l=!1;const r=n?f:g;if(n?g:f)r||Me(c._readableStreamController,t);else{let n;try{n=ce(t)}catch(t){return Oe(c._readableStreamController,t),Oe(d._readableStreamController,t),void a(_n(e,t))}r||Me(c._readableStreamController,t),Ee(d._readableStreamController,n)}s=!1,u?b():l&&_()}))},_closeSteps:e=>{s=!1;const t=n?f:g,r=n?g:f;t||Pe(c._readableStreamController),r||Pe(d._readableStreamController),void 0!==e&&(t||Me(c._readableStreamController,e),!r&&d._readableStreamController._pendingPullIntos.length>0&&$e(d._readableStreamController,0)),t&&r||a(void 0)},_errorSteps:()=>{s=!1}})}function b(){if(s)return u=!0,d(void 0);s=!0;const e=Le(r._readableStreamController);return null===e?m():y(e._view,!1),d(void 0)}function _(){if(s)return l=!0,d(void 0);s=!0;const e=Le(o._readableStreamController);return null===e?m():y(e._view,!0),d(void 0)}function S(){}return r=mn(S,b,(function(r){if(g=!0,t=r,f){const r=se([t,n]),o=_n(e,r);a(o)}return p})),o=mn(S,_,(function(r){if(f=!0,n=r,g){const r=se([t,n]),o=_n(e,r);a(o)}return p})),h(i),[r,o]}(e):function(e){const t=W(e);let n,r,o,a,i,s=!1,u=!1,l=!1,g=!1;const f=c((e=>{i=e}));function p(){return s?(u=!0,d(void 0)):(s=!0,Q(t,{_chunkSteps:e=>{w((()=>{u=!1;const t=e,n=e;l||nn(o._readableStreamController,t),g||nn(a._readableStreamController,n),s=!1,u&&p()}))},_closeSteps:()=>{s=!1,l||tn(o._readableStreamController),g||tn(a._readableStreamController),l&&g||i(void 0)},_errorSteps:()=>{s=!1}}),d(void 0))}function h(){}return o=vn(h,p,(function(t){if(l=!0,n=t,g){const t=se([n,r]),o=_n(e,t);i(o)}return f})),a=vn(h,p,(function(t){if(g=!0,r=t,l){const t=se([n,r]),o=_n(e,t);i(o)}return f})),v(t._closedPromise,(e=>{rn(o._readableStreamController,e),rn(a._readableStreamController,e),l&&g||i(void 0)})),[o,a]}(e));var e}values(e=void 0){if(!wn(this))throw Dn("values");return function(e,t){const n=W(e),r=new ne(n,t),o=Object.create(re);return o._asyncIteratorImpl=r,o}(this,function(e){M(e,"First parameter");const t=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(t)}}(e).preventCancel)}}function vn(e,t,n,r=1,o=()=>1){const a=Object.create(hn.prototype);return yn(a),sn(a,Object.create(Zt.prototype),e,t,n,r,o),a}function mn(e,t,n){const r=Object.create(hn.prototype);return yn(r),He(r,Object.create(he.prototype),e,t,n,0,void 0),r}function yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function wn(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof hn}function bn(e){return void 0!==e._reader}function _n(e,t){if(e._disturbed=!0,"closed"===e._state)return d(void 0);if("errored"===e._state)return g(e._storedError);Sn(e);const r=e._reader;return void 0!==r&&We(r)&&(r._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),r._readIntoRequests=new S),m(e._readableStreamController[O](t),n)}function Sn(e){e._state="closed";const t=e._reader;void 0!==t&&(x(t),Y(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new S))}function Tn(e,t){e._state="errored",e._storedError=t;const n=e._reader;void 0!==n&&(k(n,t),Y(n)?(n._readRequests.forEach((e=>{e._errorSteps(t)})),n._readRequests=new S):(n._readIntoRequests.forEach((e=>{e._errorSteps(t)})),n._readIntoRequests=new S))}function Dn(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Cn(e,t){M(e,t);const n=null==e?void 0:e.highWaterMark;return z(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:q(n)}}Object.defineProperties(hn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(hn.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(hn.prototype,t.asyncIterator,{value:hn.prototype.values,writable:!0,configurable:!0});const In=e=>e.byteLength;try{Object.defineProperty(In,"name",{value:"size",configurable:!0})}catch(e){}class Rn{constructor(e){N(e,1,"ByteLengthQueuingStrategy"),e=Cn(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!kn(this))throw An("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!kn(this))throw An("size");return In}}function An(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function kn(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Rn}Object.defineProperties(Rn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Rn.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const xn=()=>1;try{Object.defineProperty(xn,"name",{value:"size",configurable:!0})}catch(e){}class Pn{constructor(e){N(e,1,"CountQueuingStrategy"),e=Cn(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!On(this))throw En("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!On(this))throw En("size");return xn}}function En(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function On(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Pn}function Ln(e,t,n){return H(e,n),n=>_(e,t,[n])}function Vn(e,t,n){return H(e,n),n=>b(e,t,[n])}function $n(e,t,n){return H(e,n),(n,r)=>_(e,t,[n,r])}Object.defineProperties(Pn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Pn.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Mn{constructor(e={},t={},n={}){void 0===e&&(e=null);const r=Ke(t,"Second parameter"),o=Ke(n,"Third parameter"),a=function(e,t){M(e,t);const n=null==e?void 0:e.flush,r=null==e?void 0:e.readableType,o=null==e?void 0:e.start,a=null==e?void 0:e.transform,i=null==e?void 0:e.writableType;return{flush:void 0===n?void 0:Ln(n,e,`${t} has member 'flush' that`),readableType:r,start:void 0===o?void 0:Vn(o,e,`${t} has member 'start' that`),transform:void 0===a?void 0:$n(a,e,`${t} has member 'transform' that`),writableType:i}}(e,"First parameter");if(void 0!==a.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==a.writableType)throw new RangeError("Invalid writableType specified");const i=Xe(o,0),s=Ze(o),u=Xe(r,1),l=Ze(r);let f;!function(e,t,n,r,o,a){function i(){return t}e._writable=function(e,t,n,r,o=1,a=()=>1){const i=Object.create(at.prototype);return st(i),Rt(i,Object.create(Ct.prototype),e,t,n,r,o,a),i}(i,(function(t){return function(e,t){const n=e._transformStreamController;return e._backpressure?m(e._backpressureChangePromise,(()=>{const r=e._writable;if("erroring"===r._state)throw r._storedError;return Wn(n,t)})):Wn(n,t)}(e,t)}),(function(){return function(e){const t=e._readable,n=e._transformStreamController,r=n._flushAlgorithm();return Gn(n),m(r,(()=>{if("errored"===t._state)throw t._storedError;tn(t._readableStreamController)}),(n=>{throw Fn(e,n),t._storedError}))}(e)}),(function(t){return function(e,t){return Fn(e,t),d(void 0)}(e,t)}),n,r),e._readable=vn(i,(function(){return function(e){return zn(e,!1),e._backpressureChangePromise}(e)}),(function(t){return Nn(e,t),d(void 0)}),o,a),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,zn(e,!0),e._transformStreamController=void 0}(this,c((e=>{f=e})),u,l,i,s),function(e,t){const n=Object.create(qn.prototype);let r=e=>{try{return Un(n,e),d(void 0)}catch(e){return g(e)}},o=()=>d(void 0);void 0!==t.transform&&(r=e=>t.transform(e,n)),void 0!==t.flush&&(o=()=>t.flush(n)),function(e,t,n,r){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=r}(e,n,r,o)}(this,a),void 0!==a.start?f(a.start(this._transformStreamController)):f(void 0)}get readable(){if(!Hn(this))throw Jn("readable");return this._readable}get writable(){if(!Hn(this))throw Jn("writable");return this._writable}}function Hn(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Mn}function Fn(e,t){rn(e._readable._readableStreamController,t),Nn(e,t)}function Nn(e,t){Gn(e._transformStreamController),Pt(e._writable._writableStreamController,t),e._backpressure&&zn(e,!1)}function zn(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=c((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Mn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Mn.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class qn{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!jn(this))throw Bn("desiredSize");return on(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!jn(this))throw Bn("enqueue");Un(this,e)}error(e=void 0){if(!jn(this))throw Bn("error");var t;t=e,Fn(this._controlledTransformStream,t)}terminate(){if(!jn(this))throw Bn("terminate");!function(e){const t=e._controlledTransformStream;tn(t._readable._readableStreamController);Nn(t,new TypeError("TransformStream terminated"))}(this)}}function jn(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof qn}function Gn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Un(e,t){const n=e._controlledTransformStream,r=n._readable._readableStreamController;if(!an(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{nn(r,t)}catch(e){throw Nn(n,e),n._readable._storedError}const o=function(e){return!Qt(e)}(r);o!==n._backpressure&&zn(n,!0)}function Wn(e,t){return m(e._transformAlgorithm(t),void 0,(t=>{throw Fn(e._controlledTransformStream,t),t}))}function Bn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Jn(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(qn.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(qn.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Rn,e.CountQueuingStrategy=Pn,e.ReadableByteStreamController=he,e.ReadableStream=hn,e.ReadableStreamBYOBReader=Ue,e.ReadableStreamBYOBRequest=pe,e.ReadableStreamDefaultController=Zt,e.ReadableStreamDefaultReader=K,e.TransformStream=Mn,e.TransformStreamDefaultController=qn,e.WritableStream=at,e.WritableStreamDefaultController=Ct,e.WritableStreamDefaultWriter=yt,Object.defineProperty(e,"__esModule",{value:!0})},n(t)},5011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetDagRunsTool=void 0;const r=n(1398),o=n(6304),a=n(5617),i=n(6967);t.GetDagRunsTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n,date:r}=e.input;return{invocationMessage:`Retrieving runs for DAG '${n}' (date: ${r||o.toISODateString(new Date)})`}}async invoke(e,t){const{dagId:n,date:s}=e.input;a.AIHandler.Current.currentDagId=n,i.Telemetry.Current.send("GetDagRunsTool.invoke");try{const e=await this.client.getDagRunHistory(n);if(!e||!e.dag_runs||0===e.dag_runs.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No runs found for DAG '${n}'.`)]);let t=e.dag_runs;if(s){const e=new Date(s);if(t=t.filter((t=>{const n=new Date(t.execution_date||t.logical_date);return o.toISODateString(n)===o.toISODateString(e)})),0===t.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No runs found for DAG '${n}' on ${s}.`)])}let a=`## ðŸ“Š DAG Runs for '${n}'\n\n`;return a+=s?`**Date Filter:** ${s}\n`:`**Date Filter:** Today (${o.toISODateString(new Date)})\n`,a+=`**Total Runs:** ${t.length}\n\n`,a+="---\n\n",t.forEach(((e,t)=>{const n=e.start_date||e.execution_date||"N/A",r=e.end_date||"N/A";let o="N/A";if(e.start_date&&e.end_date){const t=new Date(e.start_date),n=new Date(e.end_date).getTime()-t.getTime(),r=Math.floor(n/1e3);o=`${Math.floor(r/60)}m ${r%60}s`}const i=e.state||"unknown",s=this.getStatusEmoji(i);a+=`### ${t+1}. Run: ${e.dag_run_id||e.run_id}\n\n`,a+=`- **Status:** ${s} ${i}\n`,a+=`- **Start Time:** ${n}\n`,"N/A"!==r&&(a+=`- **End Time:** ${r}\n`),a+=`- **Duration:** ${o}\n`,a+=`- **Execution Date:** ${e.execution_date||e.logical_date}\n`,a+="\n"})),a+="\n---\n\n**Raw Data (JSON):**\n\n",a+=`\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n`,new r.LanguageModelToolResult([new r.LanguageModelTextPart(a)])}catch(e){const t=`\nâŒ Failed to retrieve DAG runs\n\n**Error:** ${e instanceof Error?e.message:String(e)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();return i.Telemetry.Current.sendError("GetDagRunsTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",up_for_retry:"ðŸ”„",up_for_reschedule:"ðŸ“…",removed:"ðŸ—‘ï¸",scheduled:"ðŸ“†"}[e.toLowerCase()]||"â“"}}},5072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagLogView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e,t,n,r,a){this._disposables=[],this.logs=new Map,o.logToOutput("DagLogView.constructor Started"),i.Telemetry.Current.send("DagLogView.constructor.called"),this._panel=e,this.dagId=t,this.dagRunId=n,this.taskId=r,this.tryNumber=a,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("DagLogView.constructor Completed")}static render(e,t,n,a){if(o.logToOutput("DagLogView.render Started"),i.Telemetry.Current.send("DagLogView.render.called"),s.Current)s.Current.dagId=e,s.Current.dagRunId=t,s.Current.taskId=n,s.Current.tryNumber=a,s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const o=r.window.createWebviewPanel("dagLogView","DAG Logs",r.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});s.Current=new s(o,e,t,n,a)}}async loadData(){if(o.logToOutput("DagLogView.loadData Started"),i.Telemetry.Current.send("DagLogView.loadData.called"),!a.Session.Current.Api)return;if(this.dagRunId){const e=await a.Session.Current.Api.getDagRun(this.dagId,this.dagRunId);e.isSuccessful&&(this.dagRunJson=e.result)}else{const e=await a.Session.Current.Api.getLastDagRun(this.dagId);if(!e.isSuccessful||!e.result)return void o.showErrorMessage("Could not fetch latest DAG run.");this.dagRunJson=e.result,this.dagRunId=this.dagRunJson.dag_run_id}if(this.dagRunId){const e=await a.Session.Current.Api.getTaskInstances(this.dagId,this.dagRunId);e.isSuccessful&&e.result&&(this.taskInstancesJson=e.result)}this.logs.clear();const e=this._getTasks();await Promise.all(e.map((e=>{let t=e.try_number;return this.taskId&&e.task_id===this.taskId&&void 0!==this.tryNumber&&(t=this.tryNumber),this.fetchLogForTask(e.task_id,t)}))),await this.renderHtml()}_getTasks(){if(!this.taskInstancesJson||!this.taskInstancesJson.task_instances)return[];let e=[...this.taskInstancesJson.task_instances];return this.taskId&&(e=e.filter((e=>e.task_id===this.taskId))),e.sort(((e,t)=>(e.start_date?new Date(e.start_date).getTime():0)-(t.start_date?new Date(t.start_date).getTime():0)))}async fetchLogForTask(e,t){if(!this.dagRunId)return;let n=t;if(void 0===n){const t=this.taskInstancesJson.task_instances.find((t=>t.task_id===e));n=t?t.try_number:1}if(this.logs.has(e))return;const r=await(a.Session.Current.Api?.getTaskInstanceLog(this.dagId,this.dagRunId,e,n));r?.isSuccessful&&this.logs.set(e,r.result)}async renderHtml(){o.logToOutput("DagLogView.renderHtml Started"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri)}dispose(){for(s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("DagLogView._getWebviewContent Started"),i.Telemetry.Current.send("DagLogView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]),s=this._getTasks(),u=this.dagRunJson||{},l=u.start_date?o.toISODateTimeString(new Date(u.start_date)):"N/A",c=u.end_date?o.toISODateTimeString(new Date(u.end_date)):"Running",d=u.start_date?o.getDuration(new Date(u.start_date),u.end_date?new Date(u.end_date):new Date):"N/A",g=u.state||"N/A",f=s.map((e=>{const t=this.logs.get(e.task_id);let n="",r="status-other";"success"===e.state&&(r="status-success"),["failed","upstream_failed","shutdown","restart"].includes(e.state)&&(r="status-error");let o=e.try_number;return this.taskId&&e.task_id===this.taskId&&void 0!==this.tryNumber&&(o=this.tryNumber),n=t?t.content&&Array.isArray(t.content)?t.content.map((e=>{const t=e.timestamp?`[${e.timestamp}]`:"",n=e.level?`[${e.level}]`:"",r=e.logger?`[${e.logger}]`:"",o=e.event||"";let a="";e.error_detail&&(a=`<pre class="error-detail">${JSON.stringify(e.error_detail,null,2)}</pre>`);let i="log-line";return n.toLowerCase().includes("error")&&(i+=" log-error"),n.toLowerCase().includes("warn")&&(i+=" log-warn"),`<div class="${i}"><span class="log-ts">${t}</span> <span class="log-lvl">${n}</span> <span class="log-logger">${r}</span> <span class="log-msg">${this._escapeHtml(o)}</span>${a}</div>`})).join(""):t.detail?`<div class="log-error">${this._escapeHtml(t.detail)}</div>`:`<pre>${this._escapeHtml(JSON.stringify(t,null,2))}</pre>`:'<div class="loading-logs">Loading logs...</div>',`\n            <div class="task-section ${r}">\n                <div class="task-header">\n                    <div class="header-left">\n                        <span class="status-indicator"></span>\n                        <span class="task-title">${this._escapeHtml(e.task_id)}</span>\n                        <span class="status-pill">${this._escapeHtml(e.state)}</span>\n                    </div>\n                    <div class="header-right">\n                        <span class="task-try">Try: ${o}</span>\n                    </div>\n                </div>\n                <div class="log-container" id="log-${e.task_id}">\n                    ${n}\n                </div>\n            </div>`})).join("\n");return`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width,initial-scale=1.0">\n    <script type="module" src="${n}"><\/script>\n    <script type="module" src="${r}"><\/script>\n    <link rel="stylesheet" href="${a}">\n    <style>\n        :root {\n            --font-size-sm: 12px;\n            --font-size-md: 13px;\n            --font-size-lg: 15px;\n            --border-radius: 4px;\n            --spacing-xs: 4px;\n            --spacing-sm: 8px;\n            --spacing-md: 16px;\n            --spacing-lg: 24px;\n        }\n\n        body { \n            padding: var(--spacing-md); \n            display: flex; \n            flex-direction: column; \n            height: 100vh; \n            box-sizing: border-box; \n            background: var(--vscode-editor-background); \n            color: var(--vscode-editor-foreground);\n            font-family: var(--vscode-font-family);\n        }\n\n        .metadata { \n            margin-bottom: var(--spacing-lg); \n            padding: var(--spacing-md); \n            background: var(--vscode-editor-inactiveSelectionBackground); \n            border-radius: var(--border-radius); \n        }\n        .metadata-row { display: flex; gap: 32px; font-size: 13px; margin-bottom: 4px; }\n        .label { font-weight: 600; color: var(--vscode-descriptionForeground); width: 70px; display: inline-block; text-transform: uppercase; font-size: 11px; }\n        \n        .task-container { display: flex; flex-direction: column; gap: 16px; padding-bottom: 20px; }\n        \n        .task-section { \n            border: 1px solid var(--vscode-widget-border); \n            border-radius: var(--border-radius); \n            overflow: hidden; \n            background: var(--vscode-editor-background);\n        }\n        \n        .task-header { \n            padding: 8px 16px; \n            display: flex; \n            justify-content: space-between;\n            align-items: center; \n            border-bottom: 1px solid var(--vscode-widget-border);\n        }\n\n        .header-left { display: flex; align-items: center; gap: 12px; }\n        .header-right { display: flex; align-items: center; gap: 12px; }\n\n        .task-title { font-weight: 600; font-size: 14px; }\n        .task-try { font-size: 11px; color: var(--vscode-descriptionForeground); }\n        \n        .status-indicator {\n            width: 8px; height: 8px; border-radius: 50%;\n            display: inline-block;\n        }\n\n        .status-pill {\n            padding: 2px 8px;\n            border-radius: 10px;\n            font-size: 10px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n\n        /* Status Colors */\n        .task-section.status-success .task-header {\n            background-color: var(--vscode-notebook-cellEditorBackground); \n        }\n        .task-section.status-success .status-indicator {\n            background-color: var(--vscode-testing-iconPassed);\n        }\n        .task-section.status-success .status-pill {\n            background-color: var(--vscode-testing-iconPassed);\n            color: var(--vscode-editor-background);\n        }\n\n        .task-section.status-error .task-header {\n            background-color: rgba(255, 0, 0, 0.1); \n        }\n        .task-section.status-error .status-indicator {\n            background-color: var(--vscode-errorForeground);\n        }\n        .task-section.status-error .status-pill {\n            background-color: var(--vscode-errorForeground);\n            color: white;\n        }\n\n        .task-section.status-other .task-header {\n            background-color: var(--vscode-sideBarSectionHeader-background);\n        }\n        .task-section.status-other .status-indicator {\n            background-color: var(--vscode-descriptionForeground);\n        }\n        .task-section.status-other .status-pill {\n            background-color: var(--vscode-badge-background);\n            color: var(--vscode-badge-foreground);\n        }\n\n        .log-container { \n            padding: 16px;\n            max-height: 500px;\n            overflow-y: auto; \n            font-family: var(--vscode-editor-font-family);\n            font-size: 12px;\n            white-space: pre-wrap;\n            line-height: 1.5;\n        }\n        \n        .log-line { margin-bottom: 2px; }\n        .log-ts { color: var(--vscode-debugConsole-infoForeground); margin-right: 8px; opacity: 0.8; font-size: 0.9em; }\n        .log-lvl { font-weight: bold; margin-right: 8px; }\n        .log-logger { color: var(--vscode-textLink-foreground); margin-right: 8px; }\n        \n        .log-error { color: var(--vscode-errorForeground); }\n        .log-warn { color: var(--vscode-editorWarning-foreground); }\n        \n        .error-detail { \n            color: var(--vscode-textPreformat-foreground); \n            background-color: var(--vscode-textBlockQuote-background);\n            padding: 12px;\n            margin: 8px 0 8px 16px;\n            border-left: 3px solid var(--vscode-errorForeground);\n            border-radius: 3px;\n        }\n        .loading-logs { font-style: italic; color: var(--vscode-descriptionForeground); padding: 20px; text-align: center; }\n\n    </style>\n    <title>DAG Logs</title>\n</head>\n<body>\n    <div class="metadata">\n        <div class="metadata-row">\n            <div><span class="label">DAG ID:</span> <span>${this.dagId}</span></div>\n            <div><span class="label">Run ID:</span> <span>${this.dagRunId}</span></div>\n            <div><span class="label">Status:</span> <span>${g}</span></div>\n        </div>\n        <div class="metadata-row">\n            <div><span class="label">Start:</span> <span>${l}</span></div>\n            <div><span class="label">End:</span> <span>${c}</span></div>\n            <div><span class="label">Duration:</span> <span>${d}</span></div>\n        </div>\n    </div>\n\n    <div class="task-container">\n        ${f}\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n        // Just listener for now if we want to add interactivity later e.g. collapse/expand\n    <\/script>\n</body>\n</html>`}_escapeHtml(e){if(!e)return"";const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("DagLogView._setWebviewMessageListener Started"),i.Telemetry.Current.send("DagLogView._setWebviewMessageListener.called"),e.onDidReceiveMessage((async e=>{}),void 0,this._disposables)}}t.DagLogView=s},5083:(e,t,n)=>{const r=n(9896),o=n(857),a=n(6928),i=n(6982),s={fs:r.constants,os:o.constants},u=/XXXXXX/,l=(s.O_CREAT||s.fs.O_CREAT)|(s.O_EXCL||s.fs.O_EXCL)|(s.O_RDWR||s.fs.O_RDWR),c="win32"===o.platform(),d=s.EBADF||s.os.errno.EBADF,g=s.ENOENT||s.os.errno.ENOENT,f=[],p=r.rmdirSync.bind(r);let h=!1;function v(e,t){return r.rm(e,{recursive:!0},t)}function m(e){return r.rmSync(e,{recursive:!0})}function y(e,t){const n=R(e,t),a=n[0],i=n[1];!function(e,t){!function(e,t){r.realpath(e&&e.tmpdir||o.tmpdir(),t)}(e,(function(n,r){if(n)return t(n);e.tmpdir=r;try{k(e)}catch(n){return t(n)}x("dir",e.dir,r,(function(n,o){if(n)return t(n);e.dir=I(o)?"":o,x("template",e.template,r,(function(n,r){if(n)return t(n);e.template=r,t(null,e)}))}))}))}(a,(function(e,t){if(e)return i(e);let n=t.tries;!function e(){try{const o=A(t);r.stat(o,(function(t){if(!t)return n-- >0?e():i(new Error("Could not get a unique tmp filename, max tries reached "+o));i(null,o)}))}catch(e){i(e)}}()}))}function w(e){const t=function(e){const t=e.tmpdir=L(e);k(e);const n=P("dir",e.dir,t);return e.dir=I(n)?"":n,e.template=P("template",e.template,t),e}(R(e)[0]);let n=t.tries;do{const e=A(t);try{r.statSync(e)}catch(t){return e}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function b(e,t){const n=function(e){if(e&&!E(e))return t(e);t()};0<=e[0]?r.close(e[0],(function(){r.unlink(e[1],n)})):r.unlink(e[1],n)}function _(e){let t=null;try{0<=e[0]&&r.closeSync(e[0])}catch(e){if(!O(e,-d,"EBADF")&&!E(e))throw e}finally{try{r.unlinkSync(e[1])}catch(e){E(e)||(t=e)}}if(null!==t)throw t}function S(e,t,n,r){const o=D(_,[t,e],r),a=D(b,[t,e],r,o);return n.keep||f.unshift(o),r?o:a}function T(e,t,n){const o=t.unsafeCleanup?v:r.rmdir.bind(r),a=D(t.unsafeCleanup?m:p,e,n),i=D(o,e,n,a);return t.keep||f.unshift(a),n?a:i}function D(e,t,n,r){let o=!1;return function a(i){if(!o){const s=r||a,u=f.indexOf(s);return u>=0&&f.splice(u,1),o=!0,n||e===p||e===m?e(t):e(t,i||function(){})}}}function C(e){let t=[],n=null;try{n=i.randomBytes(e)}catch(t){n=i.pseudoRandomBytes(e)}for(let r=0;r<e;r++)t.push("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[n[r]%62]);return t.join("")}function I(e){return void 0===e}function R(e,t){if("function"==typeof e)return[{},e];if(I(e))return[{},t];const n={};for(const t of Object.getOwnPropertyNames(e))n[t]=e[t];return[n,t]}function A(e){const t=e.tmpdir;if(!I(e.name))return a.join(t,e.dir,e.name);if(!I(e.template))return a.join(t,e.dir,e.template).replace(u,C(6));const n=[e.prefix?e.prefix:"tmp","-",process.pid,"-",C(12),e.postfix?"-"+e.postfix:""].join("");return a.join(t,e.dir,n)}function k(e){if(!I(e.name)){const t=e.name;if(a.isAbsolute(t))throw new Error(`name option must not contain an absolute path, found "${t}".`);const n=a.basename(t);if(".."===n||"."===n||n!==t)throw new Error(`name option must not contain a path, found "${t}".`)}if(!I(e.template)&&!e.template.match(u))throw new Error(`Invalid template, found "${e.template}".`);if(!I(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=I(e.name)?e.tries||3:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.prefix=I(e.prefix)?"":e.prefix,e.postfix=I(e.postfix)?"":e.postfix}function x(e,t,n,o){if(I(t))return o(null);!function(e,t,n){const o=a.isAbsolute(e)?e:a.join(t,e);r.stat(o,(function(e){e?r.realpath(a.dirname(o),(function(e,t){if(e)return n(e);n(null,a.join(t,a.basename(o)))})):r.realpath(o,n)}))}(t,n,(function(t,r){if(t)return o(t);const i=a.relative(n,r);if(!r.startsWith(n))return o(new Error(`${e} option must be relative to "${n}", found "${i}".`));o(null,i)}))}function P(e,t,n){if(I(t))return;const o=function(e,t){const n=a.isAbsolute(e)?e:a.join(t,e);try{return r.statSync(n),r.realpathSync(n)}catch(e){const t=r.realpathSync(a.dirname(n));return a.join(t,a.basename(n))}}(t,n),i=a.relative(n,o);if(!o.startsWith(n))throw new Error(`${e} option must be relative to "${n}", found "${i}".`);return i}function E(e){return O(e,-g,"ENOENT")}function O(e,t,n){return c?e.code===n:e.code===n&&e.errno===t}function L(e){return r.realpathSync(e&&e.tmpdir||o.tmpdir())}process.addListener("exit",(function(){if(h)for(;f.length;)try{f[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return L()}}),e.exports.dir=function(e,t){const n=R(e,t),o=n[0],a=n[1];y(o,(function(e,t){if(e)return a(e);r.mkdir(t,o.mode||448,(function(e){if(e)return a(e);a(null,t,T(t,o,!1))}))}))},e.exports.dirSync=function(e){const t=R(e)[0],n=w(t);return r.mkdirSync(n,t.mode||448),{name:n,removeCallback:T(n,t,!0)}},e.exports.file=function(e,t){const n=R(e,t),o=n[0],a=n[1];y(o,(function(e,t){if(e)return a(e);r.open(t,l,o.mode||384,(function(e,n){if(e)return a(e);if(o.discardDescriptor)return r.close(n,(function(e){return a(e,t,void 0,S(t,-1,o,!1))}));{const e=o.discardDescriptor||o.detachDescriptor;a(null,t,n,S(t,e?-1:n,o,!1))}}))}))},e.exports.fileSync=function(e){const t=R(e)[0],n=t.discardDescriptor||t.detachDescriptor,o=w(t);let a=r.openSync(o,l,t.mode||384);return t.discardDescriptor&&(r.closeSync(a),a=void 0),{name:o,fd:a,removeCallback:S(o,n?-1:a,t,!0)}},e.exports.tmpName=y,e.exports.tmpNameSync=w,e.exports.setGracefulCleanup=function(){h=!0}},5157:(e,t,n)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=n(8167),t=(new e).port1,r=new ArrayBuffer;t.postMessage(r,[r,r])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},5271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetRunningDagsTool=void 0;const r=n(1398),o=n(6967);t.GetRunningDagsTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){return{invocationMessage:"Checking for running DAGs..."}}async invoke(e,t){o.Telemetry.Current.send("GetRunningDagsTool.invoke");try{const e=await this.client.getRunningDags();if(0===e.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… No DAGs are currently running.")]);let t=`## â–¶ï¸ Running DAGs (${e.length})\n\n`;return e.forEach((e=>{const n="running"===e.latest_run_state?"â–¶ï¸":"â³";t+=`- ${n} **${e.dag_id}** - State: ${e.latest_run_state}, Run ID: \`${e.latest_run_id}\``,e.description&&(t+=`\n  Description: ${e.description}`),e.owners&&e.owners.length>0&&(t+=`\n  Owners: ${e.owners.join(", ")}`),t+="\n"})),t+=`\n---\n**Raw Data:**\n\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\``,new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){return o.Telemetry.Current.sendError("GetRunningDagsTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to get running DAGs: ${e instanceof Error?e.message:String(e)}`)])}}}},5497:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TelemetryReporter:()=>d});const r=require("https");var o=n(857),a=n(1398);var i,s=n(2845);class u{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"1.2.0"}}static getInstance(){return u._instance||(u._instance=new u),u._instance}}class l{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendRawTelemetryEvent(e,t,n){const r={...t};for(const e of Object.keys(r??{})){const t=r[e];"string"==typeof e&&void 0!==t&&(r[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,r,n)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}!function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(i||(i={}));class c{constructor(e,t){this._instantiationStatus=i.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==i.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==i.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const n={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...n}}else t={properties:n};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===i.NOT_INSTANTIATED&&(this._instantiationStatus=i.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=i.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=i.INSTANTIATED})))}}class d extends l{constructor(e,t,i,l){const d=l?(g=l,{sendPOST:(e,t)=>{const n="string"==typeof e.data?e.data:Buffer.from(e.data).toString();g(e.urlString,{method:"POST",headers:e.headers,body:n}).then((async e=>{const n={};for(const[t,r]of e.headers)n[t]=r;const r=await e.text();t(e.status,n,r)})).catch((()=>{t(0,{})}))}}):{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const o=r.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));o.write(e.data,(e=>{e&&t(0,{})})),o.end()}catch{t(0,{})}}};var g;let f=e=>(async(e,t,r,o,a)=>{let i;try{const t=await Promise.resolve().then(n.bind(n,3499)),r={};if(o){const e={alwaysUseXhrOverride:!0,httpXHROverride:o};r[s.Uu]=e}let a;e.startsWith("InstrumentationKey=")||(a=e);const u=a?{instrumentationKey:a}:{connectionString:e};i=new t.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:r})}catch(e){return Promise.reject(e)}return{logEvent:(e,n)=>{const o={...n?.properties,...n?.measurements};a?.length&&u.applyReplacements(o,a),i?.track({name:e,data:o,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:r}},baseData:{name:e,properties:n?.properties,measurements:n?.measurements}})},flush:async()=>{i?.flush(!1)},dispose:async()=>new Promise((e=>{i?.unload(!0,(()=>{e(),i=void 0}),1e3)}))}})(e,a.env.machineId,a.env.sessionId,d,t);u.shouldUseOneDataSystemSDK(e)&&(f=e=>(async(e,t,r)=>{let o=await(async(e,t,r)=>{const o=await Promise.resolve().then(n.bind(n,4820)),a=await Promise.resolve().then(n.bind(n,3144)),i=new o.AppInsightsCore,s=new a.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};u.extensionConfig[s.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(u,[]),i.addTelemetryInitializer((e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),i})(e,t,r);return{logEvent:(e,t)=>{try{o?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{o?o.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{o?o.unload(!1,(()=>{e(),o=void 0}),1e3):e()}))}})(e,a,d));const p={release:o.release(),platform:o.platform(),architecture:o.arch()},h=new c(e,f);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");const v={...i,additionalCommonProperties:i?.additionalCommonProperties?{...i.additionalCommonProperties,...u.getAdditionalCommonProperties(p)}:u.getAdditionalCommonProperties(p)};super(h,a,v)}}},5617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AIHandler=void 0;const r=n(2636),o=n(1398),a=n(6304),i=n(581),s=n(4976),u=n(9798),l=n(9246),c=n(1978),d=n(5271),g=n(6203),f=n(1652),p=n(5011),h=n(7138),v=n(4740),m=n(1165),y=n(4685),w=n(8428),b=n(4681),_=n(1841),S=n(9249),T=n(7575),D=n(547),C=n(2432),I=n(4876),R=n(9742),A=n(7817),k=n(3842),x=n(6967);class P{constructor(){P.Current=this,x.Telemetry.Current.send("AIHandler.Initialized")}async aIHandler(e,t,n,r){a.logToOutput("AIHandler.aIHandler Started"),x.Telemetry.Current.send("AIHandler.aIHandler.Started");const i=P.Current?.askAIContext,s=[{name:"list_active_dags",description:"Lists all Airflow DAGs that are currently active (not paused). Returns a list of DAG IDs and their details.",inputSchema:{type:"object",properties:{},required:[]}},{name:"list_paused_dags",description:"Lists all Airflow DAGs that are currently paused. Returns a list of DAG IDs and their details.",inputSchema:{type:"object",properties:{},required:[]}},{name:"get_running_dags",description:"Lists all Airflow DAGs that currently have running or queued DAG runs. Use this when asked about running, executing, or in-progress DAGs. Returns DAG IDs with run states and run IDs.",inputSchema:{type:"object",properties:{},required:[]}},{name:"pause_dag",description:"Pauses a specific Airflow DAG. Required input: dag_id (string).",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The unique identifier (ID) of the DAG to pause"}},required:["dagId"]}},{name:"unpause_dag",description:"Unpauses (activates) a specific Airflow DAG. Required input: dag_id (string).",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The unique identifier (ID) of the DAG to unpause"}},required:["dagId"]}},{name:"trigger_dag_run",description:"Triggers a DAG run. Inputs: dag_id (string), config_json (string, optional), date (string, optional).",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"},configJson:{type:"string",description:"JSON configuration or file path"},date:{type:"string",description:"Logical date in ISO 8601 format"}},required:["dagId"]}},{name:"get_failed_runs",description:"Gets failed DAG runs. Inputs: time_range_hours (number), dag_id_filter (string).",inputSchema:{type:"object",properties:{timeRangeHours:{type:"number"},dagIdFilter:{type:"string"}},required:[]}},{name:"get_dag_runs",description:"Retrieves DAG runs for a given DAG. Optional date (YYYY-MM-DD). Returns run id, start time, duration, status.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"},date:{type:"string",description:"Optional date filter YYYY-MM-DD"}},required:["dagId"]}},{name:"get_dag_history",description:"Retrieves DAG run history for a given date (defaults to today). Returns date/time, status, duration, note.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"},date:{type:"string",description:"Optional date filter YYYY-MM-DD"}},required:["dagId"]}},{name:"cancel_dag_run",description:"Cancels the currently running DAG run for the given DAG. Required: dag_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"}},required:["dagId"]}},{name:"analyse_dag_latest_run",description:"Comprehensive analysis of the latest DAG run including tasks, source code, and logs. Required: dag_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"}},required:["dagId"]}},{name:"get_dag_run_detail",description:"Comprehensive analysis of a specific DAG run by run ID. Analyzes tasks, source code, and logs for the specified run. Required: dag_id, dag_run_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"},dagRunId:{type:"string",description:"The DAG run ID to analyze"}},required:["dagId","dagRunId"]}},{name:"get_today",description:"Returns the current system date in multiple formats. Use when asked about today's date or current date. Helpful for date filtering operations. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"get_dag_source_code",description:"Retrieves the Python source code for a specific DAG. Use when the user wants to see or analyze the DAG implementation. Required: dag_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID to get source code for"}},required:["dagId"]}},{name:"go_to_dag_view",description:"Opens the DAG View panel to display information about a specific DAG. Optional: provide dag_run_id to view a specific run. Required: dag_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID to view"},dagRunId:{type:"string",description:"Optional DAG run ID to navigate to a specific run"}},required:["dagId"]}},{name:"go_to_dag_log_view",description:"Opens the DAG Log View panel to display task logs for a specific Airflow DAG. Required: dag_id. Optional: dag_run_id, task_id, try_number.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID"},dagRunId:{type:"string",description:"Optional: The DAG run ID"},taskId:{type:"string",description:"Optional: The Task ID"},tryNumber:{type:"number",description:"Optional: The try number"}},required:["dagId"]}},{name:"go_to_dag_run_history",description:"Opens the DAG Run History panel with optional filters. Shows run history for a DAG with optional date range and status filters. Required: dag_id.",inputSchema:{type:"object",properties:{dagId:{type:"string",description:"The DAG ID to view history for"},startDate:{type:"string",description:"Optional start date filter (YYYY-MM-DD format)"},endDate:{type:"string",description:"Optional end date filter (YYYY-MM-DD format)"},status:{type:"string",description:"Optional status filter (success, failed, running, queued, upstream_failed)"}},required:["dagId"]}},{name:"go_to_providers_view",description:"Opens the Providers View panel to display installed Airflow providers. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"go_to_connections_view",description:"Opens the Connections View panel to display Airflow connections. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"go_to_variables_view",description:"Opens the Variables View panel to display Airflow variables. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"go_to_configs_view",description:"Opens the Configs View panel to display Airflow configuration settings. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"go_to_plugins_view",description:"Opens the Plugins View panel to display installed Airflow plugins. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}},{name:"go_to_server_health_view",description:"Opens the Server Health View panel to display Airflow server health status. No inputs required.",inputSchema:{type:"object",properties:{},required:[]}}],u=[o.LanguageModelChatMessage.User("You are an expert in Apache Airflow. You have access to tools to manage DAGs, view logs, and check status. Use them when appropriate."),o.LanguageModelChatMessage.User("Don't provide JSON responses unless specifically asked. Always format your responses in markdown.")],l=t.history.slice(-6);for(const e of l)if(e instanceof o.ChatRequestTurn)u.push(o.LanguageModelChatMessage.User(e.prompt));else if(e instanceof o.ChatResponseTurn){const t=e.response.filter((e=>e instanceof o.ChatResponseMarkdownPart)).map((e=>e.value.value)).join("\n");t&&u.push(o.LanguageModelChatMessage.Assistant(t))}i&&u.push(o.LanguageModelChatMessage.User(`Context:\nDAG: ${i.dag||"N/A"}\nLogs: ${i.logs||"N/A"}\nCode: ${i.code||"N/A"}`)),this.currentDagId&&u.push(o.LanguageModelChatMessage.User(`Current DAG ID in focus: ${this.currentDagId}`)),u.push(o.LanguageModelChatMessage.User(e.prompt));const c=e.prompt.toLowerCase().includes("thank");try{let t=e.model;if(e.model.id.includes("auto")){const e=await o.lm.selectChatModels({vendor:t.vendor,family:t.family});e.length>0?(t=e[0],a.logToOutput(`Auto-selected model: ${t.name} (${t.id})`)):(a.logToOutput(`No models found for vendor: ${t.vendor}, family: ${t.family}`),t=void 0)}if(a.logToOutput(`Selected AI Family: ${t?.family||"None"}, Name: ${t?.name||"None"}`),x.Telemetry.Current.send("AIHandler.aIHandler.ModelSelected",{modelId:t?.id||"None"}),!t)return void n.markdown("No suitable AI model found.");let i=!0;for(;i&&!r.isCancellationRequested;){i=!1;const e=await t.sendRequest(u,{tools:s},r);let l=[];for await(const t of e.text)n.markdown(t);for await(const t of e.stream)t instanceof o.LanguageModelToolCallPart&&l.push(t);if(l.length>0){i=!0,u.push(o.LanguageModelChatMessage.Assistant(l));for(const e of l){n.progress(`Calling: ${e.name}`),a.logToOutput(`AI requested tool: ${e.name} with input: ${JSON.stringify(e.input)}`),x.Telemetry.Current.send("AIHandler.aIHandler.ToolCalled",{toolName:e.name,toolInput:JSON.stringify(e.input)});try{const t=(await o.lm.invokeTool(e.name,{input:e.input},r)).content.filter((e=>e instanceof o.LanguageModelTextPart)).map((e=>e.value)).join("\n");u.push(o.LanguageModelChatMessage.User([new o.LanguageModelToolResultPart(e.callId,[new o.LanguageModelTextPart(t)])]))}catch(t){x.Telemetry.Current.send("AIHandler.aIHandler.ToolCallFailed",{toolName:e.name,error:t instanceof Error?t.message:String(t)});const n=`Tool execution failed: ${t instanceof Error?t.message:String(t)}`;u.push(o.LanguageModelChatMessage.User([new o.LanguageModelToolResultPart(e.callId,[new o.LanguageModelTextPart(n)])]))}}}}c&&(n.markdown("\n\n\n"),n.markdown("\nðŸ™ [Donate](https://github.com/sponsors/necatiarslan) if you found me useful!"),n.markdown("\nðŸ¤” Request a [New Feature](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)"),n.markdown("\nðŸ—³ï¸ Attend [Survey](https://bit.ly/airflow-extension-survey) to help me get better. "))}catch(e){a.logToOutput(`AIHandler.aIHandler Error: ${e instanceof Error?e.message:String(e)}`),x.Telemetry.Current.send("AIHandler.aIHandler.Error",{error:e instanceof Error?e.message:String(e)}),e instanceof Error?n.markdown(`I'm sorry, I couldn't connect to the AI model: ${e.message}`):n.markdown("I'm sorry, I couldn't connect to the AI model."),n.markdown("\nðŸª² Please [Report Bug](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)")}}async isChatCommandAvailable(){return(await o.commands.getCommands(!0)).includes("workbench.action.chat.open")}async askAI(e,t){if(a.logToOutput("AIHandler.askAI Started"),x.Telemetry.Current.send("AIHandler.askAI.Started"),!r.Session.Current.Api)return;if(!await this.isChatCommandAvailable())return void a.showErrorMessage("Chat command is not available. Please ensure you have access to VS Code AI features.");let n="",o="";const i=await r.Session.Current.Api.getSourceCode(e,t);if(!i.isSuccessful)return void a.showErrorMessage("Failed to fetch DAG source code for AI analysis.");n=i.result;const s=await r.Session.Current.Api.getLastDagRunLogText(e);s.isSuccessful?(o=s.result,await this.askAIWithContext({code:n,logs:o,dag:e,dagRun:null,tasks:null,taskInstances:null})):a.showErrorMessage("Failed to fetch latest DAG run logs for AI analysis.")}async askAIWithContext(e){this.askAIContext=e;const t=o.env.appName;let n="";n=t.includes("Antigravity")?"antigravity.startAgentTask":(t.includes("Code - OSS")||t.includes("Visual Studio Code"),"workbench.action.chat.open"),await o.commands.executeCommand(n,{query:"@airflow Analyze the current logs"})}registerChatParticipant(){const e=o.chat.createChatParticipant("airflow-ext.participant",P.Current.aIHandler.bind(P.Current));e.iconPath=o.Uri.joinPath(r.Session.Current.Context.extensionUri,"media","ai-assistant-logo.png"),r.Session.Current.Context.subscriptions.push(e)}registerAiTools(){a.logToOutput("Registering Language Model Tools...");const e=new i.AirflowClientAdapter,t=r.Session.Current.Context,n=o.lm.registerTool("trigger_dag_run",new s.TriggerDagRunTool(e));t.subscriptions.push(n),a.logToOutput("Registered tool: trigger_dag_run");const x=o.lm.registerTool("get_failed_runs",new u.GetFailedRunsTool(e));t.subscriptions.push(x),a.logToOutput("Registered tool: get_failed_runs");const P=o.lm.registerTool("list_active_dags",new l.ListActiveDagsTool(e));t.subscriptions.push(P),a.logToOutput("Registered tool: list_active_dags");const E=o.lm.registerTool("list_paused_dags",new c.ListPausedDagsTool(e));t.subscriptions.push(E),a.logToOutput("Registered tool: list_paused_dags");const O=o.lm.registerTool("get_running_dags",new d.GetRunningDagsTool(e));t.subscriptions.push(O),a.logToOutput("Registered tool: get_running_dags");const L=o.lm.registerTool("pause_dag",new g.PauseDagTool(e));t.subscriptions.push(L),a.logToOutput("Registered tool: pause_dag");const V=o.lm.registerTool("unpause_dag",new f.UnpauseDagTool(e));t.subscriptions.push(V),a.logToOutput("Registered tool: unpause_dag");const $=o.lm.registerTool("get_dag_runs",new p.GetDagRunsTool(e));t.subscriptions.push($),a.logToOutput("Registered tool: get_dag_runs");const M=o.lm.registerTool("cancel_dag_run",new h.CancelDagRunTool(e));t.subscriptions.push(M),a.logToOutput("Registered tool: cancel_dag_run");const H=o.lm.registerTool("analyse_dag_latest_run",new v.AnalyseDagLatestRunTool(e));t.subscriptions.push(H),a.logToOutput("Registered tool: analyse_dag_latest_run");const F=o.lm.registerTool("get_dag_history",new m.GetDagHistoryTool(e));t.subscriptions.push(F),a.logToOutput("Registered tool: get_dag_history");const N=o.lm.registerTool("get_dag_run_detail",new y.GetDagRunDetailTool(e));t.subscriptions.push(N),a.logToOutput("Registered tool: get_dag_run_detail");const z=o.lm.registerTool("get_today",new w.GetTodayTool);t.subscriptions.push(z),a.logToOutput("Registered tool: get_today");const q=o.lm.registerTool("get_dag_source_code",new b.GetDagSourceCodeTool(e));t.subscriptions.push(q),a.logToOutput("Registered tool: get_dag_source_code");const j=o.lm.registerTool("go_to_dag_view",new _.GoToDagViewTool);t.subscriptions.push(j),a.logToOutput("Registered tool: go_to_dag_view");const G=o.lm.registerTool("go_to_dag_log_view",new S.GoToDagLogViewTool);t.subscriptions.push(G),a.logToOutput("Registered tool: go_to_dag_log_view");const U=o.lm.registerTool("go_to_dag_run_history",new T.GoToDagRunHistoryTool);t.subscriptions.push(U),a.logToOutput("Registered tool: go_to_dag_run_history");const W=o.lm.registerTool("go_to_providers_view",new D.GoToProvidersViewTool);t.subscriptions.push(W),a.logToOutput("Registered tool: go_to_providers_view");const B=o.lm.registerTool("go_to_connections_view",new C.GoToConnectionsViewTool);t.subscriptions.push(B),a.logToOutput("Registered tool: go_to_connections_view");const J=o.lm.registerTool("go_to_variables_view",new I.GoToVariablesViewTool);t.subscriptions.push(J),a.logToOutput("Registered tool: go_to_variables_view");const X=o.lm.registerTool("go_to_configs_view",new R.GoToConfigsViewTool);t.subscriptions.push(X),a.logToOutput("Registered tool: go_to_configs_view");const Z=o.lm.registerTool("go_to_plugins_view",new A.GoToPluginsViewTool);t.subscriptions.push(Z),a.logToOutput("Registered tool: go_to_plugins_view");const K=o.lm.registerTool("go_to_server_health_view",new k.GoToServerHealthViewTool);t.subscriptions.push(K),a.logToOutput("Registered tool: go_to_server_health_view"),a.logToOutput("All Language Model Tools registered successfully")}}t.AIHandler=P},5664:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>u,_1:()=>o,bA:()=>a,hW:()=>r,s6:()=>s,vR:()=>i});var r="function",o="object",a="undefined",i="prototype",s=Object,u=s[i]},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTriggered=function(e,t,n){e instanceof r.DagView||!r.DagView.Current||r.DagView.Current.dagId!==t||r.DagView.Current.goToDagRun(t,n),e instanceof o.DagTreeView||!o.DagTreeView.Current||o.DagTreeView.Current?.notifyDagStateWithDagId(t,n,"queued")},t.DagRunCancelled=function(e,t,n){e instanceof r.DagView||!r.DagView.Current||r.DagView.Current.dagId!==t||r.DagView.Current.goToDagRun(t,n),e instanceof o.DagTreeView||!o.DagTreeView.Current||o.DagTreeView.Current?.notifyDagStateWithDagId(t,n,"failed")},t.DagPaused=function(e,t){e instanceof r.DagView||!r.DagView.Current||r.DagView.Current.dagId!==t||r.DagView.Current.loadDagInfoOnly(),e instanceof o.DagTreeView||!o.DagTreeView.Current||o.DagTreeView.Current?.notifyDagPaused(t)},t.DagUnPaused=function(e,t){e instanceof r.DagView||!r.DagView.Current||r.DagView.Current.dagId!==t||r.DagView.Current.loadDagInfoOnly(),e instanceof o.DagTreeView||!o.DagTreeView.Current||o.DagTreeView.Current?.notifyDagUnPaused(t)};const r=n(1430),o=n(2)},5914:function(e,t,n){var r;e=n.nmd(e),function(){var o=(e&&e.exports,"object"==typeof global&&global);o.global!==o&&o.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var i=function(e){throw new a(e)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,l={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,o,a=e.length%3,u="",l=-1,c=e.length-a;++l<c;)t=e.charCodeAt(l)<<16,n=e.charCodeAt(++l)<<8,r=e.charCodeAt(++l),u+=s.charAt((o=t+n+r)>>18&63)+s.charAt(o>>12&63)+s.charAt(o>>6&63)+s.charAt(63&o);return 2==a?(t=e.charCodeAt(l)<<8,n=e.charCodeAt(++l),u+=s.charAt((o=t+n)>>10)+s.charAt(o>>4&63)+s.charAt(o<<2&63)+"="):1==a&&(o=e.charCodeAt(l),u+=s.charAt(o>>2)+s.charAt(o<<4&63)+"=="),u},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,a="",l=-1;++l<t;)r=s.indexOf(e.charAt(l)),n=o%4?64*n+r:r,o++%4&&(a+=String.fromCharCode(255&n>>(-2*o&6)));return a},version:"1.0.0"};void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r)}()},6149:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>$,Fc:()=>M,Hm:()=>x,ML:()=>E,ee:()=>V,mB:()=>P,oS:()=>F,sq:()=>H,vF:()=>N});var r=n(269),o=n(6182),a=n(737),i=n(6492),s="on",u="attachEvent",l="addEventListener",c="detachEvent",d="removeEventListener",g="events",f="visibilitychange",p="pagehide",h="pageshow",v="unload",m="beforeunload",y=(0,a.Z)("aiEvtPageHide"),w=(0,a.Z)("aiEvtPageShow"),b=/\.[\.]+/g,_=/[\.]+$/,S=1,T=(0,a.T)("events"),D=/^([^.]*)(?:\.(.+)|)/;function C(e){return e&&e[o.W7]?e[o.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,i.m5):e}function I(e,t){if(t){var n=i.m5;(0,r.cyL)(t)?(n=i.m5,(0,r.Iuo)(t,(function(e){(e=C(e))&&("."!==e[0]&&(e="."+e),n+=e)}))):n=C(t),n&&("."!==n[0]&&(n="."+n),e=(e||i.m5)+n)}var a=D.exec(e||i.m5)||[];return{type:a[1],ns:(a[2]||i.m5).replace(b,".").replace(_,i.m5)[o.sY](".").sort().join(".")}}function R(e,t,n){void 0===n&&(n=!0);var r=T.get(e,g,{},n),o=r[t];return o||(o=r[t]=[]),o}function A(e,t,n,r){e&&t&&t[o.QM]&&(e[d]?e[d](t[o.QM],n,r):e[c]&&e[c](s+t[o.QM],n))}function k(e,t,n,r){for(var a=t[o.oI];a--;){var i=t[a];i&&(n.ns&&n.ns!==i[o.RD].ns||r&&!r(i)||(A(e,i[o.RD],i.handler,i.capture),t[o.Ic](a,1)))}}function x(e,t){return t?I("xx",(0,r.cyL)(t)?[e].concat(t):[e,t]).ns[o.sY]("."):e}function P(e,t,n,r,a){void 0===a&&(a=!1);var i=!1;if(e)try{var c=I(t,r);if(i=function(e,t,n,r){var a=!1;return e&&t&&t[o.QM]&&n&&(e[l]?(e[l](t[o.QM],n,r),a=!0):e[u]&&(e[u](s+t[o.QM],n),a=!0)),a}(e,c,n,a),i&&T.accept(e)){var d={guid:S++,evtName:c,handler:n,capture:a};R(e,c.type)[o.y5](d)}}catch(e){}return i}function E(e,t,n,a,i){if(void 0===i&&(i=!1),e)try{var s=I(t,a),u=!1;!function(e,t,n){if(t[o.QM])k(e,R(e,t[o.QM]),t,n);else{var a=T.get(e,g,{});(0,r.zav)(a,(function(r,o){k(e,o,t,n)})),0===(0,r.cGk)(a)[o.oI]&&T.kill(e,g)}}(e,s,(function(e){return!((!s.ns||n)&&e.handler!==n||(u=!0,0))})),u||A(e,s,n,i)}catch(e){}}function O(e,t,n,a){var i=!1;return t&&e&&e[o.oI]>0&&(0,r.Iuo)(e,(function(e){e&&(n&&-1!==(0,r.rDm)(n,e)||(i=function(e,t,n){var o=!1,a=(0,r.zkX)();a&&(o=P(a,e,t,n),o=P(a.body,e,t,n)||o);var i=(0,r.YEm)();return i&&(o=P(i,e,t,n)||o),o}(e,t,a)||i))})),i}function L(e,t,n){e&&(0,r.cyL)(e)&&(0,r.Iuo)(e,(function(e){e&&function(e,t,n){var o=(0,r.zkX)();o&&(E(o,e,t,n),E(o.body,e,t,n));var a=(0,r.YEm)();a&&E(a,e,t,n)}(e,t,n)}))}function V(e,t,n){return function(e,t,n,a){var i=!1;return t&&e&&(0,r.cyL)(e)&&!(i=O(e,t,n,a))&&n&&n[o.oI]>0&&(i=O(e,t,null,a)),i}([m,v,p],e,t,n)}function $(e,t){L([m,v,p],e,t)}function M(e,t,n){var o=x(y,n),a=O([p],e,t,o);return t&&-1!==(0,r.rDm)(t,f)||(a=O([f],(function(t){var n=(0,r.YEm)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,o)||a),!a&&t&&(a=M(e,null,n)),a}function H(e,t){var n=x(y,t);L([p],e,n),L([f],null,n)}function F(e,t,n){var o=x(w,n),a=O([h],e,t,o);return!(a=O([f],(function(t){var n=(0,r.YEm)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,o)||a)&&t&&(a=F(e,null,n)),a}function N(e,t){var n=x(w,t);L([h],e,n),L([f],null,n)}},6182:(e,t,n)=>{"use strict";n.d(t,{$5:()=>_,$o:()=>x,AP:()=>w,Bl:()=>k,Cd:()=>X,DI:()=>S,Di:()=>C,HC:()=>$,Ic:()=>c,Ik:()=>P,JR:()=>E,Ju:()=>p,OL:()=>r,O_:()=>Z,QM:()=>G,RD:()=>U,RF:()=>y,RS:()=>b,Re:()=>q,Rr:()=>ne,Sj:()=>j,Uw:()=>d,Vq:()=>ee,W7:()=>z,XM:()=>D,YH:()=>H,Zu:()=>J,_w:()=>g,by:()=>R,c1:()=>Q,cV:()=>W,cp:()=>Y,do:()=>te,e4:()=>L,e_:()=>K,h3:()=>h,ih:()=>i,mE:()=>f,oI:()=>o,on:()=>a,pF:()=>T,pM:()=>O,s:()=>A,sY:()=>N,tI:()=>I,tX:()=>F,tZ:()=>m,tn:()=>V,uR:()=>M,vR:()=>v,wJ:()=>B,x6:()=>s,y5:()=>l,y9:()=>u});var r="toLowerCase",o="length",a="warnToConsole",i="throwInternal",s="watch",u="apply",l="push",c="splice",d="logger",g="cancel",f="initialize",p="identifier",h="removeNotificationListener",v="addNotificationListener",m="isInitialized",y="getNotifyMgr",w="getPlugin",b="name",_="processNext",S="getProcessTelContext",T="value",D="enabled",C="stopPollingInternalLogs",I="unload",R="onComplete",A="version",k="loggingLevelConsole",x="createNew",P="teardown",E="messageId",O="message",L="diagLog",V="_doTeardown",$="update",M="getNext",H="setNextPlugin",F="userAgent",N="split",z="replace",q="substring",j="indexOf",G="type",U="evtName",W="status",B="getAllResponseHeaders",J="isChildEvt",X="data",Z="getCtx",K="setCtx",Y="itemsReceived",Q="headers",ee="urlString",te="timeout",ne="traceFlags"},6203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PauseDagTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.PauseDagTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n}=e.input,o=new r.MarkdownString;return o.isTrusted=!0,o.appendMarkdown("## âš ï¸ Pause DAG Confirmation\n\n"),o.appendMarkdown("You are about to **PAUSE** the following DAG:\n\n"),o.appendMarkdown(`**DAG ID:** \`${n}\`\n\n`),o.appendMarkdown("**Effect:** No new runs will be scheduled for this DAG.\n\n"),o.appendMarkdown("Do you want to proceed?"),{invocationMessage:`Pausing DAG: ${n}`,confirmationMessages:{title:"Confirm Pause DAG",message:o}}}async invoke(e,t){const{dagId:n}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("PauseDagTool.invoke");try{return await this.client.pauseDag(n,!0),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âœ… Successfully PAUSED DAG: **${n}**`)])}catch(e){return a.Telemetry.Current.sendError("PauseDagTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to pause DAG ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},6304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toISODateString=function(e){return e?e.toISOString().split("T")[0]:""},t.toISODateTimeString=function(e){return e?e.toISOString().replace("T"," ").substring(0,19):""},t.getUri=function(e,t,n){return e.asWebviewUri(o.Uri.joinPath(t,...n))},t.showOutputMessage=function(e,t="Results are printed to OUTPUT / Airflow-Extension"){s||(s=r.window.createOutputChannel("Airflow-Extension")),s.clear(),"object"==typeof e?s.appendLine(JSON.stringify(e,null,4)):s.appendLine(e),s.show(),d(t)},t.logToOutput=c,t.showInfoMessage=d,t.showWarningMessage=function(e){r.window.showWarningMessage(e)},t.showErrorMessage=function(e,t=void 0){t?r.window.showErrorMessage(e+l+t.name+l+t.message):r.window.showErrorMessage(e)},t.showApiErrorMessage=function(e,t){let n="";t?403===t.status?(n="Permission Denied !!!",r.window.showErrorMessage(n)):401===t.status?(n="Invalid Authentication Info !!!",r.window.showErrorMessage(n)):404===t.status?(n="Resource Not Found !!!",r.window.showErrorMessage(n)):r.window.showErrorMessage(n):r.window.showErrorMessage(e)},t.getExtensionVersion=function(){const{version:e}=JSON.parse((0,a.readFileSync)((0,i.join)(__dirname,"..","package.json"),{encoding:"utf8"}));return e},t.openFile=function(e){(async()=>{try{const t=await r.workspace.openTextDocument(r.Uri.file(e));await r.window.showTextDocument(t,{viewColumn:r.ViewColumn.One,preview:!1})}catch(e){c("openFile Error",e)}})()},t.getDuration=function(e,t){return e?((!t||t<e)&&(t=new Date),f(t.valueOf()-e.valueOf())):""},t.convertMsToTime=f,t.isJsonString=function(e){try{return"object"==typeof JSON.parse(e)}catch(e){return!1}},t.isValidDate=function(e){if(!e.match(/^\d{4}-\d{2}-\d{2}$/))return!1;const t=new Date(e),n=t.getTime();return!(!n&&0!==n)&&t.toISOString().slice(0,10)===e};const r=n(1398),o=n(1398),a=n(9896),i=n(6928);let s,u;const l="\n\n";function c(e,t=void 0){const n=(new Date).toLocaleString();u||(u=r.window.createOutputChannel("Airflow-Log")),"object"==typeof e?u.appendLine("["+n+"] "+JSON.stringify(e,null,4)):u.appendLine("["+n+"] "+e),t&&(u.appendLine(t.name),u.appendLine(t.message),t.stack&&u.appendLine(t.stack))}function d(e){r.window.showInformationMessage(e)}function g(e){return e.toString().padStart(2,"0")}function f(e){let t=Math.floor(e/1e3),n=Math.floor(t/60);const r=Math.floor(n/60);return t%=60,n%=60,`${g(r)}:${g(n)}:${g(t)}`}},6492:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>l,Ev:()=>w,Fk:()=>_,HP:()=>r,Hr:()=>u,LZ:()=>a,QW:()=>S,Vj:()=>y,Vo:()=>g,Yd:()=>s,Yp:()=>p,dI:()=>h,eT:()=>i,fc:()=>f,jy:()=>c,kI:()=>b,l0:()=>v,m5:()=>o,qT:()=>d,s4:()=>m,vf:()=>D,xW:()=>T,yy:()=>C});var r=void 0,o="",a="channels",i="core",s="createPerfMgr",u="disabled",l="extensionConfig",c="extensions",d="processTelemetry",g="priority",f="eventsSent",p="eventsDiscarded",h="eventsSendRequest",v="perfEvent",m="offlineEventsStored",y="offlineBatchSent",w="offlineBatchDrop",b="getPerfMgr",_="domain",S="path",T="Not dynamic - ",D="REDACTED",C=["sig","Signature","AWSAccessKeyId","X-Goog-Signature"]},6925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginsView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("PluginsView.constructor Started"),i.Telemetry.Current.send("PluginsView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("PluginsView.constructor Completed")}async loadData(){o.logToOutput("PluginsView.loadData Started"),i.Telemetry.Current.send("PluginsView.loadData.called");const e=await a.Session.Current.Api.getPlugins();e.isSuccessful&&(this.pluginsJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("PluginsView.renderHtml Started"),i.Telemetry.Current.send("PluginsView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("PluginsView.renderHtml Completed")}static render(){if(o.logToOutput("PluginsView.render Started"),i.Telemetry.Current.send("PluginsView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("pluginsView","Plugins",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("PluginsView.dispose Started"),i.Telemetry.Current.send("PluginsView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("PluginsView._getWebviewContent Started"),i.Telemetry.Current.send("PluginsView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]);let s="";if(this.pluginsJson&&this.pluginsJson.plugins)for(const e of this.pluginsJson.plugins){const t=e.name||"N/A",n=e.hooks&&e.hooks.length>0?e.hooks.join(", "):"None",r=e.executors&&e.executors.length>0?e.executors.join(", "):"None",o=e.macros&&e.macros.length>0?e.macros.map((e=>e.name)).join(", "):"None";s+=`\n                <tr class="table-row">\n                    <td>${this._escapeHtml(t)}</td>\n                    <td>${this._escapeHtml(n)}</td>\n                    <td>${this._escapeHtml(r)}</td>\n                    <td>${this._escapeHtml(o)}</td>\n                </tr>`}return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${a}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Plugins</title>\n      </head>\n      <body>  \n        <h2>Airflow Plugins</h2>\n        <div class="controls">\n            <vscode-button appearance="secondary" id="refresh-plugins">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Hooks</th>\n                    <th>Executors</th>\n                    <th>Macros</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${s||'<tr><td colspan="4" style="text-align:center; padding: 20px; opacity: 0.7;">No plugins found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("PluginsView._setWebviewMessageListener Started"),i.Telemetry.Current.send("PluginsView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("PluginsView._setWebviewMessageListener Message Received "+e.command),"refresh-plugins"!==e.command||this.loadData()}),void 0,this._disposables)}}t.PluginsView=s},6928:e=>{"use strict";e.exports=require("path")},6967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=void 0;const r=n(5497),o=n(1398);class a{constructor(e){this.connectionString="InstrumentationKey=10fbe7b4-13da-4481-ab61-902bd7acac44;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/;ApplicationId=1af62da8-61c9-4cb6-8c9b-34d84e6e8bfe",this.reporter=void 0,a.Current=this,o.env.isTelemetryEnabled&&this.connectionString&&(this.reporter=new r.TelemetryReporter(this.connectionString),e.subscriptions.push(this.reporter))}send(e,t,n){o.env.isTelemetryEnabled&&this.reporter&&this.reporter.sendTelemetryEvent(e,t,n)}sendError(e,t,n){if(o.env.isTelemetryEnabled&&this.reporter)if(t instanceof Error)this.reporter.sendTelemetryErrorEvent(e,{message:t.message,name:t.name,stack:t.stack??""},n);else{const r=t||{};this.reporter.sendTelemetryErrorEvent(e,r,n)}}dispose(){this.reporter&&this.reporter.dispose()}}t.Telemetry=a},6982:e=>{"use strict";e.exports=require("crypto")},6987:(e,t,n)=>{"use strict";n.d(t,{e:()=>D,a:()=>C});var r=n(269),o=n(737),a=n(6492),i=n(6182),s=n(991),u=(0,r.eCG)("[[ai_dynCfg_1]]"),l=(0,r.eCG)("[[ai_blkDynCfg_1]]"),c=(0,r.eCG)("[[ai_frcDynCfg_1]]");function d(e){var t;return e&&((0,r.cyL)(e)?(t=[])[i.oI]=e[i.oI]:(0,r.QdQ)(e)&&(t={}),t)?((0,r.zav)(e,(function(e,n){t[e]=d(n)})),t):e}function g(e,t,n){var o=!1;return n&&!e[t.blkVal]&&((o=n[c])||n[l]||(o=(0,r.QdQ)(n)||(0,r.cyL)(n))),o}function f(e){(0,r.zkd)("InvalidAccess:"+e)}var p,h=["push","pop","shift","unshift","splice"],v=function(e,t,n,o){e&&e[i.ih](3,108,"".concat(n," [").concat(t,"] failed - ")+(0,r.mmD)(o))};function m(e,t){var n=(0,r.kgX)(e,t);return n&&n.get}function y(e,t,n,o){if(t){var s=m(t,n);s&&s[e.prop]?t[n]=o:function(e,t,n,o){var s={n,h:[],trk:function(t){t&&t.fn&&(-1===(0,r.rDm)(s.h,t)&&s.h[i.y5](t),e.trk(t,s))},clr:function(e){var t=(0,r.rDm)(s.h,e);-1!==t&&s.h[i.Ic](t,1)}},l=!0,c=!1;function d(){l&&(c=c||g(d,e,o),o&&!o[u]&&c&&(o=b(e,o,n,"Converting")),l=!1);var t=e.act;return t&&s.trk(t),o}d[e.prop]={chng:function(){e.add(s)}},(0,r.vF1)(t,s.n,{g:d,s:function(p){if(o!==p){d[e.ro]&&!e.upd&&f("["+n+"] is read-only:"+(0,r.mmD)(t)),l&&(c=c||g(d,e,o),l=!1);var h=c&&d[e.rf];if(c)if(h){(0,r.zav)(o,(function(e){o[e]=p?p[e]:a.HP}));try{(0,r.zav)(p,(function(t,n){y(e,o,t,n)})),p=o}catch(t){v((e.hdlr||{})[i.Uw],n,"Assigning",t),c=!1}}else o&&o[u]&&(0,r.zav)(o,(function(t){var n=m(o,t);if(n){var r=n[e.prop];r&&r.chng()}}));if(p!==o){var w=p&&g(d,e,p);!h&&w&&(p=b(e,p,n,"Converting")),o=p,c=w}e.add(s)}}})}(e,t,n,o)}return t}function w(e,t,n,o){if(t){var a=m(t,n),s=a&&!!a[e.prop],u=o&&o[0],c=o&&o[1],d=o&&o[2];if(!s){if(d)try{!function(e){if(e&&((0,r.QdQ)(e)||(0,r.cyL)(e)))try{e[l]=!0}catch(e){}}(t)}catch(t){v((e.hdlr||{})[i.Uw],n,"Blocking",t)}try{y(e,t,n,t[n]),a=m(t,n)}catch(t){v((e.hdlr||{})[i.Uw],n,"State",t)}}u&&(a[e.rf]=u),c&&(a[e.ro]=c),d&&(a[e.blkVal]=!0)}return t}function b(e,t,n,o){try{(0,r.zav)(t,(function(n,r){y(e,t,n,r)})),t[u]||((0,r.UxO)(t,u,{get:function(){return e.hdlr}}),function(e,t,n){(0,r.cyL)(t)&&(0,r.Iuo)(h,(function(r){var o=t[r];t[r]=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=o[i.y9](this,r);return b(e,t,n,"Patching"),s}}))}(e,t,n))}catch(t){v((e.hdlr||{})[i.Uw],n,o,t)}return t}var _="[[ai_",S="]]";function T(e,t,n){var a=function(e){if(e){var t=e[u]||e;if(t.cfg&&(t.cfg===e||t.cfg[u]===t))return t}return null}(t);if(a)return a;var l,c=(0,o.Z)("dyncfg",!0),g=t&&!1!==n?t:d(t),f={uid:null,cfg:g,logger:e,notify:function(){l.notify()},set:function(t,n,r){try{t=y(l,t,n,r)}catch(t){v(e,n,"Setting value",t)}return t[n]},setDf:function(e,t){return t&&(0,r.zav)(t,(function(t,n){(0,s.q)(f,e,t,n)})),e},watch:function(e){return function(e,t){var n={fn:t,rm:function(){n.fn=null,e=null,t=null}};return(0,r.vF1)(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),e.use(n,t),n}(l,e)},ref:function(e,t){var n;return w(l,e,t,(n={},n[0]=!0,n))[t]},rdOnly:function(e,t){var n;return w(l,e,t,(n={},n[1]=!0,n))[t]},blkVal:function(e,t){var n;return w(l,e,t,(n={},n[2]=!0,n))[t]},_block:function(e,t){l.use(null,(function(n){var o=l.upd;try{(0,r.b07)(t)||(l.upd=t),e(n)}finally{l.upd=o}}))}};return(0,r.vF1)(f,"uid",{c:!1,e:!1,w:!1,v:c}),b(l=function(e){var t,n=(0,r.jjc)(_+"get"+e.uid+S),o=(0,r.jjc)(_+"ro"+e.uid+S),a=(0,r.jjc)(_+"rf"+e.uid+S),s=(0,r.jjc)(_+"blkVal"+e.uid+S),u=(0,r.jjc)(_+"dtl"+e.uid+S),l=null,c=null;function d(n,o){var a=t.act;try{t.act=n,n&&n[u]&&((0,r.Iuo)(n[u],(function(e){e.clr(n)})),n[u]=[]),o({cfg:e.cfg,set:e.set.bind(e),setDf:e.setDf.bind(e),ref:e.ref.bind(e),rdOnly:e.rdOnly.bind(e)})}catch(t){var s=e[i.Uw];throw s&&s[i.ih](1,107,(0,r.mmD)(t)),t}finally{t.act=a||null}}function g(){if(l){var e=l;l=null,c&&c[i._w](),c=null;var t=[];if((0,r.Iuo)(e,(function(e){if(e&&(e[u]&&((0,r.Iuo)(e[u],(function(t){t.clr(e)})),e[u]=null),e.fn))try{d(e,e.fn)}catch(e){t[i.y5](e)}})),l)try{g()}catch(e){t[i.y5](e)}t[i.oI]>0&&function(e,t){p||(p=(0,r.aqQ)("AggregationError",(function(e,t){t[i.oI]>1&&(e.errors=t[1])})));var n="Watcher error(s): ";throw(0,r.Iuo)(t,(function(e,t){n+="\n".concat(t," > ").concat((0,r.mmD)(e))})),new p(n,t||[])}(0,t)}}return t={prop:n,ro:o,rf:a,blkVal:s,hdlr:e,add:function(e){if(e&&e.h[i.oI]>0){l||(l=[]),c||(c=(0,r.dRz)((function(){c=null,g()}),0));for(var t=0;t<e.h[i.oI];t++){var n=e.h[t];n&&-1===(0,r.rDm)(l,n)&&l[i.y5](n)}}},notify:g,use:d,trk:function(e,t){if(e){var n=e[u]=e[u]||[];-1===(0,r.rDm)(n,t)&&n[i.y5](t)}}}}(f),g,"config","Creating"),f}function D(e,t,n,r){var o=T(n,e||{},r);return t&&o.setDf(o.cfg,t),o}function C(e,t,n){var o=e[u]||e;return!o.cfg||o.cfg!==e&&o.cfg[u]!==o?(function(e,t){e?(e[i.on](t),e[i.ih](2,108,t)):f(t)}(n,a.xW+(0,r.mmD)(e)),D(e,null,n)[i.x6](t)):o[i.x6](t)}},7138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancelDagRunTool=void 0;const r=n(1398),o=n(5617),a=n(6967);t.CancelDagRunTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const{dagId:n}=e.input;let o="";try{const e=await this.client.getLatestDagRun(n);!e||"running"!==e.state&&"queued"!==e.state||(o=`\n**Current Run:** \`${e.dag_run_id}\`\n**State:** ${e.state}\n\n`)}catch(e){}const a=new r.MarkdownString;return a.isTrusted=!0,a.appendMarkdown("## âš ï¸ Cancel DAG Run Confirmation\n\n"),a.appendMarkdown("You are about to **CANCEL** the running DAG run for:\n\n"),a.appendMarkdown(`**DAG ID:** \`${n}\`\n`),o&&a.appendMarkdown(o),a.appendMarkdown("**Effect:** The current DAG run will be marked as failed and cancelled.\n\n"),a.appendMarkdown("Do you want to proceed?"),{invocationMessage:`Cancelling DAG run: ${n}`,confirmationMessages:{title:"Confirm Cancel DAG Run",message:a}}}async invoke(e,t){const{dagId:n}=e.input;o.AIHandler.Current.currentDagId=n,a.Telemetry.Current.send("CancelDagRunTool.invoke");try{const e=await this.client.getLatestDagRun(n);if(!e)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ No DAG run found for '${n}'.`)]);if("running"!==e.state&&"queued"!==e.state)return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`â„¹ï¸ DAG '${n}' is not currently running.\n\nLatest run state: **${e.state}**\nRun ID: \`${e.dag_run_id}\``)]);await this.client.cancelDagRun(n,e.dag_run_id);const t=["âœ… **Success!** DAG run cancelled.","",`- **DAG ID:** ${n}`,`- **Run ID:** ${e.dag_run_id}`,`- **Previous State:** ${e.state}`,"","The DAG run has been marked as failed and cancelled."].join("\n");return new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){return a.Telemetry.Current.sendError("CancelDagRunTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to cancel DAG run for ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},7288:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(3720);const o=class extends r.A{#o=0;#a="";constructor(e,t,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),null===n&&(n={});const r=void 0===n.lastModified?Date.now():Number(n.lastModified);Number.isNaN(r)||(this.#o=r),this.#a=String(t)}get name(){return this.#a}get lastModified(){return this.#o}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof r.A&&/^(File)$/.test(e[Symbol.toStringTag])}}},7292:(e,t,n)=>{"use strict";n.d(t,{L0:()=>E,MY:()=>A,PV:()=>V,R7:()=>L,S4:()=>M,U5:()=>C,Uf:()=>O,Z:()=>I,g$:()=>D,hm:()=>R,iN:()=>k,lT:()=>P,lV:()=>x,xk:()=>$});var r=n(5664),o=n(269),a=n(6182),i=n(3673),s=n(6492),u="documentMode",l="location",c="console",d="JSON",g="crypto",f="msCrypto",p="ReactNative",h="msie",v="trident/",m="XMLHttpRequest",y=null,w=null,b=!1,_=null,S=null;function T(e,t){var n=!1;if(e){try{if(!(n=t in e)){var a=e[r.vR];a&&(n=t in a)}}catch(e){}if(!n)try{var i=new e;n=!(0,o.b07)(i[t])}catch(e){}}return n}function D(e){if(e&&b){var t=(0,o.zS2)("__mockLocation");if(t)return t}return typeof location===r._1&&location?location:(0,o.zS2)(l)}function C(){return typeof console!==r.bA?console:(0,o.zS2)(c)}function I(){return Boolean(typeof JSON===r._1&&JSON||null!==(0,o.zS2)(d))}function R(){return I()?JSON||(0,o.zS2)(d):null}function A(){return(0,o.zS2)(g)}function k(){return(0,o.zS2)(f)}function x(){var e=(0,o.w3n)();return!(!e||!e.product)&&e.product===p}function P(){var e=(0,o.w3n)();if(e&&(e[a.tX]!==w||null===y)){var t=((w=e[a.tX])||s.m5)[a.OL]();y=(0,i.Ju)(t,h)||(0,i.Ju)(t,v)}return y}function E(e){if(void 0===e&&(e=null),!e){var t=(0,o.w3n)()||{};e=t?(t.userAgent||s.m5)[a.OL]():s.m5}var n=(e||s.m5)[a.OL]();if((0,i.Ju)(n,h)){var r=(0,o.YEm)()||{};return(0,o.JBS)(parseInt(n[a.sY](h)[1]),r[u]||0)}if((0,i.Ju)(n,v)){var l=parseInt(n[a.sY](v)[1]);if(l)return l+4}return null}function O(e){return null!==S&&!1!==e||(S=(0,o.w9M)()&&Boolean((0,o.w3n)().sendBeacon)),S}function L(e){var t=!1;try{t=!!(0,o.zS2)("fetch");var n=(0,o.zS2)("Request");t&&e&&n&&(t=T(n,"keepalive"))}catch(e){}return t}function V(){return null===_&&(_=typeof XDomainRequest!==r.bA)&&$()&&(_=_&&!T((0,o.zS2)(m),"withCredentials")),_}function $(){var e=!1;try{e=!!(0,o.zS2)(m)}catch(e){}return e}function M(e,t){if(!e||!(0,o.KgX)(e)||-1!==e[a.Sj](" "))return e;if(t&&!1===t.redactUrls)return e;var n=-1!==(0,o.HzD)(e,"@"),r=-1!==(0,o.HzD)(e,"?");if(!n&&!r)return e;try{var i=e;return n&&(i=e.replace(/^([a-zA-Z][a-zA-Z0-9+.-]*:\/\/)([^:@]{1,200}):([^@]{1,200})@(.*)$/,"$1REDACTED:REDACTED@$4")),r&&(i=function(e,t){var n,r=(0,o.HzD)(e,"?");if(-1===r)return e;n=t&&t.redactQueryParams?s.yy.concat(t.redactQueryParams):s.yy;var i=(0,o.P0f)(e,0,r+1),u=(0,o.P0f)(e,r+1),l=s.m5,c=(0,o.HzD)(u,"#");-1!==c&&(l=(0,o.P0f)(u,c),u=(0,o.P0f)(u,0,c));for(var d=!1,g=0;g<n[a.oI];g++){var f=n[g]+"=";if(-1!==(0,o.HzD)(u,f)){d=!0;break}}if(!d)return e;var p=[],h=!1;if(u&&u[a.oI]){var v=u[a.sY]("&");for(g=0;g<v[a.oI];g++){var m=v[g];if(m){var y=(0,o.HzD)(m,"=");if(-1===y)p[a.y5](m);else{var w=m[a.Re](0,y);if(m[a.Re](y+1)===s.m5)p[a.y5](m);else{for(var b=!1,_=0;_<n[a.oI];_++)if(w===n[_]){b=!0,h=!0;break}b?p[a.y5](w+"="+s.vf):p[a.y5](m)}}}}}return h?i+p.join("&")+l:e}(i,t)),i}catch(t){return e}}},7295:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProvidersView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("ProvidersView.constructor Started"),i.Telemetry.Current.send("ProvidersView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("ProvidersView.constructor Completed")}async loadData(){o.logToOutput("ProvidersView.loadData Started"),i.Telemetry.Current.send("ProvidersView.loadData.called");const e=await a.Session.Current.Api.getProviders();e.isSuccessful&&(this.providersJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("ProvidersView.renderHtml Started"),i.Telemetry.Current.send("ProvidersView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("ProvidersView.renderHtml Completed")}static render(){if(o.logToOutput("ProvidersView.render Started"),i.Telemetry.Current.send("ProvidersView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("providersView","Providers",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("ProvidersView.dispose Started"),i.Telemetry.Current.send("ProvidersView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("ProvidersView._getWebviewContent Started"),i.Telemetry.Current.send("ProvidersView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]);let s="";if(this.providersJson&&this.providersJson.providers)for(const e of this.providersJson.providers){const t=e.package_name||"N/A",n=e.version||"N/A",r=e.description||"N/A";s+=`\n                <tr class="table-row">\n                    <td>${this._escapeHtml(t)}</td>\n                    <td>${this._escapeHtml(n)}</td>\n                    <td>${this._escapeHtml(r)}</td>\n                </tr>`}return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${a}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Providers</title>\n      </head>\n      <body>  \n        <h2>Airflow Providers</h2>\n        <div class="controls">\n            <vscode-button appearance="secondary" id="refresh-providers">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Package Name</th>\n                    <th>Version</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${s||'<tr><td colspan="3" style="text-align:center; padding: 20px; opacity: 0.7;">No providers found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("ProvidersView._setWebviewMessageListener Started"),i.Telemetry.Current.send("ProvidersView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("ProvidersView._setWebviewMessageListener Message Received "+e.command),"refresh-providers"!==e.command||this.loadData()}),void 0,this._disposables)}}t.ProvidersView=s},7364:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdminTreeItem=void 0;const r=n(1398);class o extends r.TreeItem{constructor(e,t,n,r){super(e,t),this.label=e,this.collapsibleState=t,this.command=n,this.iconPath=r,this.command=n,this.iconPath=r}}t.AdminTreeItem=o},7575:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToDagRunHistoryTool=void 0;const r=n(1398),o=n(2636),a=n(9071),i=n(5617),s=n(6967);t.GoToDagRunHistoryTool=class{constructor(){}async prepareInvocation(e,t){const{dagId:n,startDate:r,endDate:o,status:a}=e.input;let i=`Opening DAG Run History for: **${n}**`;return r&&(i+=`\nStart Date: **${r}**`),o&&(i+=`\nEnd Date: **${o}**`),a&&(i+=`\nStatus Filter: **${a}**`),{invocationMessage:i}}async invoke(e,t){const{dagId:n,startDate:u,endDate:l,status:c}=e.input;i.AIHandler.Current.currentDagId=n,s.Telemetry.Current.send("GoToDagRunHistoryTool.invoke");try{if(!o.Session.Current.Api)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")]);const e=/^\d{4}-\d{2}-\d{2}$/;if(u&&!e.test(u))return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Invalid startDate format: "${u}". Expected format: YYYY-MM-DD`)]);if(l&&!e.test(l))return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Invalid endDate format: "${l}". Expected format: YYYY-MM-DD`)]);const t=["success","failed","running","queued","upstream_failed","skipped","deferred"];if(c&&!t.includes(c.toLowerCase()))return new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Invalid status: "${c}". Valid values: ${t.join(", ")}`)]);a.DagRunView.render(n,u,l,c?.toLowerCase());let i=`âœ… Opened DAG Run History for: **${n}**`;const s=[];return u&&s.push(`Start Date: ${u}`),l&&s.push(`End Date: ${l}`),c&&s.push(`Status: ${c}`),s.length>0&&(i+=`\nðŸ“‹ Filters applied: ${s.join(", ")}`),new r.LanguageModelToolResult([new r.LanguageModelTextPart(i)])}catch(e){return s.Telemetry.Current.sendError("GoToDagRunHistoryTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open DAG Run History for ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},7738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DailyDagRunView=void 0;const r=n(1398),o=n(6304),a=n(1430),i=n(2636),s=n(5072),u=n(6967);class l{constructor(e){this._disposables=[],this.selectedDate=o.toISODateString(new Date),this.selectedStatus="",this.selectedDagId="",this.allDagIds=[],o.logToOutput("DailyDagRunView.constructor Started"),u.Telemetry.Current.send("DailyDagRunView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("DailyDagRunView.constructor Completed")}async loadData(){if(o.logToOutput("DailyDagRunView.loadData Started"),u.Telemetry.Current.send("DailyDagRunView.loadData.called"),!i.Session.Current.Api)return;const e=await i.Session.Current.Api.getDagList();if(e.isSuccessful&&Array.isArray(e.result)&&(this.allDagIds=e.result.map((e=>e.dag_id)).sort()),this.selectedDagId){const e=await i.Session.Current.Api.getDagRunHistory(this.selectedDagId,this.selectedDate);e.isSuccessful&&e.result&&e.result.dag_runs&&(this.dagRunsJson=e.result.dag_runs)}else{const e=[];for(const t of this.allDagIds){const n=await i.Session.Current.Api.getDagRunHistory(t,this.selectedDate);n.isSuccessful&&n.result&&n.result.dag_runs&&e.push(...n.result.dag_runs)}this.dagRunsJson=e}await this.renderHtml()}async renderHtml(){o.logToOutput("DailyDagRunView.renderHtml Started"),u.Telemetry.Current.send("DailyDagRunView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,i.Session.Current.ExtensionUri),o.logToOutput("DailyDagRunView.renderHtml Completed")}static render(){if(o.logToOutput("DailyDagRunView.render Started"),u.Telemetry.Current.send("DailyDagRunView.render.called"),l.Current)l.Current._panel.reveal(r.ViewColumn.One),l.Current.loadData();else{const e=r.window.createWebviewPanel("dailyDagRunView","Daily DAG Runs",r.ViewColumn.One,{enableScripts:!0});l.Current=new l(e)}}dispose(){for(o.logToOutput("DailyDagRunView.dispose Started"),u.Telemetry.Current.send("DailyDagRunView.dispose.called"),l.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("DailyDagRunView._getWebviewContent Started"),u.Telemetry.Current.send("DailyDagRunView._getWebviewContent.called");const n=o.getUri(e,t,["media","style.css"]);let r=[];this.dagRunsJson&&Array.isArray(this.dagRunsJson)&&(r=this.dagRunsJson.filter((e=>!this.selectedStatus||e.state===this.selectedStatus)));let a="";r.forEach((e=>{const t=e.dag_id||"N/A",n=e.state||"N/A",r=e.start_date?o.toISODateTimeString(new Date(e.start_date)):"N/A",i=e.start_date&&e.end_date?o.getDuration(new Date(e.start_date),new Date(e.end_date)):"Running",s=e.conf?JSON.stringify(e.conf):"{}",u=e.note||"",l=e.dag_run_id||"";a+=`\n            <tr class="table-row">\n                <td><a href="#" data-dag-id="${this._escapeHtml(t)}" data-dag-run-id="${this._escapeHtml(l)}" class="dag-link">${this._escapeHtml(t)}</a></td>\n                <td>\n                    <div style="display: flex; align-items: center;">\n                        <div class="state-indicator state-${n}" title="${this._escapeHtml(n)}"></div>\n                        <span>${this._escapeHtml(n)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class="action-links">\n                        <a href="#" data-dag-id="${this._escapeHtml(t)}" data-dag-run-id="${this._escapeHtml(l)}" class="dag-log-link link-button">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(r)}</td>\n                <td><span class="duration-badge">${this._escapeHtml(i)}</span></td>\n                <td><div class="code-block" style="max-height: 50px; overflow: hidden; font-size: 11px;">${this._escapeHtml(s)}</div></td>\n                <td>${this._escapeHtml(u)}</td>\n            </tr>`}));const i=this.allDagIds.map((e=>`<option value="${this._escapeHtml(e)}">${this._escapeHtml(e)}</option>`)).join("");return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <link rel="stylesheet" href="${n}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>Daily DAG Runs</title>\n      </head>\n      <body>  \n        <h2>Daily DAG Runs</h2>\n        \n        <div class="filters">\n            <div class="filter-group">\n                <label>Date</label>\n                <input type="date" id="filter-date" value="${this.selectedDate}">\n            </div>\n            <div class="filter-group">\n                <label>Status</label>\n                <select id="filter-status">\n                    <option value="">All</option>\n                    <option value="success">Success</option>\n                    <option value="failed">Failed</option>\n                    <option value="running">Running</option>\n                    <option value="queued">Queued</option>\n                    <option value="upstream_failed">Upstream Failed</option>\n                </select>\n            </div>\n            <div class="filter-group">\n                <label>DAG ID</label>\n                <select id="filter-dag-id">\n                    <option value="">All DAGs</option>\n                    ${i}\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${a||'<tr><td colspan="7" style="text-align:center; padding: 20px; opacity: 0.7;">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-date', date: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        <\/script>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,(e=>t[e]))}_getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",deferred:"ðŸ”„"}[e.toLowerCase()]||"ðŸ“…"}_setWebviewMessageListener(e){o.logToOutput("DailyDagRunView._setWebviewMessageListener Started"),u.Telemetry.Current.send("DailyDagRunView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{switch(o.logToOutput("DailyDagRunView._setWebviewMessageListener Message Received "+e.command),e.command){case"filter-date":return this.selectedDate=e.date,void this.loadData();case"filter-status":return this.selectedStatus=e.status,void this.renderHtml();case"filter-dag-id":return this.selectedDagId=e.dagId,void this.loadData();case"open-dag-view":return void(i.Session.Current.Api&&e.dagId&&a.DagView.render(e.dagId,e.dagRunId));case"view-dag-log":return void(e.dagId&&s.DagLogView.render(e.dagId,e.dagRunId))}}),void 0,this._disposables)}}t.DailyDagRunView=l},7792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportTreeView=void 0;const r=n(1398),o=n(2110),a=n(6967);t.ReportTreeView=class{constructor(){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,a.Telemetry.Current.send("ReportTreeView.constructor.called")}refresh(){a.Telemetry.Current.send("ReportTreeView.refresh.called"),this._onDidChangeTreeData.fire()}getTreeItem(e){return e}getChildren(e){return e?Promise.resolve([]):Promise.resolve([new o.ReportTreeItem("Daily DAG Runs",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewDagRuns",title:"View Daily DAG Runs",arguments:[]},new r.ThemeIcon("list-selection")),new o.ReportTreeItem("DAG Run History",r.TreeItemCollapsibleState.None,{command:"dagTreeView.viewDagRunHistory",title:"View DAG Run History",arguments:[]},new r.ThemeIcon("history"))])}}},7817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToPluginsViewTool=void 0;const r=n(1398),o=n(2636),a=n(6925),i=n(6967);t.GoToPluginsViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Plugins View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToPluginsViewTool.invoke");try{return o.Session.Current.Api?(a.PluginsView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Plugins View - showing installed Airflow plugins")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToPluginsViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Plugins View: ${e instanceof Error?e.message:String(e)}`)])}}}},7830:e=>{"use strict";e.exports=require("node:stream/web")},7847:(e,t,n)=>{"use strict";n.d(t,{i:()=>r,x:()=>o});var r=500,o="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},7867:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,M:()=>d});var r,o=n(269),a=n(6182),i=n(6492),s=[i.fc,i.Yp,i.dI,i.l0],u=null;function l(e,t){return function(){var n=arguments,r=c(t);if(r){var o=r.listener;o&&o[e]&&o[e][a.y9](o,n)}}}function c(e){var t,n=u;return n||!0===e.disableDbgExt||(n=u||((t=(0,o.zS2)("Microsoft"))&&(u=t.ApplicationInsights),u)),n?n.ChromeDbgExt:null}function d(e){if(!r){r={};for(var t=0;t<s[a.oI];t++)r[s[t]]=l(s[t],e)}return r}},8156:(e,t,n)=>{"use strict";n.d(t,{NS:()=>g,Z4:()=>h,r2:()=>p});var r=n(8279),o=n(269),a=n(6182),i=n(6492),s="ctx",u="ParentContextKey",l="ChildrenContextKey",c=null,d=function(){function e(t,n,r){var i,c=this;c.start=(0,o.f0d)(),c[a.RS]=t,c.isAsync=r,c[a.Zu]=function(){return!1},(0,o.Tnt)(n)&&(0,o.vF1)(c,"payload",{g:function(){return!i&&(0,o.Tnt)(n)&&(i=n(),n=null),i}}),c[a.O_]=function(t){return t?t===e[u]||t===e[l]?c[t]:(c[s]||{})[t]:null},c[a.e_]=function(t,n){t&&(t===e[u]?(c[t]||(c[a.Zu]=function(){return!0}),c[t]=n):t===e[l]?c[t]=n:(c[s]=c[s]||{})[t]=n)},c.complete=function(){var t=0,n=c[a.O_](e[l]);if((0,o.cyL)(n))for(var r=0;r<n[a.oI];r++){var i=n[r];i&&(t+=i.time)}c.time=(0,o.f0d)()-c.start,c.exTime=c.time-t,c.complete=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),g=function(){function e(t){this.ctx={},(0,r.A)(e,this,(function(e){e.create=function(e,t,n){return new d(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&(0,o.Tnt)(t[i.l0])&&t[i.l0](e))},e[a.e_]=function(t,n){t&&((e[s]=e[s]||{})[t]=n)},e[a.O_]=function(t){return(e[s]||{})[t]}}))}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function p(e,t,n,r,o){if(e){var s=e;if(s[i.kI]&&(s=s[i.kI]()),s){var c=void 0,g=s[a.O_](f);try{if(c=s.create(t(),r,o)){if(g&&c[a.e_]&&(c[a.e_](d[u],g),g[a.O_]&&g[a.e_])){var p=g[a.O_](d[l]);p||(p=[],g[a.e_](d[l],p)),p[a.y5](c)}return s[a.e_](f,c),n(c)}}catch(e){c&&c[a.e_]&&c[a.e_]("exception",e)}finally{c&&s.fire(c),s[a.e_](f,g)}}}return n()}function h(){return c}},8167:e=>{"use strict";e.exports=require("worker_threads")},8205:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>l,Qo:()=>O,Rf:()=>P,Xf:()=>L,lh:()=>E,yN:()=>c});var r,o,a,i=n(269),s="Promise",u="rejected";function l(e,t){return c(e,(function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e}),(function(e){return t?t({status:u,rejected:!0,reason:e}):e}))}function c(e,t,n,r){var o=e;try{if((0,i.$XS)(e))(t||n)&&(o=e.then(t,n));else try{t&&(o=t(e))}catch(e){if(!n)throw e;o=n(e)}}finally{r&&function(e,t){var n=e;t&&((0,i.$XS)(e)?n=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t())}(o,r)}return o}var d,g=!1,f=["pending","resolving","resolved",u],p="dispatchEvent";function h(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var v,m,y,w,b="unhandledRejection",_=b.toLowerCase(),S=[],T=0,D=10;function C(e){return(0,i.Tnt)(e)?e.toString():(0,i.mmD)(e)}function I(e,t,n){var u,l,c=(0,i.KVm)(arguments,3),m=0,y=!1,w=[],I=T++,R=S.length>0?S[S.length-1]:void 0,A=!1,k=null;function x(t,n){try{return S.push(I),A=!0,k&&k.cancel(),k=null,e((function(e,r){w.push((function(){try{var o=2===m?t:n,a=(0,i.b07)(o)?u:(0,i.Tnt)(o)?o(u):o;(0,i.$XS)(a)?a.then(e,r):o?e(a):3===m?r(a):e(a)}catch(e){r(e)}})),y&&E()}),c)}finally{S.pop()}}function P(){return f[m]}function E(){if(w.length>0){var e=w.slice();w=[],A=!0,k&&k.cancel(),k=null,t(e)}}function O(e,t){return function(n){if(m===t){if(2===e&&(0,i.$XS)(n))return m=1,void n.then(O(2,1),O(3,1));m=e,y=!0,u=n,E(),A||3!==e||k||(k=(0,i.dRz)(L,D))}}}function L(){if(!A)if(A=!0,(0,i.Lln)())process.emit(b,u,l);else{var e=(0,i.zkX)()||(0,i.mS$)();!v&&(v=(0,i.GuU)((0,i.gBW)(i.zS2,[s+"RejectionEvent"]).v)),function(e,t,n,r){var o=(0,i.YEm)();!d&&(d=(0,i.GuU)(!!(0,i.gBW)(h,[o]).v));var a=d.v?o.createEvent("Event"):r?new Event(t):{};if(n&&n(a),d.v&&a.initEvent(t,!1,!0),a&&e[p])e[p](a);else{var s=e["on"+t];if(s)s(a);else{var u=(0,i.zS2)("console");u&&(u.error||u.log)(t,(0,i.mmD)(a))}}}(e,_,(function(e){return(0,i.vF1)(e,"promise",{g:function(){return l}}),e.reason=u,e}),!!v.v)}}return l={then:x,catch:function(e){return x(void 0,e)},finally:function(e){var t=e,n=e;return(0,i.Tnt)(e)&&(t=function(t){return e&&e(),t},n=function(t){throw e&&e(),t}),x(t,n)}},(0,i.UxO)(l,"state",{get:P}),g&&function(e,t){o=o||{toString:function(){return"[[PromiseResult]]"}},a=a||{toString:function(){return"[[PromiseIsHandled]]"}};var n={};n[r=r||{toString:function(){return"[[PromiseState]]"}}]={get:t},n[o]={get:function(){return(0,i.SZ2)(u)}},n[a]={get:function(){return A}},(0,i.isD)(e,n)}(l,P),(0,i.Lok)()&&(l[(0,i.Y0g)(11)]="IPromise"),l.toString=function(){return"IPromise"+(g?"["+I+((0,i.b07)(R)?"":":"+R)+"]":"")+" "+P()+(y?" - "+C(u):"")},function(){(0,i.Tnt)(n)||(0,i.zkd)(s+": executor is not a function - "+C(n));var e=O(3,0);try{n.call(l,O(2,0),e)}catch(t){e(t)}}(),l}function R(e){return function(t){var n=(0,i.KVm)(arguments,1);return e((function(e,n){try{var r=[],o=1;(0,i.DA8)(t,(function(t,a){t&&(o++,c(t,(function(t){r[a]=t,0==--o&&e(r)}),n))})),0==--o&&e(r)}catch(e){n(e)}}),n)}}function A(e){(0,i.Iuo)(e,(function(e){try{e()}catch(e){}}))}function k(e,t){return I(k,function(e){var t=(0,i.EtT)(e)?e:0;return function(e){(0,i.dRz)((function(){A(e)}),t)}}(t),e,t)}function x(e,t){!m&&(m=(0,i.GuU)((0,i.gBW)(i.zS2,[s]).v||null));var n=m.v;if(!n)return k(e);(0,i.Tnt)(e)||(0,i.zkd)(s+": executor is not a function - "+(0,i.mmD)(e));var r=0,o=new n((function(t,n){e((function(e){r=2,t(e)}),(function(e){r=3,n(e)}))}));return(0,i.UxO)(o,"state",{get:function(){return f[r]}}),o}function P(e){return I(P,A,e)}function E(e,t){return!y&&(n=P,y=(0,i.GuU)((function(e){var t=(0,i.KVm)(arguments,1);return n((function(t,n){var r=[],o=1;function a(e,n){o++,l(e,(function(e){e.rejected?r[n]={status:u,reason:e.reason}:r[n]={status:"fulfilled",value:e.value},0==--o&&t(r)}))}try{(0,i.cyL)(e)?(0,i.Iuo)(e,a):(0,i.xZI)(e)?(0,i.DA8)(e,a):(0,i.zkd)("Input is not an iterable"),0==--o&&t(r)}catch(e){n(e)}}),t)}))),y.v(e,t);var n}function O(e,t){return!w&&(w=(0,i.GuU)(x)),w.v.call(this,e,t)}var L=R(O);(0,i.Y0g)(11)},8257:(e,t,n)=>{"use strict";n.d(t,{s:()=>v});var r,o=n(8279),a=n(269),i=n(6987),s=n(6182),u=n(3775),l=n(3673),c=n(6492),d=n(2317),g=n(836),f=n(8969),p="getPlugin",h=((r={})[c.Bw]={isVal:l.Gh,v:{}},r),v=function(){function e(){var t,n,r,v,m,y=this;function w(e){void 0===e&&(e=null);var t=e;if(!t){var o=n||(0,d.i8)(null,{},y[c.eT]);t=r&&r[p]?o[s.$o](null,r[p]):o[s.$o](null,r)}return t}function b(e,t,o){(0,i.e)(e,h,(0,u.y0)(t)),!o&&t&&(o=t[s.DI]()[s.uR]());var a=r;r&&r[p]&&(a=r[p]()),y[c.eT]=t,n=(0,d.i8)(o,e,t,a)}function _(){t=!1,y[c.eT]=null,n=null,r=null,m=(0,f.w)(),v=(0,g.P)()}_(),(0,o.A)(e,y,(function(e){e[s.mE]=function(e,n,r,o){b(e,n,o),t=!0},e[s.Ik]=function(t,n){var o=e[c.eT];if(o&&(!t||o===t[c.eT]())){var a,i=!1,u=t||(0,d.tS)(null,o,r&&r[p]?r[p]():r),l=n||{reason:0,isAsync:!1};return e[s.tn]&&!0===e[s.tn](u,l,g)?a=!0:g(),a}function g(){i||(i=!0,v.run(u,n),m.run(u[s.e4]()),!0===a&&u[s.$5](l),_())}},e[s.HC]=function(t,n){var o=e[c.eT];if(o&&(!t||o===t[c.eT]())){var a,i=!1,u=t||(0,d.nU)(null,o,r&&r[p]?r[p]():r),l=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(u,l,g)?a=!0:g(),a}function g(){i||(i=!0,b(u.getCfg(),u.core(),u[s.uR]()))}},(0,l.RF)(e,"_addUnloadCb",(function(){return v}),"add"),(0,l.RF)(e,"_addHook",(function(){return m}),"add"),(0,a.vF1)(e,"_unloadHooks",{g:function(){return m}})})),y[s.e4]=function(e){return w(e)[s.e4]()},y[s.tZ]=function(){return t},y.setInitialized=function(e){t=e},y[s.YH]=function(e){r=e},y[s.$5]=function(e,t){t?t[s.$5](e):r&&(0,a.Tnt)(r[c.qT])&&r[c.qT](e,null)},y._getTelCtx=w}return e.__ieDyn=1,e}()},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>$});var r,o=n(269),a="constructor",i="prototype",s="function",u="_dynInstFuncs",l="_isDynProxy",c="_dynClass",d="_dynCls$",g="_dynInstChk",f=g,p="_dfOpts",h="_unknown_",v="__proto__",m="_dyn"+v,y="__dynProto$Gbl",w="_dynInstProto",b="useBaseInst",_="setInstFuncs",S=Object,T=S.getPrototypeOf,D=S.getOwnPropertyNames,C=(0,o.mS$)(),I=C[y]||(C[y]={o:(r={},r[_]=!0,r[b]=!0,r),n:1e3});function R(e){return e&&(e===S[i]||e===Array[i])}function A(e){return R(e)||e===Function[i]}function k(e){var t;if(e){if(T)return T(e);var n=e[v]||e[i]||(e[a]?e[a][i]:null);t=e[m]||n,(0,o.v0u)(e,m)||(delete e[w],t=e[m]=e[w]||e[m],e[w]=n)}return t}function x(e,t){var n=[];if(D)n=D(e);else for(var r in e)"string"==typeof r&&(0,o.v0u)(e,r)&&n.push(r);if(n&&n.length>0)for(var a=0;a<n.length;a++)t(n[a])}function P(e,t,n){return t!==a&&typeof e[t]===s&&(n||(0,o.v0u)(e,t))&&t!==v&&t!==i}function E(e){(0,o.zkd)("DynamicProto: "+e)}function O(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function L(e,t,n,r,a){if(!R(e)){var i=n[u]=n[u]||(0,o.sSX)(null);if(!R(i)){var d=i[t]=i[t]||(0,o.sSX)(null);!1!==i[f]&&(i[f]=!!a),R(d)||x(n,(function(t){P(n,t,!1)&&n[t]!==r[t]&&(d[t]=n[t],delete n[t],(!(0,o.v0u)(e,t)||e[t]&&!e[t][l])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var a=null;if(e&&(0,o.v0u)(n,c)){var i=e[u]||(0,o.sSX)(null);if((a=(i[n[c]]||(0,o.sSX)(null))[t])||E("Missing ["+t+"] "+s),!a[g]&&!1!==i[f]){for(var l=!(0,o.v0u)(e,t),d=k(e),p=[];l&&d&&!A(d)&&!O(p,d);){var h=d[t];if(h){l=h===r;break}p.push(d),d=k(d)}try{l&&(e[t]=a),a[g]=1}catch(e){i[f]=!1}}}return a}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=k(t)[e]),typeof r!==s&&E("["+e+"] is not a "+s),r}(t,e,n);return r.apply(this,arguments)};return n[l]=1,n}(e,t)))}))}}}function V(e,t){return(0,o.v0u)(e,i)?e.name||t||h:((e||{})[a]||{}).name||t||h}function $(e,t,n,r){(0,o.v0u)(e,i)||E("theClass is an invalid class definition.");var a=e[i];(function(e,t){if(T){for(var n=[],r=k(t);r&&!A(r)&&!O(n,r);){if(r===e)return!0;n.push(r),r=k(r)}return!1}return!0})(a,t)||E("["+V(e)+"] not in hierarchy of ["+V(t)+"]");var s=null;(0,o.v0u)(a,c)?s=a[c]:(s=d+V(e,"_")+"$"+I.n,I.n++,a[c]=s);var g=$[p],h=!!g[b];h&&r&&void 0!==r[b]&&(h=!!r[b]);var v=function(e){var t=(0,o.sSX)(null);return x(e,(function(n){!t[n]&&P(e,n,!1)&&(t[n]=e[n])})),t}(t),m=function(e,t,n,r){function a(e,t,n){var o=t[n];if(o[l]&&r){var a=e[u]||{};!1!==a[f]&&(o=(a[t[c]]||{})[n]||o)}return function(){return o.apply(e,arguments)}}var i=(0,o.sSX)(null);x(n,(function(e){i[e]=a(t,n,e)}));for(var s=k(e),d=[];s&&!A(s)&&!O(d,s);)x(s,(function(e){!i[e]&&P(s,e,!T)&&(i[e]=a(t,s,e))})),d.push(s),s=k(s);return i}(a,t,v,h);n(t,m);var y=!!T&&!!g[_];y&&r&&(y=!!r[_]),L(a,s,t,v,!1!==y)}$[p]=I.o},8404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariablesView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("VariablesView.constructor Started"),i.Telemetry.Current.send("VariablesView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("VariablesView.constructor Completed")}async loadData(){if(o.logToOutput("VariablesView.loadData Started"),i.Telemetry.Current.send("VariablesView.loadData.called"),!a.Session.Current.Api)return;const e=await a.Session.Current.Api.getVariables();e.isSuccessful&&(this.variablesJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("VariablesView.renderHtml Started"),i.Telemetry.Current.send("VariablesView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("VariablesView.renderHtml Completed")}static render(){if(o.logToOutput("VariablesView.render Started"),i.Telemetry.Current.send("VariablesView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("variablesView","Variables",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("VariablesView.dispose Started"),i.Telemetry.Current.send("VariablesView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("VariablesView._getWebviewContent Started"),i.Telemetry.Current.send("VariablesView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode-elements","elements","dist","bundled.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]);let s="";if(this.variablesJson&&this.variablesJson.variables)for(const e of this.variablesJson.variables){const t=e.key||"N/A",n=e.val||"N/A",r=e.description||"";s+=`\n                <tr class="table-row">\n                    <td>${this._escapeHtml(t)}</td>\n                    <td><code>${this._escapeHtml(n)}</code></td>\n                    <td>${this._escapeHtml(r)}</td>\n                </tr>`}return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${a}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Variables</title>\n      </head>\n      <body>  \n        <h2>Airflow Variables</h2>\n        <div class="controls">\n            <vscode-button appearance="secondary" id="refresh-variables">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${s||'<tr><td colspan="3" style="text-align:center; padding: 20px; opacity: 0.7;">No variables found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("VariablesView._setWebviewMessageListener Started"),i.Telemetry.Current.send("VariablesView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("VariablesView._setWebviewMessageListener Message Received "+e.command),"refresh-variables"!==e.command||this.loadData()}),void 0,this._disposables)}}t.VariablesView=s},8428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetTodayTool=void 0;const r=n(1398),o=n(6967);t.GetTodayTool=class{async invoke(e,t){o.Telemetry.Current.send("GetTodayTool.invoke");const n=new Date,a=n.toISOString().split("T")[0],i=n.toLocaleDateString("en-US",{weekday:"long"}),s=`## Today's Date\n\n**ISO Format:** ${a}\n**Full Date:** ${n.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}\n**Day of Week:** ${i}\n\n*Use the ISO format (${a}) when filtering DAG runs or working with date ranges.*`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(s)])}async prepareInvocation(e,t){return{invocationMessage:"Getting current system date..."}}}},8435:(e,t,n)=>{"use strict";n.d(t,{$n:()=>p,fS:()=>f});var r=n(3720),o=n(7288),{toStringTag:a,iterator:i,hasInstance:s}=Symbol,u=Math.random,l="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),c=(e,t,n)=>(e+="",/^(Blob|File)$/.test(t&&t[a])?[(n=void 0!==n?n+"":"File"==t[a]?t.name:"blob",e),t.name!==n||"blob"==t[a]?new o.A([t],n,t):t]:[e,t+""]),d=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),g=(e,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)};const f=class{#i=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[a](){return"FormData"}[i](){return this.entries()}static[s](e){return e&&"object"==typeof e&&"FormData"===e[a]&&!l.some((t=>"function"!=typeof e[t]))}append(...e){g("append",arguments,2),this.#i.push(c(...e))}delete(e){g("delete",arguments,1),e+="",this.#i=this.#i.filter((([t])=>t!==e))}get(e){g("get",arguments,1),e+="";for(var t=this.#i,n=t.length,r=0;r<n;r++)if(t[r][0]===e)return t[r][1];return null}getAll(e,t){return g("getAll",arguments,1),t=[],e+="",this.#i.forEach((n=>n[0]===e&&t.push(n[1]))),t}has(e){return g("has",arguments,1),e+="",this.#i.some((t=>t[0]===e))}forEach(e,t){for(var[n,r]of(g("forEach",arguments,1),this))e.call(t,r,n,this)}set(...e){g("set",arguments,2);var t=[],n=!0;e=c(...e),this.#i.forEach((r=>{r[0]===e[0]?n&&(n=!t.push(e)):t.push(r)})),n&&t.push(e),this.#i=t}*entries(){yield*this.#i}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function p(e,t=r.A){var n=`${u()}${u()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],a=`--${n}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?o.push(a+d(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):o.push(a+d(t)+`"; filename="${d(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),o.push(`--${n}--`),new t(o,{type:"multipart/form-data; boundary="+n})}},8576:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagTreeItem=void 0;const r=n(1398),o=n(2);class a extends r.TreeItem{constructor(e){super(e.dag_id),this.LatestDagRunId="",this.LatestDagState="",this._IsFav=!1,this.IsFiltered=!1,this.ApiResponse=e,this.DagId=e.dag_id,this.IsActive=e.is_active,this.IsPaused=e.is_paused,this.Owners=e.owners,this.Tags=e.tags,this.FileToken=e.file_token,this._IsFav=o.DagTreeView.Current.FavoriteDags.includes(this.DagId),this.setContextValue(),this.refreshUI()}set IsFav(e){this._IsFav=e,this.setContextValue()}get IsFav(){return this._IsFav}isDagRunning(){return"queued"===this.LatestDagState||"running"===this.LatestDagState}setContextValue(){let e="#";e+=this.IsFav?"IsFav#":"!IsFav#",e+=this.IsPaused?"IsPaused#":"!IsPaused#",e+=this.IsActive?"IsActive#":"!IsActive#",e+=this.IsFiltered?"IsFiltered#":"!IsFiltered#",e+=this.isDagRunning()?"IsRunning#":"!IsRunning#",this.contextValue=e}refreshUI(){this.IsPaused?(this.iconPath=new r.ThemeIcon("circle-outline",new r.ThemeColor("disabledForeground")),this.ApiResponse.is_paused=!0):("queued"===this.LatestDagState?this.iconPath=new r.ThemeIcon("loading~spin",new r.ThemeColor("charts.yellow")):"running"===this.LatestDagState?this.iconPath=new r.ThemeIcon("loading~spin",new r.ThemeColor("charts.blue")):"success"===this.LatestDagState?this.iconPath=new r.ThemeIcon("check",new r.ThemeColor("testing.iconPassed")):"failed"===this.LatestDagState?this.iconPath=new r.ThemeIcon("error",new r.ThemeColor("testing.iconFailed")):this.iconPath=new r.ThemeIcon("circle-filled",new r.ThemeColor("charts.gray")),this.ApiResponse.is_paused=!1),this.setContextValue()}doesFilterMatch(e){let t=e.split(",");t=t.map((e=>e.trim())),this.IsFiltered=!1;for(const e of t){if(this.DagId.includes(e)){this.IsFiltered=!0;break}if(this.Owners.includes(e)){this.IsFiltered=!0;break}for(const t of this.Tags)if(t.name.includes(e)){this.IsFiltered=!0;break}}return this.IsFiltered}}t.DagTreeItem=a},8969:(e,t,n)=>{"use strict";n.d(t,{w:()=>u});var r,o,a=n(269),i=n(6182),s=n(3775);function u(){var e=[];return{run:function(t){var n=e;e=[],(0,a.Iuo)(n,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,s.ZP)(t,2,73,"Unloading:"+(0,a.mmD)(e))}})),r&&n[i.oI]>r&&(o?o("doUnload",n):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,a.Yny)(e,t),r&&e[i.oI]>r&&(o?o("Add",e):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},9071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DagRunView=void 0;const r=n(1398),o=n(6304),a=n(1430),i=n(2636),s=n(5072),u=n(6967);class l{constructor(e){this._disposables=[],this.selectedDagId="",this.selectedStartDate=o.toISODateString(new Date(Date.now()-6048e5)),this.selectedEndDate=o.toISODateString(new Date),this.selectedStatus="",this.allDagIds=[],o.logToOutput("DagRunView.constructor Started"),u.Telemetry.Current.send("DagRunView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("DagRunView.constructor Completed")}async loadData(){if(o.logToOutput("DagRunView.loadData Started"),u.Telemetry.Current.send("DagRunView.loadData.called"),!i.Session.Current.Api)return;const e=await i.Session.Current.Api.getDagList();if(e.isSuccessful&&Array.isArray(e.result)&&(this.allDagIds=e.result.map((e=>e.dag_id)).sort(),!this.selectedDagId&&this.allDagIds.length>0&&(this.selectedDagId=this.allDagIds[0])),this.selectedDagId){const e=await i.Session.Current.Api.getDagRunHistory(this.selectedDagId);if(e.isSuccessful&&e.result&&e.result.dag_runs){const t=new Date(this.selectedStartDate+"T00:00:00Z").getTime(),n=new Date(this.selectedEndDate+"T23:59:59Z").getTime();this.dagRunsJson=e.result.dag_runs.filter((e=>{if(e.start_date){const r=new Date(e.start_date).getTime();return r>=t&&r<=n}return!1}))}}else this.dagRunsJson=[];await this.renderHtml()}async renderHtml(){o.logToOutput("DagRunView.renderHtml Started"),u.Telemetry.Current.send("DagRunView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,i.Session.Current.ExtensionUri),o.logToOutput("DagRunView.renderHtml Completed")}static render(e,t,n,a){if(o.logToOutput("DagRunView.render Started"),u.Telemetry.Current.send("DagRunView.render.called"),l.Current)e&&(l.Current.selectedDagId=e),t&&(l.Current.selectedStartDate=t),n&&(l.Current.selectedEndDate=n),a&&(l.Current.selectedStatus=a),l.Current._panel.reveal(r.ViewColumn.One),l.Current.loadData();else{const o=r.window.createWebviewPanel("dagRunView","DAG Run History",r.ViewColumn.One,{enableScripts:!0});l.Current=new l(o),e&&(l.Current.selectedDagId=e),t&&(l.Current.selectedStartDate=t),n&&(l.Current.selectedEndDate=n),a&&(l.Current.selectedStatus=a),(e||t||n||a)&&l.Current.loadData()}}dispose(){for(o.logToOutput("DagRunView.dispose Started"),u.Telemetry.Current.send("DagRunView.dispose.called"),l.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("DagRunView._getWebviewContent Started"),u.Telemetry.Current.send("DagRunView._getWebviewContent.called");const n=o.getUri(e,t,["media","style.css"]);let r=[];this.dagRunsJson&&Array.isArray(this.dagRunsJson)&&(r=this.dagRunsJson.filter((e=>!this.selectedStatus||e.state===this.selectedStatus)));let a="";return r.forEach((e=>{const t=e.dag_id||"N/A",n=e.state||"N/A",r=e.start_date?o.toISODateTimeString(new Date(e.start_date)):"N/A",i=e.start_date&&e.end_date?o.getDuration(new Date(e.start_date),new Date(e.end_date)):"Running",s=e.conf?JSON.stringify(e.conf):"{}",u=e.note||"",l=e.dag_run_id||"";a+=`\n            <tr class="table-row">\n                <td><a href="#" data-dag-id="${this._escapeHtml(t)}" data-dag-run-id="${this._escapeHtml(l)}" class="dag-link">${this._escapeHtml(t)}</a></td>\n                <td>\n                    <div style="display: flex; align-items: center;">\n                        <div class="state-indicator state-${n}" title="${this._escapeHtml(n)}"></div>\n                        <span>${this._escapeHtml(n)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class="action-links">\n                        <a href="#" data-dag-id="${this._escapeHtml(t)}" data-dag-run-id="${this._escapeHtml(l)}" class="dag-log-link link-button">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(r)}</td>\n                <td><span class="duration-badge">${this._escapeHtml(i)}</span></td>\n                <td><div class="code-block" style="max-height: 50px; overflow: hidden; font-size: 11px;">${this._escapeHtml(s)}</div></td>\n                <td>${this._escapeHtml(u)}</td>\n            </tr>`})),`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <link rel="stylesheet" href="${n}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Add state-specific colors here if standard style.css doesn't cover them all, \n               but assuming style.css has .state-* classes or DagView style block logic is global enough?\n               Actually DagView styles were inline in the file. I need to include them or rely on style.css.\n               Assuming style.css handles basic colors, but let's add the indicator styles to be safe \n               since they were in DagView's style block. */\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>DAG Run History</title>\n      </head>\n      <body>  \n        <h2>DAG Run History</h2>\n        \n        <div class="filters">\n            <div class="filter-group">\n                <label>DAG ID</label>\n                <select id="filter-dag-id">\n                    ${this.allDagIds.map((e=>`<option value="${this._escapeHtml(e)}" ${e===this.selectedDagId?"selected":""}>${this._escapeHtml(e)}</option>`)).join("")}\n                </select>\n            </div>\n            <div class="filter-group">\n                <label>Start Date</label>\n                <input type="date" id="filter-start-date" value="${this.selectedStartDate}">\n            </div>\n            <div class="filter-group">\n                <label>End Date</label>\n                <input type="date" id="filter-end-date" value="${this.selectedEndDate}">\n            </div>\n            <div class="filter-group">\n                <label>Status</label>\n                <select id="filter-status">\n                    <option value="">All</option>\n                    <option value="success" ${"success"===this.selectedStatus?"selected":""}>Success</option>\n                    <option value="failed" ${"failed"===this.selectedStatus?"selected":""}>Failed</option>\n                    <option value="running" ${"running"===this.selectedStatus?"selected":""}>Running</option>\n                    <option value="queued" ${"queued"===this.selectedStatus?"selected":""}>Queued</option>\n                    <option value="upstream_failed" ${"upstream_failed"===this.selectedStatus?"selected":""}>Upstream Failed</option>\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${a||'<tr><td colspan="7" style="text-align:center; padding: 20px; opacity: 0.7;">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            document.getElementById('filter-start-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-start-date', startDate: e.target.value });\n            });\n\n            document.getElementById('filter-end-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-end-date', endDate: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        <\/script>\n      </body>\n    </html>\n    `}_escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,(e=>t[e]))}_getStatusEmoji(e){return{success:"âœ…",failed:"âŒ",running:"â–¶ï¸",queued:"â³",upstream_failed:"âš ï¸",skipped:"â­ï¸",deferred:"ðŸ”„"}[e.toLowerCase()]||"ðŸ“…"}_setWebviewMessageListener(e){o.logToOutput("DagRunView._setWebviewMessageListener Started"),u.Telemetry.Current.send("DagRunView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{switch(o.logToOutput("DagRunView._setWebviewMessageListener Message Received "+e.command),e.command){case"filter-dag-id":return this.selectedDagId=e.dagId,void this.loadData();case"filter-start-date":return this.selectedStartDate=e.startDate,void this.loadData();case"filter-end-date":return this.selectedEndDate=e.endDate,void this.loadData();case"filter-status":return this.selectedStatus=e.status,void this.renderHtml();case"open-dag-view":if(!i.Session.Current.Api)return;return void(i.Session.Current.Api&&e.dagId&&a.DagView.render(e.dagId,e.dagRunId));case"view-dag-log":return void(e.dagId&&s.DagLogView.render(e.dagId,e.dagRunId))}}),void 0,this._disposables)}}t.DagRunView=l},9246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListActiveDagsTool=void 0;const r=n(1398),o=n(6967);t.ListActiveDagsTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){return{invocationMessage:"Listing active DAGs..."}}async invoke(e,t){o.Telemetry.Current.send("ListActiveDagsTool.invoke");try{const e=await this.client.getDags(!1);if(0===e.length)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… No active DAGs found.")]);let t=`## ðŸŸ¢ Active DAGs (${e.length})\n\n`;return e.forEach((e=>{t+=`- **${e.dag_id}**`,e.description&&(t+=`: ${e.description}`),t+="\n"})),t+=`\n---\n**Raw Data:**\n\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\``,new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){return o.Telemetry.Current.sendError("ListActiveDagsTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to list active DAGs: ${e instanceof Error?e.message:String(e)}`)])}}}},9249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToDagLogViewTool=void 0;const r=n(1398),o=n(2636),a=n(5072),i=n(5617),s=n(6967);t.GoToDagLogViewTool=class{constructor(){}async prepareInvocation(e,t){const{dagId:n,dagRunId:r,taskId:o,tryNumber:a}=e.input;let i=`Opening DAG Log View for: **${n}**`;return r&&(i+=`\nDAG Run ID: **${r}**`),o&&(i+=`\nTask ID: **${o}**`),a&&(i+=`\nTry Number: **${a}**`),{invocationMessage:i}}async invoke(e,t){const{dagId:n,dagRunId:u,taskId:l,tryNumber:c}=e.input;i.AIHandler.Current.currentDagId=n,s.Telemetry.Current.send("GoToDagLogViewTool.invoke");try{if(!o.Session.Current.Api)return new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")]);a.DagLogView.render(n,u,l,c);let e=`âœ… Opened DAG Log View for: **${n}**`;return u&&(e+=`, Run: **${u}**`),l&&(e+=`, Task: **${l}**`),c&&(e+=`, Try: **${c}**`),new r.LanguageModelToolResult([new r.LanguageModelTextPart(e)])}catch(e){return s.Telemetry.Current.sendError("GoToDagLogViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open DAG Log View for ${n}: ${e instanceof Error?e.message:String(e)}`)])}}}},9730:(e,t,n)=>{"use strict";n.d(t,{YQ:()=>s.A,ZH:()=>i.A,k4:()=>c,F8:()=>l,NX:()=>d,_M:()=>g});const r=require("node:fs"),o=require("node:path");var a=n(5157),i=n(7288),s=n(3720);const{stat:u}=r.promises,l=(e,t)=>f((0,r.statSync)(e),e,t),c=(e,t)=>u(e).then((n=>f(n,e,t))),d=(e,t)=>u(e).then((n=>p(n,e,t))),g=(e,t)=>p((0,r.statSync)(e),e,t),f=(e,t,n="")=>new s.A([new h({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:n}),p=(e,t,n="")=>new i.A([new h({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],(0,o.basename)(t),{type:n,lastModified:e.mtimeMs});class h{#s;#u;constructor(e){this.#s=e.path,this.#u=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new h({path:this.#s,lastModified:this.lastModified,size:t-e,start:this.#u+e})}async*stream(){const{mtimeMs:e}=await u(this.#s);if(e>this.lastModified)throw new a("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,r.createReadStream)(this.#s,{start:this.#u,end:this.#u+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}},9742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoToConfigsViewTool=void 0;const r=n(1398),o=n(2636),a=n(3374),i=n(6967);t.GoToConfigsViewTool=class{constructor(){}async prepareInvocation(e,t){return{invocationMessage:"Opening Configs View..."}}async invoke(e,t){i.Telemetry.Current.send("GoToConfigsViewTool.invoke");try{return o.Session.Current.Api?(a.ConfigsView.render(),new r.LanguageModelToolResult([new r.LanguageModelTextPart("âœ… Opened Configs View - showing Airflow configuration settings (airflow.cfg)")])):new r.LanguageModelToolResult([new r.LanguageModelTextPart("âŒ Not connected to an Airflow server. Please connect to a server first.")])}catch(e){return i.Telemetry.Current.sendError("GoToConfigsViewTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(`âŒ Failed to open Configs View: ${e instanceof Error?e.message:String(e)}`)])}}}},9798:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFailedRunsTool=void 0;const r=n(1398),o=n(6967);t.GetFailedRunsTool=class{constructor(e){this.client=e}async prepareInvocation(e,t){const n=e.input.timeRangeHours||24,r=e.input.dagIdFilter;return{invocationMessage:r?`Querying failed runs for DAG '${r}' (last ${n} hours)`:`Querying all failed runs (last ${n} hours)`}}async invoke(e,t){const n=e.input.timeRangeHours||24,a=e.input.dagIdFilter;o.Telemetry.Current.send("GetFailedRunsTool.invoke");try{const e=await this.client.queryFailedRuns(n,a);if(0===e.length){const e=a?`âœ… No failed runs found for DAG '${a}' in the last ${n} hours.`:`âœ… No failed runs found in the last ${n} hours. All DAGs are healthy!`;return new r.LanguageModelToolResult([new r.LanguageModelTextPart(e)])}let t="## âš ï¸ Failed DAG Runs Report\n\n";return t+=`**Time Range:** Last ${n} hours\n`,a&&(t+=`**DAG Filter:** ${a}\n`),t+=`**Total Failed Runs:** ${e.length}\n\n`,t+="---\n\n",e.forEach(((e,n)=>{t+=`### ${n+1}. ${e.dag_id}\n\n`,t+=`- **Run ID:** \`${e.dag_run_id}\`\n`,t+=`- **State:** ${e.state}\n`,t+=`- **Execution Date:** ${e.execution_date}\n`,t+=`- **Logical Date:** ${e.logical_date}\n`,e.start_date&&(t+=`- **Started:** ${e.start_date}\n`),e.end_date&&(t+=`- **Ended:** ${e.end_date}\n`),e.error_message&&(t+=`- **Error:** ${e.error_message}\n`),t+="\n"})),t+="\n---\n\n**Raw Data (JSON):**\n\n",t+=`\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\`\n`,new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}catch(e){const t=`\nâŒ Failed to Query DAG Runs\n\n**Error:** ${e instanceof Error?e.message:String(e)}\n\nPlease check:\n- The Airflow server is accessible\n- You have the necessary permissions\n- The time range and filters are valid\n            `.trim();return o.Telemetry.Current.sendError("GetFailedRunsTool.invocationError",e instanceof Error?e:new Error(String(e))),new r.LanguageModelToolResult([new r.LanguageModelTextPart(t)])}}}},9880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionsView=void 0;const r=n(1398),o=n(6304),a=n(2636),i=n(6967);class s{constructor(e){this._disposables=[],o.logToOutput("ConnectionsView.constructor Started"),i.Telemetry.Current.send("ConnectionsView.constructor.called"),this._panel=e,this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._setWebviewMessageListener(this._panel.webview),this.loadData(),o.logToOutput("ConnectionsView.constructor Completed")}async loadData(){o.logToOutput("ConnectionsView.loadData Started"),i.Telemetry.Current.send("ConnectionsView.loadData.called");const e=await a.Session.Current.Api.getConnections();e.isSuccessful&&(this.connectionsJson=e.result),await this.renderHtml()}async renderHtml(){o.logToOutput("ConnectionsView.renderHtml Started"),i.Telemetry.Current.send("ConnectionsView.renderHtml.called"),this._panel.webview.html=this._getWebviewContent(this._panel.webview,a.Session.Current.ExtensionUri),o.logToOutput("ConnectionsView.renderHtml Completed")}static render(){if(o.logToOutput("ConnectionsView.render Started"),i.Telemetry.Current.send("ConnectionsView.render.called"),s.Current)s.Current._panel.reveal(r.ViewColumn.One),s.Current.loadData();else{const e=r.window.createWebviewPanel("connectionsView","Connections",r.ViewColumn.One,{enableScripts:!0});s.Current=new s(e)}}dispose(){for(o.logToOutput("ConnectionsView.dispose Started"),i.Telemetry.Current.send("ConnectionsView.dispose.called"),s.Current=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getWebviewContent(e,t){o.logToOutput("ConnectionsView._getWebviewContent Started"),i.Telemetry.Current.send("ConnectionsView._getWebviewContent.called");const n=o.getUri(e,t,["node_modules","@vscode","webview-ui-toolkit","dist","toolkit.js"]),r=o.getUri(e,t,["media","main.js"]),a=o.getUri(e,t,["media","style.css"]);let s="";if(this.connectionsJson&&this.connectionsJson.connections&&Array.isArray(this.connectionsJson.connections))for(const e of this.connectionsJson.connections){const t=e.conn_id||"N/A",n=e.conn_type||"N/A",r=e.host||"",o=e.port||"",a=e.schema||"";s+=`\n                <tr class="table-row">\n                    <td>${this._escapeHtml(t)}</td>\n                    <td><span class="tag">${this._escapeHtml(n)}</span></td>\n                    <td>${this._escapeHtml(r)}</td>\n                    <td>${this._escapeHtml(String(o))}</td>\n                    <td>${this._escapeHtml(a)}</td>\n                </tr>`}else this.connectionsJson&&(s=`<tr><td colspan="5"><pre>${JSON.stringify(this.connectionsJson,null,2)}</pre></td></tr>`);return`\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <script type="module" src="${n}"><\/script>\n        <script type="module" src="${r}"><\/script>\n        <link rel="stylesheet" href="${a}">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 11px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n        </style>\n        <title>Connections</title>\n      </head>\n      <body>  \n        <h2>Airflow Connections</h2>\n        <div class="controls">\n            <vscode-button appearance="secondary" id="refresh-connections">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Conn ID</th>\n                    <th>Type</th>\n                    <th>Host</th>\n                    <th>Port</th>\n                    <th>Schema</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${s||'<tr><td colspan="5" style="text-align:center; padding: 20px; opacity: 0.7;">No connections found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `}_escapeHtml(e){if(!e)return"";const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,(e=>t[e]))}_setWebviewMessageListener(e){o.logToOutput("ConnectionsView._setWebviewMessageListener Started"),i.Telemetry.Current.send("ConnectionsView._setWebviewMessageListener.called"),e.onDidReceiveMessage((e=>{o.logToOutput("ConnectionsView._setWebviewMessageListener Message Received "+e.command),"refresh-connections"!==e.command||this.loadData()}),void 0,this._disposables)}}t.ConnectionsView=s},9896:e=>{"use strict";e.exports=require("fs")}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".extension.js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e={792:1},r.f.require=(t,n)=>{if(!e[t]){var o=require("./"+r.u(t));e[t]||(t=>{var n=t.modules,o=t.ids,a=t.runtime;for(var i in n)r.o(n,i)&&(r.m[i]=n[i]);a&&a(r);for(var s=0;s<o.length;s++)e[o[s]]=1})(o)}};var o={};(()=>{"use strict";var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(e){n.logToOutput("Extension activation started"),new c.Telemetry(e);const r={extensionVersion:e.extension.packageJSON.version,vscodeVersion:t.version,osVersion:(0,d.version)(),platform:process.platform,appName:t.env.appName,appHost:t.env.appHost,language:t.env.language};c.Telemetry.Current.send("extension.activate.called",r),new a.Session(e),new l.AIHandler;let o=new i.DagTreeView,g=new s.AdminTreeView,f=new u.ReportTreeView;t.window.registerTreeDataProvider("adminTreeView",g),n.logToOutput("Admin Tree View registered"),t.window.registerTreeDataProvider("reportTreeView",f),n.logToOutput("Report Tree View registered");const p=[];p.push(t.commands.registerCommand("dagTreeView.refreshServer",(()=>{o.refresh()}))),p.push(t.commands.registerCommand("dagTreeView.addServer",(()=>{o.addServer()}))),p.push(t.commands.registerCommand("dagTreeView.removeServer",(()=>{o.removeServer()}))),p.push(t.commands.registerCommand("dagTreeView.connectServer",(()=>{o.connectServer()}))),p.push(t.commands.registerCommand("dagTreeView.clearServers",(()=>{o.clearServers()}))),p.push(t.commands.registerCommand("dagTreeView.filter",(()=>{o.filter()}))),p.push(t.commands.registerCommand("dagTreeView.showOnlyActive",(()=>{o.showOnlyActive()}))),p.push(t.commands.registerCommand("dagTreeView.showOnlyFavorite",(()=>{o.showOnlyFavorite()}))),p.push(t.commands.registerCommand("dagTreeView.viewDagView",(e=>{o.viewDagView(e)}))),p.push(t.commands.registerCommand("dagTreeView.triggerDag",(e=>{o.triggerDag(e)}))),p.push(t.commands.registerCommand("dagTreeView.triggerDagWithConfig",(e=>{o.triggerDagWConfig(e)}))),p.push(t.commands.registerCommand("dagTreeView.checkDagRunState",(e=>{o.checkDagRunState(e)}))),p.push(t.commands.registerCommand("dagTreeView.checkAllDagsRunState",(()=>{o.checkAllDagsRunState()}))),p.push(t.commands.registerCommand("dagTreeView.pauseDAG",(e=>{o.pauseDAG(e)}))),p.push(t.commands.registerCommand("dagTreeView.unPauseDAG",(e=>{o.unPauseDAG(e)}))),p.push(t.commands.registerCommand("dagTreeView.cancelDagRun",(e=>{o.cancelDagRun(e)}))),p.push(t.commands.registerCommand("dagTreeView.lastDAGRunLog",(e=>{o.lastDAGRunLog(e)}))),p.push(t.commands.registerCommand("dagTreeView.dagSourceCode",(e=>{o.dagSourceCode(e)}))),p.push(t.commands.registerCommand("dagTreeView.showDagInfo",(e=>{o.showDagInfo(e)}))),p.push(t.commands.registerCommand("dagTreeView.addToFavDAG",(e=>{o.addToFavDAG(e)}))),p.push(t.commands.registerCommand("dagTreeView.deleteFromFavDAG",(e=>{o.deleteFromFavDAG(e)}))),p.push(t.commands.registerCommand("dagTreeView.showDagView",(e=>{o.viewDagView(e)}))),p.push(t.commands.registerCommand("dagTreeView.viewConnections",(()=>{o.viewConnections()}))),p.push(t.commands.registerCommand("dagTreeView.viewVariables",(()=>{o.viewVariables()}))),p.push(t.commands.registerCommand("dagTreeView.viewProviders",(()=>{o.viewProviders()}))),p.push(t.commands.registerCommand("dagTreeView.viewConfigs",(()=>{o.viewConfigs()}))),p.push(t.commands.registerCommand("dagTreeView.viewPlugins",(()=>{o.viewPlugins()}))),p.push(t.commands.registerCommand("dagTreeView.viewServerHealth",(()=>{o.viewServerHealth()}))),p.push(t.commands.registerCommand("dagTreeView.viewDagRuns",(()=>{o.viewDagRuns()}))),p.push(t.commands.registerCommand("dagTreeView.viewDagRunHistory",(()=>{o.viewDagRunHistory()}))),p.push(t.commands.registerCommand("dagTreeView.AskAI",(e=>{l.AIHandler.Current.askAI(e.DagId,e.FileToken)}))),p.push(t.commands.registerCommand("airflow-ext.donate",(()=>{t.env.openExternal(t.Uri.parse("https://github.com/sponsors/necatiarslan"))}))),p.push(t.commands.registerCommand("airflow-ext.newFeaturesSurvey",(()=>{t.env.openExternal(t.Uri.parse("https://bit.ly/airflow-extension-survey"))}))),p.push(t.commands.registerCommand("airflow-ext.requestFeature",(()=>{t.env.openExternal(t.Uri.parse("https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=feature-request&template=feature_request.md"))}))),p.push(t.commands.registerCommand("airflow-ext.reportBug",(()=>{t.env.openExternal(t.Uri.parse("https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=bug&template=bug_report.md"))})));for(const t of p)e.subscriptions.push(t);l.AIHandler.Current.registerChatParticipant(),l.AIHandler.Current.registerAiTools(),c.Telemetry.Current?.send("extension.activated"),n.logToOutput("Extension activation completed")},e.deactivate=function(){n.logToOutput("Extension is now deactive!")};const t=r(1398),n=r(6304),a=r(2636),i=r(2),s=r(2838),u=r(7792),l=r(5617),c=r(6967),d=r(857)})(),module.exports=o})();