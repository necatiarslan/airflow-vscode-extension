{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://airflow-vscode-extension/webpack/runtime/require chunk loading","webpack://airflow-vscode-extension/./src/dag/DagTreeView.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/CookieMgr.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/NotificationManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AppInsightsCore.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryInitializerPlugin.js","webpack://airflow-vscode-extension/external node-commonjs \"buffer\"","webpack://airflow-vscode-extension/./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js","webpack://airflow-vscode-extension/./src/language_tools/GoToProvidersViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/AirflowClientAdapter.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-shims/dist-es5/TsLibShims.js","webpack://airflow-vscode-extension/./src/admin/ServerHealthView.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/RandomHelper.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DataCacheHelper.js","webpack://airflow-vscode-extension/./src/common/Api.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHandlerContainer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/SenderPostManager.js","webpack://airflow-vscode-extension/external node-commonjs \"os\"","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./src/common/MethodResult.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaults.js","webpack://airflow-vscode-extension/./src/language_tools/GetDagHistoryTool.ts","webpack://airflow-vscode-extension/external commonjs \"vscode\"","webpack://airflow-vscode-extension/./src/dag/DagView.ts","webpack://airflow-vscode-extension/./src/language_tools/UnpauseDagTool.ts","webpack://airflow-vscode-extension/external node-commonjs \"node:process\"","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./src/language_tools/GoToDagViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/ListPausedDagsTool.ts","webpack://airflow-vscode-extension/external node-commonjs \"node:http\"","webpack://airflow-vscode-extension/external node-commonjs \"node:https\"","webpack://airflow-vscode-extension/external node-commonjs \"node:zlib\"","webpack://airflow-vscode-extension/external node-commonjs \"node:stream\"","webpack://airflow-vscode-extension/external node-commonjs \"node:buffer\"","webpack://airflow-vscode-extension/./node_modules/data-uri-to-buffer/dist/index.js","webpack://airflow-vscode-extension/external node-commonjs \"node:util\"","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/base.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/fetch-error.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/is.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/body.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/headers.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/is-redirect.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/response.js","webpack://airflow-vscode-extension/external node-commonjs \"node:url\"","webpack://airflow-vscode-extension/external node-commonjs \"node:net\"","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/referrer.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/request.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/get-search.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/abort-error.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/index.js","webpack://airflow-vscode-extension/./src/report/ReportTreeItem.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ProcessTelemetryContext.js","webpack://airflow-vscode-extension/./src/language_tools/GoToConnectionsViewTool.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaultHelpers.js","webpack://airflow-vscode-extension/./src/dag/DagTreeDataProvider.ts","webpack://airflow-vscode-extension/./src/common/Session.ts","webpack://airflow-vscode-extension/./src/admin/AdminTreeView.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/applicationinsights-common.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/W3cTraceParent.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EventsDiscardedReason.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/DataModels.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/EventBatch.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/ClockSkewManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/KillSwitch.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/RetryPolicy.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/Serializer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/HttpManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/TimeoutOverrideWrapper.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/PostChannel.js","webpack://airflow-vscode-extension/./node_modules/fetch-blob/streams.cjs","webpack://airflow-vscode-extension/./src/admin/ConfigsView.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Constants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataSanitizer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Event.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Trace.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/HelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageView.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageViewPerformance.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Exception.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataPoint.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Metric.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/UrlHelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Util.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/RemoteDependencyData.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Offline.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Enums.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/StorageHelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/RequestResponseHeaders.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ResponseHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/Contracts/ContextTagKeys.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/PartAExtensions.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Envelope.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Data.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/EnvelopeCreator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/SendBuffer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Sender.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Serializer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/HashCodeScoreGenerator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/SamplingScoreGenerator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/Sample.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/ConnectionStringParser.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/index.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/HelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/fetch-blob/index.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DiagnosticLogger.js","webpack://airflow-vscode-extension/./src/language_tools/GoToServerHealthViewTool.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AsyncUtils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EnumHelperFuncs.js","webpack://airflow-vscode-extension/./src/language_tools/GetDagSourceCodeTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetDagRunDetailTool.ts","webpack://airflow-vscode-extension/./src/language_tools/AnalyseDagLatestRunTool.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/AppInsightsCore.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/Utils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/InitActiveStatusEnum.js","webpack://airflow-vscode-extension/./src/language_tools/GoToVariablesViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/TriggerDagRunTool.ts","webpack://airflow-vscode-extension/./node_modules/web-streams-polyfill/dist/ponyfill.es2018.js","webpack://airflow-vscode-extension/./src/language_tools/GetDagRunsTool.ts","webpack://airflow-vscode-extension/./src/report/DagLogView.ts","webpack://airflow-vscode-extension/./node_modules/tmp/lib/tmp.js","webpack://airflow-vscode-extension/./node_modules/node-domexception/index.js","webpack://airflow-vscode-extension/./src/language_tools/GetRunningDagsTool.ts","webpack://airflow-vscode-extension/external node-commonjs \"https\"","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/baseTelemetrySender.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/util.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/baseTelemetryReporter.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/node/telemetryReporter.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/appInsightsClientFactory.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/1dsClientFactory.js","webpack://airflow-vscode-extension/./src/language_tools/AIHandler.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js","webpack://airflow-vscode-extension/./src/common/MessageHub.ts","webpack://airflow-vscode-extension/./node_modules/base-64/base64.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EventHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./src/language_tools/PauseDagTool.ts","webpack://airflow-vscode-extension/./src/common/UI.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/InternalConstants.js","webpack://airflow-vscode-extension/./src/admin/PluginsView.ts","webpack://airflow-vscode-extension/external node-commonjs \"path\"","webpack://airflow-vscode-extension/./src/common/Telemetry.ts","webpack://airflow-vscode-extension/external node-commonjs \"crypto\"","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicSupport.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicProperty.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AggregationError.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicState.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicConfig.js","webpack://airflow-vscode-extension/./src/language_tools/CancelDagRunTool.ts","webpack://airflow-vscode-extension/./node_modules/fetch-blob/file.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EnvUtils.js","webpack://airflow-vscode-extension/./src/admin/ProvidersView.ts","webpack://airflow-vscode-extension/./src/admin/AdminTreeItem.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToDagRunHistoryTool.ts","webpack://airflow-vscode-extension/./src/report/DailyDagRunView.ts","webpack://airflow-vscode-extension/./src/report/ReportTreeView.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToPluginsViewTool.ts","webpack://airflow-vscode-extension/external node-commonjs \"node:stream/web\"","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/Constants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DbgExtensionUtils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/PerfManager.js","webpack://airflow-vscode-extension/external node-commonjs \"worker_threads\"","webpack://airflow-vscode-extension/./node_modules/@nevware21/ts-async/dist/es5/mod/ts-async.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/BaseTelemetryPlugin.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/dynamicproto-js/dist-es5/DynamicProto.js","webpack://airflow-vscode-extension/./src/admin/VariablesView.ts","webpack://airflow-vscode-extension/./src/language_tools/GetTodayTool.ts","webpack://airflow-vscode-extension/./node_modules/formdata-polyfill/esm.min.js","webpack://airflow-vscode-extension/./src/dag/DagTreeItem.ts","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHookContainer.js","webpack://airflow-vscode-extension/./src/report/DagRunView.ts","webpack://airflow-vscode-extension/./src/language_tools/ListActiveDagsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToDagLogViewTool.ts","webpack://airflow-vscode-extension/external node-commonjs \"node:fs\"","webpack://airflow-vscode-extension/external node-commonjs \"node:path\"","webpack://airflow-vscode-extension/./node_modules/fetch-blob/from.js","webpack://airflow-vscode-extension/./src/language_tools/GoToConfigsViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetFailedRunsTool.ts","webpack://airflow-vscode-extension/./src/admin/ConnectionsView.ts","webpack://airflow-vscode-extension/external node-commonjs \"fs\"","webpack://airflow-vscode-extension/webpack/bootstrap","webpack://airflow-vscode-extension/webpack/runtime/define property getters","webpack://airflow-vscode-extension/webpack/runtime/ensure chunk","webpack://airflow-vscode-extension/webpack/runtime/get javascript chunk filename","webpack://airflow-vscode-extension/webpack/runtime/hasOwnProperty shorthand","webpack://airflow-vscode-extension/webpack/runtime/make namespace object","webpack://airflow-vscode-extension/webpack/runtime/node module decorator","webpack://airflow-vscode-extension/./src/extension.ts"],"sourcesContent":["// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"loaded\", otherwise not loaded yet\nvar installedChunks = {\n\t792: 1\n};\n\n// no on chunks loaded\n\nvar installChunk = (chunk) => {\n\tvar moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(var i = 0; i < chunkIds.length; i++)\n\t\tinstalledChunks[chunkIds[i]] = 1;\n\n};\n\n// require() chunk loading for javascript\n__webpack_require__.f.require = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\tvar installedChunk = require(\"./\" + __webpack_require__.u(chunkId));\n\t\t\tif (!installedChunks[chunkId]) {\n\t\t\t\tinstallChunk(installedChunk);\n\t\t\t}\n\t\t} else installedChunks[chunkId] = 1;\n\t}\n};\n\n// no external install chunk\n\n// no HMR\n\n// no HMR manifest","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport * as tmp from 'tmp';\nimport * as fs from 'fs';\nimport { DagTreeItem } from './DagTreeItem';\nimport { DagTreeDataProvider } from './DagTreeDataProvider';\nimport { DagView } from './DagView';\nimport { DailyDagRunView } from '../report/DailyDagRunView';\nimport { DagRunView } from '../report/DagRunView';\nimport * as ui from '../common/UI';\nimport { ServerConfig } from '../common/Types';\nimport * as MessageHub from '../common/MessageHub';\nimport { Session } from '../common/Session';\nimport { DagLogView } from '../report/DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\n\nexport class DagTreeView {\n\n\tpublic static Current: DagTreeView;\n\n\tpublic FilterString: string = '';\n\tpublic ShowOnlyActive: boolean = true;\n\tpublic ShowOnlyFavorite: boolean = false;\n\tpublic FavoriteDags: string[] = [];\n\t\n\tprivate dagStatusInterval: NodeJS.Timeout | undefined;\n\tprivate view: vscode.TreeView<DagTreeItem>;\n\tprivate treeDataProvider: DagTreeDataProvider;\n\n\tpublic constructor() {\n\t\tui.logToOutput('DagTreeView.constructor Started');\n\t\tTelemetry.Current.send('dagTreeView.constructor.called');\n\t\t\n\t\tthis.treeDataProvider = new DagTreeDataProvider();\n\t\tthis.view = vscode.window.createTreeView('dagTreeView', { treeDataProvider: this.treeDataProvider, showCollapseAll: true });\n\t\tthis.loadState();\n\t\t\n\t\tSession.Current.Context!.subscriptions.push(this.view);\n\t\tSession.Current.Context!.subscriptions.push({ dispose: () => this.dispose() });\n\t\tDagTreeView.Current = this;\n\t\tthis.setFilterMessage();\n\t\tthis.refresh();\n\t}\n\n\tprivate dispose() {\n\t\tui.logToOutput('DagTreeView.dispose Started');\n\t\tif (this.dagStatusInterval) {\n\t\t\tclearInterval(this.dagStatusInterval);\n\t\t}\n\t}\n\n\tpublic async refresh(): Promise<void> {\n\t\tui.logToOutput('DagTreeView.refresh Started');\n\t\tTelemetry.Current.send('dagTreeView.refresh.called');\n\n\t\tif (!Session.Current.Api) {\n\t\t\tthis.treeDataProvider.dagList = [];\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\treturn;\n\t\t}\n\n\t\tawait vscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: \"Airflow: Loading...\",\n\t\t}, async (progress) => {\n\t\t\tprogress.report({ increment: 0 });\n\t\t\tawait this.loadDags();\n\t\t});\n\t\t\n\t\tawait this.getImportErrors();\n\t}\n\n\tpublic viewDagView(node: DagTreeItem): void {\n\t\tui.logToOutput('DagTreeView.viewDagView Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagView.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tDagView.render(node.DagId);\n\t}\n\n\tpublic async addToFavDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.addToFavDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.addToFavDAG.called');\n\n\t\tnode.IsFav = true;\n\t\tif (!this.FavoriteDags.includes(node.DagId)) {\n\t\t\tthis.FavoriteDags.push(node.DagId);\n\t\t}\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tpublic async deleteFromFavDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.deleteFromFavDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.deleteFromFavDAG.called');\n\n\t\tnode.IsFav = false;\n\t\tthis.FavoriteDags = this.FavoriteDags.filter(d => d !== node.DagId);\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tprivate createAndOpenTempFile(content: string, prefix: string, extension: string): void {\n\t\tconst tmpFile = tmp.fileSync({ mode: 0o644, prefix, postfix: extension });\n\t\tfs.appendFileSync(tmpFile.name, content);\n\t\tui.openFile(tmpFile.name);\n\t}\n\n\tprivate startDagStatusInterval(): void {\n\t\tif (!this.dagStatusInterval) {\n\t\t\tthis.dagStatusInterval = setInterval(() => {\n\t\t\t\tvoid this.refreshRunningDagState(this).catch((err: any) => ui.logToOutput('refreshRunningDagState Error', err));\n\t\t\t}, 10 * 1000);\n\t\t}\n\t}\n\n\tprivate handleTriggerSuccess(node: DagTreeItem, responseTrigger: any): void {\n\t\tnode.LatestDagRunId = responseTrigger['dag_run_id'];\n\t\tnode.LatestDagState = responseTrigger['state'];\n\t\tnode.refreshUI();\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.startDagStatusInterval();\n\t\tMessageHub.DagTriggered(this, node.DagId, node.LatestDagRunId);\n\t}\n\n\tpublic async triggerDag(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.triggerDag Started');\n\t\tTelemetry.Current.send('dagTreeView.triggerDag.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tif (node.IsPaused) {\n\t\t\tui.showWarningMessage('Dag is PAUSED !!!');\n\t\t\treturn;\n\t\t}\n\n\t\tif (node.isDagRunning()) {\n\t\t\tui.showWarningMessage('Dag is ALREADY RUNNING !!!');\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await Session.Current.Api.triggerDag(node.DagId);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.handleTriggerSuccess(node, result.result);\n\t\t}\n\t}\n\n\tprivate async refreshRunningDagState(dagTreeView: DagTreeView) {\n\t\tui.logToOutput('DagTreeView.refreshRunningDagState Started');\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tlet noDagIsRunning: boolean = true;\n\t\tfor (const node of dagTreeView.treeDataProvider.visibleDagList) {\n\t\t\tif (node.isDagRunning()) {\n\t\t\t\tnoDagIsRunning = false;\n\n\t\t\t\tconst result = await Session.Current.Api.getDagRun(node.DagId, node.LatestDagRunId);\n\n\t\t\t\tif (result.isSuccessful) {\n\t\t\t\t\tnode.LatestDagState = result.result['state'];\n\t\t\t\t\tnode.refreshUI();\n\t\t\t\t} else {\n\t\t\t\t\tnode.LatestDagRunId = '';\n\t\t\t\t\tnode.LatestDagState = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tdagTreeView.treeDataProvider.refresh();\n\t\t}\n\t\tif (noDagIsRunning && dagTreeView.dagStatusInterval) {\n\t\t\tclearInterval(dagTreeView.dagStatusInterval);\n\t\t\tdagTreeView.dagStatusInterval = undefined;\n\t\t\t//ui.showInfoMessage('All Dag Run(s) Completed');\n\t\t\tui.logToOutput('All Dag Run(s) Completed');\n\t\t}\n\t}\n\n\tpublic async triggerDagWConfig(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.triggerDagWConfig Started');\n\t\tTelemetry.Current.send('dagTreeView.triggerDagWConfig.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tlet triggerDagConfig = await vscode.window.showInputBox({ placeHolder: 'Enter Configuration JSON (Optional, must be a dict object) or Press Enter' });\n\n\t\tif (!triggerDagConfig) {\n\t\t\ttriggerDagConfig = \"{}\";\n\t\t}\n\n\t\tif (triggerDagConfig !== undefined) {\n\t\t\tconst result = await Session.Current.Api.triggerDag(node.DagId, triggerDagConfig);\n\n\t\t\tif (result.isSuccessful) {\n\t\t\t\tthis.handleTriggerSuccess(node, result.result);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async checkAllDagsRunState() {\n\t\tui.logToOutput('DagTreeView.checkAllDagsRunState Started');\n\t\tTelemetry.Current.send('dagTreeView.checkAllDagsRunState.called');\n\n\t\tif (!this.treeDataProvider) { return; }\n\t\tfor (const node of this.treeDataProvider.visibleDagList) {\n\t\t\tif (!node.IsPaused) {\n\t\t\t\tthis.checkDagRunState(node);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async notifyDagStateWithDagId(dagId: string, dagRunId?: string, dagState?: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagStateWithDagId Started');\n\t\tTelemetry.Current.send('dagTreeView.notifyDagStateWithDagId.called');\n\n\t\tif (!this.treeDataProvider) { return; }\n\t\tfor (const node of this.treeDataProvider.visibleDagList) {\n\t\t\tif (node.DagId === dagId) {\n\t\t\t\t//this.checkDagRunState(node);\n\t\t\t\tnode.LatestDagRunId = dagRunId;\n\t\t\t\tnode.LatestDagState = dagState;\n\t\t\t\tnode.refreshUI();\t\n\t\t\t\tthis.treeDataProvider.refresh();\n\n\t\t\t\tif (node.isDagRunning()) {\n\t\t\t\t\tthis.startDagStatusInterval();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async checkDagRunState(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.checkDagRunState Started');\n\t\tTelemetry.Current.send('dagTreeView.checkDagRunState.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (!node) { return; }\n\t\tif (node.IsPaused) { ui.showWarningMessage(node.DagId + 'Dag is PAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.getLastDagRun(node.DagId);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.LatestDagRunId = result.result.dag_run_id;\n\t\t\tnode.LatestDagState = result.result.state;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\n\t\t\tif (node.isDagRunning()) {\n\t\t\t\tthis.startDagStatusInterval();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async pauseDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.pauseDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.pauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (node.IsPaused) { ui.showWarningMessage(node.DagId + 'Dag is already PAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.pauseDag(node.DagId, true);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.IsPaused = true;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\tMessageHub.DagPaused(this, node.DagId);\n\t\t}\n\t}\n\n\tpublic async notifyDagPaused(dagId: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagPaused Started');\n\t\tthis.refresh();\n\t}\n\n\tpublic async notifyDagUnPaused(dagId: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagUnPaused Started');\n\t\tthis.refresh();\n\t}\n\n\tpublic async unPauseDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.unPauseDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.unPauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (!node.IsPaused) { ui.showInfoMessage(node.DagId + 'Dag is already UNPAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.pauseDag(node.DagId, false);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.IsPaused = false;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\tMessageHub.DagUnPaused(this, node.DagId);\n\t\t}\n\t}\n\n\tpublic async cancelDagRun(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.cancelDagRun Started');\n\t\tTelemetry.Current.send('dagTreeView.cancelDagRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\t\n\t\tif (!node.isDagRunning()) {\n\t\t\tui.showWarningMessage('No running DAG to cancel');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!node.LatestDagRunId) {\n\t\t\tui.showWarningMessage('No DAG run ID found');\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await Session.Current.Api.cancelDagRun(node.DagId, node.LatestDagRunId);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.LatestDagState = 'failed';\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\t//ui.showInfoMessage(`DAG Run ${node.LatestDagRunId} cancelled`);\n\t\t\t\n\t\t\tMessageHub.DagRunCancelled(this, node.DagId, node.LatestDagRunId);\n\t\t}\n\t}\n\n\tpublic async lastDAGRunLog(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.lastDAGRunLog Started');\n\t\tTelemetry.Current.send('dagTreeView.lastDAGRunLog.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\t// const result = await Session.Current.Api.getLastDagRunLogText(node.DagId);\n\t\t// if (result.isSuccessful) {\n\t\t// \tthis.createAndOpenTempFile(result.result, node.DagId, '.log');\n\t\t// }\n\n\t\tDagLogView.render(node.DagId, node.LatestDagRunId);\n\t}\n\n\tpublic async dagSourceCode(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.dagSourceCode Started');\n\t\tTelemetry.Current.send('dagTreeView.dagSourceCode.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getSourceCode(node.DagId, node.FileToken);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.createAndOpenTempFile(result.result, node.DagId, '.py');\n\t\t} else {\n\t\t\tui.logToOutput(result.result);\n\t\t\tui.showErrorMessage(result.result);\n\t\t}\n\t}\n\n\tpublic async showDagInfo(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.showDagInfo Started');\n\t\tTelemetry.Current.send('dagTreeView.showDagInfo.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getDagInfo(node.DagId);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.createAndOpenTempFile(JSON.stringify(result.result, null, 2), node.DagId + '_info', '.json');\n\t\t} else {\n\t\t\tui.logToOutput(result.result);\n\t\t\tui.showErrorMessage('Failed to fetch DAG info');\n\t\t}\n\t}\n\n\tpublic async filter() {\n\t\tui.logToOutput('DagTreeView.filter Started');\n\t\tTelemetry.Current.send('dagTreeView.filter.called');\n\n\t\tconst filterStringTemp = await vscode.window.showInputBox({ value: this.FilterString, placeHolder: 'Enter your filters seperated by comma' });\n\n\t\tif (filterStringTemp === undefined) { return; }\n\n\t\tthis.FilterString = filterStringTemp;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async showOnlyActive() {\n\t\tui.logToOutput('DagTreeView.showOnlyActive Started');\n\t\tTelemetry.Current.send('dagTreeView.showOnlyActive.called');\n\n\t\tthis.ShowOnlyActive = !this.ShowOnlyActive;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async showOnlyFavorite() {\n\t\tui.logToOutput('DagTreeView.showOnlyFavorite Started');\n\t\tTelemetry.Current.send('dagTreeView.showOnlyFavorite.called');\n\n\t\tthis.ShowOnlyFavorite = !this.ShowOnlyFavorite;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async addServer() {\n\t\tui.logToOutput('DagTreeView.addServer Started');\n\t\tTelemetry.Current.send('dagTreeView.addServer.called');\n\n\n\t\tconst apiUrlTemp = await vscode.window.showInputBox({ value: 'http://localhost:8080/api/v2', placeHolder: 'API Full URL (Exp:http://localhost:8080/api/v2)' });\n\t\tif (!apiUrlTemp) { return; }\n\n\t\tconst userNameTemp = await vscode.window.showInputBox({ placeHolder: 'User Name' });\n\t\tif (!userNameTemp) { return; }\n\n\t\tconst passwordTemp = await vscode.window.showInputBox({ placeHolder: 'Password' });\n\t\tif (!passwordTemp) { return; }\n\n\t\tconst newServer: ServerConfig = { apiUrl: apiUrlTemp, apiUserName: userNameTemp, apiPassword: passwordTemp };\n\t\t\n\t\tlet result = await Session.Current.TestServer(newServer);\n\t\tif (!result) {\n\t\t\tui.showErrorMessage(\"Failed to connect to server.\");\n\t\t\treturn;\n\t\t}\n\n\t\tSession.Current.AddServer(newServer);\n\t\tSession.Current.SetServer(newServer);\n\n\t\tthis.refresh();\n\t}\n\n\tpublic async removeServer() {\n\t\tui.logToOutput('DagTreeView.removeServer Started');\n\t\tTelemetry.Current.send('dagTreeView.removeServer.called');\n\n\t\tif (Session.Current.ServerList.length === 0) { return; }\n\n\t\tconst items: string[] = Session.Current.ServerList.map(s => `${s.apiUrl} - ${s.apiUserName}`);\n\n\t\tconst selected = await vscode.window.showQuickPick(items, { canPickMany: false, placeHolder: 'Select To Remove' });\n\t\tif (!selected) { return; }\n\n\t\tconst selectedItems = selected.split(' - ');\n\t\tif (selectedItems[0]) {\n\t\t\tSession.Current.RemoveServer(selectedItems[0], selectedItems[1]);\n\t\t\t\n\t\t\tui.showInfoMessage(\"Server removed.\");\n\t\t}\n\t}\n\n\tpublic async connectServer() {\n\t\tui.logToOutput('DagTreeView.connectServer Started');\n\t\tTelemetry.Current.send('dagTreeView.connectServer.called');\n\n\t\tif (Session.Current.ServerList.length === 0) {\n\t\t\tthis.addServer();\n\t\t\treturn;\n\t\t}\n\n\t\tconst items: string[] = [];\n\t\tfor (const s of Session.Current.ServerList) {\n\t\t\titems.push(s.apiUrl + \" - \" + s.apiUserName);\n\t\t}\n\n\t\tconst selected = await vscode.window.showQuickPick(items, { canPickMany: false, placeHolder: 'Select To Connect' });\n\t\tif (!selected) { return; }\n\n\t\tconst selectedItems = selected.split(' - ');\n\n\t\tif (selectedItems[0]) {\n\t\t\tconst server = Session.Current.GetServer(selectedItems[0], selectedItems[1]);\n\t\t\tif (server) {\n\t\t\t\tlet result = await Session.Current.TestServer(server);\n\t\t\t\tif (result) \n\t\t\t\t{\n\t\t\t\t\tSession.Current.SetServer(server);\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tui.showErrorMessage(\"Failed to connect to server.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async clearServers() {\n\t\tui.logToOutput('DagTreeView.clearServers Started');\n\t\tTelemetry.Current.send('dagTreeView.clearServers.called');\n\n\t\tSession.Current.ClearServers();\n\t\tthis.treeDataProvider.dagList = undefined;\n\t\tthis.treeDataProvider.refresh();\n\t\tui.showInfoMessage(\"Server List Cleared\");\n\t}\n\n\tpublic async loadDags() {\n\t\tui.logToOutput('DagTreeView.loadDags Started');\n\t\tTelemetry.Current.send('dagTreeView.loadDags.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tthis.treeDataProvider.dagList = undefined;\n\n\t\tconst result = await Session.Current.Api.getDagList();\n\t\tif (result.isSuccessful) {\n\t\t\tthis.treeDataProvider.dagList = result.result;\n\t\t\tthis.treeDataProvider.loadDagTreeItemsFromApiResponse();\n\t\t}\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setViewTitle();\n\t}\n\n\tpublic async loadLatestRunStatusForAllDags() {\n\t\tui.logToOutput('DagTreeView.loadLatestRunStatusForAllDags Started');\n\t\tTelemetry.Current.send('dagTreeView.loadLatestRunStatusForAllDags.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\t// Fetch latest run status for each visible DAG (limit to avoid too many API calls)\n\t\tconst visibleDags = this.treeDataProvider.visibleDagList.slice(0, 50); // Limit to first 50 DAGs\n\t\t\n\t\tfor (const dagItem of visibleDags) {\n\t\t\tif (!dagItem.IsPaused) {\n\t\t\t\ttry {\n\t\t\t\t\tconst runResult = await Session.Current.Api.getLastDagRun(dagItem.DagId);\n\t\t\t\t\tif (runResult.isSuccessful && runResult.result) {\n\t\t\t\t\t\tdagItem.LatestDagRunId = runResult.result.dag_run_id;\n\t\t\t\t\t\tdagItem.LatestDagState = runResult.result.state;\n\t\t\t\t\t\tdagItem.refreshUI();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// Silently continue if a DAG's last run can't be fetched\n\t\t\t\t\tui.logToOutput(`Failed to fetch last run for ${dagItem.DagId}`, error as Error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tpublic async setViewTitle() {\n\t\tif (Session.Current.Server) {\n\t\t\tthis.view.title = Session.Current.Server.apiUrl + \" - \" + Session.Current.Server.apiUserName;\n\t\t} else {\n\t\t\tthis.view.title = \"Airflow\";\n\t\t}\n\t}\n\n\tpublic async getImportErrors() {\n\t\tui.logToOutput('DagTreeView.getImportErrors Started');\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getImportErrors();\n\t\tif (result.isSuccessful) {\n\t\t\tconst importErrors = result.result;\n\t\t\tif (importErrors.total_entries > 0) {\n\t\t\t\tui.showOutputMessage(result.result, \"Import Dag Errors! Check Output Panel\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate saveState() {\n\t\tui.logToOutput('DagTreeView.saveState Started');\n\t\tTelemetry.Current.send('dagTreeView.saveState.called');\n\n\t\ttry {\n\t\t\tSession.Current.Context!.globalState.update('FilterString', this.FilterString);\n\t\t\tSession.Current.Context!.globalState.update('ShowOnlyActive', this.ShowOnlyActive);\n\t\t\tSession.Current.Context!.globalState.update('ShowOnlyFavorite', this.ShowOnlyFavorite);\n\t\t\tSession.Current.Context!.globalState.update('FavoriteDags', this.FavoriteDags);\n\t\t} catch (error) {\n\t\t\tui.logToOutput(\"dagTreeView.saveState Error !!!\", error as Error);\n\t\t}\n\t}\n\n\tprivate setFilterMessage() {\n\t\tif (Session.Current.Server) {\n\t\t\tthis.view.message = this.getBoolenSign(this.ShowOnlyFavorite) + 'Fav, ' + this.getBoolenSign(this.ShowOnlyActive) + 'Active, Filter : ' + this.FilterString;\n\t\t}\n\t}\n\n\tprivate getBoolenSign(variable: boolean) {\n\t\treturn variable ? \"\" : \"\";\n\t}\n\n\tprivate loadState() {\n\t\tui.logToOutput('DagTreeView.loadState Started');\n\t\tTelemetry.Current.send('dagTreeView.loadState.called');\n\n\t\ttry {\n\t\t\tconst filterStringTemp: string = Session.Current.Context!.globalState.get('FilterString') || '';\n\t\t\tif (filterStringTemp) {\n\t\t\t\tthis.FilterString = filterStringTemp;\n\t\t\t\tthis.setFilterMessage();\n\t\t\t}\n\n\t\t\tconst ShowOnlyActiveTemp: boolean | undefined = Session.Current.Context!.globalState.get('ShowOnlyActive');\n\t\t\tif (ShowOnlyActiveTemp !== undefined) { this.ShowOnlyActive = ShowOnlyActiveTemp; }\n\n\t\t\tconst ShowOnlyFavoriteTemp: boolean | undefined = Session.Current.Context!.globalState.get('ShowOnlyFavorite');\n\t\t\tif (ShowOnlyFavoriteTemp !== undefined) { this.ShowOnlyFavorite = ShowOnlyFavoriteTemp; }\n\n\t\t\tconst FavoriteDagsTemp: string[] | undefined = Session.Current.Context!.globalState.get('FavoriteDags');\n\t\t\tif (FavoriteDagsTemp !== undefined) { this.FavoriteDags = FavoriteDagsTemp; }\n\n\t\t} catch (error) {\n\t\t\tui.logToOutput(\"dagTreeView.loadState Error !!!\", error as Error);\n\t\t}\n\t}\n\n\tpublic async viewConnections() {\n\t\tui.logToOutput('DagTreeView.viewConnections Started');\n\t\tTelemetry.Current.send('dagTreeView.viewConnections.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ConnectionsView } = await import('../admin/ConnectionsView');\n\t\t\tConnectionsView.render();\n\t\t}\n\t}\n\n\tpublic async viewVariables() {\n\t\tui.logToOutput('DagTreeView.viewVariables Started');\n\t\tTelemetry.Current.send('dagTreeView.viewVariables.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { VariablesView } = await import('../admin/VariablesView');\n\t\t\tVariablesView.render();\n\t\t}\n\t}\n\n\tpublic async viewProviders() {\n\t\tui.logToOutput('DagTreeView.viewProviders Started');\n\t\tTelemetry.Current.send('dagTreeView.viewProviders.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ProvidersView } = await import('../admin/ProvidersView');\n\t\t\tProvidersView.render();\n\t\t}\n\t}\n\n\tpublic async viewConfigs() {\n\t\tui.logToOutput('DagTreeView.viewConfigs Started');\n\t\tTelemetry.Current.send('dagTreeView.viewConfigs.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ConfigsView } = await import('../admin/ConfigsView');\n\t\t\tConfigsView.render();\n\t\t}\n\t}\n\n\tpublic async viewPlugins() {\n\t\tui.logToOutput('DagTreeView.viewPlugins Started');\n\t\tTelemetry.Current.send('dagTreeView.viewPlugins.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { PluginsView } = await import('../admin/PluginsView');\n\t\t\tPluginsView.render();\n\t\t}\n\t}\n\n\tpublic async viewDagRuns() {\n\t\tui.logToOutput('DagTreeView.viewDagRuns Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagRuns.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tDailyDagRunView.render();\n\t\t}\n\t}\n\n\tpublic async viewDagRunHistory() {\n\t\tui.logToOutput('DagTreeView.viewDagRunHistory Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagRunHistory.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tDagRunView.render();\n\t\t}\n\t}\n\n\tpublic async viewServerHealth() {\n\t\tui.logToOutput('DagTreeView.viewServerHealth Started');\n\t\tTelemetry.Current.send('dagTreeView.viewServerHealth.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ServerHealthView } = await import('../admin/ServerHealthView');\n\t\t\tServerHealthView.render();\n\t\t}\n\t}\n}","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { arrForEach, arrIndexOf, dumpObj, getDocument, getLazy, getNavigator, isArray, isFunction, isNullOrUndefined, isString, isTruthy, isUndefined, objForEachKey, strEndsWith, strIndexOf, strLeft, strSubstring, strTrim, utcNow } from \"@nevware21/ts-utils\";\r\nimport { cfgDfMerge } from \"../Config/ConfigDefaultHelpers\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ENABLED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PUSH, _DYN_SPLICE, _DYN_SPLIT, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getLocation, isIE } from \"./EnvUtils\";\r\nimport { getExceptionName, isNotNullOrUndefined, setValue, strContains } from \"./HelperFuncs\";\r\nimport { STR_DOMAIN, STR_EMPTY, STR_PATH, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nvar strToGMTString = \"toGMTString\";\r\nvar strToUTCString = \"toUTCString\";\r\nvar strCookie = \"cookie\";\r\nvar strExpires = \"expires\";\r\nvar strIsCookieUseDisabled = \"isCookieUseDisabled\";\r\nvar strDisableCookiesUsage = \"disableCookiesUsage\";\r\nvar strConfigCookieMgr = \"_ckMgr\";\r\nvar _supportsCookies = null;\r\nvar _allowUaSameSite = null;\r\nvar _parsedCookieValue = null;\r\nvar _doc;\r\nvar _cookieCache = {};\r\nvar _globalCookieConfig = {};\r\n// // `isCookieUseDisabled` is deprecated, so explicitly casting as a key of IConfiguration to avoid typing error\r\n// // when both isCookieUseDisabled and disableCookiesUsage are used disableCookiesUsage will take precedent, which is\r\n// // why its listed first\r\n/**\r\n * Set the supported dynamic config values as undefined (or an empty object) so that\r\n * any listeners will be informed of any changes.\r\n * Explicitly NOT including the deprecated `isCookieUseDisabled` as we don't want to support\r\n * the v1 deprecated field as dynamic for updates\r\n */\r\nvar rootDefaultConfig = (_a = {\r\n        cookieCfg: cfgDfMerge((_b = {},\r\n            _b[STR_DOMAIN] = { fb: \"cookieDomain\", dfVal: isNotNullOrUndefined },\r\n            _b.path = { fb: \"cookiePath\", dfVal: isNotNullOrUndefined },\r\n            _b.enabled = UNDEFINED_VALUE,\r\n            _b.ignoreCookies = UNDEFINED_VALUE,\r\n            _b.blockedCookies = UNDEFINED_VALUE,\r\n            _b.disableCookieDefer = false,\r\n            _b)),\r\n        cookieDomain: UNDEFINED_VALUE,\r\n        cookiePath: UNDEFINED_VALUE\r\n    },\r\n    _a[strDisableCookiesUsage] = UNDEFINED_VALUE,\r\n    _a);\r\nfunction _getDoc() {\r\n    !_doc && (_doc = getLazy(function () { return getDocument(); }));\r\n}\r\n/**\r\n * @ignore\r\n * DO NOT USE or export from the module, this is exposed as public to support backward compatibility of previous static utility methods only.\r\n * If you want to manager cookies either use the ICookieMgr available from the core instance via getCookieMgr() or create\r\n * your own instance of the CookieMgr and use that.\r\n * Using this directly for enabling / disabling cookie handling will not only affect your usage but EVERY user of cookies.\r\n * Example, if you are using a shared component that is also using Application Insights you will affect their cookie handling.\r\n * @param logger - The DiagnosticLogger to use for reporting errors.\r\n */\r\nfunction _gblCookieMgr(config, logger) {\r\n    // Stash the global instance against the BaseCookieMgr class\r\n    var inst = createCookieMgr[strConfigCookieMgr] || _globalCookieConfig[strConfigCookieMgr];\r\n    if (!inst) {\r\n        // Note: not using the getSetValue() helper as that would require always creating a temporary cookieMgr\r\n        // that ultimately is never used\r\n        inst = createCookieMgr[strConfigCookieMgr] = createCookieMgr(config, logger);\r\n        _globalCookieConfig[strConfigCookieMgr] = inst;\r\n    }\r\n    return inst;\r\n}\r\nfunction _isMgrEnabled(cookieMgr) {\r\n    if (cookieMgr) {\r\n        return cookieMgr.isEnabled();\r\n    }\r\n    return true;\r\n}\r\nfunction _isIgnoredCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.ignoreCookies)) {\r\n        return arrIndexOf(cookieMgrCfg.ignoreCookies, name) !== -1;\r\n    }\r\n    return false;\r\n}\r\nfunction _isBlockedCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.blockedCookies)) {\r\n        if (arrIndexOf(cookieMgrCfg.blockedCookies, name) !== -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return _isIgnoredCookie(cookieMgrCfg, name);\r\n}\r\nfunction _isCfgEnabled(rootConfig, cookieMgrConfig) {\r\n    var isCfgEnabled = cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */];\r\n    if (isNullOrUndefined(isCfgEnabled)) {\r\n        // Set the enabled from the provided setting or the legacy root values\r\n        var cookieEnabled = void 0;\r\n        // This field is deprecated and dynamic updates will not be fully supported\r\n        if (!isUndefined(rootConfig[strIsCookieUseDisabled])) {\r\n            cookieEnabled = !rootConfig[strIsCookieUseDisabled];\r\n        }\r\n        // If this value is defined it takes precedent over the above\r\n        if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n            cookieEnabled = !rootConfig[strDisableCookiesUsage];\r\n        }\r\n        // Not setting the cookieMgrConfig.enabled as that will update (set) the global dynamic config\r\n        // So future \"updates\" then may not be as expected\r\n        isCfgEnabled = cookieEnabled;\r\n    }\r\n    return isCfgEnabled;\r\n}\r\n/**\r\n * Helper to return the ICookieMgr from the core (if not null/undefined) or a default implementation\r\n * associated with the configuration or a legacy default.\r\n * @param core - The AppInsightsCore instance to get the cookie manager from\r\n * @param config - The config to use if the core is not available\r\n * @returns\r\n */\r\nexport function safeGetCookieMgr(core, config) {\r\n    var cookieMgr;\r\n    if (core) {\r\n        // Always returns an instance\r\n        cookieMgr = core.getCookieMgr();\r\n    }\r\n    else if (config) {\r\n        var cookieCfg = config.cookieCfg;\r\n        if (cookieCfg && cookieCfg[strConfigCookieMgr]) {\r\n            cookieMgr = cookieCfg[strConfigCookieMgr];\r\n        }\r\n        else {\r\n            cookieMgr = createCookieMgr(config);\r\n        }\r\n    }\r\n    if (!cookieMgr) {\r\n        // Get or initialize the default global (legacy) cookie manager if we couldn't find one\r\n        cookieMgr = _gblCookieMgr(config, (core || {})[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    return cookieMgr;\r\n}\r\nexport function createCookieMgr(rootConfig, logger) {\r\n    var cookieMgrConfig;\r\n    var _path;\r\n    var _domain;\r\n    var unloadHandler;\r\n    // Explicitly checking against false, so that setting to undefined will === true\r\n    var _enabled;\r\n    var _getCookieFn;\r\n    var _setCookieFn;\r\n    var _delCookieFn;\r\n    // Buffer for storing cookie operations when cookies are disabled\r\n    // null = deferral disabled, array = deferral enabled with pending operations\r\n    var _pendingCookies = [];\r\n    // Helper function to format deletion cookie value\r\n    function _formatDeletionValue(path) {\r\n        var _a;\r\n        var values = (_a = {},\r\n            _a[STR_PATH] = path ? path : \"/\",\r\n            _a[strExpires] = \"Thu, 01 Jan 1970 00:00:01 GMT\",\r\n            _a);\r\n        if (!isIE()) {\r\n            // Set max age to expire now\r\n            values[\"max-age\"] = \"0\";\r\n        }\r\n        return _formatCookieValue(STR_EMPTY, values);\r\n    }\r\n    // Helper function to format a cookie value with all attributes\r\n    function _formatSetCookieValue(value, maxAgeSec, domain, path) {\r\n        var values = {};\r\n        var theValue = strTrim(value || STR_EMPTY);\r\n        var idx = strIndexOf(theValue, \";\");\r\n        if (idx !== -1) {\r\n            theValue = strTrim(strLeft(value, idx));\r\n            values = _extractParts(strSubstring(value, idx + 1));\r\n        }\r\n        // Only update domain if not already present (isUndefined) and the value is truthy (not null, undefined or empty string)\r\n        setValue(values, STR_DOMAIN, domain || _domain, isTruthy, isUndefined);\r\n        if (!isNullOrUndefined(maxAgeSec)) {\r\n            var _isIE = isIE();\r\n            if (isUndefined(values[strExpires])) {\r\n                var nowMs = utcNow();\r\n                // Only add expires if not already present\r\n                var expireMs = nowMs + (maxAgeSec * 1000);\r\n                // Sanity check, if zero or -ve then ignore\r\n                if (expireMs > 0) {\r\n                    var expiry = new Date();\r\n                    expiry.setTime(expireMs);\r\n                    setValue(values, strExpires, _formatDate(expiry, !_isIE ? strToUTCString : strToGMTString) || _formatDate(expiry, _isIE ? strToGMTString : strToUTCString) || STR_EMPTY, isTruthy);\r\n                }\r\n            }\r\n            if (!_isIE) {\r\n                // Only replace if not already present\r\n                setValue(values, \"max-age\", STR_EMPTY + maxAgeSec, null, isUndefined);\r\n            }\r\n        }\r\n        var location = getLocation();\r\n        if (location && location.protocol === \"https:\") {\r\n            setValue(values, \"secure\", null, null, isUndefined);\r\n            // Only set same site if not also secure\r\n            if (_allowUaSameSite === null) {\r\n                _allowUaSameSite = !uaDisallowsSameSiteNone((getNavigator() || {})[_DYN_USER_AGENT /* @min:%2euserAgent */]);\r\n            }\r\n            if (_allowUaSameSite) {\r\n                setValue(values, \"SameSite\", \"None\", null, isUndefined);\r\n            }\r\n        }\r\n        setValue(values, STR_PATH, path || _path, null, isUndefined);\r\n        return _formatCookieValue(theValue, values);\r\n    }\r\n    // Helper function to remove any existing pending operations for a cookie name\r\n    function _removePendingCookie(name) {\r\n        if (_pendingCookies) {\r\n            // Remove all existing entries for this cookie name (iterate backwards to handle multiple entries safely)\r\n            for (var i = _pendingCookies[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n                if (_pendingCookies[i].n === name) {\r\n                    _pendingCookies[_DYN_SPLICE /* @min:%2esplice */](i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Helper function to flush pending cookies when cookies become enabled\r\n    function _flushPendingCookies() {\r\n        if (areCookiesSupported(logger) && _pendingCookies) {\r\n            // Process all pending cookie operations in order\r\n            arrForEach(_pendingCookies, function (pendingData) {\r\n                if (!_isBlockedCookie(cookieMgrConfig, pendingData.n)) {\r\n                    if (pendingData.o === 0 /* ePendingOp.Set */) {\r\n                        // Apply the cached cookie value directly\r\n                        _setCookieFn(pendingData.n, pendingData.v);\r\n                    }\r\n                    else if (pendingData.o === 1 /* ePendingOp.Purge */) {\r\n                        // Apply the cached deletion\r\n                        _delCookieFn(pendingData.n, pendingData.v);\r\n                    }\r\n                }\r\n            });\r\n            // Clear the cache after flushing\r\n            _pendingCookies = [];\r\n        }\r\n    }\r\n    // Make sure the root config is dynamic as it may be the global config\r\n    rootConfig = createDynamicConfig(rootConfig || _globalCookieConfig, null, logger).cfg;\r\n    // Will get recalled if the referenced configuration is changed\r\n    unloadHandler = onConfigChange(rootConfig, function (details) {\r\n        // Make sure the root config has all of the the defaults to the root config to ensure they are dynamic\r\n        details.setDf(details.cfg, rootDefaultConfig);\r\n        // Create and apply the defaults to the cookieCfg element\r\n        cookieMgrConfig = details.ref(details.cfg, \"cookieCfg\"); // details.setDf(details.cfg.cookieCfg, defaultConfig);\r\n        _path = cookieMgrConfig[STR_PATH /* @min:%2epath */] || \"/\";\r\n        _domain = cookieMgrConfig[STR_DOMAIN /* @min:%2edomain */];\r\n        // Handle deferral state changes based on disableCookieDefer setting\r\n        if (cookieMgrConfig.disableCookieDefer) {\r\n            // When deferral is disabled, set to null to disable any deferral behavior\r\n            // All pending operations are dropped\r\n            _pendingCookies = null;\r\n        }\r\n        else if (_pendingCookies === null) {\r\n            // When deferral is enabled and was previously disabled, initialize empty buffer\r\n            _pendingCookies = [];\r\n        }\r\n        // Check if enabled state is changing\r\n        var wasEnabled = _enabled;\r\n        // Explicitly checking against false, so that setting to undefined will === true\r\n        _enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false;\r\n        _getCookieFn = cookieMgrConfig.getCookie || _getCookieValue;\r\n        _setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n        _delCookieFn = cookieMgrConfig.delCookie || _setCookieValue;\r\n        // If cookies were just enabled via config change and we have pending cookies, flush them\r\n        if (!wasEnabled && _enabled && _pendingCookies) {\r\n            _flushPendingCookies();\r\n        }\r\n    }, logger);\r\n    var cookieMgr = {\r\n        isEnabled: function () {\r\n            var enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false && _enabled && areCookiesSupported(logger);\r\n            // Using an indirect lookup for any global cookie manager to support tree shaking for SDK's\r\n            // that don't use the \"applicationinsights-core\" version of the default cookie function\r\n            var gblManager = _globalCookieConfig[strConfigCookieMgr];\r\n            if (enabled && gblManager && cookieMgr !== gblManager) {\r\n                // Make sure the GlobalCookie Manager instance (if not this instance) is also enabled.\r\n                // As the global (deprecated) functions may have been called (for backward compatibility)\r\n                enabled = _isMgrEnabled(gblManager);\r\n            }\r\n            return enabled;\r\n        },\r\n        setEnabled: function (value) {\r\n            // Change the default config and allow the asynchronous dynamic config logic\r\n            // to process all of the changes at once (like handling change to the enabled and\r\n            // disabling caching at the same time)\r\n            cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */] = value;\r\n            // If this value is defined someone else might be listening to it so also update it,\r\n            // this also handles the edge case if the default above is not dynamic\r\n            if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n                rootConfig[strDisableCookiesUsage] = !value;\r\n            }\r\n        },\r\n        set: function (name, value, maxAgeSec, domain, path) {\r\n            var result = false;\r\n            var isBlocked = _isBlockedCookie(cookieMgrConfig, name);\r\n            if (!isBlocked) {\r\n                var cookieValue = _formatSetCookieValue(value, maxAgeSec, domain, path);\r\n                if (_isMgrEnabled(cookieMgr)) {\r\n                    _setCookieFn(name, cookieValue);\r\n                    result = true;\r\n                }\r\n                else if (_pendingCookies) {\r\n                    // Defer the fully formatted cookie value if cookies are disabled and deferral is enabled\r\n                    // Remove any previous operation for this cookie name (latest operation wins)\r\n                    _removePendingCookie(name);\r\n                    // Append new operation to the array\r\n                    _pendingCookies[_DYN_PUSH /* @min:%2epush */]({\r\n                        n: name,\r\n                        o: 0 /* ePendingOp.Set */,\r\n                        v: cookieValue\r\n                    });\r\n                    result = true; // Return true to indicate the operation was \"successful\" (deferred)\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        get: function (name) {\r\n            var value = STR_EMPTY;\r\n            var isIgnored = _isIgnoredCookie(cookieMgrConfig, name);\r\n            if (!isIgnored) {\r\n                if (_isMgrEnabled(cookieMgr)) {\r\n                    value = _getCookieFn(name);\r\n                }\r\n                else if (_pendingCookies) {\r\n                    // Search for the most recent operation for this cookie (search backwards through array)\r\n                    for (var i = _pendingCookies[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n                        var pendingData = _pendingCookies[i];\r\n                        if (pendingData.n === name) {\r\n                            // Found the most recent operation for this cookie name\r\n                            if (pendingData.o === 0 /* ePendingOp.Set */) {\r\n                                // Return deferred value if it was a set operation\r\n                                // Extract the value part from the formatted cookie string (before first semicolon)\r\n                                var cookieValue = pendingData.v;\r\n                                var idx = strIndexOf(cookieValue, \";\");\r\n                                value = idx !== -1 ? strTrim(strLeft(cookieValue, idx)) : strTrim(cookieValue);\r\n                            }\r\n                            // If it was a Purge operation, value remains empty (STR_EMPTY)\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n        del: function (name, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr)) {\r\n                // Only remove the cookie if the manager and cookie support has not been disabled\r\n                result = cookieMgr.purge(name, path);\r\n            }\r\n            else if (_pendingCookies) {\r\n                // Defer the deletion operation when cookies are disabled and deferral is enabled\r\n                // Remove any previous operation for this cookie name (latest operation wins)\r\n                _removePendingCookie(name);\r\n                // Append new deletion operation to the array\r\n                _pendingCookies[_DYN_PUSH /* @min:%2epush */]({\r\n                    n: name,\r\n                    o: 1 /* ePendingOp.Purge */,\r\n                    v: _formatDeletionValue(path)\r\n                });\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        purge: function (name, path) {\r\n            var result = false;\r\n            if (areCookiesSupported(logger)) {\r\n                // Setting the expiration date in the past immediately removes the cookie\r\n                _delCookieFn(name, _formatDeletionValue(path));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        unload: function (isAsync) {\r\n            unloadHandler && unloadHandler.rm();\r\n            unloadHandler = null;\r\n            // Clear any pending cookies on unload\r\n            _pendingCookies = null;\r\n        }\r\n    };\r\n    // Associated this cookie manager with the config\r\n    cookieMgr[strConfigCookieMgr] = cookieMgr;\r\n    return cookieMgr;\r\n}\r\n/*\r\n* Helper method to tell if document.cookie object is supported by the runtime\r\n*/\r\nexport function areCookiesSupported(logger) {\r\n    if (_supportsCookies === null) {\r\n        _supportsCookies = false;\r\n        !_doc && _getDoc();\r\n        try {\r\n            var doc = _doc.v || {};\r\n            _supportsCookies = doc[strCookie] !== undefined;\r\n        }\r\n        catch (e) {\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 68 /* _eInternalMessageId.CannotAccessCookie */, \"Cannot access document.cookie - \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return _supportsCookies;\r\n}\r\nfunction _extractParts(theValue) {\r\n    var values = {};\r\n    if (theValue && theValue[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var parts = strTrim(theValue)[_DYN_SPLIT /* @min:%2esplit */](\";\");\r\n        arrForEach(parts, function (thePart) {\r\n            thePart = strTrim(thePart || STR_EMPTY);\r\n            if (thePart) {\r\n                var idx = strIndexOf(thePart, \"=\");\r\n                if (idx === -1) {\r\n                    values[thePart] = null;\r\n                }\r\n                else {\r\n                    values[strTrim(strLeft(thePart, idx))] = strTrim(strSubstring(thePart, idx + 1));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return values;\r\n}\r\nfunction _formatDate(theDate, func) {\r\n    if (isFunction(theDate[func])) {\r\n        return theDate[func]();\r\n    }\r\n    return null;\r\n}\r\nfunction _formatCookieValue(value, values) {\r\n    var cookieValue = value || STR_EMPTY;\r\n    objForEachKey(values, function (name, theValue) {\r\n        cookieValue += \"; \" + name + (!isNullOrUndefined(theValue) ? \"=\" + theValue : STR_EMPTY);\r\n    });\r\n    return cookieValue;\r\n}\r\nfunction _getCookieValue(name) {\r\n    var cookieValue = STR_EMPTY;\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        var theCookie = _doc.v[strCookie] || STR_EMPTY;\r\n        if (_parsedCookieValue !== theCookie) {\r\n            _cookieCache = _extractParts(theCookie);\r\n            _parsedCookieValue = theCookie;\r\n        }\r\n        cookieValue = strTrim(_cookieCache[name] || STR_EMPTY);\r\n    }\r\n    return cookieValue;\r\n}\r\nfunction _setCookieValue(name, cookieValue) {\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        _doc.v[strCookie] = name + \"=\" + cookieValue;\r\n    }\r\n}\r\nexport function uaDisallowsSameSiteNone(userAgent) {\r\n    if (!isString(userAgent)) {\r\n        return false;\r\n    }\r\n    // Cover all iOS based browsers here. This includes:\r\n    // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n    // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n    if (strContains(userAgent, \"CPU iPhone OS 12\") || strContains(userAgent, \"iPad; CPU OS 12\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n    // - Safari on Mac OS X\r\n    // This does not include:\r\n    // - Internal browser on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strContains(userAgent, \"Version/\") && strContains(userAgent, \"Safari\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n    // - Internal browser on Mac OS X\r\n    // This does not include:\r\n    // - Safari on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strEndsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n        return true;\r\n    }\r\n    // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n    // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n    // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n    if (strContains(userAgent, \"Chrome/5\") || strContains(userAgent, \"Chrome/6\")) {\r\n        return true;\r\n    }\r\n    // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n    // that don't specify their Chrome version as lacking support for SameSite=None.\r\n    if (strContains(userAgent, \"UnrealEngine\") && !strContains(userAgent, \"Chrome\")) {\r\n        return true;\r\n    }\r\n    // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n    // NB: this rule isn't complete - you need regex to make a complete rule.\r\n    // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n    if (strContains(userAgent, \"UCBrowser/12\") || strContains(userAgent, \"UCBrowser/11\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=CookieMgr.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createAllPromise, createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, arrIndexOf, objDefine, safe, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_DATA, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SPLICE, _DYN_UNLOAD, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_OFFLINE_DROP, STR_OFFLINE_SENT, STR_OFFLINE_STORE, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar defaultValues = {\r\n    perfEvtsSendAll: false\r\n};\r\nfunction _runScheduledListeners(asyncNotifications) {\r\n    asyncNotifications.h = null;\r\n    var callbacks = asyncNotifications.cb;\r\n    asyncNotifications.cb = [];\r\n    arrForEach(callbacks, function (cb) {\r\n        // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n        safe(cb.fn, [cb.arg]);\r\n    });\r\n}\r\n// This function is used to combine the logic of running the listeners and handling the async notifications so that they don't\r\n// create multiple timers if there are multiple async listeners.\r\nfunction _runListeners(listeners, name, asyncNotifications, callback) {\r\n    arrForEach(listeners, function (listener) {\r\n        if (listener && listener[name]) {\r\n            if (asyncNotifications) {\r\n                // Schedule the callback to be called after the current call stack has cleared.\r\n                asyncNotifications.cb[_DYN_PUSH /* @min:%2epush */]({\r\n                    fn: callback,\r\n                    arg: listener\r\n                });\r\n                asyncNotifications.h = asyncNotifications.h || scheduleTimeout(_runScheduledListeners, 0, asyncNotifications);\r\n            }\r\n            else {\r\n                // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n                safe(callback, [listener]);\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Class to manage sending notifications to all the listeners.\r\n */\r\nvar NotificationManager = /** @class */ (function () {\r\n    function NotificationManager(config) {\r\n        this.listeners = [];\r\n        var perfEvtsSendAll;\r\n        var unloadHandler;\r\n        var _listeners = [];\r\n        var _asyncNotifications = {\r\n            h: null,\r\n            cb: []\r\n        };\r\n        var cfgHandler = createDynamicConfig(config, defaultValues);\r\n        unloadHandler = cfgHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n            perfEvtsSendAll = !!details.cfg.perfEvtsSendAll;\r\n        });\r\n        dynamicProto(NotificationManager, this, function (_self) {\r\n            objDefine(_self, \"listeners\", {\r\n                g: function () { return _listeners; }\r\n            });\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _listeners[_DYN_PUSH /* @min:%2epush */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - AWTNotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                var index = arrIndexOf(_listeners, listener);\r\n                while (index > -1) {\r\n                    _listeners[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                    index = arrIndexOf(_listeners, listener);\r\n                }\r\n            };\r\n            /**\r\n             * Notification for events sent.\r\n             * @param events - The array of events that have been sent.\r\n             */\r\n            _self[STR_EVENTS_SENT /* @min:%2eeventsSent */] = function (events) {\r\n                _runListeners(_listeners, STR_EVENTS_SENT, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_SENT /* @min:%2eeventsSent */](events);\r\n                });\r\n            };\r\n            /**\r\n             * Notification for events being discarded.\r\n             * @param events - The array of events that have been discarded by the SDK.\r\n             * @param reason - The reason for which the SDK discarded the events. The EventsDiscardedReason\r\n             * constant should be used to check the different values.\r\n             * @param sendType - [Optional] The send type used when the events were discarded.\r\n             */\r\n            _self[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */] = function (events, reason, sendType) {\r\n                _runListeners(_listeners, STR_EVENTS_DISCARDED, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */](events, reason, sendType);\r\n                });\r\n            };\r\n            /**\r\n             * [Optional] A function called when the events have been requested to be sent to the sever.\r\n             * @param sendReason - The reason why the event batch is being sent.\r\n             * @param isAsync - A flag which identifies whether the requests are being sent in an async or sync manner.\r\n             */\r\n            _self[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */] = function (sendReason, isAsync) {\r\n                _runListeners(_listeners, STR_EVENTS_SEND_REQUEST, isAsync ? _asyncNotifications : null, function (listener) {\r\n                    listener[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendReason, isAsync);\r\n                });\r\n            };\r\n            _self[STR_PERF_EVENT /* @min:%2eperfEvent */] = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    // Send all events or only parent events\r\n                    if (perfEvtsSendAll || !perfEvent[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */]()) {\r\n                        _runListeners(_listeners, STR_PERF_EVENT, null, function (listener) {\r\n                            if (perfEvent.isAsync) {\r\n                                scheduleTimeout(function () { return listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent); }, 0);\r\n                            }\r\n                            else {\r\n                                listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */] = function (events) {\r\n                if (events && events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_STORE, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */](events);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */] = function (batch) {\r\n                if (batch && batch[_DYN_DATA /* @min:%2edata */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_SENT, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */](batch);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */] = function (cnt, reason) {\r\n                if (cnt > 0) {\r\n                    var rn_1 = reason || 0; // default is unknown\r\n                    _runListeners(_listeners, STR_OFFLINE_DROP, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */](cnt, rn_1);\r\n                    });\r\n                }\r\n            };\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                var _finishUnload = function () {\r\n                    unloadHandler && unloadHandler.rm();\r\n                    unloadHandler = null;\r\n                    _listeners = [];\r\n                    // Clear any async listener\r\n                    _asyncNotifications.h && _asyncNotifications.h[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                    _asyncNotifications.h = null;\r\n                    _asyncNotifications.cb = [];\r\n                };\r\n                var waiting;\r\n                _runListeners(_listeners, \"unload\", null, function (listener) {\r\n                    var asyncUnload = listener[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n                    if (asyncUnload) {\r\n                        if (!waiting) {\r\n                            waiting = [];\r\n                        }\r\n                        waiting[_DYN_PUSH /* @min:%2epush */](asyncUnload);\r\n                    }\r\n                });\r\n                if (waiting) {\r\n                    return createPromise(function (resolve) {\r\n                        return doAwaitResponse(createAllPromise(waiting), function () {\r\n                            _finishUnload();\r\n                            resolve();\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    _finishUnload();\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for NotificationManager.prototype.addNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.removeNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.eventsSent.\r\n// Removed Stub for NotificationManager.prototype.eventsDiscarded.\r\n// Removed Stub for NotificationManager.prototype.eventsSendRequest.\r\n// Removed Stub for NotificationManager.prototype.perfEvent.\r\n// Removed Stub for NotificationManager.prototype.unload.\r\n// Removed Stub for NotificationManager.prototype.offlineEventsStored.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchSent.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchDrop.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    NotificationManager.__ieDyn=1;\n\n    return NotificationManager;\r\n}());\r\nexport { NotificationManager };\r\n//# sourceMappingURL=NotificationManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar _a;\r\nimport { __spreadArrayFn as __spreadArray } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, createSyncAllSettledPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrAppend, arrForEach, arrIndexOf, createTimeout, deepExtend, hasDocument, isFunction, isNullOrUndefined, isPlainObject, isPromiseLike, objDeepFreeze, objDefine, objForEachKey, objFreeze, objHasOwn, scheduleTimeout, throwError } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { ActiveStatus } from \"../JavaScriptSDK.Enums/InitActiveStatusEnum\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_CREATE_NEW, _DYN_ENABLED, _DYN_GET_NOTIFY_MGR, _DYN_GET_PLUGIN, _DYN_GET_PROCESS_TEL_CONT2, _DYN_IDENTIFIER, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_NAME, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SPLICE, _DYN_STOP_POLLING_INTERNA3, _DYN_TEARDOWN, _DYN_UNLOAD, _DYN_VALUE, _DYN_VERSION, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { doUnloadAll, runTargetUnload } from \"./AsyncUtils\";\r\nimport { ChannelControllerPriority } from \"./Constants\";\r\nimport { createCookieMgr } from \"./CookieMgr\";\r\nimport { createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDebugListener } from \"./DbgExtensionUtils\";\r\nimport { DiagnosticLogger, _InternalLogMessage, _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getSetValue, isNotNullOrUndefined, proxyFunctionAs, proxyFunctions, toISOString } from \"./HelperFuncs\";\r\nimport { STR_CHANNELS, STR_CORE, STR_CREATE_PERF_MGR, STR_DISABLED, STR_EMPTY, STR_EVENTS_DISCARDED, STR_EXTENSIONS, STR_EXTENSION_CONFIG, STR_GET_PERF_MGR, STR_PRIORITY, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nimport { NotificationManager } from \"./NotificationManager\";\r\nimport { PerfManager, doPerf, getGblPerfMgr } from \"./PerfManager\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { _getPluginState, createDistributedTraceContext, initializePlugins, sortPlugins } from \"./TelemetryHelpers\";\r\nimport { TelemetryInitializerPlugin } from \"./TelemetryInitializerPlugin\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\n// import { IStatsBeat, IStatsBeatConfig, IStatsBeatState } from \"../JavaScriptSDK.Interfaces/IStatsBeat\";\r\n// import { IStatsMgr } from \"../JavaScriptSDK.Interfaces/IStatsMgr\";\r\nvar strValidationError = \"Plugins must provide initialize method\";\r\nvar strNotificationManager = \"_notificationManager\";\r\nvar strSdkUnloadingError = \"SDK is still unloading...\";\r\nvar strSdkNotInitialized = \"SDK is not initialized\";\r\nvar maxInitQueueSize = 100;\r\nvar maxInitTimeout = 50000;\r\n// const strPluginUnloadFailed = \"Failed to unload plugin\";\r\n// /**\r\n//  * Default StatsBeatMgr configuration\r\n//  * @internal\r\n//  */\r\n// const defaultStatsCfg: IConfigDefaults<IStatsBeatConfig> = objDeepFreeze({\r\n//     shrtInt: UNDEFINED_VALUE,\r\n//     endCfg: cfgDfMerge([])\r\n// });\r\n// /**\r\n//  * Default SDK initialization configuration\r\n//  * @internal\r\n//  */\r\n// const defaultSdkConfig: IConfigDefaults<IInternalSdkConfiguration> = objDeepFreeze({\r\n//     stats: { rdOnly: true, mrg: true, v: defaultStatsCfg }\r\n// });\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze((_a = {\r\n        cookieCfg: {}\r\n    },\r\n    _a[STR_EXTENSIONS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_CHANNELS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_EXTENSION_CONFIG] = { ref: true, v: {} },\r\n    _a[STR_CREATE_PERF_MGR] = UNDEFINED_VALUE,\r\n    _a.loggingLevelConsole = 0 /* eLoggingSeverity.DISABLED */,\r\n    _a.diagnosticLogInterval = UNDEFINED_VALUE,\r\n    _a));\r\n/**\r\n * Helper to create the default performance manager\r\n * @param core - The AppInsightsCore instance\r\n * @param notificationMgr - The notification manager\r\n */\r\nfunction _createPerfManager(core, notificationMgr) {\r\n    return new PerfManager(notificationMgr);\r\n}\r\nfunction _validateExtensions(logger, channelPriority, allExtensions) {\r\n    // Concat all available extensions\r\n    var coreExtensions = [];\r\n    var channels = [];\r\n    // Check if any two extensions have the same priority, then warn to console\r\n    // And extract the local extensions from the\r\n    var extPriorities = {};\r\n    // Extension validation\r\n    arrForEach(allExtensions, function (ext) {\r\n        // Check for ext.initialize\r\n        if (isNullOrUndefined(ext) || isNullOrUndefined(ext[_DYN_INITIALIZE /* @min:%2einitialize */])) {\r\n            throwError(strValidationError);\r\n        }\r\n        var extPriority = ext[STR_PRIORITY /* @min:%2epriority */];\r\n        var identifier = ext[_DYN_IDENTIFIER /* @min:%2eidentifier */];\r\n        if (ext && extPriority) {\r\n            if (!isNullOrUndefined(extPriorities[extPriority])) {\r\n                _warnToConsole(logger, \"Two extensions have same priority #\" + extPriority + \" - \" + extPriorities[extPriority] + \", \" + identifier);\r\n            }\r\n            else {\r\n                // set a value\r\n                extPriorities[extPriority] = identifier;\r\n            }\r\n        }\r\n        // Split extensions to core and channels\r\n        if (!extPriority || extPriority < channelPriority) {\r\n            // Add to core extension that will be managed by AppInsightsCore\r\n            coreExtensions[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n        else {\r\n            channels[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n    });\r\n    return {\r\n        core: coreExtensions,\r\n        channels: channels\r\n    };\r\n}\r\nfunction _isPluginPresent(thePlugin, plugins) {\r\n    var exists = false;\r\n    arrForEach(plugins, function (plugin) {\r\n        if (plugin === thePlugin) {\r\n            exists = true;\r\n            return -1;\r\n        }\r\n    });\r\n    return exists;\r\n}\r\nfunction _deepMergeConfig(details, target, newValues, merge) {\r\n    // Lets assign the new values to the existing config\r\n    if (newValues) {\r\n        objForEachKey(newValues, function (key, value) {\r\n            if (merge) {\r\n                if (isPlainObject(value) && isPlainObject(target[key])) {\r\n                    // The target is an object and it has a value\r\n                    _deepMergeConfig(details, target[key], value, merge);\r\n                }\r\n            }\r\n            if (merge && isPlainObject(value) && isPlainObject(target[key])) {\r\n                // The target is an object and it has a value\r\n                _deepMergeConfig(details, target[key], value, merge);\r\n            }\r\n            else {\r\n                // Just Assign (replace) and/or make the property dynamic\r\n                details.set(target, key, value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _findWatcher(listeners, newWatcher) {\r\n    var theListener = null;\r\n    var idx = -1;\r\n    arrForEach(listeners, function (listener, lp) {\r\n        if (listener.w === newWatcher) {\r\n            theListener = listener;\r\n            idx = lp;\r\n            return -1;\r\n        }\r\n    });\r\n    return { i: idx, l: theListener };\r\n}\r\nfunction _addDelayedCfgListener(listeners, newWatcher) {\r\n    var theListener = _findWatcher(listeners, newWatcher).l;\r\n    if (!theListener) {\r\n        theListener = {\r\n            w: newWatcher,\r\n            rm: function () {\r\n                var fnd = _findWatcher(listeners, newWatcher);\r\n                if (fnd.i !== -1) {\r\n                    listeners[_DYN_SPLICE /* @min:%2esplice */](fnd.i, 1);\r\n                }\r\n            }\r\n        };\r\n        listeners[_DYN_PUSH /* @min:%2epush */](theListener);\r\n    }\r\n    return theListener;\r\n}\r\nfunction _registerDelayedCfgListener(config, listeners, logger) {\r\n    arrForEach(listeners, function (listener) {\r\n        var unloadHdl = onConfigChange(config, listener.w, logger);\r\n        delete listener.w; // Clear the listener reference so it will get garbage collected.\r\n        // replace the remove function\r\n        listener.rm = function () {\r\n            unloadHdl.rm();\r\n        };\r\n    });\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _initDebugListener(configHandler, unloadContainer, notificationManager, debugListener) {\r\n    // Will get recalled if any referenced config values are changed\r\n    unloadContainer.add(configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n        var disableDbgExt = details.cfg.disableDbgExt;\r\n        if (disableDbgExt === true && debugListener) {\r\n            // Remove any previously loaded debug listener\r\n            notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](debugListener);\r\n            debugListener = null;\r\n        }\r\n        if (notificationManager && !debugListener && disableDbgExt !== true) {\r\n            debugListener = getDebugListener(details.cfg);\r\n            notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](debugListener);\r\n        }\r\n    }));\r\n    return debugListener;\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _createUnloadHook(unloadHook) {\r\n    return objDefine({\r\n        rm: function () {\r\n            unloadHook.rm();\r\n        }\r\n    }, \"toJSON\", { v: function () { return \"aicore::onCfgChange<\" + JSON.stringify(unloadHook) + \">\"; } });\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function () {\r\n    function AppInsightsCore() {\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _configHandler;\r\n        var _isInitialized;\r\n        var _logger;\r\n        var _eventQueue;\r\n        var _notificationManager;\r\n        // let _statsBeat: IStatsBeat | null;\r\n        // let _statsMgr: IStatsMgr | null;\r\n        var _perfManager;\r\n        var _cfgPerfManager;\r\n        var _cookieManager;\r\n        var _pluginChain;\r\n        var _configExtensions;\r\n        var _channelConfig;\r\n        var _channels;\r\n        var _isUnloading;\r\n        var _telemetryInitializerPlugin;\r\n        var _internalLogsEventName;\r\n        var _evtNamespace;\r\n        var _unloadHandlers;\r\n        var _hookContainer;\r\n        var _debugListener;\r\n        var _traceCtx;\r\n        var _instrumentationKey;\r\n        var _cfgListeners;\r\n        var _extensions;\r\n        var _pluginVersionStringArr;\r\n        var _pluginVersionString;\r\n        var _activeStatus; // to indicate if ikey or endpoint url promised is resolved or not\r\n        var _endpoint;\r\n        var _initInMemoMaxSize; // max event count limit during wait for init promises to be resolved\r\n        var _isStatusSet; // track if active status is set in case of init timeout and init promises setting the status twice\r\n        var _initTimer;\r\n        /**\r\n         * Internal log poller\r\n         */\r\n        var _internalLogPoller;\r\n        var _internalLogPollerListening;\r\n        var _forceStopInternalLogPoller;\r\n        dynamicProto(AppInsightsCore, this, function (_self) {\r\n            // Set the default values (also called during teardown)\r\n            _initDefaults();\r\n            // Special internal method to allow the unit tests and DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_extensions, _eventQueue];\r\n            };\r\n            _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () { return _isInitialized; };\r\n            // since version 3.3.0\r\n            _self.activeStatus = function () { return _activeStatus; };\r\n            // since version 3.3.0\r\n            // internal\r\n            _self._setPendingStatus = function () {\r\n                _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n            };\r\n            // Creating the self.initialize = ()\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                if (_isUnloading) {\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                // Make sure core is only initialized once\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    throwError(\"Core cannot be initialized more than once\");\r\n                }\r\n                _configHandler = createDynamicConfig(config, defaultConfig, logger || _self[_DYN_LOGGER /* @min:%2elogger */], false);\r\n                // Re-assigning the local config property so we don't have any references to the passed value and it can be garbage collected\r\n                config = _configHandler.cfg;\r\n                // This will be \"re-run\" if the referenced config properties are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var rootCfg = details.cfg;\r\n                    _initInMemoMaxSize = rootCfg.initInMemoMaxSize || maxInitQueueSize;\r\n                    _handleIKeyEndpointPromises(rootCfg);\r\n                    // Mark the extensionConfig and all first level keys as referenced\r\n                    // This is so that calls to getExtCfg() will always return the same object\r\n                    // Even when a user may \"re-assign\" the plugin properties (or it's unloaded/reloaded)\r\n                    var extCfg = details.ref(details.cfg, STR_EXTENSION_CONFIG);\r\n                    objForEachKey(extCfg, function (key) {\r\n                        details.ref(extCfg, key);\r\n                    });\r\n                }));\r\n                _notificationManager = notificationManager;\r\n                // Initialize the debug listener outside of the closure to reduce the retained memory footprint\r\n                _debugListener = _initDebugListener(_configHandler, _hookContainer, _notificationManager && _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */](), _debugListener);\r\n                _initPerfManager();\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = logger;\r\n                var cfgExtensions = config[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                // Extension validation\r\n                _configExtensions = [];\r\n                _configExtensions[_DYN_PUSH /* @min:%2epush */].apply(_configExtensions, __spreadArray(__spreadArray([], extensions, false), cfgExtensions, false));\r\n                _channelConfig = config[STR_CHANNELS /* @min:%2echannels */];\r\n                _initPluginChain(null);\r\n                if (!_channels || _channels[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    throwError(\"No \" + STR_CHANNELS + \" available\");\r\n                }\r\n                if (_channelConfig && _channelConfig[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                    var teeController = _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */](\"TeeChannelController\");\r\n                    if (!teeController || !teeController.plugin) {\r\n                        _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"TeeChannel required\");\r\n                    }\r\n                }\r\n                _registerDelayedCfgListener(config, _cfgListeners, _logger);\r\n                _cfgListeners = null;\r\n                _isInitialized = true;\r\n                if (_activeStatus === ActiveStatus.ACTIVE) {\r\n                    _releaseQueues();\r\n                }\r\n            };\r\n            _self.getChannels = function () {\r\n                var controls = [];\r\n                if (_channels) {\r\n                    arrForEach(_channels, function (channel) {\r\n                        controls[_DYN_PUSH /* @min:%2epush */](channel);\r\n                    });\r\n                }\r\n                return objFreeze(controls);\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                doPerf(_self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */](), function () { return \"AppInsightsCore:track\"; }, function () {\r\n                    if (telemetryItem === null) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        // throw error\r\n                        throwError(\"Invalid telemetry item\");\r\n                    }\r\n                    // do basic validation before sending it through the pipeline\r\n                    if (!telemetryItem[_DYN_NAME /* @min:%2ename */] && isNullOrUndefined(telemetryItem[_DYN_NAME /* @min:%2ename */])) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        throwError(\"telemetry name required\");\r\n                    }\r\n                    // setup default iKey if not passed in\r\n                    telemetryItem.iKey = telemetryItem.iKey || _instrumentationKey;\r\n                    // add default timestamp if not passed in\r\n                    telemetryItem.time = telemetryItem.time || toISOString(new Date());\r\n                    // Common Schema 4.0\r\n                    telemetryItem.ver = telemetryItem.ver || \"4.0\";\r\n                    if (!_isUnloading && _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]() && _activeStatus === ActiveStatus.ACTIVE) {\r\n                        // Process the telemetry plugin chain\r\n                        _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](telemetryItem);\r\n                    }\r\n                    else if (_activeStatus !== ActiveStatus.INACTIVE) {\r\n                        // Queue events until all extensions are initialized\r\n                        if (_eventQueue[_DYN_LENGTH /* @min:%2elength */] <= _initInMemoMaxSize) {\r\n                            // set limit, if full, stop adding new events\r\n                            _eventQueue[_DYN_PUSH /* @min:%2epush */](telemetryItem);\r\n                        }\r\n                    }\r\n                }, function () { return ({ item: telemetryItem }); }, !(telemetryItem.sync));\r\n            };\r\n            _self[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */] = _createTelCtx;\r\n            _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */] = function () {\r\n                if (!_notificationManager) {\r\n                    _notificationManager = new NotificationManager(_configHandler.cfg);\r\n                    // For backward compatibility only\r\n                    _self[strNotificationManager] = _notificationManager;\r\n                }\r\n                return _notificationManager;\r\n            };\r\n            /**\r\n             * Adds a notification listener. The SDK calls methods on the listener when an appropriate notification is raised.\r\n             * The added plugins must raise notifications. If the plugins do not implement the notifications, then no methods will be\r\n             * called.\r\n             * @param listener - An INotificationListener object.\r\n             */\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _self.getNotifyMgr()[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - INotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](listener);\r\n                }\r\n            };\r\n            _self.getCookieMgr = function () {\r\n                if (!_cookieManager) {\r\n                    _cookieManager = createCookieMgr(_configHandler.cfg, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _cookieManager;\r\n            };\r\n            _self.setCookieMgr = function (cookieMgr) {\r\n                if (_cookieManager !== cookieMgr) {\r\n                    runTargetUnload(_cookieManager, false);\r\n                    _cookieManager = cookieMgr;\r\n                }\r\n            };\r\n            _self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */] = function () {\r\n                return _perfManager || _cfgPerfManager || getGblPerfMgr();\r\n            };\r\n            _self.setPerfMgr = function (perfMgr) {\r\n                _perfManager = perfMgr;\r\n            };\r\n            // _self.getStatsBeat = (statsBeatState: IStatsBeatState) => {\r\n            //     // create a new statsbeat if not initialize yet or the endpoint is different\r\n            //     // otherwise, return the existing one, or null\r\n            //     if (statsBeatState) {\r\n            //         if (_statsMgr && _statsMgr.enabled) {\r\n            //             if (_statsBeat && _statsBeat.endpoint !== statsBeatState.endpoint) {\r\n            //                 // Different endpoint, so unload the existing and create a new one\r\n            //                 _statsBeat.enabled = false;\r\n            //                 _statsBeat = null;\r\n            //             }\r\n            //             if (!_statsBeat) {\r\n            //                 // Create a new statsbeat instance\r\n            //                 _statsBeat = _statsMgr.newInst(statsBeatState);\r\n            //             }\r\n            //         } else if (_statsBeat) {\r\n            //             // Disable and remove any previously created statsbeat instance\r\n            //             _statsBeat.enabled = false;\r\n            //             _statsBeat = null;\r\n            //         }\r\n            //         // Return the current statsbeat instance or null if not created\r\n            //         return _statsBeat;\r\n            //     }\r\n            //     // Return null as no statsbeat state was provided\r\n            //     return null;\r\n            // };\r\n            // _self.setStatsMgr = (statsMgr: IStatsMgr) => {\r\n            //     if (_statsMgr && _statsMgr !== statsMgr) {\r\n            //         // Disable any previously created statsbeat instance\r\n            //         if (_statsBeat) {\r\n            //             _statsBeat.enabled = false;\r\n            //             _statsBeat = null;\r\n            //         }\r\n            //     }\r\n            //     _statsMgr = statsMgr;\r\n            // };\r\n            _self.eventCnt = function () {\r\n                return _eventQueue[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.releaseQueue = function () {\r\n                if (_isInitialized && _eventQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var eventQueue = _eventQueue;\r\n                    _eventQueue = [];\r\n                    if (_activeStatus === 2 /* eActiveStatus.ACTIVE */) {\r\n                        arrForEach(eventQueue, function (event) {\r\n                            event.iKey = event.iKey || _instrumentationKey;\r\n                            _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](event);\r\n                        });\r\n                    }\r\n                    else {\r\n                        // new one for msg ikey\r\n                        _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"core init status is not active\");\r\n                    }\r\n                }\r\n            };\r\n            _self.pollInternalLogs = function (eventName) {\r\n                _internalLogsEventName = eventName || null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                return _startLogPoller(true);\r\n            };\r\n            function _handleIKeyEndpointPromises(theConfig) {\r\n                // app Insights core only handle ikey and endpointurl, aisku will handle cs\r\n                // But we want to reference these config values so that if any future changes are made\r\n                // this will trigger the re-run of the watch function\r\n                // and the ikey and endpointUrl will be set to the new values\r\n                var ikey = theConfig.instrumentationKey;\r\n                var endpointUrl = theConfig.endpointUrl; // do not need to validate endpoint url, if it is null, default one will be set by sender\r\n                // Check if we are waiting for previous promises to be resolved, won't apply new changes\r\n                if (_activeStatus !== 3 /* eActiveStatus.PENDING */) {\r\n                    if (isNullOrUndefined(ikey)) {\r\n                        _instrumentationKey = null;\r\n                        // if new ikey is null, set status to be inactive, all new events will be saved in memory or dropped\r\n                        _activeStatus = ActiveStatus.INACTIVE;\r\n                        var msg = \"Please provide instrumentation key\";\r\n                        if (!_isInitialized) {\r\n                            // only throw error during initialization\r\n                            throwError(msg);\r\n                        }\r\n                        else {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, msg);\r\n                            _releaseQueues();\r\n                        }\r\n                        return;\r\n                    }\r\n                    var promises = [];\r\n                    if (isPromiseLike(ikey)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](ikey);\r\n                        _instrumentationKey = null; // reset current local ikey variable (otherwise it will always be the previous ikeys if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string\r\n                        _instrumentationKey = ikey;\r\n                    }\r\n                    if (isPromiseLike(endpointUrl)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](endpointUrl);\r\n                        _endpoint = null; // reset current local endpoint variable (otherwise it will always be the previous urls if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string or null\r\n                        _endpoint = endpointUrl;\r\n                    }\r\n                    // at least have one promise\r\n                    if (promises[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        _waitForInitPromises(theConfig, promises);\r\n                    }\r\n                    else {\r\n                        // means no promises\r\n                        _setStatus();\r\n                    }\r\n                }\r\n            }\r\n            function _waitForInitPromises(theConfig, promises) {\r\n                // reset to false for new dynamic changes\r\n                _isStatusSet = false;\r\n                _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n                var initTimeout = isNotNullOrUndefined(theConfig.initTimeOut) ? theConfig.initTimeOut : maxInitTimeout; // theConfig.initTimeOut could be 0\r\n                var allPromises = createSyncAllSettledPromise(promises);\r\n                if (_initTimer) {\r\n                    // Stop any previous timer\r\n                    _initTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                }\r\n                _initTimer = scheduleTimeout(function () {\r\n                    // set _isStatusSet to true\r\n                    // set active status\r\n                    // release queues\r\n                    _initTimer = null;\r\n                    if (!_isStatusSet) {\r\n                        _setStatus();\r\n                    }\r\n                }, initTimeout);\r\n                doAwaitResponse(allPromises, function (response) {\r\n                    try {\r\n                        if (_isStatusSet) {\r\n                            // promises take too long to resolve, ignore them\r\n                            // active status should be set by timeout already\r\n                            return;\r\n                        }\r\n                        if (!response.rejected) {\r\n                            var values = response[_DYN_VALUE /* @min:%2evalue */];\r\n                            if (values && values[_DYN_LENGTH /* @min:%2elength */]) {\r\n                                // ikey\r\n                                var ikeyRes = values[0];\r\n                                _instrumentationKey = ikeyRes && ikeyRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                // endpoint\r\n                                if (values[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                                    var endpointRes = values[1];\r\n                                    _endpoint = endpointRes && endpointRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                }\r\n                            }\r\n                            if (_instrumentationKey) {\r\n                                // if ikey is null, no need to trigger extra dynamic changes for extensions\r\n                                theConfig.instrumentationKey = _instrumentationKey; // set config.instrumentationKey for extensions to consume\r\n                                theConfig.endpointUrl = _endpoint; // set config.endpointUrl for extensions to consume\r\n                            }\r\n                        }\r\n                        // set _isStatusSet to true\r\n                        // set active status\r\n                        // release queues\r\n                        _setStatus();\r\n                    }\r\n                    catch (e) {\r\n                        if (!_isStatusSet) {\r\n                            _setStatus();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function _setStatus() {\r\n                _isStatusSet = true;\r\n                if (isNullOrUndefined(_instrumentationKey)) {\r\n                    _activeStatus = ActiveStatus.INACTIVE;\r\n                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 112 /* _eInternalMessageId.InitPromiseException */, \"ikey can't be resolved from promises\");\r\n                }\r\n                else {\r\n                    _activeStatus = ActiveStatus.ACTIVE;\r\n                }\r\n                _releaseQueues();\r\n            }\r\n            function _releaseQueues() {\r\n                if (_isInitialized) {\r\n                    _self.releaseQueue();\r\n                    _self.pollInternalLogs();\r\n                }\r\n            }\r\n            function _startLogPoller(alwaysStart) {\r\n                if ((!_internalLogPoller || !_internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */]) && !_forceStopInternalLogPoller) {\r\n                    var shouldStart = alwaysStart || (_logger && _logger.queue[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                    if (shouldStart) {\r\n                        if (!_internalLogPollerListening) {\r\n                            _internalLogPollerListening = true;\r\n                            // listen for any configuration changes so that changes to the\r\n                            // interval will cause the timer to be re-initialized\r\n                            _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                                var interval = details.cfg.diagnosticLogInterval;\r\n                                if (!interval || !(interval > 0)) {\r\n                                    interval = 10000;\r\n                                }\r\n                                var isRunning = false;\r\n                                if (_internalLogPoller) {\r\n                                    // It was already created so remember it's running and cancel\r\n                                    isRunning = _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */];\r\n                                    _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                                }\r\n                                // Create / reconfigure\r\n                                _internalLogPoller = createTimeout(_flushInternalLogs, interval);\r\n                                _internalLogPoller.unref();\r\n                                // Restart if previously running\r\n                                _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = isRunning;\r\n                            }));\r\n                        }\r\n                        _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = true;\r\n                    }\r\n                }\r\n                return _internalLogPoller;\r\n            }\r\n            _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */] = function () {\r\n                _forceStopInternalLogPoller = true;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                _flushInternalLogs();\r\n            };\r\n            // Add addTelemetryInitializer\r\n            proxyFunctions(_self, function () { return _telemetryInitializerPlugin; }, [\"addTelemetryInitializer\"]);\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync, unloadComplete, cbTimeout) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_isInitialized) {\r\n                    // The SDK is not initialized\r\n                    throwError(strSdkNotInitialized);\r\n                }\r\n                // Check if the SDK still unloading so throw\r\n                if (_isUnloading) {\r\n                    // The SDK is already unloading\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                var unloadState = {\r\n                    reason: 50 /* TelemetryUnloadReason.SdkUnload */,\r\n                    isAsync: isAsync,\r\n                    flushComplete: false\r\n                };\r\n                var result;\r\n                if (isAsync && !unloadComplete) {\r\n                    result = createPromise(function (resolve) {\r\n                        // Set the callback to the promise resolve callback\r\n                        unloadComplete = resolve;\r\n                    });\r\n                }\r\n                var processUnloadCtx = createProcessTelemetryUnloadContext(_getPluginChain(), _self);\r\n                processUnloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                    // if (_statsBeat) {\r\n                    //     // Disable any statsbeat instance\r\n                    //     _statsBeat.enabled = false;\r\n                    //     _statsBeat = null;\r\n                    // }\r\n                    _hookContainer.run(_self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                    // Run any \"unload\" functions for the _cookieManager, _notificationManager and _logger\r\n                    doUnloadAll([_cookieManager, _notificationManager, _logger], isAsync, function () {\r\n                        _initDefaults();\r\n                        unloadComplete && unloadComplete(unloadState);\r\n                    });\r\n                }, _self);\r\n                function _doUnload(flushComplete) {\r\n                    unloadState.flushComplete = flushComplete;\r\n                    _isUnloading = true;\r\n                    // Run all of the unload handlers first (before unloading the plugins)\r\n                    _unloadHandlers.run(processUnloadCtx, unloadState);\r\n                    // Stop polling the internal logs\r\n                    _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */]();\r\n                    // Start unloading the components, from this point onwards the SDK should be considered to be in an unstable state\r\n                    processUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                _flushInternalLogs();\r\n                if (!_flushChannels(isAsync, _doUnload, 6 /* SendRequestReason.SdkUnload */, cbTimeout)) {\r\n                    _doUnload(false);\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */] = _getPlugin;\r\n            _self.addPlugin = function (plugin, replaceExisting, isAsync, addCb) {\r\n                if (!plugin) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(strValidationError);\r\n                    return;\r\n                }\r\n                var existingPlugin = _getPlugin(plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                if (existingPlugin && !replaceExisting) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(\"Plugin [\" + plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"] is already loaded!\");\r\n                    return;\r\n                }\r\n                var updateState = {\r\n                    reason: 16 /* TelemetryUpdateReason.PluginAdded */\r\n                };\r\n                function _addPlugin(removed) {\r\n                    _configExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                    updateState.added = [plugin];\r\n                    // Re-Initialize the plugin chain\r\n                    _initPluginChain(updateState);\r\n                    addCb && addCb(true);\r\n                }\r\n                if (existingPlugin) {\r\n                    var removedPlugins_1 = [existingPlugin.plugin];\r\n                    var unloadState = {\r\n                        reason: 2 /* TelemetryUnloadReason.PluginReplace */,\r\n                        isAsync: !!isAsync\r\n                    };\r\n                    _removePlugins(removedPlugins_1, unloadState, function (removed) {\r\n                        if (!removed) {\r\n                            // Previous plugin was successfully removed or was not installed\r\n                            addCb && addCb(false);\r\n                        }\r\n                        else {\r\n                            updateState.removed = removedPlugins_1;\r\n                            updateState.reason |= 32 /* TelemetryUpdateReason.PluginRemoved */;\r\n                            _addPlugin(true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    _addPlugin(false);\r\n                }\r\n            };\r\n            _self.updateCfg = function (newConfig, mergeExisting) {\r\n                if (mergeExisting === void 0) { mergeExisting = true; }\r\n                var updateState;\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    updateState = {\r\n                        reason: 1 /* TelemetryUpdateReason.ConfigurationChanged */,\r\n                        cfg: _configHandler.cfg,\r\n                        oldCfg: deepExtend({}, _configHandler.cfg),\r\n                        newConfig: deepExtend({}, newConfig),\r\n                        merge: mergeExisting\r\n                    };\r\n                    newConfig = updateState.newConfig;\r\n                    var cfg = _configHandler.cfg;\r\n                    // replace the immutable (if initialized) values\r\n                    // We don't currently allow updating the extensions and channels via the update config\r\n                    // So overwriting any user provided values to reuse the existing values\r\n                    newConfig[STR_EXTENSIONS /* @min:%2eextensions */] = cfg[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                    newConfig[STR_CHANNELS /* @min:%2echannels */] = cfg[STR_CHANNELS /* @min:%2echannels */];\r\n                }\r\n                // Explicitly blocking any previous config watchers so that they don't get called because\r\n                // of this bulk update (Probably not necessary)\r\n                _configHandler._block(function (details) {\r\n                    // Lets assign the new values to the existing config either overwriting or re-assigning\r\n                    var theConfig = details.cfg;\r\n                    _deepMergeConfig(details, theConfig, newConfig, mergeExisting);\r\n                    if (!mergeExisting) {\r\n                        // Remove (unassign) the values \"missing\" from the newConfig and also not in the default config\r\n                        objForEachKey(theConfig, function (key) {\r\n                            if (!objHasOwn(newConfig, key)) {\r\n                                // Set the value to undefined\r\n                                details.set(theConfig, key, UNDEFINED_VALUE);\r\n                            }\r\n                        });\r\n                    }\r\n                    // Apply defaults to the new config\r\n                    details.setDf(theConfig, defaultConfig);\r\n                }, true);\r\n                // Now execute all of the listeners (synchronously) so they update their values immediately\r\n                _configHandler.notify();\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            };\r\n            _self.evtNamespace = function () {\r\n                return _evtNamespace;\r\n            };\r\n            _self.flush = _flushChannels;\r\n            _self.getTraceCtx = function (createNew) {\r\n                if (!_traceCtx) {\r\n                    _traceCtx = createDistributedTraceContext();\r\n                }\r\n                return _traceCtx;\r\n            };\r\n            _self.setTraceCtx = function (traceCtx) {\r\n                _traceCtx = traceCtx || null;\r\n            };\r\n            _self.addUnloadHook = _addUnloadHook;\r\n            // Create the addUnloadCb\r\n            proxyFunctionAs(_self, \"addUnloadCb\", function () { return _unloadHandlers; }, \"add\");\r\n            _self.onCfgChange = function (handler) {\r\n                var unloadHook;\r\n                if (!_isInitialized) {\r\n                    unloadHook = _addDelayedCfgListener(_cfgListeners, handler);\r\n                }\r\n                else {\r\n                    unloadHook = onConfigChange(_configHandler.cfg, handler, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _createUnloadHook(unloadHook);\r\n            };\r\n            _self.getWParam = function () {\r\n                return (hasDocument() || !!_configHandler.cfg.enableWParam) ? 0 : -1;\r\n            };\r\n            function _setPluginVersions() {\r\n                var thePlugins = {};\r\n                _pluginVersionStringArr = [];\r\n                var _addPluginVersions = function (plugins) {\r\n                    if (plugins) {\r\n                        arrForEach(plugins, function (plugin) {\r\n                            if (plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] && plugin[_DYN_VERSION /* @min:%2eversion */] && !thePlugins[plugin.identifier]) {\r\n                                var ver = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"=\" + plugin[_DYN_VERSION /* @min:%2eversion */];\r\n                                _pluginVersionStringArr[_DYN_PUSH /* @min:%2epush */](ver);\r\n                                thePlugins[plugin.identifier] = plugin;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                _addPluginVersions(_channels);\r\n                if (_channelConfig) {\r\n                    arrForEach(_channelConfig, function (channels) {\r\n                        _addPluginVersions(channels);\r\n                    });\r\n                }\r\n                _addPluginVersions(_configExtensions);\r\n            }\r\n            function _initDefaults() {\r\n                _isInitialized = false;\r\n                // Use a default logger so initialization errors are not dropped on the floor with full logging\r\n                _configHandler = createDynamicConfig({}, defaultConfig, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                // Set the logging level to critical so that any critical initialization failures are displayed on the console\r\n                _configHandler.cfg[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */] = 1 /* eLoggingSeverity.CRITICAL */;\r\n                // Define _self.config\r\n                objDefine(_self, \"config\", {\r\n                    g: function () { return _configHandler.cfg; },\r\n                    s: function (newValue) {\r\n                        _self.updateCfg(newValue, false);\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionStringArr\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionStringArr) {\r\n                            _setPluginVersions();\r\n                        }\r\n                        return _pluginVersionStringArr;\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionString\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionString) {\r\n                            if (!_pluginVersionStringArr) {\r\n                                _setPluginVersions();\r\n                            }\r\n                            _pluginVersionString = _pluginVersionStringArr.join(\";\");\r\n                        }\r\n                        return _pluginVersionString || STR_EMPTY;\r\n                    }\r\n                });\r\n                objDefine(_self, \"logger\", {\r\n                    g: function () {\r\n                        if (!_logger) {\r\n                            _logger = new DiagnosticLogger(_configHandler.cfg);\r\n                            _configHandler[_DYN_LOGGER /* @min:%2elogger */] = _logger;\r\n                        }\r\n                        return _logger;\r\n                    },\r\n                    s: function (newLogger) {\r\n                        _configHandler[_DYN_LOGGER /* @min:%2elogger */] = newLogger;\r\n                        if (_logger !== newLogger) {\r\n                            runTargetUnload(_logger, false);\r\n                            _logger = newLogger;\r\n                        }\r\n                    }\r\n                });\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = new DiagnosticLogger(_configHandler.cfg);\r\n                _extensions = [];\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                _telemetryInitializerPlugin = new TelemetryInitializerPlugin();\r\n                _eventQueue = [];\r\n                runTargetUnload(_notificationManager, false);\r\n                _notificationManager = null;\r\n                _perfManager = null;\r\n                // _statsBeat = null;\r\n                _cfgPerfManager = null;\r\n                runTargetUnload(_cookieManager, false);\r\n                _cookieManager = null;\r\n                _pluginChain = null;\r\n                _configExtensions = [];\r\n                _channelConfig = null;\r\n                _channels = null;\r\n                _isUnloading = false;\r\n                _internalLogsEventName = null;\r\n                _evtNamespace = createUniqueNamespace(\"AIBaseCore\", true);\r\n                _unloadHandlers = createUnloadHandlerContainer();\r\n                _traceCtx = null;\r\n                _instrumentationKey = null;\r\n                _hookContainer = createUnloadHookContainer();\r\n                _cfgListeners = [];\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller = null;\r\n                _internalLogPollerListening = false;\r\n                _activeStatus = 0 /* eActiveStatus.NONE */; // default is None\r\n                _endpoint = null;\r\n                _initInMemoMaxSize = null;\r\n                _isStatusSet = false;\r\n                _initTimer = null;\r\n                // if (_statsBeat) {\r\n                //     // Unload and disable any statsbeat instance\r\n                //     _statsBeat.enabled = false;\r\n                // }\r\n                // _statsBeat = null;\r\n            }\r\n            function _createTelCtx() {\r\n                var theCtx = createProcessTelemetryContext(_getPluginChain(), _configHandler.cfg, _self);\r\n                theCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                return theCtx;\r\n            }\r\n            // Initialize or Re-initialize the plugins\r\n            function _initPluginChain(updateState) {\r\n                // Extension validation\r\n                var theExtensions = _validateExtensions(_self[_DYN_LOGGER /* @min:%2elogger */], ChannelControllerPriority, _configExtensions);\r\n                _pluginChain = null;\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                // Get the primary channel queue and include as part of the normal extensions\r\n                _channels = (_channelConfig || [])[0] || [];\r\n                // Add any channels provided in the extensions and sort them\r\n                _channels = sortPlugins(arrAppend(_channels, theExtensions[STR_CHANNELS /* @min:%2echannels */]));\r\n                // Create an array of all extensions, including the _channels\r\n                var allExtensions = arrAppend(sortPlugins(theExtensions[STR_CORE /* @min:%2ecore */]), _channels);\r\n                // Required to allow plugins to call core.getPlugin() during their own initialization\r\n                _extensions = objFreeze(allExtensions);\r\n                // This has a side effect of adding the extensions passed during initialization\r\n                // into the config.extensions, so you can see all of the extensions loaded.\r\n                // This will also get updated by the addPlugin() and remove plugin code.\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                var rootCtx = _createTelCtx();\r\n                // Initializing the channels first\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    initializePlugins(rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels), allExtensions);\r\n                }\r\n                // Now initialize the normal extensions (explicitly not including the _channels as this can cause duplicate initialization)\r\n                initializePlugins(rootCtx, allExtensions);\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            }\r\n            function _getPlugin(pluginIdentifier) {\r\n                var theExt = null;\r\n                var thePlugin = null;\r\n                var channelHosts = [];\r\n                arrForEach(_extensions, function (ext) {\r\n                    if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier && ext !== _telemetryInitializerPlugin) {\r\n                        thePlugin = ext;\r\n                        return -1;\r\n                    }\r\n                    if (ext.getChannel) {\r\n                        channelHosts[_DYN_PUSH /* @min:%2epush */](ext);\r\n                    }\r\n                });\r\n                if (!thePlugin && channelHosts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(channelHosts, function (host) {\r\n                        thePlugin = host.getChannel(pluginIdentifier);\r\n                        if (!thePlugin) {\r\n                            return -1;\r\n                        }\r\n                    });\r\n                }\r\n                if (thePlugin) {\r\n                    theExt = {\r\n                        plugin: thePlugin,\r\n                        setEnabled: function (enabled) {\r\n                            _getPluginState(thePlugin)[STR_DISABLED] = !enabled;\r\n                        },\r\n                        isEnabled: function () {\r\n                            var pluginState = _getPluginState(thePlugin);\r\n                            return !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] && !pluginState[STR_DISABLED];\r\n                        },\r\n                        remove: function (isAsync, removeCb) {\r\n                            if (isAsync === void 0) { isAsync = true; }\r\n                            var pluginsToRemove = [thePlugin];\r\n                            var unloadState = {\r\n                                reason: 1 /* TelemetryUnloadReason.PluginUnload */,\r\n                                isAsync: isAsync\r\n                            };\r\n                            _removePlugins(pluginsToRemove, unloadState, function (removed) {\r\n                                if (removed) {\r\n                                    // Re-Initialize the plugin chain\r\n                                    _initPluginChain({\r\n                                        reason: 32 /* TelemetryUpdateReason.PluginRemoved */,\r\n                                        removed: pluginsToRemove\r\n                                    });\r\n                                }\r\n                                removeCb && removeCb(removed);\r\n                            });\r\n                        }\r\n                    };\r\n                }\r\n                return theExt;\r\n            }\r\n            function _getPluginChain() {\r\n                if (!_pluginChain) {\r\n                    // copy the collection of extensions\r\n                    var extensions = (_extensions || []).slice();\r\n                    // During add / remove this may get called again, so don't read if already present\r\n                    if (arrIndexOf(extensions, _telemetryInitializerPlugin) === -1) {\r\n                        extensions[_DYN_PUSH /* @min:%2epush */](_telemetryInitializerPlugin);\r\n                    }\r\n                    _pluginChain = createTelemetryProxyChain(sortPlugins(extensions), _configHandler.cfg, _self);\r\n                }\r\n                return _pluginChain;\r\n            }\r\n            function _removePlugins(thePlugins, unloadState, removeComplete) {\r\n                if (thePlugins && thePlugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var unloadChain = createTelemetryProxyChain(thePlugins, _configHandler.cfg, _self);\r\n                    var unloadCtx = createProcessTelemetryUnloadContext(unloadChain, _self);\r\n                    unloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                        var removed = false;\r\n                        // Remove the listed config extensions\r\n                        var newConfigExtensions = [];\r\n                        arrForEach(_configExtensions, function (plugin, idx) {\r\n                            if (!_isPluginPresent(plugin, thePlugins)) {\r\n                                newConfigExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                            }\r\n                            else {\r\n                                removed = true;\r\n                            }\r\n                        });\r\n                        _configExtensions = newConfigExtensions;\r\n                        _pluginVersionString = null;\r\n                        _pluginVersionStringArr = null;\r\n                        // Re-Create the channel config\r\n                        var newChannelConfig = [];\r\n                        if (_channelConfig) {\r\n                            arrForEach(_channelConfig, function (queue, idx) {\r\n                                var newQueue = [];\r\n                                arrForEach(queue, function (channel) {\r\n                                    if (!_isPluginPresent(channel, thePlugins)) {\r\n                                        newQueue[_DYN_PUSH /* @min:%2epush */](channel);\r\n                                    }\r\n                                    else {\r\n                                        removed = true;\r\n                                    }\r\n                                });\r\n                                newChannelConfig[_DYN_PUSH /* @min:%2epush */](newQueue);\r\n                            });\r\n                            _channelConfig = newChannelConfig;\r\n                        }\r\n                        removeComplete && removeComplete(removed);\r\n                        _startLogPoller();\r\n                    });\r\n                    unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                else {\r\n                    removeComplete(false);\r\n                }\r\n            }\r\n            function _flushInternalLogs() {\r\n                if (_logger && _logger.queue) {\r\n                    var queue = _logger.queue.slice(0);\r\n                    _logger.queue[_DYN_LENGTH /* @min:%2elength */] = 0;\r\n                    arrForEach(queue, function (logMessage) {\r\n                        var item = {\r\n                            name: _internalLogsEventName ? _internalLogsEventName : \"InternalMessageId: \" + logMessage[_DYN_MESSAGE_ID /* @min:%2emessageId */],\r\n                            iKey: _instrumentationKey,\r\n                            time: toISOString(new Date()),\r\n                            baseType: _InternalLogMessage.dataType,\r\n                            baseData: { message: logMessage[_DYN_MESSAGE /* @min:%2emessage */] }\r\n                        };\r\n                        _self.track(item);\r\n                    });\r\n                }\r\n            }\r\n            function _flushChannels(isAsync, callBack, sendReason, cbTimeout) {\r\n                // Setting waiting to one so that we don't call the callBack until we finish iterating\r\n                var waiting = 1;\r\n                var doneIterating = false;\r\n                var cbTimer = null;\r\n                cbTimeout = cbTimeout || 5000;\r\n                function doCallback() {\r\n                    waiting--;\r\n                    if (doneIterating && waiting === 0) {\r\n                        cbTimer && cbTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                        cbTimer = null;\r\n                        callBack && callBack(doneIterating);\r\n                        callBack = null;\r\n                    }\r\n                }\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var flushCtx = _createTelCtx()[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels);\r\n                    flushCtx.iterate(function (plugin) {\r\n                        if (plugin.flush) {\r\n                            waiting++;\r\n                            var handled_1 = false;\r\n                            // Not all channels will call this callback for every scenario\r\n                            if (!plugin.flush(isAsync, function () {\r\n                                handled_1 = true;\r\n                                doCallback();\r\n                            }, sendReason)) {\r\n                                if (!handled_1) {\r\n                                    // If any channel doesn't return true and it didn't call the callback, then we should assume that the callback\r\n                                    // will never be called, so use a timeout to allow the channel(s) some time to \"finish\" before triggering any\r\n                                    // followup function (such as unloading)\r\n                                    if (isAsync && cbTimer == null) {\r\n                                        cbTimer = scheduleTimeout(function () {\r\n                                            cbTimer = null;\r\n                                            doCallback();\r\n                                        }, cbTimeout);\r\n                                    }\r\n                                    else {\r\n                                        doCallback();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                doneIterating = true;\r\n                doCallback();\r\n                return true;\r\n            }\r\n            function _initPerfManager() {\r\n                // Save the previous config based performance manager creator to avoid creating new perf manager instances if unchanged\r\n                var prevCfgPerfMgr;\r\n                // Will get recalled if any referenced config values are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var enablePerfMgr = details.cfg.enablePerfMgr;\r\n                    if (enablePerfMgr) {\r\n                        var createPerfMgr = details.cfg[STR_CREATE_PERF_MGR /* @min:%2ecreatePerfMgr */];\r\n                        // for preCfgPerfMgr = createPerfMgr = null\r\n                        // initial createPerfMgr function should be _createPerfManager\r\n                        if ((prevCfgPerfMgr !== createPerfMgr) || !prevCfgPerfMgr) {\r\n                            if (!createPerfMgr) {\r\n                                createPerfMgr = _createPerfManager;\r\n                            }\r\n                            // Set the performance manager creation function if not defined\r\n                            getSetValue(details.cfg, STR_CREATE_PERF_MGR, createPerfMgr);\r\n                            prevCfgPerfMgr = createPerfMgr;\r\n                            // Remove any existing config based performance manager\r\n                            _cfgPerfManager = null;\r\n                        }\r\n                        // Only create the performance manager if it's not already created or manually set\r\n                        if (!_perfManager && !_cfgPerfManager && isFunction(createPerfMgr)) {\r\n                            // Create a new config based performance manager\r\n                            _cfgPerfManager = createPerfMgr(_self, _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]());\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Remove any existing config based performance manager\r\n                        _cfgPerfManager = null;\r\n                        // Clear the previous cached value so it can be GC'd\r\n                        prevCfgPerfMgr = null;\r\n                    }\r\n                }));\r\n            }\r\n            function _doUpdate(updateState) {\r\n                var updateCtx = createProcessTelemetryUpdateContext(_getPluginChain(), _self);\r\n                updateCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                if (!_self._updateHook || _self._updateHook(updateCtx, updateState) !== true) {\r\n                    updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n                }\r\n            }\r\n            function _logOrThrowError(message) {\r\n                var logger = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                if (logger) {\r\n                    // there should always be a logger\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, message);\r\n                    _startLogPoller();\r\n                }\r\n                else {\r\n                    throwError(message);\r\n                }\r\n            }\r\n            function _notifyInvalidEvent(telemetryItem) {\r\n                var manager = _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]();\r\n                if (manager) {\r\n                    manager[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */]([telemetryItem], 2 /* eEventsDiscardedReason.InvalidEvent */);\r\n                }\r\n            }\r\n            function _addUnloadHook(hooks) {\r\n                _hookContainer.add(hooks);\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.getChannels.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.getProcessTelContext.\r\n// Removed Stub for AppInsightsCore.prototype.getNotifyMgr.\r\n// Removed Stub for AppInsightsCore.prototype.addNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.removeNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.getCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.setCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.getPerfMgr.\r\n    // public getStatsBeat(statsBeatState: IStatsBeatState): IStatsBeat {\r\n    //     // @ DynamicProtoStub -- DO NOT add any code as this will be removed during packaging\r\n    //     return null;\r\n    // }\r\n    // public setStatsMgr(statsMgr?: IStatsMgr): void {\r\n    //     // @ DynamicProtoStub -- DO NOT add any code as this will be removed during packaging\r\n    // }\r\n// Removed Stub for AppInsightsCore.prototype.setPerfMgr.\r\n// Removed Stub for AppInsightsCore.prototype.eventCnt.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.stopPollingInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.addTelemetryInitializer.\r\n// Removed Stub for AppInsightsCore.prototype.unload.\r\n// Removed Stub for AppInsightsCore.prototype.getPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.addPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.updateCfg.\r\n// Removed Stub for AppInsightsCore.prototype.evtNamespace.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadCb.\r\n// Removed Stub for AppInsightsCore.prototype.flush.\r\n// Removed Stub for AppInsightsCore.prototype.getTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.setTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadHook.\r\n// Removed Stub for AppInsightsCore.prototype.onCfgChange.\r\n// Removed Stub for AppInsightsCore.prototype.activeStatus.\r\n// Removed Stub for AppInsightsCore.prototype._setPendingStatus.\r\n// Removed Stub for AppInsightsCore.prototype.releaseQueue.\r\n// Removed Stub for AppInsightsCore.prototype._updateHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}());\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n// \r\n// \r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_DIAG_LOG, _DYN_LENGTH, _DYN_PROCESS_NEXT, _DYN_SPLICE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { BaseTelemetryPlugin } from \"./BaseTelemetryPlugin\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getExceptionName } from \"./HelperFuncs\";\r\nimport { STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nfunction _addInitializer(_initializers, id, telemetryInitializer) {\r\n    var theInitializer = {\r\n        id: id,\r\n        fn: telemetryInitializer\r\n    };\r\n    arrAppend(_initializers, theInitializer);\r\n    var handler = {\r\n        remove: function () {\r\n            arrForEach(_initializers, function (initializer, idx) {\r\n                if (initializer.id === theInitializer.id) {\r\n                    _initializers[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    return -1;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    return handler;\r\n}\r\nfunction _runInitializers(_initializers, item, logger) {\r\n    var doNotSendItem = false;\r\n    var telemetryInitializersCount = _initializers[_DYN_LENGTH /* @min:%2elength */];\r\n    for (var i = 0; i < telemetryInitializersCount; ++i) {\r\n        var telemetryInitializer = _initializers[i];\r\n        if (telemetryInitializer) {\r\n            try {\r\n                if (telemetryInitializer.fn[_DYN_APPLY /* @min:%2eapply */](null, [item]) === false) {\r\n                    doNotSendItem = true;\r\n                    break;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // log error but dont stop executing rest of the telemetry initializers\r\n                // doNotSendItem = true;\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"Telemetry initializer failed: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n            }\r\n        }\r\n    }\r\n    return !doNotSendItem;\r\n}\r\nvar TelemetryInitializerPlugin = /** @class */ (function (_super) {\r\n    __extends(TelemetryInitializerPlugin, _super);\r\n    function TelemetryInitializerPlugin() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"TelemetryInitializerPlugin\";\r\n        _this.priority = 199;\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _id;\r\n        var _initializers;\r\n        _initDefaults();\r\n        dynamicProto(TelemetryInitializerPlugin, _this, function (_self, _base) {\r\n            _self.addTelemetryInitializer = function (telemetryInitializer) {\r\n                return _addInitializer(_initializers, _id++, telemetryInitializer);\r\n            };\r\n            _self[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */] = function (item, itemCtx) {\r\n                if (_runInitializers(_initializers, item, itemCtx ? itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]() : _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]())) {\r\n                    _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item, itemCtx);\r\n                }\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function () {\r\n                _initDefaults();\r\n            };\r\n        });\r\n        function _initDefaults() {\r\n            _id = 0;\r\n            _initializers = [];\r\n        }\r\n        return _this;\r\n    }\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.addTelemetryInitializer.\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.processTelemetry.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    TelemetryInitializerPlugin.__ieDyn=1;\n\n    return TelemetryInitializerPlugin;\r\n}(BaseTelemetryPlugin));\r\nexport { TelemetryInitializerPlugin };\r\n//# sourceMappingURL=TelemetryInitializerPlugin.js.map","module.exports = require(\"buffer\");","/*! https://github.com/nevware21/ts-utils v0.12.5 */\n/*\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureRef(value, name) {\n    return value[name];\n}\n\nvar UNDEF_VALUE = undefined;\nvar NULL_VALUE = null;\nvar EMPTY = \"\";\nvar FUNCTION = \"function\";\nvar OBJECT = \"object\";\nvar PROTOTYPE = \"prototype\";\nvar __PROTO__ = \"__proto__\";\nvar UNDEFINED = \"undefined\";\nvar CONSTRUCTOR = \"constructor\";\nvar SYMBOL = \"Symbol\";\nvar LENGTH = \"length\";\nvar NAME = \"name\";\nvar CALL = \"call\";\nvar TO_STRING = \"toString\";\nvar GET_OWN_PROPERTY_DESCRIPTOR = \"getOwnPropertyDescriptor\";\nvar GET_OWN_PROPERTY_NAMES = \"getOwnPropertyNames\";\nvar GET_OWN_PROPERTY_SYMBOLS = \"getOwnPropertySymbols\";\nvar ObjClass = ( /*#__PURE__*/_pureAssign(Object));\nvar ObjProto = ( /*#__PURE__*/_pureRef(ObjClass, PROTOTYPE));\nvar StrCls = ( /*#__PURE__*/_pureAssign(String));\nvar StrProto = ( /*#__PURE__*/_pureRef(StrCls, PROTOTYPE));\nvar MathCls = ( /*#__PURE__*/_pureAssign(Math));\nvar ArrCls = ( /*#__PURE__*/_pureAssign(Array));\nvar ArrProto = ( /*#__PURE__*/_pureRef(ArrCls, PROTOTYPE));\nvar ArrSlice = ( /*#__PURE__*/_pureRef(ArrProto, \"slice\"));\nvar NumberCls = ( /*#__PURE__*/_pureAssign(Number));\n\nvar POLYFILL_TAG = \"_polyfill\";\nvar POLYFILL_TYPE_NAME = \"__nw21$polytype__\";\nfunction _isPolyfill(obj) {\n    return !!(obj && obj[POLYFILL_TAG]);\n}\nfunction _isPolyfillType(obj, polyfillTypeName) {\n    return !!(obj && obj[POLYFILL_TYPE_NAME] === polyfillTypeName);\n}\n\nfunction safe(func, argArray) {\n    try {\n        return {\n            v: func.apply(this, argArray)\n        };\n    }\n    catch (e) {\n        return { e: e };\n    }\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGet(cb, defValue, argArray) {\n    var result = safe(cb, argArray);\n    return result.e ? defValue : result.v;\n}\n\nvar _primitiveTypes;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createIs(theType) {\n    return function (value) {\n        return typeof value === theType;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createIsWithPoly(theType) {\n    return function (value) {\n        return typeof value === theType || _isPolyfillType(value, theType);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createObjIs(theName) {\n    var theType = \"[object \" + theName + \"]\";\n    return function (value) {\n        return !!(value && objToString(value) === theType);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objToString(value) {\n    return ObjProto[TO_STRING].call(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTypeof(value, theType) {\n    return typeof value === theType;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isUndefined(value) {\n    return typeof value === UNDEFINED || value === UNDEFINED;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictUndefined(arg) {\n    return arg === UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNullOrUndefined(value) {\n    return value === NULL_VALUE || isUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictNullOrUndefined(value) {\n    return value === NULL_VALUE || value === UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isDefined(arg) {\n    return !!arg || arg !== UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitive(value) {\n    return value === NULL_VALUE || isPrimitiveType(typeof value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitiveType(theType) {\n    !_primitiveTypes && (_primitiveTypes = [\"string\", \"number\", \"boolean\", UNDEFINED, \"symbol\", \"bigint\"]);\n    return !!(theType !== OBJECT && _primitiveTypes.indexOf(theType) !== -1);\n}\nvar isString = ( /*#__PURE__*/_createIs(\"string\"));\nvar isFunction = ( /*#__PURE__*/_createIs(FUNCTION));\nvar isAsyncFunction = ( /*#__PURE__*/_createObjIs(\"AsyncFunction\"));\nvar isGenerator = ( /*#__PURE__*/_createObjIs(\"GeneratorFunction\"));\nvar isAsyncGenerator = ( /*#__PURE__*/_createObjIs(\"AsyncGeneratorFunction\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isObject(value) {\n    if (!value && isNullOrUndefined(value)) {\n        return false;\n    }\n    return !!value && typeof value === OBJECT;\n}\nvar isArray = ( /* #__PURE__*/_pureRef(ArrCls, \"isArray\"));\nvar isDate = ( /*#__PURE__*/_createObjIs(\"Date\"));\nvar isNumber = ( /*#__PURE__*/_createIs(\"number\"));\nvar isBoolean = ( /*#__PURE__*/_createIs(\"boolean\"));\nvar isRegExp = ( /*#__PURE__*/_createObjIs(\"RegExp\"));\nvar isFile = ( /*#__PURE__*/_createObjIs(\"File\"));\nvar isFormData = ( /*#__PURE__*/_createObjIs(\"FormData\"));\nvar isBlob = ( /*#__PURE__*/_createObjIs(\"Blob\"));\nvar isArrayBuffer = ( /*#__PURE__*/_createObjIs(\"ArrayBuffer\"));\nvar isError = ( /*#__PURE__*/_createObjIs(\"Error\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromiseLike(value) {\n    return !!(value && value.then && isFunction(value.then));\n}\nvar isThenable = isPromiseLike;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromise(value) {\n    return !!(value && value.then && value.catch && isFunction(value.then) && isFunction(value.catch));\n}\nvar isMap = ( /*#__PURE__*/_createObjIs(\"Map\"));\nvar isWeakMap = ( /*#__PURE__*/_createObjIs(\"WeakMap\"));\nvar isSet = ( /*#__PURE__*/_createObjIs(\"Set\"));\nvar isWeakSet = ( /*#__PURE__*/_createObjIs(\"WeakSet\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isMapLike(value) {\n    return !!(value &&\n        isFunction(value.get) &&\n        isFunction(value.set) &&\n        isFunction(value.has) &&\n        isFunction(value.delete) &&\n        isNumber(value.size));\n}\nfunction isSetLike(value) {\n    return !!(value &&\n        isFunction(value.add) &&\n        isFunction(value.has) &&\n        isFunction(value.delete) &&\n        isNumber(value.size));\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNotTruthy(value) {\n    return !value || !isTruthy(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTruthy(value) {\n    return !(!value || safeGet(function () { return !(value && (0 + value)); }, !value));\n}\nvar isBigInt = ( /*#__PURE__*/_createIsWithPoly(\"bigint\"));\n\nfunction _returnNothing() {\n    return;\n}\nfunction _returnEmptyArray() {\n    return [];\n}\nfunction _returnFalse() {\n    return false;\n}\n\nvar asString = ( /*#__PURE__*/_pureAssign(StrCls));\n\nvar ERROR_TYPE = \"[object Error]\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction dumpObj(object, format) {\n    var propertyValueDump = EMPTY;\n    var objType = ObjProto[TO_STRING][CALL](object);\n    if (objType === ERROR_TYPE) {\n        object = { stack: asString(object.stack), message: asString(object.message), name: asString(object.name) };\n    }\n    try {\n        propertyValueDump = JSON.stringify(object, NULL_VALUE, format ? ((typeof format === \"number\") ? format : 4) : UNDEF_VALUE);\n        propertyValueDump = (propertyValueDump ? propertyValueDump.replace(/\"(\\w+)\"\\s*:\\s{0,1}/g, \"$1: \") : NULL_VALUE) || asString(object);\n    }\n    catch (e) {\n        propertyValueDump = \" - \" + dumpObj(e, format);\n    }\n    return objType + \": \" + propertyValueDump;\n}\n\nfunction throwError(message) {\n    throw new Error(message);\n}\nfunction throwTypeError(message) {\n    throw new TypeError(message);\n}\nfunction throwRangeError(message) {\n    throw new RangeError(message);\n}\n\nfunction _throwIfNullOrUndefined(obj) {\n    if (isStrictNullOrUndefined(obj)) {\n        throwTypeError(\"Cannot convert undefined or null to object\");\n    }\n}\nfunction _throwIfNotString(value) {\n    if (!isString(value)) {\n        throwTypeError(\"'\" + dumpObj(value) + \"' is not a string\");\n    }\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction objHasOwnProperty(obj, prop) {\n    return !!obj && ObjProto.hasOwnProperty[CALL](obj, prop);\n}\n\nvar _objGetOwnPropertyDescriptor$2 = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar objHasOwn = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"hasOwn\")), polyObjHasOwn));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjHasOwn(obj, prop) {\n    _throwIfNullOrUndefined(obj);\n    return objHasOwnProperty(obj, prop) || !!_objGetOwnPropertyDescriptor$2(obj, prop);\n}\n\nfunction objForEachKey(theObject, callbackfn, thisArg) {\n    if (theObject && (isObject(theObject) || isFunction(theObject))) {\n        for (var prop in theObject) {\n            if (objHasOwn(theObject, prop)) {\n                if (callbackfn[CALL](thisArg || theObject, prop, theObject[prop]) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction arrForEach(theArray, callbackfn, thisArg) {\n    if (theArray) {\n        var len = theArray[LENGTH] >>> 0;\n        for (var idx = 0; idx < len; idx++) {\n            if (idx in theArray) {\n                if (callbackfn[CALL](thisArg || theArray, theArray[idx], idx, theArray) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nvar _unwrapFunction = ( _unwrapFunctionWithPoly);\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapFunctionWithPoly(funcName, clsProto, polyFunc) {\n    var clsFn = clsProto ? clsProto[funcName] : NULL_VALUE;\n    return function (thisArg) {\n        var theFunc = (thisArg ? thisArg[funcName] : NULL_VALUE) || clsFn;\n        if (theFunc || polyFunc) {\n            var theArgs = arguments;\n            return (theFunc || polyFunc).apply(thisArg, theFunc ? ArrSlice[CALL](theArgs, 1) : theArgs);\n        }\n        throwTypeError(\"\\\"\" + asString(funcName) + \"\\\" not defined for \" + dumpObj(thisArg));\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapProp(propName) {\n    return function (thisArg) {\n        return thisArg[propName];\n    };\n}\n\nfunction _objPropertyIsEnum(obj, propKey) {\n    var desc;\n    var fn = ObjClass.getOwnPropertyDescriptor;\n    if (!isStrictNullOrUndefined(obj) && fn) {\n        desc = safe(fn, [obj, propKey]).v || NULL_VALUE;\n    }\n    if (!desc) {\n        desc = safe(function () {\n            for (var key in obj) {\n                if (key === propKey) {\n                    return { enumerable: true };\n                }\n            }\n        }).v;\n    }\n    return (desc && desc.enumerable) || false;\n}\nvar objPropertyIsEnumerable = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"propertyIsEnumerable\", NULL_VALUE, _objPropertyIsEnum));\n\nvar _objGetOwnPropertyDescriptor$1 = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar _objGetOwnPropertySymbols = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_SYMBOLS)), _returnEmptyArray));\nvar propMap = {\n    e: \"enumerable\",\n    c: \"configurable\",\n    v: \"value\",\n    w: \"writable\",\n    g: \"get\",\n    s: \"set\"\n};\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createProp(value) {\n    var prop = {};\n    prop[propMap[\"c\"]] = true;\n    prop[propMap[\"e\"]] = true;\n    if (value.l) {\n        prop.get = function () { return value.l.v; };\n        var desc = _objGetOwnPropertyDescriptor$1(value.l, \"v\");\n        if (desc && desc.set) {\n            prop.set = function (newValue) {\n                value.l.v = newValue;\n            };\n        }\n    }\n    objForEachKey(value, function (key, value) {\n        prop[propMap[key]] = isStrictUndefined(value) ? prop[propMap[key]] : value;\n    });\n    return prop;\n}\nvar objDefineProp = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperty\"));\nvar objDefineProperties = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperties\"));\nfunction objDefineGet(target, key, value, configurable, enumerable) {\n    var _a;\n    return objDefineProp(target, key, _createProp((_a = {\n            e: enumerable,\n            c: configurable\n        },\n        _a[isFunction(value) ? \"g\" : \"v\"] = value,\n        _a)));\n}\nfunction objDefineAccessors(target, prop, getProp, setProp, configurable, enumerable) {\n    var desc = {\n        e: enumerable,\n        c: configurable\n    };\n    if (getProp) {\n        desc.g = getProp;\n    }\n    if (setProp) {\n        desc.s = setProp;\n    }\n    return objDefineProp(target, prop, _createProp(desc));\n}\nfunction objDefine(target, key, propDesc) {\n    return objDefineProp(target, key, _createProp(propDesc));\n}\nfunction objDefineProps(target, propDescMap) {\n    var props = {};\n    objForEachKey(propDescMap, function (key, value) {\n        props[key] = _createProp(value);\n    });\n    arrForEach(_objGetOwnPropertySymbols(propDescMap), function (sym) {\n        if (objPropertyIsEnumerable(propDescMap, sym)) {\n            props[sym] = _createProp(propDescMap[sym]);\n        }\n    });\n    return objDefineProperties(target, props);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createKeyValueMap(values, keyType, valueType, completeFn, writable) {\n    var theMap = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(theMap, key, keyType ? value : key);\n        _assignMapValue(theMap, value, valueType ? value : key);\n    });\n    return completeFn ? completeFn(theMap) : theMap;\n}\nfunction _assignMapValue(theMap, key, value, writable) {\n    objDefineProp(theMap, key, {\n        value: value,\n        enumerable: true,\n        writable: false\n    });\n}\n\nfunction _objIterateEntries(obj, mapper) {\n    var result = [];\n    objForEachKey(obj, function (key, val) {\n        result.push(mapper(key, val));\n    });\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjKeys(obj) {\n    _throwIfNullOrUndefined(obj);\n    if (!isObject(obj)) {\n        throwTypeError(\"non-object \" + dumpObj(obj));\n    }\n    return _objIterateEntries(obj, function (k, _) { return k; });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjEntries(value) {\n    return _objIterateEntries(value, function (k, v) { return [k, v]; });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjValues(value) {\n    return _objIterateEntries(value, function (_, v) { return v; });\n}\n\nfunction polyObjIs(value1, value2) {\n    if (value1 !== value1) {\n        return value2 !== value2;\n    }\n    if (value1 === 0 && value2 === 0) {\n        return 1 / value1 === 1 / value2;\n    }\n    return value1 === value2;\n}\n\nvar objIsFrozen = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isFrozen\")), _returnFalse));\nvar objIsSealed = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isSealed\")), _returnFalse));\n\nvar _objFreeze = ( /*#__PURE__*/_pureRef(ObjClass, \"freeze\"));\nfunction _doNothing(value) {\n    return value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getProto(value) {\n    _throwIfNullOrUndefined(value);\n    return value[__PROTO__] || NULL_VALUE;\n}\nvar objAssign = ( /*#__PURE__*/_pureRef(ObjClass, \"assign\"));\nvar objKeys = ( /*#__PURE__*/_pureRef(ObjClass, \"keys\"));\nfunction _deepFreeze(val, visited) {\n    if ((isArray(val) || isObject(val) || isFunction(val)) && !objIsFrozen(val)) {\n        for (var lp = 0; lp < visited.length; lp++) {\n            if (visited[lp] === val) {\n                return val;\n            }\n        }\n        visited.push(val);\n        objForEachKey(val, function (_key, propValue) {\n            _deepFreeze(propValue, visited);\n        });\n        objFreeze(val);\n    }\n    return val;\n}\nfunction objDeepFreeze(value) {\n    return _objFreeze ? _deepFreeze(value, []) : value;\n}\nvar objFreeze = ( /*#__PURE__*/_pureAssign(_objFreeze, _doNothing));\nvar objSeal = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"seal\")), _doNothing));\nvar objGetPrototypeOf = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"getPrototypeOf\")), _getProto));\nvar objEntries = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"entries\")), polyObjEntries));\nvar objValues = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"values\")), polyObjValues));\nvar objIs = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"is\")), polyObjIs));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnum(values) {\n    return _createKeyValueMap(values, 1 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumKeyMap(values) {\n    return _createKeyValueMap(values, 0 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumValueMap(values) {\n    return _createKeyValueMap(values, 1 , 1 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createSimpleMap(values) {\n    var mapClass = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(mapClass, key, value[1]);\n        _assignMapValue(mapClass, value[0], value[1]);\n    });\n    return objFreeze(mapClass);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createTypeMap(values) {\n    return createSimpleMap(values);\n}\n\nvar _wellKnownSymbolMap = ( /*#__PURE__*/createEnumKeyMap({\n    asyncIterator: 0 ,\n    hasInstance: 1 ,\n    isConcatSpreadable: 2 ,\n    iterator: 3 ,\n    match: 4 ,\n    matchAll: 5 ,\n    replace: 6 ,\n    search: 7 ,\n    species: 8 ,\n    split: 9 ,\n    toPrimitive: 10 ,\n    toStringTag: 11 ,\n    unscopables: 12\n}));\n\nvar GLOBAL_CONFIG_KEY = \"__tsUtils$gblCfg\";\nvar _globalCfg;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalValue() {\n    var result;\n    if (typeof globalThis !== UNDEFINED) {\n        result = globalThis;\n    }\n    if (!result && typeof self !== UNDEFINED) {\n        result = self;\n    }\n    if (!result && typeof window !== UNDEFINED) {\n        result = window;\n    }\n    if (!result && typeof global !== UNDEFINED) {\n        result = global;\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalConfig() {\n    if (!_globalCfg) {\n        var gbl = safe(_getGlobalValue).v || {};\n        _globalCfg = gbl[GLOBAL_CONFIG_KEY] = gbl[GLOBAL_CONFIG_KEY] || {};\n    }\n    return _globalCfg;\n}\n\nvar mathMin = ( /*#__PURE__*/_pureRef(MathCls, \"min\"));\nvar mathMax = ( /*#__PURE__*/_pureRef(MathCls, \"max\"));\n\nvar strSlice = ( /*#__PURE__*/_unwrapFunction(\"slice\", StrProto));\n\nvar strSubstring = ( /*#__PURE__*/_unwrapFunction(\"substring\", StrProto));\nvar strSubstr = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"substr\", StrProto, polyStrSubstr));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSubstr(value, start, length) {\n    _throwIfNullOrUndefined(value);\n    if (length < 0) {\n        return EMPTY;\n    }\n    start = start || 0;\n    if (start < 0) {\n        start = mathMax(start + value[LENGTH], 0);\n    }\n    if (isUndefined(length)) {\n        return strSlice(value, start);\n    }\n    return strSlice(value, start, start + length);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLeft(value, count) {\n    return strSubstring(value, 0, count);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strRight(value, count) {\n    return count <= 0 ? EMPTY : (value[LENGTH] > count ? strSlice(value, -count) : value);\n}\n\nfunction _tagAsPolyfill(target, polyfillTypeName) {\n    if (target) {\n        safe(function () {\n            target[POLYFILL_TAG] = true;\n            target[POLYFILL_TYPE_NAME] = polyfillTypeName;\n        });\n        safe(objDefine, [target, POLYFILL_TAG, {\n                v: true,\n                w: false,\n                e: false\n            }]);\n        safe(objDefine, [target, POLYFILL_TYPE_NAME, {\n                v: polyfillTypeName,\n                w: false,\n                e: false\n            }]);\n    }\n    return target;\n}\n\nvar objCreate = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"create\")), polyObjCreate));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjCreate(obj, properties) {\n    var newObj = null;\n    function tempFunc() { }\n    if (!isStrictNullOrUndefined(obj)) {\n        var type = typeof obj;\n        if (type !== OBJECT && type !== FUNCTION) {\n            throwTypeError(\"Prototype must be an Object or function: \" + dumpObj(obj));\n        }\n        tempFunc[PROTOTYPE] = obj;\n        safe(function () {\n            tempFunc[__PROTO__] = obj;\n        });\n        newObj = new tempFunc();\n    }\n    else {\n        newObj = {};\n    }\n    if (properties) {\n        safe(objDefineProperties, [newObj, properties]);\n    }\n    return newObj;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction utcNow() {\n    return (Date.now || polyUtcNow)();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyUtcNow() {\n    return new Date().getTime();\n}\n\nfunction fnApply(fn, thisArg, argArray) {\n    return fn.apply(thisArg, argArray);\n}\nfunction fnCall(fn, thisArg) {\n    return fn.apply(thisArg, ArrSlice[CALL](arguments, 2));\n}\nfunction fnBind(fn, thisArg) {\n    return fn.bind.apply(fn, ArrSlice[CALL](arguments, 1));\n}\n\nvar _globalLazyTestHooks;\nfunction _initTestHooks() {\n    _globalLazyTestHooks = _getGlobalConfig();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getLazy(cb, argArray) {\n    var lazyValue = {};\n    !_globalLazyTestHooks && _initTestHooks();\n    lazyValue.b = _globalLazyTestHooks.lzy;\n    objDefineProp(lazyValue, \"v\", {\n        configurable: true,\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            if (!_globalLazyTestHooks.lzy) {\n                objDefineProp(lazyValue, \"v\", {\n                    value: result\n                });\n            }\n            lazyValue.b = _globalLazyTestHooks.lzy;\n            return result;\n        }\n    });\n    return lazyValue;\n}\nfunction setBypassLazyCache(newValue) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _globalLazyTestHooks.lzy = newValue;\n}\nfunction getWritableLazy(cb, argArray) {\n    var lazyValue = {};\n    !_globalLazyTestHooks && _initTestHooks();\n    lazyValue.b = _globalLazyTestHooks.lzy;\n    var _setValue = function (newValue) {\n        objDefineProp(lazyValue, \"v\", {\n            value: newValue,\n            writable: true\n        });\n        if (lazyValue.b) {\n            delete lazyValue.b;\n        }\n    };\n    objDefineProp(lazyValue, \"v\", {\n        configurable: true,\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            if (!_globalLazyTestHooks.lzy) {\n                _setValue(result);\n            }\n            if (_globalLazyTestHooks.lzy && lazyValue.b !== _globalLazyTestHooks.lzy) {\n                lazyValue.b = _globalLazyTestHooks.lzy;\n            }\n            return result;\n        },\n        set: _setValue\n    });\n    return lazyValue;\n}\n\nvar mathRandom = ( /*#__PURE__*/_pureRef(MathCls, \"random\"));\n\nvar _uniqueInstanceId = ( /*#__PURE__*/getLazy(function () {\n    var value = (utcNow().toString(36).slice(2));\n    while (value.length < 16) {\n        value += mathRandom().toString(36).slice(2);\n    }\n    value = value.substring(0, 16);\n    return value;\n}));\n\nvar UNIQUE_REGISTRY_ID = \"_urid\";\nvar POLY_SYM = \"$nw21sym\";\nvar _polySymbols;\nvar _polyId = 0;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _globalSymbolRegistry() {\n    if (!_polySymbols) {\n        var gblCfg = _getGlobalConfig();\n        _polySymbols = gblCfg.gblSym = gblCfg.gblSym || { k: {}, s: {} };\n    }\n    return _polySymbols;\n}\nvar _wellKnownSymbolCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyNewSymbol(description) {\n    var uniqueId = \"_\" + _polyId++ + \"_\" + _uniqueInstanceId.v;\n    var symString = SYMBOL + \"(\" + description + \")\";\n    function _setProp(name, value) {\n        objDefine(theSymbol, name, {\n            v: value,\n            e: false,\n            w: false\n        });\n    }\n    var theSymbol = objCreate(null);\n    _setProp(\"description\", asString(description));\n    _setProp(TO_STRING, function () { return symString + POLY_SYM + uniqueId; });\n    _setProp(\"valueOf\", function () { return theSymbol; });\n    _setProp(\"v\", symString);\n    _setProp(\"_uid\", uniqueId);\n    return _tagAsPolyfill(theSymbol, \"symbol\");\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolFor(key) {\n    var registry = _globalSymbolRegistry();\n    if (!objHasOwn(registry.k, key)) {\n        var newSymbol_1 = polyNewSymbol(key);\n        var regId_1 = objKeys(registry.s).length;\n        newSymbol_1[UNIQUE_REGISTRY_ID] = function () { return regId_1 + \"_\" + newSymbol_1[TO_STRING](); };\n        registry.k[key] = newSymbol_1;\n        registry.s[newSymbol_1[UNIQUE_REGISTRY_ID]()] = asString(key);\n    }\n    return registry.k[key];\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolKeyFor(sym) {\n    if (!sym || !sym[TO_STRING] || strSubstring(sym[TO_STRING](), 0, 6) != SYMBOL) {\n        throwTypeError(sym + \" is not a symbol\");\n    }\n    var regId = _isPolyfill(sym) && sym[UNIQUE_REGISTRY_ID] && sym[UNIQUE_REGISTRY_ID]();\n    return regId ? _globalSymbolRegistry().s[regId] : undefined;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyGetKnownSymbol(name) {\n    !_wellKnownSymbolCache && (_wellKnownSymbolCache = {});\n    var result;\n    var knownName = _wellKnownSymbolMap[name];\n    if (knownName) {\n        result = _wellKnownSymbolCache[knownName] = _wellKnownSymbolCache[knownName] || polyNewSymbol(SYMBOL + \".\" + knownName);\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCachedValue(value) {\n    return objDefineProp({\n        toJSON: function () { return value; }\n    }, \"v\", { value: value });\n}\nvar createDeferredCachedValue = getDeferred;\n/*#__NO_SIDE_EFFECTS__*/\nfunction getDeferred(cb, argArray) {\n    var theValue = {\n        toJSON: function () { return theValue.v; }\n    };\n    return objDefineProp(theValue, \"v\", {\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            cb = NULL_VALUE;\n            objDefineProp(theValue, \"v\", { value: result });\n            return result;\n        },\n        configurable: true\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getWritableDeferred(cb, argArray) {\n    var theValue = {\n        toJSON: function () { return theValue.v; }\n    };\n    var _setValue = function (newValue) {\n        objDefineProp(theValue, \"v\", {\n            value: newValue,\n            writable: true\n        });\n    };\n    return objDefineProp(theValue, \"v\", {\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            _setValue(result);\n            cb = NULL_VALUE;\n            return result;\n        },\n        set: _setValue,\n        configurable: true\n    });\n}\n\nvar WINDOW = \"window\";\nvar _cachedGlobal;\nfunction _getGlobalInstFn(getFn, theArgs) {\n    var cachedValue;\n    return function () {\n        !_globalLazyTestHooks && _initTestHooks();\n        if (!cachedValue || _globalLazyTestHooks.lzy) {\n            cachedValue = createCachedValue(safe(getFn, theArgs).v);\n        }\n        return cachedValue.v;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction lazySafeGetInst(name) {\n    return getLazy(function () { return safe((getInst), [name]).v || UNDEF_VALUE; });\n}\nfunction getGlobal(useCached) {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_cachedGlobal || useCached === false || _globalLazyTestHooks.lzy) {\n        _cachedGlobal = createCachedValue(safe(_getGlobalValue).v || NULL_VALUE);\n    }\n    return _cachedGlobal.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getInst(name, useCached) {\n    var gbl;\n    if (!_cachedGlobal || useCached === false) {\n        gbl = getGlobal(useCached);\n    }\n    else {\n        gbl = _cachedGlobal.v;\n    }\n    if (gbl && gbl[name]) {\n        return gbl[name];\n    }\n    if (name === WINDOW) {\n        try {\n            return window;\n        }\n        catch (e) {\n        }\n    }\n    return NULL_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasDocument() {\n    return !!( /*#__PURE__*/getDocument());\n}\nvar getDocument = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"document\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasWindow() {\n    return !!( /*#__PURE__*/getWindow());\n}\nvar getWindow = ( /*#__PURE__*/_getGlobalInstFn(getInst, [WINDOW]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasNavigator() {\n    return !!( /*#__PURE__*/getNavigator());\n}\nvar getNavigator = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"navigator\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasHistory() {\n    return !!( /*#__PURE__*/getHistory());\n}\nvar getHistory = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"history\"]));\nvar isNode = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return (process && (process.versions || {}).node); }).v);\n}));\nvar isWebWorker = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return self && self instanceof WorkerGlobalScope; }).v);\n}));\n\nvar _symbol;\nvar _symbolFor;\nvar _symbolKeyFor;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _initSymbol() {\n    _symbol = ( /*#__PURE__*/createCachedValue(safe((getInst), [SYMBOL]).v));\n    return _symbol;\n}\nfunction _getSymbolKey(key) {\n    var gblSym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return (gblSym.v ? gblSym.v[key] : UNDEF_VALUE);\n}\nvar isSymbol = ( /*#__PURE__*/_createIsWithPoly(\"symbol\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasSymbol() {\n    return !!( /*#__PURE__*/getSymbol());\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getSymbol() {\n    !_globalLazyTestHooks && _initTestHooks();\n    return ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol()).v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getKnownSymbol(name, noPoly) {\n    var knownName = _wellKnownSymbolMap[name];\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v[knownName || name] : (!noPoly ? polyGetKnownSymbol(name) : UNDEF_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction newSymbol(description, noPoly) {\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v(description) : (!noPoly ? polyNewSymbol(description) : NULL_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolFor(key) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolFor = ((!_globalLazyTestHooks.lzy ? _symbolFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"for\"]).v)));\n    return (_symbolFor.v || polySymbolFor)(key);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolKeyFor(sym) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolKeyFor = ((!_globalLazyTestHooks.lzy ? _symbolKeyFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"keyFor\"]).v)));\n    return (_symbolKeyFor.v || polySymbolKeyFor)(sym);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterator(value) {\n    return !!value && isFunction(value.next);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterable(value) {\n    return !isStrictNullOrUndefined(value) && isFunction(value[getKnownSymbol(3 )]);\n}\n\nvar _iterSymbol$1;\nfunction iterForOf(iter, callbackfn, thisArg) {\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterSymbol$1 && (_iterSymbol$1 = createCachedValue(getKnownSymbol(3 )));\n            iter = iter[_iterSymbol$1.v] ? iter[_iterSymbol$1.v]() : NULL_VALUE;\n        }\n        if (isIterator(iter)) {\n            var err = UNDEF_VALUE;\n            var iterResult = UNDEF_VALUE;\n            try {\n                var count = 0;\n                while (!(iterResult = iter.next()).done) {\n                    if (callbackfn[CALL](thisArg || iter, iterResult.value, count, iter) === -1) {\n                        break;\n                    }\n                    count++;\n                }\n            }\n            catch (failed) {\n                err = { e: failed };\n                if (iter.throw) {\n                    iterResult = NULL_VALUE;\n                    iter.throw(err);\n                }\n            }\n            finally {\n                try {\n                    if (iterResult && !iterResult.done) {\n                        iter.return && iter.return(iterResult);\n                    }\n                }\n                finally {\n                    if (err) {\n                        // eslint-disable-next-line no-unsafe-finally\n                        throw err.e;\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction arrAppend(target, elms) {\n    if (!isUndefined(elms) && target) {\n        if (isArray(elms)) {\n            fnApply(target.push, target, elms);\n        }\n        else if (isIterator(elms) || isIterable(elms)) {\n            iterForOf(elms, function (elm) {\n                target.push(elm);\n            });\n        }\n        else {\n            target.push(elms);\n        }\n    }\n    return target;\n}\n\nvar arrEvery = /*#__PURE__*/ _unwrapFunction(\"every\", ArrProto);\nvar arrFilter = /*#__PURE__*/ _unwrapFunction(\"filter\", ArrProto);\n\nvar arrIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", ArrProto));\nvar arrLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", ArrProto));\n\nvar arrMap = ( /*#__PURE__*/_unwrapFunction(\"map\", ArrProto));\n\nfunction arrSlice(theArray, start, end) {\n    return ((theArray ? theArray[\"slice\"] : NULL_VALUE) || ArrSlice).apply(theArray, ArrSlice[CALL](arguments, 1));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyIsArray(value) {\n    if (isNullOrUndefined(value)) {\n        return false;\n    }\n    return objToString(value) === \"[object Array]\";\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyArrIncludes(theArray, searchElement, fromIndex) {\n    return arrIndexOf(theArray, searchElement, fromIndex) !== -1;\n}\nfunction polyArrFind(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    arrForEach(theArray, function (value, index) {\n        if (callbackFn[CALL](thisArg | theArray, value, index, theArray)) {\n            result = index;\n            return -1;\n        }\n    });\n    return result;\n}\nfunction polyArrFindLast(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindLastIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindLastIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    var len = theArray[LENGTH] >>> 0;\n    for (var idx = len - 1; idx >= 0; idx--) {\n        if (idx in theArray && callbackFn[CALL](thisArg | theArray, theArray[idx], idx, theArray)) {\n            result = idx;\n            break;\n        }\n    }\n    return result;\n}\nfunction polyArrFrom(theValue, mapFn, thisArg) {\n    if (isArray(theValue)) {\n        var result_1 = arrSlice(theValue);\n        return mapFn ? arrMap(result_1, mapFn, thisArg) : result_1;\n    }\n    var result = [];\n    iterForOf(theValue, function (value, cnt) {\n        return result.push(mapFn ? mapFn[CALL](thisArg, value, cnt) : value);\n    });\n    return result;\n}\n\nvar arrFind = /*#__PURE__*/ _unwrapFunctionWithPoly(\"find\", ArrProto, polyArrFind);\nvar arrFindIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findIndex\", ArrProto, polyArrFindIndex);\nvar arrFindLast = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLast\", ArrProto, polyArrFindLast);\nvar arrFindLastIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLastIndex\", ArrProto, polyArrFindLastIndex);\n\nvar arrFrom = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ArrCls, \"from\")), polyArrFrom));\n\nvar arrIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", ArrProto, polyArrIncludes));\nvar arrContains = arrIncludes;\n\nvar arrReduce = ( /*#__PURE__*/_unwrapFunction(\"reduce\", ArrProto));\n\nvar arrSome = ( /*#__PURE__*/_unwrapFunction(\"some\", ArrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFnDeferredProxy(hostFn, funcName) {\n    return function () {\n        var theArgs = ArrSlice[CALL](arguments);\n        var theHost = hostFn();\n        return fnApply(theHost[funcName], theHost, theArgs);\n    };\n}\nfunction createProxyFuncs(target, host, funcDefs) {\n    if (target && host && isArray(funcDefs)) {\n        var isDeferred_1 = isFunction(host);\n        arrForEach(funcDefs, function (funcDef) {\n            var targetName = (funcDef.as || funcDef.n);\n            if (funcDef.rp === false && target[targetName]) {\n                return;\n            }\n            target[targetName] = isDeferred_1 ?\n                createFnDeferredProxy(host, funcDef.n) :\n                fnBind(host[funcDef.n], host);\n        });\n    }\n    return target;\n}\n\nvar _iterSymbol;\n/*#__NO_SIDE_EFFECTS__*/\nfunction readArgs(theArgs, start, end) {\n    if (!objHasOwn(theArgs, LENGTH)) {\n        !_iterSymbol && (_iterSymbol = createCachedValue(hasSymbol() && getKnownSymbol(3 )));\n        var iterFn = void 0;\n        if (_iterSymbol.v) {\n            iterFn = theArgs[_iterSymbol.v];\n        }\n        if (iterFn) {\n            var values_1 = [];\n            var from_1 = (start === UNDEF_VALUE || start < 0) ? 0 : start;\n            var to_1 = end < 0 || start < 0 ? UNDEF_VALUE : end;\n            iterForOf(iterFn[CALL](theArgs), function (value, cnt) {\n                if (to_1 !== UNDEF_VALUE && cnt >= to_1) {\n                    return -1;\n                }\n                if (cnt >= from_1) {\n                    values_1.push(value);\n                }\n            });\n            if ((start === UNDEF_VALUE || start >= 0) && (end === UNDEF_VALUE || end >= 0)) {\n                return values_1;\n            }\n            theArgs = values_1;\n        }\n    }\n    return arrSlice(theArgs, start, end);\n}\n\nvar _isProtoArray;\nvar objSetPrototypeOf = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"setPrototypeOf\")), _polyObjSetPrototypeOf));\nfunction _polyObjSetPrototypeOf(obj, proto) {\n    var _a;\n    !_isProtoArray && (_isProtoArray = createCachedValue((_a = {}, _a[__PROTO__] = [], _a) instanceof Array));\n    _isProtoArray.v ? obj[__PROTO__] = proto : objForEachKey(proto, function (key, value) { return obj[key] = value; });\n    return obj;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createCustomError(name, d, b) {\n    safe(objDefine, [d, NAME, { v: name, c: true, e: false }]);\n    d = objSetPrototypeOf(d, b);\n    function __() {\n        this[CONSTRUCTOR] = d;\n        safe(objDefine, [this, NAME, { v: name, c: true, e: false }]);\n    }\n    d[PROTOTYPE] = b === NULL_VALUE ? objCreate(b) : (__[PROTOTYPE] = b[PROTOTYPE], new __());\n    return d;\n}\nfunction _setName(baseClass, name) {\n    name && (baseClass[NAME] = name);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCustomError(name, constructCb, errorBase) {\n    var theBaseClass = errorBase || Error;\n    var orgName = theBaseClass[PROTOTYPE][NAME];\n    var captureFn = Error.captureStackTrace;\n    return _createCustomError(name, function () {\n        var _this = this;\n        var theArgs = arguments;\n        try {\n            safe(_setName, [theBaseClass, name]);\n            var _self = fnApply(theBaseClass, _this, ArrSlice[CALL](theArgs)) || _this;\n            if (_self !== _this) {\n                var orgProto = objGetPrototypeOf(_this);\n                if (orgProto !== objGetPrototypeOf(_self)) {\n                    objSetPrototypeOf(_self, orgProto);\n                }\n            }\n            captureFn && captureFn(_self, _this[CONSTRUCTOR]);\n            constructCb && constructCb(_self, theArgs);\n            return _self;\n        }\n        finally {\n            safe(_setName, [theBaseClass, orgName]);\n        }\n    }, theBaseClass);\n}\nvar _unsupportedError;\nfunction throwUnsupported(message) {\n    if (!_unsupportedError) {\n        _unsupportedError = createCustomError(\"UnsupportedError\");\n    }\n    throw new _unsupportedError(message);\n}\n\nfunction isElement(value) {\n    return !!value && value.nodeType === 1 &&\n        !!value.nodeName &&\n        !!(typeof Element !== \"undefined\" && value instanceof Element);\n}\nfunction isElementLike(value) {\n    return !!value && value.nodeType === 1 && !!value.nodeName;\n}\n\nfunction isEmpty(value) {\n    var result = isStrictNullOrUndefined(value);\n    if (!result) {\n        if (isString(value) || isArray(value)) {\n            result = (value.length === 0);\n        }\n        else if (isMapLike(value) || isSetLike(value)) {\n            result = (value.size === 0);\n        }\n        else if (isObject(value)) {\n            result = objKeys(value).length === 0;\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTrimFn(exp) {\n    return function _doTrim(value) {\n        _throwIfNullOrUndefined(value);\n        if (value && value.replace) {\n            value = value.replace(exp, EMPTY);\n        }\n        return value;\n    };\n}\nvar polyStrTrim = ( /*#__PURE__*/_createTrimFn(/^\\s+|(?=\\s)\\s+$/g));\nvar polyStrTrimStart = ( /*#__PURE__*/_createTrimFn(/^\\s+/g));\nvar polyStrTrimEnd = ( /*#__PURE__*/_createTrimFn(/(?=\\s)\\s+$/g));\n\nvar strTrim = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trim\", StrProto, polyStrTrim));\nvar strTrimStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimStart\", StrProto, polyStrTrimStart));\nvar strTrimLeft = ( /*#__PURE__*/_pureAssign(strTrimStart));\nvar strTrimEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimEnd\", StrProto, polyStrTrimEnd));\nvar strTrimRight = ( /*#__PURE__*/_pureAssign(strTrimEnd));\n\nvar strUpper = ( /*#__PURE__*/_unwrapFunction(\"toUpperCase\", StrProto));\nvar strLower = ( /*#__PURE__*/_unwrapFunction(\"toLowerCase\", StrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _convertCase(value, newPrefix, upperWord) {\n    return strTrim(asString(value)).replace(/((_|\\W)+(\\w){0,1}|([a-z])([A-Z]))/g, function (_match, _g1, _g2, wordStart, upperPrefix, upperLetter) {\n        var convertMatch = wordStart || upperLetter || EMPTY;\n        if (upperWord) {\n            convertMatch = strUpper(convertMatch);\n        }\n        return (upperPrefix || EMPTY) + newPrefix + convertMatch;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLetterCase(value) {\n    return asString(value).replace(/(_|\\b)\\w/g, strUpper);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strCamelCase(value, upperFirst) {\n    var result = _convertCase(value, \"\", true);\n    return result.replace(/^\\w/, upperFirst ? strUpper : strLower);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strKebabCase(value, scream) {\n    var result = _convertCase(value, \"-\");\n    return (scream ? strUpper : strLower)(result);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strSnakeCase(value, scream) {\n    var result = _convertCase(value, \"_\");\n    return (scream ? strUpper : strLower)(result);\n}\n\nvar mathFloor = ( /*#__PURE__*/_pureRef(MathCls, \"floor\"));\nvar mathCeil = ( /*#__PURE__*/_pureRef(MathCls, \"ceil\"));\n\nvar mathTrunc = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(MathCls, \"trunc\")), polyMathTrunc));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyMathTrunc(value) {\n    var theValue = +value;\n    return (theValue > 0 ? mathFloor : mathCeil)(theValue);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction mathToInt(value, throwInfinity) {\n    var result = +value;\n    if (throwInfinity && (result === Infinity || result == Infinity)) {\n        throwRangeError(\"invalid value [\" + dumpObj(value) + \"]\");\n    }\n    return result !== result || result === 0 ? 0 : mathTrunc(result);\n}\n\nvar strRepeat = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"repeat\", StrProto, polyStrRepeat));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrRepeat(value, count) {\n    _throwIfNullOrUndefined(value);\n    count = mathToInt(count, true);\n    if (count < 0) {\n        throwRangeError(\"invalid count must be >= 0 && < Infinity\");\n    }\n    var pad = isString(value) ? value : asString(value);\n    var result = EMPTY;\n    for (; count > 0; (count >>>= 1) && (pad += pad)) {\n        if (count & 1) {\n            result += pad;\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _padValue(value, targetLength, padString) {\n    var result = EMPTY;\n    targetLength = mathToInt(targetLength, true);\n    targetLength >>= 0;\n    var len = value[LENGTH];\n    if (len < targetLength) {\n        result = isNullOrUndefined(padString) ? \" \" : asString(padString);\n        targetLength = targetLength - len;\n        if (targetLength > result[LENGTH]) {\n            result = strRepeat(result, mathCeil(targetLength / result[LENGTH]));\n        }\n        if (result[LENGTH] > targetLength) {\n            result = strSubstring(result, 0, targetLength);\n        }\n    }\n    return result;\n}\nvar strPadStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padStart\", StrProto, polyStrPadStart));\nvar strPadEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padEnd\", StrProto, polyStrPadEnd));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadStart(value, targetLength, padString) {\n    return _padValue(value, targetLength, padString) + value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadEnd(value, targetLength, padString) {\n    return value + _padValue(value, targetLength, padString);\n}\n\nvar DBL_QUOTE = \"\\\"\";\nvar INVALID_JS_NAME = /([^\\w\\d_$])/g;\nvar _htmlEntityCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction normalizeJsName(jsName, camelCase) {\n    var result = asString(jsName).replace(INVALID_JS_NAME, \"_\");\n    return !isUndefined(camelCase) ? strCamelCase(result, !camelCase) : result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsJson(value, format) {\n    var result;\n    if (isString(value)) {\n        result = DBL_QUOTE + value.replace(/[^\\w .,\\-!@#$%\\^&*\\(\\)_+={}\\[\\]:;|<>?]/g, function (match) {\n            if (match === DBL_QUOTE || match === \"\\\\\") {\n                return \"\\\\\" + match;\n            }\n            var hex = match.charCodeAt(0)[TO_STRING](16);\n            return \"\\\\u\" + strPadStart(strUpper(hex), 4, \"0\");\n        }) + DBL_QUOTE;\n    }\n    else {\n        try {\n            result = JSON.stringify(value, NULL_VALUE, format ? (isNumber(format) ? format : 4) : UNDEF_VALUE);\n        }\n        catch (e) {\n            result = DBL_QUOTE + dumpObj(e) + DBL_QUOTE;\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsHtml(value) {\n    !_htmlEntityCache && (_htmlEntityCache = {\n        \"&\": \"amp\",\n        \"<\": \"lt\",\n        \">\": \"gt\",\n        \"\\\"\": \"quot\",\n        \"'\": \"#39\"\n    });\n    return asString(value).replace(/[&<>\"']/g, function (match) { return \"&\" + _htmlEntityCache[match] + \";\"; });\n}\n\nvar _fnToString;\nvar _objCtrFnString;\nvar _gblWindow;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPlainObject(value) {\n    if (!value || typeof value !== OBJECT) {\n        return false;\n    }\n    if (!_gblWindow) {\n        _gblWindow = hasWindow() ? getWindow() : true;\n    }\n    var result = false;\n    if (value !== _gblWindow) {\n        if (!_objCtrFnString) {\n            _fnToString = Function[PROTOTYPE][TO_STRING];\n            _objCtrFnString = _fnToString[CALL](ObjClass);\n        }\n        try {\n            var proto = objGetPrototypeOf(value);\n            result = !proto;\n            if (!result) {\n                if (objHasOwnProperty(proto, CONSTRUCTOR)) {\n                    proto = proto[CONSTRUCTOR];\n                }\n                result = !!(proto && typeof proto === FUNCTION && _fnToString[CALL](proto) === _objCtrFnString);\n            }\n        }\n        catch (ex) {\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _defaultDeepCopyHandler(details) {\n    details.value && plainObjDeepCopyHandler(details);\n    return true;\n}\nvar defaultDeepCopyHandlers = [\n    arrayDeepCopyHandler,\n    plainObjDeepCopyHandler,\n    functionDeepCopyHandler,\n    dateDeepCopyHandler\n];\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getSetVisited(visitMap, source, newPath, cb) {\n    var theEntry;\n    arrForEach(visitMap, function (entry) {\n        if (entry.k === source) {\n            theEntry = entry;\n            return -1;\n        }\n    });\n    if (!theEntry) {\n        theEntry = { k: source, v: source };\n        visitMap.push(theEntry);\n        cb(theEntry);\n    }\n    return theEntry.v;\n}\nfunction _deepCopy(visitMap, value, ctx, key) {\n    var userHandler = ctx.handler;\n    var newPath = ctx.path ? (key ? ctx.path.concat(key) : ctx.path) : [];\n    var newCtx = {\n        handler: ctx.handler,\n        src: ctx.src,\n        path: newPath\n    };\n    var theType = typeof value;\n    var isPlain = false;\n    var isPrim = value === NULL_VALUE;\n    if (!isPrim) {\n        if (value && theType === OBJECT) {\n            isPlain = isPlainObject(value);\n        }\n        else {\n            isPrim = isPrimitiveType(theType);\n        }\n    }\n    var details = {\n        type: theType,\n        isPrim: isPrim,\n        isPlain: isPlain,\n        value: value,\n        result: value,\n        path: newPath,\n        origin: ctx.src,\n        copy: function (source, newKey) {\n            return _deepCopy(visitMap, source, newKey ? newCtx : ctx, newKey);\n        },\n        copyTo: function (target, source) {\n            return _copyProps(visitMap, target, source, newCtx);\n        }\n    };\n    if (!details.isPrim) {\n        return _getSetVisited(visitMap, value, newPath, function (newEntry) {\n            objDefine(details, \"result\", {\n                g: function () {\n                    return newEntry.v;\n                },\n                s: function (newValue) {\n                    newEntry.v = newValue;\n                }\n            });\n            var idx = 0;\n            var handler = userHandler;\n            while (!(handler || (idx < defaultDeepCopyHandlers.length ? defaultDeepCopyHandlers[idx++] : _defaultDeepCopyHandler))[CALL](ctx, details)) {\n                handler = NULL_VALUE;\n            }\n        });\n    }\n    if (userHandler && userHandler[CALL](ctx, details)) {\n        return details.result;\n    }\n    return value;\n}\nfunction _copyProps(visitMap, target, source, ctx) {\n    if (!isNullOrUndefined(source)) {\n        for (var key in source) {\n            target[key] = _deepCopy(visitMap, source[key], ctx, key);\n        }\n    }\n    return target;\n}\nfunction objCopyProps(target, source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source,\n        path: []\n    };\n    return _copyProps([], target, source, ctx);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objDeepCopy(source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source\n    };\n    return _deepCopy([], source, ctx);\n}\nfunction arrayDeepCopyHandler(details) {\n    var value = details.value;\n    if (isArray(value)) {\n        var target = details.result = [];\n        target.length = value.length;\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\nfunction dateDeepCopyHandler(details) {\n    var value = details.value;\n    if (isDate(value)) {\n        details.result = new Date(value.getTime());\n        return true;\n    }\n    return false;\n}\nfunction functionDeepCopyHandler(details) {\n    if (details.type === FUNCTION) {\n        return true;\n    }\n    return false;\n}\nfunction plainObjDeepCopyHandler(details) {\n    var value = details.value;\n    if (value && details.isPlain) {\n        var target = details.result = {};\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\n\nfunction _doExtend(target, theArgs) {\n    arrForEach(theArgs, function (theArg) {\n        objCopyProps(target, theArg);\n    });\n    return target;\n}\nfunction deepExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(objDeepCopy(target) || {}, ArrSlice[CALL](arguments));\n}\nfunction objExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(target || {}, ArrSlice[CALL](arguments));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSymSplit(value, splitter, limit) {\n    var splitFn = splitter ? splitter[getKnownSymbol(9 )] : UNDEF_VALUE;\n    return splitFn ? splitFn(value, limit) : [value];\n}\n\nvar strSplit = ( /*#__PURE__*/_unwrapFunction(\"split\", StrProto));\nvar strSymSplit = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"split\", StrProto, polyStrSymSplit));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByKey(target, path, defValue) {\n    if (!path || !target) {\n        return defValue;\n    }\n    var parts = strSplit(path, \".\");\n    var cnt = parts.length;\n    for (var lp = 0; lp < cnt && !isNullOrUndefined(target); lp++) {\n        target = target[parts[lp]];\n    }\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByIter(target, iter, defValue) {\n    if (!iter || !target) {\n        return defValue;\n    }\n    iterForOf(iter, function (value) {\n        if (isNullOrUndefined(target)) {\n            return -1;\n        }\n        target = target[value];\n    });\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\nfunction setValueByKey(target, path, value) {\n    if (target && path) {\n        var parts = strSplit(path, \".\");\n        var lastKey = parts.pop();\n        arrForEach(parts, function (key) {\n            if (isNullOrUndefined(target[key])) {\n                target[key] = {};\n            }\n            target = target[key];\n        });\n        target[lastKey] = value;\n    }\n}\nfunction setValueByIter(target, iter, value) {\n    if (target && iter) {\n        var lastKey_1;\n        iterForOf(iter, function (key) {\n            if (lastKey_1) {\n                if (isNullOrUndefined(target[lastKey_1])) {\n                    target[lastKey_1] = {};\n                }\n                target = target[lastKey_1];\n            }\n            lastKey_1 = key;\n        });\n        target[lastKey_1] = value;\n    }\n}\n\nvar getLength = ( /*#__PURE__*/_unwrapProp(LENGTH));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getIntValue(value, defValue) {\n    try {\n        var theValue = value;\n        if (!isNumber(value)) {\n            theValue = parseInt(asString(value), 10);\n        }\n        return (isNullOrUndefined(value) || isNaN(theValue)) ? defValue : theValue;\n    }\n    catch (e) {\n    }\n    return defValue;\n}\nvar isInteger = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(NumberCls, \"isInteger\")), _polyNumberIsInteger));\nfunction _polyNumberIsInteger(value) {\n    return isNumber(value) && !isNaN(value) &&\n        isFinite(value) &&\n        mathFloor(value) === value;\n}\nfunction isFiniteNumber(value) {\n    return isNumber(value) && !isNaN(value) && isFinite(value);\n}\n\nvar _perf;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasPerformance() {\n    return !!getPerformance();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getPerformance() {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_perf || _globalLazyTestHooks.lzy) {\n        _perf = createCachedValue(safe((getInst), [\"performance\"]).v);\n    }\n    return _perf.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction perfNow() {\n    var perf = getPerformance();\n    if (perf && perf.now) {\n        return perf.now();\n    }\n    return utcNow();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction elapsedTime(startTime) {\n    return perfNow() - startTime;\n}\n\nvar MATCH_ANY = \"(.*)\";\nvar MATCH_SINGLE = \"(.)\";\nfunction _createRegExp(value, escapeRgx, replaceFn, ignoreCase, fullMatch) {\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    return new RegExp((fullMatch ? \"^\" : EMPTY) + replaceFn(value.replace(escapeRgx, \"\\\\$1\")) + (fullMatch ? \"$\" : EMPTY), ignoreCase ? \"i\" : \"\");\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createWildcardRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.\\?{}()\\[\\]\\\\\\/\\\"\\'])/g, function (value) {\n        return value.replace(/\\*/g, MATCH_ANY);\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFilenameRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\\\\\\\|\\\\\\/|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            return g1 == \"*\" ? MATCH_ANY : MATCH_SINGLE;\n        });\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction makeGlobRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\*\\*\\\\[\\\\\\/]|\\\\\\\\|\\\\\\/|\\*\\*|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"**\\\\/\" || g1 == \"**\\\\\\\\\") {\n                return \"(.*[\\\\\\\\\\\\/])*\";\n            }\n            if (g1 === \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            if (g1 === \"**\") {\n                return MATCH_ANY;\n            }\n            return g1 === \"*\" ? \"([^\\\\\\\\\\\\/]*)\" : \"([^\\\\\\\\\\\\/]{1})\";\n        });\n    }, !!ignoreCase, fullMatch);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetLazy(cb, defValue, argArray) {\n    return getLazy(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetWritableLazy(cb, defValue, argArray) {\n    return getWritableLazy(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetDeferred(cb, defValue, argArray) {\n    return getDeferred(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetWritableDeferred(cb, defValue, argArray) {\n    return getWritableDeferred(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _checkLength(value, props) {\n    var result;\n    arrForEach(props, function (prop) {\n        if (prop in value) {\n            var propValue = value[prop];\n            result = (isFunction(propValue) ? propValue() : propValue) > 0;\n            return -1;\n        }\n    });\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _hasValue(value, depth) {\n    var result = value === false || value === 0;\n    if (!result && !isNullOrUndefined(value)) {\n        if (isArray(value)) {\n            result = value[LENGTH] > 0;\n        }\n        else if (isDate(value)) {\n            result = !isNaN(value.getTime());\n        }\n        else if (isBoolean(value)) {\n            return true;\n        }\n        else if (isObject(value)) {\n            try {\n                var chkValue = _checkLength(value, [LENGTH, \"byteLength\", \"size\", \"count\"]);\n                if (isBoolean(chkValue)) {\n                    return chkValue;\n                }\n                if (isFunction(value.valueOf) && depth < 5) {\n                    return _hasValue(value.valueOf(), ++depth);\n                }\n            }\n            catch (e) {\n            }\n            return !!objKeys(value)[LENGTH];\n        }\n        else {\n            result = isTruthy(value);\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasValue(value) {\n    return _hasValue(value, 0);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterable(ctx) {\n    return makeIterable({}, ctx);\n}\nfunction makeIterable(target, ctx) {\n    var itSymbol = getKnownSymbol(3 );\n    function _createIterator() {\n        return createIterator(ctx);\n    }\n    target[itSymbol] = _createIterator;\n    return target;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterator(ctx) {\n    var isDone = false;\n    function _value() {\n        return ctx.v;\n    }\n    function _next() {\n        if (!isDone) {\n            isDone = (ctx.n ? ctx.n(arguments) : true);\n        }\n        var result = {\n            done: isDone\n        };\n        if (!isDone) {\n            objDefine(result, \"value\", { g: _value });\n        }\n        return result;\n    }\n    function _return(value) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.r && ctx.r(value)\n        };\n    }\n    function _throw(e) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.t && ctx.t(e)\n        };\n    }\n    var theIterator = {\n        next: _next\n    };\n    if (ctx.r) {\n        theIterator.return = _return;\n    }\n    if (ctx.t) {\n        theIterator.throw = _throw;\n    }\n    return theIterator;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createArrayIterator(values) {\n    var idx = -1;\n    var theValues = values ? values.slice() : [];\n    var len = theValues[LENGTH];\n    function _value() {\n        if (idx >= 0 && idx < len) {\n            return theValues[idx];\n        }\n    }\n    function _getNext() {\n        idx++;\n        return idx >= len;\n    }\n    var ctx = {\n        n: _getNext\n    };\n    objDefine(ctx, \"v\", { g: _value });\n    return createIterator(ctx);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createRangeIterator(start, end, step) {\n    var nextValue = start;\n    var theValue = UNDEF_VALUE;\n    if (isNullOrUndefined(end)) {\n        end = start;\n    }\n    var theStep = step;\n    if (!theStep) {\n        theStep = (start <= end) ? 1 : -1;\n    }\n    function _value() {\n        return theValue;\n    }\n    function _getNext() {\n        var isDone = (theStep > 0) ? (nextValue > end) : (nextValue < end);\n        if (!isDone) {\n            theValue = nextValue;\n            nextValue += theStep;\n        }\n        return isDone;\n    }\n    return createIterator(objDefine({\n        n: _getNext\n    }, \"v\", { g: _value }));\n}\n\nvar mathAbs = ( /*#__PURE__*/_pureRef(MathCls, \"abs\"));\n\nvar mathExp = ( /*#__PURE__*/_pureRef(MathCls, \"exp\"));\nvar mathLog = ( /*#__PURE__*/_pureRef(MathCls, \"log\"));\n\nvar mathAsin = ( /*#__PURE__*/_pureRef(MathCls, \"asin\"));\nvar mathAcos = ( /*#__PURE__*/_pureRef(MathCls, \"acos\"));\nvar mathAtan = ( /*#__PURE__*/_pureRef(MathCls, \"atan\"));\nvar mathAtan2 = ( /*#__PURE__*/_pureRef(MathCls, \"atan2\"));\n\nvar mathPow = ( /*#__PURE__*/_pureRef(MathCls, \"pow\"));\nvar mathSqrt = ( /*#__PURE__*/_pureRef(MathCls, \"sqrt\"));\n\nvar mathRound = ( /*#__PURE__*/_pureRef(MathCls, \"round\"));\n\nvar mathSin = ( /*#__PURE__*/_pureRef(MathCls, \"sin\"));\nvar mathCos = ( /*#__PURE__*/_pureRef(MathCls, \"cos\"));\nvar mathTan = ( /*#__PURE__*/_pureRef(MathCls, \"tan\"));\n\nvar _recursionCheckOwnDescriptors;\nvar _recursionCheckOwnSymbols;\nvar _objGetOwnPropertyNames = ( /* #__PURE__ */_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_NAMES)), _returnEmptyArray));\nvar _objGetOwnPropertyDescriptor = ( /* #__PURE__ */_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nfunction polyObjGetOwnPropertyDescriptors(obj) {\n    var result = {};\n    _throwIfNullOrUndefined(obj);\n    if (!_recursionCheckOwnDescriptors) {\n        try {\n            _recursionCheckOwnDescriptors = true;\n            arrForEach(_objGetOwnPropertyNames(obj), function (propName) {\n                var descriptor = _objGetOwnPropertyDescriptor(obj, propName);\n                if (descriptor !== undefined) {\n                    result[propName] = descriptor;\n                }\n            });\n            arrForEach(_polyObjGetOwnPropertySymbols(obj), function (sym) {\n                var descriptor = _objGetOwnPropertyDescriptor(obj, sym);\n                if (descriptor !== undefined) {\n                    result[sym] = descriptor;\n                }\n            });\n        }\n        finally {\n            _recursionCheckOwnDescriptors = false;\n        }\n    }\n    return result;\n}\nfunction _polyObjGetOwnPropertySymbols(obj) {\n    var result = [];\n    var objHasOwn = ObjClass.hasOwn || polyObjHasOwn;\n    if (!_recursionCheckOwnSymbols) {\n        try {\n            _recursionCheckOwnSymbols = true;\n            var symEnum = 0 ;\n            while (symEnum <= 12 ) {\n                var sym = getKnownSymbol(symEnum);\n                if (sym && objHasOwn(obj, sym)) {\n                    result.push(sym);\n                }\n                symEnum++;\n            }\n        }\n        finally {\n            _recursionCheckOwnSymbols = false;\n        }\n    }\n    return result;\n}\n\nvar objGetOwnPropertyDescriptor = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar objGetOwnPropertyDescriptors = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"getOwnPropertyDescriptors\")), polyObjGetOwnPropertyDescriptors));\nvar objGetOwnPropertyNames = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_NAMES)), _returnEmptyArray));\nvar objGetOwnPropertySymbols = ( /* #__PURE__*/_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_SYMBOLS)), _returnEmptyArray));\n\nfunction polyObjFromEntries(entries) {\n    var result = {};\n    function addEntry(entry) {\n        if (isArray(entry) && entry.length >= 2) {\n            result[entry[0]] = entry[1];\n        }\n    }\n    if (isArray(entries)) {\n        arrForEach(entries, addEntry);\n    }\n    else if (isIterable(entries)) {\n        iterForOf(entries, addEntry);\n    }\n    return result;\n}\n\nvar objFromEntries = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"fromEntries\")), polyObjFromEntries));\n\nvar objPreventExtensions = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"preventExtensions\")), _doNothing));\nvar objIsExtensible = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isExtensible\")), _returnFalse));\n\nvar strEndsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"endsWith\", StrProto, polyStrEndsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrEndsWith(value, searchString, length) {\n    _throwIfNotString(value);\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var end = (!isUndefined(length) && length < value[LENGTH]) ? length : value[LENGTH];\n    return strSubstring(value, end - searchValue[LENGTH], end) === searchValue;\n}\n\nvar strIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", StrProto));\nvar strLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", StrProto));\n\nvar strIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", StrProto, polyStrIncludes));\nvar strContains = ( /*#__PURE__*/_pureAssign(strIncludes));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrIncludes(value, searchString, position) {\n    if (isRegExp(searchString)) {\n        throwTypeError(\"'searchString' must not be a regular expression\" + dumpObj(searchString));\n    }\n    return strIndexOf(value, asString(searchString), position) !== -1;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrWhiteSpace(value) {\n    if (isString(value)) {\n        return value.replace(/[\\s\\t\\r\\n\\f]+/g, EMPTY) === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrEmpty(value) {\n    if (isString(value)) {\n        return value === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n\nvar strStartsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"startsWith\", StrProto, polyStrStartsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrStartsWith(value, searchString, position) {\n    _throwIfNotString(value);\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var pos = position > 0 ? position : 0;\n    return strSubstring(value, pos, pos + searchValue[LENGTH]) === searchValue;\n}\n\nvar REF = \"ref\";\nvar UNREF = \"unref\";\nvar HAS_REF = \"hasRef\";\nvar ENABLED = \"enabled\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTimerHandler(startTimer, refreshFn, cancelFn) {\n    var ref = true;\n    var timerId = startTimer ? refreshFn(NULL_VALUE) : NULL_VALUE;\n    var theTimerHandler;\n    function _unref() {\n        ref = false;\n        timerId && timerId[UNREF] && timerId[UNREF]();\n        return theTimerHandler;\n    }\n    function _cancel() {\n        timerId && cancelFn(timerId);\n        timerId = NULL_VALUE;\n    }\n    function _refresh() {\n        timerId = refreshFn(timerId);\n        if (!ref) {\n            _unref();\n        }\n        return theTimerHandler;\n    }\n    function _setEnabled(value) {\n        !value && timerId && _cancel();\n        value && !timerId && _refresh();\n    }\n    theTimerHandler = {\n        cancel: _cancel,\n        refresh: _refresh\n    };\n    theTimerHandler[HAS_REF] = function () {\n        if (timerId && timerId[HAS_REF]) {\n            return timerId[HAS_REF]();\n        }\n        return ref;\n    };\n    theTimerHandler[REF] = function () {\n        ref = true;\n        timerId && timerId[REF] && timerId[REF]();\n        return theTimerHandler;\n    };\n    theTimerHandler[UNREF] = _unref;\n    theTimerHandler = objDefineProp(theTimerHandler, ENABLED, {\n        get: function () { return !!timerId; },\n        set: _setEnabled\n    });\n    return {\n        h: theTimerHandler,\n        dn: function () {\n            timerId = NULL_VALUE;\n        }\n    };\n}\n\nvar _setTimeoutFn;\nvar _clearTimeoutFn;\nfunction _resolveTimeoutFn(timeoutFn) {\n    var result = isFunction(timeoutFn) ? timeoutFn : _setTimeoutFn;\n    if (!result) {\n        var globalOverrides = _getGlobalConfig().tmOut || [];\n        if (isArray(globalOverrides) && globalOverrides.length > 0 && isFunction(globalOverrides[0])) {\n            result = globalOverrides[0];\n        }\n    }\n    return result || setTimeout;\n}\nfunction _resolveClearTimeoutFn(timeoutFn) {\n    var result = isFunction(timeoutFn) ? timeoutFn : _clearTimeoutFn;\n    if (!result) {\n        var globalOverrides = _getGlobalConfig().tmOut || [];\n        if (isArray(globalOverrides) && globalOverrides.length > 1 && isFunction(globalOverrides[1])) {\n            result = globalOverrides[1];\n        }\n    }\n    return result || clearTimeout;\n}\nfunction _createTimeoutWith(startTimer, overrideFn, theArgs) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    var setFn = _resolveTimeoutFn(len > 0 ? overrideFn[0] : (!isArr ? overrideFn : UNDEF_VALUE));\n    var clearFn = _resolveClearTimeoutFn(len > 1 ? overrideFn[1] : UNDEF_VALUE);\n    var timerFn = theArgs[0];\n    theArgs[0] = function () {\n        handler.dn();\n        fnApply(timerFn, UNDEF_VALUE, ArrSlice[CALL](arguments));\n    };\n    var handler = _createTimerHandler(startTimer, function (timerId) {\n        if (timerId) {\n            if (timerId.refresh) {\n                timerId.refresh();\n                return timerId;\n            }\n            fnApply(clearFn, UNDEF_VALUE, [timerId]);\n        }\n        return fnApply(setFn, UNDEF_VALUE, theArgs);\n    }, function (timerId) {\n        fnApply(clearFn, UNDEF_VALUE, [timerId]);\n    });\n    return handler.h;\n}\nfunction setTimeoutOverrides(overrideFn) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    _setTimeoutFn = (len > 0 ? overrideFn[0] : (!isArr ? overrideFn : UNDEF_VALUE));\n    _clearTimeoutFn = (len > 1 ? overrideFn[1] : UNDEF_VALUE);\n}\nfunction setGlobalTimeoutOverrides(overrideFn) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    var globalCfg = _getGlobalConfig();\n    if (!overrideFn) {\n        globalCfg.tmOut = undefined;\n    }\n    else {\n        globalCfg.tmOut = [\n            (len > 0 ? overrideFn[0] : (!isArr ? overrideFn : null)),\n            (len > 1 ? overrideFn[1] : null)\n        ];\n    }\n}\nfunction scheduleTimeout(callback, timeout) {\n    return _createTimeoutWith(true, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction scheduleTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(true, overrideFn, ArrSlice[CALL](arguments, 1));\n}\nfunction createTimeout(callback, timeout) {\n    return _createTimeoutWith(false, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction createTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(false, overrideFn, ArrSlice[CALL](arguments, 1));\n}\n\nvar _defaultIdleTimeout = 100;\nvar _maxExecutionTime = 50;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasIdleCallback() {\n    return !!( /*#__PURE__*/getIdleCallback());\n}\nvar getIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"requestIdleCallback\"]));\nvar getCancelIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"cancelIdleCallback\"]));\nfunction setDefaultIdleTimeout(timeout) {\n    _defaultIdleTimeout = timeout;\n}\nfunction setDefaultMaxExecutionTime(maxTime) {\n    _maxExecutionTime = maxTime;\n}\nfunction scheduleIdleCallback(callback, options) {\n    function _createDeadline(timedOut) {\n        var startTime = perfNow();\n        return {\n            didTimeout: timedOut,\n            timeRemaining: function () {\n                return _maxExecutionTime - elapsedTime(startTime);\n            }\n        };\n    }\n    if (hasIdleCallback()) {\n        var handler_1 = _createTimerHandler(true, function (idleId) {\n            idleId && getCancelIdleCallback()(idleId);\n            return getIdleCallback()(function (deadline) {\n                handler_1.dn();\n                callback(deadline || _createDeadline(false));\n            }, options);\n        }, function (idleId) {\n            getCancelIdleCallback()(idleId);\n        });\n        return handler_1.h;\n    }\n    var timeout = (options || {}).timeout;\n    if (isUndefined(timeout)) {\n        timeout = _defaultIdleTimeout;\n    }\n    return scheduleTimeout(function () {\n        callback(_createDeadline(true));\n    }, timeout);\n}\n\nfunction scheduleInterval(callback, timeout) {\n    var theArguments = ArrSlice[CALL](arguments);\n    var handler = _createTimerHandler(true, function (intervalId) {\n        intervalId && clearInterval(intervalId);\n        return fnApply(setInterval, UNDEF_VALUE, theArguments);\n    }, function (intervalId) {\n        fnApply(clearInterval, UNDEF_VALUE, [intervalId]);\n    });\n    return handler.h;\n}\n\nexport { arrAppend, arrContains, arrEvery, arrFilter, arrFind, arrFindIndex, arrFindLast, arrFindLastIndex, arrForEach, arrFrom, arrIncludes, arrIndexOf, arrLastIndexOf, arrMap, arrReduce, arrSlice, arrSome, arrayDeepCopyHandler, asString, createArrayIterator, createCachedValue, createCustomError, createDeferredCachedValue, createEnum, createEnumKeyMap, createEnumValueMap, createFilenameRegex, createFnDeferredProxy, createIterable, createIterator, createProxyFuncs, createRangeIterator, createSimpleMap, createTimeout, createTimeoutWith, createTypeMap, createWildcardRegex, dateDeepCopyHandler, deepExtend, dumpObj, elapsedTime, encodeAsHtml, encodeAsJson, fnApply, fnBind, fnCall, functionDeepCopyHandler, getCancelIdleCallback, getDeferred, getDocument, getGlobal, getHistory, getIdleCallback, getInst, getIntValue, getKnownSymbol, getLazy, getLength, getNavigator, getPerformance, getSymbol, getValueByIter, getValueByKey, getWindow, getWritableDeferred, getWritableLazy, hasDocument, hasHistory, hasIdleCallback, hasNavigator, hasPerformance, hasSymbol, hasValue, hasWindow, isArray, isArrayBuffer, isAsyncFunction, isAsyncGenerator, isBigInt, isBlob, isBoolean, isDate, isDefined, isElement, isElementLike, isEmpty, isError, isFile, isFiniteNumber, isFormData, isFunction, isGenerator, isInteger, isIterable, isIterator, isMap, isMapLike, isNode, isNotTruthy, isNullOrUndefined, isNumber, isObject, isPlainObject, isPrimitive, isPrimitiveType, isPromise, isPromiseLike, isRegExp, isSet, isSetLike, isStrictNullOrUndefined, isStrictUndefined, isString, isSymbol, isThenable, isTruthy, isTypeof, isUndefined, isWeakMap, isWeakSet, isWebWorker, iterForOf, lazySafeGetInst, makeGlobRegex, makeIterable, mathAbs, mathAcos, mathAsin, mathAtan, mathAtan2, mathCeil, mathCos, mathExp, mathFloor, mathLog, mathMax, mathMin, mathPow, mathRandom, mathRound, mathSin, mathSqrt, mathTan, mathToInt, mathTrunc, newSymbol, normalizeJsName, objAssign, objCopyProps, objCreate, objDeepCopy, objDeepFreeze, objDefine, objDefineAccessors, objDefineGet, objDefineProp, objDefineProperties, objDefineProps, objEntries, objExtend, objForEachKey, objFreeze, objFromEntries, objGetOwnPropertyDescriptor, objGetOwnPropertyDescriptors, objGetOwnPropertyNames, objGetOwnPropertySymbols, objGetPrototypeOf, objHasOwn, objHasOwnProperty, objIs, objIsExtensible, objIsFrozen, objIsSealed, objKeys, objPreventExtensions, objPropertyIsEnumerable, objSeal, objSetPrototypeOf, objToString, objValues, perfNow, plainObjDeepCopyHandler, polyArrFind, polyArrFindIndex, polyArrFindLast, polyArrFindLastIndex, polyArrFrom, polyArrIncludes, polyGetKnownSymbol, polyIsArray, polyNewSymbol, polyObjEntries, polyObjHasOwn, polyObjIs, polyObjKeys, polyStrIncludes, polyStrSubstr, polyStrSymSplit, polyStrTrim, polyStrTrimEnd, polyStrTrimStart, polySymbolFor, polySymbolKeyFor, polyUtcNow, readArgs, safe, safeGet, safeGetDeferred, safeGetLazy, safeGetWritableDeferred, safeGetWritableLazy, scheduleIdleCallback, scheduleInterval, scheduleTimeout, scheduleTimeoutWith, setBypassLazyCache, setDefaultIdleTimeout, setDefaultMaxExecutionTime, setGlobalTimeoutOverrides, setTimeoutOverrides, setValueByIter, setValueByKey, strCamelCase, strContains, strEndsWith, strIncludes, strIndexOf, strIsNullOrEmpty, strIsNullOrWhiteSpace, strKebabCase, strLastIndexOf, strLeft, strLetterCase, strLower, strPadEnd, strPadStart, strRepeat, strRight, strSlice, strSnakeCase, strSplit, strStartsWith, strSubstr, strSubstring, strSymSplit, strTrim, strTrimEnd, strTrimLeft, strTrimRight, strTrimStart, strUpper, symbolFor, symbolKeyFor, throwError, throwRangeError, throwTypeError, throwUnsupported, utcNow };\n//# sourceMappingURL=ts-utils.js.map\n","/**\n * GoToProvidersViewTool - Language Model Tool for opening the Providers view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ProvidersView } from '../admin/ProvidersView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToProvidersViewTool - Opens the Providers panel\n */\nexport class GoToProvidersViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Providers View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToProvidersViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ProvidersView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Providers View - showing installed Airflow providers with their versions')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToProvidersViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Providers View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","\nimport { Session } from '../common/Session';\nimport * as MessageHub from '../common/MessageHub';\n\nexport interface IDagRunResult {\n    dag_id: string;\n    dag_run_id: string;\n    state: string;\n    execution_date: string;\n    logical_date: string;\n    start_date?: string;\n    end_date?: string;\n    conf?: Record<string, unknown>;\n}\n\nexport interface IFailedRunSummary {\n    dag_id: string;\n    dag_run_id: string;\n    state: 'failed' | 'upstream_failed' | 'skipped';\n    execution_date: string;\n    logical_date: string;\n    start_date?: string;\n    end_date?: string;\n    error_message?: string;\n}\n\nexport interface IDagSummary {\n    dag_id: string;\n    is_paused: boolean;\n    is_active: boolean;\n    description?: string;\n    owners?: string[];\n    tags?: { name: string }[];\n}\n\nexport interface ITaskInstance {\n    task_id: string;\n    dag_id: string;\n    dag_run_id: string;\n    execution_date: string;\n    start_date: string;\n    end_date: string;\n    duration: number;\n    state: string;\n    try_number: number;\n    map_index: number;\n    max_tries: number;\n    hostname: string;\n    unixname: string;\n    pool: string;\n    pool_slots: number;\n    queue: string;\n    priority_weight: number;\n    operator: string;\n    queued_when: string;\n    pid: number;\n    executor_config: string;\n}\n\nexport class AirflowClientAdapter {\n    \n    /**\n     * Triggers a DAG run via POST /dags/{dag_id}/dagRuns\n     * \n     * @param dagId - The DAG identifier\n     * @param configJson - JSON string containing the DAG run configuration (optional)\n     * @param date - The logical date for the run (optional)\n     * @returns Promise with the created DAG run result\n     */\n    async triggerDagRun(dagId: string, configJson: string = '{}', date?: string): Promise<IDagRunResult> {\n        // Validate JSON before calling API\n        try {\n            JSON.parse(configJson);\n        } catch (error) {\n            throw new Error(`Invalid JSON in config_json parameter: ${error instanceof Error ? error.message : String(error)}`);\n        }\n\n        const result = await Session.Current.Api.triggerDag(dagId, configJson, date);\n\n        if (!result.isSuccessful) {\n            throw new Error(result.error?.message || 'Failed to trigger DAG run');\n        }\n\n        MessageHub.DagTriggered(this, dagId, result.result.dag_run_id);\n\n        // Map the API response to our interface\n        const apiResponse = result.result;\n        return {\n            dag_id: apiResponse.dag_id || dagId,\n            dag_run_id: apiResponse.dag_run_id || apiResponse.run_id || '',\n            state: apiResponse.state || 'queued',\n            execution_date: apiResponse.execution_date || apiResponse.logical_date || new Date().toISOString(),\n            logical_date: apiResponse.logical_date || apiResponse.execution_date || new Date().toISOString(),\n            start_date: apiResponse.start_date,\n            end_date: apiResponse.end_date,\n            conf: apiResponse.conf\n        };\n    }\n\n    /**\n     * Queries for failed DAG runs using the Airflow API\n     * \n     * @param timeRangeHours - Number of hours to look back (default 24)\n     * @param dagIdFilter - Optional DAG ID filter\n     * @returns Promise with array of failed run summaries\n     */\n    async queryFailedRuns(timeRangeHours: number = 24, dagIdFilter?: string): Promise<IFailedRunSummary[]> {\n        const failedRuns: IFailedRunSummary[] = [];\n\n        try {\n            // If dagIdFilter is specified, query only that DAG\n            if (dagIdFilter) {\n                const result = await Session.Current.Api.getDagRunHistory(dagIdFilter);\n                if (result.isSuccessful && result.result?.dag_runs) {\n                    failedRuns.push(...this.filterFailedRuns(result.result.dag_runs, timeRangeHours));\n                }\n            } else {\n                // If no filter, we need to get the DAG list first, then query each\n                const dagListResult = await Session.Current.Api.getDagList();\n                if (dagListResult.isSuccessful && dagListResult.result) {\n                    // Handle both v1 (array) and v2 (object with dags property) responses\n                    const resultData = dagListResult.result as any;\n                    const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n                    \n                    // Limit to first 20 DAGs to avoid too many API calls\n                    const dagsToCheck = dags.slice(0, 20);\n                    \n                    // Query each DAG's runs in parallel\n                    const runPromises = dagsToCheck.map(async (dag: any) => {\n                        try {\n                            const dagId = dag.dag_id;\n                            const runResult = await Session.Current.Api.getDagRunHistory(dagId);\n                            if (runResult.isSuccessful && runResult.result?.dag_runs) {\n                                return this.filterFailedRuns(runResult.result.dag_runs, timeRangeHours);\n                            }\n                        } catch (error) {\n                            // Silently continue on error for individual DAGs\n                            return [];\n                        }\n                        return [];\n                    });\n\n                    const results = await Promise.all(runPromises);\n                    results.forEach(runs => failedRuns.push(...runs));\n                }\n            }\n\n            return failedRuns;\n\n        } catch (error) {\n            throw new Error(`Failed to query failed runs: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves a list of DAGs filtered by paused state\n     * \n     * @param isPaused - Whether to list paused (true) or active (false) DAGs\n     * @returns Promise with array of DAG summaries\n     */\n    async getDags(isPaused: boolean): Promise<IDagSummary[]> {\n        try {\n            const dagListResult = await Session.Current.Api.getDagList();\n            if (!dagListResult.isSuccessful || !dagListResult.result) {\n                throw new Error(dagListResult.error?.message || 'Failed to fetch DAG list');\n            }\n\n            // Handle both v1 (array) and v2 (object with dags property) responses\n            const resultData = dagListResult.result as any;\n            const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n\n            return dags\n                .filter((dag: any) => dag.is_paused === isPaused)\n                .map((dag: any) => ({\n                    dag_id: dag.dag_id,\n                    is_paused: dag.is_paused,\n                    is_active: dag.is_active !== undefined ? dag.is_active : !dag.is_paused,\n                    description: dag.description,\n                    owners: dag.owners,\n                    tags: dag.tags\n                }));\n\n        } catch (error) {\n            throw new Error(`Failed to get DAG list: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves a list of DAGs that are currently running\n     * \n     * @returns Promise with array of DAG summaries that have running DAG runs\n     */\n    async getRunningDags(): Promise<Array<IDagSummary & { latest_run_state: string; latest_run_id: string }>> {\n        try {\n            const dagListResult = await Session.Current.Api.getDagList();\n            if (!dagListResult.isSuccessful || !dagListResult.result) {\n                throw new Error(dagListResult.error?.message || 'Failed to fetch DAG list');\n            }\n\n            const resultData = dagListResult.result as any;\n            const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n\n            // Filter and enrich DAGs with their latest run info\n            const runningDags: Array<IDagSummary & { latest_run_state: string; latest_run_id: string }> = [];\n\n            for (const dag of dags) {\n                if (dag.is_paused) {\n                    continue; // Skip paused DAGs\n                }\n\n                try {\n                    const latestRun = await this.getLatestDagRun(dag.dag_id);\n                    if (latestRun && (latestRun.state === 'running' || latestRun.state === 'queued')) {\n                        runningDags.push({\n                            dag_id: dag.dag_id,\n                            is_paused: dag.is_paused,\n                            is_active: dag.is_active !== undefined ? dag.is_active : !dag.is_paused,\n                            description: dag.description,\n                            owners: dag.owners,\n                            tags: dag.tags,\n                            latest_run_state: latestRun.state,\n                            latest_run_id: latestRun.dag_run_id\n                        });\n                    }\n                } catch (error) {\n                    // Continue if we can't get the latest run for a DAG\n                    continue;\n                }\n            }\n\n            return runningDags;\n\n        } catch (error) {\n            throw new Error(`Failed to get running DAGs: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Pauses or unpauses a DAG\n     * \n     * @param dagId - The DAG ID\n     * @param isPaused - True to pause, false to unpause\n     */\n    async pauseDag(dagId: string, isPaused: boolean): Promise<void> {\n        try {\n            const result = await Session.Current.Api.pauseDag(dagId, isPaused);\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || `Failed to ${isPaused ? 'pause' : 'unpause'} DAG`);\n            }\n            MessageHub.DagPaused(this, dagId);\n        } catch (error) {\n            throw new Error(`Failed to change DAG state: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the latest DAG run for a given DAG\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the latest DAG run result or undefined if not found\n     */\n    async getLatestDagRun(dagId: string): Promise<IDagRunResult | undefined> {\n        try {\n            const result = await Session.Current.Api.getLastDagRun(dagId);\n            if (!result.isSuccessful || !result.result) {\n                return undefined;\n            }\n            \n            const apiResponse = result.result;\n            return {\n                dag_id: apiResponse.dag_id || dagId,\n                dag_run_id: apiResponse.dag_run_id || apiResponse.run_id || '',\n                state: apiResponse.state || 'unknown',\n                execution_date: apiResponse.execution_date || apiResponse.logical_date || new Date().toISOString(),\n                logical_date: apiResponse.logical_date || apiResponse.execution_date || new Date().toISOString(),\n                start_date: apiResponse.start_date,\n                end_date: apiResponse.end_date,\n                conf: apiResponse.conf\n            };\n        } catch (error) {\n            // Return undefined on error to allow caller to handle\n            return undefined;\n        }\n    }\n\n    /**\n     * Retrieves task instances for a specific DAG run\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID\n     * @returns Promise with array of task instances\n     */\n    async getTaskInstances(dagId: string, dagRunId: string): Promise<any[]> {\n        try {\n            const result = await Session.Current.Api.getTaskInstances(dagId, dagRunId);\n            if (!result.isSuccessful || !result.result) {\n                return [];\n            }\n            \n            // API v2 returns { task_instances: [...] }\n            return result.result.task_instances || [];\n        } catch (error) {\n            return [];\n        }\n    }\n\n    /**\n     * Retrieves task log content\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID\n     * @param taskId - The task ID\n     * @param tryNumber - The task attempt number\n     * @returns Promise with the log content (truncated for LLM processing)\n     */\n    async getTaskLog(dagId: string, dagRunId: string, taskId: string, tryNumber: string): Promise<string> {\n        try {\n            // Use the existing getTaskInstanceLog method\n            const result = await Session.Current.Api.getTaskInstanceLogText(dagId, dagRunId, taskId);\n\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || 'Failed to retrieve task log');\n            }\n\n            const logContent = result.result || '';\n\n            // Truncate to last 400 characters for token efficiency\n            if (logContent.length > 400) {\n                return '...' + logContent.slice(-400);\n            }\n\n            return logContent;\n\n        } catch (error) {\n            throw new Error(`Failed to get task log: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Helper method to filter failed runs within the time range\n     */\n    private filterFailedRuns(dagRuns: any[], timeRangeHours: number): IFailedRunSummary[] {\n        const cutoffTime = new Date();\n        cutoffTime.setHours(cutoffTime.getHours() - timeRangeHours);\n\n        const failedStates = ['failed', 'upstream_failed', 'skipped'];\n\n        return dagRuns\n            .filter((run: any) => {\n                // Filter by state\n                if (!failedStates.includes(run.state)) {\n                    return false;\n                }\n\n                // Filter by time range\n                const runDate = new Date(run.execution_date || run.logical_date || run.start_date);\n                return runDate >= cutoffTime;\n            })\n            .map((run: any) => ({\n                dag_id: run.dag_id,\n                dag_run_id: run.dag_run_id || run.run_id,\n                state: run.state,\n                execution_date: run.execution_date || run.logical_date,\n                logical_date: run.logical_date || run.execution_date,\n                start_date: run.start_date,\n                end_date: run.end_date,\n                error_message: this.extractErrorMessage(run)\n            }));\n    }\n\n    /**\n     * Retrieves DAG run history for a specific DAG\n     * \n     * @param dagId - The DAG ID\n     * @param date - Optional date filter (YYYY-MM-DD format)\n     * @returns Promise with DAG runs data\n     */\n    async getDagRunHistory(dagId: string, date?: string): Promise<any> {\n        try {\n            const result = await Session.Current.Api.getDagRunHistory(dagId, date);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG run history');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG run history: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Stops a running DAG run by setting its state to failed\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID to stop\n     */\n    async cancelDagRun(dagId: string, dagRunId: string): Promise<void> {\n        try {\n            const result = await Session.Current.Api.cancelDagRun(dagId, dagRunId);\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || 'Failed to cancel DAG run');\n            }\n            MessageHub.DagRunCancelled(this, dagId, dagRunId);\n        } catch (error) {\n            throw new Error(`Failed to stop DAG run: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the source code for a DAG\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the DAG source code\n     */\n    async getDagSource(dagId: string): Promise<string> {\n        try {\n            const result = await Session.Current.Api.getSourceCode(dagId);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG source code');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG source code: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the source code for a DAG (handles both v1 and v2 APIs)\n     * For v1 API, automatically fetches the file_token first\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the DAG source code\n     */\n    async getDagSourceCode(dagId: string): Promise<string> {\n        try {\n            // First, try to get DAG info to obtain file_token (needed for v1 API)\n            const dagInfoResult = await Session.Current.Api.getDagInfo(dagId);\n            let fileToken: string | undefined;\n            \n            if (dagInfoResult.isSuccessful && dagInfoResult.result?.file_token) {\n                fileToken = dagInfoResult.result.file_token;\n            }\n\n            // Now get the source code (fileToken is optional for v2)\n            const result = await Session.Current.Api.getSourceCode(dagId, fileToken);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG source code');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG source code: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Helper to extract error message from DAG run\n     */\n    private extractErrorMessage(run: any): string | undefined {\n        // Try to extract error information from the run object\n        if (run.note) {\n            return run.note;\n        }\n        if (run.state === 'failed') {\n            return `DAG run failed`;\n        }\n        if (run.state === 'upstream_failed') {\n            return `Upstream task(s) failed`;\n        }\n        if (run.state === 'skipped') {\n            return `DAG run was skipped`;\n        }\n        return undefined;\n    }\n}\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { getGlobal, objAssign, objCreate, objDefineProp, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { ObjClass, ObjProto, strDefault, strShimFunction, strShimPrototype } from \"./Constants\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES5 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nvar strHasOwnProperty = \"hasOwnProperty\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = objAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreate(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (objHasOwnProperty(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && objDefineProp(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !objHasOwnProperty(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!objDefineProp) {\r\n        objDefineProp(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (objDefineProp) {\r\n        objDefineProp(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!objDefineProp) {\r\n        objDefineProp(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ServerHealthView {\n    public static Current: ServerHealthView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private healthJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ServerHealthView.constructor Started');\n        Telemetry.Current.send('ServerHealthView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ServerHealthView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ServerHealthView.loadData Started');\n        Telemetry.Current.send('ServerHealthView.loadData.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getHealth();\n        if (result.isSuccessful) {\n            this.healthJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ServerHealthView.renderHtml Started');\n        Telemetry.Current.send('ServerHealthView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ServerHealthView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ServerHealthView.render Started');\n        Telemetry.Current.send('ServerHealthView.render.called');\n\n        if (ServerHealthView.Current) {\n            ServerHealthView.Current._panel.reveal(vscode.ViewColumn.One);\n            ServerHealthView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"serverHealthView\", \"Server Health\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ServerHealthView.Current = new ServerHealthView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ServerHealthView.dispose Started');\n        Telemetry.Current.send('ServerHealthView.dispose.called');\n\n        ServerHealthView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ServerHealthView._getWebviewContent Started');\n        Telemetry.Current.send('ServerHealthView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from health data\n        let tableRows = '';\n        if (this.healthJson) {\n            // Metadatabase status\n            if (this.healthJson.metadatabase) {\n                const status = this.healthJson.metadatabase.status || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Metadatabase</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n            }\n\n            // Scheduler status\n            if (this.healthJson.scheduler) {\n                const status = this.healthJson.scheduler.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.scheduler.latest_scheduler_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Scheduler</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest Scheduler Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n\n            // Triggerer status\n            if (this.healthJson.triggerer) {\n                const status = this.healthJson.triggerer.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.triggerer.latest_triggerer_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Triggerer</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest Triggerer Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n\n            // Dag Processor status\n            if (this.healthJson.dag_processor) {\n                const status = this.healthJson.dag_processor.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.dag_processor.latest_dag_processor_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>DAG Processor</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest DAG Processor Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            h3 {\n                font-size: var(--font-size-md);\n                color: var(--vscode-descriptionForeground);\n                margin-top: -16px;\n                margin-bottom: var(--spacing-lg);\n                font-weight: normal;\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Server Health</title>\n      </head>\n      <body>  \n        <h2>Server Health</h2>\n        <h3>${Session.Current.Server?.apiUrl}</h3>\n        <div class=\"controls\">\n            <vscode-button id=\"refresh-btn\" appearance=\"secondary\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Component</th>\n                    <th>Status</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"2\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No health data available</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('refresh-btn').addEventListener('click', () => {\n                vscode.postMessage({ command: 'refresh' });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getHealthEmoji(status: string): string {\n        const statusLower = status.toLowerCase();\n        if (statusLower === 'healthy') {\n            return '';\n        } else if (statusLower === 'unhealthy') {\n            return '';\n        }\n        return '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ServerHealthView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ServerHealthView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ServerHealthView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { mathFloor, utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getCrypto, getMsCrypto, isIE } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar UInt32Mask = 0x100000000;\r\nvar MaxUInt32 = 0xffffffff;\r\nvar SEED1 = 123456789;\r\nvar SEED2 = 987654321;\r\n// MWC based Random generator (for IE)\r\nvar _mwcSeeded = false;\r\nvar _mwcW = SEED1;\r\nvar _mwcZ = SEED2;\r\n// Takes any integer\r\nfunction _mwcSeed(seedValue) {\r\n    if (seedValue < 0) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        seedValue >>>= 0;\r\n    }\r\n    _mwcW = (SEED1 + seedValue) & MaxUInt32;\r\n    _mwcZ = (SEED2 - seedValue) & MaxUInt32;\r\n    _mwcSeeded = true;\r\n}\r\nfunction _autoSeedMwc() {\r\n    // Simple initialization using default Math.random() - So we inherit any entropy from the browser\r\n    // and bitwise XOR with the current milliseconds\r\n    try {\r\n        var now = utcNow() & 0x7fffffff;\r\n        _mwcSeed(((Math.random() * UInt32Mask) ^ now) + now);\r\n    }\r\n    catch (e) {\r\n        // Don't crash if something goes wrong\r\n    }\r\n}\r\n/**\r\n * Generate a random value between 0 and maxValue, max value should be limited to a 32-bit maximum.\r\n * So maxValue(16) will produce a number from 0..16 (range of 17)\r\n * @param maxValue - The max value for the range\r\n */\r\nexport function randomValue(maxValue) {\r\n    if (maxValue > 0) {\r\n        return mathFloor((random32() / MaxUInt32) * (maxValue + 1)) >>> 0;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate a random 32-bit number (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), defaults un-unsigned.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function random32(signed) {\r\n    var value = 0;\r\n    var c = getCrypto() || getMsCrypto();\r\n    if (c && c.getRandomValues) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = c.getRandomValues(new Uint32Array(1))[0] & MaxUInt32;\r\n    }\r\n    if (value === 0 && isIE()) {\r\n        // For IE 6, 7, 8 (especially on XP) Math.random is not very random\r\n        if (!_mwcSeeded) {\r\n            // Set the seed for the Mwc algorithm\r\n            _autoSeedMwc();\r\n        }\r\n        // Don't use Math.random for IE\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mwcRandom32() & MaxUInt32;\r\n    }\r\n    if (value === 0) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mathFloor((UInt32Mask * Math.random()) | 0);\r\n    }\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Seed the MWC random number generator with the specified seed or a random value\r\n * @param value - optional the number to used as the seed, if undefined, null or zero a random value will be chosen\r\n */\r\nexport function mwcRandomSeed(value) {\r\n    if (!value) {\r\n        _autoSeedMwc();\r\n    }\r\n    else {\r\n        _mwcSeed(value);\r\n    }\r\n}\r\n/**\r\n * Generate a random 32-bit number between (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), using MWC (Multiply with carry)\r\n * instead of Math.random() defaults to un-signed.\r\n * Used as a replacement random generator for IE to avoid issues with older IE instances.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function mwcRandom32(signed) {\r\n    _mwcZ = (36969 * (_mwcZ & 0xFFFF) + (_mwcZ >> 16)) & MaxUInt32;\r\n    _mwcW = (18000 * (_mwcW & 0xFFFF) + (_mwcW >> 16)) & MaxUInt32;\r\n    var value = (((_mwcZ << 16) + (_mwcW & 0xFFFF)) >>> 0) & MaxUInt32 | 0;\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Generate random base64 id string.\r\n * The default length is 22 which is 132-bits so almost the same as a GUID but as base64 (the previous default was 5)\r\n * @param maxLength - Optional value to specify the length of the id to be generated, defaults to 22\r\n */\r\nexport function newId(maxLength) {\r\n    if (maxLength === void 0) { maxLength = 22; }\r\n    var base64chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    // Start with an initial random number, consuming the value in reverse byte order\r\n    var number = random32() >>> 0; // Make sure it's a +ve number\r\n    var chars = 0;\r\n    var result = STR_EMPTY;\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < maxLength) {\r\n        chars++;\r\n        result += base64chars.charAt(number & 0x3F);\r\n        number >>>= 6; // Zero fill with right shift\r\n        if (chars === 5) {\r\n            // 5 base64 characters === 30 bits so we don't have enough bits for another base64 char\r\n            // So add on another 30 bits and make sure it's +ve\r\n            number = (((random32() << 2) & 0xFFFFFFFF) | (number & 0x03)) >>> 0;\r\n            chars = 0; // We need to reset the number every 5 chars (30 bits)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=RandomHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { objDefine } from \"@nevware21/ts-utils\";\r\nimport { normalizeJsName } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { newId } from \"./RandomHelper\";\r\nvar version = '3.3.11';\r\nvar instanceName = \".\" + newId(6);\r\nvar _dataUid = 0;\r\n// Accepts only:\r\n//  - Node\r\n//    - Node.ELEMENT_NODE\r\n//    - Node.DOCUMENT_NODE\r\n//  - Object\r\n//    - Any\r\nfunction _canAcceptData(target) {\r\n    return target.nodeType === 1 || target.nodeType === 9 || !(+target.nodeType);\r\n}\r\nfunction _getCache(data, target) {\r\n    var theCache = target[data.id];\r\n    if (!theCache) {\r\n        theCache = {};\r\n        try {\r\n            if (_canAcceptData(target)) {\r\n                objDefine(target, data.id, {\r\n                    e: false,\r\n                    v: theCache\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Not all environments allow extending all objects, so just ignore the cache in those cases\r\n        }\r\n    }\r\n    return theCache;\r\n}\r\nexport function createUniqueNamespace(name, includeVersion) {\r\n    if (includeVersion === void 0) { includeVersion = false; }\r\n    return normalizeJsName(name + (_dataUid++) + (includeVersion ? \".\" + version : STR_EMPTY) + instanceName);\r\n}\r\nexport function createElmNodeData(name) {\r\n    var data = {\r\n        id: createUniqueNamespace(\"_aiData-\" + (name || STR_EMPTY) + \".\" + version),\r\n        accept: function (target) {\r\n            return _canAcceptData(target);\r\n        },\r\n        get: function (target, name, defValue, addDefault) {\r\n            var theCache = target[data.id];\r\n            if (!theCache) {\r\n                if (addDefault) {\r\n                    // Side effect is adds the cache\r\n                    theCache = _getCache(data, target);\r\n                    theCache[normalizeJsName(name)] = defValue;\r\n                }\r\n                return defValue;\r\n            }\r\n            return theCache[normalizeJsName(name)];\r\n        },\r\n        kill: function (target, name) {\r\n            if (target && target[name]) {\r\n                try {\r\n                    delete target[name];\r\n                }\r\n                catch (e) {\r\n                    // Just cleaning up, so if this fails -- ignore\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return data;\r\n}\r\n//# sourceMappingURL=DataCacheHelper.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport { encode } from 'base-64';\nimport * as ui from './UI';\nimport { MethodResult } from './MethodResult';\nimport { ServerConfig } from './Types';\nimport { Telemetry } from './Telemetry';\n\n// Wrapper for fetch to handle ESM node-fetch in CommonJS\nconst fetch = async (url: string, init?: any) => {\n    const module = await import('node-fetch');\n    return module.default(url, init);\n};\n\nexport class AirflowApi {\n    private jwtToken: string | undefined;\n\n    constructor(public config: ServerConfig) {}\n\n    private get version(): 'v1' | 'v2' | 'unknown' {\n        if (this.config.apiUrl.includes('v1')) { return 'v1'; }\n        if (this.config.apiUrl.includes('v2')) { return 'v2'; }\n        return 'unknown';\n    }\n\n    private async getJwtToken(): Promise<string | undefined> {\n        if (this.jwtToken) { return this.jwtToken; }\n\n\n        try {\n            const response = await fetch(this.config.apiUrl.replace(\"/api/v2\", \"\") + '/auth/token', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ username: this.config.apiUserName, password: this.config.apiPassword }),\n            });\n\n            const result = await response.json() as any;\n            if (response.status === 201 || response.status === 200) {\n                this.jwtToken = result['access_token'];\n                return this.jwtToken;\n            } else {\n                ui.logToOutput(`getJwtToken failed: ${response.status} - ${JSON.stringify(result)}`);\n            }\n        } catch (error) {\n            ui.logToOutput(\"getJwtToken Error\", error as Error);\n            Telemetry.Current.send('AirflowApi.getJwtToken.error', { error: (error as Error).message });\n        }\n        return undefined;\n    }\n\n    private async getHeaders(): Promise<Record<string, string>> {\n        const headers: Record<string, string> = {\n            'Content-Type': 'application/json'\n        };\n\n        if (this.version === 'v1') {\n            headers['Authorization'] = 'Basic ' + encode(`${this.config.apiUserName}:${this.config.apiPassword}`);\n        } else if (this.version === 'v2') {\n            const token = await this.getJwtToken();\n            if (token) {\n                headers['Authorization'] = 'Bearer ' + token;\n            } else {\n                ui.showWarningMessage('Unable to obtain JWT token for Airflow API v2.');\n            }\n        }\n        return headers;\n    }\n\n    public async checkConnection(): Promise<boolean> {\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags?limit=1`, { method: 'GET', headers });\n            return response.status === 200;\n        } catch (e) {\n            Telemetry.Current.send('AirflowApi.checkConnection.error', { error: (e as Error).message });\n            return false;\n        }\n    }\n\n    public async getDagList(): Promise<MethodResult<any[]>> {\n        const result = new MethodResult<any[]>();\n        const allDags: any[] = [];\n        let offset = 0;\n        const limit = 100;\n\n        try {\n            while (true) {\n                const headers = await this.getHeaders();\n                const response = await fetch(`${this.config.apiUrl}/dags?limit=${limit}&offset=${offset}`, { method: 'GET', headers });\n                const data = await response.json() as any;\n\n                if (response.status === 200) {\n                    allDags.push(...data[\"dags\"]);\n                    if (data[\"dags\"].length < limit) {\n                        break;\n                    }\n                    offset += limit;\n                } else {\n                    ui.showApiErrorMessage('Api Call Error', data);\n                    result.isSuccessful = false;\n                    return result;\n                }\n            }\n            result.result = allDags;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage('Cannot connect to Airflow.', error as Error);\n            Telemetry.Current.send('AirflowApi.getDagList.error', { error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async triggerDag(dagId: string, config: string = \"{}\", date?: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            let body: any = { conf: JSON.parse(config) };\n            \n            if (this.version === 'v1' && date) {\n                body.logical_date = date + \"T00:00:00Z\";\n            } else if (this.version === 'v2') {\n                body.logical_date = date ? (date + \"T00:00:00Z\") : new Date().toISOString();\n            }\n\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns`, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify(body),\n            });\n\n            const data = await response.json();\n            if (response.status === 200 || response.status === 201) { // 201 Created is typical for POST\n                //ui.showInfoMessage(`${dagId} Triggered.`);\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Trigger Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Trigger Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.triggerDag.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getDagRun(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getDagRun.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getLastDagRun(dagId: string): Promise<MethodResult<any>> {\n        const history = await this.getDagRunHistory(dagId);\n        if (history.isSuccessful && history.result && history.result.dag_runs && history.result.dag_runs.length > 0) {\n            return this.getDagRun(dagId, history.result.dag_runs[0].dag_run_id);\n        }\n        const res = new MethodResult<any>();\n        res.isSuccessful = false;\n        return res;\n    }\n\n    public async getDagRunHistory(dagId: string, date?: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            let url = `${this.config.apiUrl}/dags/${dagId}/dagRuns?order_by=-start_date`;\n            \n            // If date is provided, filter runs for that specific day\n            if (date) {\n                const startDate = `${date}T00:00:00Z`;\n                const endDate = `${date}T23:59:59Z`;\n                url += `&start_date_gte=${encodeURIComponent(startDate)}&start_date_lte=${encodeURIComponent(endDate)}`;\n            }\n            \n            const response = await fetch(url, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getDagRunHistory.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async pauseDag(dagId: string, isPaused: boolean): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ is_paused: isPaused })\n            });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                //ui.showInfoMessage(`${dagId} ${isPaused ? \"PAUSED\" : \"UN-PAUSED\"}`);\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Pause Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Pause Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.pauseDag.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getSourceCode(dagId: string, fileToken?: string): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n            const headers = await this.getHeaders();\n            let url = \"\";\n            if (this.version === 'v1' && fileToken) {\n                url = `${this.config.apiUrl}/dagSources/${fileToken}`;\n            } else if (this.version === 'v2') {\n                url = `${this.config.apiUrl}/dagSources/${dagId}`;\n            } else {\n                throw new Error(\"Unknown Airflow Version or missing file token\");\n            }\n\n            const response = await fetch(url, { method: 'GET', headers });\n            \n            if (response.status === 200) {\n                if (this.version === 'v2') {\n                    const json = await response.json() as any;\n                    result.result = json.content;\n                } else {\n                    result.result = await response.text();\n                }\n                result.isSuccessful = true;\n            } else {\n                const data = await response.json();\n                ui.showApiErrorMessage(`${dagId} Source Code Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Source Code Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getSourceCode.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getImportErrors(): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/importErrors`, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getImportErrors.error', { error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n   public async getTaskInstanceLog(dagId: string, dagRunId: string, taskId: string, tryNumber: number): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            //ui.showInfoMessage('Fetching Task Logs...');\n            const headers = await this.getHeaders();\n            \n            const logRes = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}/taskInstances/${taskId}/logs/${tryNumber}`, { method: 'GET', headers });\n            const logJson = await logRes.json();\n            \n            result.result = logJson;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskInstanceLog.error', { dagId, dagRunId, taskId, tryNumber: tryNumber.toString(), error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n   public async getTaskInstanceLogText(dagId: string, dagRunId: string, taskId: string, tryNumber?: number): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n\n            if (tryNumber === undefined) {\n                //get latest try number\n                const taskInstancesResult = await this.getTaskInstances(dagId, dagRunId);\n                if (!taskInstancesResult.isSuccessful) {\n                    result.isSuccessful = false;\n                    result.error = taskInstancesResult.error;\n                    return result;\n                }\n                \n                const taskInstance = taskInstancesResult.result.task_instances.find((ti: any) => ti.task_id === taskId);\n                if (!taskInstance) {\n                    throw new Error(`Task instance not found for taskId: ${taskId}`);\n                }\n                tryNumber = taskInstance.try_number;\n            }\n            \n\n            const logJsonResult = await this.getTaskInstanceLog(dagId, dagRunId, taskId, tryNumber);\n            if (!logJsonResult.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = logJsonResult.error;\n                return result;\n            }\n            \n            const logJson = logJsonResult.result;\n            const logText = JSON.stringify(logJson, null, 2);\n\n            let logContent = '';\n            logContent +=`############################################################\\n`;\n            logContent += `Dag=${dagId}\\nDagRun=${dagRunId}\\nTaskId=${taskId}\\nTry=${tryNumber}\\n`;\n            logContent += `############################################################\\n\\n`;\n            logContent += logText;\n            \n            result.result = logContent;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskInstanceLogText.error', { dagId, dagRunId, taskId, tryNumber: tryNumber?.toString() || 'undefined', error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getLastDagRunLogText(dagId: string): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n            //ui.showInfoMessage('Fetching Latest DAG Run Logs...');\n            const history = await this.getDagRunHistory(dagId);\n            if (!history.isSuccessful || !history.result.dag_runs.length) {\n                throw new Error(\"No DAG runs found\");\n            }\n\n            const dagRunId = history.result.dag_runs[0].dag_run_id;\n            let logContent = await this.getDagRunLogText(dagId, dagRunId);\n            if (!logContent.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = logContent.error;\n                return result;\n            }\n            result.result = logContent.result;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getLastDagRunLogText.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n    \n    public async getDagRunLogText(dagId: string, dagRunId: string) : Promise<MethodResult<string>>{\n        const result = new MethodResult<string>();\n        //ui.showInfoMessage('Fetching DAG Run Logs...');\n        try {\n            const taskInstancesResult = await this.getTaskInstances(dagId, dagRunId);\n            if (!taskInstancesResult.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = taskInstancesResult.error;\n                return result;\n            }\n\n            let logContent = '';\n            for (const ti of taskInstancesResult.result.task_instances) {\n                const taskId = ti.task_id;\n                const tryNumber = ti.try_number;\n\n                const logTextResult = await this.getTaskInstanceLogText(dagId, dagRunId, taskId, tryNumber);\n                if (!logTextResult.isSuccessful) {\n                    result.isSuccessful = false;\n                    result.error = logTextResult.error;\n                    return result;\n                }\n                logContent += logTextResult.result + '\\n\\n';\n            }\n            result.result = logContent;\n            result.isSuccessful = true;\n            return result\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getDagRunLogText.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n\n    }\n\n    public async getDagInfo(dagId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}`);\n    }\n\n    public async getDagTasks(dagId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}/tasks`);\n    }\n\n    public async getTaskInstances(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}/dagRuns/${dagRunId}/taskInstances`);\n    }\n\n    public async cancelDagRun(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ state: 'failed' })\n            });\n            const data = await response.json();\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Cancel Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Cancel Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.cancelDagRun.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getTaskXComs(dagId: string, dagRunId: string, taskId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}/taskInstances/${taskId}/xcomEntries`, { method: 'GET', headers });\n            \n            if (response.status === 200) {\n                const data = await response.json();\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                const data = await response.json();\n                ui.showApiErrorMessage(`XCom fetch error for ${taskId}`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`XCom fetch error for ${taskId}`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskXComs.error', { dagId, dagRunId, taskId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async updateDagRunNote(dagId: string, dagRunId: string, note: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ note: note })\n            });\n            const data = await response.json();\n            \n            if (response.status === 200) {\n                //ui.showInfoMessage('DAG run note updated successfully');\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`Failed to update note`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`Failed to update note`, error as Error);\n            Telemetry.Current.send('AirflowApi.updateDagRunNote.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    // Add other methods as needed (getConnections, getVariables, getProviders)\n    public async getConnections(): Promise<MethodResult<any>> {\n        return this.genericGet('/connections');\n    }\n\n    public async getVariables(): Promise<MethodResult<any>> {\n        return this.genericGet('/variables');\n    }\n\n    public async getProviders(): Promise<MethodResult<any>> {\n        return this.genericGet('/providers');\n    }\n\n    public async getConfig(): Promise<MethodResult<any>> {\n        return this.genericGet('/config');\n    }\n\n    public async getPlugins(): Promise<MethodResult<any>> {\n        return this.genericGet('/plugins');\n    }\n\n    public async getHealth(): Promise<MethodResult<any>> {\n        return this.genericGet('/monitor/health');\n    }\n\n    private async genericGet(endpoint: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}${endpoint}`, { method: 'GET', headers });\n            const data = await response.json();\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`Error fetching ${endpoint}`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`Error fetching ${endpoint}`, error as Error);\n            Telemetry.Current.send('AirflowApi.genericGet.error', { endpoint, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n}","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DIAG_LOG, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nexport function createUnloadHandlerContainer() {\r\n    var handlers = [];\r\n    function _addHandler(handler) {\r\n        if (handler) {\r\n            handlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n        }\r\n    }\r\n    function _runHandlers(unloadCtx, unloadState) {\r\n        arrForEach(handlers, function (handler) {\r\n            try {\r\n                handler(unloadCtx, unloadState);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(unloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected error calling unload handler - \" + dumpObj(e));\r\n            }\r\n        });\r\n        handlers = [];\r\n    }\r\n    return {\r\n        add: _addHandler,\r\n        run: _runHandlers\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHandlerContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, dumpObj, getInst, getNavigator, getWindow, isFunction, isString, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DATA, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_LENGTH, _DYN_MESSAGE, _DYN_PUSH, _DYN_REPLACE, _DYN_STATUS, _DYN_TIMEOUT, _DYN_TO_LOWER_CASE, _DYN_URL_STRING, _DYN_VALUE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { DisabledPropertyName } from \"./Constants\";\r\nimport { _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getLocation, isBeaconsSupported, isFetchSupported, isXhrSupported, useXDomainRequest } from \"./EnvUtils\";\r\nimport { _getAllResponseHeaders, formatErrorMessageXdr, formatErrorMessageXhr, getResponseText, openXhr } from \"./HelperFuncs\";\r\nvar STR_EMPTY = \"\";\r\nvar STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar STR_POST_METHOD = \"POST\";\r\n/**\r\n * This Internal component\r\n * Manager SendPost functions\r\n * SendPostManger\r\n * @internal for internal use only\r\n */\r\nvar SenderPostManager = /** @class */ (function () {\r\n    function SenderPostManager() {\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _enableSendPromise;\r\n        var _isInitialized;\r\n        var _diagLog;\r\n        var _isOneDs;\r\n        var _onCompleteFuncs;\r\n        var _disableCredentials;\r\n        var _fetchCredentials;\r\n        var _fallbackInst;\r\n        var _disableXhr;\r\n        var _disableBeacon;\r\n        var _disableBeaconSync;\r\n        var _disableFetchKeepAlive;\r\n        var _addNoResponse;\r\n        var _timeoutWrapper;\r\n        dynamicProto(SenderPostManager, this, function (_self, _base) {\r\n            var _sendCredentials = true; // for 1ds\r\n            _initDefaults();\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, diagLog) {\r\n                _diagLog = diagLog;\r\n                if (_isInitialized) {\r\n                    _throwInternal(_diagLog, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _self.SetConfig(config);\r\n                _isInitialized = true;\r\n            };\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_isInitialized, _isOneDs, _disableCredentials, _enableSendPromise];\r\n            };\r\n            // This componet might get its config from sender, offline sender, 1ds post\r\n            // so set this function to mock dynamic changes\r\n            _self.SetConfig = function (config) {\r\n                try {\r\n                    _onCompleteFuncs = config.senderOnCompleteCallBack || {};\r\n                    _disableCredentials = !!config.disableCredentials;\r\n                    _fetchCredentials = config.fetchCredentials;\r\n                    _isOneDs = !!config.isOneDs;\r\n                    _enableSendPromise = !!config.enableSendPromise;\r\n                    _disableXhr = !!config.disableXhr;\r\n                    _disableBeacon = !!config.disableBeacon;\r\n                    _disableBeaconSync = !!config.disableBeaconSync;\r\n                    _timeoutWrapper = config.timeWrapper;\r\n                    _addNoResponse = !!config.addNoResponse;\r\n                    _disableFetchKeepAlive = !!config.disableFetchKeepAlive;\r\n                    _fallbackInst = { sendPOST: _xhrSender };\r\n                    if (!_isOneDs) {\r\n                        _sendCredentials = false; // for appInsights, set it to false always\r\n                    }\r\n                    if (_disableCredentials) {\r\n                        var location_1 = getLocation();\r\n                        if (location_1 && location_1.protocol && location_1.protocol[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"file:\") {\r\n                            // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            _sendCredentials = false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return false;\r\n            };\r\n            _self.getSyncFetchPayload = function () {\r\n                return _syncFetchPayload;\r\n            };\r\n            _self.getSenderInst = function (transports, sync) {\r\n                if (transports && transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    return _getSenderInterface(transports, sync);\r\n                }\r\n                return null;\r\n            };\r\n            _self.getFallbackInst = function () {\r\n                return _fallbackInst;\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function (unloadCtx, unloadState) {\r\n                _initDefaults();\r\n            };\r\n            _self.preparePayload = function (callback, zipPayload, payload, isSync) {\r\n                if (!zipPayload || isSync || !payload[_DYN_DATA /* @min:%2edata */]) {\r\n                    // If the request is synchronous, the body is null or undefined or Compression is not supported, we don't need to compress it\r\n                    callback(payload);\r\n                    return;\r\n                }\r\n                try {\r\n                    var csStream = getInst(\"CompressionStream\");\r\n                    if (!isFunction(csStream)) {\r\n                        callback(payload);\r\n                        return;\r\n                    }\r\n                    // Create a readable stream from the uint8 data\r\n                    var body = new ReadableStream({\r\n                        start: function (controller) {\r\n                            controller.enqueue(isString(payload[_DYN_DATA /* @min:%2edata */]) ? new TextEncoder().encode(payload[_DYN_DATA /* @min:%2edata */]) : payload[_DYN_DATA /* @min:%2edata */]);\r\n                            controller.close();\r\n                        }\r\n                    });\r\n                    var compressedStream = body.pipeThrough(new csStream(\"gzip\"));\r\n                    var reader_1 = compressedStream.getReader();\r\n                    var chunks_1 = [];\r\n                    var totalLength_1 = 0;\r\n                    var callbackCalled_1 = false;\r\n                    // Process each chunk from the compressed stream reader\r\n                    doAwaitResponse(reader_1.read(), function processChunk(response) {\r\n                        if (!callbackCalled_1 && !response.rejected) {\r\n                            // Process the chunk and continue reading\r\n                            var result = response[_DYN_VALUE /* @min:%2evalue */];\r\n                            if (!result.done) {\r\n                                // Add current chunk and continue reading\r\n                                chunks_1[_DYN_PUSH /* @min:%2epush */](result[_DYN_VALUE /* @min:%2evalue */]);\r\n                                totalLength_1 += result.value[_DYN_LENGTH /* @min:%2elength */];\r\n                                return doAwaitResponse(reader_1.read(), processChunk);\r\n                            }\r\n                            // We are complete so combine all chunks\r\n                            var combined = new Uint8Array(totalLength_1);\r\n                            var offset = 0;\r\n                            for (var _i = 0, chunks_2 = chunks_1; _i < chunks_2.length; _i++) {\r\n                                var chunk = chunks_2[_i];\r\n                                combined.set(chunk, offset);\r\n                                offset += chunk[_DYN_LENGTH /* @min:%2elength */];\r\n                            }\r\n                            // Update payload with compressed data\r\n                            payload[_DYN_DATA /* @min:%2edata */] = combined;\r\n                            payload[_DYN_HEADERS /* @min:%2eheaders */][\"Content-Encoding\"] = \"gzip\";\r\n                            payload._chunkCount = chunks_1[_DYN_LENGTH /* @min:%2elength */];\r\n                        }\r\n                        if (!callbackCalled_1) {\r\n                            // Send the processed payload to the callback, if not already called\r\n                            // If the response was rejected, we will call the callback with the original payload\r\n                            // As it only gets \"replaced\" if the compression was successful\r\n                            callbackCalled_1 = true;\r\n                            callback(payload);\r\n                        }\r\n                        // We don't need to return anything as this will cause the calling chain to be resolved and closed\r\n                    });\r\n                    // returning the reader to allow the caller to cancel the stream if needed\r\n                    // This is not a requirement but allows for better control over the stream, like if we detect that we are unloading\r\n                    // we could use reader.cancel() to stop the stream and avoid sending the request, but this may still be an asynchronous operation\r\n                    // and may not be possible to cancel the stream in time\r\n                    return reader_1;\r\n                }\r\n                catch (error) {\r\n                    // CompressionStream is not available at all\r\n                    callback(payload);\r\n                    return;\r\n                }\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(res, onComplete) {\r\n                _doOnComplete(onComplete, 200, {}, res);\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(message, onComplete) {\r\n                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _doOnComplete(onComplete, 400, {});\r\n            }\r\n            function _onNoPayloadUrl(onComplete) {\r\n                _onError(\"No endpoint url is provided for the batch\", onComplete);\r\n            }\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                var transportType = 0 /* TransportType.NotSet */;\r\n                var sendPostFunc = null;\r\n                var lp = 0;\r\n                while (sendPostFunc == null && lp < transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    transportType = transports[lp];\r\n                    if (!_disableXhr && transportType === 1 /* TransportType.Xhr */) {\r\n                        if (useXDomainRequest()) {\r\n                            // IE 8 and 9\r\n                            sendPostFunc = _xdrSender;\r\n                        }\r\n                        else if (isXhrSupported()) {\r\n                            sendPostFunc = _xhrSender;\r\n                        }\r\n                    }\r\n                    else if (transportType === 2 /* TransportType.Fetch */ && isFetchSupported(syncSupport) && (!syncSupport || !_disableFetchKeepAlive)) {\r\n                        sendPostFunc = _doFetchSender;\r\n                    }\r\n                    else if (transportType === 3 /* TransportType.Beacon */ && isBeaconsSupported() && (syncSupport ? !_disableBeaconSync : !_disableBeacon)) {\r\n                        sendPostFunc = _beaconSender;\r\n                    }\r\n                    lp++;\r\n                }\r\n                if (sendPostFunc) {\r\n                    return {\r\n                        _transport: transportType,\r\n                        _isSync: syncSupport,\r\n                        sendPOST: sendPostFunc\r\n                    };\r\n                }\r\n                return null;\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete && oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n            }\r\n            function _doBeaconSend(payload, oncomplete) {\r\n                var nav = getNavigator();\r\n                var url = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!url) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    // return true here, because we don't want to retry it with fallback sender\r\n                    return true;\r\n                }\r\n                url = payload[_DYN_URL_STRING /* @min:%2eurlString */] + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                var plainTextBatch = _isOneDs ? data : new Blob([data], { type: \"text/plain;charset=UTF-8\" });\r\n                // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                var queued = nav.sendBeacon(url, plainTextBatch);\r\n                return queued;\r\n            }\r\n            /**\r\n             * Send Beacon API request\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - not used\r\n             * Note: Beacon API does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _beaconSender(payload, oncomplete, sync) {\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                try {\r\n                    if (data) {\r\n                        // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                        if (!_doBeaconSend(payload, oncomplete)) {\r\n                            var onRetry = _onCompleteFuncs && _onCompleteFuncs.beaconOnRetry;\r\n                            if (onRetry && isFunction(onRetry)) {\r\n                                onRetry(payload, oncomplete, _doBeaconSend);\r\n                            }\r\n                            else {\r\n                                _fallbackInst && _fallbackInst.sendPOST(payload, oncomplete, true);\r\n                                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            // if can send\r\n                            _onSuccess(STR_EMPTY, oncomplete); // if success, onComplete is called with status code 200\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _isOneDs && _warnToConsole(_diagLog, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(e));\r\n                    _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, STR_EMPTY);\r\n                }\r\n                return;\r\n            }\r\n            /**\r\n             * Send XMLHttpRequest\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - Indicates if the request should be sent synchronously\r\n             */\r\n            function _xhrSender(payload, oncomplete, sync) {\r\n                //let  internalPayload = payload as IInternalPayloadData;\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (_isOneDs && sync && payload.disableXhrSync) {\r\n                    sync = false;\r\n                }\r\n                //const xhr = new XMLHttpRequest();\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                var xhr = openXhr(STR_POST_METHOD, endPointUrl, _sendCredentials, true, sync, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                if (!_isOneDs) {\r\n                    // application/json should NOT add to 1ds post by default\r\n                    xhr.setRequestHeader(\"Content-type\", \"application/json\");\r\n                }\r\n                arrForEach(objKeys(headers), function (headerName) {\r\n                    xhr.setRequestHeader(headerName, headers[headerName]);\r\n                });\r\n                xhr.onreadystatechange = function () {\r\n                    if (!_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                        if (xhr.readyState === 4) {\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }\r\n                };\r\n                xhr.onload = function () {\r\n                    if (_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                    }\r\n                };\r\n                function _doOnReadyFunc(xhr) {\r\n                    var onReadyFunc = _onCompleteFuncs && _onCompleteFuncs.xhrOnComplete;\r\n                    var onReadyFuncExist = onReadyFunc && isFunction(onReadyFunc);\r\n                    if (onReadyFuncExist) {\r\n                        onReadyFunc(xhr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        var response = getResponseText(xhr);\r\n                        _doOnComplete(oncomplete, xhr[_DYN_STATUS /* @min:%2estatus */], _getAllResponseHeaders(xhr, _isOneDs), response);\r\n                    }\r\n                }\r\n                xhr.onerror = function (event) {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 400, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    rejectFunc && rejectFunc(event);\r\n                };\r\n                xhr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 500, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    resolveFunc && resolveFunc(false);\r\n                };\r\n                xhr.send(payload[_DYN_DATA /* @min:%2edata */]);\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send fetch API request\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - For fetch this identifies whether we are \"unloading\" (false) or a normal request\r\n             */\r\n            function _doFetchSender(payload, oncomplete, sync) {\r\n                var _a;\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                var batch = payload[_DYN_DATA /* @min:%2edata */];\r\n                var plainTextBatch = _isOneDs ? batch : new Blob([batch], { type: \"application/json\" });\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var requestHeaders = new Headers();\r\n                var batchLength = batch[_DYN_LENGTH /* @min:%2elength */];\r\n                var ignoreResponse = false;\r\n                var responseHandled = false;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                //TODO: handle time out for 1ds\r\n                var init = (_a = {\r\n                        method: STR_POST_METHOD,\r\n                        body: plainTextBatch\r\n                    },\r\n                    _a[DisabledPropertyName] = true // Mark so we don't attempt to track this request\r\n                ,\r\n                    _a);\r\n                // Only add headers if there are headers to add, due to issue with some polyfills\r\n                if (payload.headers && objKeys(payload.headers)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(objKeys(headers), function (headerName) {\r\n                        requestHeaders.append(headerName, headers[headerName]);\r\n                    });\r\n                    init[_DYN_HEADERS /* @min:%2eheaders */] = requestHeaders;\r\n                }\r\n                if (_fetchCredentials) { // if user passed in this value via post channel (1ds), then use it\r\n                    init.credentials = _fetchCredentials;\r\n                }\r\n                else if (_sendCredentials && _isOneDs) {\r\n                    // for 1ds, Don't send credentials when URL is file://\r\n                    init.credentials = \"include\";\r\n                }\r\n                if (sync) {\r\n                    init.keepalive = true;\r\n                    _syncFetchPayload += batchLength;\r\n                    if (_isOneDs) {\r\n                        if (payload[\"_sendReason\"] === 2 /* SendRequestReason.Unload */) {\r\n                            // As a sync request (during unload), it is unlikely that we will get a chance to process the response so\r\n                            // just like beacon send assume that the events have been accepted and processed\r\n                            ignoreResponse = true;\r\n                            if (_addNoResponse) {\r\n                                endPointUrl += _noResponseQs;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // for appinsights, set to true for all sync request\r\n                        ignoreResponse = true;\r\n                    }\r\n                }\r\n                var request = new Request(endPointUrl, init);\r\n                try {\r\n                    // Also try and tag the request (just in case the value in init is not copied over)\r\n                    request[DisabledPropertyName] = true;\r\n                }\r\n                catch (e) {\r\n                    // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n                    // cause the request to fail and we no telemetry would be sent\r\n                }\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                function _handleError(res, statusCode) {\r\n                    // In case there is an error in the request. Set the status to 0 for 1ds and 400 for appInsights\r\n                    // so that the events can be retried later.\r\n                    if (statusCode) {\r\n                        _doOnComplete(oncomplete, _isOneDs ? 0 : statusCode, {}, _isOneDs ? STR_EMPTY : res);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, _isOneDs ? STR_EMPTY : res);\r\n                    }\r\n                }\r\n                function _onFetchComplete(response, payload, value) {\r\n                    var status = response[_DYN_STATUS /* @min:%2estatus */];\r\n                    var onCompleteFunc = _onCompleteFuncs.fetchOnComplete;\r\n                    if (onCompleteFunc && isFunction(onCompleteFunc)) {\r\n                        onCompleteFunc(response, oncomplete, value || STR_EMPTY, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, status, {}, value || STR_EMPTY);\r\n                    }\r\n                }\r\n                try {\r\n                    doAwaitResponse(fetch(_isOneDs ? endPointUrl : request, _isOneDs ? init : null), function (result) {\r\n                        if (sync) {\r\n                            _syncFetchPayload -= batchLength;\r\n                            batchLength = 0;\r\n                        }\r\n                        if (!responseHandled) {\r\n                            responseHandled = true;\r\n                            if (!result.rejected) {\r\n                                var response_1 = result[_DYN_VALUE /* @min:%2evalue */];\r\n                                try {\r\n                                    /**\r\n                                     * The Promise returned from fetch() wont reject on HTTP error status even if the response is an HTTP 404 or 500.\r\n                                     * Instead, it will resolve normally (with ok status set to false), and it will only reject on network failure\r\n                                     * or if anything prevented the request from completing.\r\n                                     */\r\n                                    if (!_isOneDs && !response_1.ok) {\r\n                                        // this is for appInsights only\r\n                                        if (response_1[_DYN_STATUS /* @min:%2estatus */]) {\r\n                                            _handleError(response_1.statusText, response_1[_DYN_STATUS /* @min:%2estatus */]);\r\n                                        }\r\n                                        else {\r\n                                            _handleError(response_1.statusText, 499);\r\n                                        }\r\n                                        resolveFunc && resolveFunc(false);\r\n                                    }\r\n                                    else {\r\n                                        if (_isOneDs && !response_1.body) {\r\n                                            _onFetchComplete(response_1, null, STR_EMPTY);\r\n                                            resolveFunc && resolveFunc(true);\r\n                                        }\r\n                                        else {\r\n                                            doAwaitResponse(response_1.text(), function (resp) {\r\n                                                _onFetchComplete(response_1, payload, resp[_DYN_VALUE /* @min:%2evalue */]);\r\n                                                resolveFunc && resolveFunc(true);\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                    if (response_1 && response_1[_DYN_STATUS /* @min:%2estatus */]) {\r\n                                        _handleError(dumpObj(e), response_1[_DYN_STATUS /* @min:%2estatus */]);\r\n                                    }\r\n                                    else {\r\n                                        _handleError(dumpObj(e), 499);\r\n                                    }\r\n                                    rejectFunc && rejectFunc(e);\r\n                                }\r\n                            }\r\n                            else {\r\n                                _handleError(result.reason && result.reason[_DYN_MESSAGE /* @min:%2emessage */], 499);\r\n                                rejectFunc && rejectFunc(result.reason);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    if (!responseHandled) {\r\n                        _handleError(dumpObj(e), 499);\r\n                        rejectFunc && rejectFunc(e);\r\n                    }\r\n                }\r\n                if (ignoreResponse && !responseHandled) {\r\n                    // Assume success during unload processing as we most likely won't get the response\r\n                    responseHandled = true;\r\n                    _doOnComplete(oncomplete, 200, {});\r\n                    resolveFunc && resolveFunc(true);\r\n                }\r\n                if (_isOneDs && !responseHandled && payload[_DYN_TIMEOUT /* @min:%2etimeout */] > 0) {\r\n                    // Simulate timeout\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        if (!responseHandled) {\r\n                            // Assume a 500 response (which will cause a retry)\r\n                            responseHandled = true;\r\n                            _doOnComplete(oncomplete, 500, {});\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                }\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send XDomainRequest\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - Indicates if the request should be sent synchronously\r\n             *\r\n             * Note: XDomainRequest does not support sync requests. This 'isAsync' parameter is added\r\n             * to maintain consistency with the xhrSender's contract\r\n             * Note: XDomainRequest does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _xdrSender(payload, oncomplete, sync) {\r\n                // It doesn't support custom headers, so no action is taken with current requestHeaders\r\n                var _window = getWindow();\r\n                var xdr = new XDomainRequest();\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                xdr.onload = function () {\r\n                    var response = getResponseText(xdr);\r\n                    var onloadFunc = _onCompleteFuncs && _onCompleteFuncs.xdrOnComplete;\r\n                    if (onloadFunc && isFunction(onloadFunc)) {\r\n                        onloadFunc(xdr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, 200, {}, response);\r\n                    }\r\n                };\r\n                xdr.onerror = function () {\r\n                    _doOnComplete(oncomplete, 400, {}, _isOneDs ? STR_EMPTY : formatErrorMessageXdr(xdr));\r\n                };\r\n                xdr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, 500, {});\r\n                };\r\n                xdr.onprogress = function () { };\r\n                // XDomainRequest requires the same protocol as the hosting page.\r\n                // If the protocol doesn't match, we can't send the telemetry :(.\r\n                var hostingProtocol = _window && _window.location && _window.location.protocol || \"\";\r\n                var endpoint = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endpoint) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    return;\r\n                }\r\n                if (!_isOneDs && endpoint.lastIndexOf(hostingProtocol, 0) !== 0) {\r\n                    var msg = \"Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.\";\r\n                    _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + msg);\r\n                    _onError(msg, oncomplete);\r\n                    return;\r\n                }\r\n                var endpointUrl = _isOneDs ? endpoint : endpoint[_DYN_REPLACE /* @min:%2ereplace */](/^(https?:)/, \"\");\r\n                xdr.open(STR_POST_METHOD, endpointUrl);\r\n                if (payload[_DYN_TIMEOUT /* @min:%2etimeout */]) {\r\n                    xdr[_DYN_TIMEOUT /* @min:%2etimeout */] = payload[_DYN_TIMEOUT /* @min:%2etimeout */];\r\n                }\r\n                xdr.send(data);\r\n                if (_isOneDs && sync) {\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        xdr.send(data);\r\n                    }, 0);\r\n                }\r\n                else {\r\n                    xdr.send(data);\r\n                }\r\n            }\r\n            function _initDefaults() {\r\n                _syncFetchPayload = 0;\r\n                _isInitialized = false;\r\n                _enableSendPromise = false;\r\n                _diagLog = null;\r\n                _isOneDs = null;\r\n                _onCompleteFuncs = null;\r\n                _disableCredentials = null;\r\n                _fetchCredentials = null;\r\n                _fallbackInst = null;\r\n                _disableXhr = false;\r\n                _disableBeacon = false;\r\n                _disableBeaconSync = false;\r\n                _disableFetchKeepAlive = false;\r\n                _addNoResponse = false;\r\n                _timeoutWrapper = null;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for SenderPostManager.prototype.initialize.\r\n// Removed Stub for SenderPostManager.prototype.getSyncFetchPayload.\r\n// Removed Stub for SenderPostManager.prototype.SetConfig.\r\n// Removed Stub for SenderPostManager.prototype.getSenderInst.\r\n// Removed Stub for SenderPostManager.prototype.getFallbackInst.\r\n// Removed Stub for SenderPostManager.prototype._doTeardown.\r\n// Removed Stub for SenderPostManager.prototype.preparePayload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    SenderPostManager.__ieDyn=1;\n\n    return SenderPostManager;\r\n}());\r\nexport { SenderPostManager };\r\n//# sourceMappingURL=SenderPostManager.js.map","module.exports = require(\"os\");","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_DEFAULT_ENDPOINT_URL = \"https://browser.events.data.microsoft.com/OneCollector/1.0/\";\r\nexport var STR_VERSION = \"version\";\r\nexport var STR_PROPERTIES = \"properties\";\r\n//# sourceMappingURL=InternalConstants.js.map","/* eslint-disable @typescript-eslint/naming-convention */\n\nexport class MethodResult<T> {\n    public result: T;\n    public isSuccessful: boolean;\n    public error: Error;\n    constructor() {\n        this.result = undefined as unknown as T;\n        this.isSuccessful = false;\n        this.error = undefined;\n    }\n}","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isArray, isDefined, isNullOrUndefined, isObject, isPlainObject, isUndefined, objForEachKey, objHasOwn } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nfunction _isConfigDefaults(value) {\r\n    return (value && isObject(value) && !isArray(value) && (value.isVal || value.fb || objHasOwn(value, \"v\") || objHasOwn(value, \"mrg\") || objHasOwn(value, \"ref\") || value.set));\r\n}\r\nfunction _getDefault(dynamicHandler, theConfig, cfgDefaults) {\r\n    var defValue;\r\n    var isDefaultValid = cfgDefaults.dfVal || isDefined;\r\n    // There is a fallback config key so try and grab that first\r\n    if (theConfig && cfgDefaults.fb) {\r\n        var fallbacks = cfgDefaults.fb;\r\n        if (!isArray(fallbacks)) {\r\n            fallbacks = [fallbacks];\r\n        }\r\n        for (var lp = 0; lp < fallbacks[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            var fallback = fallbacks[lp];\r\n            var fbValue = theConfig[fallback];\r\n            if (isDefaultValid(fbValue)) {\r\n                defValue = fbValue;\r\n            }\r\n            else if (dynamicHandler) {\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                fbValue = dynamicHandler.cfg[fallback];\r\n                if (isDefaultValid(fbValue)) {\r\n                    defValue = fbValue;\r\n                }\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                dynamicHandler.set(dynamicHandler.cfg, asString(fallback), fbValue);\r\n            }\r\n            if (isDefaultValid(defValue)) {\r\n                // We have a valid default so break out of the look\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // If the value is still not defined and we have a default value then use that\r\n    if (!isDefaultValid(defValue) && isDefaultValid(cfgDefaults.v)) {\r\n        defValue = cfgDefaults.v;\r\n    }\r\n    return defValue;\r\n}\r\n/**\r\n * Recursively resolve the default value\r\n * @param dynamicHandler\r\n * @param theConfig\r\n * @param cfgDefaults\r\n * @returns\r\n */\r\nfunction _resolveDefaultValue(dynamicHandler, theConfig, cfgDefaults) {\r\n    var theValue = cfgDefaults;\r\n    if (cfgDefaults && _isConfigDefaults(cfgDefaults)) {\r\n        theValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    if (theValue) {\r\n        if (_isConfigDefaults(theValue)) {\r\n            theValue = _resolveDefaultValue(dynamicHandler, theConfig, theValue);\r\n        }\r\n        var newValue_1;\r\n        if (isArray(theValue)) {\r\n            newValue_1 = [];\r\n            newValue_1[_DYN_LENGTH /* @min:%2elength */] = theValue[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(theValue)) {\r\n            newValue_1 = {};\r\n        }\r\n        if (newValue_1) {\r\n            objForEachKey(theValue, function (key, value) {\r\n                if (value && _isConfigDefaults(value)) {\r\n                    value = _resolveDefaultValue(dynamicHandler, theConfig, value);\r\n                }\r\n                newValue_1[key] = value;\r\n            });\r\n            theValue = newValue_1;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Applies the default value on the config property and makes sure that it's dynamic\r\n * @param theConfig\r\n * @param name\r\n * @param defaultValue\r\n */\r\nexport function _applyDefaultValue(dynamicHandler, theConfig, name, defaultValue) {\r\n    // Resolve the initial config value from the provided value or use the defined default\r\n    var isValid;\r\n    var setFn;\r\n    var defValue;\r\n    var cfgDefaults = defaultValue;\r\n    var mergeDf;\r\n    var reference;\r\n    var readOnly;\r\n    var blkDynamicValue;\r\n    if (_isConfigDefaults(cfgDefaults)) {\r\n        // looks like a IConfigDefault\r\n        isValid = cfgDefaults.isVal;\r\n        setFn = cfgDefaults.set;\r\n        readOnly = cfgDefaults.rdOnly;\r\n        blkDynamicValue = cfgDefaults.blkVal;\r\n        mergeDf = cfgDefaults.mrg;\r\n        reference = cfgDefaults.ref;\r\n        if (!reference && isUndefined(reference)) {\r\n            reference = !!mergeDf;\r\n        }\r\n        defValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    else {\r\n        defValue = defaultValue;\r\n    }\r\n    if (blkDynamicValue) {\r\n        // Mark the property so that any value assigned will be blocked from conversion, we need to do this\r\n        // before assigning or fetching the value to ensure it's not converted\r\n        dynamicHandler.blkVal(theConfig, name);\r\n    }\r\n    // Set the value to the default value;\r\n    var theValue;\r\n    var usingDefault = true;\r\n    var cfgValue = theConfig[name];\r\n    // try and get and user provided values\r\n    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n        // Use the defined theConfig[name] value\r\n        theValue = cfgValue;\r\n        usingDefault = false;\r\n        // The values are different and we have a special default value check, which is used to\r\n        // override config values like empty strings to continue using the default\r\n        if (isValid && theValue !== defValue && !isValid(theValue)) {\r\n            theValue = defValue;\r\n            usingDefault = true;\r\n        }\r\n        if (setFn) {\r\n            theValue = setFn(theValue, defValue, theConfig);\r\n            usingDefault = theValue === defValue;\r\n        }\r\n    }\r\n    if (!usingDefault) {\r\n        if (isPlainObject(theValue) || isArray(defValue)) {\r\n            // we are using the user supplied value and it's an object\r\n            if (mergeDf && defValue && (isPlainObject(defValue) || isArray(defValue))) {\r\n                // Resolve/apply the defaults\r\n                objForEachKey(defValue, function (dfName, dfValue) {\r\n                    // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                    _applyDefaultValue(dynamicHandler, theValue, dfName, dfValue);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    else if (defValue) {\r\n        // Just resolve the default\r\n        theValue = _resolveDefaultValue(dynamicHandler, theConfig, defValue);\r\n    }\r\n    else {\r\n        theValue = defValue;\r\n    }\r\n    // if (theValue && usingDefault && (isPlainObject(theValue) || isArray(theValue))) {\r\n    //     theValue = _cfgDeepCopy(theValue);\r\n    // }\r\n    // Needed to ensure that the (potentially) new field is dynamic even if null/undefined\r\n    dynamicHandler.set(theConfig, name, theValue);\r\n    if (reference) {\r\n        dynamicHandler.ref(theConfig, name);\r\n    }\r\n    if (readOnly) {\r\n        dynamicHandler.rdOnly(theConfig, name);\r\n    }\r\n}\r\n//# sourceMappingURL=ConfigDefaults.js.map","/**\n * GetDagHistoryTool - Language Model Tool for retrieving DAG run history\n * \n * This tool retrieves the run history for a specific DAG, optionally filtered by date.\n * Returns date of run, status, duration, and notes for each run.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport * as ui from '../common/UI';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying DAG history\n */\nexport interface IGetDagHistoryParams {\n    dagId: string;\n    date?: string; // Optional date in YYYY-MM-DD format (defaults to today)\n}\n\n/**\n * GetDagHistoryTool - Implements vscode.LanguageModelTool for retrieving DAG history\n */\nexport class GetDagHistoryTool implements vscode.LanguageModelTool<IGetDagHistoryParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, date } = options.input;\n        const dateStr = date || ui.toISODateString(new Date());\n\n        return {\n            invocationMessage: `Retrieving history for DAG '${dagId}' (date: ${dateStr})`\n        };\n    }\n\n    /**\n     * Execute the query for DAG history\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagHistoryTool.invoke');\n        \n        // Use today's date if not provided\n        const queryDate = date ||  ui.toISODateString(new Date());\n\n        try {\n            // Get DAG run history from the API\n            const result = await this.client.getDagRunHistory(dagId, queryDate);\n\n            if (!result || !result.dag_runs || result.dag_runs.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No run history found for DAG '${dagId}' on ${queryDate}.`)\n                ]);\n            }\n\n            const runs = result.dag_runs;\n\n            // Build detailed summary\n            let summaryMessage = `##  DAG Run History for '${dagId}'\\n\\n`;\n            summaryMessage += `**Date Filter:** ${queryDate}\\n`;\n            summaryMessage += `**Total Runs:** ${runs.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details in a table-like format\n            summaryMessage += `| # | Date/Time | Status | Duration | Note |\\n`;\n            summaryMessage += `|---|-----------|--------|----------|------|\\n`;\n\n            runs.forEach((run: any, index: number) => {\n                const runDate = run.execution_date || run.logical_date || 'N/A';\n                const status = this.getStatusEmoji(run.state) + ' ' + (run.state || 'unknown');\n                \n                let duration = 'N/A';\n                if (run.start_date && run.end_date) {\n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    duration = `${minutes}m ${seconds}s`;\n                } else if (run.start_date && !run.end_date) {\n                    duration = ' Running';\n                }\n                \n                const note = run.note || '-';\n                \n                summaryMessage += `| ${index + 1} | ${runDate} | ${status} | ${duration} | ${note} |\\n`;\n            });\n\n            summaryMessage += `\\n---\\n\\n`;\n\n            // Add detailed breakdown\n            summaryMessage += `### Detailed Breakdown\\n\\n`;\n            \n            runs.forEach((run: any, index: number) => {\n                summaryMessage += `#### ${index + 1}. Run ID: ${run.dag_run_id || run.run_id}\\n\\n`;\n                summaryMessage += `- **Status:** ${this.getStatusEmoji(run.state)} ${run.state || 'unknown'}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date || run.logical_date}\\n`;\n                summaryMessage += `- **Logical Date:** ${run.logical_date || run.execution_date}\\n`;\n                \n                if (run.start_date) {\n                    summaryMessage += `- **Start Date:** ${run.start_date}\\n`;\n                }\n                if (run.end_date) {\n                    summaryMessage += `- **End Date:** ${run.end_date}\\n`;\n                    \n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    summaryMessage += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n                }\n                \n                if (run.note) {\n                    summaryMessage += `- **Note:** ${run.note}\\n`;\n                }\n                \n                if (run.conf && Object.keys(run.conf).length > 0) {\n                    summaryMessage += `- **Configuration:** \\`${JSON.stringify(run.conf)}\\`\\n`;\n                }\n                \n                summaryMessage += `\\n`;\n            });\n\n            // Include raw JSON for LLM processing\n            summaryMessage += `---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(runs, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to retrieve DAG history\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The date format is YYYY-MM-DD\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagHistoryTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Helper to get emoji for run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","module.exports = require(\"vscode\");","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as tmp from 'tmp';\nimport * as fs from 'fs';\nimport * as ui from '../common/UI';\nimport { DagTreeView } from \"./DagTreeView\";\nimport * as MessageHub from '../common/MessageHub';\nimport { Session } from '../common/Session';\nimport { AIHandler } from '../language_tools/AIHandler';\nimport { DagLogView } from '../report/DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagView {\n    public static Current: DagView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n\n\n    public dagId: string;\n    public dagRunId: string | undefined;\n\n    private dagJson: any;\n    private dagRunJson: any;\n    private dagRunHistoryJson: any;\n    private dagTaskInstancesJson: any;\n    private dagTasksJson: any;\n    private dagHistorySelectedDate: string | undefined = ui.toISODateString(new Date());\n\n    private dagStatusInterval: NodeJS.Timeout | undefined;\n    private activetabid: string = \"tab-1\";\n\n    private constructor(panel: vscode.WebviewPanel, dagId: string, dagRunId?: string) {\n        ui.logToOutput('DagView.constructor Started');\n        Telemetry.Current.send('dagView.constructor.called');\n\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadAllDagData();\n        ui.logToOutput('DagView.constructor Completed');\n    }\n\n    private resetDagData(){\n        this.activetabid = \"tab-1\";\n        this.dagJson = undefined;\n        this.dagRunJson = undefined;\n        this.dagRunHistoryJson = undefined;\n        this.dagTaskInstancesJson = undefined;\n        this.dagTasksJson = undefined;\n        this.stopCheckingDagRunStatus();\n    }\n\n    private async loadAllDagData() {\n        ui.logToOutput('DagView.loadAllDagData Started');\n        Telemetry.Current.send('dagView.loadAllDagData.called');\n\n        await this.getDagInfo();\n        if (this.dagRunId) {\n            await this.getDagRun();\n        }\n        else {\n            await this.getLastRun();\n        }\n        await this.getDagTasks();\n        //await this.getRunHistory();\n        await this.renderHmtl();\n    }\n\n    public async loadDagInfoOnly() {\n        ui.logToOutput('DagView.loadDagInfoOnly Started');\n        Telemetry.Current.send('dagView.loadDagInfoOnly.called');\n\n        await this.getDagInfo();\n        await this.renderHmtl();\n    }\n\n    private async renderHmtl() {\n        ui.logToOutput('DagView.renderHmtl Started');\n        Telemetry.Current.send('dagView.renderHmtl.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        //ui.showOutputMessage(this._panel.webview.html);\n        ui.logToOutput('DagView.renderHmtl Completed');\n    }\n\n    public static render(dagId: string, dagRunId?: string) {\n        ui.logToOutput('DagView.render Started');\n        Telemetry.Current.send('dagView.render.called');\n\n        if (DagView.Current) {\n            DagView.Current.dagId = dagId;\n            DagView.Current.dagRunId = dagRunId;\n            DagView.Current._panel.reveal(vscode.ViewColumn.Two);\n            DagView.Current.resetDagData();\n            DagView.Current.loadAllDagData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagView\", \"Dag View\", vscode.ViewColumn.Two, {\n                enableScripts: true,\n            });\n\n\n            DagView.Current = new DagView(panel, dagId, dagRunId);\n        }\n    }\n\n    /**\n     * Helper method to create a temp file and open it\n     */\n    private createAndOpenTempFile(content: string, prefix: string, extension: string): void {\n        const tmpFile = tmp.fileSync({ mode: 0o644, prefix, postfix: extension });\n        fs.appendFileSync(tmpFile.name, content);\n        ui.openFile(tmpFile.name);\n    }\n\n    private async getLastRun() {\n        ui.logToOutput('DagView.getLastRun Started');\n        Telemetry.Current.send('dagView.getLastRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getLastDagRun(this.dagId);\n        if (result.isSuccessful) {\n            this.dagRunJson = result.result;\n            this.dagRunId = this.dagRunJson.dag_run_id;\n            this.getTaskInstances();\n\n            if(this.dagRunJson && this.dagRunJson.state === \"running\" )\n            {\n                this.startCheckingDagRunStatus();\n            }\n        }\n\n    }\n\n    public goToDagRun(dagId: string, dagRunId: string) {\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this.getDagRun();\n    }\n\n    public goToDag(dagId: string) {\n        this.dagId = dagId;\n        this.dagRunId = undefined;\n        this.getLastRun();\n    }\n    private async getDagRun() {\n        ui.logToOutput('DagView.getDagRun Started');\n        Telemetry.Current.send('dagView.getDagRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getDagRun(this.dagId, this.dagRunId);\n        if (result.isSuccessful) {\n            this.dagRunJson = result.result;\n            this.dagRunId = this.dagRunJson.dag_run_id;\n            this.getTaskInstances();\n        }\n        await this.renderHmtl();\n    }\n\n    private async getRunHistory(date?: string) {\n        ui.logToOutput('DagView.getRunHistory Started');\n        Telemetry.Current.send('dagView.getRunHistory.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagRunHistory(this.dagId, date);\n        if (result.isSuccessful) {\n            this.dagRunHistoryJson = result.result;\n        }\n\n    }\n\n    private async getTaskInstances() {\n        ui.logToOutput('DagView.getTaskInstances Started');\n        Telemetry.Current.send('dagView.getTaskInstances.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getTaskInstances(this.dagId, this.dagRunId);\n\n        if (result.isSuccessful) {\n            this.dagTaskInstancesJson = result.result;\n        }\n\n    }\n\n    private async getDagInfo() {\n        ui.logToOutput('DagView.getDagInfo Started');\n        Telemetry.Current.send('dagView.getDagInfo.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagInfo(this.dagId);\n        if (result.isSuccessful) {\n            this.dagJson = result.result;\n        }\n    }\n\n    private async getDagTasks() {\n        ui.logToOutput('DagView.getDagTasks Started');\n        Telemetry.Current.send('dagView.getDagTasks.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagTasks(this.dagId);\n        if (result.isSuccessful) {\n            this.dagTasksJson = result.result;\n        }\n    }\n\n    private dispose() {\n        ui.logToOutput('DagView.dispose Started');\n        Telemetry.Current.send('dagView.dispose.called');\n\n        DagView.Current = undefined;\n\n        // stop any running interval checks\n        this.stopCheckingDagRunStatus();\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagView._getWebviewContent Started');\n        Telemetry.Current.send('dagView.getWebviewContent.called');\n\n        //file URIs\n        const toolkitUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\", \n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        //LATEST DAG RUN\n        let state:string = \"\";\n        let logical_date:Date | undefined = undefined;\n        let start_date:Date | undefined = undefined;\n        let end_date:Date | undefined = undefined;\n        let logical_date_string:string = \"\";\n        let start_date_string:string = \"\";\n        let duration:string = \"\";\n        let isDagRunning:boolean = false;\n        let hasDagRun:boolean = false;\n\n        if(this.dagRunJson){\n            state = this.dagRunJson.state;\n            logical_date = this.dagRunJson.logical_date;\n            start_date = this.dagRunJson.start_date;\n            end_date = this.dagRunJson.end_date;\n            logical_date_string = logical_date ? ui.toISODateTimeString(new Date(logical_date)) : \"\";\n            start_date_string = start_date ? ui.toISODateTimeString(new Date(start_date)) : \"\";\n            duration = start_date ? ui.getDuration(new Date(start_date), end_date ? new Date(end_date) : new Date()) : \"\";\n            isDagRunning = (state === \"queued\" || state === \"running\") ? true : false;\n            hasDagRun = true;\n        }\n\n        let runningOrFailedTasks: string = \"\";\n        if (this.dagTaskInstancesJson) {\n            for (const t of this.dagTaskInstancesJson[\"task_instances\"]) {\n                if(t.state === \"running\" || t.state === \"failed\" || t.state === \"up_for_retry\" || t.state === \"up_for_reschedule\" || t.state === \"deferred\")\n                {\n                    runningOrFailedTasks += `<span class=\"task-tag state-${t.state}\">${t.task_id}</span> `;\n                }\n            }\n        }\n\n        //INFO TAB\n        let owners = (this.dagJson && Array.isArray(this.dagJson[\"owners\"])) ? this.dagJson[\"owners\"].join(\", \") : \"\";\n        let tags: string = \"\";\n        if (this.dagJson && Array.isArray(this.dagJson[\"tags\"])) {\n            this.dagJson[\"tags\"].forEach((item: any) => { tags += `<span class=\"tag\">${item.name}</span> `; });\n        }\n        let schedule = (this.dagJson && this.dagJson[\"timetable_description\"]) ? this.dagJson[\"timetable_description\"] + \" - \" + this.dagJson[\"timetable_summary\"]: \"\";\n        let next_run = (this.dagJson && this.dagJson[\"next_dagrun_data_interval_start\"]) ? ui.toISODateTimeString(new Date(this.dagJson[\"next_dagrun_data_interval_start\"])) : \"None\";\n        let isPausedText = (this.dagJson) ? (this.dagJson.is_paused ? \"true\" : \"false\") : \"unknown\";\n        let isPaused = isPausedText === \"true\";\n        \n        //TASKS TAB\n        let taskRows: string = \"\";\n        if (this.dagTaskInstancesJson) {\n            for (const t of this.dagTaskInstancesJson[\"task_instances\"].sort((a: any, b: any) => (a.start_date > b.start_date) ? 1 : -1)) {\n                taskRows += `\n                <tr class=\"table-row\">\n                    <td>\n                        <div style=\"display: flex; align-items: center;\">\n                            <div class=\"state-indicator state-${t.state}\" title=\"${t.state}\" ></div>\n                            <span class=\"task-name\">${t.task_id}</span> <span class=\"try-number\">(${t.try_number})</span>\n                        </div>\n                    </td>\n                    <td>\n                        <div class=\"action-links\">\n                            <a href=\"#\" class=\"link-button\" id=\"task-log-link-${t.task_id}\">Logs</a>\n                            <a href=\"#\" class=\"link-button\" id=\"task-xcom-link-${t.task_id}\">XComs</a>\n                        </div>\n                    </td>\n                    <td><span class=\"duration-badge\">${ui.getDuration(new Date(t.start_date), new Date(t.end_date))}</span></td>\n                    <td class=\"operator-type\">${t.operator}</td>\n                </tr>\n                `;\n            }\n        }\n\n        // BUILD TASK DEPENDENCY TREE\n        let taskDependencyTree: string = \"\";\n        if (this.dagTasksJson && this.dagTasksJson.tasks && this.dagTasksJson.tasks.length > 0) {\n            taskDependencyTree = this.buildTaskDependencyTree(this.dagTasksJson.tasks);\n        }\n\n        //HISTORY TAB\n        let runHistoryRows: string = \"\";\n        if (this.dagRunHistoryJson) {\n            for (const t of this.dagRunHistoryJson[\"dag_runs\"]) {\n                runHistoryRows += `\n                <tr class=\"table-row\">\n                    <td>\n                        <div style=\"display: flex; align-items: center;\">\n                            <div class=\"state-indicator state-${t.state}\" title=\"${t.state}\"></div>\n                            <span class=\"state-text\">${t.state}</span>\n                        </div>\n                    </td>\n                    <td><a href=\"#\" class=\"history-link\" id=\"history-dag-run-id-${t.dag_run_id}\">${ui.toISODateTimeString(new Date(t.start_date))}</a></td>\n                    <td><span class=\"duration-badge\">${ui.getDuration(new Date(t.start_date), new Date(t.end_date))}</span></td>\n                    <td><span class=\"note-text\">${t.note || ''}</span></td>\n                </tr>\n                `;\n            }\n        }\n\n\n        let result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${toolkitUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n            }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            /* Header Section */\n            .header-container {\n                display: flex;\n                align-items: center;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                padding-bottom: var(--spacing-md);\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            .dag-paused-indicator {\n                width: 12px;\n                height: 12px;\n                border-radius: 50%;\n            }\n            .dag-paused-true { background-color: var(--vscode-disabledForeground); }\n            .dag-paused-false { background-color: var(--vscode-testing-iconPassed); }\n\n            /* Tabs */\n            vscode-tabs {\n                border-radius: var(--border-radius);\n            }\n\n            section {\n                padding: 20px 0;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n            }\n            \n            th.section-header {\n                font-size: 13px;\n                color: var(--vscode-editor-foreground);\n                background-color: transparent;\n                border-bottom: 2px solid var(--vscode-button-background);\n                padding-bottom: 8px;\n                padding-left: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* Detail Layouts */\n            .detail-row td:first-child {\n                width: 120px;\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n            }\n            .detail-row td:nth-child(2) {\n                width: 20px;\n                text-align: center;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            /* States & Badges */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Map existing state classes to colors if possible, or assume external CSS handles it */\n            \n            .task-tag {\n                display: inline-block;\n                padding: 2px 8px;\n                background-color: var(--vscode-badge-background);\n                color: var(--vscode-badge-foreground);\n                border-radius: 12px;\n                font-size: 11px;\n                margin-right: 4px;\n                margin-bottom: 4px;\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 12px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .operator-type {\n                font-style: italic;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            .try-number {\n                font-size: 11px;\n                color: var(--vscode-descriptionForeground);\n                margin-left: 4px;\n            }\n\n            .action-links {\n                display: flex;\n                gap: 12px;\n            }\n\n            .link-button {\n                font-size: 12px;\n            }\n\n            /* Inputs */\n            input[type=\"date\"], vscode-textfield, vscode-textarea {\n                width: 100%;\n                box-sizing: border-box;\n                font-family: inherit;\n            }\n            input[type=\"date\"] {\n                padding: 6px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 2px;\n            }\n\n            vscode-button {\n                margin-right: 8px;\n            }\n            \n            /* Utils */\n            .mt-md { margin-top: var(--spacing-md); }\n            .mb-md { margin-bottom: var(--spacing-md); }\n\n            /* Code block for JSON/Config */\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 8px;\n                border-radius: 4px;\n                white-space: pre-wrap;\n                font-size: 12px;\n                max-height: 200px;\n                overflow-y: auto;\n            }\n\n        </style>\n        <title>DAG</title>\n      </head>\n      <body>  \n\n        <div class=\"header-container\">\n            <div class=\"dag-paused-indicator dag-paused-${isPausedText}\"></div>\n            <h2>${this.dagId}</h2>\n            <div style=\"visibility: ${isDagRunning ? \"visible\" : \"hidden\"}; display: flex; align-items: center;\">\n                <vscode-progress-ring></vscode-progress-ring>\n            </div>\n        </div>\n                    \n        <vscode-tabs id=\"tab-control\" selected-index=\"${this.activetabid === 'tab-1' ? 0 : this.activetabid === 'tab-2' ? 1 : this.activetabid === 'tab-3' ? 2 : 3}\">\n            <vscode-tab-header slot=\"header\">RUN</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">TASKS</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">INFO</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">HISTORY</vscode-tab-header>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Dag Run Details</th>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>State</td>\n                            <td>:</td>\n                            <td>\n                                <div style=\"display: flex; align-items: center;\">\n                                    <div class=\"state-indicator state-${state}\"></div> <span>${state}</span>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Tasks</td>\n                            <td>:</td>\n                            <td>${runningOrFailedTasks || '<span style=\"opacity:0.5\">None active</span>'}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td>${logical_date_string}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>StartDate</td>\n                            <td>:</td>\n                            <td>${start_date_string}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Duration</td>\n                            <td>:</td>\n                            <td>${duration}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Note</td>\n                            <td>:</td>\n                            <td><a href=\"#\" id=\"run-update-note-link\" title=\"Click to update note\">${this.dagRunJson?.note || '<span style=\"opacity:0.5; font-style:italic;\">Add a note...</span>'}</a></td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><div class=\"code-block\">${this.dagRunJson?.conf ? JSON.stringify(this.dagRunJson.conf, null, 2) : '{}'}</div></td>\n                        </tr>\n                    </table>\n                    \n                    <div class=\"mb-md\">\n                        <vscode-button appearance=\"secondary\" id=\"run-ask-ai\" ${!hasDagRun ? \"disabled\" : \"\"}>Ask AI</vscode-button>    \n                        <vscode-button appearance=\"secondary\" id=\"run-view-log\" ${!hasDagRun ? \"disabled\" : \"\"}>Log</vscode-button> \n                        <vscode-button appearance=\"secondary\" id=\"run-lastrun-check\" ${isPaused ? \"disabled\" : \"\"}>Refresh</vscode-button>  \n                        <vscode-button appearance=\"secondary\" id=\"run-more-dagrun-detail\" ${!hasDagRun ? \"disabled\" : \"\"}>More</vscode-button>\n                    </div>\n            \n                    <br>\n            \n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Trigger Run</th>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td><vscode-textfield id=\"run_date\" placeholder=\"YYYY-MM-DD (Optional)\" maxlength=\"10\"></vscode-textfield></td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><vscode-textarea id=\"run_config\" rows=\"3\" placeholder='{\"key\": \"value\"}'></vscode-textarea></td>\n                        </tr>\n                    </table>\n                    \n                    <div class=\"mb-md\">\n                        <vscode-button appearance=\"primary\" id=\"run-trigger-dag\" ${isPaused ? \"disabled\" : \"\"}>Run</vscode-button>\n                        <vscode-button appearance=\"secondary\" id=\"run-lastrun-cancel\" ${isPaused || !isDagRunning ? \"disabled\" : \"\"}>Cancel</vscode-button>  \n                    </div>\n\n                    <br>\n\n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Control</th>\n                        </tr>\n                    </table>\n                    <div class=\"mb-md\">\n                         <vscode-button appearance=\"secondary\" id=\"run-pause-dag\" ${isPaused ? \"disabled\" : \"\"}>Pause</vscode-button>\n                         <vscode-button appearance=\"secondary\" id=\"run-unpause-dag\" ${!isPaused ? \"disabled\" : \"\"}>Unpause</vscode-button>\n                    </div>\n\n                    <br><br>\n                    \n                    <div style=\"opacity: 0.7; font-size: 12px; margin-top: 40px; border-top: 1px solid var(--vscode-widget-border); padding-top: 20px;\">\n                        <div style=\"margin-bottom: 8px;\"><a href=\"https://github.com/necatiarslan/airflow-vscode-extension/issues/new\">Report Bug / Request Feature</a></div>\n                        <div style=\"margin-bottom: 8px;\"><a href=\"https://bit.ly/airflow-extension-survey\">New Feature Survey</a></div>\n                        <div><a href=\"https://github.com/sponsors/necatiarslan\">Support this extension</a></div>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n\n            <vscode-tab-panel>\n                <section>\n                    ${taskDependencyTree ? `\n                    <div style=\"margin-bottom: 20px; border: 1px solid var(--vscode-widget-border); border-radius: 4px; padding: 10px;\">\n                        <vscode-tree>\n                        ${taskDependencyTree}\n                        </vscode-tree>\n                    </div>\n                    ` : ''}\n\n                    <table>\n                        <tr>\n                            <th>Task</th>\n                            <th>Actions</th>\n                            <th>Duration</th>            \n                            <th>Operator</th>\n                        </tr>\n                        ${taskRows}\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance=\"secondary\" id=\"tasks-refresh\">Refresh</vscode-button>\n                        <vscode-button appearance=\"secondary\" id=\"tasks-more-detail\" ${!this.dagTaskInstancesJson ? \"disabled\" : \"\"}>Raw JSON</vscode-button>\n                    </div>\n\n                </section>\n            </vscode-tab-panel>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr class=\"detail-row\">\n                            <td>Owners</td>\n                            <td>:</td>\n                            <td>${owners}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Tags</td>\n                            <td>:</td>\n                            <td>${tags}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Schedule</td>\n                            <td>:</td>\n                            <td>${schedule}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Next Run</td>\n                            <td>:</td>\n                            <td>${next_run}</td>\n                        </tr>\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance=\"secondary\" id=\"info-source-code\">Source Code</vscode-button> \n                        <vscode-button appearance=\"secondary\" id=\"other-dag-detail\">Raw JSON</vscode-button>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n            <vscode-tab-panel>\n                <section>                    \n                    <div style=\"display: flex; align-items: center; gap: 10px; margin-bottom: 20px; background: var(--vscode-editor-inactiveSelectionBackground); padding: 10px; border-radius: 4px;\">\n                        <label for=\"history_date\" style=\"font-weight: 600;\">Filter Date:</label>\n                        <input type=\"date\" id=\"history_date\" value=\"${this.dagHistorySelectedDate}\" style=\"width: 150px;\">\n                        <vscode-button appearance=\"secondary\" id=\"history-load-runs\">Load Runs</vscode-button>\n                    </div>\n\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>State</th>\n                                <th>Start Time</th>            \n                                <th>Duration</th>\n                                <th>Notes</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${runHistoryRows}\n                        </tbody>\n                    </table>   \n                </section>\n            </vscode-tab-panel>\n\n        </vscode-tabs>\n      </body>\n    </html>\n    `;\n        ui.logToOutput('DagView._getWebviewContent Completed');\n        return result;\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagView._setWebviewMessageListener Started');\n        Telemetry.Current.send('dagView.setWebviewMessageListener.called');\n\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                const command = message.command;\n                let activetabid = message.activetabid;\n\n                if ([\"tab-1\", \"tab-2\", \"tab-3\", \"tab-4\"].includes(activetabid)) {\n                    this.activetabid = message.activetabid;\n                }\n\n                ui.logToOutput('DagView._setWebviewMessageListener Message Received ' + message.command);\n                switch (command) {\n                    case \"run-trigger-dag\":\n                        this.triggerDagWConfig(message.config, message.date);\n                        return;\n                    case \"run-view-log\":\n                        this.showDAGRunLog();\n                        return;\n                    case \"run-more-dagrun-detail\":\n                        ui.showOutputMessage(this.dagRunJson);\n                        return;\n                    case \"other-dag-detail\":\n                        ui.showOutputMessage(this.dagJson);\n                        return;\n                    case \"tasks-more-detail\":\n                        ui.showOutputMessage(this.dagTaskInstancesJson);\n                        return;\n                    case \"history-load-runs\":\n                        this.getRunHistoryAndRenderHtml(message.date);\n                        return;\n                    case \"info-source-code\":\n                        this.showSourceCode();\n                        return;\n                    case \"run-pause-dag\":\n                        this.pauseDAG(true);\n                        return;\n                    case \"run-unpause-dag\":\n                        this.pauseDAG(false);\n                        return;\n\n                    case \"run-ask-ai\":\n                        this.askAI();\n                        return;\n\n                    case \"run-lastrun-check\":\n                        this.getLastRun();\n                        if(this.dagRunJson)\n                        {\n                            this.startCheckingDagRunStatus();\n                        }\n                        \n                        return;\n\n                    case \"run-lastrun-cancel\":\n                        if(this.dagRunJson)\n                        {\n                            this.cancelDagRun();\n                        }\n                        \n                        return;\n\n                    case \"run-update-note\":\n                        if(this.dagRunJson)\n                        {\n                            this.updateDagRunNote();\n                        }\n                        return;\n\n                    case \"history-dag-run-id\":\n                        let dagRunId:string = message.id;\n                        dagRunId = dagRunId.replace(\"history-dag-run-id-\", \"\");\n                        this.activetabid = \"tab-1\";\n                        this.dagRunId = dagRunId;\n                        this.getDagRun();\n                        return;\n\n                    case \"task-log-link\":\n                        let taskId:string = message.id;\n                        taskId = taskId.replace(\"task-log-link-\", \"\");\n                        this.showTaskInstanceLog(this.dagId, this.dagRunId, taskId);\n                        return;\n\n                    case \"task-xcom-link\":\n                        let xcomTaskId:string = message.id;\n                        xcomTaskId = xcomTaskId.replace(\"task-xcom-link-\", \"\");\n                        this.showTaskXComs(this.dagId, this.dagRunId, xcomTaskId);\n                        return;\n\n                    case \"tasks-refresh\":\n                        this.getTasksAndRenderHtml();\n                        return;\n                    \n                    case \"tabControlChanged\":\n                        this.activetabid = message.activeid;\n                        ui.logToOutput(\"tab changed to \" + message.activeid);\n                        return;\n                }\n\n            },\n            undefined,\n            this._disposables\n        );\n    }\n\n    private async getTasksAndRenderHtml() {\n        await this.getDagTasks();\n        await this.renderHmtl();\n    }\n\n    private async cancelDagRun(){\n        ui.logToOutput('DagView.cancelDagRun Started');\n        Telemetry.Current.send('dagView.cancelDagRun.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.cancelDagRun(this.dagId, this.dagRunId);\n        if (result.isSuccessful) {\n            //ui.showInfoMessage(`Dag ${this.dagId} Run ${this.dagRunId} cancelled successfully.`);\n            ui.logToOutput(`Dag ${this.dagId} Run ${this.dagRunId} cancelled successfully.`);\n            await this.getDagRun();\n            MessageHub.DagRunCancelled(this, this.dagId, this.dagRunId);\n        }\n    }\n\n    private async updateDagRunNote() {\n        ui.logToOutput('DagView.updateDagRunNote Started');\n        Telemetry.Current.send('dagView.updateDagRunNote.called');\n        \n        if (!Session.Current.Api || !this.dagRunJson) { return; }\n        \n        // Show input box with current note as default value\n        const newNote = await vscode.window.showInputBox({\n            prompt: 'Enter note for this DAG run',\n            value: this.dagRunJson.note || '',\n            placeHolder: 'Add a note for this DAG run'\n        });\n        \n        // User cancelled the input\n        if (newNote === undefined) {\n            return;\n        }\n        \n        const result = await Session.Current.Api.updateDagRunNote(this.dagId, this.dagRunId, newNote);\n        if (result.isSuccessful) {\n            // Refresh the DAG run to get the updated note\n            await this.getDagRun();\n        }\n    }\n\n    private async pauseDAG(is_paused: boolean) {\n        ui.logToOutput('DagView.pauseDAG Started');\n        Telemetry.Current.send('dagView.pauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        if (is_paused && this.dagJson.is_paused) { ui.showWarningMessage(this.dagId + 'Dag is already PAUSED'); return; }\n        if (!is_paused && !this.dagJson.is_paused) { ui.showWarningMessage(this.dagId + 'Dag is already ACTIVE'); return; }\n\n        const result = await Session.Current.Api.pauseDag(this.dagId, is_paused);\n        if (result.isSuccessful) {\n            this.loadDagInfoOnly();\n            is_paused ? MessageHub.DagPaused(this, this.dagId) : MessageHub.DagUnPaused(this, this.dagId);\n        }\n\n    }\n\n    private async askAI() {\n        ui.logToOutput('DagView.askAI Started');\n        Telemetry.Current.send('dagView.askAI.called');\n\n        if (!Session.Current.Api) { return; }\n\n        if (!DagTreeView.Current) {\n            ui.showErrorMessage('DagTreeView is not available');\n            return;\n        }\n\n        if (!this.dagJson) {\n            ui.showErrorMessage('DAG information is not available');\n            return;\n        }\n        \n        const code = await Session.Current.Api.getSourceCode(this.dagId, this.dagJson.file_token);\n        if (!code.isSuccessful) {\n            ui.showErrorMessage('Failed to retrieve DAG source code for AI context');\n            return;\n        }\n\n        const logs = await Session.Current.Api.getDagRunLogText(this.dagId, this.dagRunId);\n        if (!logs.isSuccessful) {\n            ui.showErrorMessage('Failed to retrieve DAG logs for AI context');\n            return;\n        }\n\n        // Call the askAI function from DagTreeView\n        await AIHandler.Current.askAIWithContext({ code: code.result, logs: logs.result, dag: this.dagJson, dagRun: this.dagRunJson, tasks: this.dagTasksJson, taskInstances: this.dagTaskInstancesJson });\n    }\n\n    private async showSourceCode() {\n        ui.logToOutput('DagView.showSourceCode Started');\n        Telemetry.Current.send('dagView.showSourceCode.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getSourceCode(this.dagId, this.dagJson.file_token);\n\n        if (result.isSuccessful) {\n            this.createAndOpenTempFile(result.result, this.dagId, '.py');\n        }\n        else\n        {\n            ui.logToOutput(result.result);\n            ui.showErrorMessage(result.result);\n        }\n    }\n\n    private async getRunHistoryAndRenderHtml(date?: string) {\n        ui.logToOutput('DagView.getRunHistoryAndRenderHtml Started');\n        Telemetry.Current.send('dagView.getRunHistoryAndRenderHtml.called');\n\n        this.dagHistorySelectedDate = date;\n        await this.getRunHistory(date);\n        await this.renderHmtl();\n    }\n\n    private async showDAGRunLog() {\n        ui.logToOutput('DagView.showDAGRunLog Started');\n        Telemetry.Current.send('dagView.showDAGRunLog.called');\n\n        if (!Session.Current.Api) { return; }\n\n        // const result = await Session.Current.Api.getDagRunLogText(this.dagId, this.dagRunId);\n        // if (result.isSuccessful) {\n        //     this.createAndOpenTempFile(result.result, this.dagId, '.log');\n        // }\n        DagLogView.render(this.dagId, this.dagRunId);\n    }\n\n    private async showTaskInstanceLog(dagId: string, dagRunId:string, taskId:string) {\n        ui.logToOutput('DagView.showTaskInstanceLog Started');\n        Telemetry.Current.send('dagView.showTaskInstanceLog.called');\n\n        if (!Session.Current.Api) { return; }\n\n        // const result = await Session.Current.Api.getTaskInstanceLogText(dagId, dagRunId, taskId);\n        // if (result.isSuccessful) {\n        //     this.createAndOpenTempFile(result.result, dagId + '-' + taskId, '.log');\n        // }\n        DagLogView.render(dagId, dagRunId, taskId);\n    }\n\n    private async showTaskXComs(dagId: string, dagRunId:string, taskId:string) {\n        ui.logToOutput('DagView.showTaskXComs Started');\n        Telemetry.Current.send('dagView.showTaskXComs.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getTaskXComs(dagId, dagRunId, taskId);\n        if (result.isSuccessful) {\n            this.createAndOpenTempFile(JSON.stringify(result.result, null, 2), dagId + '-' + taskId + '_xcom', '.json');\n        } else {\n            ui.showInfoMessage(`No XCom entries found for task: ${taskId}`);\n        }\n    }\n\n    private async triggerDagWConfig(config: string = \"\", date: string = \"\") {\n        ui.logToOutput('DagView.triggerDagWConfig Started');\n        Telemetry.Current.send('dagView.triggerDagWConfig.called');\n\n        if (!Session.Current.Api) { return; }\n\n        if (config && !ui.isJsonString(config)) {\n            ui.showWarningMessage(\"Config is not a valid JSON\");\n            return;\n        }\n\n        if (date && !ui.isValidDate(date)) {\n            ui.showWarningMessage(\"Date is not a valid DATE\");\n            return;\n        }\n\n        if (!config) {\n            config = \"{}\";\n        }\n\n\n        if (config !== undefined) {\n\n            const result = await Session.Current.Api.triggerDag(this.dagId, config, date);\n\n            if (result.isSuccessful) {\n                this.dagRunId = result.result[\"dag_run_id\"];\n                this.startCheckingDagRunStatus();\n                MessageHub.DagTriggered(this, this.dagId, this.dagRunId);\n            }\n        }\n    }\n\n    private async startCheckingDagRunStatus() {\n        ui.logToOutput('DagView.startCheckingDagRunStatus Started');\n        Telemetry.Current.send('dagView.startCheckingDagRunStatus.called');\n\n        await this.refreshRunningDagState(this);\n        if (this.dagStatusInterval) {\n            clearInterval(this.dagStatusInterval);//stop prev checking\n        }\n        this.dagStatusInterval = setInterval(() => {\n            void this.refreshRunningDagState(this).catch((err: any) => ui.logToOutput('refreshRunningDagState Error', err));\n        }, 5 * 1000);\n    }\n\n    private async stopCheckingDagRunStatus() {\n        ui.logToOutput('DagView.stopCheckingDagRunStatus Started');\n        Telemetry.Current.send('dagView.stopCheckingDagRunStatus.called');\n\n        if (this.dagStatusInterval) {\n            clearInterval(this.dagStatusInterval);//stop prev checking\n        }\n    }\n\n    private async refreshRunningDagState(dagView: DagView) {\n        ui.logToOutput('DagView.refreshRunningDagState Started');\n        Telemetry.Current.send('dagView.refreshRunningDagState.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        if (!dagView.dagId || !dagView.dagRunId)\n        {\n            dagView.stopCheckingDagRunStatus();\n            return;\n        }\n\n        const result = await Session.Current.Api.getDagRun(dagView.dagId, dagView.dagRunId);\n        if (result.isSuccessful) {\n            dagView.dagRunJson = result.result;\n\n            const resultTasks = await Session.Current.Api.getTaskInstances(dagView.dagId, dagView.dagRunId);\n            if (resultTasks.isSuccessful) {\n                dagView.dagTaskInstancesJson = resultTasks.result;\n            }\n        }\n        else {\n            dagView.stopCheckingDagRunStatus();\n            return;\n        }\n\n        let state = (dagView.dagRunJson) ? dagView.dagRunJson.state : \"\";\n\n        //\"queued\" \"running\" \"success\" \"failed\"\n        if (state === \"queued\" || state === \"running\") {\n            //go on for the next check\n        }\n        else {\n            dagView.stopCheckingDagRunStatus();\n        }\n\n        dagView.renderHmtl();\n    }\n\n    private buildTaskDependencyTree(tasks: any[]): string {\n        ui.logToOutput('DagView.buildTaskDependencyTree Started');\n        Telemetry.Current.send('dagView.buildTaskDependencyTree.called');\n        \n        // Create a map for quick task lookup\n        const taskMap = new Map<string, any>();\n        tasks.forEach(task => {\n            taskMap.set(task.task_id, task);\n        });\n\n        // Find root tasks (tasks with no upstream dependencies)\n        const rootTasks = tasks.filter(task => \n            !task.upstream_task_ids || task.upstream_task_ids.length === 0\n        );\n\n        if (rootTasks.length === 0) {\n            return \"No task dependencies found or circular dependencies detected.\";\n        }\n\n        // Build tree recursively\n        const visited = new Set<string>();\n        let treeHtml = \"\";\n\n        const buildTree = (taskId: string): string => {\n            if (visited.has(taskId)) {\n                return \"\"; // Prevent infinite loops and duplicates in this spanning tree view\n            }\n            visited.add(taskId);\n\n            const task = taskMap.get(taskId);\n            if (!task) {\n                return \"\";\n            }\n\n            let itemHtml = `<vscode-tree-item>\\n`;\n            itemHtml += `${task.task_id}\\n`;\n\n            // Get downstream tasks\n            const downstreamIds = task.downstream_task_ids || [];\n            \n            if (downstreamIds.length > 0) {\n                downstreamIds.forEach((downstreamId: string) => {\n                    itemHtml += buildTree(downstreamId);\n                });\n            }\n            \n            itemHtml += `</vscode-tree-item>\\n`;\n\n            return itemHtml;\n        };\n\n        // Build tree for each root task\n        rootTasks.forEach((rootTask) => {\n            treeHtml += buildTree(rootTask.task_id);\n        });\n\n        return treeHtml || \"No tasks to display.\";\n    }\n\n}","/**\n * UnpauseDagTool - Language Model Tool for unpausing (activating) a DAG\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IUnpauseDagParams {\n    dagId: string;\n}\n\nexport class UnpauseDagTool implements vscode.LanguageModelTool<IUnpauseDagParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IUnpauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Unpause DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **UNPAUSE** (activate) the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n\\n`);\n        confirmationMessage.appendMarkdown('**Effect:** New runs will be scheduled for this DAG.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Unpausing DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Unpause DAG',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IUnpauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('UnpauseDagTool.invoke');\n\n        try {\n            await this.client.pauseDag(dagId, false); // false = unpause\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Successfully UNPAUSED DAG: **${dagId}**`)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('UnpauseDagTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to unpause DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","module.exports = require(\"node:process\");","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 4\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_POLL_INTERNAL_LOGS = \"pollInternalLogs\"; // Count: 4\r\nexport var _DYN_VALUE = \"value\"; // Count: 20\r\nexport var _DYN_LENGTH = \"length\"; // Count: 7\r\nexport var _DYN_PROCESS_TELEMETRY_ST0 = \"processTelemetryStart\"; // Count: 3\r\nexport var _DYN_HANDLE_FIELD = \"handleField\"; // Count: 3\r\nexport var _DYN_RM_SANITIZER = \"rmSanitizer\"; // Count: 3\r\nexport var _DYN_RM_FIELD_SANITIZER = \"rmFieldSanitizer\"; // Count: 3\r\nexport var _DYN_CAN_HANDLE = \"canHandle\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/**\n * GoToDagViewTool - Language Model Tool for opening the DAG View panel\n * \n * This tool allows users to open the DagView for a specific DAG,\n * optionally navigating to a specific DAG run.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagView } from '../dag/DagView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for opening DAG View\n */\n\nexport interface IGoToDagViewParams {\n    dagId: string;\n    dagRunId?: string;\n}\n\n/**\n * GoToDagViewTool - Implements vscode.LanguageModelTool for opening DAG View\n * \n * This tool opens the DagView panel to display information about a specific DAG.\n * If a dagRunId is provided, it will navigate to that specific run.\n */\nexport class GoToDagViewTool implements vscode.LanguageModelTool<IGoToDagViewParams> {\n\n    constructor() {\n        // No external dependencies needed - uses DagTreeView.Current directly\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, dagRunId } = options.input;\n\n        let message = `Opening DAG View for: **${dagId}**`;\n        if (dagRunId) {\n            message += `\\nDAG Run ID: **${dagRunId}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagViewTool.invoke');\n        \n        try {\n\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Open the DagView with the specified DAG ID and optional run ID\n            DagView.render(dagId, dagRunId);\n\n            let successMessage = ` Opened DAG View for: **${dagId}**`;\n            if (dagRunId) {\n                successMessage += `\\n Showing DAG Run: **${dagRunId}**`;\n            } else {\n                successMessage += `\\n Showing latest DAG run`;\n            }\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG View for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * ListPausedDagsTool - Language Model Tool for listing paused DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ListPausedDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Listing paused DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('ListPausedDagsTool.invoke');\n        \n        try {\n            const dags = await this.client.getDags(true); // true = paused\n\n            if (dags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No paused DAGs found.\")\n                ]);\n            }\n\n            let message = `##  Paused DAGs (${dags.length})\\n\\n`;\n            dags.forEach(dag => {\n                message += `- **${dag.dag_id}**`;\n                if (dag.description) {\n                    message += `: ${dag.description}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(dags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('ListPausedDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to list paused DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:https\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:zlib\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:stream\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:buffer\");","/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @returns {Buffer} Buffer instance from Data URI\n * @api public\n */\nexport function dataUriToBuffer(uri) {\n    if (!/^data:/i.test(uri)) {\n        throw new TypeError('`uri` does not appear to be a Data URI (must begin with \"data:\")');\n    }\n    // strip newlines\n    uri = uri.replace(/\\r?\\n/g, '');\n    // split the URI up into the \"metadata\" and the \"data\" portions\n    const firstComma = uri.indexOf(',');\n    if (firstComma === -1 || firstComma <= 4) {\n        throw new TypeError('malformed data: URI');\n    }\n    // remove the \"data:\" scheme and parse the metadata\n    const meta = uri.substring(5, firstComma).split(';');\n    let charset = '';\n    let base64 = false;\n    const type = meta[0] || 'text/plain';\n    let typeFull = type;\n    for (let i = 1; i < meta.length; i++) {\n        if (meta[i] === 'base64') {\n            base64 = true;\n        }\n        else {\n            typeFull += `;${meta[i]}`;\n            if (meta[i].indexOf('charset=') === 0) {\n                charset = meta[i].substring(8);\n            }\n        }\n    }\n    // defaults to US-ASCII only if type is not provided\n    if (!meta[0] && !charset.length) {\n        typeFull += ';charset=US-ASCII';\n        charset = 'US-ASCII';\n    }\n    // get the encoded data portion and decode URI-encoded chars\n    const encoding = base64 ? 'base64' : 'ascii';\n    const data = unescape(uri.substring(firstComma + 1));\n    const buffer = Buffer.from(data, encoding);\n    // set `.type` and `.typeFull` properties to MIME type\n    buffer.type = type;\n    buffer.typeFull = typeFull;\n    // set the `.charset` property\n    buffer.charset = charset;\n    return buffer;\n}\nexport default dataUriToBuffer;\n//# sourceMappingURL=index.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:util\");","export class FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n","\nimport {FetchBaseError} from './base.js';\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nexport class FetchError extends FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n","/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\n/**\n * isDomainOrSubdomain reports whether sub is a subdomain (or exact match) of\n * the parent domain.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isDomainOrSubdomain = (destination, original) => {\n\tconst orig = new URL(original).hostname;\n\tconst dest = new URL(destination).hostname;\n\n\treturn orig === dest || orig.endsWith(`.${dest}`);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isSameProtocol = (destination, original) => {\n\tconst orig = new URL(original).protocol;\n\tconst dest = new URL(destination).protocol;\n\n\treturn orig === dest;\n};\n","\n/**\n * Body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nimport Stream, {PassThrough} from 'node:stream';\nimport {types, deprecate, promisify} from 'node:util';\nimport {Buffer} from 'node:buffer';\n\nimport Blob from 'fetch-blob';\nimport {FormData, formDataToBlob} from 'formdata-polyfill/esm.min.js';\n\nimport {FetchError} from './errors/fetch-error.js';\nimport {FetchBaseError} from './errors/base.js';\nimport {isBlob, isURLSearchParameters} from './utils/is.js';\n\nconst pipeline = promisify(Stream.pipeline);\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if (isURLSearchParameters(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = Buffer.from(body.toString());\n\t\t} else if (isBlob(body)) {\n\t\t\t// Body is blob\n\t\t} else if (Buffer.isBuffer(body)) {\n\t\t\t// Body is Buffer\n\t\t} else if (types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof Stream) {\n\t\t\t// Body is stream\n\t\t} else if (body instanceof FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = formDataToBlob(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (Buffer.isBuffer(body)) {\n\t\t\tstream = Stream.Readable.from(body);\n\t\t} else if (isBlob(body)) {\n\t\t\tstream = Stream.Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof Stream) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await import('./utils/multipart-parser.js');\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS].body && this[INTERNALS].body.type) || '';\n\t\tconst buf = await this.arrayBuffer();\n\n\t\treturn new Blob([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst text = await this.text();\n\t\treturn JSON.parse(text);\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = deprecate(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true},\n\tdata: {get: deprecate(() => {},\n\t\t'data doesn\\'t exist, use json(), text(), arrayBuffer(), or body instead',\n\t\t'https://github.com/node-fetch/node-fetch/issues/1000 (response)')}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS].disturbed = true;\n\n\tif (data[INTERNALS].error) {\n\t\tthrow data[INTERNALS].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof Stream)) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nexport const clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof Stream) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new PassThrough({highWaterMark});\n\t\tp2 = new PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = deprecate(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nexport const extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif (isURLSearchParameters(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif (isBlob(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (Buffer.isBuffer(body) || types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof Stream) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nexport const getTotalBytes = request => {\n\tconst {body} = request[INTERNALS];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif (isBlob(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {Promise<void>}\n */\nexport const writeToStream = async (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tawait pipeline(body, dest);\n\t}\n};\n","/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\nimport {types} from 'node:util';\nimport http from 'node:http';\n\n/* c8 ignore next 9 */\nconst validateHeaderName = typeof http.validateHeaderName === 'function' ?\n\thttp.validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/* c8 ignore next 9 */\nconst validateHeaderValue = typeof http.validateHeaderValue === 'function' ?\n\thttp.validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nexport default class Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\t\t// No op\n\t\t} else if (typeof init === 'object' && !types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t/* c8 ignore next */\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nexport function fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n","const redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nexport const isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n","/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType} from './body.js';\nimport {isRedirect} from './utils/is-redirect.js';\n\nconst INTERNALS = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Response extends Body {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new Headers(options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS].status >= 200 && this[INTERNALS].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response(clone(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!isRedirect(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS].type = 'error';\n\t\treturn response;\n\t}\n\n\tstatic json(data = undefined, init = {}) {\n\t\tconst body = JSON.stringify(data);\n\n\t\tif (body === undefined) {\n\t\t\tthrow new TypeError('data is not JSON serializable');\n\t\t}\n\n\t\tconst headers = new Headers(init && init.headers);\n\n\t\tif (!headers.has('content-type')) {\n\t\t\theaders.set('content-type', 'application/json');\n\t\t}\n\n\t\treturn new Response(body, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:url\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:net\");","import {isIP} from 'node:net';\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy 8.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nexport function stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nexport const ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nexport const DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy 3. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nexport function validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy 3.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = isIP(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (url.host === 'localhost' || url.host.endsWith('.localhost')) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy 3.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing 3.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nexport function determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy 8.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nexport function parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and responses header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in  11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n","/**\n * Request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport {format as formatUrl} from 'node:url';\nimport {deprecate} from 'node:util';\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType, getTotalBytes} from './body.js';\nimport {isAbortSignal} from './utils/is.js';\nimport {getSearch} from './utils/get-search.js';\nimport {\n\tvalidateReferrerPolicy, determineRequestsReferrer, DEFAULT_REFERRER_POLICY\n} from './utils/referrer.js';\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} object\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\nconst doBadDataWarn = deprecate(() => {},\n\t'.data is not a valid RequestInit property, use .body instead',\n\t'https://github.com/node-fetch/node-fetch/issues/1000 (request)');\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nexport default class Request extends Body {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentials.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tif (/^(delete|get|head|options|post|put)$/i.test(method)) {\n\t\t\tmethod = method.toUpperCase();\n\t\t}\n\n\t\tif (!isRequest(init) && 'data' in init) {\n\t\t\tdoBadDataWarn();\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif ((init.body != null || (isRequest(input) && input.body !== null)) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\tclone(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// 5.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// 5.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// 5.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// 5.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// 5.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\t/** @returns {string} */\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\t/** @returns {string} */\n\tget url() {\n\t\treturn formatUrl(this[INTERNALS].parsedURL);\n\t}\n\n\t/** @returns {Headers} */\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\t/** @returns {AbortSignal} */\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = validateReferrerPolicy(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param {Request} request - A Request instance\n * @return The options object to be passed to http.request\n */\nexport const getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new Headers(request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = determineRequestsReferrer(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip, deflate, br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = getSearch(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\t/** @type {URL} */\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n","export const getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n","import {FetchBaseError} from './base.js';\n\n/**\n * AbortError interface for cancelled requests\n */\nexport class AbortError extends FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n","/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport http from 'node:http';\nimport https from 'node:https';\nimport zlib from 'node:zlib';\nimport Stream, {PassThrough, pipeline as pump} from 'node:stream';\nimport {Buffer} from 'node:buffer';\n\nimport dataUriToBuffer from 'data-uri-to-buffer';\n\nimport {writeToStream, clone} from './body.js';\nimport Response from './response.js';\nimport Headers, {fromRawHeaders} from './headers.js';\nimport Request, {getNodeRequestOptions} from './request.js';\nimport {FetchError} from './errors/fetch-error.js';\nimport {AbortError} from './errors/abort-error.js';\nimport {isRedirect} from './utils/is-redirect.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\nimport {isDomainOrSubdomain, isSameProtocol} from './utils/is.js';\nimport {parseReferrerPolicyFromHeader} from './utils/referrer.js';\nimport {\n\tBlob,\n\tFile,\n\tfileFromSync,\n\tfileFrom,\n\tblobFromSync,\n\tblobFrom\n} from 'fetch-blob/from.js';\n\nexport {FormData, Headers, Request, Response, FetchError, AbortError, isRedirect};\nexport {Blob, File, fileFromSync, fileFrom, blobFromSync, blobFrom};\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nexport default async function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new Request(url, options_);\n\t\tconst {parsedURL, options} = getNodeRequestOptions(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = dataUriToBuffer(request.url);\n\t\t\tconst response = new Response(data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? https : http).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL.toString(), options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tif (response && response.body) {\n\t\t\t\tresponse.body.destroy(error);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = fromRawHeaders(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (isRedirect(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL(location, request.url);\n\t\t\t\t} catch {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Nothing to do\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: clone(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// when forwarding sensitive headers like \"Authorization\",\n\t\t\t\t\t\t// \"WWW-Authenticate\", and \"Cookie\" to untrusted targets,\n\t\t\t\t\t\t// headers will be ignored when following a redirect to a domain\n\t\t\t\t\t\t// that is not a subdomain match or exact match of the initial domain.\n\t\t\t\t\t\t// For example, a redirect from \"foo.com\" to either \"foo.com\" or \"sub.foo.com\"\n\t\t\t\t\t\t// will forward the sensitive headers, but a redirect to \"bar.com\" will not.\n\t\t\t\t\t\t// headers will also be ignored when following a redirect to a domain using\n\t\t\t\t\t\t// a different protocol. For example, a redirect from \"https://foo.com\" to \"http://foo.com\"\n\t\t\t\t\t\t// will not forward the sensitive headers\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOptions.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof Stream.Readable) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = pump(response_, new PassThrough(), error => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\t/* c8 ignore next 3 */\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = pump(body, zlib.createGunzip(zlibOptions), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = pump(response_, new PassThrough(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflate(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflateRaw(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.once('end', () => {\n\t\t\t\t\t// Some old IIS servers return zero-length OK deflate responses, so\n\t\t\t\t\t// 'data' is never emitted. See https://github.com/node-fetch/node-fetch/pull/903\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = pump(body, zlib.createBrotliDecompress(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new Response(body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\twriteToStream(request_, request).catch(reject);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tconst onData = buf => {\n\t\t\tproperLastChunkReceived = Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tBuffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tBuffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\t\tsocket.on('data', onData);\n\n\t\trequest.on('close', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t\tsocket.removeListener('data', onData);\n\t\t});\n\t});\n}\n","import * as vscode from 'vscode';\n\nexport class ReportTreeItem extends vscode.TreeItem {\n  constructor(\n    public readonly label: string,\n    public readonly collapsibleState: vscode.TreeItemCollapsibleState,\n    public readonly command?: vscode.Command,\n    public readonly iconPath?: vscode.ThemeIcon\n  ) {\n    super(label, collapsibleState);\n    this.command = command;\n    this.iconPath = iconPath;\n  }\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { arrForEach, dumpObj, isArray, isFunction, isNullOrUndefined, isUndefined, objForEachKey, objFreeze, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _applyDefaultValue } from \"../Config/ConfigDefaults\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_IDENTIFIER, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UNLOAD, _DYN_UPDATE } from \"../__DynamicConstants\";\r\nimport { _throwInternal, safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { proxyFunctions } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_DISABLED, STR_EMPTY, STR_EXTENSION_CONFIG, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { doPerf } from \"./PerfManager\";\r\nimport { _getPluginState } from \"./TelemetryHelpers\";\r\nvar strTelemetryPluginChain = \"TelemetryPluginChain\";\r\nvar strHasRunFlags = \"_hasRun\";\r\nvar strGetTelCtx = \"_getTelCtx\";\r\nvar _chainId = 0;\r\nfunction _getNextProxyStart(proxy, core, startAt) {\r\n    while (proxy) {\r\n        if (proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]() === startAt) {\r\n            return proxy;\r\n        }\r\n        proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    }\r\n    // This wasn't found in the existing chain so create an isolated one with just this plugin\r\n    return createTelemetryProxyChain([startAt], core.config || {}, core);\r\n}\r\n/**\r\n * @ignore\r\n * @param telemetryChain\r\n * @param dynamicHandler\r\n * @param core\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n * @returns\r\n */\r\nfunction _createInternalContext(telemetryChain, dynamicHandler, core, startAt) {\r\n    // We have a special case where we want to start execution from this specific plugin\r\n    // or we simply reuse the existing telemetry plugin chain (normal execution case)\r\n    var _nextProxy = null; // By Default set as no next plugin\r\n    var _onComplete = [];\r\n    if (!dynamicHandler) {\r\n        dynamicHandler = createDynamicConfig({}, null, core[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    if (startAt !== null) {\r\n        // There is no next element (null) vs not defined (undefined) so use the full chain\r\n        _nextProxy = startAt ? _getNextProxyStart(telemetryChain, core, startAt) : telemetryChain;\r\n    }\r\n    var context = {\r\n        _next: _moveNext,\r\n        ctx: {\r\n            core: function () {\r\n                return core;\r\n            },\r\n            diagLog: function () {\r\n                return safeGetLogger(core, dynamicHandler.cfg);\r\n            },\r\n            getCfg: function () {\r\n                return dynamicHandler.cfg;\r\n            },\r\n            getExtCfg: _resolveExtCfg,\r\n            getConfig: _getConfig,\r\n            hasNext: function () {\r\n                return !!_nextProxy;\r\n            },\r\n            getNext: function () {\r\n                return _nextProxy;\r\n            },\r\n            setNext: function (nextPlugin) {\r\n                _nextProxy = nextPlugin;\r\n            },\r\n            iterate: _iterateChain,\r\n            onComplete: _addOnComplete\r\n        }\r\n    };\r\n    function _addOnComplete(onComplete, that) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (onComplete) {\r\n            _onComplete[_DYN_PUSH /* @min:%2epush */]({\r\n                func: onComplete,\r\n                self: !isUndefined(that) ? that : context.ctx,\r\n                args: args\r\n            });\r\n        }\r\n    }\r\n    function _moveNext() {\r\n        var nextProxy = _nextProxy;\r\n        // Automatically move to the next plugin\r\n        _nextProxy = nextProxy ? nextProxy[_DYN_GET_NEXT /* @min:%2egetNext */]() : null;\r\n        if (!nextProxy) {\r\n            var onComplete = _onComplete;\r\n            if (onComplete && onComplete[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                arrForEach(onComplete, function (completeDetails) {\r\n                    try {\r\n                        completeDetails.func.call(completeDetails.self, completeDetails.args);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(core[_DYN_LOGGER /* @min:%2elogger */], 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected Exception during onComplete - \" + dumpObj(e));\r\n                    }\r\n                });\r\n                _onComplete = [];\r\n            }\r\n        }\r\n        return nextProxy;\r\n    }\r\n    function _getExtCfg(identifier, createIfMissing) {\r\n        var idCfg = null;\r\n        var cfg = dynamicHandler.cfg;\r\n        if (cfg && identifier) {\r\n            var extCfg = cfg[STR_EXTENSION_CONFIG /* @min:%2eextensionConfig */];\r\n            if (!extCfg && createIfMissing) {\r\n                extCfg = {};\r\n            }\r\n            // Always set the value so that the property always exists\r\n            cfg[STR_EXTENSION_CONFIG] = extCfg; // Note: it is valid for the \"value\" to be undefined\r\n            // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n            extCfg = dynamicHandler.ref(cfg, STR_EXTENSION_CONFIG);\r\n            if (extCfg) {\r\n                idCfg = extCfg[identifier];\r\n                if (!idCfg && createIfMissing) {\r\n                    idCfg = {};\r\n                }\r\n                // Always set the value so that the property always exists\r\n                extCfg[identifier] = idCfg; // Note: it is valid for the \"value\" to be undefined\r\n                // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n                idCfg = dynamicHandler.ref(extCfg, identifier);\r\n            }\r\n        }\r\n        return idCfg;\r\n    }\r\n    function _resolveExtCfg(identifier, defaultValues) {\r\n        var newConfig = _getExtCfg(identifier, true);\r\n        if (defaultValues) {\r\n            // Enumerate over the defaultValues and if not already populated attempt to\r\n            // find a value from the root config or use the default value\r\n            objForEachKey(defaultValues, function (field, defaultValue) {\r\n                // for each unspecified field, set the default value\r\n                if (isNullOrUndefined(newConfig[field])) {\r\n                    var cfgValue = dynamicHandler.cfg[field];\r\n                    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n                        newConfig[field] = cfgValue;\r\n                    }\r\n                }\r\n                _applyDefaultValue(dynamicHandler, newConfig, field, defaultValue);\r\n            });\r\n        }\r\n        return dynamicHandler.setDf(newConfig, defaultValues);\r\n    }\r\n    function _getConfig(identifier, field, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = false; }\r\n        var theValue;\r\n        var extConfig = _getExtCfg(identifier, false);\r\n        var rootConfig = dynamicHandler.cfg;\r\n        if (extConfig && (extConfig[field] || !isNullOrUndefined(extConfig[field]))) {\r\n            theValue = extConfig[field];\r\n        }\r\n        else if (rootConfig[field] || !isNullOrUndefined(rootConfig[field])) {\r\n            theValue = rootConfig[field];\r\n        }\r\n        return (theValue || !isNullOrUndefined(theValue)) ? theValue : defaultValue;\r\n    }\r\n    function _iterateChain(cb) {\r\n        // Keep processing until we reach the end of the chain\r\n        var nextPlugin;\r\n        while (!!(nextPlugin = context._next())) {\r\n            var plugin = nextPlugin[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n            if (plugin) {\r\n                // callback with the current on\r\n                cb(plugin);\r\n            }\r\n        }\r\n    }\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryContext(telemetryChain, cfg, core, startAt) {\r\n    var config = createDynamicConfig(cfg);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(env) {\r\n        var nextPlugin = internalContext._next();\r\n        if (nextPlugin) {\r\n            // Run the next plugin which will call \"processNext()\"\r\n            nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, context);\r\n        }\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), config.cfg, core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for handling the unloading of the chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUnloadContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(unloadState) {\r\n        var nextPlugin = internalContext._next();\r\n        nextPlugin && nextPlugin[_DYN_UNLOAD /* @min:%2eunload */](context, unloadState);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUnloadContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for updating the configuration\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUpdateContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(updateState) {\r\n        return context.iterate(function (plugin) {\r\n            if (isFunction(plugin[_DYN_UPDATE /* @min:%2eupdate */])) {\r\n                plugin[_DYN_UPDATE /* @min:%2eupdate */](context, updateState);\r\n            }\r\n        });\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUpdateContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates an execution chain from the array of plugins\r\n * @param plugins - The array of plugins that will be executed in this order\r\n * @param defItemCtx - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n */\r\nexport function createTelemetryProxyChain(plugins, config, core, startAt) {\r\n    var firstProxy = null;\r\n    var add = startAt ? false : true;\r\n    if (isArray(plugins) && plugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // Create the proxies and wire up the next plugin chain\r\n        var lastProxy_1 = null;\r\n        arrForEach(plugins, function (thePlugin) {\r\n            if (!add && startAt === thePlugin) {\r\n                add = true;\r\n            }\r\n            if (add && thePlugin && isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Only add plugins that are processors\r\n                var newProxy = createTelemetryPluginProxy(thePlugin, config, core);\r\n                if (!firstProxy) {\r\n                    firstProxy = newProxy;\r\n                }\r\n                if (lastProxy_1) {\r\n                    // Set this new proxy as the next for the previous one\r\n                    lastProxy_1._setNext(newProxy);\r\n                }\r\n                lastProxy_1 = newProxy;\r\n            }\r\n        });\r\n    }\r\n    if (startAt && !firstProxy) {\r\n        // Special case where the \"startAt\" was not in the original list of plugins\r\n        return createTelemetryProxyChain([startAt], config, core);\r\n    }\r\n    return firstProxy;\r\n}\r\n/**\r\n * Create the processing telemetry proxy instance, the proxy is used to abstract the current plugin to allow monitoring and\r\n * execution plugins while passing around the dynamic execution state (IProcessTelemetryContext), the proxy instance no longer\r\n * contains any execution state and can be reused between requests (this was not the case for 2.7.2 and earlier with the\r\n * TelemetryPluginChain class).\r\n * @param plugin - The plugin instance to proxy\r\n * @param config - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n * @returns\r\n */\r\nexport function createTelemetryPluginProxy(plugin, config, core) {\r\n    var nextProxy = null;\r\n    var hasProcessTelemetry = isFunction(plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]);\r\n    var hasSetNext = isFunction(plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]);\r\n    var chainId;\r\n    if (plugin) {\r\n        chainId = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"-\" + plugin[STR_PRIORITY /* @min:%2epriority */] + \"-\" + _chainId++;\r\n    }\r\n    else {\r\n        chainId = \"Unknown-0-\" + _chainId++;\r\n    }\r\n    var proxyChain = {\r\n        getPlugin: function () {\r\n            return plugin;\r\n        },\r\n        getNext: function () {\r\n            return nextProxy;\r\n        },\r\n        processTelemetry: _processTelemetry,\r\n        unload: _unloadPlugin,\r\n        update: _updatePlugin,\r\n        _id: chainId,\r\n        _setNext: function (nextPlugin) {\r\n            nextProxy = nextPlugin;\r\n        }\r\n    };\r\n    function _getTelCtx() {\r\n        var itemCtx;\r\n        // Looks like a plugin didn't pass the (optional) context, so create a new one\r\n        if (plugin && isFunction(plugin[strGetTelCtx])) {\r\n            // This plugin extends from the BaseTelemetryPlugin so lets use it\r\n            itemCtx = plugin[strGetTelCtx]();\r\n        }\r\n        if (!itemCtx) {\r\n            // Create a temporary one\r\n            itemCtx = createProcessTelemetryContext(proxyChain, config, core);\r\n        }\r\n        return itemCtx;\r\n    }\r\n    function _processChain(itemCtx, processPluginFn, name, details, isAsync) {\r\n        var hasRun = false;\r\n        var identifier = plugin ? plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] : strTelemetryPluginChain;\r\n        var hasRunContext = itemCtx[strHasRunFlags];\r\n        if (!hasRunContext) {\r\n            // Assign and populate\r\n            hasRunContext = itemCtx[strHasRunFlags] = {};\r\n        }\r\n        // Ensure that we keep the context in sync\r\n        itemCtx.setNext(nextProxy);\r\n        if (plugin) {\r\n            doPerf(itemCtx[STR_CORE /* @min:%2ecore */](), function () { return identifier + \":\" + name; }, function () {\r\n                // Mark this component as having run\r\n                hasRunContext[chainId] = true;\r\n                try {\r\n                    // Set a flag on the next plugin so we know if it was attempted to be executed\r\n                    var nextId = nextProxy ? nextProxy._id : STR_EMPTY;\r\n                    if (nextId) {\r\n                        hasRunContext[nextId] = false;\r\n                    }\r\n                    hasRun = processPluginFn(itemCtx);\r\n                }\r\n                catch (error) {\r\n                    var hasNextRun = nextProxy ? hasRunContext[nextProxy._id] : true;\r\n                    if (hasNextRun) {\r\n                        // The next plugin after us has already run so set this one as complete\r\n                        hasRun = true;\r\n                    }\r\n                    if (!nextProxy || !hasNextRun) {\r\n                        // Either we have no next plugin or the current one did not attempt to call the next plugin\r\n                        // Which means the current one is the root of the failure so log/report this failure\r\n                        _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 73 /* _eInternalMessageId.PluginException */, \"Plugin [\" + identifier + \"] failed during \" + name + \" - \" + dumpObj(error) + \", run flags: \" + dumpObj(hasRunContext));\r\n                    }\r\n                }\r\n            }, details, isAsync);\r\n        }\r\n        return hasRun;\r\n    }\r\n    function _processTelemetry(env, itemCtx) {\r\n        itemCtx = itemCtx || _getTelCtx();\r\n        function _callProcessTelemetry(itemCtx) {\r\n            if (!plugin || !hasProcessTelemetry) {\r\n                return false;\r\n            }\r\n            var pluginState = _getPluginState(plugin);\r\n            if (pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] || pluginState[STR_DISABLED]) {\r\n                return false;\r\n            }\r\n            // Ensure that we keep the context in sync (for processNext()), just in case a plugin\r\n            // doesn't calls processTelemetry() instead of itemContext.processNext() or some\r\n            // other form of error occurred\r\n            if (hasSetNext) {\r\n                // Backward compatibility setting the next plugin on the instance\r\n                plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](nextProxy);\r\n            }\r\n            plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, itemCtx);\r\n            // Process Telemetry is expected to call itemCtx.processNext() or nextPlugin.processTelemetry()\r\n            return true;\r\n        }\r\n        if (!_processChain(itemCtx, _callProcessTelemetry, \"processTelemetry\", function () { return ({ item: env }); }, !(env.sync))) {\r\n            // The underlying plugin is either not defined, not enabled or does not have a processTelemetry implementation\r\n            // so we still want the next plugin to be executed.\r\n            itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n        }\r\n    }\r\n    function _unloadPlugin(unloadCtx, unloadState) {\r\n        function _callTeardown() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only teardown the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === unloadCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    // Handle plugins that don't extend from the BaseTelemetryPlugin\r\n                    pluginState[STR_CORE /* @min:%2ecore */] = null;\r\n                    pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] = true;\r\n                    pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = false;\r\n                    if (plugin[_DYN_TEARDOWN /* @min:%2eteardown */] && plugin[_DYN_TEARDOWN /* @min:%2eteardown */](unloadCtx, unloadState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(unloadCtx, _callTeardown, \"unload\", function () { }, unloadState.isAsync)) {\r\n            // Only called if we hasRun was not true\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n        }\r\n    }\r\n    function _updatePlugin(updateCtx, updateState) {\r\n        function _callUpdate() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only update the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === updateCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    if (plugin[_DYN_UPDATE /* @min:%2eupdate */] && plugin[_DYN_UPDATE /* @min:%2eupdate */](updateCtx, updateState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(updateCtx, _callUpdate, \"update\", function () { }, false)) {\r\n            // Only called if we hasRun was not true\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n        }\r\n    }\r\n    return objFreeze(proxyChain);\r\n}\r\n/**\r\n * This class will be removed!\r\n * @deprecated use createProcessTelemetryContext() instead\r\n */\r\nvar ProcessTelemetryContext = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n     * @param plugins - The plugin instances that will be executed\r\n     * @param config - The current config\r\n     * @param core - The current core instance\r\n     */\r\n    function ProcessTelemetryContext(pluginChain, config, core, startAt) {\r\n        var _self = this;\r\n        var context = createProcessTelemetryContext(pluginChain, config, core, startAt);\r\n        // Proxy all functions of the context to this object\r\n        proxyFunctions(_self, context, objKeys(context));\r\n    }\r\n    return ProcessTelemetryContext;\r\n}());\r\nexport { ProcessTelemetryContext };\r\n//# sourceMappingURL=ProcessTelemetryContext.js.map","/**\n * GoToConnectionsViewTool - Language Model Tool for opening the Connections view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ConnectionsView } from '../admin/ConnectionsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToConnectionsViewTool - Opens the Connections panel\n */\nexport class GoToConnectionsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Connections View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToConnectionsViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ConnectionsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Connections View - showing Airflow connections (databases, APIs, cloud services, etc.)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToConnectionsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Connections View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isBoolean, isFunction, isNullOrUndefined, isString } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\n/**\r\n * @internal\r\n * @ignore\r\n * @param str\r\n * @param defaultValue\r\n * @returns\r\n */\r\nfunction _stringToBoolOrDefault(theValue, defaultValue, theConfig) {\r\n    if (!theValue && isNullOrUndefined(theValue)) {\r\n        return defaultValue;\r\n    }\r\n    if (isBoolean(theValue)) {\r\n        return theValue;\r\n    }\r\n    return asString(theValue)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the field defined as an object\r\n * that should be merged\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfMerge(defaultValue) {\r\n    return {\r\n        mrg: true,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field set function\r\n * @param setter - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfSet(setter, defaultValue) {\r\n    return {\r\n        set: setter,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field validator\r\n * @param validator - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfValidate(validator, defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        isVal: validator,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate and convert the user\r\n * provided value to a boolean from a string or boolean value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBoolean(defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        set: _stringToBoolOrDefault,\r\n        v: !!defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfFunc(defaultValue) {\r\n    return {\r\n        isVal: isFunction,\r\n        v: defaultValue || null\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default string value to apply it not provided or it's not valid, defaults to an empty string\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfString(defaultValue) {\r\n    return {\r\n        isVal: isString,\r\n        v: asString(defaultValue || STR_EMPTY)\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance identifying that value associated with this property\r\n * should not have it's properties converted into a dynamic config properties.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBlockPropValue(defaultValue) {\r\n    return {\r\n        blkVal: true,\r\n        v: defaultValue\r\n    };\r\n}\r\n//# sourceMappingURL=ConfigDefaultHelpers.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport { DagTreeItem } from './DagTreeItem';\nimport { DagTreeView } from './DagTreeView';\n\nexport class DagTreeDataProvider implements vscode.TreeDataProvider<DagTreeItem>\n{\n\tprivate _onDidChangeTreeData: vscode.EventEmitter<DagTreeItem | undefined | void> = new vscode.EventEmitter<DagTreeItem | undefined | void>();\n\treadonly onDidChangeTreeData: vscode.Event<DagTreeItem | undefined | void> = this._onDidChangeTreeData.event;\n\tdagList: any;\n\tdagTreeItemList: DagTreeItem[] = [];\n\tvisibleDagList: DagTreeItem[] = [];\n\n\trefresh(): void {\n\t\tthis._onDidChangeTreeData.fire();\n\t}\n\n\tloadDagTreeItemsFromApiResponse() {\n\t\tthis.dagTreeItemList = [];\n\t\tif (this.dagList) {\n\t\t\tfor (var dag of this.dagList) {\n\t\t\t\tif (dag) {\n\t\t\t\t\tlet treeItem = new DagTreeItem(dag);\n\t\t\t\t\tthis.dagTreeItemList.push(treeItem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetChildren(element: DagTreeItem): Thenable<DagTreeItem[]> {\n\t\tif (!element) {\n\t\t\tthis.visibleDagList = this.getVisibleDagList();\n\t\t\treturn Promise.resolve(this.visibleDagList);\n\t\t}\n\t\treturn Promise.resolve([]);\n\t}\n\n\tgetVisibleDagList(): DagTreeItem[]{\n\t\tvar result: DagTreeItem[] = [];\n\t\tfor (var node of this.dagTreeItemList) {\n\t\t\tif (DagTreeView.Current.FilterString && !node.doesFilterMatch(DagTreeView.Current.FilterString)) { continue; }\n\t\t\tif (DagTreeView.Current.ShowOnlyActive && node.IsPaused) { continue; }\n\t\t\tif (DagTreeView.Current.ShowOnlyFavorite && !node.IsFav) { continue; }\n\n\t\t\tresult.push(node);\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetTreeItem(element: DagTreeItem): DagTreeItem {\n\t\treturn element;\n\t}\n}","import { AirflowApi } from \"./Api\";\nimport { ServerConfig } from '../common/Types';\nimport * as ui from '../common/UI';\nimport * as vscode from 'vscode';\n\nexport class Session {\n\tpublic static Current: Session;\n\n    public Api: AirflowApi | undefined;\n    public Server: ServerConfig | undefined;\n    public Context: vscode.ExtensionContext;\n    public ExtensionUri: vscode.Uri;\n    public ServerList: ServerConfig[] = [];\n\n\tpublic constructor(context: vscode.ExtensionContext) {\n\t\tSession.Current = this;\n        this.Context = context;\n        this.ExtensionUri = context.extensionUri;\n        this.LoadState();\n\t}\n\n    public SaveState() {\n        ui.logToOutput('Saving state...');\n        \n        this.Context.globalState.update('apiUrl', this.Server?.apiUrl);\n        this.Context.globalState.update('apiUserName', this.Server?.apiUserName);\n        this.Context.globalState.update('apiPassword', this.Server?.apiPassword);\n        this.Context.globalState.update('serverList', this.ServerList);\n    }\n\n    public LoadState() {\n        ui.logToOutput('Loading state...');\n\n        const apiUrlTemp: string = this.Context.globalState.get('apiUrl') || '';\n        const apiUserNameTemp: string = this.Context.globalState.get('apiUserName') || '';\n        const apiPasswordTemp: string = this.Context.globalState.get('apiPassword') || '';\n\n        if (apiUrlTemp && apiUserNameTemp) {\n            this.Server = { apiUrl: apiUrlTemp, apiUserName: apiUserNameTemp, apiPassword: apiPasswordTemp };\n            this.Api = new AirflowApi(this.Server);\n        }\n\n        this.ServerList = this.Context.globalState.get('serverList') || [];\n    }\n\n    public SetServer(server: ServerConfig) {\n        this.Server = server;\n        this.Api = new AirflowApi(this.Server);\n        this.SaveState();\n    }\n\n    public ChangeServer(apiUrl: string, apiUserName: string) {\n        this.Server = this.ServerList.find((server) => server.apiUrl === apiUrl && server.apiUserName === apiUserName);   \n        if (this.Server) {\n            this.Api = new AirflowApi(this.Server);\n            this.SaveState();\n        }\n    }\n\n    public RemoveServer(apiUrl: string, apiUserName: string) {\n        this.ServerList = this.ServerList.filter((server) => !(server.apiUrl === apiUrl && server.apiUserName === apiUserName));   \n        this.SaveState();\n    }\n\n    public AddServer(server: ServerConfig) {\n        const exists = this.ServerList.some((s) => s.apiUrl === server.apiUrl && s.apiUserName === server.apiUserName);\n        if (!exists) {\n            this.ServerList.push(server);\n            this.SaveState();\n        }\n    }\n\n    public TestServer(serverConfig: ServerConfig) {\n        let api = new AirflowApi(serverConfig);\n        let result = api.checkConnection();\n        return result;\n    }\n\n    public ClearServers() {\n        this.ServerList = [];\n        this.Server = undefined;\n        this.Api = undefined;\n        this.SaveState();\n    }\n\n    public GetServer(apiUrl: string, apiUserName: string) {\n        return this.ServerList.find((server) => server.apiUrl === apiUrl && server.apiUserName === apiUserName);\n    }\n\n\tpublic dispose() {\n\t\tSession.Current = undefined;\n\t}\n}","import * as vscode from 'vscode';\nimport { AdminTreeItem } from './AdminTreeItem';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class AdminTreeView implements vscode.TreeDataProvider<AdminTreeItem> {\n  private _onDidChangeTreeData: vscode.EventEmitter<AdminTreeItem | undefined | null | void> = new vscode.EventEmitter<AdminTreeItem | undefined | null | void>();\n  readonly onDidChangeTreeData: vscode.Event<AdminTreeItem | undefined | null | void> = this._onDidChangeTreeData.event;\n\n  constructor() {\n    Telemetry.Current.send('AdminTreeViewInitialized');\n  }\n\n  refresh(): void {\n    this._onDidChangeTreeData.fire();\n  }\n\n  getTreeItem(element: AdminTreeItem): vscode.TreeItem {\n    return element;\n  }\n\n  getChildren(element?: AdminTreeItem): Thenable<AdminTreeItem[]> {\n    if (!element) {\n      // Root level - return the admin nodes\n      return Promise.resolve([\n        new AdminTreeItem(\n          'Variables',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewVariables',\n            title: 'View Variables',\n            arguments: []\n          },\n          new vscode.ThemeIcon('symbol-variable')\n        ),\n        new AdminTreeItem(\n          'Connections',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewConnections',\n            title: 'View Connections',\n            arguments: []\n          },\n          new vscode.ThemeIcon('link')\n        ),\n        new AdminTreeItem(\n          'Providers',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewProviders',\n            title: 'View Providers',\n            arguments: []\n          },\n          new vscode.ThemeIcon('package')\n        ),\n        new AdminTreeItem(\n          'Configs',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewConfigs',\n            title: 'View Configs',\n            arguments: []\n          },\n          new vscode.ThemeIcon('settings-gear')\n        ),\n        new AdminTreeItem(\n          'Plugins',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewPlugins',\n            title: 'View Plugins',\n            arguments: []\n          },\n          new vscode.ThemeIcon('extensions')\n        ),\n        new AdminTreeItem(\n          'Server Health',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewServerHealth',\n            title: 'View Server Health',\n            arguments: []\n          },\n          new vscode.ThemeIcon('pulse')\n        )\n      ]);\n    }\n    return Promise.resolve([]);\n  }\n}\n","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n// Licensed under the\r\nexport { correlationIdSetPrefix, correlationIdGetPrefix, correlationIdCanIncludeCorrelationHeader, correlationIdGetCorrelationContext, correlationIdGetCorrelationContextValue, dateTimeUtilsNow, dateTimeUtilsDuration, isInternalApplicationInsightsEndpoint, createDistributedTraceContextFromTrace } from \"./Util\";\r\nexport { ThrottleMgr } from \"./ThrottleMgr\";\r\nexport { parseConnectionString, ConnectionStringParser } from \"./ConnectionStringParser\";\r\nexport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nexport { DisabledPropertyName, ProcessLegacy, SampleRate, HttpMethod, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, strNotSpecified } from \"./Constants\";\r\nexport { Envelope } from \"./Telemetry/Common/Envelope\";\r\nexport { Event } from \"./Telemetry/Event\";\r\nexport { Exception } from \"./Telemetry/Exception\";\r\nexport { Metric } from \"./Telemetry/Metric\";\r\nexport { PageView } from \"./Telemetry/PageView\";\r\nexport { RemoteDependencyData } from \"./Telemetry/RemoteDependencyData\";\r\nexport { Trace } from \"./Telemetry/Trace\";\r\nexport { PageViewPerformance } from \"./Telemetry/PageViewPerformance\";\r\nexport { Data } from \"./Telemetry/Common/Data\";\r\nexport { SeverityLevel } from \"./Interfaces/Contracts/SeverityLevel\";\r\nexport { ConfigurationManager } from \"./Interfaces/IConfig\";\r\nexport { ContextTagKeys } from \"./Interfaces/Contracts/ContextTagKeys\";\r\nexport { dataSanitizeKeyAndAddUniqueness, dataSanitizeKey, dataSanitizeString, dataSanitizeUrl, dataSanitizeMessage, dataSanitizeException, dataSanitizeProperties, dataSanitizeMeasurements, dataSanitizeId, dataSanitizeInput, dsPadNumber } from \"./Telemetry/Common/DataSanitizer\";\r\nexport { TelemetryItemCreator, createTelemetryItem } from \"./TelemetryItemCreator\";\r\nexport { CtxTagKeys, Extensions } from \"./Interfaces/PartAExtensions\";\r\nexport { DistributedTracingModes, EventPersistence } from \"./Enums\";\r\nexport { stringToBoolOrDefault, msToTimeSpan, getExtensionByName, isCrossOriginError } from \"./HelperFuncs\";\r\nexport { isBeaconsSupported as isBeaconApiSupported, createTraceParent, parseTraceParent, isValidTraceId, isValidSpanId, isValidTraceParent, isSampledFlag, formatTraceParent, findW3cTraceParent, findAllScripts } from \"@microsoft/applicationinsights-core-js\";\r\nexport { createDomEvent } from \"./DomHelperFuncs\";\r\nexport { utlDisableStorage, utlEnableStorage, utlCanUseLocalStorage, utlGetLocalStorage, utlSetLocalStorage, utlRemoveStorage, utlCanUseSessionStorage, utlGetSessionStorageKeys, utlGetSessionStorage, utlSetSessionStorage, utlRemoveSessionStorage, utlSetStoragePrefix } from \"./StorageHelperFuncs\";\r\nexport { urlParseUrl, urlGetAbsoluteUrl, urlGetPathName, urlGetCompleteUrl, urlParseHost, urlParseFullHost } from \"./UrlHelperFuncs\";\r\nexport { createOfflineListener } from \"./Offline\";\r\nexport var PropertiesPluginIdentifier = \"AppInsightsPropertiesPlugin\";\r\nexport var BreezeChannelIdentifier = \"AppInsightsChannelPlugin\";\r\nexport var AnalyticsPluginIdentifier = \"ApplicationInsightsAnalytics\";\r\n//# sourceMappingURL=applicationinsights-common.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, isArray, isString, strLeft, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_ATTRIBUTE, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_PUSH, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_TRACE_FLAGS, _DYN_VERSION } from \"../__DynamicConstants\";\r\nimport { generateW3CId } from \"./CoreUtils\";\r\nimport { findMetaTag, findNamedServerTiming } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// using {0,16} for leading and trailing whitespace just to constrain the possible runtime of a random string\r\nvar TRACE_PARENT_REGEX = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})(-[^\\s]{1,64})?$/i;\r\nvar DEFAULT_VERSION = \"00\";\r\nvar INVALID_VERSION = \"ff\";\r\nvar INVALID_TRACE_ID = \"00000000000000000000000000000000\";\r\nvar INVALID_SPAN_ID = \"0000000000000000\";\r\nvar SAMPLED_FLAG = 0x01;\r\nfunction _isValid(value, len, invalidValue) {\r\n    if (value && value[_DYN_LENGTH /* @min:%2elength */] === len && value !== invalidValue) {\r\n        return !!value.match(/^[\\da-f]*$/i);\r\n    }\r\n    return false;\r\n}\r\nfunction _formatValue(value, len, defValue) {\r\n    if (_isValid(value, len)) {\r\n        return value;\r\n    }\r\n    return defValue;\r\n}\r\nfunction _formatFlags(value) {\r\n    if (isNaN(value) || value < 0 || value > 255) {\r\n        value = 0x01;\r\n    }\r\n    var result = value.toString(16);\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < 2) {\r\n        result = \"0\" + result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new ITraceParent instance using the provided values.\r\n * @param traceId - The traceId to use, when invalid a new random W3C id will be generated.\r\n * @param spanId - The parent/span id to use, a new random value will be generated if it is invalid.\r\n * @param flags - The traceFlags to use, defaults to zero (0) if not supplied or invalid\r\n * @param version - The version to used, defaults to version \"01\" if not supplied or invalid.\r\n * @returns\r\n */\r\nexport function createTraceParent(traceId, spanId, flags, version) {\r\n    return {\r\n        version: _isValid(version, 2, INVALID_VERSION) ? version : DEFAULT_VERSION,\r\n        traceId: isValidTraceId(traceId) ? traceId : generateW3CId(),\r\n        spanId: isValidSpanId(spanId) ? spanId : strLeft(generateW3CId(), 16),\r\n        traceFlags: flags >= 0 && flags <= 0xFF ? flags : 1\r\n    };\r\n}\r\n/**\r\n * Attempt to parse the provided string as a W3C TraceParent header value (https://www.w3.org/TR/trace-context/#traceparent-header)\r\n *\r\n * @param value - The value to be parsed\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function parseTraceParent(value, selectIdx) {\r\n    if (!value) {\r\n        // Don't pass a null/undefined or empty string\r\n        return null;\r\n    }\r\n    if (isArray(value)) {\r\n        // The value may have been encoded on the page into an array so handle this automatically\r\n        value = value[0] || \"\";\r\n    }\r\n    if (!value || !isString(value) || value[_DYN_LENGTH /* @min:%2elength */] > 8192) {\r\n        // limit potential processing based on total length\r\n        return null;\r\n    }\r\n    if (value[_DYN_INDEX_OF /* @min:%2eindexOf */](\",\") !== -1) {\r\n        var values = value[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        value = values[selectIdx > 0 && values[_DYN_LENGTH /* @min:%2elength */] > selectIdx ? selectIdx : 0];\r\n    }\r\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\r\n    var match = TRACE_PARENT_REGEX.exec(strTrim(value));\r\n    if (!match || // No match\r\n        match[1] === INVALID_VERSION || // version ff is forbidden\r\n        match[2] === INVALID_TRACE_ID || // All zeros is considered to be invalid\r\n        match[3] === INVALID_SPAN_ID) { // All zeros is considered to be invalid\r\n        return null;\r\n    }\r\n    return {\r\n        version: (match[1] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        traceId: (match[2] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        spanId: (match[3] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        traceFlags: parseInt(match[4], 16)\r\n    };\r\n}\r\n/**\r\n * Is the provided W3c Trace Id a valid string representation, it must be a 32-character string\r\n * of lowercase hexadecimal characters for example, 4bf92f3577b34da6a3ce929d0e0e4736.\r\n * If all characters as zero (00000000000000000000000000000000) it will be considered an invalid value.\r\n * @param value - The W3c trace Id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidTraceId(value) {\r\n    return _isValid(value, 32, INVALID_TRACE_ID);\r\n}\r\n/**\r\n * Is the provided W3c span id (aka. parent id) a valid string representation, it must be a 16-character\r\n * string of lowercase hexadecimal characters, for example, 00f067aa0ba902b7.\r\n * If all characters are zero (0000000000000000) this is considered an invalid value.\r\n * @param value - The W3c span id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidSpanId(value) {\r\n    return _isValid(value, 16, INVALID_SPAN_ID);\r\n}\r\n/**\r\n * Validates that the provided ITraceParent instance conforms to the currently supported specifications\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isValidTraceParent(value) {\r\n    if (!value ||\r\n        !_isValid(value[_DYN_VERSION /* @min:%2eversion */], 2, INVALID_VERSION) ||\r\n        !_isValid(value.traceId, 32, INVALID_TRACE_ID) ||\r\n        !_isValid(value.spanId, 16, INVALID_SPAN_ID) ||\r\n        !_isValid(_formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]), 2)) {\r\n        // Each known field must contain a valid value\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Is the parsed traceParent indicating that the trace is currently sampled.\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isSampledFlag(value) {\r\n    if (isValidTraceParent(value)) {\r\n        return (value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] & SAMPLED_FLAG) === SAMPLED_FLAG;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Format the ITraceParent value as a string using the supported and know version formats.\r\n * So even if the passed traceParent is a later version the string value returned from this\r\n * function will convert it to only the known version formats.\r\n * This currently only supports version \"00\" and invalid \"ff\"\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function formatTraceParent(value) {\r\n    if (value) {\r\n        // Special Note: This only supports formatting as version 00, future versions should encode any known supported version\r\n        // So parsing a future version will populate the correct version value but reformatting will reduce it to version 00.\r\n        var flags = _formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]);\r\n        if (!_isValid(flags, 2)) {\r\n            flags = \"01\";\r\n        }\r\n        var version = value[_DYN_VERSION /* @min:%2eversion */] || DEFAULT_VERSION;\r\n        if (version !== \"00\" && version !== \"ff\") {\r\n            // Reduce version to \"00\"\r\n            version = DEFAULT_VERSION;\r\n        }\r\n        // Format as version 00\r\n        return \"\".concat(version.toLowerCase(), \"-\").concat(_formatValue(value.traceId, 32, INVALID_TRACE_ID).toLowerCase(), \"-\").concat(_formatValue(value.spanId, 16, INVALID_SPAN_ID).toLowerCase(), \"-\").concat(flags.toLowerCase());\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n * Helper function to fetch the passed traceparent from the page, looking for it as a meta-tag or a Server-Timing header.\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function findW3cTraceParent(selectIdx) {\r\n    var name = \"traceparent\";\r\n    var traceParent = parseTraceParent(findMetaTag(name), selectIdx);\r\n    if (!traceParent) {\r\n        traceParent = parseTraceParent(findNamedServerTiming(name), selectIdx);\r\n    }\r\n    return traceParent;\r\n}\r\n/**\r\n * Find all script tags in the provided document and return the information about them.\r\n * @param doc - The document to search for script tags\r\n * @returns\r\n */\r\nexport function findAllScripts(doc) {\r\n    var scripts = doc.getElementsByTagName(\"script\");\r\n    var result = [];\r\n    arrForEach(scripts, function (script) {\r\n        var src = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"src\");\r\n        if (src) {\r\n            var crossOrigin = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"crossorigin\");\r\n            var async = script.hasAttribute(\"async\") === true;\r\n            var defer = script.hasAttribute(\"defer\") === true;\r\n            var referrerPolicy = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"referrerpolicy\");\r\n            var info = { url: src };\r\n            if (crossOrigin) {\r\n                info.crossOrigin = crossOrigin;\r\n            }\r\n            if (async) {\r\n                info.async = async;\r\n            }\r\n            if (defer) {\r\n                info.defer = defer;\r\n            }\r\n            if (referrerPolicy) {\r\n                info.referrerPolicy = referrerPolicy;\r\n            }\r\n            result[_DYN_PUSH /* @min:%2epush */](info);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n//# sourceMappingURL=W3cTraceParent.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, isFunction } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_TRACE_FLAGS, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { createElmNodeData } from \"./DataCacheHelper\";\r\nimport { STR_CORE, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { isValidSpanId, isValidTraceId } from \"./W3cTraceParent\";\r\nvar pluginStateData = createElmNodeData(\"plugin\");\r\nexport function _getPluginState(plugin) {\r\n    return pluginStateData.get(plugin, \"state\", {}, true);\r\n}\r\n/**\r\n * Initialize the queue of plugins\r\n * @param plugins - The array of plugins to initialize and setting of the next plugin\r\n * @param config - The current config for the instance\r\n * @param core - THe current core instance\r\n * @param extensions - The extensions\r\n */\r\nexport function initializePlugins(processContext, extensions) {\r\n    // Set the next plugin and identified the uninitialized plugins\r\n    var initPlugins = [];\r\n    var lastPlugin = null;\r\n    var proxy = processContext[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    var pluginState;\r\n    while (proxy) {\r\n        var thePlugin = proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n        if (thePlugin) {\r\n            if (lastPlugin && lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] && thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]) {\r\n                // Set this plugin as the next for the previous one\r\n                lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](thePlugin);\r\n            }\r\n            pluginState = _getPluginState(thePlugin);\r\n            var isInitialized = !!pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */];\r\n            if (thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]) {\r\n                isInitialized = thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]();\r\n            }\r\n            if (!isInitialized) {\r\n                initPlugins[_DYN_PUSH /* @min:%2epush */](thePlugin);\r\n            }\r\n            lastPlugin = thePlugin;\r\n            proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n        }\r\n    }\r\n    // Now initialize the plugins\r\n    arrForEach(initPlugins, function (thePlugin) {\r\n        var core = processContext[STR_CORE /* @min:%2ecore */]();\r\n        thePlugin[_DYN_INITIALIZE /* @min:%2einitialize */](processContext.getCfg(), core, extensions, processContext[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n        pluginState = _getPluginState(thePlugin);\r\n        // Only add the core to the state if the plugin didn't set it (doesn't extend from BaseTelemetryPlugin)\r\n        if (!thePlugin[STR_CORE] && !pluginState[STR_CORE]) {\r\n            pluginState[STR_CORE] = core;\r\n        }\r\n        pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = true;\r\n        delete pluginState[_DYN_TEARDOWN /* @min:%2eteardown */];\r\n    });\r\n}\r\nexport function sortPlugins(plugins) {\r\n    // Sort by priority\r\n    return plugins.sort(function (extA, extB) {\r\n        var result = 0;\r\n        if (extB) {\r\n            var bHasProcess = extB[STR_PROCESS_TELEMETRY];\r\n            if (extA[STR_PROCESS_TELEMETRY]) {\r\n                result = bHasProcess ? extA[STR_PRIORITY] - extB[STR_PRIORITY] : 1;\r\n            }\r\n            else if (bHasProcess) {\r\n                result = -1;\r\n            }\r\n        }\r\n        else {\r\n            result = extA ? 1 : -1;\r\n        }\r\n        return result;\r\n    });\r\n    // sort complete\r\n}\r\n/**\r\n * Teardown / Unload helper to perform teardown/unloading operations for the provided components synchronously or asynchronously, this will call any\r\n * _doTeardown() or _doUnload() functions on the provided components to allow them to finish removal.\r\n * @param components - The components you want to unload\r\n * @param unloadCtx - This is the context that should be used during unloading.\r\n * @param unloadState - The details / state of the unload process, it holds details like whether it should be unloaded synchronously or asynchronously and the reason for the unload.\r\n * @param asyncCallback - An optional callback that the plugin must call if it returns true to inform the caller that it has completed any async unload/teardown operations.\r\n * @returns boolean - true if the plugin has or will call asyncCallback, this allows the plugin to perform any asynchronous operations.\r\n */\r\nexport function unloadComponents(components, unloadCtx, unloadState, asyncCallback) {\r\n    var idx = 0;\r\n    function _doUnload() {\r\n        while (idx < components[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var component = components[idx++];\r\n            if (component) {\r\n                var func = component._doUnload || component[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */];\r\n                if (isFunction(func)) {\r\n                    if (func.call(component, unloadCtx, unloadState, _doUnload) === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return _doUnload();\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext which optionally also \"sets\" the value on a parent\r\n * @param parentCtx - An optional parent distributed trace instance\r\n * @returns A new IDistributedTraceContext instance that uses an internal temporary object\r\n */\r\nexport function createDistributedTraceContext(parentCtx) {\r\n    var trace = {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace.traceId;\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace.traceId = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace.spanId;\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace.spanId = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */];\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TelemetryHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\n/**\r\n * The EventsDiscardedReason enumeration contains a set of values that specify the reason for discarding an event.\r\n */\r\nexport var EventsDiscardedReason = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eEventsDiscardedReason.Unknown */,\r\n    /**\r\n     * Status set to non-retryable.\r\n     */\r\n    NonRetryableStatus: 1 /* eEventsDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * The event is invalid.\r\n     */\r\n    InvalidEvent: 2 /* eEventsDiscardedReason.InvalidEvent */,\r\n    /**\r\n     * The size of the event is too large.\r\n     */\r\n    SizeLimitExceeded: 3 /* eEventsDiscardedReason.SizeLimitExceeded */,\r\n    /**\r\n     * The server is not accepting events from this instrumentation key.\r\n     */\r\n    KillSwitch: 4 /* eEventsDiscardedReason.KillSwitch */,\r\n    /**\r\n     * The event queue is full.\r\n     */\r\n    QueueFull: 5 /* eEventsDiscardedReason.QueueFull */,\r\n    /**\r\n     * The sendBeacon API call failed for reasons other than size limits.\r\n     */\r\n    BeaconSendFailure: 6 /* eEventsDiscardedReason.BeaconSendFailure */\r\n}));\r\n/**\r\n *  The eBatchDiscardedReason enumeration contains a set of values that specify the reason for discarding offline batches.\r\n */\r\nexport var BatchDiscardedReason = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eBatchDiscardedReason.Unknown */,\r\n    /**\r\n      * Status set to non-retryable after sending\r\n      */\r\n    NonRetryableStatus: 1 /* eBatchDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * Batches with lower number of critical events are dropped to free up storage space\r\n     */\r\n    CleanStorage: 2 /* eBatchDiscardedReason.CleanStorage */,\r\n    /**\r\n     * The batches in storage exceed max allowed time\r\n     */\r\n    MaxInStorageTimeExceeded: 3 /* eBatchDiscardedReason.MaxInStorageTimeExceeded */\r\n}));\r\n//# sourceMappingURL=EventsDiscardedReason.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n * Real Time profile (default profile). RealTime Latency events are sent every 1 sec and\r\n * Normal Latency events are sent every 2 sec.\r\n */\r\nexport var RT_PROFILE = \"REAL_TIME\";\r\n/**\r\n * Near Real Time profile. RealTime Latency events are sent every 3 sec and\r\n * Normal Latency events are sent every 6 sec.\r\n */\r\nexport var NRT_PROFILE = \"NEAR_REAL_TIME\";\r\n/**\r\n * Best Effort. RealTime Latency events are sent every 9 sec and\r\n * Normal Latency events are sent every 18 sec.\r\n */\r\nexport var BE_PROFILE = \"BEST_EFFORT\";\r\n//# sourceMappingURL=DataModels.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_POST_METHOD = \"POST\";\r\nexport var STR_DISABLED_PROPERTY_NAME = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var STR_DROPPED = \"drop\";\r\nexport var STR_SENDING = \"send\";\r\nexport var STR_REQUEUE = \"requeue\";\r\nexport var STR_RESPONSE_FAIL = \"rspFail\";\r\nexport var STR_OTHER = \"oth\";\r\nexport var DEFAULT_CACHE_CONTROL = \"no-cache, no-store\";\r\nexport var DEFAULT_CONTENT_TYPE = \"application/x-json-stream\";\r\nexport var STR_CACHE_CONTROL = \"cache-control\";\r\nexport var STR_CONTENT_TYPE_HEADER = \"content-type\";\r\nexport var STR_KILL_TOKENS_HEADER = \"kill-tokens\";\r\nexport var STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nexport var STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nexport var STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\nexport var STR_CLIENT_VERSION = \"client-version\";\r\nexport var STR_CLIENT_ID = \"client-id\";\r\nexport var STR_TIME_DELTA_TO_APPLY = \"time-delta-to-apply-millis\";\r\nexport var STR_UPLOAD_TIME = \"upload-time\";\r\nexport var STR_API_KEY = \"apikey\";\r\nexport var STR_MSA_DEVICE_TICKET = \"AuthMsaDeviceTicket\";\r\nexport var STR_AUTH_WEB_TOKEN = \"WebAuthToken\";\r\nexport var STR_AUTH_XTOKEN = \"AuthXToken\";\r\nexport var STR_SDK_VERSION = \"sdk-version\";\r\nexport var STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nexport var STR_MSFPC = \"msfpc\";\r\nexport var STR_TRACE = \"trace\";\r\nexport var STR_USER = \"user\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_ALLOW_REQUEST_SENDIN0 = \"allowRequestSending\"; // Count: 3\r\nexport var _DYN_SHOULD_ADD_CLOCK_SKE1 = \"shouldAddClockSkewHeaders\"; // Count: 2\r\nexport var _DYN_GET_CLOCK_SKEW_HEADE2 = \"getClockSkewHeaderValue\"; // Count: 2\r\nexport var _DYN_SET_CLOCK_SKEW = \"setClockSkew\"; // Count: 3\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 7\r\nexport var _DYN_I_KEY = \"iKey\"; // Count: 10\r\nexport var _DYN_COUNT = \"count\"; // Count: 19\r\nexport var _DYN_EVENTS = \"events\"; // Count: 8\r\nexport var _DYN_PUSH = \"push\"; // Count: 15\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 3\r\nexport var _DYN_HDRS = \"hdrs\"; // Count: 7\r\nexport var _DYN_USE_HDRS = \"useHdrs\"; // Count: 4\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_SET_TIMEOUT_OVERRIDE = \"setTimeoutOverride\"; // Count: 3\r\nexport var _DYN_CLEAR_TIMEOUT_OVERRI3 = \"clearTimeoutOverride\"; // Count: 3\r\nexport var _DYN_PAYLOAD_PREPROCESSOR = \"payloadPreprocessor\"; // Count: 2\r\nexport var _DYN_OVERRIDE_ENDPOINT_UR4 = \"overrideEndpointUrl\"; // Count: 3\r\nexport var _DYN_AVOID_OPTIONS = \"avoidOptions\"; // Count: 3\r\nexport var _DYN_DISABLE_EVENT_TIMING5 = \"disableEventTimings\"; // Count: 2\r\nexport var _DYN_ENABLE_COMPOUND_KEY = \"enableCompoundKey\"; // Count: 4\r\nexport var _DYN_DISABLE_XHR_SYNC = \"disableXhrSync\"; // Count: 6\r\nexport var _DYN_DISABLE_FETCH_KEEP_A6 = \"disableFetchKeepAlive\"; // Count: 7\r\nexport var _DYN_ADD_NO_RESPONSE = \"addNoResponse\"; // Count: 3\r\nexport var _DYN_USE_SEND_BEACON = \"useSendBeacon\"; // Count: 3\r\nexport var _DYN_FETCH_CREDENTIALS = \"fetchCredentials\"; // Count: 4\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR7 = \"alwaysUseXhrOverride\"; // Count: 3\r\nexport var _DYN_SERIALIZE_OFFLINE_EV8 = \"serializeOfflineEvt\"; // Count: 2\r\nexport var _DYN_GET_OFFLINE_REQUEST_9 = \"getOfflineRequestDetails\"; // Count: 2\r\nexport var _DYN_CREATE_PAYLOAD = \"createPayload\"; // Count: 4\r\nexport var _DYN_CREATE_ONE_DSPAYLOAD = \"createOneDSPayload\"; // Count: 4\r\nexport var _DYN_PAYLOAD_BLOB = \"payloadBlob\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 10\r\nexport var _DYN__THE_PAYLOAD = \"_thePayload\"; // Count: 5\r\nexport var _DYN_BATCHES = \"batches\"; // Count: 15\r\nexport var _DYN_SEND_TYPE = \"sendType\"; // Count: 13\r\nexport var _DYN_CAN_SEND_REQUEST = \"canSendRequest\"; // Count: 3\r\nexport var _DYN_SEND_QUEUED_REQUESTS = \"sendQueuedRequests\"; // Count: 5\r\nexport var _DYN_SET_UNLOADING = \"setUnloading\"; // Count: 3\r\nexport var _DYN_IS_TENANT_KILLED = \"isTenantKilled\"; // Count: 3\r\nexport var _DYN_SEND_SYNCHRONOUS_BAT10 = \"sendSynchronousBatch\"; // Count: 2\r\nexport var _DYN__TRANSPORT = \"_transport\"; // Count: 3\r\nexport var _DYN_GET_WPARAM = \"getWParam\"; // Count: 4\r\nexport var _DYN_IS_BEACON = \"isBeacon\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_IS_TEARDOWN = \"isTeardown\"; // Count: 3\r\nexport var _DYN__SEND_REASON = \"_sendReason\"; // Count: 3\r\nexport var _DYN_SET_KILL_SWITCH_TENA11 = \"setKillSwitchTenants\"; // Count: 2\r\nexport var _DYN__BACK_OFF_TRANSMISSI12 = \"_backOffTransmission\"; // Count: 2\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 4\r\nexport var _DYN_IGNORE_MC1_MS0_COOKI13 = \"ignoreMc1Ms0CookieProcessing\"; // Count: 2\r\nexport var _DYN_AUTO_FLUSH_EVENTS_LI14 = \"autoFlushEventsLimit\"; // Count: 2\r\nexport var _DYN_DISABLE_AUTO_BATCH_F15 = \"disableAutoBatchFlushLimit\"; // Count: 2\r\nexport var _DYN_OVERRIDE_INSTRUMENTA16 = \"overrideInstrumentationKey\"; // Count: 2\r\nexport var _DYN_SEND_ATTEMPT = \"sendAttempt\"; // Count: 4\r\nexport var _DYN_LATENCY = \"latency\"; // Count: 7\r\nexport var _DYN_SYNC = \"sync\"; // Count: 7\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* EventBatch.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2020\r\n*/\r\nimport { isNullOrUndefined, isValueAssigned } from \"@microsoft/1ds-core-js\";\r\nimport { STR_EMPTY, STR_MSFPC } from \"./InternalConstants\";\r\nimport { _DYN_CONCAT, _DYN_COUNT, _DYN_EVENTS, _DYN_I_KEY, _DYN_LENGTH, _DYN_PUSH, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nfunction _getEventMsfpc(theEvent) {\r\n    var intWeb = ((theEvent.ext || {})[\"intweb\"]);\r\n    if (intWeb && isValueAssigned(intWeb[STR_MSFPC])) {\r\n        return intWeb[STR_MSFPC];\r\n    }\r\n    return null;\r\n}\r\nfunction _getMsfpc(theEvents) {\r\n    var msfpc = null;\r\n    for (var lp = 0; msfpc === null && lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        msfpc = _getEventMsfpc(theEvents[lp]);\r\n    }\r\n    return msfpc;\r\n}\r\n/**\r\n* This class defines a \"batch\" events related to a specific iKey, it is used by the PostChannel and HttpManager\r\n* to collect and transfer ownership of events without duplicating them in-memory. This reduces the previous\r\n* array duplication and shared ownership issues that occurred due to race conditions caused by the async nature\r\n* of sending requests.\r\n*/\r\nvar EventBatch = /** @class */ (function () {\r\n    /**\r\n     * Private constructor so that caller is forced to use the static create method.\r\n     * @param iKey - The iKey to associate with the events (not validated)\r\n     * @param addEvents - The optional collection of events to assign to this batch - defaults to an empty array.\r\n     */\r\n    function EventBatch(iKey, addEvents) {\r\n        var events = addEvents ? [][_DYN_CONCAT /* @min:%2econcat */](addEvents) : [];\r\n        var _self = this;\r\n        var _msfpc = _getMsfpc(events);\r\n        _self[_DYN_I_KEY /* @min:%2eiKey */] = function () {\r\n            return iKey;\r\n        };\r\n        _self.Msfpc = function () {\r\n            // return the cached value unless it's undefined -- used to avoid cpu\r\n            return _msfpc || STR_EMPTY;\r\n        };\r\n        _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n            return events[_DYN_LENGTH /* @min:%2elength */];\r\n        };\r\n        _self[_DYN_EVENTS /* @min:%2eevents */] = function () {\r\n            return events;\r\n        };\r\n        _self.addEvent = function (theEvent) {\r\n            if (theEvent) {\r\n                events[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                if (!_msfpc) {\r\n                    // Not found so try and find one\r\n                    _msfpc = _getEventMsfpc(theEvent);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        _self[_DYN_SPLIT /* @min:%2esplit */] = function (fromEvent, numEvents) {\r\n            // Create a new batch with the same iKey\r\n            var theEvents;\r\n            if (fromEvent < events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                var cnt = events[_DYN_LENGTH /* @min:%2elength */] - fromEvent;\r\n                if (!isNullOrUndefined(numEvents)) {\r\n                    cnt = numEvents < cnt ? numEvents : cnt;\r\n                }\r\n                theEvents = events.splice(fromEvent, cnt);\r\n                // reset the fetched msfpc value\r\n                _msfpc = _getMsfpc(events);\r\n            }\r\n            return new EventBatch(iKey, theEvents);\r\n        };\r\n    }\r\n    /**\r\n     * Creates a new Event Batch object\r\n     * @param iKey - The iKey associated with this batch of events\r\n     */\r\n    EventBatch.create = function (iKey, theEvents) {\r\n        return new EventBatch(iKey, theEvents);\r\n    };\r\n    return EventBatch;\r\n}());\r\nexport { EventBatch };\r\n//# sourceMappingURL=EventBatch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ClockSkewManager.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_ALLOW_REQUEST_SENDIN0, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_SET_CLOCK_SKEW, _DYN_SHOULD_ADD_CLOCK_SKE1 } from \"./__DynamicConstants\";\r\n/**\r\n* Class to manage clock skew correction.\r\n*/\r\nvar ClockSkewManager = /** @class */ (function () {\r\n    function ClockSkewManager() {\r\n        var _allowRequestSending = true;\r\n        var _shouldAddClockSkewHeaders = true;\r\n        var _isFirstRequest = true;\r\n        var _clockSkewHeaderValue = \"use-collector-delta\";\r\n        var _clockSkewSet = false;\r\n        dynamicProto(ClockSkewManager, this, function (_self) {\r\n            /**\r\n             * Determine if requests can be sent.\r\n             * @returns True if requests can be sent, false otherwise.\r\n             */\r\n            _self[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */] = function () {\r\n                return _allowRequestSending;\r\n            };\r\n            /**\r\n             * Tells the ClockSkewManager that it should assume that the first request has now been sent,\r\n             * If this method had not yet been called AND the clock Skew had not been set this will set\r\n             * allowRequestSending to false until setClockSet() is called.\r\n             */\r\n            _self.firstRequestSent = function () {\r\n                if (_isFirstRequest) {\r\n                    _isFirstRequest = false;\r\n                    if (!_clockSkewSet) {\r\n                        // Block sending until we get the first clock Skew\r\n                        _allowRequestSending = false;\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * Determine if clock skew headers should be added to the request.\r\n             * @returns True if clock skew headers should be added, false otherwise.\r\n             */\r\n            _self[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */] = function () {\r\n                return _shouldAddClockSkewHeaders;\r\n            };\r\n            /**\r\n             * Gets the clock skew header value.\r\n             * @returns The clock skew header value.\r\n             */\r\n            _self[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */] = function () {\r\n                return _clockSkewHeaderValue;\r\n            };\r\n            /**\r\n             * Sets the clock skew header value. Once clock skew is set this method\r\n             * is no-op.\r\n             * @param timeDeltaInMillis - Time delta to be saved as the clock skew header value.\r\n             */\r\n            _self[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */] = function (timeDeltaInMillis) {\r\n                if (!_clockSkewSet) {\r\n                    if (timeDeltaInMillis) {\r\n                        _clockSkewHeaderValue = timeDeltaInMillis;\r\n                        _shouldAddClockSkewHeaders = true;\r\n                        _clockSkewSet = true;\r\n                    }\r\n                    else {\r\n                        _shouldAddClockSkewHeaders = false;\r\n                    }\r\n                    // Unblock sending\r\n                    _allowRequestSending = true;\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for ClockSkewManager.prototype.allowRequestSending.\r\n// Removed Stub for ClockSkewManager.prototype.firstRequestSent.\r\n// Removed Stub for ClockSkewManager.prototype.shouldAddClockSkewHeaders.\r\n// Removed Stub for ClockSkewManager.prototype.getClockSkewHeaderValue.\r\n// Removed Stub for ClockSkewManager.prototype.setClockSkew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ClockSkewManager.__ieDyn=1;\n\n    return ClockSkewManager;\r\n}());\r\nexport { ClockSkewManager };\r\n//# sourceMappingURL=ClockSkewManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* KillSwitch.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrForEach, dateNow, strTrim } from \"@microsoft/1ds-core-js\";\r\nimport { _DYN_IS_TENANT_KILLED, _DYN_LENGTH, _DYN_PUSH, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nvar SecToMsMultiplier = 1000;\r\n/**\r\n* Class to stop certain tenants sending events.\r\n*/\r\nvar KillSwitch = /** @class */ (function () {\r\n    function KillSwitch() {\r\n        var _killedTokenDictionary = {};\r\n        function _normalizeTenants(values) {\r\n            var result = [];\r\n            if (values) {\r\n                arrForEach(values, function (value) {\r\n                    result[_DYN_PUSH /* @min:%2epush */](strTrim(value));\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n        dynamicProto(KillSwitch, this, function (_self) {\r\n            _self[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */] = function (killTokens, killDuration) {\r\n                if (killTokens && killDuration) {\r\n                    try {\r\n                        var killedTokens = _normalizeTenants(killTokens[_DYN_SPLIT /* @min:%2esplit */](\",\"));\r\n                        if (killDuration === \"this-request-only\") {\r\n                            return killedTokens;\r\n                        }\r\n                        var durationMs = parseInt(killDuration, 10) * SecToMsMultiplier;\r\n                        for (var i = 0; i < killedTokens[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n                            _killedTokenDictionary[killedTokens[i]] = dateNow() + durationMs;\r\n                        }\r\n                    }\r\n                    catch (ex) {\r\n                        return [];\r\n                    }\r\n                }\r\n                return [];\r\n            };\r\n            _self[_DYN_IS_TENANT_KILLED /* @min:%2eisTenantKilled */] = function (tenantToken) {\r\n                var killDictionary = _killedTokenDictionary;\r\n                var name = strTrim(tenantToken);\r\n                if (killDictionary[name] !== undefined && killDictionary[name] > dateNow()) {\r\n                    return true;\r\n                }\r\n                delete killDictionary[name];\r\n                return false;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for KillSwitch.prototype.setKillSwitchTenants.\r\n// Removed Stub for KillSwitch.prototype.isTenantKilled.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    KillSwitch.__ieDyn=1;\n\n    return KillSwitch;\r\n}());\r\nexport { KillSwitch };\r\n//# sourceMappingURL=KillSwitch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { mathFloor, mathMin } from \"@nevware21/ts-utils\";\r\n/**\r\n* RetryPolicy.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nvar RandomizationLowerThreshold = 0.8;\r\nvar RandomizationUpperThreshold = 1.2;\r\nvar BaseBackoff = 3000;\r\nvar MaxBackoff = 600000;\r\n/**\r\n * Determine if the request should be retried for the given status code.\r\n * The below expression reads that we should only retry for:\r\n *      - HttpStatusCodes that are smaller than 300.\r\n *      - HttpStatusCodes greater or equal to 500 (except for 501-NotImplement\r\n *        and 505-HttpVersionNotSupport).\r\n *      - HttpStatusCode 408-RequestTimeout.\r\n *      - HttpStatusCode 429.\r\n * This is based on Microsoft.WindowsAzure.Storage.RetryPolicies.ExponentialRetry class\r\n * @param httpStatusCode - The status code returned for the request.\r\n * @returns True if request should be retried, false otherwise.\r\n */\r\nexport function retryPolicyShouldRetryForStatus(httpStatusCode) {\r\n    /* tslint:disable:triple-equals */\r\n    // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n    return !((httpStatusCode >= 300 && httpStatusCode < 500 && httpStatusCode != 429)\r\n        || (httpStatusCode == 501)\r\n        || (httpStatusCode == 505));\r\n    /* tslint:enable:triple-equals */\r\n}\r\n/**\r\n * Gets the number of milliseconds to back off before retrying the request. The\r\n * back off duration is exponentially scaled based on the number of retries already\r\n * done for the request.\r\n * @param retriesSoFar - The number of times the request has already been retried.\r\n * @returns The back off duration for the request before it can be retried.\r\n */\r\nexport function retryPolicyGetMillisToBackoffForRetry(retriesSoFar) {\r\n    var waitDuration = 0;\r\n    var minBackoff = BaseBackoff * RandomizationLowerThreshold;\r\n    var maxBackoff = BaseBackoff * RandomizationUpperThreshold;\r\n    var randomBackoff = mathFloor(Math.random() * (maxBackoff - minBackoff)) + minBackoff;\r\n    waitDuration = Math.pow(2, retriesSoFar) * randomBackoff;\r\n    return mathMin(waitDuration, MaxBackoff);\r\n}\r\n//# sourceMappingURL=RetryPolicy.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Serializer.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\n// @skip-file-minify\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrIndexOf, doPerf, getCommonSchemaMetaData, getTenantId, isArray, isValueAssigned, objForEachKey, sanitizeProperty, strStartsWith } from \"@microsoft/1ds-core-js\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { mathMin, strSubstr } from \"@nevware21/ts-utils\";\r\n/**\r\n * Note: This is an optimization for V8-based browsers. When V8 concatenates a string,\r\n * the strings are only joined logically using a \"cons string\" or \"constructed/concatenated\r\n * string\". These containers keep references to one another and can result in very large\r\n * memory usage. For example, if a 2MB string is constructed by concatenating 4 bytes\r\n * together at a time, the memory usage will be ~44MB; so ~22x increase. The strings are\r\n * only joined together when an operation requiring their joining takes place, such as\r\n * substr(). This function is called when adding data to this buffer to ensure these\r\n * types of strings are periodically joined to reduce the memory footprint.\r\n * Setting to every 20 events as the JSON.stringify() may have joined many strings\r\n * and calling this too much causes a minor delay while processing.\r\n */\r\nvar _MAX_STRING_JOINS = 20;\r\n// Max Size set by One Collector: https://msazure.visualstudio.com/OneDsCollector/_git/Collector?path=/Services/Azure/CollectorWorkerRoleAzure/ServiceConfiguration.Cloud.cscfg\r\nvar RequestSizeLimitBytes = 3145728; // approx 3.15 Mb\r\nvar BeaconRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nvar MaxRecordSize = 2000000; // approx 2 Mb\r\nvar MaxBeaconRecordSize = mathMin(MaxRecordSize, BeaconRequestSizeLimitBytes);\r\nvar metadata = \"metadata\";\r\nvar f = \"f\";\r\nvar rCheckDot = /\\./;\r\n/**\r\n* Class to handle serialization of event and request.\r\n* Currently uses Bond for serialization. Please note that this may be subject to change.\r\n*/\r\nvar Serializer = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the Serializer class\r\n     * @param perfManager - The performance manager to use for tracking performance\r\n     * @param valueSanitizer - The value sanitizer to use for sanitizing field values\r\n     * @param stringifyObjects - Should objects be stringified before being sent\r\n     * @param enableCompoundKey - Should compound keys be enabled (defaults to false)\r\n     * @param getEncodedTypeOverride - The callback to get the encoded type for a property defaults to ({@link getCommonSchemaMetaData }(...))\r\n     * @param excludeCsMetaData - (!DANGER!) Should metadata be populated when encoding the event blob (defaults to false) - PII data will NOT be tagged as PII for backend processing\r\n     * @param cfg channel cfg for setting request and record size limit\r\n     */\r\n    function Serializer(perfManager, valueSanitizer, stringifyObjects, enableCompoundKey, getEncodedTypeOverride, excludeCsMetaData, cfg) {\r\n        var strData = \"data\";\r\n        var strBaseData = \"baseData\";\r\n        var strExt = \"ext\";\r\n        var _checkForCompoundkey = !!enableCompoundKey;\r\n        var _processSubKeys = true;\r\n        var _theSanitizer = valueSanitizer;\r\n        var _isReservedCache = {};\r\n        var _excludeCsMetaData = !!excludeCsMetaData;\r\n        var _getEncodedType = getEncodedTypeOverride || getCommonSchemaMetaData;\r\n        var _sizeCfg = _getSizeLimtCfg(cfg);\r\n        var _requestSizeLimitBytes = _validateSizeLimit(_sizeCfg.requestLimit, RequestSizeLimitBytes, 0);\r\n        var _beaconRequestSizeLimitBytes = _validateSizeLimit(_sizeCfg.requestLimit, BeaconRequestSizeLimitBytes, 1);\r\n        var _maxRecordSize = _validateSizeLimit(_sizeCfg.recordLimit, MaxRecordSize, 0);\r\n        var _maxBeaconRecordSize = Math.min(_validateSizeLimit(_sizeCfg.recordLimit, MaxBeaconRecordSize, 1), _beaconRequestSizeLimitBytes);\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            _self.createPayload = function (retryCnt, isTeardown, isSync, isReducedPayload, sendReason, sendType) {\r\n                return {\r\n                    apiKeys: [],\r\n                    payloadBlob: STR_EMPTY,\r\n                    overflow: null,\r\n                    sizeExceed: [],\r\n                    failedEvts: [],\r\n                    batches: [],\r\n                    numEvents: 0,\r\n                    retryCnt: retryCnt,\r\n                    isTeardown: isTeardown,\r\n                    isSync: isSync,\r\n                    isBeacon: isReducedPayload,\r\n                    sendType: sendType,\r\n                    sendReason: sendReason\r\n                };\r\n            };\r\n            _self.appendPayload = function (payload, theBatch, maxEventsPerBatch) {\r\n                var canAddEvents = payload && theBatch && !payload.overflow;\r\n                if (canAddEvents) {\r\n                    doPerf(perfManager, function () { return \"Serializer:appendPayload\"; }, function () {\r\n                        var theEvents = theBatch.events();\r\n                        var payloadBlob = payload.payloadBlob;\r\n                        var payloadEvents = payload.numEvents;\r\n                        var eventsAdded = false;\r\n                        var sizeExceeded = [];\r\n                        var failedEvts = [];\r\n                        var isBeaconPayload = payload.isBeacon;\r\n                        var requestMaxSize = isBeaconPayload ? _beaconRequestSizeLimitBytes : _requestSizeLimitBytes;\r\n                        var recordMaxSize = isBeaconPayload ? _maxBeaconRecordSize : _maxRecordSize;\r\n                        var lp = 0;\r\n                        var joinCount = 0;\r\n                        while (lp < theEvents.length) {\r\n                            var theEvent = theEvents[lp];\r\n                            if (theEvent) {\r\n                                if (payloadEvents >= maxEventsPerBatch) {\r\n                                    // Maximum events per payload reached, so don't add any more\r\n                                    payload.overflow = theBatch.split(lp);\r\n                                    break;\r\n                                }\r\n                                var eventBlob = _self.getEventBlob(theEvent);\r\n                                if (eventBlob && eventBlob.length <= recordMaxSize) {\r\n                                    // This event will fit into the payload\r\n                                    var blobLength = eventBlob.length;\r\n                                    var currentSize = payloadBlob.length;\r\n                                    if (currentSize + blobLength > requestMaxSize) {\r\n                                        // Request or batch size exceeded, so don't add any more to the payload\r\n                                        payload.overflow = theBatch.split(lp);\r\n                                        break;\r\n                                    }\r\n                                    if (payloadBlob) {\r\n                                        payloadBlob += \"\\n\";\r\n                                    }\r\n                                    payloadBlob += eventBlob;\r\n                                    joinCount++;\r\n                                    // v8 memory optimization only\r\n                                    if (joinCount > _MAX_STRING_JOINS) {\r\n                                        // this substr() should cause the constructed string to join\r\n                                        strSubstr(payloadBlob, 0, 1);\r\n                                        joinCount = 0;\r\n                                    }\r\n                                    eventsAdded = true;\r\n                                    payloadEvents++;\r\n                                }\r\n                                else {\r\n                                    if (eventBlob) {\r\n                                        // Single event size exceeded so remove from the batch\r\n                                        sizeExceeded.push(theEvent);\r\n                                    }\r\n                                    else {\r\n                                        failedEvts.push(theEvent);\r\n                                    }\r\n                                    // We also need to remove this event from the existing array, otherwise a notification will be sent\r\n                                    // indicating that it was successfully sent\r\n                                    theEvents.splice(lp, 1);\r\n                                    lp--;\r\n                                }\r\n                            }\r\n                            lp++;\r\n                        }\r\n                        if (sizeExceeded.length > 0) {\r\n                            payload.sizeExceed.push(EventBatch.create(theBatch.iKey(), sizeExceeded));\r\n                            // Remove the exceeded events from the batch\r\n                        }\r\n                        if (failedEvts.length > 0) {\r\n                            payload.failedEvts.push(EventBatch.create(theBatch.iKey(), failedEvts));\r\n                            // Remove the failed events from the batch\r\n                        }\r\n                        if (eventsAdded) {\r\n                            payload.batches.push(theBatch);\r\n                            payload.payloadBlob = payloadBlob;\r\n                            payload.numEvents = payloadEvents;\r\n                            var apiKey = theBatch.iKey();\r\n                            if (arrIndexOf(payload.apiKeys, apiKey) === -1) {\r\n                                payload.apiKeys.push(apiKey);\r\n                            }\r\n                        }\r\n                    }, function () { return ({ payload: payload, theBatch: { iKey: theBatch.iKey(), evts: theBatch.events() }, max: maxEventsPerBatch }); });\r\n                }\r\n                return canAddEvents;\r\n            };\r\n            _self.getEventBlob = function (eventData) {\r\n                try {\r\n                    return doPerf(perfManager, function () { return \"Serializer.getEventBlob\"; }, function () {\r\n                        var serializedEvent = {};\r\n                        // Adding as dynamic keys for v8 performance\r\n                        serializedEvent.name = eventData.name;\r\n                        serializedEvent.time = eventData.time;\r\n                        serializedEvent.ver = eventData.ver;\r\n                        serializedEvent.iKey = \"o:\" + getTenantId(eventData.iKey);\r\n                        // Assigning local var so usage in part b/c don't throw if there is no ext\r\n                        var serializedExt = {};\r\n                        var _addMetadataCallback;\r\n                        if (!_excludeCsMetaData) {\r\n                            _addMetadataCallback = function (pathKeys, key, value) {\r\n                                _addJSONPropertyMetaData(_getEncodedType, serializedExt, pathKeys, key, value);\r\n                            };\r\n                        }\r\n                        // Part A\r\n                        var eventExt = eventData[strExt];\r\n                        if (eventExt) {\r\n                            // Only assign ext if the event had one (There are tests covering this use case)\r\n                            serializedEvent[strExt] = serializedExt;\r\n                            objForEachKey(eventExt, function (key, value) {\r\n                                var data = serializedExt[key] = {};\r\n                                // Don't include a metadata callback as we don't currently set metadata Part A fields\r\n                                _processPathKeys(value, data, \"ext.\" + key, true, null, null, true);\r\n                            });\r\n                        }\r\n                        var serializedData = serializedEvent[strData] = {};\r\n                        serializedData.baseType = eventData.baseType;\r\n                        var serializedBaseData = serializedData[strBaseData] = {};\r\n                        // Part B\r\n                        _processPathKeys(eventData.baseData, serializedBaseData, strBaseData, false, [strBaseData], _addMetadataCallback, _processSubKeys);\r\n                        // Part C\r\n                        _processPathKeys(eventData.data, serializedData, strData, false, [], _addMetadataCallback, _processSubKeys);\r\n                        return JSON.stringify(serializedEvent);\r\n                    }, function () { return ({ item: eventData }); });\r\n                }\r\n                catch (e) {\r\n                    return null;\r\n                }\r\n            };\r\n            function _isReservedField(path, name) {\r\n                var result = _isReservedCache[path];\r\n                if (result === undefined) {\r\n                    if (path.length >= 7) {\r\n                        // Do not allow the changing of fields located in the ext.metadata or ext.web extension\r\n                        result = strStartsWith(path, \"ext.metadata\") || strStartsWith(path, \"ext.web\");\r\n                    }\r\n                    _isReservedCache[path] = result;\r\n                }\r\n                return result;\r\n            }\r\n            function _processPathKeys(srcObj, target, thePath, checkReserved, metadataPathKeys, metadataCallback, processSubKeys) {\r\n                objForEachKey(srcObj, function (key, srcValue) {\r\n                    var prop = null;\r\n                    if (srcValue || isValueAssigned(srcValue)) {\r\n                        var path = thePath;\r\n                        var name_1 = key;\r\n                        var theMetaPathKeys = metadataPathKeys;\r\n                        var destObj = target;\r\n                        // Handle keys with embedded '.', like \"TestObject.testProperty\"\r\n                        if (_checkForCompoundkey && !checkReserved && rCheckDot.test(key)) {\r\n                            var subKeys = key.split(\".\");\r\n                            var keyLen = subKeys.length;\r\n                            if (keyLen > 1) {\r\n                                if (theMetaPathKeys) {\r\n                                    // Create a copy of the meta path keys so we can add the extra ones\r\n                                    theMetaPathKeys = theMetaPathKeys.slice();\r\n                                }\r\n                                for (var lp = 0; lp < keyLen - 1; lp++) {\r\n                                    var subKey = subKeys[lp];\r\n                                    // Add/reuse the sub key object\r\n                                    destObj = destObj[subKey] = destObj[subKey] || {};\r\n                                    path += \".\" + subKey;\r\n                                    if (theMetaPathKeys) {\r\n                                        theMetaPathKeys.push(subKey);\r\n                                    }\r\n                                }\r\n                                name_1 = subKeys[keyLen - 1];\r\n                            }\r\n                        }\r\n                        var isReserved = checkReserved && _isReservedField(path, name_1);\r\n                        if (!isReserved && _theSanitizer && _theSanitizer.handleField(path, name_1)) {\r\n                            prop = _theSanitizer.value(path, name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        else {\r\n                            prop = sanitizeProperty(name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        if (prop) {\r\n                            // Set the value\r\n                            var newValue = prop.value;\r\n                            destObj[name_1] = newValue;\r\n                            if (metadataCallback) {\r\n                                metadataCallback(theMetaPathKeys, name_1, prop);\r\n                            }\r\n                            if (processSubKeys && typeof newValue === \"object\" && !isArray(newValue)) {\r\n                                var newPath = theMetaPathKeys;\r\n                                if (newPath) {\r\n                                    newPath = newPath.slice();\r\n                                    newPath.push(name_1);\r\n                                }\r\n                                // Make sure we process sub objects as well (for value sanitization and metadata)\r\n                                _processPathKeys(srcValue, newValue, path + \".\" + name_1, checkReserved, newPath, metadataCallback, processSubKeys);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.createPayload.\r\n// Removed Stub for Serializer.prototype.appendPayload.\r\n// Removed Stub for Serializer.prototype.getEventBlob.\r\n// Removed Stub for Serializer.prototype.handleField.\r\n// Removed Stub for Serializer.prototype.getSanitizer.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\nfunction _validateSizeLimit(cfgVal, defaultVal, idx) {\r\n    if (isArray(cfgVal)) {\r\n        var val = cfgVal[idx];\r\n        if (val > 0 && val <= defaultVal) {\r\n            return val;\r\n        }\r\n    }\r\n    return defaultVal;\r\n}\r\nfunction _getSizeLimtCfg(cfg) {\r\n    var defaultCfg = {};\r\n    if (cfg && cfg.requestLimit) {\r\n        return cfg.requestLimit;\r\n    }\r\n    return defaultCfg;\r\n}\r\n/**\r\n * @ignore\r\n * @param getEncodedType - The function to get the encoded type for the property\r\n * @param json - The json object to add the metadata to\r\n * @param propKeys - The property keys to add to the metadata\r\n * @param name - The name of the property\r\n * @param propertyValue - The property value\r\n */\r\nfunction _addJSONPropertyMetaData(getEncodedType, json, propKeys, name, propertyValue) {\r\n    if (propertyValue && json) {\r\n        var encodedTypeValue = getEncodedType(propertyValue.value, propertyValue.kind, propertyValue.propertyType);\r\n        if (encodedTypeValue > -1) {\r\n            // Add the root metadata\r\n            var metaData = json[metadata];\r\n            if (!metaData) {\r\n                // Sets the root 'f'\r\n                metaData = json[metadata] = { f: {} };\r\n            }\r\n            var metaTarget = metaData[f];\r\n            if (!metaTarget) {\r\n                // This can occur if someone has manually added an ext.metadata object\r\n                // Such as ext.metadata.privLevel and ext.metadata.privTags\r\n                metaTarget = metaData[f] = {};\r\n            }\r\n            // Traverse the metadata path and build each object (contains an 'f' key) -- if required\r\n            if (propKeys) {\r\n                for (var lp = 0; lp < propKeys.length; lp++) {\r\n                    var key = propKeys[lp];\r\n                    if (!metaTarget[key]) {\r\n                        metaTarget[key] = { f: {} };\r\n                    }\r\n                    var newTarget = metaTarget[key][f];\r\n                    if (!newTarget) {\r\n                        // Not expected, but can occur if the metadata context was pre-created as part of the event\r\n                        newTarget = metaTarget[key][f] = {};\r\n                    }\r\n                    metaTarget = newTarget;\r\n                }\r\n            }\r\n            metaTarget = metaTarget[name] = {};\r\n            if (isArray(propertyValue.value)) {\r\n                metaTarget[\"a\"] = {\r\n                    t: encodedTypeValue\r\n                };\r\n            }\r\n            else {\r\n                metaTarget[\"t\"] = encodedTypeValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* HttpManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { FullVersionString, SenderPostManager, _getAllResponseHeaders, _throwInternal, _warnToConsole, arrForEach, dateNow, doPerf, dumpObj, extend, getCommonSchemaMetaData, getNavigator, getResponseText, getTime, hasOwnProperty, isBeaconsSupported, isFeatureEnabled, isFetchSupported, isNullOrUndefined, isReactNative, isUndefined, isValueAssigned, objForEachKey, objKeys, onConfigChange, optimizeObject, prependTransports, strUndefined } from \"@microsoft/1ds-core-js\";\r\nimport { arrAppend, getInst, isFunction } from \"@nevware21/ts-utils\";\r\nimport { ClockSkewManager } from \"./ClockSkewManager\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { DEFAULT_CACHE_CONTROL, DEFAULT_CONTENT_TYPE, STR_API_KEY, STR_AUTH_XTOKEN, STR_CACHE_CONTROL, STR_CLIENT_ID, STR_CLIENT_VERSION, STR_CONTENT_TYPE_HEADER, STR_DROPPED, STR_EMPTY, STR_KILL_DURATION_HEADER, STR_KILL_TOKENS_HEADER, STR_MSA_DEVICE_TICKET, STR_MSFPC, STR_NO_RESPONSE_BODY, STR_OTHER, STR_REQUEUE, STR_RESPONSE_FAIL, STR_SENDING, STR_TIME_DELTA_HEADER, STR_TIME_DELTA_TO_APPLY, STR_UPLOAD_TIME } from \"./InternalConstants\";\r\nimport { KillSwitch } from \"./KillSwitch\";\r\nimport { retryPolicyGetMillisToBackoffForRetry, retryPolicyShouldRetryForStatus } from \"./RetryPolicy\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_ADD_NO_RESPONSE, _DYN_ALLOW_REQUEST_SENDIN0, _DYN_ALWAYS_USE_XHR_OVERR7, _DYN_AVOID_OPTIONS, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_CREATE_PAYLOAD, _DYN_DISABLE_EVENT_TIMING5, _DYN_DISABLE_FETCH_KEEP_A6, _DYN_DISABLE_XHR_SYNC, _DYN_ENABLE_COMPOUND_KEY, _DYN_EVENTS, _DYN_FETCH_CREDENTIALS, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_HDRS, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_IS_BEACON, _DYN_IS_TEARDOWN, _DYN_I_KEY, _DYN_LENGTH, _DYN_OVERRIDE_ENDPOINT_UR4, _DYN_PAYLOAD_BLOB, _DYN_PAYLOAD_PREPROCESSOR, _DYN_PUSH, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SEND_TYPE, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_CLOCK_SKEW, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SHOULD_ADD_CLOCK_SKE1, _DYN_SPLIT, _DYN_TIMINGS, _DYN_TO_LOWER_CASE, _DYN_USE_HDRS, _DYN_USE_SEND_BEACON, _DYN__BACK_OFF_TRANSMISSI12, _DYN__SEND_REASON, _DYN__THE_PAYLOAD, _DYN__TRANSPORT } from \"./__DynamicConstants\";\r\nvar strSendAttempt = \"sendAttempt\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar UrlQueryString = \"?cors=true&\" + STR_CONTENT_TYPE_HEADER[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() + \"=\" + DEFAULT_CONTENT_TYPE;\r\n/**\r\n * Identifies the default notification reason to the action names\r\n */\r\nvar _eventActionMap = (_a = {},\r\n    _a[1 /* EventBatchNotificationReason.Paused */] = STR_REQUEUE,\r\n    _a[100 /* EventBatchNotificationReason.RequeueEvents */] = STR_REQUEUE,\r\n    _a[200 /* EventBatchNotificationReason.Complete */] = \"sent\",\r\n    _a[8004 /* EventBatchNotificationReason.KillSwitch */] = STR_DROPPED,\r\n    _a[8003 /* EventBatchNotificationReason.SizeLimitExceeded */] = STR_DROPPED,\r\n    _a[8006 /* EventBatchNotificationReason.BeaconSendFailure */] = STR_DROPPED,\r\n    _a);\r\nvar _collectorQsHeaders = {};\r\nvar _collectorHeaderToQs = {};\r\nfunction _addCollectorHeaderQsMapping(qsName, headerName, allowQs) {\r\n    _collectorQsHeaders[qsName] = headerName;\r\n    if (allowQs !== false) {\r\n        _collectorHeaderToQs[headerName] = qsName;\r\n    }\r\n}\r\n_addCollectorHeaderQsMapping(STR_MSA_DEVICE_TICKET, STR_MSA_DEVICE_TICKET, false);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_VERSION, STR_CLIENT_VERSION);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_ID, \"Client-Id\");\r\n_addCollectorHeaderQsMapping(STR_API_KEY, STR_API_KEY);\r\n_addCollectorHeaderQsMapping(STR_TIME_DELTA_TO_APPLY, STR_TIME_DELTA_TO_APPLY);\r\n_addCollectorHeaderQsMapping(STR_UPLOAD_TIME, STR_UPLOAD_TIME);\r\n_addCollectorHeaderQsMapping(STR_AUTH_XTOKEN, STR_AUTH_XTOKEN);\r\nfunction _hasHeader(headers, header) {\r\n    var hasHeader = false;\r\n    if (headers && header) {\r\n        var keys = objKeys(headers);\r\n        if (keys && keys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            var lowerHeader = header[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            for (var lp = 0; lp < keys[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                var value = keys[lp];\r\n                if (value && hasOwnProperty(header, value) &&\r\n                    value[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === lowerHeader) {\r\n                    hasHeader = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasHeader;\r\n}\r\nfunction _addRequestDetails(details, name, value, useHeaders) {\r\n    if (name && value && value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        if (useHeaders && _collectorQsHeaders[name]) {\r\n            details[_DYN_HDRS /* @min:%2ehdrs */][_collectorQsHeaders[name]] = value;\r\n            details[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n        }\r\n        else {\r\n            details.url += \"&\" + name + \"=\" + value;\r\n        }\r\n    }\r\n}\r\nfunction _addQueryStringParameter(qsParams, name, value) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams[i].value = value;\r\n            return;\r\n        }\r\n    }\r\n    qsParams[_DYN_PUSH /* @min:%2epush */]({ name: name, value: value });\r\n}\r\nfunction _removeQueryStringParameter(qsParams, name) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams.splice(i, 1);\r\n            return;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Class managing the sending of requests.\r\n */\r\nvar HttpManager = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param requestQueue   - The queue that contains the requests to be sent.\r\n     */\r\n    function HttpManager(maxEventsPerBatch, maxConnections, maxRequestRetriesBeforeBackoff, actions) {\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        // Only set \"Default\" values in the _initDefaults() method, unless value are not \"reset\" during unloading\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        var _urlString;\r\n        var _killSwitch;\r\n        var _paused;\r\n        var _clockSkewManager;\r\n        var _useBeacons = false;\r\n        var _outstandingRequests; // Holds the number of outstanding async requests that have not returned a response yet\r\n        var _postManager;\r\n        var _logger;\r\n        var _sendInterfaces;\r\n        var _core;\r\n        var _customHttpInterface;\r\n        var _queryStringParameters;\r\n        var _headers;\r\n        var _batchQueue;\r\n        var _serializer;\r\n        var _enableEventTimings;\r\n        var _cookieMgr;\r\n        var _isUnloading;\r\n        var _useHeaders;\r\n        var _xhrTimeout;\r\n        var _zipPayload;\r\n        var _disableXhrSync;\r\n        var _disableFetchKeepAlive;\r\n        var _canHaveReducedPayload;\r\n        var _addNoResponse;\r\n        var _unloadHooks;\r\n        var _sendHook;\r\n        var _sendListener;\r\n        var _responseHandlers;\r\n        var _isInitialized;\r\n        var _timeoutWrapper;\r\n        var _excludeCsMetaData;\r\n        var _sendPostMgr;\r\n        var _fetchCredentials;\r\n        var _maxEvtPerBatch = maxEventsPerBatch; // Sets default value in case the value is null\r\n        dynamicProto(HttpManager, this, function (_self) {\r\n            _initDefaults();\r\n            var _sendCredentials = true;\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, postChannel) {\r\n                if (!_isInitialized) {\r\n                    _core = core;\r\n                    _cookieMgr = core.getCookieMgr();\r\n                    _postManager = postChannel;\r\n                    _logger = _postManager.diagLog();\r\n                    arrAppend(_unloadHooks, onConfigChange(theConfig, function (details) {\r\n                        var _a;\r\n                        var coreConfig = details.cfg;\r\n                        var channelConfig = details.cfg.extensionConfig[postChannel.identifier];\r\n                        _timeoutWrapper = createTimeoutWrapper(channelConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], channelConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                        if (isValueAssigned(coreConfig.anonCookieName)) {\r\n                            _addQueryStringParameter(_queryStringParameters, \"anoncknm\", coreConfig.anonCookieName);\r\n                        }\r\n                        else {\r\n                            _removeQueryStringParameter(_queryStringParameters, \"anoncknm\");\r\n                        }\r\n                        _sendHook = channelConfig[_DYN_PAYLOAD_PREPROCESSOR /* @min:%2epayloadPreprocessor */];\r\n                        _sendListener = channelConfig.payloadListener;\r\n                        var httpInterface = channelConfig.httpXHROverride;\r\n                        // Override endpointUrl if provided in Post config\r\n                        var endpointUrl = channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] ? channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] : coreConfig.endpointUrl;\r\n                        _urlString = endpointUrl + UrlQueryString;\r\n                        _useHeaders = !isUndefined(channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */]) ? !channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */] : true;\r\n                        _enableEventTimings = !channelConfig[_DYN_DISABLE_EVENT_TIMING5 /* @min:%2edisableEventTimings */];\r\n                        var maxEvtCfg = channelConfig.maxEvtPerBatch;\r\n                        _maxEvtPerBatch = maxEvtCfg && maxEvtCfg <= maxEventsPerBatch ? maxEvtCfg : maxEventsPerBatch;\r\n                        var valueSanitizer = channelConfig.valueSanitizer;\r\n                        var stringifyObjects = channelConfig.stringifyObjects;\r\n                        var enableCompoundKey = !!coreConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        if (!isUndefined(channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */])) {\r\n                            enableCompoundKey = !!channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        }\r\n                        _xhrTimeout = channelConfig.xhrTimeout;\r\n                        var csStream = getInst(\"CompressionStream\");\r\n                        // Controls whether payload compression (gzip) is enabled.\r\n                        _zipPayload = isFeatureEnabled(\"zipPayload\", coreConfig, false);\r\n                        // if user has payload processor (_sendHook), they may compress the payload themselves\r\n                        // to avoid double compression, we should disable the zipPayload\r\n                        if (!isFunction(csStream) || _sendHook) {\r\n                            _zipPayload = false;\r\n                        }\r\n                        _disableXhrSync = !!channelConfig[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */];\r\n                        _disableFetchKeepAlive = !!channelConfig[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */];\r\n                        _addNoResponse = channelConfig[_DYN_ADD_NO_RESPONSE /* @min:%2eaddNoResponse */] !== false;\r\n                        _excludeCsMetaData = !!channelConfig.excludeCsMetaData;\r\n                        if (!!core.getPlugin(\"LocalStorage\")) {\r\n                            // Always disable fetch keep alive when persisten storage is available\r\n                            _disableFetchKeepAlive = true;\r\n                        }\r\n                        _useBeacons = !isReactNative(); // Only use beacons if not running in React Native\r\n                        _serializer = new Serializer(_core, valueSanitizer, stringifyObjects, enableCompoundKey, getCommonSchemaMetaData, _excludeCsMetaData, channelConfig);\r\n                        if (!isNullOrUndefined(channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */])) {\r\n                            _useBeacons = !!channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */];\r\n                        }\r\n                        if (channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */]) {\r\n                            _fetchCredentials = channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */];\r\n                        }\r\n                        var sendPostConfig = _getSendPostMgrConfig();\r\n                        // only init it once\r\n                        if (!_sendPostMgr) {\r\n                            _sendPostMgr = new SenderPostManager();\r\n                            _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, _logger);\r\n                        }\r\n                        else {\r\n                            _sendPostMgr.SetConfig(sendPostConfig);\r\n                        }\r\n                        var syncHttpInterface = httpInterface;\r\n                        var beaconHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var fetchSyncHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var beaconUnloadTransports = [3 /* TransportType.Beacon */, 2 /* TransportType.Fetch */];\r\n                        if (!httpInterface) {\r\n                            _customHttpInterface = false;\r\n                            // this is handled in SendPostManager now\r\n                            // let location = getLocation();\r\n                            // if (location && location.protocol && location.protocol.toLowerCase() === \"file:\") {\r\n                            //     // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            //     _sendCredentials = false;\r\n                            // }\r\n                            var theTransports = [];\r\n                            if (isReactNative()) {\r\n                                // Use Fetch or XDR/XHR\r\n                                theTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */];\r\n                                beaconUnloadTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            else {\r\n                                // Use XDR/XHR, Fetch or beacons\r\n                                theTransports = [1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            // Prefix any user requested transport(s) values\r\n                            theTransports = prependTransports(theTransports, channelConfig.transports);\r\n                            httpInterface = _getSenderInterface(theTransports, false);\r\n                            if (!httpInterface) {\r\n                                _warnToConsole(_logger, \"No available transport to send events\");\r\n                            }\r\n                            syncHttpInterface = _getSenderInterface(theTransports, true);\r\n                        }\r\n                        if (!beaconHttpInterface) {\r\n                            // Allow overriding the usage of sendBeacon\r\n                            beaconUnloadTransports = prependTransports(beaconUnloadTransports, channelConfig.unloadTransports);\r\n                            beaconHttpInterface = _getSenderInterface(beaconUnloadTransports, true);\r\n                        }\r\n                        _canHaveReducedPayload = !_customHttpInterface && ((_useBeacons && isBeaconsSupported()) || (!_disableFetchKeepAlive && isFetchSupported(true)));\r\n                        _sendInterfaces = (_a = {},\r\n                            _a[0 /* EventSendType.Batched */] = httpInterface,\r\n                            _a[1 /* EventSendType.Synchronous */] = syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true),\r\n                            _a[2 /* EventSendType.SendBeacon */] = beaconHttpInterface || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a[3 /* EventSendType.SyncFetch */] = fetchSyncHttpInterface || _getSenderInterface([2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true) || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a);\r\n                    }));\r\n                    _isInitialized = true;\r\n                }\r\n            };\r\n            _self.addResponseHandler = function (responseHandler) {\r\n                _responseHandlers[_DYN_PUSH /* @min:%2epush */](responseHandler);\r\n                return {\r\n                    rm: function () {\r\n                        var index = _responseHandlers.indexOf(responseHandler);\r\n                        if (index >= 0) {\r\n                            _responseHandlers.splice(index, 1);\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n            _self[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */] = function (evt) {\r\n                try {\r\n                    if (_serializer) {\r\n                        return _serializer.getEventBlob(evt);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return STR_EMPTY;\r\n            };\r\n            _self[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */] = function () {\r\n                try {\r\n                    // get current url without paramter\r\n                    var payload = _serializer && _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                    return _buildRequestDetails(payload, _useHeaders);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */] = function (evts, optimize) {\r\n                try {\r\n                    // TODO: optimize\r\n                    var theBatches_1 = [];\r\n                    // create a eventBatch for each event\r\n                    arrForEach(evts, function (evt) {\r\n                        if (optimize) {\r\n                            evt = optimizeObject(evt);\r\n                        }\r\n                        var batch = EventBatch.create(evt[_DYN_I_KEY /* @min:%2eiKey */], [evt]);\r\n                        theBatches_1[_DYN_PUSH /* @min:%2epush */](batch);\r\n                    });\r\n                    var thePayload = null;\r\n                    while (theBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0 && _serializer) {\r\n                        var theBatch = theBatches_1.shift();\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                            _serializer.appendPayload(thePayload, theBatch, _maxEvtPerBatch);\r\n                        }\r\n                    }\r\n                    var requestDetails = _buildRequestDetails(thePayload, _useHeaders);\r\n                    var payloadData = {\r\n                        data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                        urlString: requestDetails.url,\r\n                        headers: requestDetails[_DYN_HDRS /* @min:%2ehdrs */],\r\n                        timeout: _xhrTimeout,\r\n                        disableXhrSync: _disableXhrSync,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive\r\n                    };\r\n                    // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                    if (_useHeaders) {\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                        }\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                        }\r\n                    }\r\n                    return payloadData;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                try {\r\n                    return _sendPostMgr && _sendPostMgr.getSenderInst(transports, syncSupport);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_sendInterfaces[0 /* EventSendType.Batched */], _killSwitch, _serializer, _sendInterfaces, _getSendPostMgrConfig(), _urlString, _maxEvtPerBatch];\r\n            };\r\n            function _getSendPostMgrConfig() {\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: _xdrOncomplete,\r\n                        fetchOnComplete: _fetchOnComplete,\r\n                        xhrOnComplete: _xhrOnComplete,\r\n                        beaconOnRetry: _onBeaconRetry\r\n                    };\r\n                    var config = {\r\n                        enableSendPromise: false,\r\n                        isOneDs: true,\r\n                        disableCredentials: !_sendCredentials,\r\n                        fetchCredentials: _fetchCredentials,\r\n                        disableXhr: false,\r\n                        disableBeacon: !_useBeacons,\r\n                        disableBeaconSync: !_useBeacons,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive,\r\n                        timeWrapper: _timeoutWrapper,\r\n                        addNoResponse: _addNoResponse,\r\n                        senderOnCompleteCallBack: onCompleteFuncs\r\n                    };\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _xdrOncomplete(xdr, oncomplete, payload) {\r\n                var response = getResponseText(xdr);\r\n                _doOnComplete(oncomplete, 200, {}, response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _initDefaults() {\r\n                var undefValue;\r\n                _urlString = null;\r\n                _killSwitch = new KillSwitch();\r\n                _paused = false;\r\n                _clockSkewManager = new ClockSkewManager();\r\n                _useBeacons = false;\r\n                _outstandingRequests = 0; // Holds the number of outstanding async requests that have not returned a response yet\r\n                _postManager = null;\r\n                _logger = null;\r\n                _sendInterfaces = null;\r\n                _core = null;\r\n                _customHttpInterface = true;\r\n                _queryStringParameters = [];\r\n                _headers = {};\r\n                _batchQueue = [];\r\n                _serializer = null;\r\n                _enableEventTimings = false;\r\n                _cookieMgr = null;\r\n                _isUnloading = false;\r\n                _useHeaders = false;\r\n                _xhrTimeout = undefValue;\r\n                _disableXhrSync = undefValue;\r\n                _disableFetchKeepAlive = undefValue;\r\n                _canHaveReducedPayload = undefValue;\r\n                _addNoResponse = undefValue;\r\n                _unloadHooks = [];\r\n                _sendHook = undefValue;\r\n                _sendListener = undefValue;\r\n                _responseHandlers = [];\r\n                _isInitialized = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _excludeCsMetaData = false;\r\n                _sendPostMgr = null;\r\n                _maxEvtPerBatch = null;\r\n            }\r\n            function _fetchOnComplete(response, onComplete, resValue, payload) {\r\n                var handleResponse = function (status, headerMap, responseText) {\r\n                    _doOnComplete(onComplete, status, headerMap, responseText);\r\n                    _handleCollectorResponse(responseText);\r\n                };\r\n                var headerMap = {};\r\n                var headers = response[_DYN_HEADERS /* @min:%2eheaders */];\r\n                if (headers) {\r\n                    headers[\"forEach\"](function (value, name) {\r\n                        headerMap[name] = value;\r\n                    });\r\n                }\r\n                handleResponse(response.status, headerMap, resValue || STR_EMPTY);\r\n            }\r\n            function _xhrOnComplete(request, oncomplete, payload) {\r\n                var response = getResponseText(request);\r\n                _doOnComplete(oncomplete, request.status, _getAllResponseHeaders(request, true), response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */, dumpObj(e));\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                // Custom headers not supported in sendBeacon payload.headers would be ignored\r\n                var internalPayloadData = payload;\r\n                var status = 200;\r\n                var thePayload = internalPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                var theUrl = payload.urlString + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                try {\r\n                    var nav_1 = getNavigator();\r\n                    if (thePayload) {\r\n                        var persistStorage = !!_core.getPlugin(\"LocalStorage\");\r\n                        // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                        var droppedBatches_1 = [];\r\n                        var sentBatches_1 = [];\r\n                        arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (droppedBatches_1 && theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                                for (var lp = 0; lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                                    if (!nav_1.sendBeacon(theUrl, _serializer.getEventBlob(theEvents[lp]))) {\r\n                                        // Can't send anymore, so split the batch and drop the rest\r\n                                        droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](lp));\r\n                                        break;\r\n                                    }\r\n                                    else {\r\n                                        sentBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[lp]);\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Remove all of the events from the existing batch in the payload as the copy includes the original\r\n                                droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](0));\r\n                            }\r\n                        });\r\n                        if (sentBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Update the payload with the sent batches\r\n                            thePayload.sentEvts = sentBatches_1;\r\n                        }\r\n                        if (!persistStorage) {\r\n                            // Events passed Serializer size validation, log BeaconSendFailure\r\n                            // because it could still be size related but we did not exceed the\r\n                            // configured limit, and sendBeacon could fail for other reasons\r\n                            _sendBatchesNotification(droppedBatches_1, 8006 /* EventBatchNotificationReason.BeaconSendFailure */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        }\r\n                    }\r\n                    else {\r\n                        status = 0;\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    _warnToConsole(_logger, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(ex));\r\n                    status = 0;\r\n                }\r\n                finally {\r\n                    _doOnComplete(onComplete, status, {}, STR_EMPTY);\r\n                }\r\n            }\r\n            function _isBeaconPayload(sendType) {\r\n                // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit, so treat both as a beacon send\r\n                return sendType === 2 /* EventSendType.SendBeacon */ || sendType === 3 /* EventSendType.SyncFetch */;\r\n            }\r\n            function _adjustSendType(sendType) {\r\n                if (_isUnloading && _isBeaconPayload(sendType)) {\r\n                    sendType = 2 /* EventSendType.SendBeacon */;\r\n                }\r\n                return sendType;\r\n            }\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self.removeHeader = function (name) {\r\n                delete _headers[name];\r\n            };\r\n            _self[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */] = function () {\r\n                return _hasIdleConnection() && _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]();\r\n            };\r\n            _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */] = function (sendType, sendReason) {\r\n                if (isUndefined(sendType)) {\r\n                    sendType = 0 /* EventSendType.Batched */;\r\n                }\r\n                if (_isUnloading) {\r\n                    sendType = _adjustSendType(sendType);\r\n                    sendReason = 2 /* SendRequestReason.Unload */;\r\n                }\r\n                if (_canSendPayload(_batchQueue, sendType, 0)) {\r\n                    _sendBatches(_clearQueue(), 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _outstandingRequests === 0 && _batchQueue[_DYN_LENGTH /* @min:%2elength */] === 0;\r\n            };\r\n            _self[_DYN_SET_UNLOADING /* @min:%2esetUnloading */] = function (value) {\r\n                _isUnloading = value;\r\n            };\r\n            _self.addBatch = function (theBatch) {\r\n                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    // Try and kill the event faster\r\n                    if (_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                        return false;\r\n                    }\r\n                    _batchQueue[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                }\r\n                return true;\r\n            };\r\n            /**\r\n             * Queue all the remaining requests to be sent. The requests will be\r\n             * sent using HTML5 Beacons if they are available.\r\n             */\r\n            _self.teardown = function () {\r\n                if (_batchQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _sendBatches(_clearQueue(), 0, true, 2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n                arrForEach(_unloadHooks, function (hook) {\r\n                    hook && hook.rm && hook.rm();\r\n                });\r\n                _unloadHooks = [];\r\n            };\r\n            /**\r\n             * Pause the sending of requests. No new requests will be sent.\r\n             */\r\n            _self.pause = function () {\r\n                _paused = true;\r\n            };\r\n            /**\r\n             * Resume the sending of requests.\r\n             */\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, 4 /* SendRequestReason.Resumed */);\r\n            };\r\n            /**\r\n             * Sends a request synchronously to the Aria collector. This api is used to send\r\n             * a request containing a single immediate event.\r\n             *\r\n             * @param batch - The request to be sent.\r\n             * @param sendReason   - The token used to send the request.\r\n             */\r\n            _self[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */] = function (batch, sendType, sendReason) {\r\n                // This will not take into account the max connections restriction. Since this is sync, we can\r\n                // only send one of this request at a time and thus should not worry about multiple connections\r\n                // being used to send synchronous events.\r\n                // Increment active connection since we are still going to use a connection to send the request.\r\n                if (batch && batch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    if (isNullOrUndefined(sendType)) {\r\n                        sendType = 1 /* EventSendType.Synchronous */;\r\n                    }\r\n                    if (_isUnloading) {\r\n                        sendType = _adjustSendType(sendType);\r\n                        sendReason = 2 /* SendRequestReason.Unload */;\r\n                    }\r\n                    // For sync requests we will not wait for the clock skew.\r\n                    _sendBatches([batch], 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            function _hasIdleConnection() {\r\n                return !_paused && _outstandingRequests < maxConnections;\r\n            }\r\n            function _clearQueue() {\r\n                var theQueue = _batchQueue;\r\n                _batchQueue = [];\r\n                return theQueue;\r\n            }\r\n            function _canSendPayload(theBatches, sendType, retryCnt) {\r\n                var result = false;\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && !_paused && _sendInterfaces[sendType] && _serializer) {\r\n                    // Always attempt to send synchronous events don't wait for idle or clockSkew\r\n                    // and don't block retry requests if clockSkew is not yet set\r\n                    result = (sendType !== 0 /* EventSendType.Batched */) || (_hasIdleConnection() && (retryCnt > 0 || _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]()));\r\n                }\r\n                return result;\r\n            }\r\n            function _createDebugBatches(theBatches) {\r\n                var values = {};\r\n                if (theBatches) {\r\n                    arrForEach(theBatches, function (theBatch, idx) {\r\n                        values[idx] = {\r\n                            iKey: theBatch[_DYN_I_KEY /* @min:%2eiKey */](),\r\n                            evts: theBatch[_DYN_EVENTS /* @min:%2eevents */]()\r\n                        };\r\n                    });\r\n                }\r\n                return values;\r\n            }\r\n            function _sendBatches(theBatches, retryCount, isTeardown, sendType, sendReason) {\r\n                if (!theBatches || theBatches[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    // Nothing to do\r\n                    return;\r\n                }\r\n                if (_paused) {\r\n                    _sendBatchesNotification(theBatches, 1 /* EventBatchNotificationReason.Paused */, sendType);\r\n                    return;\r\n                }\r\n                // Make sure that if we are unloading the sendType is a supported version\r\n                sendType = _adjustSendType(sendType);\r\n                try {\r\n                    var orgBatches_1 = theBatches;\r\n                    var isSynchronous_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                    doPerf(_core, function () { return \"HttpManager:_sendBatches\"; }, function (perfEvt) {\r\n                        if (perfEvt) {\r\n                            // Perf Monitoring is enabled, so create a \"Quick\" copy of the original batches so we still report\r\n                            // the original values as part of the perfEvent. This is because theBatches uses .shift() to remove each\r\n                            // batch as they are processed - removing from the original array, so by the time the _createDebugBatches()\r\n                            // function is called the passed in value has changed and therefore the reported value for the perfEvent is incorrect\r\n                            theBatches = theBatches.slice(0);\r\n                        }\r\n                        var droppedBatches = [];\r\n                        var thePayload = null;\r\n                        var serializationStart = getTime();\r\n                        var sendInterface = _sendInterfaces[sendType] || (isSynchronous_1 ? _sendInterfaces[1 /* EventSendType.Synchronous */] : _sendInterfaces[0 /* EventSendType.Batched */]);\r\n                        var sendTransport = sendInterface && sendInterface[_DYN__TRANSPORT /* @min:%2e_transport */];\r\n                        // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit\r\n                        var isReducedPayload = _canHaveReducedPayload && (_isUnloading || _isBeaconPayload(sendType) || (sendTransport === 3 /* TransportType.Beacon */ || (sendInterface._isSync && sendTransport === 2 /* TransportType.Fetch */)));\r\n                        while (_canSendPayload(theBatches, sendType, retryCount)) {\r\n                            var theBatch = theBatches.shift();\r\n                            if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                if (!_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                                    // Make sure we have a payload object\r\n                                    thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](retryCount, isTeardown, isSynchronous_1, isReducedPayload, sendReason, sendType);\r\n                                    // Add the batch to the current payload\r\n                                    if (!_serializer.appendPayload(thePayload, theBatch, _maxEvtPerBatch)) {\r\n                                        // Entire batch was not added so send the payload and retry adding this batch\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        theBatches = [theBatch][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload = null;\r\n                                    }\r\n                                    else if (thePayload.overflow !== null) {\r\n                                        // Total Payload size was exceeded so send the payload and add the unsent as the next batch to send\r\n                                        theBatches = [thePayload.overflow][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload.overflow = null;\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        thePayload = null;\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    droppedBatches[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                                }\r\n                            }\r\n                        }\r\n                        // Make sure to flush any remaining payload\r\n                        if (thePayload) {\r\n                            _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                        }\r\n                        if (theBatches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Add any unsent batches back to the head of the queue\r\n                            _batchQueue = theBatches[_DYN_CONCAT /* @min:%2econcat */](_batchQueue);\r\n                        }\r\n                        // Now send notification about any dropped events\r\n                        _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, sendType);\r\n                    }, function () { return ({ batches: _createDebugBatches(orgBatches_1), retryCount: retryCount, isTeardown: isTeardown, isSynchronous: isSynchronous_1, sendReason: sendReason, useSendBeacon: _isBeaconPayload(sendType), sendType: sendType }); }, !isSynchronous_1);\r\n                }\r\n                catch (ex) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"Unexpected Exception sending batch: \" + dumpObj(ex));\r\n                }\r\n            }\r\n            function _buildRequestDetails(thePayload, useHeaders) {\r\n                var requestDetails = {\r\n                    url: _urlString,\r\n                    hdrs: {},\r\n                    useHdrs: false // Assume no headers\r\n                };\r\n                if (!useHeaders) {\r\n                    // Attempt to map headers to a query string if possible\r\n                    objForEachKey(_headers, function (name, value) {\r\n                        if (_collectorHeaderToQs[name]) {\r\n                            _addRequestDetails(requestDetails, _collectorHeaderToQs[name], value, false);\r\n                        }\r\n                        else {\r\n                            // No mapping, so just include in the headers anyway (may not get sent if using sendBeacon())\r\n                            requestDetails[_DYN_HDRS /* @min:%2ehdrs */][name] = value;\r\n                            requestDetails[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    // Copy the pre-defined headers into the payload headers\r\n                    requestDetails[_DYN_HDRS /* @min:%2ehdrs */] = extend(requestDetails[_DYN_HDRS /* @min:%2ehdrs */], _headers);\r\n                    requestDetails.useHdrs = (objKeys(requestDetails.hdrs)[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                }\r\n                _addRequestDetails(requestDetails, STR_CLIENT_ID, \"NO_AUTH\", useHeaders);\r\n                _addRequestDetails(requestDetails, STR_CLIENT_VERSION, FullVersionString, useHeaders);\r\n                var apiQsKeys = STR_EMPTY;\r\n                arrForEach(thePayload.apiKeys, function (apiKey) {\r\n                    if (apiQsKeys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        apiQsKeys += \",\";\r\n                    }\r\n                    apiQsKeys += apiKey;\r\n                });\r\n                _addRequestDetails(requestDetails, STR_API_KEY, apiQsKeys, useHeaders);\r\n                _addRequestDetails(requestDetails, STR_UPLOAD_TIME, dateNow().toString(), useHeaders);\r\n                var msfpc = _getMsfpc(thePayload);\r\n                if (isValueAssigned(msfpc)) {\r\n                    requestDetails.url += \"&ext.intweb.msfpc=\" + msfpc;\r\n                }\r\n                if (_clockSkewManager[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */]()) {\r\n                    _addRequestDetails(requestDetails, STR_TIME_DELTA_TO_APPLY, _clockSkewManager[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */](), useHeaders);\r\n                }\r\n                if (_core[_DYN_GET_WPARAM /* @min:%2egetWParam */]) {\r\n                    var wParam = _core[_DYN_GET_WPARAM /* @min:%2egetWParam */]();\r\n                    if (wParam >= 0) {\r\n                        requestDetails.url += \"&w=\" + wParam;\r\n                    }\r\n                }\r\n                for (var i = 0; i < _queryStringParameters[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                    requestDetails.url += \"&\" + _queryStringParameters[i].name + \"=\" + _queryStringParameters[i].value;\r\n                }\r\n                return requestDetails;\r\n            }\r\n            function _setTimingValue(timings, name, value) {\r\n                timings[name] = timings[name] || {};\r\n                timings[name][_postManager.identifier] = value;\r\n            }\r\n            function _doPayloadSend(thePayload, serializationStart, serializationCompleted, sendReason) {\r\n                if (thePayload && thePayload.payloadBlob && thePayload.payloadBlob[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var useSendHook_1 = !!_sendHook;\r\n                    var sendInterface_1 = _sendInterfaces[thePayload.sendType];\r\n                    // Send all data using a beacon style transport if closing mode is on or channel was teared down\r\n                    if (!_isBeaconPayload(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]) && thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */] && thePayload.sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        sendInterface_1 = _sendInterfaces[2 /* EventSendType.SendBeacon */] || _sendInterfaces[3 /* EventSendType.SyncFetch */] || sendInterface_1;\r\n                    }\r\n                    var useHeaders_1 = _useHeaders;\r\n                    // Disable header usage if we know we are using sendBeacon as additional headers are not supported\r\n                    if (thePayload.isBeacon || sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] === 3 /* TransportType.Beacon */) {\r\n                        useHeaders_1 = false;\r\n                    }\r\n                    var requestDetails_1 = _buildRequestDetails(thePayload, useHeaders_1);\r\n                    useHeaders_1 = useHeaders_1 || requestDetails_1[_DYN_USE_HDRS /* @min:%2euseHdrs */];\r\n                    var sendEventStart_1 = getTime();\r\n                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend\"; }, function () {\r\n                        // Increment the send attempt count and add timings after packaging (So it's not serialized in the 1st attempt)\r\n                        for (var batchLp = 0; batchLp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; batchLp++) {\r\n                            var theBatch = thePayload[_DYN_BATCHES /* @min:%2ebatches */][batchLp];\r\n                            var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                            for (var evtLp = 0; evtLp < theEvents[_DYN_LENGTH /* @min:%2elength */]; evtLp++) {\r\n                                var telemetryItem = theEvents[evtLp];\r\n                                if (_enableEventTimings) {\r\n                                    var timings = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                                    _setTimingValue(timings, \"sendEventStart\", sendEventStart_1);\r\n                                    _setTimingValue(timings, \"serializationStart\", serializationStart);\r\n                                    _setTimingValue(timings, \"serializationCompleted\", serializationCompleted);\r\n                                }\r\n                                telemetryItem[strSendAttempt] > 0 ? telemetryItem[strSendAttempt]++ : telemetryItem[strSendAttempt] = 1;\r\n                            }\r\n                        }\r\n                        // Note: always sending this notification in a synchronous manner.\r\n                        _sendBatchesNotification(thePayload[_DYN_BATCHES /* @min:%2ebatches */], (1000 /* EventBatchNotificationReason.SendingUndefined */ + (sendReason || 0 /* SendRequestReason.Undefined */)), thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        // Disabling the use of const because of Issue:\r\n                        // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                        // eslint-disable-next-line prefer-const\r\n                        var orgPayloadData = {\r\n                            data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                            urlString: requestDetails_1.url,\r\n                            headers: requestDetails_1[_DYN_HDRS /* @min:%2ehdrs */],\r\n                            _thePayload: thePayload,\r\n                            _sendReason: sendReason,\r\n                            timeout: _xhrTimeout,\r\n                            disableXhrSync: _disableXhrSync,\r\n                            disableFetchKeepAlive: _disableFetchKeepAlive\r\n                        };\r\n                        // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                        if (useHeaders_1) {\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                            }\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                            }\r\n                        }\r\n                        var sender = null;\r\n                        if (sendInterface_1) {\r\n                            // Send sync requests if the request is immediate or we are tearing down telemetry.\r\n                            sender = function (payload) {\r\n                                // Notify the clock skew manager that we are sending the first request (Potentially blocking all further requests)\r\n                                _clockSkewManager.firstRequestSent();\r\n                                var onComplete = function (status, headers) {\r\n                                    _retryRequestIfNeeded(status, headers, thePayload, sendReason);\r\n                                };\r\n                                var isSync = thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */] || thePayload.isSync;\r\n                                _sendPostMgr.preparePayload(function (processedPayload) {\r\n                                    try {\r\n                                        sendInterface_1.sendPOST(processedPayload, onComplete, isSync);\r\n                                        if (_sendListener) {\r\n                                            // Send the original payload to the listener\r\n                                            _sendListener(orgPayloadData, processedPayload, isSync, thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */]);\r\n                                        }\r\n                                    }\r\n                                    catch (ex) {\r\n                                        _doOnComplete(onComplete, 0, {});\r\n                                        _warnToConsole(_logger, \"Unexpected exception sending payload. Ex:\" + dumpObj(ex));\r\n                                    }\r\n                                }, _zipPayload, payload, isSync);\r\n                            };\r\n                        }\r\n                        doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sender\"; }, function () {\r\n                            if (sender) {\r\n                                if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                    _outstandingRequests++;\r\n                                }\r\n                                // Only call the hook if it's defined and we are not using sendBeacon as additional headers are not supported\r\n                                if (useSendHook_1 && !thePayload.isBeacon && sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] !== 3 /* TransportType.Beacon */) {\r\n                                    // Create a new IPayloadData that is sent into the hook method, so that the hook method\r\n                                    // can't change the object references to the orgPayloadData (it can still change the content -- mainly the headers)\r\n                                    // Disabling the use of const because of Issue:\r\n                                    // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                                    // eslint-disable-next-line prefer-const\r\n                                    var hookData_1 = {\r\n                                        data: orgPayloadData.data,\r\n                                        urlString: orgPayloadData.urlString,\r\n                                        headers: extend({}, orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */]),\r\n                                        timeout: orgPayloadData.timeout,\r\n                                        disableXhrSync: orgPayloadData[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */],\r\n                                        disableFetchKeepAlive: orgPayloadData[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */]\r\n                                    };\r\n                                    var senderCalled_1 = false;\r\n                                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sendHook\"; }, function () {\r\n                                        try {\r\n                                            _sendHook(hookData_1, function (payload) {\r\n                                                senderCalled_1 = true;\r\n                                                // Add back the internal properties\r\n                                                if (!_customHttpInterface && !payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */]) {\r\n                                                    payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] = payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] || orgPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                                                    payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] = payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] || orgPayloadData[_DYN__SEND_REASON /* @min:%2e_sendReason */];\r\n                                                }\r\n                                                sender(payload);\r\n                                            }, thePayload.isSync || thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */]);\r\n                                        }\r\n                                        catch (ex) {\r\n                                            if (!senderCalled_1) {\r\n                                                // The hook never called the sender -- assume that it never will\r\n                                                sender(orgPayloadData);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    sender(orgPayloadData);\r\n                                }\r\n                            }\r\n                        });\r\n                    }, function () { return ({ thePayload: thePayload, serializationStart: serializationStart, serializationCompleted: serializationCompleted, sendReason: sendReason }); }, thePayload.isSync);\r\n                }\r\n                if (thePayload.sizeExceed && thePayload.sizeExceed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for oversize events even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.sizeExceed, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n                if (thePayload.failedEvts && thePayload.failedEvts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for events that could not be serialized even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.failedEvts, 8002 /* EventBatchNotificationReason.InvalidEvent */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _addEventCompletedTimings(theEvents, sendEventCompleted) {\r\n                if (_enableEventTimings) {\r\n                    arrForEach(theEvents, function (theEvent) {\r\n                        var timings = theEvent[_DYN_TIMINGS /* @min:%2etimings */] = theEvent[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        _setTimingValue(timings, \"sendEventCompleted\", sendEventCompleted);\r\n                    });\r\n                }\r\n            }\r\n            function _retryRequestIfNeeded(status, headers, thePayload, sendReason) {\r\n                var reason = 9000 /* EventBatchNotificationReason.ResponseFailure */;\r\n                var droppedBatches = null;\r\n                var isRetrying = false;\r\n                var backOffTrans = false;\r\n                try {\r\n                    var shouldRetry = true;\r\n                    if (typeof status !== strUndefined) {\r\n                        if (headers) {\r\n                            _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */](headers[STR_TIME_DELTA_HEADER]);\r\n                            var killDuration = headers[STR_KILL_DURATION_HEADER] || headers[\"kill-duration-seconds\"];\r\n                            arrForEach(_killSwitch[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */](headers[STR_KILL_TOKENS_HEADER], killDuration), function (killToken) {\r\n                                arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    if (theBatch[_DYN_I_KEY /* @min:%2eiKey */]() === killToken) {\r\n                                        // Make sure we have initialized the array\r\n                                        droppedBatches = droppedBatches || [];\r\n                                        // Create a copy of the batch with all of the events (and more importantly the action functions)\r\n                                        var removedEvents = theBatch[_DYN_SPLIT /* @min:%2esplit */](0);\r\n                                        // And then remove the events for the payload batch and reduce the actual number of processed\r\n                                        thePayload.numEvents -= removedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                                        droppedBatches[_DYN_PUSH /* @min:%2epush */](removedEvents);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n                        // tslint:disable-next-line:triple-equals\r\n                        if (status == 200 || status == 204) {\r\n                            // Response was successfully sent\r\n                            reason = 200 /* EventBatchNotificationReason.Complete */;\r\n                            return;\r\n                        }\r\n                        if (!retryPolicyShouldRetryForStatus(status) || thePayload.numEvents <= 0) {\r\n                            // Only retry for specific response codes and if there is still events after kill switch processing\r\n                            shouldRetry = false;\r\n                        }\r\n                        // Derive the notification response from the HttpStatus Code\r\n                        reason = 9000 /* EventBatchNotificationReason.ResponseFailure */ + (status % 1000);\r\n                    }\r\n                    if (shouldRetry) {\r\n                        // The events should be retried -- so change notification to requeue them\r\n                        reason = 100 /* EventBatchNotificationReason.RequeueEvents */;\r\n                        var retryCount_1 = thePayload.retryCnt;\r\n                        if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                            // attempt to resend the entire batch\r\n                            if (retryCount_1 < maxRequestRetriesBeforeBackoff) {\r\n                                isRetrying = true;\r\n                                _doAction(function () {\r\n                                    // try to resend the same batches\r\n                                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                        // Reduce the outstanding request count (if this was an async request) as we didn't reduce the count\r\n                                        // previously and we are about to reschedule our retry attempt and we want an attempt to send\r\n                                        // to occur, it's also required to ensure that a follow up handleRequestFinished() call occurs\r\n                                        _outstandingRequests--;\r\n                                    }\r\n                                    _sendBatches(thePayload[_DYN_BATCHES /* @min:%2ebatches */], retryCount_1 + 1, thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */], _isUnloading ? 2 /* EventSendType.SendBeacon */ : thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], 5 /* SendRequestReason.Retry */);\r\n                                }, _isUnloading, retryPolicyGetMillisToBackoffForRetry(retryCount_1));\r\n                            }\r\n                            else {\r\n                                backOffTrans = true;\r\n                                if (_isUnloading) {\r\n                                    // we are unloading so don't try and requeue the events otherwise let the events get requeued and resent during the backoff sending\r\n                                    // This will also cause the events to be purged based on the priority (if necessary)\r\n                                    reason = 8001 /* EventBatchNotificationReason.NonRetryableStatus */;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!isRetrying) {\r\n                        // Make sure the clockSkewManager doesn't blocking further sending of requests once we have a proper response\r\n                        // This won't override any previously sent clock Skew value\r\n                        _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */]();\r\n                        _handleRequestFinished(thePayload, reason, sendReason, backOffTrans);\r\n                    }\r\n                    _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _handleRequestFinished(thePayload, batchReason, sendReason, backOffTrans) {\r\n                try {\r\n                    if (backOffTrans) {\r\n                        // Slow down the transmission requests\r\n                        _postManager[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */]();\r\n                    }\r\n                    var theBatches = thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                    if (batchReason === 200 /* EventBatchNotificationReason.Complete */) {\r\n                        theBatches = thePayload.sentEvts || thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                        if (!backOffTrans && !thePayload.isSync) {\r\n                            // We have a successful async response, so the lets open the floodgates\r\n                            // The reason for checking isSync is to avoid unblocking if beacon send occurred as it\r\n                            // doesn't wait for a response.\r\n                            _postManager._clearBackOff();\r\n                        }\r\n                        _addCompleteTimings(theBatches);\r\n                    }\r\n                    // Send the notifications synchronously\r\n                    _sendBatchesNotification(theBatches, batchReason, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                }\r\n                finally {\r\n                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                        // we always need to decrement this value otherwise the httpmanager locks up and won't send any more events\r\n                        _outstandingRequests--;\r\n                        // Don't try to send additional queued events if this is a retry operation as the retried\r\n                        // response will eventually call _handleRequestFinished for the retried event\r\n                        if (sendReason !== 5 /* SendRequestReason.Retry */) {\r\n                            // Try and send any other queued batched events\r\n                            _self.sendQueuedRequests(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], sendReason);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _addCompleteTimings(theBatches) {\r\n                if (_enableEventTimings) {\r\n                    var sendEventCompleted_1 = getTime();\r\n                    arrForEach(theBatches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _addEventCompletedTimings(theBatch[_DYN_EVENTS /* @min:%2eevents */](), sendEventCompleted_1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function _doAction(cb, isSync, interval) {\r\n                if (isSync) {\r\n                    cb();\r\n                }\r\n                else {\r\n                    _timeoutWrapper.set(cb, interval);\r\n                }\r\n            }\r\n            function _getMsfpc(thePayload) {\r\n                for (var lp = 0; lp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var msfpc = thePayload[_DYN_BATCHES /* @min:%2ebatches */][lp].Msfpc();\r\n                    if (msfpc) {\r\n                        return encodeURIComponent(msfpc);\r\n                    }\r\n                }\r\n                return STR_EMPTY;\r\n            }\r\n            function _handleCollectorResponse(responseText) {\r\n                var responseHandlers = _responseHandlers;\r\n                try {\r\n                    for (var i = 0; i < responseHandlers[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                        try {\r\n                            responseHandlers[i](responseText);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 519 /* _eExtendedInternalMessageId.PostResponseHandler */, \"Response handler failed: \" + e);\r\n                        }\r\n                    }\r\n                    if (responseText) {\r\n                        var response = JSON.parse(responseText);\r\n                        if (isValueAssigned(response.webResult) && isValueAssigned(response.webResult[STR_MSFPC])) {\r\n                            // Set cookie\r\n                            _cookieMgr.set(\"MSFPC\", response.webResult[STR_MSFPC], 365 * 86400);\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Doing nothing\r\n                }\r\n            }\r\n            function _sendBatchesNotification(theBatches, batchReason, sendType, sendSync) {\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && actions) {\r\n                    var theAction_1 = actions[_getNotificationAction(batchReason)];\r\n                    if (theAction_1) {\r\n                        var isSyncRequest_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                        doPerf(_core, function () { return \"HttpManager:_sendBatchesNotification\"; }, function () {\r\n                            _doAction(function () {\r\n                                try {\r\n                                    theAction_1.call(actions, theBatches, batchReason, isSyncRequest_1, sendType);\r\n                                }\r\n                                catch (e) {\r\n                                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + e);\r\n                                }\r\n                            }, sendSync || isSyncRequest_1, 0);\r\n                        }, function () { return ({ batches: _createDebugBatches(theBatches), reason: batchReason, isSync: isSyncRequest_1, sendSync: sendSync, sendType: sendType }); }, !isSyncRequest_1);\r\n                    }\r\n                }\r\n            }\r\n            function _getNotificationAction(reason) {\r\n                var action = _eventActionMap[reason];\r\n                if (!isValueAssigned(action)) {\r\n                    action = STR_OTHER;\r\n                    if (reason >= 9000 /* EventBatchNotificationReason.ResponseFailure */ && reason <= 9999 /* EventBatchNotificationReason.ResponseFailureMax */) {\r\n                        action = STR_RESPONSE_FAIL;\r\n                    }\r\n                    else if (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */) {\r\n                        action = STR_DROPPED;\r\n                    }\r\n                    else if (reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */) {\r\n                        action = STR_SENDING;\r\n                    }\r\n                }\r\n                return action;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for HttpManager.prototype.initialize.\r\n// Removed Stub for HttpManager.prototype.addHeader.\r\n// Removed Stub for HttpManager.prototype.removeHeader.\r\n// Removed Stub for HttpManager.prototype.addResponseHandler.\r\n// Removed Stub for HttpManager.prototype.addBatch.\r\n// Removed Stub for HttpManager.prototype.canSendRequest.\r\n// Removed Stub for HttpManager.prototype.sendQueuedRequests.\r\n// Removed Stub for HttpManager.prototype.isCompletelyIdle.\r\n// Removed Stub for HttpManager.prototype.setUnloading.\r\n// Removed Stub for HttpManager.prototype.teardown.\r\n// Removed Stub for HttpManager.prototype.pause.\r\n// Removed Stub for HttpManager.prototype.resume.\r\n// Removed Stub for HttpManager.prototype.sendSynchronousBatch.\r\n// Removed Stub for HttpManager.prototype.serializeOfflineEvt.\r\n// Removed Stub for HttpManager.prototype.getOfflineRequestDetails.\r\n// Removed Stub for HttpManager.prototype.createOneDSPayload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    HttpManager.__ieDyn=1;\n\n    return HttpManager;\r\n}());\r\nexport { HttpManager };\r\n//# sourceMappingURL=HttpManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* TimeoutOverrideWrapper.ts\r\n* @author  Nev Wylie (newylie)\r\n* @copyright Microsoft 2022\r\n* Simple internal timeout wrapper\r\n*/\r\nimport { scheduleTimeoutWith } from \"@nevware21/ts-utils\";\r\nexport function createTimeoutWrapper(argSetTimeout, argClearTimeout) {\r\n    return {\r\n        set: function (callback, ms) {\r\n            var args = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                args[_i - 2] = arguments[_i];\r\n            }\r\n            return scheduleTimeoutWith([argSetTimeout, argClearTimeout], callback, ms, args);\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TimeoutOverrideWrapper.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* PostManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseTelemetryPlugin, EventsDiscardedReason, _throwInternal, addPageHideEventListener, addPageShowEventListener, addPageUnloadEventListener, arrForEach, createProcessTelemetryContext, createUniqueNamespace, doPerf, getWindow, isChromium, isGreaterThanZero, isNumber, mergeEvtNamespace, objForEachKey, onConfigChange, optimizeObject, proxyFunctions, removePageHideEventListener, removePageShowEventListener, removePageUnloadEventListener, setProcessTelemetryTimings } from \"@microsoft/1ds-core-js\";\r\nimport { createPromise } from \"@nevware21/ts-async\";\r\nimport { isPromiseLike, mathCeil, mathMax, mathMin, objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { BE_PROFILE, NRT_PROFILE, RT_PROFILE } from \"./DataModels\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { HttpManager } from \"./HttpManager\";\r\nimport { STR_AUTH_WEB_TOKEN, STR_MSA_DEVICE_TICKET, STR_TRACE, STR_USER } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry } from \"./RetryPolicy\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_AUTO_FLUSH_EVENTS_LI14, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_DISABLE_AUTO_BATCH_F15, _DYN_EVENTS, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_IDENTIFIER, _DYN_IGNORE_MC1_MS0_COOKI13, _DYN_INITIALIZE, _DYN_I_KEY, _DYN_LATENCY, _DYN_LENGTH, _DYN_OVERRIDE_INSTRUMENTA16, _DYN_PUSH, _DYN_SEND_ATTEMPT, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SPLIT, _DYN_SYNC, _DYN__BACK_OFF_TRANSMISSI12 } from \"./__DynamicConstants\";\r\nvar FlushCheckTimer = 0.250; // This needs to be in seconds, so this is 250ms\r\nvar MaxNumberEventPerBatch = 500;\r\nvar EventsDroppedAtOneTime = 20;\r\nvar MaxSendAttempts = 6;\r\nvar MaxSyncUnloadSendAttempts = 2; // Assuming 2 based on beforeunload and unload\r\nvar MaxBackoffCount = 4;\r\nvar MaxConnections = 2;\r\nvar MaxRequestRetriesBeforeBackoff = 1;\r\nvar MaxEventsLimitInMem = 10000;\r\nvar strEventsDiscarded = \"eventsDiscarded\";\r\nvar EMPTY_STR = \"\";\r\nvar undefValue = undefined;\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultPostChannelConfig = objDeepFreeze({\r\n    eventsLimitInMem: { isVal: isGreaterThanZero, v: MaxEventsLimitInMem },\r\n    immediateEventLimit: { isVal: isGreaterThanZero, v: 500 },\r\n    autoFlushEventsLimit: { isVal: isGreaterThanZero, v: 0 },\r\n    disableAutoBatchFlushLimit: false,\r\n    httpXHROverride: { isVal: isOverrideFn, v: undefValue },\r\n    overrideInstrumentationKey: undefValue,\r\n    overrideEndpointUrl: undefValue,\r\n    disableTelemetry: false,\r\n    ignoreMc1Ms0CookieProcessing: false,\r\n    setTimeoutOverride: undefValue,\r\n    clearTimeoutOverride: undefValue,\r\n    payloadPreprocessor: undefValue,\r\n    payloadListener: undefValue,\r\n    disableEventTimings: undefValue,\r\n    valueSanitizer: undefValue,\r\n    stringifyObjects: undefValue,\r\n    enableCompoundKey: undefValue,\r\n    disableOptimizeObj: false,\r\n    fetchCredentials: undefValue,\r\n    // disableCacheHeader: undefValue, // See Task #7178858 - Collector requires a change to support this\r\n    transports: undefValue,\r\n    unloadTransports: undefValue,\r\n    useSendBeacon: undefValue,\r\n    disableFetchKeepAlive: undefValue,\r\n    avoidOptions: false,\r\n    xhrTimeout: undefValue,\r\n    disableXhrSync: undefValue,\r\n    alwaysUseXhrOverride: false,\r\n    maxEventRetryAttempts: { isVal: isNumber, v: MaxSendAttempts },\r\n    maxUnloadEventRetryAttempts: { isVal: isNumber, v: MaxSyncUnloadSendAttempts },\r\n    addNoResponse: undefValue,\r\n    maxEvtPerBatch: { isVal: isNumber, v: MaxNumberEventPerBatch },\r\n    excludeCsMetaData: undefValue,\r\n    requestLimit: {}\r\n});\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\n/**\r\n * Class that manages adding events to inbound queues and batching of events\r\n * into requests.\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar PostChannel = /** @class */ (function (_super) {\r\n    __extends(PostChannel, _super);\r\n    function PostChannel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"PostChannel\";\r\n        _this.priority = 1011;\r\n        _this.version = '4.3.11';\r\n        var _postConfig;\r\n        var _isTeardownCalled = false;\r\n        var _flushCallbackQueue = [];\r\n        var _flushCallbackTimer;\r\n        var _paused = false;\r\n        var _immediateQueueSize = 0;\r\n        var _immediateQueueSizeLimit;\r\n        var _queueSize = 0;\r\n        var _queueSizeLimit;\r\n        var _profiles = {};\r\n        var _currentProfile = RT_PROFILE;\r\n        var _scheduledTimer;\r\n        var _immediateTimer;\r\n        var _currentBackoffCount;\r\n        var _timerCount;\r\n        var _httpManager;\r\n        var _batchQueues;\r\n        var _autoFlushEventsLimit;\r\n        // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n        var _autoFlushBatchLimit;\r\n        var _delayedBatchSendLatency;\r\n        var _delayedBatchReason;\r\n        var _optimizeObject;\r\n        var _isPageUnloadTriggered;\r\n        var _maxEventSendAttempts;\r\n        var _maxUnloadEventSendAttempts;\r\n        var _evtNamespace;\r\n        var _timeoutWrapper;\r\n        var _ignoreMc1Ms0CookieProcessing;\r\n        var _disableAutoBatchFlushLimit;\r\n        var _notificationManager;\r\n        var _unloadHandlersAdded;\r\n        var _overrideInstrumentationKey;\r\n        var _disableTelemetry;\r\n        var _maxEvtPerBatch;\r\n        dynamicProto(PostChannel, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_httpManager, _postConfig];\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, extensions) {\r\n                doPerf(core, function () { return \"PostChannel:initialize\"; }, function () {\r\n                    _base[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, core, extensions);\r\n                    _notificationManager = core.getNotifyMgr();\r\n                    try {\r\n                        _evtNamespace = mergeEvtNamespace(createUniqueNamespace(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */]), core.evtNamespace && core.evtNamespace());\r\n                        _self._addHook(onConfigChange(theConfig, function (details) {\r\n                            var coreConfig = details.cfg;\r\n                            var ctx = createProcessTelemetryContext(null, coreConfig, core);\r\n                            _postConfig = ctx.getExtCfg(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */], defaultPostChannelConfig);\r\n                            _timeoutWrapper = createTimeoutWrapper(_postConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], _postConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                            // Only try and use the optimizeObject() if this appears to be a chromium based browser and it has not been explicitly disabled\r\n                            _optimizeObject = !_postConfig.disableOptimizeObj && isChromium();\r\n                            _ignoreMc1Ms0CookieProcessing = _postConfig[_DYN_IGNORE_MC1_MS0_COOKI13 /* @min:%2eignoreMc1Ms0CookieProcessing */];\r\n                            _hookWParam(core); // _hookWParam uses _ignoreMc1Ms0CookieProcessing\r\n                            _queueSizeLimit = _postConfig.eventsLimitInMem;\r\n                            _immediateQueueSizeLimit = _postConfig.immediateEventLimit;\r\n                            _autoFlushEventsLimit = _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */];\r\n                            _maxEventSendAttempts = _postConfig.maxEventRetryAttempts;\r\n                            _maxUnloadEventSendAttempts = _postConfig.maxUnloadEventRetryAttempts;\r\n                            _disableAutoBatchFlushLimit = _postConfig[_DYN_DISABLE_AUTO_BATCH_F15 /* @min:%2edisableAutoBatchFlushLimit */];\r\n                            _maxEvtPerBatch = _postConfig.maxEvtPerBatch;\r\n                            if (isPromiseLike(coreConfig.endpointUrl)) {\r\n                                _self.pause();\r\n                            }\r\n                            else if (!!_paused) {\r\n                                // if previous url is promise, resume\r\n                                _self.resume();\r\n                            }\r\n                            _setAutoLimits();\r\n                            // Override iKey if provided in Post config if provided for during initialization\r\n                            _overrideInstrumentationKey = _postConfig[_DYN_OVERRIDE_INSTRUMENTA16 /* @min:%2eoverrideInstrumentationKey */];\r\n                            // DisableTelemetry was defined in the config provided during initialization\r\n                            _disableTelemetry = !!_postConfig.disableTelemetry;\r\n                            if (_unloadHandlersAdded) {\r\n                                _removeUnloadHandlers();\r\n                            }\r\n                            var excludePageUnloadEvents = coreConfig.disablePageUnloadEvents || [];\r\n                            // When running in Web browsers try to send all telemetry if page is unloaded\r\n                            _unloadHandlersAdded = addPageUnloadEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                            _unloadHandlersAdded = addPageHideEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                            _unloadHandlersAdded = addPageShowEventListener(_handleShowEvents, coreConfig.disablePageShowEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                        }));\r\n                        // only initialize the manager once\r\n                        _httpManager[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, _self.core, _self);\r\n                    }\r\n                    catch (e) {\r\n                        // resetting the initialized state because of failure\r\n                        _self.setInitialized(false);\r\n                        throw e;\r\n                    }\r\n                }, function () { return ({ theConfig: theConfig, core: core, extensions: extensions }); });\r\n            };\r\n            _self.processTelemetry = function (ev, itemCtx) {\r\n                setProcessTelemetryTimings(ev, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                itemCtx = itemCtx || _self._getTelCtx(itemCtx);\r\n                var event = ev;\r\n                if (!_disableTelemetry && !_isTeardownCalled) {\r\n                    // Override iKey if provided in Post config if provided for during initialization\r\n                    if (_overrideInstrumentationKey) {\r\n                        event[_DYN_I_KEY /* @min:%2eiKey */] = _overrideInstrumentationKey;\r\n                    }\r\n                    _addEventToQueues(event, true);\r\n                    if (_isPageUnloadTriggered) {\r\n                        // Unload event has been received so we need to try and flush new events\r\n                        _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                    }\r\n                    else {\r\n                        _scheduleTimer();\r\n                    }\r\n                }\r\n                _self.processNext(event, itemCtx);\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                try {\r\n                    var details_1 = _httpManager && _httpManager[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */]();\r\n                    if (_httpManager) {\r\n                        return {\r\n                            getUrl: function () {\r\n                                if (details_1) {\r\n                                    return details_1.url;\r\n                                }\r\n                                return null;\r\n                            },\r\n                            serialize: _serialize,\r\n                            batch: _batch,\r\n                            shouldProcess: function (evt) {\r\n                                return !_disableTelemetry;\r\n                            },\r\n                            createPayload: function (evt) {\r\n                                return null;\r\n                            },\r\n                            createOneDSPayload: function (evts) {\r\n                                if (_httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */]) {\r\n                                    return _httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */](evts, _optimizeObject);\r\n                                }\r\n                            }\r\n                        };\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                _isTeardownCalled = true;\r\n                _httpManager.teardown();\r\n                _removeUnloadHandlers();\r\n                // Just register to remove all events associated with this namespace\r\n                _initDefaults();\r\n            };\r\n            function _removeUnloadHandlers() {\r\n                removePageUnloadEventListener(null, _evtNamespace);\r\n                removePageHideEventListener(null, _evtNamespace);\r\n                removePageShowEventListener(null, _evtNamespace);\r\n            }\r\n            function _hookWParam(core) {\r\n                var existingGetWParamMethod = core[_DYN_GET_WPARAM /* @min:%2egetWParam */];\r\n                core[_DYN_GET_WPARAM /* @min:%2egetWParam */] = function () {\r\n                    var wparam = 0;\r\n                    if (_ignoreMc1Ms0CookieProcessing) {\r\n                        wparam = wparam | 2;\r\n                    }\r\n                    return wparam | existingGetWParamMethod.call(core);\r\n                };\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    arrForEach(arr, function (item) {\r\n                        if (rlt) {\r\n                            rlt += \"\\n\";\r\n                        }\r\n                        rlt += item;\r\n                    });\r\n                }\r\n                return rlt;\r\n            }\r\n            function _serialize(event) {\r\n                var rlt = EMPTY_STR;\r\n                try {\r\n                    _cleanEvent(event);\r\n                    rlt = _httpManager[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */](event);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            // Moving event handlers out from the initialize closure so that any local variables can be garbage collected\r\n            function _handleUnloadEvents(evt) {\r\n                var theEvt = evt || getWindow().event; // IE 8 does not pass the event\r\n                if (theEvt.type !== \"beforeunload\") {\r\n                    // Only set the unload trigger if not beforeunload event as beforeunload can be cancelled while the other events can't\r\n                    _isPageUnloadTriggered = true;\r\n                    _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n                }\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n            }\r\n            function _handleShowEvents(evt) {\r\n                // Handle the page becoming visible again\r\n                _isPageUnloadTriggered = false;\r\n                _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n            }\r\n            function _cleanEvent(event) {\r\n                if (event.ext && event.ext[STR_TRACE]) {\r\n                    delete (event.ext[STR_TRACE]);\r\n                }\r\n                if (event.ext && event.ext[STR_USER] && event.ext[STR_USER][\"id\"]) {\r\n                    delete (event.ext[STR_USER][\"id\"]);\r\n                }\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event.ext = optimizeObject(event.ext);\r\n                    if (event.baseData) {\r\n                        event.baseData = optimizeObject(event.baseData);\r\n                    }\r\n                    if (event.data) {\r\n                        event.data = optimizeObject(event.data);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToQueues(event, append) {\r\n                // If send attempt field is undefined we should set it to 0.\r\n                if (!event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */]) {\r\n                    event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] = 0;\r\n                }\r\n                // Add default latency\r\n                if (!event[_DYN_LATENCY /* @min:%2elatency */]) {\r\n                    event[_DYN_LATENCY /* @min:%2elatency */] = 1 /* EventLatencyValue.Normal */;\r\n                }\r\n                _cleanEvent(event);\r\n                if (event[_DYN_SYNC /* @min:%2esync */]) {\r\n                    // If the transmission is backed off then do not send synchronous events.\r\n                    // We will convert these events to Real time latency instead.\r\n                    if (_currentBackoffCount || _paused) {\r\n                        event[_DYN_LATENCY /* @min:%2elatency */] = 3 /* EventLatencyValue.RealTime */;\r\n                        event[_DYN_SYNC /* @min:%2esync */] = false;\r\n                    }\r\n                    else {\r\n                        // Log the event synchronously\r\n                        if (_httpManager) {\r\n                            // v8 performance optimization for iterating over the keys\r\n                            if (_optimizeObject) {\r\n                                event = optimizeObject(event);\r\n                            }\r\n                            _httpManager[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */](EventBatch.create(event[_DYN_I_KEY /* @min:%2eiKey */], [event]), event[_DYN_SYNC /* @min:%2esync */] === true ? 1 /* EventSendType.Synchronous */ : event[_DYN_SYNC /* @min:%2esync */], 3 /* SendRequestReason.SyncEvent */);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var evtLatency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var queueSize = _queueSize;\r\n                var queueLimit = _queueSizeLimit;\r\n                if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                    queueSize = _immediateQueueSize;\r\n                    queueLimit = _immediateQueueSizeLimit;\r\n                }\r\n                var eventDropped = false;\r\n                // Only add the event if the queue isn't full or it's a direct event (which don't add to the queue sizes)\r\n                if (queueSize < queueLimit) {\r\n                    eventDropped = !_addEventToProperQueue(event, append);\r\n                }\r\n                else {\r\n                    var dropLatency = 1 /* EventLatencyValue.Normal */;\r\n                    var dropNumber = EventsDroppedAtOneTime;\r\n                    if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                        // Only drop other immediate events as they are not technically sharing the general queue\r\n                        dropLatency = 4 /* EventLatencyValue.Immediate */;\r\n                        dropNumber = 1;\r\n                    }\r\n                    // Drop old event from lower or equal latency\r\n                    eventDropped = true;\r\n                    if (_dropEventWithLatencyOrLess(event[_DYN_I_KEY /* @min:%2eiKey */], event[_DYN_LATENCY /* @min:%2elatency */], dropLatency, dropNumber)) {\r\n                        eventDropped = !_addEventToProperQueue(event, append);\r\n                    }\r\n                }\r\n                if (eventDropped) {\r\n                    // Can't drop events from current queues because the all the slots are taken by queues that are being flushed.\r\n                    _notifyEvents(strEventsDiscarded, [event], EventsDiscardedReason.QueueFull);\r\n                }\r\n            }\r\n            _self.setEventQueueLimits = function (eventLimit, autoFlushLimit) {\r\n                _postConfig.eventsLimitInMem = _queueSizeLimit = isGreaterThanZero(eventLimit) ? eventLimit : MaxEventsLimitInMem;\r\n                _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */] = _autoFlushEventsLimit = isGreaterThanZero(autoFlushLimit) ? autoFlushLimit : 0;\r\n                _setAutoLimits();\r\n                // We only do this check here as during normal event addition if the queue is > then events start getting dropped\r\n                var doFlush = _queueSize > eventLimit;\r\n                if (!doFlush && _autoFlushBatchLimit > 0) {\r\n                    // Check the auto flush max batch size\r\n                    for (var latency = 1 /* EventLatencyValue.Normal */; !doFlush && latency <= 3 /* EventLatencyValue.RealTime */; latency++) {\r\n                        var batchQueue = _batchQueues[latency];\r\n                        if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                            arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit) {\r\n                                    // If any 1 batch is > than the limit then trigger an auto flush\r\n                                    doFlush = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                _performAutoFlush(true, doFlush);\r\n            };\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n                _httpManager && _httpManager.pause();\r\n            };\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _httpManager && _httpManager.resume();\r\n                _scheduleTimer();\r\n            };\r\n            _self._loadTransmitProfiles = function (profiles) {\r\n                _resetTransmitProfiles();\r\n                objForEachKey(profiles, function (profileName, profileValue) {\r\n                    var profLen = profileValue[_DYN_LENGTH /* @min:%2elength */];\r\n                    if (profLen >= 2) {\r\n                        var directValue = (profLen > 2 ? profileValue[2] : 0);\r\n                        profileValue.splice(0, profLen - 2);\r\n                        // Make sure if a higher latency is set to not send then don't send lower latency\r\n                        if (profileValue[1] < 0) {\r\n                            profileValue[0] = -1;\r\n                        }\r\n                        // Make sure each latency is multiple of the latency higher then it. If not a multiple\r\n                        // we round up so that it becomes a multiple.\r\n                        if (profileValue[1] > 0 && profileValue[0] > 0) {\r\n                            var timerMultiplier = profileValue[0] / profileValue[1];\r\n                            profileValue[0] = mathCeil(timerMultiplier) * profileValue[1];\r\n                        }\r\n                        // Add back the direct profile timeout\r\n                        if (directValue >= 0 && profileValue[1] >= 0 && directValue > profileValue[1]) {\r\n                            // Make sure if it's not disabled (< 0) then make sure it's not larger than RealTime\r\n                            directValue = profileValue[1];\r\n                        }\r\n                        profileValue[_DYN_PUSH /* @min:%2epush */](directValue);\r\n                        _profiles[profileName] = profileValue;\r\n                    }\r\n                });\r\n            };\r\n            _self.flush = function (isAsync, callback, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    sendReason = sendReason || 1 /* SendRequestReason.ManualFlush */;\r\n                    if (isAsync) {\r\n                        if (!callback) {\r\n                            result = createPromise(function (resolve) {\r\n                                // Set the callback to the promise resolve callback\r\n                                callback = resolve;\r\n                            });\r\n                        }\r\n                        if (_flushCallbackTimer == null) {\r\n                            // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                            _clearScheduledTimer();\r\n                            // Move all queued events to the HttpManager so that we don't discard new events (Auto flush scenario)\r\n                            _queueBatches(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                            _flushCallbackTimer = _createTimer(function () {\r\n                                _flushCallbackTimer = null;\r\n                                _flushImpl(callback, sendReason);\r\n                            }, 0);\r\n                        }\r\n                        else {\r\n                            // Even if null (no callback) this will ensure after the flushImpl finishes waiting\r\n                            // for a completely idle connection it will attempt to re-flush any queued events on the next cycle\r\n                            _flushCallbackQueue[_DYN_PUSH /* @min:%2epush */](callback);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                        var cleared = _clearScheduledTimer();\r\n                        // Now cause all queued events to be sent synchronously\r\n                        _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 1 /* EventSendType.Synchronous */, sendReason);\r\n                        callback && callback();\r\n                        if (cleared) {\r\n                            // restart the normal event timer if it was cleared\r\n                            _scheduleTimer();\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.setMsaAuthTicket = function (ticket) {\r\n                _httpManager.addHeader(STR_MSA_DEVICE_TICKET, ticket);\r\n            };\r\n            _self.setAuthPluginHeader = function (token) {\r\n                _httpManager.addHeader(STR_AUTH_WEB_TOKEN, token);\r\n            };\r\n            _self.removeAuthPluginHeader = function () {\r\n                _httpManager.removeHeader(STR_AUTH_WEB_TOKEN);\r\n            };\r\n            _self.hasEvents = _hasEvents;\r\n            _self._setTransmitProfile = function (profileName) {\r\n                if (_currentProfile !== profileName && _profiles[profileName] !== undefined) {\r\n                    _clearScheduledTimer();\r\n                    _currentProfile = profileName;\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            proxyFunctions(_self, function () { return _httpManager; }, [\"addResponseHandler\"]);\r\n            /**\r\n             * Batch and send events currently in the queue for the given latency.\r\n             * @param latency - Latency for which to send events.\r\n             */\r\n            function _sendEventsForLatencyAndAbove(latency, sendType, sendReason) {\r\n                var queued = _queueBatches(latency, sendType, sendReason);\r\n                // Always trigger the request as while the post channel may not have queued additional events, the httpManager may already have waiting events\r\n                _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](sendType, sendReason);\r\n                return queued;\r\n            }\r\n            function _hasEvents() {\r\n                return _queueSize > 0;\r\n            }\r\n            /**\r\n             * Try to schedule the timer after which events will be sent. If there are\r\n             * no events to be sent, or there is already a timer scheduled, or the\r\n             * http manager doesn't have any idle connections this method is no-op.\r\n             */\r\n            function _scheduleTimer() {\r\n                // If we had previously attempted to send requests, but the http manager didn't have any idle connections then the requests where delayed\r\n                // so try and requeue then again now\r\n                if (_delayedBatchSendLatency >= 0 && _queueBatches(_delayedBatchSendLatency, 0 /* EventSendType.Batched */, _delayedBatchReason)) {\r\n                    _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, _delayedBatchReason);\r\n                }\r\n                if (_immediateQueueSize > 0 && !_immediateTimer && !_paused) {\r\n                    // During initialization _profiles enforce that the direct [2] is less than real time [1] timer value\r\n                    // If the immediateTimeout is disabled the immediate events will be sent with Real Time events\r\n                    var immediateTimeOut = _profiles[_currentProfile][2];\r\n                    if (immediateTimeOut >= 0) {\r\n                        _immediateTimer = _createTimer(function () {\r\n                            _immediateTimer = null;\r\n                            // Only try to send direct events\r\n                            _sendEventsForLatencyAndAbove(4 /* EventLatencyValue.Immediate */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            _scheduleTimer();\r\n                        }, immediateTimeOut);\r\n                    }\r\n                }\r\n                // During initialization the _profiles enforce that the normal [0] is a multiple of the real time [1] timer value\r\n                var timeOut = _profiles[_currentProfile][1];\r\n                if (!_scheduledTimer && !_flushCallbackTimer && timeOut >= 0 && !_paused) {\r\n                    if (_hasEvents()) {\r\n                        _scheduledTimer = _createTimer(function () {\r\n                            _scheduledTimer = null;\r\n                            _sendEventsForLatencyAndAbove(_timerCount === 0 ? 3 /* EventLatencyValue.RealTime */ : 1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            // Increment the count for next cycle\r\n                            _timerCount++;\r\n                            _timerCount %= 2;\r\n                            _scheduleTimer();\r\n                        }, timeOut);\r\n                    }\r\n                    else {\r\n                        _timerCount = 0;\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */] = function () {\r\n                if (_currentBackoffCount < MaxBackoffCount) {\r\n                    _currentBackoffCount++;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            _self._clearBackOff = function () {\r\n                if (_currentBackoffCount) {\r\n                    _currentBackoffCount = 0;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            function _initDefaults() {\r\n                _postConfig = null;\r\n                _isTeardownCalled = false;\r\n                _flushCallbackQueue = [];\r\n                _flushCallbackTimer = null;\r\n                _paused = false;\r\n                _immediateQueueSize = 0;\r\n                _immediateQueueSizeLimit = 500;\r\n                _queueSize = 0;\r\n                _queueSizeLimit = MaxEventsLimitInMem;\r\n                _profiles = {};\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduledTimer = null;\r\n                _immediateTimer = null;\r\n                _currentBackoffCount = 0;\r\n                _timerCount = 0;\r\n                _batchQueues = {};\r\n                _autoFlushEventsLimit = 0;\r\n                _unloadHandlersAdded = false;\r\n                // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n                _autoFlushBatchLimit = 0;\r\n                _delayedBatchSendLatency = -1;\r\n                _delayedBatchReason = null;\r\n                _optimizeObject = true;\r\n                _isPageUnloadTriggered = false;\r\n                _maxEventSendAttempts = MaxSendAttempts;\r\n                _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n                _evtNamespace = null;\r\n                _overrideInstrumentationKey = null;\r\n                _maxEvtPerBatch = null;\r\n                _disableTelemetry = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                // httpManager init should use the default value, because _maxEvtPerBatch is null currently\r\n                _httpManager = new HttpManager(MaxNumberEventPerBatch, MaxConnections, MaxRequestRetriesBeforeBackoff, {\r\n                    requeue: _requeueEvents,\r\n                    send: _sendingEvent,\r\n                    sent: _eventsSentEvent,\r\n                    drop: _eventsDropped,\r\n                    rspFail: _eventsResponseFail,\r\n                    oth: _otherEvent\r\n                });\r\n                _initializeProfiles();\r\n                _clearQueues();\r\n                _setAutoLimits();\r\n            }\r\n            function _createTimer(theTimerFunc, timeOut) {\r\n                // If the transmission is backed off make the timer at least 1 sec to allow for back off.\r\n                if (timeOut === 0 && _currentBackoffCount) {\r\n                    timeOut = 1;\r\n                }\r\n                var timerMultiplier = 1000;\r\n                if (_currentBackoffCount) {\r\n                    timerMultiplier = retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount - 1);\r\n                }\r\n                return _timeoutWrapper.set(theTimerFunc, timeOut * timerMultiplier);\r\n            }\r\n            function _clearScheduledTimer() {\r\n                if (_scheduledTimer !== null) {\r\n                    _scheduledTimer.cancel();\r\n                    _scheduledTimer = null;\r\n                    _timerCount = 0;\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            // Try to send all queued events using beacons if available\r\n            function _releaseAllQueues(sendType, sendReason) {\r\n                _clearScheduledTimer();\r\n                // Cancel all flush callbacks\r\n                if (_flushCallbackTimer) {\r\n                    _flushCallbackTimer.cancel();\r\n                    _flushCallbackTimer = null;\r\n                }\r\n                if (!_paused) {\r\n                    // Queue all the remaining requests to be sent. The requests will be sent using HTML5 Beacons if they are available.\r\n                    _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, sendType, sendReason);\r\n                }\r\n            }\r\n            /**\r\n             * Add empty queues for all latencies in the inbound queues map. This is called\r\n             * when Transmission Manager is being flushed. This ensures that new events added\r\n             * after flush are stored separately till we flush the current events.\r\n             */\r\n            function _clearQueues() {\r\n                _batchQueues[4 /* EventLatencyValue.Immediate */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[3 /* EventLatencyValue.RealTime */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[2 /* EventLatencyValue.CostDeferred */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[1 /* EventLatencyValue.Normal */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n            }\r\n            function _getEventBatch(iKey, latency, create) {\r\n                var batchQueue = _batchQueues[latency];\r\n                if (!batchQueue) {\r\n                    latency = 1 /* EventLatencyValue.Normal */;\r\n                    batchQueue = _batchQueues[latency];\r\n                }\r\n                var eventBatch = batchQueue.iKeyMap[iKey];\r\n                if (!eventBatch && create) {\r\n                    eventBatch = EventBatch.create(iKey);\r\n                    batchQueue.batches[_DYN_PUSH /* @min:%2epush */](eventBatch);\r\n                    batchQueue.iKeyMap[iKey] = eventBatch;\r\n                }\r\n                return eventBatch;\r\n            }\r\n            function _performAutoFlush(isAsync, doFlush) {\r\n                // Only perform the auto flush check if the httpManager has an idle connection and we are not in a backoff situation\r\n                if (_httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]() && !_currentBackoffCount) {\r\n                    if (_autoFlushEventsLimit > 0 && _queueSize > _autoFlushEventsLimit) {\r\n                        // Force flushing\r\n                        doFlush = true;\r\n                    }\r\n                    if (doFlush && _flushCallbackTimer == null) {\r\n                        // Auto flush the queue, adding a callback to avoid the creation of a promise\r\n                        _self.flush(isAsync, function () { }, 20 /* SendRequestReason.MaxQueuedEvents */);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToProperQueue(event, append) {\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event = optimizeObject(event);\r\n                }\r\n                var latency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var eventBatch = _getEventBatch(event[_DYN_I_KEY /* @min:%2eiKey */], latency, true);\r\n                if (eventBatch.addEvent(event)) {\r\n                    if (latency !== 4 /* EventLatencyValue.Immediate */) {\r\n                        _queueSize++;\r\n                        // Check for auto flushing based on total events in the queue, but not for requeued or retry events\r\n                        if (append && event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] === 0) {\r\n                            // Force the flushing of the batch if the batch (specific iKey / latency combination) reaches it's auto flush limit\r\n                            _performAutoFlush(!event.sync, _autoFlushBatchLimit > 0 && eventBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Direct events don't need auto flushing as they are scheduled (by default) for immediate delivery\r\n                        _immediateQueueSize++;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _dropEventWithLatencyOrLess(iKey, latency, currentLatency, dropNumber) {\r\n                while (currentLatency <= latency) {\r\n                    var eventBatch = _getEventBatch(iKey, latency, true);\r\n                    if (eventBatch && eventBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        // Dropped oldest events from lowest possible latency\r\n                        var droppedEvents = eventBatch[_DYN_SPLIT /* @min:%2esplit */](0, dropNumber);\r\n                        var droppedCount = droppedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                        if (droppedCount > 0) {\r\n                            if (currentLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                                _immediateQueueSize -= droppedCount;\r\n                            }\r\n                            else {\r\n                                _queueSize -= droppedCount;\r\n                            }\r\n                            _notifyBatchEvents(strEventsDiscarded, [droppedEvents], EventsDiscardedReason.QueueFull, undefined);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    currentLatency++;\r\n                }\r\n                // Unable to drop any events -- lets just make sure the queue counts are correct to avoid exhaustion\r\n                _resetQueueCounts();\r\n                return false;\r\n            }\r\n            /**\r\n             * Internal helper to reset the queue counts, used as a backstop to avoid future queue exhaustion errors\r\n             * that might occur because of counting issues.\r\n             */\r\n            function _resetQueueCounts() {\r\n                var immediateQueue = 0;\r\n                var normalQueue = 0;\r\n                var _loop_1 = function (latency) {\r\n                    var batchQueue = _batchQueues[latency];\r\n                    if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                        arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (latency === 4 /* EventLatencyValue.Immediate */) {\r\n                                immediateQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                            else {\r\n                                normalQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                for (var latency = 1 /* EventLatencyValue.Normal */; latency <= 4 /* EventLatencyValue.Immediate */; latency++) {\r\n                    _loop_1(latency);\r\n                }\r\n                _queueSize = normalQueue;\r\n                _immediateQueueSize = immediateQueue;\r\n            }\r\n            function _queueBatches(latency, sendType, sendReason) {\r\n                var eventsQueued = false;\r\n                var isAsync = sendType === 0 /* EventSendType.Batched */;\r\n                // Only queue batches (to the HttpManager) if this is a sync request or the httpManager has an idle connection\r\n                // Thus keeping the events within the PostChannel until the HttpManager has a connection available\r\n                // This is so we can drop \"old\" events if the queue is getting full because we can't successfully send events\r\n                if (!isAsync || _httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]()) {\r\n                    doPerf(_self.core, function () { return \"PostChannel._queueBatches\"; }, function () {\r\n                        var droppedEvents = [];\r\n                        var latencyToProcess = 4 /* EventLatencyValue.Immediate */;\r\n                        while (latencyToProcess >= latency) {\r\n                            var batchQueue = _batchQueues[latencyToProcess];\r\n                            if (batchQueue && batchQueue.batches && batchQueue.batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                                arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    // Add the batch to the http manager to send the requests\r\n                                    if (!_httpManager.addBatch(theBatch)) {\r\n                                        // The events from this iKey are being dropped (killed)\r\n                                        droppedEvents = droppedEvents[_DYN_CONCAT /* @min:%2econcat */](theBatch[_DYN_EVENTS /* @min:%2eevents */]());\r\n                                    }\r\n                                    else {\r\n                                        eventsQueued = eventsQueued || (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0);\r\n                                    }\r\n                                    if (latencyToProcess === 4 /* EventLatencyValue.Immediate */) {\r\n                                        _immediateQueueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                    else {\r\n                                        _queueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                });\r\n                                // Remove all batches from this Queue\r\n                                batchQueue[_DYN_BATCHES /* @min:%2ebatches */] = [];\r\n                                batchQueue.iKeyMap = {};\r\n                            }\r\n                            latencyToProcess--;\r\n                        }\r\n                        if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.KillSwitch);\r\n                        }\r\n                        if (eventsQueued && _delayedBatchSendLatency >= latency) {\r\n                            // We have queued events at the same level as the delayed values so clear the setting\r\n                            _delayedBatchSendLatency = -1;\r\n                            _delayedBatchReason = 0 /* SendRequestReason.Undefined */;\r\n                        }\r\n                    }, function () { return ({ latency: latency, sendType: sendType, sendReason: sendReason }); }, !isAsync);\r\n                }\r\n                else {\r\n                    // remember the min latency so that we can re-trigger later\r\n                    _delayedBatchSendLatency = _delayedBatchSendLatency >= 0 ? mathMin(_delayedBatchSendLatency, latency) : latency;\r\n                    _delayedBatchReason = mathMax(_delayedBatchReason, sendReason);\r\n                }\r\n                return eventsQueued;\r\n            }\r\n            /**\r\n             * This is the callback method is called as part of the manual flushing process.\r\n             * @param callback - The callback method to call after the flush is complete\r\n             * @param sendReason - The reason why the flush is being called\r\n             */\r\n            function _flushImpl(callback, sendReason) {\r\n                // Add any additional queued events and cause all queued events to be sent asynchronously\r\n                _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                // All events (should) have been queue -- lets just make sure the queue counts are correct to avoid queue exhaustion (previous bug #9685112)\r\n                _resetQueueCounts();\r\n                _waitForIdleManager(function () {\r\n                    // Only called AFTER the httpManager does not have any outstanding requests\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                    if (_flushCallbackQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _flushCallbackTimer = _createTimer(function () {\r\n                            _flushCallbackTimer = null;\r\n                            _flushImpl(_flushCallbackQueue.shift(), sendReason);\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        // No more flush requests\r\n                        _flushCallbackTimer = null;\r\n                        // Restart the normal timer schedule\r\n                        _scheduleTimer();\r\n                    }\r\n                });\r\n            }\r\n            function _waitForIdleManager(callback) {\r\n                if (_httpManager.isCompletelyIdle()) {\r\n                    callback();\r\n                }\r\n                else {\r\n                    _flushCallbackTimer = _createTimer(function () {\r\n                        _flushCallbackTimer = null;\r\n                        _waitForIdleManager(callback);\r\n                    }, FlushCheckTimer);\r\n                }\r\n            }\r\n            /**\r\n             * Resets the transmit profiles to the default profiles of Real Time, Near Real Time\r\n             * and Best Effort. This removes all the custom profiles that were loaded.\r\n             */\r\n            function _resetTransmitProfiles() {\r\n                _clearScheduledTimer();\r\n                _initializeProfiles();\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduleTimer();\r\n            }\r\n            function _initializeProfiles() {\r\n                _profiles = {};\r\n                _profiles[RT_PROFILE] = [2, 1, 0];\r\n                _profiles[NRT_PROFILE] = [6, 3, 0];\r\n                _profiles[BE_PROFILE] = [18, 9, 0];\r\n            }\r\n            /**\r\n             * The notification handler for requeue events\r\n             * @ignore\r\n             */\r\n            function _requeueEvents(batches, reason) {\r\n                var droppedEvents = [];\r\n                var maxSendAttempts = _maxEventSendAttempts;\r\n                if (_isPageUnloadTriggered) {\r\n                    // If a page unlaod has been triggered reduce the number of times we try to \"retry\"\r\n                    maxSendAttempts = _maxUnloadEventSendAttempts;\r\n                }\r\n                arrForEach(batches, function (theBatch) {\r\n                    if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        arrForEach(theBatch[_DYN_EVENTS /* @min:%2eevents */](), function (theEvent) {\r\n                            if (theEvent) {\r\n                                // Check if the request being added back is for a sync event in which case mark it no longer a sync event\r\n                                if (theEvent[_DYN_SYNC /* @min:%2esync */]) {\r\n                                    theEvent[_DYN_LATENCY /* @min:%2elatency */] = 4 /* EventLatencyValue.Immediate */;\r\n                                    theEvent[_DYN_SYNC /* @min:%2esync */] = false;\r\n                                }\r\n                                if (theEvent[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] < maxSendAttempts) {\r\n                                    // Reset the event timings\r\n                                    setProcessTelemetryTimings(theEvent, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                                    _addEventToQueues(theEvent, false);\r\n                                }\r\n                                else {\r\n                                    droppedEvents[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.NonRetryableStatus);\r\n                }\r\n                if (_isPageUnloadTriggered) {\r\n                    // Unload event has been received so we need to try and flush new events\r\n                    _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            }\r\n            function _callNotification(evtName, theArgs) {\r\n                var manager = (_notificationManager || {});\r\n                var notifyFunc = manager[evtName];\r\n                if (notifyFunc) {\r\n                    try {\r\n                        notifyFunc.apply(manager, theArgs);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self.diagLog(), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, evtName + \" notification failed: \" + e);\r\n                    }\r\n                }\r\n            }\r\n            function _notifyEvents(evtName, theEvents) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (theEvents && theEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(evtName, [theEvents][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                }\r\n            }\r\n            function _notifyBatchEvents(evtName, batches) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(batches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _callNotification(evtName, [theBatch.events()][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /**\r\n             * The notification handler for when batches are about to be sent\r\n             * @ignore\r\n             */\r\n            function _sendingEvent(batches, reason, isSyncRequest) {\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(\"eventsSendRequest\", [(reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */ ?\r\n                            reason - 1000 /* EventBatchNotificationReason.SendingUndefined */ :\r\n                            0 /* SendRequestReason.Undefined */), isSyncRequest !== true]);\r\n                }\r\n            }\r\n            /**\r\n             * This event represents that a batch of events have been successfully sent and a response received\r\n             * @param batches - The notification handler for when the batches have been successfully sent\r\n             * @param reason - For this event the reason will always be EventBatchNotificationReason.Complete\r\n             */\r\n            function _eventsSentEvent(batches, reason) {\r\n                _notifyBatchEvents(\"eventsSent\", batches, reason);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _eventsDropped(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */ ?\r\n                    reason - 8000 /* EventBatchNotificationReason.EventsDropped */ :\r\n                    EventsDiscardedReason.Unknown), sendType);\r\n            }\r\n            function _eventsResponseFail(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.NonRetryableStatus, sendType);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _otherEvent(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.Unknown, sendType);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _setAutoLimits() {\r\n                if (!_disableAutoBatchFlushLimit) {\r\n                    _autoFlushBatchLimit = mathMax(_maxEvtPerBatch * (MaxConnections + 1), _queueSizeLimit / 6);\r\n                }\r\n                else {\r\n                    _autoFlushBatchLimit = 0;\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for PostChannel.prototype.initialize.\r\n// Removed Stub for PostChannel.prototype.processTelemetry.\r\n// Removed Stub for PostChannel.prototype.setEventQueueLimits.\r\n// Removed Stub for PostChannel.prototype.pause.\r\n// Removed Stub for PostChannel.prototype.resume.\r\n// Removed Stub for PostChannel.prototype.addResponseHandler.\r\n// Removed Stub for PostChannel.prototype.flush.\r\n// Removed Stub for PostChannel.prototype.setMsaAuthTicket.\r\n// Removed Stub for PostChannel.prototype.setAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.removeAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.hasEvents.\r\n// Removed Stub for PostChannel.prototype._loadTransmitProfiles.\r\n// Removed Stub for PostChannel.prototype._setTransmitProfile.\r\n// Removed Stub for PostChannel.prototype._backOffTransmission.\r\n// Removed Stub for PostChannel.prototype._clearBackOff.\r\n// Removed Stub for PostChannel.prototype.getOfflineSupport.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PostChannel.__ieDyn=1;\n\n    return PostChannel;\r\n}(BaseTelemetryPlugin));\r\nexport { PostChannel };\r\n//# sourceMappingURL=PostChannel.js.map","/* c8 ignore start */\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\nif (!globalThis.ReadableStream) {\n  // `node:stream/web` got introduced in v16.5.0 as experimental\n  // and it's preferred over the polyfilled version. So we also\n  // suppress the warning that gets emitted by NodeJS for using it.\n  try {\n    const process = require('node:process')\n    const { emitWarning } = process\n    try {\n      process.emitWarning = () => {}\n      Object.assign(globalThis, require('node:stream/web'))\n      process.emitWarning = emitWarning\n    } catch (error) {\n      process.emitWarning = emitWarning\n      throw error\n    }\n  } catch (error) {\n    // fallback to polyfill implementation\n    Object.assign(globalThis, require('web-streams-polyfill/dist/ponyfill.es2018.js'))\n  }\n}\n\ntry {\n  // Don't use node: prefix for this, require+node: is not supported until node v14.14\n  // Only `import()` can use prefix in 12.20 and later\n  const { Blob } = require('buffer')\n  if (Blob && !Blob.prototype.stream) {\n    Blob.prototype.stream = function name (params) {\n      let position = 0\n      const blob = this\n\n      return new ReadableStream({\n        type: 'bytes',\n        async pull (ctrl) {\n          const chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE))\n          const buffer = await chunk.arrayBuffer()\n          position += buffer.byteLength\n          ctrl.enqueue(new Uint8Array(buffer))\n\n          if (position === blob.size) {\n            ctrl.close()\n          }\n        }\n      })\n    }\n  }\n} catch (error) {}\n/* c8 ignore end */\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ConfigsView {\n    public static Current: ConfigsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private configJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ConfigsView.constructor Started');\n        Telemetry.Current.send('ConfigsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ConfigsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ConfigsView.loadData Started');\n        Telemetry.Current.send('ConfigsView.loadData.called');\n\n        const result = await Session.Current.Api.getConfig();\n        if (result.isSuccessful) {\n            this.configJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ConfigsView.renderHtml Started');\n        Telemetry.Current.send('ConfigsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ConfigsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ConfigsView.render Started');\n        Telemetry.Current.send('ConfigsView.render.called');\n\n        if (ConfigsView.Current) {\n            ConfigsView.Current._panel.reveal(vscode.ViewColumn.One);\n            ConfigsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"configsView\", \"Configs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ConfigsView.Current = new ConfigsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ConfigsView.dispose Started');\n        Telemetry.Current.send('ConfigsView.dispose.called');\n\n        ConfigsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ConfigsView._getWebviewContent Started');\n        Telemetry.Current.send('ConfigsView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from config sections\n        let tableRows = '';\n        if (this.configJson && this.configJson.sections) {\n            for (const section of this.configJson.sections) {\n                const sectionName = section.name || 'N/A';\n                \n                if (section.options && Array.isArray(section.options)) {\n                    for (const option of section.options) {\n                        const key = option.key || 'N/A';\n                        const value = option.value || 'N/A';\n                        \n                        tableRows += `\n                        <tr class=\"table-row\">\n                            <td>${this._escapeHtml(sectionName)}</td>\n                            <td>${this._escapeHtml(key)}</td>\n                            <td><code>${this._escapeHtml(String(value))}</code></td>\n                        </tr>`;\n                    }\n                }\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Configs</title>\n      </head>\n      <body>  \n        <h2>Airflow Configuration</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-configs\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Section</th>\n                    <th>Key</th>\n                    <th>Value</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ConfigsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ConfigsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ConfigsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-configs\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n/**\r\n * This is an internal property used to cause internal (reporting) requests to be ignored from reporting\r\n * additional telemetry, to handle polyfil implementations ALL urls used with a disabled request will\r\n * also be ignored for future requests even when this property is not provided.\r\n * Tagging as Ignore as this is an internal value and is not expected to be used outside of the SDK\r\n * @ignore\r\n */\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var SampleRate = \"sampleRate\";\r\nexport var ProcessLegacy = \"ProcessLegacy\";\r\nexport var HttpMethod = \"http.method\";\r\nexport var DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\nexport var DEFAULT_BREEZE_PATH = \"/v2/track\";\r\nexport var strNotSpecified = \"not_specified\";\r\nexport var strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_LENGTH = \"length\"; // Count: 46\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 6\r\nexport var _DYN_INGESTIONENDPOINT = \"ingestionendpoint\"; // Count: 6\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 8\r\nexport var _DYN_REMOVE_ITEM = \"removeItem\"; // Count: 3\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 5\r\nexport var _DYN_COUNT = \"count\"; // Count: 6\r\nexport var _DYN_PRE_TRIGGER_DATE = \"preTriggerDate\"; // Count: 4\r\nexport var _DYN_GET_UTCDATE = \"getUTCDate\"; // Count: 3\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 4\r\nexport var _DYN_PATHNAME = \"pathname\"; // Count: 4\r\nexport var _DYN_MATCH = \"match\"; // Count: 5\r\nexport var _DYN_CORRELATION_HEADER_E0 = \"correlationHeaderExcludePatterns\"; // Count: 2\r\nexport var _DYN_NAME = \"name\"; // Count: 10\r\nexport var _DYN_EXTENSION_CONFIG = \"extensionConfig\"; // Count: 4\r\nexport var _DYN_PROPERTIES = \"properties\"; // Count: 10\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 9\r\nexport var _DYN_SIZE_IN_BYTES = \"sizeInBytes\"; // Count: 4\r\nexport var _DYN_TYPE_NAME = \"typeName\"; // Count: 5\r\nexport var _DYN_EXCEPTIONS = \"exceptions\"; // Count: 5\r\nexport var _DYN_SEVERITY_LEVEL = \"severityLevel\"; // Count: 5\r\nexport var _DYN_PROBLEM_GROUP = \"problemGroup\"; // Count: 3\r\nexport var _DYN_PARSED_STACK = \"parsedStack\"; // Count: 6\r\nexport var _DYN_HAS_FULL_STACK = \"hasFullStack\"; // Count: 5\r\nexport var _DYN_ASSEMBLY = \"assembly\"; // Count: 4\r\nexport var _DYN_FILE_NAME = \"fileName\"; // Count: 9\r\nexport var _DYN_LINE = \"line\"; // Count: 6\r\nexport var _DYN_AI_DATA_CONTRACT = \"aiDataContract\"; // Count: 4\r\nexport var _DYN_DURATION = \"duration\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, fieldRedaction, getJSON, hasJSON, isObject, objForEachKey, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { asString, isString, strSubstr, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_STRINGIFY, _DYN_TO_STRING } from \"../../__DynamicConstants\";\r\nexport function dataSanitizeKeyAndAddUniqueness(logger, key, map) {\r\n    var origLength = key[_DYN_LENGTH /* @min:%2elength */];\r\n    var field = dataSanitizeKey(logger, key);\r\n    // validation truncated the length.  We need to add uniqueness\r\n    if (field[_DYN_LENGTH /* @min:%2elength */] !== origLength) {\r\n        var i = 0;\r\n        var uniqueField = field;\r\n        while (map[uniqueField] !== undefined) {\r\n            i++;\r\n            uniqueField = strSubstring(field, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ - 3) + dsPadNumber(i);\r\n        }\r\n        field = uniqueField;\r\n    }\r\n    return field;\r\n}\r\nexport function dataSanitizeKey(logger, name) {\r\n    var nameTrunc;\r\n    if (name) {\r\n        // Remove any leading or trailing whitespace\r\n        name = strTrim(asString(name));\r\n        // truncate the string to 150 chars\r\n        if (name[_DYN_LENGTH /* @min:%2elength */] > 150 /* DataSanitizerValues.MAX_NAME_LENGTH */) {\r\n            nameTrunc = strSubstring(name, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 57 /* _eInternalMessageId.NameTooLong */, \"name is too long.  It has been truncated to \" + 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ + \" characters.\", { name: name }, true);\r\n        }\r\n    }\r\n    return nameTrunc || name;\r\n}\r\nexport function dataSanitizeString(logger, value, maxLength) {\r\n    if (maxLength === void 0) { maxLength = 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; }\r\n    var valueTrunc;\r\n    if (value) {\r\n        maxLength = maxLength ? maxLength : 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; // in case default parameters dont work\r\n        value = strTrim(asString(value));\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            valueTrunc = strSubstring(value, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 61 /* _eInternalMessageId.StringValueTooLong */, \"string value is too long. It has been truncated to \" + maxLength + \" characters.\", { value: value }, true);\r\n        }\r\n    }\r\n    return valueTrunc || value;\r\n}\r\nexport function dataSanitizeUrl(logger, url, config) {\r\n    if (isString(url)) {\r\n        url = fieldRedaction(url, config);\r\n    }\r\n    return dataSanitizeInput(logger, url, 2048 /* DataSanitizerValues.MAX_URL_LENGTH */, 66 /* _eInternalMessageId.UrlTooLong */);\r\n}\r\nexport function dataSanitizeMessage(logger, message) {\r\n    var messageTrunc;\r\n    if (message) {\r\n        if (message[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */) {\r\n            messageTrunc = strSubstring(message, 0, 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 56 /* _eInternalMessageId.MessageTruncated */, \"message is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */ + \" characters.\", { message: message }, true);\r\n        }\r\n    }\r\n    return messageTrunc || message;\r\n}\r\nexport function dataSanitizeException(logger, exception) {\r\n    var exceptionTrunc;\r\n    if (exception) {\r\n        // Make surte its a string\r\n        var value = \"\" + exception;\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */) {\r\n            exceptionTrunc = strSubstring(value, 0, 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 52 /* _eInternalMessageId.ExceptionTruncated */, \"exception is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */ + \" characters.\", { exception: exception }, true);\r\n        }\r\n    }\r\n    return exceptionTrunc || exception;\r\n}\r\nexport function dataSanitizeProperties(logger, properties) {\r\n    if (properties) {\r\n        var tempProps_1 = {};\r\n        objForEachKey(properties, function (prop, value) {\r\n            if (isObject(value) && hasJSON()) {\r\n                // Stringify any part C properties\r\n                try {\r\n                    value = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"custom property is not valid\", { exception: e }, true);\r\n                }\r\n            }\r\n            value = dataSanitizeString(logger, value, 8192 /* DataSanitizerValues.MAX_PROPERTY_LENGTH */);\r\n            prop = dataSanitizeKeyAndAddUniqueness(logger, prop, tempProps_1);\r\n            tempProps_1[prop] = value;\r\n        });\r\n        properties = tempProps_1;\r\n    }\r\n    return properties;\r\n}\r\nexport function dataSanitizeMeasurements(logger, measurements) {\r\n    if (measurements) {\r\n        var tempMeasurements_1 = {};\r\n        objForEachKey(measurements, function (measure, value) {\r\n            measure = dataSanitizeKeyAndAddUniqueness(logger, measure, tempMeasurements_1);\r\n            tempMeasurements_1[measure] = value;\r\n        });\r\n        measurements = tempMeasurements_1;\r\n    }\r\n    return measurements;\r\n}\r\nexport function dataSanitizeId(logger, id) {\r\n    return id ? dataSanitizeInput(logger, id, 128 /* DataSanitizerValues.MAX_ID_LENGTH */, 69 /* _eInternalMessageId.IdTooLong */)[_DYN_TO_STRING /* @min:%2etoString */]() : id;\r\n}\r\nexport function dataSanitizeInput(logger, input, maxLength, _msgId) {\r\n    var inputTrunc;\r\n    if (input) {\r\n        input = strTrim(asString(input));\r\n        if (input[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            inputTrunc = strSubstring(input, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, _msgId, \"input is too long, it has been truncated to \" + maxLength + \" characters.\", { data: input }, true);\r\n        }\r\n    }\r\n    return inputTrunc || input;\r\n}\r\nexport function dsPadNumber(num) {\r\n    var s = \"00\" + num;\r\n    return strSubstr(s, s[_DYN_LENGTH /* @min:%2elength */] - 3);\r\n}\r\n//# sourceMappingURL=DataSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Event = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the EventTelemetry object\r\n     */\r\n    function Event(logger, name, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Event.envelopeType = \"Microsoft.ApplicationInsights.{0}.Event\";\r\n    Event.dataType = \"EventData\";\r\n    return Event;\r\n}());\r\nexport { Event };\r\n//# sourceMappingURL=Event.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_PROPERTIES, _DYN_SEVERITY_LEVEL } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties } from \"./Common/DataSanitizer\";\r\nvar Trace = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the TraceTelemetry object\r\n     */\r\n    function Trace(logger, message, severityLevel, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            message: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        message = message || strNotSpecified;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] = dataSanitizeMessage(logger, message);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (severityLevel) {\r\n            _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n        }\r\n    }\r\n    Trace.envelopeType = \"Microsoft.ApplicationInsights.{0}.Message\";\r\n    Trace.dataType = \"MessageData\";\r\n    return Trace;\r\n}());\r\nexport { Trace };\r\n//# sourceMappingURL=Trace.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { mathFloor, mathRound } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar strEmpty = \"\";\r\nexport function stringToBoolOrDefault(str, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = false; }\r\n    if (str === undefined || str === null) {\r\n        return defaultValue;\r\n    }\r\n    return str.toString()[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Convert ms to c# time span format\r\n */\r\nexport function msToTimeSpan(totalms) {\r\n    if (isNaN(totalms) || totalms < 0) {\r\n        totalms = 0;\r\n    }\r\n    totalms = mathRound(totalms);\r\n    var ms = strEmpty + totalms % 1000;\r\n    var sec = strEmpty + mathFloor(totalms / 1000) % 60;\r\n    var min = strEmpty + mathFloor(totalms / (1000 * 60)) % 60;\r\n    var hour = strEmpty + mathFloor(totalms / (1000 * 60 * 60)) % 24;\r\n    var days = mathFloor(totalms / (1000 * 60 * 60 * 24));\r\n    ms = ms[_DYN_LENGTH /* @min:%2elength */] === 1 ? \"00\" + ms : ms[_DYN_LENGTH /* @min:%2elength */] === 2 ? \"0\" + ms : ms;\r\n    sec = sec[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + sec : sec;\r\n    min = min[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + min : min;\r\n    hour = hour[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + hour : hour;\r\n    return (days > 0 ? days + \".\" : strEmpty) + hour + \":\" + min + \":\" + sec + \".\" + ms;\r\n}\r\nexport function getExtensionByName(extensions, identifier) {\r\n    var extension = null;\r\n    arrForEach(extensions, function (value) {\r\n        if (value.identifier === identifier) {\r\n            extension = value;\r\n            return -1;\r\n        }\r\n    });\r\n    return extension;\r\n}\r\nexport function isCrossOriginError(message, url, lineNumber, columnNumber, error) {\r\n    return !error && isString(message) && (message === \"Script error.\" || message === \"Script error\");\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeId, dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageView = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageView(logger, name, url, durationMs, properties, measurements, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            id: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = dataSanitizeId(logger, id);\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        if (!isNaN(durationMs)) {\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(durationMs);\r\n        }\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    PageView.envelopeType = \"Microsoft.ApplicationInsights.{0}.Pageview\";\r\n    PageView.dataType = \"PageviewData\";\r\n    return PageView;\r\n}());\r\nexport { PageView };\r\n//# sourceMappingURL=PageView.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageViewPerformance = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageViewPerformance(logger, name, url, unused, properties, measurements, cs4BaseData) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            perfTotal: 0 /* FieldType.Default */,\r\n            networkConnect: 0 /* FieldType.Default */,\r\n            sentRequest: 0 /* FieldType.Default */,\r\n            receivedResponse: 0 /* FieldType.Default */,\r\n            domProcessing: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (cs4BaseData) {\r\n            _self.domProcessing = cs4BaseData.domProcessing;\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = cs4BaseData[_DYN_DURATION /* @min:%2eduration */];\r\n            _self.networkConnect = cs4BaseData.networkConnect;\r\n            _self.perfTotal = cs4BaseData.perfTotal;\r\n            _self.receivedResponse = cs4BaseData.receivedResponse;\r\n            _self.sentRequest = cs4BaseData.sentRequest;\r\n        }\r\n    }\r\n    PageViewPerformance.envelopeType = \"Microsoft.ApplicationInsights.{0}.PageviewPerformance\";\r\n    PageViewPerformance.dataType = \"PageviewPerformanceData\";\r\n    return PageViewPerformance;\r\n}());\r\nexport { PageViewPerformance };\r\n//# sourceMappingURL=PageViewPerformance.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, arrMap, isArray, isError, isFunction, isNullOrUndefined, isObject, isString, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { asString, getWindow, objFreeze, strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_AI_DATA_CONTRACT, _DYN_ASSEMBLY, _DYN_EXCEPTIONS, _DYN_FILE_NAME, _DYN_HAS_FULL_STACK, _DYN_LENGTH, _DYN_LINE, _DYN_MATCH, _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_NAME, _DYN_PARSED_STACK, _DYN_PROBLEM_GROUP, _DYN_PROPERTIES, _DYN_SEVERITY_LEVEL, _DYN_SIZE_IN_BYTES, _DYN_SPLIT, _DYN_STRINGIFY, _DYN_TO_STRING, _DYN_TYPE_NAME } from \"../__DynamicConstants\";\r\nimport { dataSanitizeException, dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\n// These Regex covers the following patterns\r\n// 1. Chrome/Firefox/IE/Edge:\r\n//    at functionName (filename:lineNumber:columnNumber)\r\n//    at functionName (filename:lineNumber)\r\n//    at filename:lineNumber:columnNumber\r\n//    at filename:lineNumber\r\n//    at functionName@filename:lineNumber:columnNumber\r\n// 2. Safari / Opera:\r\n//    functionName@filename:lineNumber:columnNumber\r\n//    functionName@filename:lineNumber\r\n//    filename:lineNumber:columnNumber\r\n//    filename:lineNumber\r\n//    Line ## of scriptname script filename:lineNumber:columnNumber\r\n//    Line ## of scriptname script filename\r\n// 3. IE/Edge (Additional formats)\r\n//    at functionName@filename:lineNumber\r\nvar STACKFRAME_BASE_SIZE = 58; // '{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n/**\r\n * Check if the string conforms to what looks like a stack frame line and not just a general message\r\n * comment or other non-stack related info.\r\n *\r\n * This  should be used to filter out any leading \"message\" lines from a stack trace, before attempting to parse\r\n * the individual stack frames. Once you have estabilsted the start of the stack frames you can then use the\r\n * FULL_STACK_FRAME_1, FULL_STACK_FRAME_2, FULL_STACK_FRAME_3, and EXTRACT_FILENAME to parse the individual\r\n * stack frames to extract the method, filename, line number, and column number.\r\n * These may still provide invalid matches, so the sequence of execution is important to avoid providing\r\n * an invalid parsed stack.\r\n */\r\nvar IS_FRAME = /^\\s{0,50}(from\\s|at\\s|Line\\s{1,5}\\d{1,10}\\s{1,5}of|\\w{1,50}@\\w{1,80}|[^\\(\\s\\n]+:[0-9\\?]+(?::[0-9\\?]+)?)/;\r\n/**\r\n * Parse a well formed stack frame with both the line and column numbers\r\n * ----------------------------------\r\n * **Primary focus of the matching**\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n */\r\nvar FULL_STACK_FRAME_1 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\]]+):([0-9\\?]+):([0-9\\?]+)\\)?$/;\r\n/**\r\n * Parse a well formed stack frame with only a line number.\r\n * ----------------------------------\r\n * > Note: this WILL also match with line and column number, but the line number is included with the filename\r\n * > you should attempt to match with FULL_STACK_FRAME_1 first.\r\n *\r\n * **Primary focus of the matching (run FULL_STACK_FRAME_1 first)**\r\n * - at functionName (filename:lineNumber)\r\n * - at filename:lineNumber\r\n * - at functionName@filename:lineNumber\r\n * - functionName (filename:lineNumber)\r\n * - filename:lineNumber\r\n * - functionName@filename:lineNumber\r\n *\r\n * **Secondary matches**\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n */\r\nvar FULL_STACK_FRAME_2 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\]]+):([0-9\\?]+)\\)?$/;\r\n/**\r\n * Attempt to Parse a frame that doesn't include a line or column number.\r\n * ----------------------------------\r\n * > Note: this WILL also match lines with a line or line and column number, you should attempt to match with\r\n * both FULL_STACK_FRAME_1 and FULL_STACK_FRAME_2 first to avoid false positives.\r\n *\r\n * **Unexpected Invalid Matches** (Matches that should be avoided -- by using the FULL_STACK_FRAME_1 and FULL_STACK_FRAME_2 first)\r\n * - at https://localhost:44365/static/node_bundles/@microsoft/blah/js/bundle.js:144112:27\r\n * - at https://localhost:44365/static/node_bundles/@microsoft/blah/js/bundle.js:144112:27\r\n *\r\n * **Primary focus of the matching (run FULL_STACK_FRAME_1 first)**\r\n * - at functionName@filename\r\n * - at functionName (filename)\r\n * - at functionName filename\r\n * - at filename  <- Will actuall match this as the \"method\" and not the filename (care should be taken to avoid this)\r\n * - functionName@filename\r\n * - functionName (filename)\r\n * - functionName filename\r\n * - functionName\r\n *\r\n * **Secondary matches** (The line and column numbers will be included with the matched filename)\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at functionName (filename:lineNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at filename:lineNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - functionName (filename:lineNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - filename:lineNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber\r\n  */\r\nvar FULL_STACK_FRAME_3 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\)\\]]+)\\)?$/;\r\n/**\r\n * Attempt to extract the filename (with or without line and column numbers) from a string.\r\n * ----------------------------------\r\n * > Note: this will only match the filename (with any line or column numbers) and will\r\n * > return what looks like the filename, however, it will also match random strings that\r\n * > look like a filename, so care should be taken to ensure that the filename is actually\r\n * > a filename before using it.\r\n * >\r\n * > It is recommended to use this in conjunction with the FULL_STACK_FRAME_1, FULL_STACK_FRAME_2, and FULL_STACK_FRAME_3\r\n * > to ensure first to reduce false matches, if all of these fail then you can use this to extract the filename from a random\r\n * > strings to identify any potential filename from a known stack frame line.\r\n *\r\n * **Known Invalid matching**\r\n *\r\n * This regex will basically match any \"final\" string of a line or one that is trailed by a comma, so this should not\r\n * be used as the \"only\" matching regex, but rather as a final fallback to extract the filename from a string.\r\n * If you are certain that the string line is a stack frame and not part of the exception message (lines before the stack)\r\n * or trailing comments, then you can use this to extract the filename and then further parse with PARSE_FILENAME_LINE_COL\r\n * and PARSE_FILENAME_LINE_ONLY to extract any potential the line and column numbers.\r\n *\r\n * **Primary focus of the matching**\r\n * - at (anonymous) @ VM60:1\r\n * - Line 21 of linked script file://localhost/C:/Temp/stacktrace.js\r\n * - Line 11 of inline#1 script in http://localhost:3000/static/js/main.206f4846.js:2:296748\r\n * - Line 68 of inline#2 script in file://localhost/teststack.html\r\n * - at Global code (http://example.com/stacktrace.js:11:1)\r\n */\r\nvar EXTRACT_FILENAME = /(?:^|\\(|\\s{0,10}[\\w\\)]+\\@)?([^\\(\\n\\s\\]\\)]+)(?:\\:([0-9]+)(?:\\:([0-9]+))?)?\\)?(?:,|$)/;\r\n/**\r\n * Attempt to extract the filename, line number, and column number from a string.\r\n */\r\nvar PARSE_FILENAME_LINE_COL = /([^\\(\\s\\n]+):([0-9]+):([0-9]+)$/;\r\n/**\r\n * Attempt to extract the filename and line number from a string.\r\n */\r\nvar PARSE_FILENAME_LINE_ONLY = /([^\\(\\s\\n]+):([0-9]+)$/;\r\nvar NoMethod = \"<no_method>\";\r\nvar strError = \"error\";\r\nvar strStack = \"stack\";\r\nvar strStackDetails = \"stackDetails\";\r\nvar strErrorSrc = \"errorSrc\";\r\nvar strMessage = \"message\";\r\nvar strDescription = \"description\";\r\nvar _parseSequence = [\r\n    { re: FULL_STACK_FRAME_1, len: 5, m: 1, fn: 2, ln: 3, col: 4 },\r\n    { chk: _ignoreNative, pre: _scrubAnonymous, re: FULL_STACK_FRAME_2, len: 4, m: 1, fn: 2, ln: 3 },\r\n    { re: FULL_STACK_FRAME_3, len: 3, m: 1, fn: 2, hdl: _handleFilename },\r\n    { re: EXTRACT_FILENAME, len: 2, fn: 1, hdl: _handleFilename }\r\n];\r\nfunction _scrubAnonymous(frame) {\r\n    return frame.replace(/(\\(anonymous\\))/, \"<anonymous>\");\r\n}\r\nfunction _ignoreNative(frame) {\r\n    return strIndexOf(frame, \"[native\") < 0;\r\n}\r\nfunction _stringify(value, convertToString) {\r\n    var result = value;\r\n    if (result && !isString(result)) {\r\n        if (JSON && JSON[_DYN_STRINGIFY /* @min:%2estringify */]) {\r\n            result = JSON[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            if (convertToString && (!result || result === \"{}\")) {\r\n                if (isFunction(value[_DYN_TO_STRING /* @min:%2etoString */])) {\r\n                    result = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                }\r\n                else {\r\n                    result = \"\" + value;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = \"\" + value + \" - (Missing JSON.stringify)\";\r\n        }\r\n    }\r\n    return result || \"\";\r\n}\r\nfunction _formatMessage(theEvent, errorType) {\r\n    var evtMessage = theEvent;\r\n    if (theEvent) {\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            evtMessage = theEvent[strMessage] || theEvent[strDescription] || evtMessage;\r\n        }\r\n        // Make sure the message is a string\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            // tslint:disable-next-line: prefer-conditional-expression\r\n            evtMessage = _stringify(evtMessage, true);\r\n        }\r\n        if (theEvent[\"filename\"]) {\r\n            // Looks like an event object with filename\r\n            evtMessage = evtMessage + \" @\" + (theEvent[\"filename\"] || \"\") + \":\" + (theEvent[\"lineno\"] || \"?\") + \":\" + (theEvent[\"colno\"] || \"?\");\r\n        }\r\n    }\r\n    // Automatically add the error type to the message if it does already appear to be present\r\n    if (errorType && errorType !== \"String\" && errorType !== \"Object\" && errorType !== \"Error\" && strIndexOf(evtMessage || \"\", errorType) === -1) {\r\n        evtMessage = errorType + \": \" + evtMessage;\r\n    }\r\n    return evtMessage || \"\";\r\n}\r\nfunction _isExceptionDetailsInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return \"hasFullStack\" in value && \"typeName\" in value;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isExceptionInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return (\"ver\" in value && \"exceptions\" in value && \"properties\" in value);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isStackDetails(details) {\r\n    return details && details.src && isString(details.src) && details.obj && isArray(details.obj);\r\n}\r\nfunction _convertStackObj(errorStack) {\r\n    var src = errorStack || \"\";\r\n    if (!isString(src)) {\r\n        if (isString(src[strStack])) {\r\n            src = src[strStack];\r\n        }\r\n        else {\r\n            src = \"\" + src;\r\n        }\r\n    }\r\n    var items = src[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    return {\r\n        src: src,\r\n        obj: items\r\n    };\r\n}\r\nfunction _getOperaStack(errorMessage) {\r\n    var stack = [];\r\n    var lines = errorMessage[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    for (var lp = 0; lp < lines[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        var entry = lines[lp];\r\n        if (lines[lp + 1]) {\r\n            entry += \"@\" + lines[lp + 1];\r\n            lp++;\r\n        }\r\n        stack.push(entry);\r\n    }\r\n    return {\r\n        src: errorMessage,\r\n        obj: stack\r\n    };\r\n}\r\nfunction _getStackFromErrorObj(errorObj) {\r\n    var details = null;\r\n    if (errorObj) {\r\n        try {\r\n            /* Using bracket notation is support older browsers (IE 7/8 -- dont remember the version) that throw when using dot\r\n            notation for undefined objects and we don't want to loose the error from being reported */\r\n            if (errorObj[strStack]) {\r\n                // Chrome/Firefox\r\n                details = _convertStackObj(errorObj[strStack]);\r\n            }\r\n            else if (errorObj[strError] && errorObj[strError][strStack]) {\r\n                // Edge error event provides the stack and error object\r\n                details = _convertStackObj(errorObj[strError][strStack]);\r\n            }\r\n            else if (errorObj[\"exception\"] && errorObj.exception[strStack]) {\r\n                details = _convertStackObj(errorObj.exception[strStack]);\r\n            }\r\n            else if (_isStackDetails(errorObj)) {\r\n                details = errorObj;\r\n            }\r\n            else if (_isStackDetails(errorObj[strStackDetails])) {\r\n                details = errorObj[strStackDetails];\r\n            }\r\n            else if (getWindow() && getWindow()[\"opera\"] && errorObj[strMessage]) {\r\n                // Opera\r\n                details = _getOperaStack(errorObj[_DYN_MESSAGE /* @min:%2emessage */]);\r\n            }\r\n            else if (errorObj[\"reason\"] && errorObj.reason[strStack]) {\r\n                // UnhandledPromiseRejection\r\n                details = _convertStackObj(errorObj.reason[strStack]);\r\n            }\r\n            else if (isString(errorObj)) {\r\n                details = _convertStackObj(errorObj);\r\n            }\r\n            else {\r\n                var evtMessage = errorObj[strMessage] || errorObj[strDescription] || \"\";\r\n                if (isString(errorObj[strErrorSrc])) {\r\n                    if (evtMessage) {\r\n                        evtMessage += \"\\n\";\r\n                    }\r\n                    evtMessage += \" from \" + errorObj[strErrorSrc];\r\n                }\r\n                if (evtMessage) {\r\n                    details = _convertStackObj(evtMessage);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // something unexpected happened so to avoid failing to report any error lets swallow the exception\r\n            // and fallback to the callee/caller method\r\n            details = _convertStackObj(e);\r\n        }\r\n    }\r\n    return details || {\r\n        src: \"\",\r\n        obj: null\r\n    };\r\n}\r\nfunction _formatStackTrace(stackDetails) {\r\n    var stack = \"\";\r\n    if (stackDetails) {\r\n        if (stackDetails.obj) {\r\n            stack = stackDetails.obj.join(\"\\n\");\r\n        }\r\n        else {\r\n            stack = stackDetails.src || \"\";\r\n        }\r\n    }\r\n    return stack;\r\n}\r\nfunction _parseStack(stack) {\r\n    var parsedStack;\r\n    var frames = stack.obj;\r\n    if (frames && frames[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        parsedStack = [];\r\n        var level_1 = 0;\r\n        var foundStackStart_1 = false;\r\n        var totalSizeInBytes_1 = 0;\r\n        arrForEach(frames, function (frame) {\r\n            if (foundStackStart_1 || _isStackFrame(frame)) {\r\n                var theFrame = asString(frame);\r\n                // Once we have found the first stack frame we treat the rest of the lines as part of the stack\r\n                foundStackStart_1 = true;\r\n                var parsedFrame = _extractStackFrame(theFrame, level_1);\r\n                if (parsedFrame) {\r\n                    totalSizeInBytes_1 += parsedFrame[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                    parsedStack.push(parsedFrame);\r\n                    level_1++;\r\n                }\r\n            }\r\n        });\r\n        // DP Constraint - exception parsed stack must be < 32KB\r\n        // remove frames from the middle to meet the threshold\r\n        var exceptionParsedStackThreshold = 32 * 1024;\r\n        if (totalSizeInBytes_1 > exceptionParsedStackThreshold) {\r\n            var left = 0;\r\n            var right = parsedStack[_DYN_LENGTH /* @min:%2elength */] - 1;\r\n            var size = 0;\r\n            var acceptedLeft = left;\r\n            var acceptedRight = right;\r\n            while (left < right) {\r\n                // check size\r\n                var lSize = parsedStack[left][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                var rSize = parsedStack[right][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                size += lSize + rSize;\r\n                if (size > exceptionParsedStackThreshold) {\r\n                    // remove extra frames from the middle\r\n                    var howMany = acceptedRight - acceptedLeft + 1;\r\n                    parsedStack.splice(acceptedLeft, howMany);\r\n                    break;\r\n                }\r\n                // update pointers\r\n                acceptedLeft = left;\r\n                acceptedRight = right;\r\n                left++;\r\n                right--;\r\n            }\r\n        }\r\n    }\r\n    return parsedStack;\r\n}\r\nfunction _getErrorType(errorType) {\r\n    // Gets the Error Type by passing the constructor (used to get the true type of native error object).\r\n    var typeName = \"\";\r\n    if (errorType) {\r\n        typeName = errorType.typeName || errorType[_DYN_NAME /* @min:%2ename */] || \"\";\r\n        if (!typeName) {\r\n            try {\r\n                var funcNameRegex = /function (.{1,200})\\(/;\r\n                var results = (funcNameRegex).exec((errorType).constructor[_DYN_TO_STRING /* @min:%2etoString */]());\r\n                typeName = (results && results[_DYN_LENGTH /* @min:%2elength */] > 1) ? results[1] : \"\";\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n            }\r\n        }\r\n    }\r\n    return typeName;\r\n}\r\n/**\r\n * Formats the provided errorObj for display and reporting, it may be a String, Object, integer or undefined depending on the browser.\r\n * @param errorObj - The supplied errorObj\r\n */\r\nexport function _formatErrorCode(errorObj) {\r\n    if (errorObj) {\r\n        try {\r\n            if (!isString(errorObj)) {\r\n                var errorType = _getErrorType(errorObj);\r\n                var result = _stringify(errorObj, false);\r\n                if (!result || result === \"{}\") {\r\n                    if (errorObj[strError]) {\r\n                        // Looks like an MS Error Event\r\n                        errorObj = errorObj[strError];\r\n                        errorType = _getErrorType(errorObj);\r\n                    }\r\n                    result = _stringify(errorObj, true);\r\n                }\r\n                if (strIndexOf(result, errorType) !== 0 && errorType !== \"String\") {\r\n                    return errorType + \":\" + result;\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n        }\r\n    }\r\n    // Fallback to just letting the object format itself into a string\r\n    return \"\" + (errorObj || \"\");\r\n}\r\nvar Exception = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the ExceptionTelemetry object\r\n     */\r\n    function Exception(logger, exception, properties, measurements, severityLevel, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            exceptions: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2; // TODO: handle the CS\"4.0\" ==> breeze 2 conversion in a better way\r\n        if (!_isExceptionInternal(exception)) {\r\n            if (!properties) {\r\n                properties = {};\r\n            }\r\n            if (id) {\r\n                properties.id = id;\r\n            }\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = [_createExceptionDetails(logger, exception, properties)];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n            if (severityLevel) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n            }\r\n            if (id) {\r\n                _self.id = id;\r\n            }\r\n        }\r\n        else {\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */] || [];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = exception[_DYN_PROPERTIES /* @min:%2eproperties */];\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = exception[_DYN_MEASUREMENTS /* @min:%2emeasurements */];\r\n            if (exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */]) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */];\r\n            }\r\n            if (exception.id) {\r\n                _self.id = exception.id;\r\n                exception[_DYN_PROPERTIES /* @min:%2eproperties */].id = exception.id;\r\n            }\r\n            if (exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */]) {\r\n                _self[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */] = exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */];\r\n            }\r\n            // bool/int types, use isNullOrUndefined\r\n            if (!isNullOrUndefined(exception.isManual)) {\r\n                _self.isManual = exception.isManual;\r\n            }\r\n        }\r\n    }\r\n    Exception.CreateAutoException = function (message, url, lineNumber, columnNumber, error, evt, stack, errorSrc) {\r\n        var errorType = _getErrorType(error || evt || message);\r\n        return {\r\n            message: _formatMessage(message, errorType),\r\n            url: url,\r\n            lineNumber: lineNumber,\r\n            columnNumber: columnNumber,\r\n            error: _formatErrorCode(error || evt || message),\r\n            evt: _formatErrorCode(evt || message),\r\n            typeName: errorType,\r\n            stackDetails: _getStackFromErrorObj(stack || error || evt),\r\n            errorSrc: errorSrc\r\n        };\r\n    };\r\n    Exception.CreateFromInterface = function (logger, exception, properties, measurements) {\r\n        var exceptions = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */]\r\n            && arrMap(exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */], function (ex) { return _createExDetailsFromInterface(logger, ex); });\r\n        var exceptionData = new Exception(logger, __assign(__assign({}, exception), { exceptions: exceptions }), properties, measurements);\r\n        return exceptionData;\r\n    };\r\n    Exception.prototype.toInterface = function () {\r\n        var _a = this, exceptions = _a.exceptions, properties = _a.properties, measurements = _a.measurements, severityLevel = _a.severityLevel, problemGroup = _a.problemGroup, id = _a.id, isManual = _a.isManual;\r\n        var exceptionDetailsInterface = exceptions instanceof Array\r\n            && arrMap(exceptions, function (exception) { return exception.toInterface(); })\r\n            || undefined;\r\n        return {\r\n            ver: \"4.0\",\r\n            exceptions: exceptionDetailsInterface,\r\n            severityLevel: severityLevel,\r\n            properties: properties,\r\n            measurements: measurements,\r\n            problemGroup: problemGroup,\r\n            id: id,\r\n            isManual: isManual\r\n        };\r\n    };\r\n    /**\r\n     * Creates a simple exception with 1 stack frame. Useful for manual constracting of exception.\r\n     */\r\n    Exception.CreateSimpleException = function (message, typeName, assembly, fileName, details, line) {\r\n        var _a;\r\n        return {\r\n            exceptions: [\r\n                (_a = {},\r\n                    _a[_DYN_HAS_FULL_STACK /* @min:hasFullStack */] = true,\r\n                    _a.message = message,\r\n                    _a.stack = details,\r\n                    _a.typeName = typeName,\r\n                    _a)\r\n            ]\r\n        };\r\n    };\r\n    Exception.envelopeType = \"Microsoft.ApplicationInsights.{0}.Exception\";\r\n    Exception.dataType = \"ExceptionData\";\r\n    Exception.formatError = _formatErrorCode;\r\n    return Exception;\r\n}());\r\nexport { Exception };\r\nvar exDetailsAiDataContract = objFreeze({\r\n    id: 0 /* FieldType.Default */,\r\n    outerId: 0 /* FieldType.Default */,\r\n    typeName: 1 /* FieldType.Required */,\r\n    message: 1 /* FieldType.Required */,\r\n    hasFullStack: 0 /* FieldType.Default */,\r\n    stack: 0 /* FieldType.Default */,\r\n    parsedStack: 2 /* FieldType.Array */\r\n});\r\nfunction _toInterface() {\r\n    var _self = this;\r\n    var parsedStack = isArray(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */])\r\n        && arrMap(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return _parsedFrameToInterface(frame); });\r\n    var exceptionDetailsInterface = {\r\n        id: _self.id,\r\n        outerId: _self.outerId,\r\n        typeName: _self[_DYN_TYPE_NAME /* @min:%2etypeName */],\r\n        message: _self[_DYN_MESSAGE /* @min:%2emessage */],\r\n        hasFullStack: _self[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */],\r\n        stack: _self[strStack],\r\n        parsedStack: parsedStack || undefined\r\n    };\r\n    return exceptionDetailsInterface;\r\n}\r\nexport function _createExceptionDetails(logger, exception, properties) {\r\n    var _a;\r\n    var id;\r\n    var outerId;\r\n    var typeName;\r\n    var message;\r\n    var hasFullStack;\r\n    var theStack;\r\n    var parsedStack;\r\n    if (!_isExceptionDetailsInternal(exception)) {\r\n        var error = exception;\r\n        var evt = error && error.evt;\r\n        if (!isError(error)) {\r\n            error = error[strError] || evt || error;\r\n        }\r\n        typeName = dataSanitizeString(logger, _getErrorType(error)) || strNotSpecified;\r\n        message = dataSanitizeMessage(logger, _formatMessage(exception || error, typeName)) || strNotSpecified;\r\n        var stack = exception[strStackDetails] || _getStackFromErrorObj(exception);\r\n        parsedStack = _parseStack(stack);\r\n        // after parsedStack is inited, iterate over each frame object, sanitize its assembly field\r\n        if (isArray(parsedStack)) {\r\n            arrMap(parsedStack, function (frame) {\r\n                frame[_DYN_ASSEMBLY /* @min:%2eassembly */] = dataSanitizeString(logger, frame[_DYN_ASSEMBLY /* @min:%2eassembly */]);\r\n                frame[_DYN_FILE_NAME /* @min:%2efileName */] = dataSanitizeString(logger, frame[_DYN_FILE_NAME /* @min:%2efileName */]);\r\n            });\r\n        }\r\n        theStack = dataSanitizeException(logger, _formatStackTrace(stack));\r\n        hasFullStack = isArray(parsedStack) && parsedStack[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n        if (properties) {\r\n            properties[_DYN_TYPE_NAME /* @min:%2etypeName */] = properties[_DYN_TYPE_NAME /* @min:%2etypeName */] || typeName;\r\n        }\r\n    }\r\n    else {\r\n        typeName = exception[_DYN_TYPE_NAME /* @min:%2etypeName */];\r\n        message = exception[_DYN_MESSAGE /* @min:%2emessage */];\r\n        theStack = exception[strStack];\r\n        parsedStack = exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */] || [];\r\n        hasFullStack = exception[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */];\r\n    }\r\n    return _a = {},\r\n        _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = exDetailsAiDataContract,\r\n        _a.id = id,\r\n        _a.outerId = outerId,\r\n        _a.typeName = typeName,\r\n        _a.message = message,\r\n        _a[_DYN_HAS_FULL_STACK /* @min:hasFullStack */] = hasFullStack,\r\n        _a.stack = theStack,\r\n        _a.parsedStack = parsedStack,\r\n        _a.toInterface = _toInterface,\r\n        _a;\r\n}\r\nexport function _createExDetailsFromInterface(logger, exception) {\r\n    var parsedStack = (isArray(exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */])\r\n        && arrMap(exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return _stackFrameFromInterface(frame); }))\r\n        || exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */];\r\n    var exceptionDetails = _createExceptionDetails(logger, __assign(__assign({}, exception), { parsedStack: parsedStack }));\r\n    return exceptionDetails;\r\n}\r\nfunction _parseFilename(theFrame, fileName) {\r\n    var lineCol = fileName[_DYN_MATCH /* @min:%2ematch */](PARSE_FILENAME_LINE_COL);\r\n    if (lineCol && lineCol[_DYN_LENGTH /* @min:%2elength */] >= 4) {\r\n        theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = lineCol[1];\r\n        theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(lineCol[2]);\r\n    }\r\n    else {\r\n        var lineNo = fileName[_DYN_MATCH /* @min:%2ematch */](PARSE_FILENAME_LINE_ONLY);\r\n        if (lineNo && lineNo[_DYN_LENGTH /* @min:%2elength */] >= 3) {\r\n            theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = lineNo[1];\r\n            theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(lineNo[2]);\r\n        }\r\n        else {\r\n            theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = fileName;\r\n        }\r\n    }\r\n}\r\nfunction _handleFilename(theFrame, sequence, matches) {\r\n    var filename = theFrame[_DYN_FILE_NAME /* @min:%2efileName */];\r\n    if (sequence.fn && matches && matches[_DYN_LENGTH /* @min:%2elength */] > sequence.fn) {\r\n        if (sequence.ln && matches[_DYN_LENGTH /* @min:%2elength */] > sequence.ln) {\r\n            filename = strTrim(matches[sequence.fn] || \"\");\r\n            theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(strTrim(matches[sequence.ln] || \"\")) || 0;\r\n        }\r\n        else {\r\n            filename = strTrim(matches[sequence.fn] || \"\");\r\n        }\r\n    }\r\n    if (filename) {\r\n        _parseFilename(theFrame, filename);\r\n    }\r\n}\r\nfunction _isStackFrame(frame) {\r\n    var result = false;\r\n    if (frame && isString(frame)) {\r\n        var trimmedFrame = strTrim(frame);\r\n        if (trimmedFrame) {\r\n            result = IS_FRAME.test(trimmedFrame);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar stackFrameAiDataContract = objFreeze({\r\n    level: 1 /* FieldType.Required */,\r\n    method: 1 /* FieldType.Required */,\r\n    assembly: 0 /* FieldType.Default */,\r\n    fileName: 0 /* FieldType.Default */,\r\n    line: 0 /* FieldType.Default */\r\n});\r\nexport function _extractStackFrame(frame, level) {\r\n    var _a;\r\n    var theFrame;\r\n    if (frame && isString(frame) && strTrim(frame)) {\r\n        theFrame = (_a = {},\r\n            _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = stackFrameAiDataContract,\r\n            _a.level = level,\r\n            _a.assembly = strTrim(frame),\r\n            _a.method = NoMethod,\r\n            _a.fileName = \"\",\r\n            _a.line = 0,\r\n            _a.sizeInBytes = 0,\r\n            _a);\r\n        var idx = 0;\r\n        while (idx < _parseSequence[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var sequence = _parseSequence[idx];\r\n            if (sequence.chk && !sequence.chk(frame)) {\r\n                break;\r\n            }\r\n            if (sequence.pre) {\r\n                frame = sequence.pre(frame);\r\n            }\r\n            // Attempt to \"parse\" the stack frame\r\n            var matches = frame[_DYN_MATCH /* @min:%2ematch */](sequence.re);\r\n            if (matches && matches[_DYN_LENGTH /* @min:%2elength */] >= sequence.len) {\r\n                if (sequence.m) {\r\n                    theFrame.method = strTrim(matches[sequence.m] || NoMethod);\r\n                }\r\n                if (sequence.hdl) {\r\n                    // Run any custom handler\r\n                    sequence.hdl(theFrame, sequence, matches);\r\n                }\r\n                else if (sequence.fn) {\r\n                    if (sequence.ln) {\r\n                        theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = strTrim(matches[sequence.fn] || \"\");\r\n                        theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(strTrim(matches[sequence.ln] || \"\")) || 0;\r\n                    }\r\n                    else {\r\n                        _parseFilename(theFrame, matches[sequence.fn] || \"\");\r\n                    }\r\n                }\r\n                // We found a match so stop looking\r\n                break;\r\n            }\r\n            idx++;\r\n        }\r\n    }\r\n    return _populateFrameSizeInBytes(theFrame);\r\n}\r\nfunction _stackFrameFromInterface(frame) {\r\n    var _a;\r\n    var parsedFrame = (_a = {},\r\n        _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = stackFrameAiDataContract,\r\n        _a.level = frame.level,\r\n        _a.method = frame.method,\r\n        _a.assembly = frame[_DYN_ASSEMBLY /* @min:%2eassembly */],\r\n        _a.fileName = frame[_DYN_FILE_NAME /* @min:%2efileName */],\r\n        _a.line = frame[_DYN_LINE /* @min:%2eline */],\r\n        _a.sizeInBytes = 0,\r\n        _a);\r\n    return _populateFrameSizeInBytes(parsedFrame);\r\n}\r\nfunction _populateFrameSizeInBytes(frame) {\r\n    var sizeInBytes = STACKFRAME_BASE_SIZE;\r\n    if (frame) {\r\n        sizeInBytes += frame.method[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.assembly[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.fileName[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.level.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.line.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n        frame[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */] = sizeInBytes;\r\n    }\r\n    return frame;\r\n}\r\nexport function _parsedFrameToInterface(frame) {\r\n    return {\r\n        level: frame.level,\r\n        method: frame.method,\r\n        assembly: frame[_DYN_ASSEMBLY /* @min:%2eassembly */],\r\n        fileName: frame[_DYN_FILE_NAME /* @min:%2efileName */],\r\n        line: frame[_DYN_LINE /* @min:%2eline */]\r\n    };\r\n}\r\n//# sourceMappingURL=Exception.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar DataPoint = /** @class */ (function () {\r\n    function DataPoint() {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            name: 1 /* FieldType.Required */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 1 /* FieldType.Required */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */\r\n        };\r\n        /**\r\n         * Metric type. Single measurement or the aggregated value.\r\n         */\r\n        this.kind = 0 /* DataPointType.Measurement */;\r\n    }\r\n    return DataPoint;\r\n}());\r\nexport { DataPoint };\r\n//# sourceMappingURL=DataPoint.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_COUNT, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { DataPoint } from \"./Common/DataPoint\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Metric = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the MetricTelemetry object\r\n     */\r\n    function Metric(logger, name, value, count, min, max, stdDev, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            metrics: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        var dataPoint = new DataPoint();\r\n        dataPoint[_DYN_COUNT /* @min:%2ecount */] = count > 0 ? count : undefined;\r\n        dataPoint.max = isNaN(max) || max === null ? undefined : max;\r\n        dataPoint.min = isNaN(min) || min === null ? undefined : min;\r\n        dataPoint[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        dataPoint.value = value;\r\n        dataPoint.stdDev = isNaN(stdDev) || stdDev === null ? undefined : stdDev;\r\n        _self.metrics = [dataPoint];\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Metric.envelopeType = \"Microsoft.ApplicationInsights.{0}.Metric\";\r\n    Metric.dataType = \"MetricData\";\r\n    return Metric;\r\n}());\r\nexport { Metric };\r\n//# sourceMappingURL=Metric.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getDocument, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_MATCH, _DYN_PATHNAME, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _document = getDocument() || {};\r\nvar _htmlAnchorIdx = 0;\r\n// Use an array of temporary values as it's possible for multiple calls to parseUrl() will be called with different URLs\r\n// Using a cache size of 5 for now as it current depth usage is at least 2, so adding a minor buffer to handle future updates\r\nvar _htmlAnchorElement = [null, null, null, null, null];\r\nexport function urlParseUrl(url) {\r\n    var anchorIdx = _htmlAnchorIdx;\r\n    var anchorCache = _htmlAnchorElement;\r\n    var tempAnchor = anchorCache[anchorIdx];\r\n    if (!_document.createElement) {\r\n        // Always create the temp instance if createElement is not available\r\n        tempAnchor = { host: urlParseHost(url, true) };\r\n    }\r\n    else if (!anchorCache[anchorIdx]) {\r\n        // Create and cache the unattached anchor instance\r\n        tempAnchor = anchorCache[anchorIdx] = _document.createElement(\"a\");\r\n    }\r\n    tempAnchor.href = url;\r\n    // Move the cache index forward\r\n    anchorIdx++;\r\n    if (anchorIdx >= anchorCache[_DYN_LENGTH /* @min:%2elength */]) {\r\n        anchorIdx = 0;\r\n    }\r\n    _htmlAnchorIdx = anchorIdx;\r\n    return tempAnchor;\r\n}\r\nexport function urlGetAbsoluteUrl(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a.href;\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetPathName(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a[_DYN_PATHNAME /* @min:%2epathname */];\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetCompleteUrl(method, absoluteUrl) {\r\n    if (method) {\r\n        return method.toUpperCase() + \" \" + absoluteUrl;\r\n    }\r\n    return absoluteUrl;\r\n}\r\n// Fallback method to grab host from url if document.createElement method is not available\r\nexport function urlParseHost(url, inclPort) {\r\n    var fullHost = urlParseFullHost(url, inclPort) || \"\";\r\n    if (fullHost) {\r\n        var match = fullHost[_DYN_MATCH /* @min:%2ematch */](/(www\\d{0,5}\\.)?([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 3 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            return match[2] + (match[3] || \"\");\r\n        }\r\n    }\r\n    return fullHost;\r\n}\r\nexport function urlParseFullHost(url, inclPort) {\r\n    var result = null;\r\n    if (url) {\r\n        var match = url[_DYN_MATCH /* @min:%2ematch */](/(\\w{1,150}):\\/\\/([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 2 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            result = match[2] || \"\";\r\n            if (inclPort && match[_DYN_LENGTH /* @min:%2elength */] > 2) {\r\n                var protocol = (match[1] || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                var port = match[3] || \"\";\r\n                // IE includes the standard port so pass it off if it's the same as the protocol\r\n                if (protocol === \"http\" && port === \":80\") {\r\n                    port = \"\";\r\n                }\r\n                else if (protocol === \"https\" && port === \":443\") {\r\n                    port = \"\";\r\n                }\r\n                result += port;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=UrlHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dateNow, getPerformance, isNullOrUndefined, isValidSpanId, isValidTraceId } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH } from \"./Constants\";\r\nimport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nimport { dataSanitizeString } from \"./Telemetry/Common/DataSanitizer\";\r\nimport { urlParseFullHost, urlParseUrl } from \"./UrlHelperFuncs\";\r\nimport { _DYN_CORRELATION_HEADER_E0, _DYN_LENGTH, _DYN_NAME, _DYN_PATHNAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\n// listing only non-geo specific locations\r\nvar _internalEndpoints = [\r\n    DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH,\r\n    \"https://breeze.aimon.applicationinsights.io\" + DEFAULT_BREEZE_PATH,\r\n    \"https://dc-int.services.visualstudio.com\" + DEFAULT_BREEZE_PATH\r\n];\r\nvar _correlationIdPrefix = \"cid-v1:\";\r\nexport function isInternalApplicationInsightsEndpoint(endpointUrl) {\r\n    return arrIndexOf(_internalEndpoints, endpointUrl[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]()) !== -1;\r\n}\r\nexport function correlationIdSetPrefix(prefix) {\r\n    _correlationIdPrefix = prefix;\r\n}\r\nexport function correlationIdGetPrefix() {\r\n    return _correlationIdPrefix;\r\n}\r\n/**\r\n * Checks if a request url is not on a excluded domain list and if it is safe to add correlation headers.\r\n * Headers are always included if the current domain matches the request domain. If they do not match (CORS),\r\n * they are regex-ed across correlationHeaderDomains and correlationHeaderExcludedDomains to determine if headers are included.\r\n * Some environments don't give information on currentHost via window.location.host (e.g. Cordova). In these cases, the user must\r\n * manually supply domains to include correlation headers on. Else, no headers will be included at all.\r\n */\r\nexport function correlationIdCanIncludeCorrelationHeader(config, requestUrl, currentHost) {\r\n    if (!requestUrl || (config && config.disableCorrelationHeaders)) {\r\n        return false;\r\n    }\r\n    if (config && config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */]) {\r\n        for (var i = 0; i < config.correlationHeaderExcludePatterns[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            if (config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */][i].test(requestUrl)) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    var requestHost = urlParseUrl(requestUrl).host[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    if (requestHost && (strIndexOf(requestHost, \":443\") !== -1 || strIndexOf(requestHost, \":80\") !== -1)) {\r\n        // [Bug #1260] IE can include the port even for http and https URLs so if present\r\n        // try and parse it to remove if it matches the default protocol port\r\n        requestHost = (urlParseFullHost(requestUrl, true) || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    }\r\n    if ((!config || !config.enableCorsCorrelation) && (requestHost && requestHost !== currentHost)) {\r\n        return false;\r\n    }\r\n    var includedDomains = config && config.correlationHeaderDomains;\r\n    if (includedDomains) {\r\n        var matchExists_1;\r\n        arrForEach(includedDomains, function (domain) {\r\n            var regex = new RegExp(domain.toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n            matchExists_1 = matchExists_1 || regex.test(requestHost);\r\n        });\r\n        if (!matchExists_1) {\r\n            return false;\r\n        }\r\n    }\r\n    var excludedDomains = config && config.correlationHeaderExcludedDomains;\r\n    if (!excludedDomains || excludedDomains[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n        return true;\r\n    }\r\n    for (var i = 0; i < excludedDomains[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        var regex = new RegExp(excludedDomains[i].toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n        if (regex.test(requestHost)) {\r\n            return false;\r\n        }\r\n    }\r\n    // if we don't know anything about the requestHost, require the user to use included/excludedDomains.\r\n    // Previously we always returned false for a falsy requestHost\r\n    return requestHost && requestHost[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\n/**\r\n * Combines target appId and target role name from response header.\r\n */\r\nexport function correlationIdGetCorrelationContext(responseHeader) {\r\n    if (responseHeader) {\r\n        var correlationId = correlationIdGetCorrelationContextValue(responseHeader, RequestHeaders[1 /* eRequestHeaders.requestContextTargetKey */]);\r\n        if (correlationId && correlationId !== _correlationIdPrefix) {\r\n            return correlationId;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Gets key from correlation response header\r\n */\r\nexport function correlationIdGetCorrelationContextValue(responseHeader, key) {\r\n    if (responseHeader) {\r\n        var keyValues = responseHeader[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        for (var i = 0; i < keyValues[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            var keyValue = keyValues[i][_DYN_SPLIT /* @min:%2esplit */](\"=\");\r\n            if (keyValue[_DYN_LENGTH /* @min:%2elength */] === 2 && keyValue[0] === key) {\r\n                return keyValue[1];\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName) {\r\n    var target, name = commandName, data = commandName;\r\n    if (absoluteUrl && absoluteUrl[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        var parsedUrl = urlParseUrl(absoluteUrl);\r\n        target = parsedUrl.host;\r\n        if (!name) {\r\n            if (parsedUrl[_DYN_PATHNAME /* @min:%2epathname */] != null) {\r\n                var pathName = (parsedUrl.pathname[_DYN_LENGTH /* @min:%2elength */] === 0) ? \"/\" : parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                if (pathName.charAt(0) !== \"/\") {\r\n                    pathName = \"/\" + pathName;\r\n                }\r\n                data = parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                name = dataSanitizeString(logger, method ? method + \" \" + pathName : pathName);\r\n            }\r\n            else {\r\n                name = dataSanitizeString(logger, absoluteUrl);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        target = commandName;\r\n        name = commandName;\r\n    }\r\n    return {\r\n        target: target,\r\n        name: name,\r\n        data: data\r\n    };\r\n}\r\nexport function dateTimeUtilsNow() {\r\n    // returns the window or webworker performance object\r\n    var perf = getPerformance();\r\n    if (perf && perf.now && perf.timing) {\r\n        var now = perf.now() + perf.timing.navigationStart;\r\n        // Known issue with IE where this calculation can be negative, so if it is then ignore and fallback\r\n        if (now > 0) {\r\n            return now;\r\n        }\r\n    }\r\n    return dateNow();\r\n}\r\nexport function dateTimeUtilsDuration(start, end) {\r\n    var result = null;\r\n    if (start !== 0 && end !== 0 && !isNullOrUndefined(start) && !isNullOrUndefined(end)) {\r\n        result = end - start;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext from an optional telemetryTrace\r\n * @param telemetryTrace - The telemetryTrace instance that is being wrapped\r\n * @param parentCtx - An optional parent distributed trace instance, almost always undefined as this scenario is only used in the case of multiple property handlers.\r\n * @returns A new IDistributedTraceContext instance that is backed by the telemetryTrace or temporary object\r\n */\r\nexport function createDistributedTraceContextFromTrace(telemetryTrace, parentCtx) {\r\n    var trace = telemetryTrace || {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace.traceID;\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace.traceID = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace.parentID;\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace.parentID = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace.traceFlags;\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace.traceFlags = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=Util.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { AjaxHelperParseDependencyPath } from \"../Util\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar RemoteDependencyData = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the RemoteDependencyData object\r\n     */\r\n    function RemoteDependencyData(logger, id, absoluteUrl, commandName, value, success, resultCode, method, requestAPI, correlationContext, properties, measurements) {\r\n        if (requestAPI === void 0) { requestAPI = \"Ajax\"; }\r\n        this.aiDataContract = {\r\n            id: 1 /* FieldType.Required */,\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            resultCode: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            success: 0 /* FieldType.Default */,\r\n            data: 0 /* FieldType.Default */,\r\n            target: 0 /* FieldType.Default */,\r\n            type: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 0 /* FieldType.Default */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */,\r\n            dependencyKind: 0 /* FieldType.Default */,\r\n            dependencySource: 0 /* FieldType.Default */,\r\n            commandName: 0 /* FieldType.Default */,\r\n            dependencyTypeName: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = id;\r\n        _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(value);\r\n        _self.success = success;\r\n        _self.resultCode = resultCode + \"\";\r\n        _self.type = dataSanitizeString(logger, requestAPI);\r\n        var dependencyFields = AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName);\r\n        _self.data = dataSanitizeUrl(logger, commandName) || dependencyFields.data; // get a value from hosturl if commandName not available\r\n        _self.target = dataSanitizeString(logger, dependencyFields.target);\r\n        if (correlationContext) {\r\n            _self.target = \"\".concat(_self.target, \" | \").concat(correlationContext);\r\n        }\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, dependencyFields[_DYN_NAME /* @min:%2ename */]);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    RemoteDependencyData.envelopeType = \"Microsoft.ApplicationInsights.{0}.RemoteDependency\";\r\n    RemoteDependencyData.dataType = \"RemoteDependencyData\";\r\n    return RemoteDependencyData;\r\n}());\r\nexport { RemoteDependencyData };\r\n//# sourceMappingURL=RemoteDependencyData.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, createUniqueNamespace, eventOff, eventOn, getDocument, getNavigator, getWindow, isNullOrUndefined, isUndefined, mergeEvtNamespace } from \"@microsoft/applicationinsights-core-js\";\r\nfunction _disableEvents(target, evtNamespace) {\r\n    eventOff(target, null, null, evtNamespace);\r\n}\r\n/**\r\n * Create a new OfflineListener instance to monitor browser online / offline events\r\n * @param parentEvtNamespace - The parent event namespace to append to any specific events for this instance\r\n */\r\nexport function createOfflineListener(parentEvtNamespace) {\r\n    var _document = getDocument();\r\n    var _navigator = getNavigator(); // Gets the window.navigator or workerNavigator depending on the global\r\n    var _isListening = false;\r\n    var listenerList = [];\r\n    // Set the initial state\r\n    // rState is changed by the browser, both via events and when we check the navigator.onLine property\r\n    var rState = 1 /* eOfflineValue.Online */;\r\n    if (_navigator && !isNullOrUndefined(_navigator.onLine) && !_navigator.onLine) { // navigator.onLine is undefined in react-native\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n    }\r\n    // ustate is changed by the user calling setOnlineState\r\n    var uState = 0 /* eOfflineValue.Unknown */;\r\n    // current state would be updated each time rState or uState is changed\r\n    // it is a resolved value of rState and uState\r\n    var _currentState = calCurrentState();\r\n    var _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"OfflineListener\"), parentEvtNamespace);\r\n    try {\r\n        if (_enableEvents(getWindow())) {\r\n            _isListening = true;\r\n        }\r\n        if (_document) {\r\n            // Also attach to the document.body or document\r\n            var target = _document.body || _document;\r\n            if (target.ononline) {\r\n                if (_enableEvents(target)) {\r\n                    _isListening = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // this makes react-native less angry\r\n        _isListening = false;\r\n    }\r\n    function _enableEvents(target) {\r\n        var enabled = false;\r\n        if (target) {\r\n            enabled = eventOn(target, \"online\", _setOnline, _evtNamespace);\r\n            if (enabled) {\r\n                eventOn(target, \"offline\", _setOffline, _evtNamespace);\r\n            }\r\n        }\r\n        return enabled;\r\n    }\r\n    function _isOnline() {\r\n        return _currentState;\r\n    }\r\n    function calCurrentState() {\r\n        if (uState === 2 /* eOfflineValue.Offline */ || rState === 2 /* eOfflineValue.Offline */) {\r\n            return false;\r\n        }\r\n        return true; // if both unknown, then we assume the network is good\r\n    }\r\n    function listnerNoticeCheck() {\r\n        // we were offline and are now online or we were online and now offline\r\n        var newState = calCurrentState();\r\n        if (_currentState !== newState) {\r\n            _currentState = newState; // use the resolved state to update\r\n            // send all the callbacks with the current state\r\n            arrForEach(listenerList, function (callback) {\r\n                var offlineState = {\r\n                    isOnline: _currentState,\r\n                    rState: rState,\r\n                    uState: uState\r\n                };\r\n                try {\r\n                    callback(offlineState);\r\n                }\r\n                catch (e) {\r\n                    // Do nothing, just making sure we run all of the callbacks\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function setOnlineState(newState) {\r\n        uState = newState;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOnline() {\r\n        rState = 1 /* eOfflineValue.Online */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOffline() {\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _unload() {\r\n        var win = getWindow();\r\n        if (win && _isListening) {\r\n            _disableEvents(win, _evtNamespace);\r\n            if (_document) {\r\n                // Also attach to the document.body or document\r\n                var target = _document.body || _document;\r\n                if (!isUndefined(target.ononline)) {\r\n                    _disableEvents(target, _evtNamespace);\r\n                }\r\n            }\r\n            _isListening = false;\r\n        }\r\n    }\r\n    function addListener(callback) {\r\n        listenerList.push(callback);\r\n        // Define rm as an instance of IUnloadHook\r\n        return {\r\n            rm: function () {\r\n                var index = listenerList.indexOf(callback);\r\n                if (index > -1) {\r\n                    return listenerList.splice(index, 1);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    return {\r\n        isOnline: _isOnline,\r\n        isListening: function () { return _isListening; },\r\n        unload: _unload,\r\n        addListener: addListener,\r\n        setOnlineState: setOnlineState\r\n    };\r\n}\r\n//# sourceMappingURL=Offline.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"@microsoft/applicationinsights-core-js\";\r\nexport var StorageType = ( /* @__PURE__ */createEnumStyle({\r\n    LocalStorage: 0 /* eStorageType.LocalStorage */,\r\n    SessionStorage: 1 /* eStorageType.SessionStorage */\r\n}));\r\nexport var DistributedTracingModes = ( /* @__PURE__ */createEnumStyle({\r\n    AI: 0 /* eDistributedTracingModes.AI */,\r\n    AI_AND_W3C: 1 /* eDistributedTracingModes.AI_AND_W3C */,\r\n    W3C: 2 /* eDistributedTracingModes.W3C */\r\n}));\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n}));\r\n//# sourceMappingURL=Enums.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, dumpObj, getExceptionName, getGlobal, getGlobalInst, isNullOrUndefined, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { StorageType } from \"./Enums\";\r\nimport { _DYN_REMOVE_ITEM, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar _canUseLocalStorage = undefined;\r\nvar _canUseSessionStorage = undefined;\r\nvar _storagePrefix = \"\";\r\n/**\r\n * Gets the localStorage object if available\r\n * @returns {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getLocalStorageObject() {\r\n    if (utlCanUseLocalStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Tests storage object (localStorage or sessionStorage) to verify that it is usable\r\n * More details here: https://mathiasbynens.be/notes/localstorage-pattern\r\n * @param storageType - Type of storage\r\n * @returns {Storage} Returns storage object verified that it is usable\r\n */\r\nfunction _getVerifiedStorageObject(storageType) {\r\n    try {\r\n        if (isNullOrUndefined(getGlobal())) {\r\n            return null;\r\n        }\r\n        var uid = (new Date)[_DYN_TO_STRING /* @min:%2etoString */]();\r\n        var storage = getGlobalInst(storageType === StorageType.LocalStorage ? \"localStorage\" : \"sessionStorage\");\r\n        var name_1 = _storagePrefix + uid;\r\n        storage.setItem(name_1, uid);\r\n        var fail = storage.getItem(name_1) !== uid;\r\n        storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name_1);\r\n        if (!fail) {\r\n            return storage;\r\n        }\r\n    }\r\n    catch (exception) {\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Gets the sessionStorage object if available\r\n * @returns {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getSessionStorageObject() {\r\n    if (utlCanUseSessionStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Disables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlDisableStorage() {\r\n    _canUseLocalStorage = false;\r\n    _canUseSessionStorage = false;\r\n}\r\nexport function utlSetStoragePrefix(storagePrefix) {\r\n    _storagePrefix = storagePrefix || \"\";\r\n}\r\n/**\r\n * Re-enables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlEnableStorage() {\r\n    _canUseLocalStorage = utlCanUseLocalStorage(true);\r\n    _canUseSessionStorage = utlCanUseSessionStorage(true);\r\n}\r\n/**\r\n * Returns whether LocalStorage can be used, if the reset parameter is passed a true this will override\r\n * any previous disable calls.\r\n * @param reset - Should the usage be reset and determined only based on whether LocalStorage is available\r\n */\r\nexport function utlCanUseLocalStorage(reset) {\r\n    if (reset || _canUseLocalStorage === undefined) {\r\n        _canUseLocalStorage = !!_getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return _canUseLocalStorage;\r\n}\r\nexport function utlGetLocalStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 1 /* _eInternalMessageId.BrowserCannotReadLocalStorage */, \"Browser failed read of local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetLocalStorage(logger, name, data) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 3 /* _eInternalMessageId.BrowserCannotWriteLocalStorage */, \"Browser failed write to local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 5 /* _eInternalMessageId.BrowserFailedRemovalFromLocalStorage */, \"Browser failed removal of local storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlCanUseSessionStorage(reset) {\r\n    if (reset || _canUseSessionStorage === undefined) {\r\n        _canUseSessionStorage = !!_getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return _canUseSessionStorage;\r\n}\r\nexport function utlGetSessionStorageKeys() {\r\n    var keys = [];\r\n    if (utlCanUseSessionStorage()) {\r\n        objForEachKey(getGlobalInst(\"sessionStorage\"), function (key) {\r\n            keys.push(key);\r\n        });\r\n    }\r\n    return keys;\r\n}\r\nexport function utlGetSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 2 /* _eInternalMessageId.BrowserCannotReadSessionStorage */, \"Browser failed read of session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetSessionStorage(logger, name, data) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 4 /* _eInternalMessageId.BrowserCannotWriteSessionStorage */, \"Browser failed write to session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 6 /* _eInternalMessageId.BrowserFailedRemovalFromSessionStorage */, \"Browser failed removal of session storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=StorageHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createValueMap } from \"@microsoft/applicationinsights-core-js\";\r\nexport var RequestHeaders = ( /* @__PURE__ */createValueMap({\r\n    requestContextHeader: [0 /* eRequestHeaders.requestContextHeader */, \"Request-Context\"],\r\n    requestContextTargetKey: [1 /* eRequestHeaders.requestContextTargetKey */, \"appId\"],\r\n    requestContextAppIdFormat: [2 /* eRequestHeaders.requestContextAppIdFormat */, \"appId=cid-v1:\"],\r\n    requestIdHeader: [3 /* eRequestHeaders.requestIdHeader */, \"Request-Id\"],\r\n    traceParentHeader: [4 /* eRequestHeaders.traceParentHeader */, \"traceparent\"],\r\n    traceStateHeader: [5 /* eRequestHeaders.traceStateHeader */, \"tracestate\"],\r\n    sdkContextHeader: [6 /* eRequestHeaders.sdkContextHeader */, \"Sdk-Context\"],\r\n    sdkContextHeaderAppIdRequest: [7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */, \"appId\"],\r\n    requestContextHeaderLowerCase: [8 /* eRequestHeaders.requestContextHeaderLowerCase */, \"request-context\"]\r\n}));\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_NAME } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getJSON } from \"./EnvUtils\";\r\n/**\r\n * Parses the response from the backend.\r\n * @param response - XMLHttpRequest or XDomainRequest response\r\n */\r\nexport function parseResponse(response, diagLog) {\r\n    try {\r\n        if (response && response !== \"\") {\r\n            var result = getJSON().parse(response);\r\n            if (result && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] >= result.itemsAccepted &&\r\n                result.itemsReceived - result.itemsAccepted === result.errors[_DYN_LENGTH /* @min:%2elength */]) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 43 /* _eInternalMessageId.InvalidBackendResponse */, \"Cannot parse the response. \" + (e[_DYN_NAME /* @min:%2ename */] || dumpObj(e)), {\r\n            response: response\r\n        });\r\n    }\r\n    return null;\r\n}\r\n//# sourceMappingURL=ResponseHelpers.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport { createClassFromInterface } from \"@microsoft/applicationinsights-core-js\";\r\nfunction _aiNameFunc(baseName) {\r\n    var aiName = \"ai.\" + baseName + \".\";\r\n    return function (name) {\r\n        return aiName + name;\r\n    };\r\n}\r\nvar _aiApplication = _aiNameFunc(\"application\");\r\nvar _aiDevice = _aiNameFunc(\"device\");\r\nvar _aiLocation = _aiNameFunc(\"location\");\r\nvar _aiOperation = _aiNameFunc(\"operation\");\r\nvar _aiSession = _aiNameFunc(\"session\");\r\nvar _aiUser = _aiNameFunc(\"user\");\r\nvar _aiCloud = _aiNameFunc(\"cloud\");\r\nvar _aiInternal = _aiNameFunc(\"internal\");\r\nvar ContextTagKeys = /** @class */ (function (_super) {\r\n    __extends(ContextTagKeys, _super);\r\n    function ContextTagKeys() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return ContextTagKeys;\r\n}(createClassFromInterface({\r\n    applicationVersion: _aiApplication(\"ver\"),\r\n    applicationBuild: _aiApplication(\"build\"),\r\n    applicationTypeId: _aiApplication(\"typeId\"),\r\n    applicationId: _aiApplication(\"applicationId\"),\r\n    applicationLayer: _aiApplication(\"layer\"),\r\n    deviceId: _aiDevice(\"id\"),\r\n    deviceIp: _aiDevice(\"ip\"),\r\n    deviceLanguage: _aiDevice(\"language\"),\r\n    deviceLocale: _aiDevice(\"locale\"),\r\n    deviceModel: _aiDevice(\"model\"),\r\n    deviceFriendlyName: _aiDevice(\"friendlyName\"),\r\n    deviceNetwork: _aiDevice(\"network\"),\r\n    deviceNetworkName: _aiDevice(\"networkName\"),\r\n    deviceOEMName: _aiDevice(\"oemName\"),\r\n    deviceOS: _aiDevice(\"os\"),\r\n    deviceOSVersion: _aiDevice(\"osVersion\"),\r\n    deviceRoleInstance: _aiDevice(\"roleInstance\"),\r\n    deviceRoleName: _aiDevice(\"roleName\"),\r\n    deviceScreenResolution: _aiDevice(\"screenResolution\"),\r\n    deviceType: _aiDevice(\"type\"),\r\n    deviceMachineName: _aiDevice(\"machineName\"),\r\n    deviceVMName: _aiDevice(\"vmName\"),\r\n    deviceBrowser: _aiDevice(\"browser\"),\r\n    deviceBrowserVersion: _aiDevice(\"browserVersion\"),\r\n    locationIp: _aiLocation(\"ip\"),\r\n    locationCountry: _aiLocation(\"country\"),\r\n    locationProvince: _aiLocation(\"province\"),\r\n    locationCity: _aiLocation(\"city\"),\r\n    operationId: _aiOperation(\"id\"),\r\n    operationName: _aiOperation(\"name\"),\r\n    operationParentId: _aiOperation(\"parentId\"),\r\n    operationRootId: _aiOperation(\"rootId\"),\r\n    operationSyntheticSource: _aiOperation(\"syntheticSource\"),\r\n    operationCorrelationVector: _aiOperation(\"correlationVector\"),\r\n    sessionId: _aiSession(\"id\"),\r\n    sessionIsFirst: _aiSession(\"isFirst\"),\r\n    sessionIsNew: _aiSession(\"isNew\"),\r\n    userAccountAcquisitionDate: _aiUser(\"accountAcquisitionDate\"),\r\n    userAccountId: _aiUser(\"accountId\"),\r\n    userAgent: _aiUser(\"userAgent\"),\r\n    userId: _aiUser(\"id\"),\r\n    userStoreRegion: _aiUser(\"storeRegion\"),\r\n    userAuthUserId: _aiUser(\"authUserId\"),\r\n    userAnonymousUserAcquisitionDate: _aiUser(\"anonUserAcquisitionDate\"),\r\n    userAuthenticatedUserAcquisitionDate: _aiUser(\"authUserAcquisitionDate\"),\r\n    cloudName: _aiCloud(\"name\"),\r\n    cloudRole: _aiCloud(\"role\"),\r\n    cloudRoleVer: _aiCloud(\"roleVer\"),\r\n    cloudRoleInstance: _aiCloud(\"roleInstance\"),\r\n    cloudEnvironment: _aiCloud(\"environment\"),\r\n    cloudLocation: _aiCloud(\"location\"),\r\n    cloudDeploymentUnit: _aiCloud(\"deploymentUnit\"),\r\n    internalNodeName: _aiInternal(\"nodeName\"),\r\n    internalSdkVersion: _aiInternal(\"sdkVersion\"),\r\n    internalAgentVersion: _aiInternal(\"agentVersion\"),\r\n    internalSnippet: _aiInternal(\"snippet\"),\r\n    internalSdkSrc: _aiInternal(\"sdkSrc\")\r\n})));\r\nexport { ContextTagKeys };\r\n//# sourceMappingURL=ContextTagKeys.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { ContextTagKeys } from \"./Contracts/ContextTagKeys\";\r\nexport var Extensions = {\r\n    UserExt: \"user\",\r\n    DeviceExt: \"device\",\r\n    TraceExt: \"trace\",\r\n    WebExt: \"web\",\r\n    AppExt: \"app\",\r\n    OSExt: \"os\",\r\n    SessionExt: \"ses\",\r\n    SDKExt: \"sdk\"\r\n};\r\nexport var CtxTagKeys = new ContextTagKeys();\r\n//# sourceMappingURL=PartAExtensions.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strNotSpecified } from \"../../Constants\";\r\nimport { _DYN_AI_DATA_CONTRACT, _DYN_NAME } from \"../../__DynamicConstants\";\r\nimport { dataSanitizeString } from \"./DataSanitizer\";\r\nvar Envelope = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Envelope(logger, data, name) {\r\n        var _this = this;\r\n        var _self = this;\r\n        _self.ver = 1;\r\n        _self.sampleRate = 100.0;\r\n        _self.tags = {};\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self.data = data;\r\n        _self.time = toISOString(new Date());\r\n        _self[_DYN_AI_DATA_CONTRACT /* @min:%2eaiDataContract */] = {\r\n            time: 1 /* FieldType.Required */,\r\n            iKey: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            sampleRate: function () {\r\n                return (_this.sampleRate === 100) ? 4 /* FieldType.Hidden */ : 1 /* FieldType.Required */;\r\n            },\r\n            tags: 1 /* FieldType.Required */,\r\n            data: 1 /* FieldType.Required */\r\n        };\r\n    }\r\n    return Envelope;\r\n}());\r\nexport { Envelope };\r\n//# sourceMappingURL=Envelope.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar Data = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Data(baseType, data) {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            baseType: 1 /* FieldType.Required */,\r\n            baseData: 1 /* FieldType.Required */\r\n        };\r\n        this.baseType = baseType;\r\n        this.baseData = data;\r\n    }\r\n    return Data;\r\n}());\r\nexport { Data };\r\n//# sourceMappingURL=Data.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_DURATION = \"duration\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TAGS = \"tags\"; // Count: 17\r\nexport var _DYN_DEVICE_TYPE = \"deviceType\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 13\r\nexport var _DYN_NAME = \"name\"; // Count: 8\r\nexport var _DYN_TRACE_ID = \"traceID\"; // Count: 5\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 5\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 7\r\nexport var _DYN_DATA_TYPE = \"dataType\"; // Count: 10\r\nexport var _DYN_ENVELOPE_TYPE = \"envelopeType\"; // Count: 7\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 7\r\nexport var _DYN_ENQUEUE = \"enqueue\"; // Count: 7\r\nexport var _DYN_COUNT = \"count\"; // Count: 7\r\nexport var _DYN_PUSH = \"push\"; // Count: 9\r\nexport var _DYN_EMIT_LINE_DELIMITED_0 = \"emitLineDelimitedJson\"; // Count: 3\r\nexport var _DYN_CLEAR = \"clear\"; // Count: 6\r\nexport var _DYN_MARK_AS_SENT = \"markAsSent\"; // Count: 4\r\nexport var _DYN_CLEAR_SENT = \"clearSent\"; // Count: 5\r\nexport var _DYN_BUFFER_OVERRIDE = \"bufferOverride\"; // Count: 3\r\nexport var _DYN__BUFFER__KEY = \"BUFFER_KEY\"; // Count: 5\r\nexport var _DYN__SENT__BUFFER__KEY = \"SENT_BUFFER_KEY\"; // Count: 8\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 6\r\nexport var _DYN__MAX__BUFFER__SIZE = \"MAX_BUFFER_SIZE\"; // Count: 5\r\nexport var _DYN_TRIGGER_SEND = \"triggerSend\"; // Count: 5\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 16\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 3\r\nexport var _DYN__SENDER = \"_sender\"; // Count: 5\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 5\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 5\r\nexport var _DYN_CUSTOM_HEADERS = \"customHeaders\"; // Count: 3\r\nexport var _DYN_MAX_BATCH_SIZE_IN_BY1 = \"maxBatchSizeInBytes\"; // Count: 2\r\nexport var _DYN_ONUNLOAD_DISABLE_BEA2 = \"onunloadDisableBeacon\"; // Count: 3\r\nexport var _DYN_IS_BEACON_API_DISABL3 = \"isBeaconApiDisabled\"; // Count: 3\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR4 = \"alwaysUseXhrOverride\"; // Count: 2\r\nexport var _DYN_ENABLE_SESSION_STORA5 = \"enableSessionStorageBuffer\"; // Count: 2\r\nexport var _DYN__BUFFER = \"_buffer\"; // Count: 9\r\nexport var _DYN_ONUNLOAD_DISABLE_FET6 = \"onunloadDisableFetch\"; // Count: 2\r\nexport var _DYN_DISABLE_SEND_BEACON_7 = \"disableSendBeaconSplit\"; // Count: 2\r\nexport var _DYN_GET_SENDER_INST = \"getSenderInst\"; // Count: 4\r\nexport var _DYN__ON_ERROR = \"_onError\"; // Count: 7\r\nexport var _DYN__ON_PARTIAL_SUCCESS = \"_onPartialSuccess\"; // Count: 3\r\nexport var _DYN__ON_SUCCESS = \"_onSuccess\"; // Count: 6\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_ITEMS_ACCEPTED = \"itemsAccepted\"; // Count: 3\r\nexport var _DYN_BASE_TYPE = \"baseType\"; // Count: 4\r\nexport var _DYN_SAMPLE_RATE = \"sampleRate\"; // Count: 4\r\nexport var _DYN_GET_HASH_CODE_SCORE = \"getHashCodeScore\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { CtxTagKeys, Data, Envelope, Event, Exception, HttpMethod, Metric, PageView, PageViewPerformance, RemoteDependencyData, SampleRate, Trace, dataSanitizeString } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, _warnToConsole, getJSON, hasJSON, isNullOrUndefined, isNumber, isString, isTruthy, objForEachKey, optimizeObject, setValue, toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DURATION } from \"./InternalConstants\";\r\nimport { _DYN_DATA, _DYN_DATA_TYPE, _DYN_DEVICE_TYPE, _DYN_ENVELOPE_TYPE, _DYN_LENGTH, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_STRINGIFY, _DYN_TAGS, _DYN_TO_STRING, _DYN_TRACE_ID } from \"./__DynamicConstants\";\r\n// these two constants are used to filter out properties not needed when trying to extract custom properties and measurements from the incoming payload\r\nvar strBaseType = \"baseType\";\r\nvar strBaseData = \"baseData\";\r\nvar strProperties = \"properties\";\r\nvar strTrue = \"true\";\r\nfunction _setValueIf(target, field, value) {\r\n    return setValue(target, field, value, isTruthy);\r\n}\r\n/*\r\n * Maps Part A data from CS 4.0\r\n */\r\nfunction _extractPartAExtensions(logger, item, env) {\r\n    // todo: switch to keys from common in this method\r\n    var envTags = env[_DYN_TAGS /* @min:%2etags */] = env[_DYN_TAGS /* @min:%2etags */] || {};\r\n    var itmExt = item.ext = item.ext || {};\r\n    var itmTags = item[_DYN_TAGS /* @min:%2etags */] = item[_DYN_TAGS /* @min:%2etags */] || [];\r\n    var extUser = itmExt.user;\r\n    if (extUser) {\r\n        _setValueIf(envTags, CtxTagKeys.userAuthUserId, extUser.authId);\r\n        _setValueIf(envTags, CtxTagKeys.userId, extUser.id || extUser.localId);\r\n    }\r\n    var extApp = itmExt.app;\r\n    if (extApp) {\r\n        _setValueIf(envTags, CtxTagKeys.sessionId, extApp.sesId);\r\n    }\r\n    var extDevice = itmExt.device;\r\n    if (extDevice) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceId, extDevice.id || extDevice.localId);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice.deviceClass);\r\n        _setValueIf(envTags, CtxTagKeys.deviceIp, extDevice.ip);\r\n        _setValueIf(envTags, CtxTagKeys.deviceModel, extDevice.model);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice[_DYN_DEVICE_TYPE /* @min:%2edeviceType */]);\r\n    }\r\n    var web = item.ext.web;\r\n    if (web) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceLanguage, web.browserLang);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowserVersion, web.browserVer);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowser, web.browser);\r\n        var envData = env[_DYN_DATA /* @min:%2edata */] = env[_DYN_DATA /* @min:%2edata */] || {};\r\n        var envBaseData = envData[strBaseData] = envData[strBaseData] || {};\r\n        var envProps = envBaseData[strProperties] = envBaseData[strProperties] || {};\r\n        _setValueIf(envProps, \"domain\", web.domain);\r\n        _setValueIf(envProps, \"isManual\", web.isManual ? strTrue : null);\r\n        _setValueIf(envProps, \"screenRes\", web.screenRes);\r\n        _setValueIf(envProps, \"userConsent\", web.userConsent ? strTrue : null);\r\n    }\r\n    var extOs = itmExt.os;\r\n    if (extOs) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceOS, extOs[_DYN_NAME /* @min:%2ename */]);\r\n        _setValueIf(envTags, CtxTagKeys.deviceOSVersion, extOs.osVer);\r\n    }\r\n    // No support for mapping Trace.traceState to 2.0 as it is currently empty\r\n    var extTrace = itmExt.trace;\r\n    if (extTrace) {\r\n        _setValueIf(envTags, CtxTagKeys.operationParentId, extTrace.parentID);\r\n        _setValueIf(envTags, CtxTagKeys.operationName, dataSanitizeString(logger, extTrace[_DYN_NAME /* @min:%2ename */]));\r\n        _setValueIf(envTags, CtxTagKeys.operationId, extTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n    }\r\n    // Sample 4.0 schema\r\n    //  {\r\n    //     \"time\" : \"2018-09-05T22:51:22.4936Z\",\r\n    //     \"name\" : \"MetricWithNamespace\",\r\n    //     \"iKey\" : \"ABC-5a4cbd20-e601-4ef5-a3c6-5d6577e4398e\",\r\n    //     \"ext\": {  \"cloud\": {\r\n    //          \"role\": \"WATSON3\",\r\n    //          \"roleInstance\": \"CO4AEAP00000260\"\r\n    //      },\r\n    //      \"device\": {}, \"correlation\": {} },\r\n    //      \"tags\": [\r\n    //        { \"amazon.region\" : \"east2\" },\r\n    //        { \"os.expid\" : \"wp:02df239\" }\r\n    //     ]\r\n    //   }\r\n    var tgs = {};\r\n    // deals with tags.push({object})\r\n    for (var i = itmTags[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n        var tg = itmTags[i];\r\n        objForEachKey(tg, function (key, value) {\r\n            tgs[key] = value;\r\n        });\r\n        itmTags.splice(i, 1);\r\n    }\r\n    // deals with tags[key]=value (and handles hasOwnProperty)\r\n    objForEachKey(itmTags, function (tg, value) {\r\n        tgs[tg] = value;\r\n    });\r\n    var theTags = __assign(__assign({}, envTags), tgs);\r\n    if (!theTags[CtxTagKeys.internalSdkVersion]) {\r\n        // Append a version in case it is not already set\r\n        theTags[CtxTagKeys.internalSdkVersion] = dataSanitizeString(logger, \"javascript:\".concat(EnvelopeCreator.Version), 64);\r\n    }\r\n    env[_DYN_TAGS /* @min:%2etags */] = optimizeObject(theTags);\r\n}\r\nfunction _extractPropsAndMeasurements(data, properties, measurements) {\r\n    if (!isNullOrUndefined(data)) {\r\n        objForEachKey(data, function (key, value) {\r\n            if (isNumber(value)) {\r\n                measurements[key] = value;\r\n            }\r\n            else if (isString(value)) {\r\n                properties[key] = value;\r\n            }\r\n            else if (hasJSON()) {\r\n                properties[key] = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue) {\r\n    if (!isNullOrUndefined(properties)) {\r\n        objForEachKey(properties, function (key, value) {\r\n            properties[key] = value || customUndefinedValue;\r\n        });\r\n    }\r\n}\r\n// TODO: Do we want this to take logger as arg or use this._logger as nonstatic?\r\nfunction _createEnvelope(logger, envelopeType, telemetryItem, data) {\r\n    var envelope = new Envelope(logger, data, envelopeType);\r\n    _setValueIf(envelope, \"sampleRate\", telemetryItem[SampleRate]);\r\n    if ((telemetryItem[strBaseData] || {}).startTime) {\r\n        // Starting from Version 3.0.3, the time property will be assigned by the startTime value,\r\n        // which records the loadEvent time for the pageView event.\r\n        envelope.time = toISOString(telemetryItem[strBaseData].startTime);\r\n    }\r\n    envelope.iKey = telemetryItem.iKey;\r\n    var iKeyNoDashes = telemetryItem.iKey.replace(/-/g, \"\");\r\n    envelope[_DYN_NAME /* @min:%2ename */] = envelope[_DYN_NAME /* @min:%2ename */].replace(\"{0}\", iKeyNoDashes);\r\n    // extract all extensions from ctx\r\n    _extractPartAExtensions(logger, telemetryItem, envelope);\r\n    // loop through the envelope tags (extension of Part A) and pick out the ones that should go in outgoing envelope tags\r\n    telemetryItem[_DYN_TAGS /* @min:%2etags */] = telemetryItem[_DYN_TAGS /* @min:%2etags */] || [];\r\n    return optimizeObject(envelope);\r\n}\r\nfunction EnvelopeCreatorInit(logger, telemetryItem) {\r\n    if (isNullOrUndefined(telemetryItem[strBaseData])) {\r\n        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 46 /* _eInternalMessageId.TelemetryEnvelopeInvalid */, \"telemetryItem.baseData cannot be null.\");\r\n    }\r\n}\r\nexport var EnvelopeCreator = {\r\n    Version: '3.3.11'\r\n};\r\nexport function DependencyEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    if (isNullOrUndefined(bd)) {\r\n        _warnToConsole(logger, \"Invalid input for dependency data\");\r\n        return null;\r\n    }\r\n    var method = bd[strProperties] && bd[strProperties][HttpMethod] ? bd[strProperties][HttpMethod] : \"GET\";\r\n    var remoteDepData = new RemoteDependencyData(logger, bd.id, bd.target, bd[_DYN_NAME /* @min:%2ename */], bd[STR_DURATION /* @min:%2eduration */], bd.success, bd.responseCode, method, bd.type, bd.correlationContext, customProperties, customMeasurements);\r\n    var data = new Data(RemoteDependencyData[_DYN_DATA_TYPE /* @min:%2edataType */], remoteDepData);\r\n    return _createEnvelope(logger, RemoteDependencyData[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function EventEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customProperties = {};\r\n    var customMeasurements = {};\r\n    if (telemetryItem[strBaseType] !== Event[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n        customProperties[\"baseTypeSource\"] = telemetryItem[strBaseType]; // save the passed in base type as a property\r\n    }\r\n    if (telemetryItem[strBaseType] === Event[_DYN_DATA_TYPE /* @min:%2edataType */]) { // take collection\r\n        customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n        customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    }\r\n    else { // if its not a known type, convert to custom event\r\n        if (telemetryItem[strBaseData]) {\r\n            _extractPropsAndMeasurements(telemetryItem[strBaseData], customProperties, customMeasurements);\r\n        }\r\n    }\r\n    // Extract root level properties from part C telemetryItem.data\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var eventName = telemetryItem[strBaseData][_DYN_NAME /* @min:%2ename */];\r\n    var eventData = new Event(logger, eventName, customProperties, customMeasurements);\r\n    var data = new Data(Event[_DYN_DATA_TYPE /* @min:%2edataType */], eventData);\r\n    return _createEnvelope(logger, Event[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function ExceptionEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Extract root level properties from part C telemetryItem.data\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    var exData = Exception.CreateFromInterface(logger, bd, customProperties, customMeasurements);\r\n    var data = new Data(Exception[_DYN_DATA_TYPE /* @min:%2edataType */], exData);\r\n    return _createEnvelope(logger, Exception[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function MetricEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var baseData = telemetryItem[strBaseData];\r\n    var props = baseData[strProperties] || {};\r\n    var measurements = baseData[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseMetricData = new Metric(logger, baseData[_DYN_NAME /* @min:%2ename */], baseData.average, baseData.sampleCount, baseData.min, baseData.max, baseData.stdDev, props, measurements);\r\n    var data = new Data(Metric[_DYN_DATA_TYPE /* @min:%2edataType */], baseMetricData);\r\n    return _createEnvelope(logger, Metric[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Since duration is not part of the domain properties in Common Schema, extract it from part C\r\n    var duration;\r\n    var baseData = telemetryItem[strBaseData];\r\n    if (!isNullOrUndefined(baseData) &&\r\n        !isNullOrUndefined(baseData[strProperties]) &&\r\n        !isNullOrUndefined(baseData[strProperties][STR_DURATION])) { // from part B properties\r\n        duration = baseData[strProperties][STR_DURATION];\r\n        delete baseData[strProperties][STR_DURATION];\r\n    }\r\n    else if (!isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */]) &&\r\n        !isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION])) { // from custom properties\r\n        duration = telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n        delete telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    // special case: pageview.id is grabbed from current operation id. Analytics plugin is decoupled from properties plugin, so this is done here instead. This can be made a default telemetry intializer instead if needed to be decoupled from channel\r\n    var currentContextId;\r\n    if (((telemetryItem.ext || {}).trace || {})[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n        currentContextId = telemetryItem.ext.trace[_DYN_TRACE_ID /* @min:%2etraceID */];\r\n    }\r\n    var id = bd.id || currentContextId;\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    // refUri is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.refUri)) {\r\n        properties[\"refUri\"] = bd.refUri;\r\n    }\r\n    // pageType is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.pageType)) {\r\n        properties[\"pageType\"] = bd.pageType;\r\n    }\r\n    // isLoggedIn is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.isLoggedIn)) {\r\n        properties[\"isLoggedIn\"] = bd.isLoggedIn[_DYN_TO_STRING /* @min:%2etoString */]();\r\n    }\r\n    // pageTags is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd[strProperties])) {\r\n        var pageTags = bd[strProperties];\r\n        objForEachKey(pageTags, function (key, value) {\r\n            properties[key] = value;\r\n        });\r\n    }\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var pageViewData = new PageView(logger, name, url, duration, properties, measurements, id);\r\n    var data = new Data(PageView[_DYN_DATA_TYPE /* @min:%2edataType */], pageViewData);\r\n    return _createEnvelope(logger, PageView[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewPerformanceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var bd = telemetryItem[strBaseData];\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri || bd.url;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var baseData = new PageViewPerformance(logger, name, url, undefined, properties, measurements, bd);\r\n    var data = new Data(PageViewPerformance[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, PageViewPerformance[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function TraceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var message = telemetryItem[strBaseData].message;\r\n    var severityLevel = telemetryItem[strBaseData].severityLevel;\r\n    var props = telemetryItem[strBaseData][strProperties] || {};\r\n    var measurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseData = new Trace(logger, message, severityLevel, props, measurements);\r\n    var data = new Data(Trace[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, Trace[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\n//# sourceMappingURL=EnvelopeCreator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { utlGetSessionStorage, utlRemoveSessionStorage, utlSetSessionStorage } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, arrForEach, arrIndexOf, dumpObj, getExceptionName, getJSON, isArray, isFunction, isNullOrUndefined, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_CONCAT, _DYN_COUNT, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENQUEUE, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_PUSH, _DYN_STRINGIFY, _DYN__BUFFER__KEY, _DYN__MAX__BUFFER__SIZE, _DYN__SENT__BUFFER__KEY } from \"./__DynamicConstants\";\r\nvar BaseSendBuffer = /** @class */ (function () {\r\n    function BaseSendBuffer(logger, config) {\r\n        var _buffer = [];\r\n        var _bufferFullMessageSent = false;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        this._get = function () {\r\n            return _buffer;\r\n        };\r\n        this._set = function (buffer) {\r\n            _buffer = buffer;\r\n            return _buffer;\r\n        };\r\n        dynamicProto(BaseSendBuffer, this, function (_self) {\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= config.eventsLimitInMem) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 105 /* _eInternalMessageId.InMemoryStorageBufferFull */, \"Maximum in-memory buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        // will log statsbeat exception later here\r\n                        return;\r\n                    }\r\n                }\r\n                _buffer[_DYN_PUSH /* @min:%2epush */](payload);\r\n                return;\r\n            };\r\n            _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n                return _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.size = function () {\r\n                var size = _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n                for (var lp = 0; lp < _buffer[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    size += (_buffer[lp].item)[_DYN_LENGTH /* @min:%2elength */];\r\n                }\r\n                if (!config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */]) {\r\n                    size += 2;\r\n                }\r\n                return size;\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _buffer = [];\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self.getItems = function () {\r\n                return _buffer.slice(0);\r\n            };\r\n            _self.batchPayloads = function (payloads) {\r\n                if (payloads && payloads[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var payloadStr_1 = [];\r\n                    arrForEach(payloads, function (payload) {\r\n                        payloadStr_1[_DYN_PUSH /* @min:%2epush */](payload.item);\r\n                    });\r\n                    var batch = config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */] ?\r\n                        payloadStr_1.join(\"\\n\") :\r\n                        \"[\" + payloadStr_1.join(\",\") + \"]\";\r\n                    return batch;\r\n                }\r\n                return null;\r\n            };\r\n            _self.createNew = function (newLogger, newConfig, canUseSessionStorage) {\r\n                var items = _buffer.slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                var newBuffer = !!canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(items, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                return newBuffer;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for BaseSendBuffer.prototype.enqueue.\r\n// Removed Stub for BaseSendBuffer.prototype.count.\r\n// Removed Stub for BaseSendBuffer.prototype.size.\r\n// Removed Stub for BaseSendBuffer.prototype.clear.\r\n// Removed Stub for BaseSendBuffer.prototype.getItems.\r\n// Removed Stub for BaseSendBuffer.prototype.batchPayloads.\r\n// Removed Stub for BaseSendBuffer.prototype.createNew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseSendBuffer.__ieDyn=1;\n\n    return BaseSendBuffer;\r\n}());\r\n/*\r\n * An array based send buffer.\r\n */\r\nvar ArraySendBuffer = /** @class */ (function (_super) {\r\n    __extends(ArraySendBuffer, _super);\r\n    function ArraySendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        dynamicProto(ArraySendBuffer, _this, function (_self, _base) {\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                // not supported\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for ArraySendBuffer.prototype.markAsSent.\r\n// Removed Stub for ArraySendBuffer.prototype.clearSent.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ArraySendBuffer.__ieDyn=1;\n\n    return ArraySendBuffer;\r\n}(BaseSendBuffer));\r\nexport { ArraySendBuffer };\r\nvar PREVIOUS_KEYS = [\"AI_buffer\", \"AI_sentBuffer\"];\r\n/*\r\n * Session storage buffer holds a copy of all unsent items in the browser session storage.\r\n */\r\nvar SessionStorageSendBuffer = /** @class */ (function (_super) {\r\n    __extends(SessionStorageSendBuffer, _super);\r\n    function SessionStorageSendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        var _bufferFullMessageSent = false;\r\n        //Note: should not use config.namePrefix directly, because it will always refers to the latest namePrefix\r\n        var _namePrefix = config === null || config === void 0 ? void 0 : config.namePrefix;\r\n        // TODO: add remove buffer override as well\r\n        var _b = config[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */] || { getItem: utlGetSessionStorage, setItem: utlSetSessionStorage }, getItem = _b.getItem, setItem = _b.setItem;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        dynamicProto(SessionStorageSendBuffer, _this, function (_self, _base) {\r\n            var bufferItems = _getBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */]);\r\n            var itemsInSentBuffer = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n            var previousItems = _getPreviousEvents();\r\n            var notDeliveredItems = itemsInSentBuffer[_DYN_CONCAT /* @min:%2econcat */](previousItems);\r\n            var buffer = _self._set(bufferItems[_DYN_CONCAT /* @min:%2econcat */](notDeliveredItems));\r\n            // If the buffer has too many items, drop items from the end.\r\n            if (buffer[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                buffer[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n            }\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], buffer);\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Maximum buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        return;\r\n                    }\r\n                }\r\n                _base[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._get());\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._get());\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._set(_removePayloadsFromBuffer(payload, _self._get())));\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                if (sentElements instanceof Array && payload instanceof Array) {\r\n                    sentElements = sentElements[_DYN_CONCAT /* @min:%2econcat */](payload);\r\n                    if (sentElements[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                        // We send telemetry normally. If the SENT_BUFFER is too big we don't add new elements\r\n                        // until we receive a response from the backend and the buffer has free space again (see clearSent method)\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Sent buffer reached its maximum size: \" + sentElements[_DYN_LENGTH /* @min:%2elength */], true);\r\n                        sentElements[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n                    }\r\n                    _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n                }\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                sentElements = _removePayloadsFromBuffer(payload, sentElements);\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n            };\r\n            _self.createNew = function (newLogger, newConfig, canUseSessionStorage) {\r\n                canUseSessionStorage = !!canUseSessionStorage;\r\n                var unsentItems = _self._get().slice(0);\r\n                var sentItems = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]).slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                // to make sure that we do not send duplicated payloads when it is switched back to previous one\r\n                _self[_DYN_CLEAR /* @min:%2eclear */]();\r\n                var newBuffer = canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(unsentItems, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                if (canUseSessionStorage) {\r\n                    // arr buffer will clear all payloads if markAsSent() is called\r\n                    newBuffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](sentItems);\r\n                }\r\n                return newBuffer;\r\n            };\r\n            function _removePayloadsFromBuffer(payloads, buffer) {\r\n                var remaining = [];\r\n                var payloadStr = [];\r\n                arrForEach(payloads, function (payload) {\r\n                    payloadStr[_DYN_PUSH /* @min:%2epush */](payload.item);\r\n                });\r\n                arrForEach(buffer, function (value) {\r\n                    if (!isFunction(value) && arrIndexOf(payloadStr, value.item) === -1) {\r\n                        remaining[_DYN_PUSH /* @min:%2epush */](value);\r\n                    }\r\n                });\r\n                return remaining;\r\n            }\r\n            function _getBuffer(key) {\r\n                var prefixedKey = key;\r\n                prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                return _getBufferBase(prefixedKey);\r\n            }\r\n            function _getBufferBase(key) {\r\n                try {\r\n                    var bufferJson = getItem(logger, key);\r\n                    if (bufferJson) {\r\n                        var buffer_1 = getJSON().parse(bufferJson);\r\n                        if (isString(buffer_1)) {\r\n                            // When using some version prototype.js the stringify / parse cycle does not decode array's correctly\r\n                            buffer_1 = getJSON().parse(buffer_1);\r\n                        }\r\n                        if (buffer_1 && isArray(buffer_1)) {\r\n                            return buffer_1;\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 42 /* _eInternalMessageId.FailedToRestoreStorageBuffer */, \" storage key: \" + key + \", \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            function _setBuffer(key, buffer) {\r\n                var prefixedKey = key;\r\n                try {\r\n                    prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                    var bufferJson = JSON[_DYN_STRINGIFY /* @min:%2estringify */](buffer);\r\n                    setItem(logger, prefixedKey, bufferJson);\r\n                }\r\n                catch (e) {\r\n                    // if there was an error, clear the buffer\r\n                    // telemetry is stored in the _buffer array so we won't loose any items\r\n                    setItem(logger, prefixedKey, JSON[_DYN_STRINGIFY /* @min:%2estringify */]([]));\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \" storage key: \" + prefixedKey + \", \" + getExceptionName(e) + \". Buffer cleared\", { exception: dumpObj(e) });\r\n                }\r\n            }\r\n            // this removes buffer with prefix+key\r\n            function _getPreviousEvents() {\r\n                var items = [];\r\n                try {\r\n                    arrForEach(PREVIOUS_KEYS, function (key) {\r\n                        var events = _getItemsFromPreviousKey(key);\r\n                        items = items[_DYN_CONCAT /* @min:%2econcat */](events);\r\n                        // to make sure that we also transfer items from old prefixed + key buffer\r\n                        if (_namePrefix) {\r\n                            var prefixedKey = _namePrefix + \"_\" + key;\r\n                            var prefixEvents = _getItemsFromPreviousKey(prefixedKey);\r\n                            items = items[_DYN_CONCAT /* @min:%2econcat */](prefixEvents);\r\n                        }\r\n                    });\r\n                    return items;\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \"Transfer events from previous buffers: \" + getExceptionName(e) + \". previous Buffer items can not be removed\", { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            // transform string[] to IInternalStorageItem[]\r\n            function _getItemsFromPreviousKey(key) {\r\n                try {\r\n                    var items = _getBufferBase(key);\r\n                    var transFormedItems_1 = [];\r\n                    arrForEach(items, function (item) {\r\n                        var internalItem = {\r\n                            item: item,\r\n                            cnt: 0 // previous events will be default to 0 count\r\n                        };\r\n                        transFormedItems_1[_DYN_PUSH /* @min:%2epush */](internalItem);\r\n                    });\r\n                    // remove the session storage if we can add events back\r\n                    utlRemoveSessionStorage(logger, key);\r\n                    return transFormedItems_1;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return [];\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for SessionStorageSendBuffer.prototype.enqueue.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clear.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.markAsSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clearSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.createNew.\r\n    var _a;\r\n    _a = SessionStorageSendBuffer;\r\n    SessionStorageSendBuffer.VERSION = \"_1\";\r\n    SessionStorageSendBuffer.BUFFER_KEY = \"AI_buffer\" + _a.VERSION;\r\n    SessionStorageSendBuffer.SENT_BUFFER_KEY = \"AI_sentBuffer\" + _a.VERSION;\r\n    // Maximum number of payloads stored in the buffer. If the buffer is full, new elements will be dropped.\r\n    SessionStorageSendBuffer.MAX_BUFFER_SIZE = 2000;\r\n    return SessionStorageSendBuffer;\r\n}(BaseSendBuffer));\r\nexport { SessionStorageSendBuffer };\r\n//# sourceMappingURL=SendBuffer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { __assignFn as __assign, __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BreezeChannelIdentifier, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, Event, Exception, Metric, PageView, PageViewPerformance, ProcessLegacy, RemoteDependencyData, RequestHeaders, SampleRate, Trace, createOfflineListener, isInternalApplicationInsightsEndpoint, utlCanUseSessionStorage, utlSetStoragePrefix } from \"@microsoft/applicationinsights-common\";\r\nimport { ActiveStatus, BaseTelemetryPlugin, SenderPostManager, _throwInternal, _warnToConsole, arrForEach, cfgDfBoolean, cfgDfValidate, createProcessTelemetryContext, createUniqueNamespace, dateNow, dumpObj, formatErrorMessageXdr, formatErrorMessageXhr, getExceptionName, getIEVersion, isArray, isBeaconsSupported, isFeatureEnabled, isFetchSupported, isNullOrUndefined, mergeEvtNamespace, objExtend, onConfigChange, parseResponse, prependTransports, runTargetUnload } from \"@microsoft/applicationinsights-core-js\";\r\nimport { createPromise, doAwait, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { getInst, isFunction, isNumber, isPromiseLike, isString, isTruthy, mathFloor, mathMax, mathMin, objDeepFreeze, objDefine, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { DependencyEnvelopeCreator, EventEnvelopeCreator, ExceptionEnvelopeCreator, MetricEnvelopeCreator, PageViewEnvelopeCreator, PageViewPerformanceEnvelopeCreator, TraceEnvelopeCreator } from \"./EnvelopeCreator\";\r\nimport { ArraySendBuffer, SessionStorageSendBuffer } from \"./SendBuffer\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { Sample } from \"./TelemetryProcessors/Sample\";\r\nimport { _DYN_ALWAYS_USE_XHR_OVERR4, _DYN_BASE_TYPE, _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_COUNT, _DYN_CUSTOM_HEADERS, _DYN_DIAG_LOG, _DYN_DISABLE_SEND_BEACON_7, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENABLE_SESSION_STORA5, _DYN_ENDPOINT_URL, _DYN_ENQUEUE, _DYN_GET_SENDER_INST, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_BEACON_API_DISABL3, _DYN_ITEMS_ACCEPTED, _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_MAX_BATCH_SIZE_IN_BY1, _DYN_ONUNLOAD_DISABLE_BEA2, _DYN_ONUNLOAD_DISABLE_FET6, _DYN_PUSH, _DYN_SAMPLE_RATE, _DYN_TAGS, _DYN_TRIGGER_SEND, _DYN__BUFFER, _DYN__ON_ERROR, _DYN__ON_PARTIAL_SUCCESS, _DYN__ON_SUCCESS, _DYN__SENDER } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar EMPTY_STR = \"\";\r\nvar FetchSyncRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nfunction _getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\nvar defaultAppInsightsChannelConfig = objDeepFreeze((_a = {\r\n        // Use the default value (handles empty string in the configuration)\r\n        endpointUrl: cfgDfValidate(isTruthy, DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH)\r\n    },\r\n    _a[_DYN_EMIT_LINE_DELIMITED_0 /* @min:emitLineDelimitedJson */] = cfgDfBoolean(),\r\n    _a.maxBatchInterval = 15000,\r\n    _a[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:maxBatchSizeInBytes */] = 102400,\r\n    _a.disableTelemetry = cfgDfBoolean(),\r\n    _a[_DYN_ENABLE_SESSION_STORA5 /* @min:enableSessionStorageBuffer */] = cfgDfBoolean(true),\r\n    _a.isRetryDisabled = cfgDfBoolean(),\r\n    _a[_DYN_IS_BEACON_API_DISABL3 /* @min:isBeaconApiDisabled */] = cfgDfBoolean(true),\r\n    _a[_DYN_DISABLE_SEND_BEACON_7 /* @min:disableSendBeaconSplit */] = cfgDfBoolean(true),\r\n    _a.disableXhr = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:onunloadDisableFetch */] = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:onunloadDisableBeacon */] = cfgDfBoolean(),\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.namePrefix = UNDEFINED_VALUE,\r\n    _a.samplingPercentage = cfgDfValidate(_chkSampling, 100),\r\n    _a[_DYN_CUSTOM_HEADERS /* @min:customHeaders */] = UNDEFINED_VALUE,\r\n    _a.convertUndefined = UNDEFINED_VALUE,\r\n    _a.eventsLimitInMem = 10000,\r\n    _a[_DYN_BUFFER_OVERRIDE /* @min:bufferOverride */] = false,\r\n    _a.httpXHROverride = { isVal: isOverrideFn, v: UNDEFINED_VALUE },\r\n    _a[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:alwaysUseXhrOverride */] = cfgDfBoolean(),\r\n    _a.transports = UNDEFINED_VALUE,\r\n    _a.retryCodes = UNDEFINED_VALUE,\r\n    _a.corsPolicy = UNDEFINED_VALUE,\r\n    _a.maxRetryCnt = { isVal: isNumber, v: 10 },\r\n    _a));\r\nvar CrossOriginResourcePolicyHeader = \"X-Set-Cross-Origin-Resource-Policy\";\r\nfunction _chkSampling(value) {\r\n    return !isNaN(value) && value > 0 && value <= 100;\r\n}\r\nvar EnvelopeTypeCreator = (_b = {},\r\n    _b[Event.dataType] = EventEnvelopeCreator,\r\n    _b[Trace.dataType] = TraceEnvelopeCreator,\r\n    _b[PageView.dataType] = PageViewEnvelopeCreator,\r\n    _b[PageViewPerformance.dataType] = PageViewPerformanceEnvelopeCreator,\r\n    _b[Exception.dataType] = ExceptionEnvelopeCreator,\r\n    _b[Metric.dataType] = MetricEnvelopeCreator,\r\n    _b[RemoteDependencyData.dataType] = DependencyEnvelopeCreator,\r\n    _b);\r\nvar Sender = /** @class */ (function (_super) {\r\n    __extends(Sender, _super);\r\n    function Sender() {\r\n        var _this = _super.call(this) || this;\r\n        _this.priority = 1001;\r\n        _this.identifier = BreezeChannelIdentifier;\r\n        // Don't set the defaults here, set them in the _initDefaults() as this is also called during unload\r\n        var _consecutiveErrors; // How many times in a row a retryable error condition has occurred.\r\n        var _retryAt; // The time to retry at in milliseconds from 1970/01/01 (this makes the timer calculation easy).\r\n        var _lastSend; // The time of the last send operation.\r\n        var _paused; // Flag indicating that the sending should be paused\r\n        var _timeoutHandle; // Handle to the timer for delayed sending of batches of data.\r\n        var _serializer;\r\n        var _stamp_specific_redirects;\r\n        var _headers;\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _syncUnloadSender; // The identified sender to use for the synchronous unload stage\r\n        var _offlineListener;\r\n        var _evtNamespace;\r\n        var _endpointUrl;\r\n        var _orgEndpointUrl;\r\n        var _maxBatchSizeInBytes;\r\n        var _beaconSupported;\r\n        var _beaconOnUnloadSupported;\r\n        var _beaconNormalSupported;\r\n        var _customHeaders;\r\n        var _disableTelemetry;\r\n        var _instrumentationKey;\r\n        var _convertUndefined;\r\n        var _isRetryDisabled;\r\n        var _maxBatchInterval;\r\n        var _sessionStorageUsed;\r\n        var _bufferOverrideUsed;\r\n        var _namePrefix;\r\n        var _enableSendPromise;\r\n        var _alwaysUseCustomSend;\r\n        var _disableXhr;\r\n        var _fetchKeepAlive;\r\n        var _xhrSend;\r\n        var _fallbackSend;\r\n        var _disableBeaconSplit;\r\n        var _sendPostMgr;\r\n        var _retryCodes;\r\n        var _zipPayload;\r\n        dynamicProto(Sender, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n            };\r\n            _self.resume = function () {\r\n                if (_paused) {\r\n                    _paused = false;\r\n                    _retryAt = null;\r\n                    // flush if we have exceeded the max-size already\r\n                    _checkMaxSize();\r\n                    _setupTimer();\r\n                }\r\n            };\r\n            _self.flush = function (isAsync, callBack, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_paused) {\r\n                    // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                    _clearScheduledTimer();\r\n                    try {\r\n                        var result_1 = _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](isAsync, null, sendReason || 1 /* SendRequestReason.ManualFlush */);\r\n                        // Handles non-promise and always called if the returned promise resolves or rejects\r\n                        return doAwaitResponse(result_1, function (rsp) {\r\n                            if (callBack) {\r\n                                callBack(!rsp.rejected);\r\n                                return true;\r\n                            }\r\n                            // When async=true and no callback, return a promise\r\n                            if (isAsync) {\r\n                                return createPromise(function (resolve) {\r\n                                    resolve(!rsp.rejected);\r\n                                });\r\n                            }\r\n                            return result_1;\r\n                        });\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 22 /* _eInternalMessageId.FlushFailed */, \"flush failed, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            };\r\n            _self.onunloadFlush = function () {\r\n                if (!_paused) {\r\n                    if (_beaconSupported || _alwaysUseCustomSend) {\r\n                        try {\r\n                            return _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, _doUnloadSend, 2 /* SendRequestReason.Unload */);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"failed to flush with beacon sender on page unload, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _self.flush(false);\r\n                    }\r\n                }\r\n            };\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                if (_self.isInitialized()) {\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _base[_DYN_INITIALIZE /* @min:%2einitialize */](config, core, extensions, pluginChain);\r\n                var identifier = _self.identifier;\r\n                _serializer = new Serializer(core.logger);\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = 0;\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _stamp_specific_redirects = 0;\r\n                var diagLog = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"Sender\"), core.evtNamespace && core.evtNamespace());\r\n                _offlineListener = createOfflineListener(_evtNamespace);\r\n                // This function will be re-called whenever any referenced configuration is changed\r\n                _self._addHook(onConfigChange(config, function (details) {\r\n                    var config = details.cfg;\r\n                    if (config.storagePrefix) {\r\n                        utlSetStoragePrefix(config.storagePrefix);\r\n                    }\r\n                    var ctx = createProcessTelemetryContext(null, config, core);\r\n                    // getExtCfg only finds undefined values from core\r\n                    var senderConfig = ctx.getExtCfg(identifier, defaultAppInsightsChannelConfig);\r\n                    var curExtUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    // if it is not inital change (_endpointUrl has value)\r\n                    // if current sender endpoint url is not changed directly\r\n                    // means ExtCfg is not changed directly\r\n                    // then we need to monitor endpoint url changes from core\r\n                    if (_endpointUrl && curExtUrl === _endpointUrl) {\r\n                        var coreUrl = config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                        // if core endpoint url is changed\r\n                        if (coreUrl && coreUrl !== curExtUrl) {\r\n                            // and endpoint promise changes is handled by this as well\r\n                            senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = coreUrl;\r\n                        }\r\n                    }\r\n                    var csStream = getInst(\"CompressionStream\");\r\n                    // Determine whether to enable payload compression (zipping).\r\n                    _zipPayload = isFeatureEnabled(\"zipPayload\", config, false);\r\n                    if (!isFunction(csStream)) {\r\n                        _zipPayload = false;\r\n                    }\r\n                    var corsPolicy = senderConfig.corsPolicy;\r\n                    if (corsPolicy) {\r\n                        if (corsPolicy === \"same-origin\" || corsPolicy === \"same-site\" || corsPolicy === \"cross-origin\") {\r\n                            _this.addHeader(CrossOriginResourcePolicyHeader, corsPolicy);\r\n                        }\r\n                    }\r\n                    else {\r\n                        delete _headers[CrossOriginResourcePolicyHeader];\r\n                    }\r\n                    if (isPromiseLike(senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */])) {\r\n                        // if it is promise, means the endpoint url is from core.endpointurl\r\n                        senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    objDefine(_self, \"_senderConfig\", {\r\n                        g: function () {\r\n                            return senderConfig;\r\n                        }\r\n                    });\r\n                    // Only update the endpoint if the original config !== the current config\r\n                    // This is so any redirect endpointUrl is not overwritten\r\n                    if (_orgEndpointUrl !== senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */]) {\r\n                        if (_orgEndpointUrl) {\r\n                            // TODO: add doc to remind users to flush before changing endpoint, otherwise all unsent payload will be sent to new endpoint\r\n                        }\r\n                        _endpointUrl = _orgEndpointUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    }\r\n                    // or is not string\r\n                    if (core.activeStatus() === ActiveStatus.PENDING) {\r\n                        // waiting for core promises to be resolved\r\n                        // NOTE: if active status is set to pending, stop sending, clear timer here\r\n                        _self.pause();\r\n                    }\r\n                    else if (core.activeStatus() === ActiveStatus.ACTIVE) {\r\n                        // core status changed from pending to other status\r\n                        _self.resume();\r\n                    }\r\n                    if (_customHeaders && _customHeaders !== senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */]) {\r\n                        // Removing any previously defined custom headers as they have changed\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            delete _headers[customHeader.header];\r\n                        });\r\n                    }\r\n                    _maxBatchSizeInBytes = senderConfig[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:%2emaxBatchSizeInBytes */];\r\n                    _beaconSupported = (senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false || senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false) && isBeaconsSupported();\r\n                    _beaconOnUnloadSupported = senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false && isBeaconsSupported();\r\n                    _beaconNormalSupported = senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false && isBeaconsSupported();\r\n                    _alwaysUseCustomSend = senderConfig[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:%2ealwaysUseXhrOverride */];\r\n                    _disableXhr = !!senderConfig.disableXhr;\r\n                    _retryCodes = senderConfig.retryCodes;\r\n                    var bufferOverride = senderConfig[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */];\r\n                    var canUseSessionStorage = !!senderConfig[_DYN_ENABLE_SESSION_STORA5 /* @min:%2eenableSessionStorageBuffer */] &&\r\n                        (!!bufferOverride || utlCanUseSessionStorage());\r\n                    var namePrefix = senderConfig.namePrefix;\r\n                    //Note: emitLineDelimitedJson and eventsLimitInMem is directly accessed via config in senderBuffer\r\n                    //Therefore, if canUseSessionStorage is not changed, we do not need to re initialize a new one\r\n                    var shouldUpdate = (canUseSessionStorage !== _sessionStorageUsed)\r\n                        || (canUseSessionStorage && (_namePrefix !== namePrefix)) // prefixName is only used in session storage\r\n                        || (canUseSessionStorage && (_bufferOverrideUsed !== bufferOverride));\r\n                    if (_self[_DYN__BUFFER /* @min:%2e_buffer */]) {\r\n                        // case1 (Pre and Now enableSessionStorageBuffer settings are same)\r\n                        // if namePrefix changes, transfer current buffer to new buffer\r\n                        // else no action needed\r\n                        //case2 (Pre and Now enableSessionStorageBuffer settings are changed)\r\n                        // transfer current buffer to new buffer\r\n                        if (shouldUpdate) {\r\n                            try {\r\n                                _self[_DYN__BUFFER /* @min:%2e_buffer */] = _self[_DYN__BUFFER /* @min:%2e_buffer */].createNew(diagLog, senderConfig, canUseSessionStorage);\r\n                            }\r\n                            catch (e) {\r\n                                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"failed to transfer telemetry to different buffer storage, telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                            }\r\n                        }\r\n                        _checkMaxSize();\r\n                    }\r\n                    else {\r\n                        _self[_DYN__BUFFER /* @min:%2e_buffer */] = canUseSessionStorage\r\n                            ? new SessionStorageSendBuffer(diagLog, senderConfig) : new ArraySendBuffer(diagLog, senderConfig);\r\n                    }\r\n                    _namePrefix = namePrefix;\r\n                    _sessionStorageUsed = canUseSessionStorage;\r\n                    _bufferOverrideUsed = bufferOverride;\r\n                    _fetchKeepAlive = !senderConfig[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:%2eonunloadDisableFetch */] && isFetchSupported(true);\r\n                    _disableBeaconSplit = !!senderConfig[_DYN_DISABLE_SEND_BEACON_7 /* @min:%2edisableSendBeaconSplit */];\r\n                    _self._sample = new Sample(senderConfig.samplingPercentage, diagLog);\r\n                    _instrumentationKey = senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    if (!isPromiseLike(_instrumentationKey) && !_validateInstrumentationKey(_instrumentationKey, config)) {\r\n                        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, \"Invalid Instrumentation key \" + _instrumentationKey);\r\n                    }\r\n                    _customHeaders = senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */];\r\n                    if (isString(_endpointUrl) && !isInternalApplicationInsightsEndpoint(_endpointUrl) && _customHeaders && _customHeaders[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            _this.addHeader(customHeader.header, customHeader.value);\r\n                        });\r\n                    }\r\n                    else {\r\n                        _customHeaders = null;\r\n                    }\r\n                    _enableSendPromise = senderConfig.enableSendPromise;\r\n                    var sendPostConfig = _getSendPostMgrConfig();\r\n                    // only init it once\r\n                    if (!_sendPostMgr) {\r\n                        _sendPostMgr = new SenderPostManager();\r\n                        _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, diagLog);\r\n                    }\r\n                    else {\r\n                        _sendPostMgr.SetConfig(sendPostConfig);\r\n                    }\r\n                    var customInterface = senderConfig.httpXHROverride;\r\n                    var httpInterface = null;\r\n                    var syncInterface = null;\r\n                    // User requested transport(s) values > Beacon > Fetch > XHR\r\n                    // Beacon would be filtered out if user has set disableBeaconApi to true at _getSenderInterface\r\n                    var theTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */], senderConfig.transports);\r\n                    httpInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](theTransports, false);\r\n                    var xhrInterface = _sendPostMgr && _sendPostMgr.getFallbackInst();\r\n                    _xhrSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync);\r\n                    };\r\n                    _fallbackSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync, false);\r\n                    };\r\n                    httpInterface = _alwaysUseCustomSend ? customInterface : (httpInterface || customInterface || xhrInterface);\r\n                    _self[_DYN__SENDER /* @min:%2e_sender */] = function (payload, isAsync) {\r\n                        return _doSend(httpInterface, payload, isAsync);\r\n                    };\r\n                    if (_fetchKeepAlive) {\r\n                        // Try and use the fetch with keepalive\r\n                        _syncUnloadSender = _fetchKeepAliveSender;\r\n                    }\r\n                    var syncTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */], senderConfig.unloadTransports);\r\n                    if (!_fetchKeepAlive) {\r\n                        // remove fetch from theTransports\r\n                        syncTransports = syncTransports.filter(function (transport) { return transport !== 2 /* TransportType.Fetch */; });\r\n                    }\r\n                    syncInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](syncTransports, true);\r\n                    syncInterface = _alwaysUseCustomSend ? customInterface : (syncInterface || customInterface);\r\n                    if ((_alwaysUseCustomSend || senderConfig.unloadTransports || !_syncUnloadSender) && syncInterface) {\r\n                        _syncUnloadSender = function (payload, isAsync) {\r\n                            return _doSend(syncInterface, payload, isAsync);\r\n                        };\r\n                    }\r\n                    if (!_syncUnloadSender) {\r\n                        _syncUnloadSender = _xhrSend;\r\n                    }\r\n                    _disableTelemetry = senderConfig.disableTelemetry;\r\n                    _convertUndefined = senderConfig.convertUndefined || UNDEFINED_VALUE;\r\n                    _isRetryDisabled = senderConfig.isRetryDisabled;\r\n                    _maxBatchInterval = senderConfig.maxBatchInterval;\r\n                }));\r\n            };\r\n            _self.processTelemetry = function (telemetryItem, itemCtx) {\r\n                itemCtx = _self._getTelCtx(itemCtx);\r\n                var diagLogger = itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var isValidate = _validate(telemetryItem, diagLogger);\r\n                    if (!isValidate) {\r\n                        return;\r\n                    }\r\n                    var aiEnvelope = _getEnvelope(telemetryItem, diagLogger);\r\n                    if (!aiEnvelope) {\r\n                        return;\r\n                    }\r\n                    // check if the incoming payload is too large, truncate if necessary\r\n                    var payload = _serializer.serialize(aiEnvelope);\r\n                    // flush if we would exceed the max-size limit by adding this item\r\n                    var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                    _checkMaxSize(payload);\r\n                    var payloadItem = {\r\n                        item: payload,\r\n                        cnt: 0 // inital cnt will always be 0\r\n                    };\r\n                    // enqueue the payload\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payloadItem);\r\n                    // ensure an invocation timeout is set\r\n                    _setupTimer();\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"Failed adding telemetry to the sender's buffer, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                // hand off the telemetry item to the next plugin\r\n                _self.processNext(telemetryItem, itemCtx);\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _syncFetchPayload === 0 && _self._buffer[_DYN_COUNT /* @min:%2ecount */]() === 0;\r\n            };\r\n            _self.getOfflineListener = function () {\r\n                return _offlineListener;\r\n            };\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            _self._xhrReadyStateChange = function (xhr, payload, countOfItemsInPayload) {\r\n                // since version 3.2.0, this function is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xhrReadyStateChange(xhr, payload, countOfItemsInPayload);\r\n            };\r\n            /**\r\n             * Immediately send buffered data\r\n             * @param isAsync - Indicates if the events should be sent asynchronously\r\n             * @param forcedSender - Indicates the forcedSender, undefined if not passed\r\n             */\r\n            _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */] = function (isAsync, forcedSender, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    try {\r\n                        var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                        // Send data only if disableTelemetry is false\r\n                        if (!_disableTelemetry) {\r\n                            if (buffer[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var payload = buffer.getItems();\r\n                                _notifySendRequest(sendReason || 0 /* SendRequestReason.Undefined */, isAsync);\r\n                                // invoke send\r\n                                if (forcedSender) {\r\n                                    result = forcedSender.call(_self, payload, isAsync);\r\n                                }\r\n                                else {\r\n                                    result = _self[_DYN__SENDER /* @min:%2e_sender */](payload, isAsync);\r\n                                }\r\n                            }\r\n                            // update lastSend time to enable throttling\r\n                            _lastSend = +new Date;\r\n                        }\r\n                        else {\r\n                            buffer[_DYN_CLEAR /* @min:%2eclear */]();\r\n                        }\r\n                        _clearScheduledTimer();\r\n                    }\r\n                    catch (e) {\r\n                        /* Ignore this error for IE under v10 */\r\n                        var ieVer = getIEVersion();\r\n                        if (!ieVer || ieVer > 9) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Telemetry transmission failed, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                        // potential place to call countException q3\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                return {\r\n                    getUrl: function () {\r\n                        return _endpointUrl;\r\n                    },\r\n                    createPayload: _createPayload,\r\n                    serialize: _serialize,\r\n                    batch: _batch,\r\n                    shouldProcess: function (evt) {\r\n                        return !!_validate(evt);\r\n                    }\r\n                };\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _self.onunloadFlush();\r\n                runTargetUnload(_offlineListener, false);\r\n                _initDefaults();\r\n            };\r\n            /**\r\n             * error handler\r\n             */\r\n            _self[_DYN__ON_ERROR /* @min:%2e_onError */] = function (payload, message, event) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onError(payload, message, event);\r\n            };\r\n            /**\r\n             * partial success handler\r\n             */\r\n            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */] = function (payload, results) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onPartialSuccess(payload, results);\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */] = function (payload, countOfItemsInPayload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onSuccess(payload, countOfItemsInPayload);\r\n                //_self._buffer && _self._buffer.clearSent(payload);\r\n            };\r\n            /**\r\n             * xdr state changes\r\n             */\r\n            _self._xdrOnLoad = function (xdr, payload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xdrOnLoad(xdr, payload);\r\n            };\r\n            // function _getStatsBeat() {\r\n            //     let statsBeatConfig: IStatsBeatState = {\r\n            //         cKey: _self._senderConfig.instrumentationKey,\r\n            //         endpoint: _endpointUrl,\r\n            //         sdkVer: EnvelopeCreator.Version,\r\n            //         type: eStatsType.SDK\r\n            //     };\r\n            //     let core = _self.core;\r\n            //     // During page unload the core may have been cleared and some async events may not have been sent yet\r\n            //     // resulting in the core being null. In this case we don't want to create a statsbeat instance\r\n            //     return core ? core.getStatsBeat(statsBeatConfig) : null;\r\n            // }\r\n            function _xdrOnLoad(xdr, payload) {\r\n                var responseText = _getResponseText(xdr);\r\n                if (xdr && (responseText + \"\" === \"200\" || responseText === \"\")) {\r\n                    _consecutiveErrors = 0;\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, 0);\r\n                }\r\n                else {\r\n                    var results = parseResponse(responseText);\r\n                    if (results && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] > results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]\r\n                        && !_isRetryDisabled) {\r\n                        _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, results);\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, formatErrorMessageXdr(xdr));\r\n                    }\r\n                }\r\n            }\r\n            function _getSendPostMgrConfig() {\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: function (xdr, oncomplete, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            //const responseText = _getResponseText(xdr);\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     if (xdr && (responseText + \"\" === \"200\" || responseText === \"\")) {\r\n                            //         _consecutiveErrors = 0;\r\n                            //         statsbeat.count(200, payload, _endpointUrl);\r\n                            //     } else {\r\n                            //         const results = parseResponse(responseText);\r\n                            //         if (results && results.itemsReceived && results.itemsReceived > results.itemsAccepted\r\n                            //             && !_isRetryDisabled) {\r\n                            //             statsbeat.count(206, payload, _endpointUrl);\r\n                            //         } else {\r\n                            //             statsbeat.count(499, payload, _endpointUrl);\r\n                            //         }\r\n                            //     }\r\n                            // }\r\n                            return _xdrOnLoad(xdr, payloadArr);\r\n                        },\r\n                        fetchOnComplete: function (response, onComplete, resValue, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     statsbeat.count(response.status, payload, _endpointUrl);\r\n                            // }\r\n                            return _checkResponsStatus(response.status, payloadArr, response.url, payloadArr[_DYN_LENGTH /* @min:%2elength */], response.statusText, resValue || \"\");\r\n                        },\r\n                        xhrOnComplete: function (request, oncomplete, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat && request.readyState === 4) {\r\n                            //     statsbeat.count(request.status, payload, _endpointUrl);\r\n                            // }\r\n                            return _xhrReadyStateChange(request, payloadArr, payloadArr[_DYN_LENGTH /* @min:%2elength */]);\r\n                        },\r\n                        beaconOnRetry: function (data, onComplete, canSend) {\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     statsbeat.count(499, data, _endpointUrl);\r\n                            // }\r\n                            return _onBeaconRetry(data, onComplete, canSend);\r\n                        }\r\n                    };\r\n                    var config = {\r\n                        enableSendPromise: _enableSendPromise,\r\n                        isOneDs: false,\r\n                        disableCredentials: false,\r\n                        disableXhr: _disableXhr,\r\n                        disableBeacon: !_beaconNormalSupported,\r\n                        disableBeaconSync: !_beaconOnUnloadSupported,\r\n                        senderOnCompleteCallBack: onCompleteFuncs\r\n                    };\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            function _xhrReadyStateChange(xhr, payload, countOfItemsInPayload) {\r\n                if (xhr.readyState === 4) {\r\n                    _checkResponsStatus(xhr.status, payload, xhr.responseURL, countOfItemsInPayload, formatErrorMessageXhr(xhr), _getResponseText(xhr) || xhr.response);\r\n                }\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(payload, message, event) {\r\n                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            /**\r\n             * partial success handler\r\n             */\r\n            function _onPartialSuccess(payload, results) {\r\n                var failed = [];\r\n                var retry = [];\r\n                // Iterate through the reversed array of errors so that splicing doesn't have invalid indexes after the first item.\r\n                var errors = results.errors.reverse();\r\n                for (var _i = 0, errors_1 = errors; _i < errors_1.length; _i++) {\r\n                    var error = errors_1[_i];\r\n                    var extracted = payload.splice(error.index, 1)[0];\r\n                    if (_isRetriable(error.statusCode)) {\r\n                        retry[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                    else {\r\n                        // All other errors, including: 402 (Monthly quota exceeded) and 439 (Too many requests and refresh cache).\r\n                        failed[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                }\r\n                if (payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]);\r\n                }\r\n                if (failed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_ERROR /* @min:%2e_onError */](failed, formatErrorMessageXhr(null, [\"partial success\", results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */], \"of\", results.itemsReceived].join(\" \")));\r\n                }\r\n                if (retry[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _resendPayload(retry);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Partial success. \" +\r\n                        \"Delivered: \" + payload[_DYN_LENGTH /* @min:%2elength */] + \", Failed: \" + failed[_DYN_LENGTH /* @min:%2elength */] +\r\n                        \". Will retry to send \" + retry[_DYN_LENGTH /* @min:%2elength */] + \" our of \" + results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] + \" items\");\r\n                }\r\n            }\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(payload, countOfItemsInPayload) {\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            function _getPayloadArr(payload) {\r\n                try {\r\n                    if (payload) {\r\n                        var internalPayload = payload;\r\n                        var arr = internalPayload.oriPayload;\r\n                        if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                            return arr;\r\n                        }\r\n                        return null;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _validate(telemetryItem, diagLogger) {\r\n                if (_disableTelemetry) {\r\n                    // Do not send/save data\r\n                    return false;\r\n                }\r\n                // validate input\r\n                if (!telemetryItem) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 7 /* _eInternalMessageId.CannotSendEmptyTelemetry */, \"Cannot send empty telemetry\");\r\n                    return false;\r\n                }\r\n                // validate event\r\n                if (telemetryItem.baseData && !telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 70 /* _eInternalMessageId.InvalidEvent */, \"Cannot send telemetry without baseData and baseType\");\r\n                    return false;\r\n                }\r\n                if (!telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    // Default\r\n                    telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */] = \"EventData\";\r\n                }\r\n                // ensure a sender was constructed\r\n                if (!_self[_DYN__SENDER /* @min:%2e_sender */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender was not initialized\");\r\n                    return false;\r\n                }\r\n                // check if this item should be sampled in, else add sampleRate tag\r\n                if (!_isSampledIn(telemetryItem)) {\r\n                    // Item is sampled out, do not send it\r\n                    diagLogger && _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 33 /* _eInternalMessageId.TelemetrySampledAndNotSent */, \"Telemetry item was sampled out and not sent\", { SampleRate: _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] });\r\n                    return false;\r\n                }\r\n                else {\r\n                    telemetryItem[SampleRate] = _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */];\r\n                }\r\n                return true;\r\n            }\r\n            function _getEnvelope(telemetryItem, diagLogger) {\r\n                // construct an envelope that Application Insights endpoint can understand\r\n                // if ikey of telemetry is provided and not empty, envelope will use this iKey instead of senderConfig iKey\r\n                var defaultEnvelopeIkey = telemetryItem.iKey || _instrumentationKey;\r\n                var aiEnvelope = Sender.constructEnvelope(telemetryItem, defaultEnvelopeIkey, diagLogger, _convertUndefined);\r\n                if (!aiEnvelope) {\r\n                    _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 47 /* _eInternalMessageId.CreateEnvelopeError */, \"Unable to create an AppInsights envelope\");\r\n                    return;\r\n                }\r\n                var doNotSendItem = false;\r\n                // this is for running in legacy mode, where customer may already have a custom initializer present\r\n                if (telemetryItem[_DYN_TAGS /* @min:%2etags */] && telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy]) {\r\n                    arrForEach(telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy], function (callBack) {\r\n                        try {\r\n                            if (callBack && callBack(aiEnvelope) === false) {\r\n                                doNotSendItem = true;\r\n                                _warnToConsole(diagLogger, \"Telemetry processor check returns false\");\r\n                            }\r\n                        }\r\n                        catch (e) {\r\n                            // log error but dont stop executing rest of the telemetry initializers\r\n                            // doNotSendItem = true;\r\n                            _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"One of telemetry initializers failed, telemetry item will not be sent: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n                        }\r\n                    });\r\n                    delete telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy];\r\n                }\r\n                if (doNotSendItem) {\r\n                    return; // do not send, no need to execute next plugin\r\n                }\r\n                return aiEnvelope;\r\n            }\r\n            function _serialize(item) {\r\n                var rlt = EMPTY_STR;\r\n                var diagLogger = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var valid = _validate(item, diagLogger);\r\n                    var envelope = null;\r\n                    if (valid) {\r\n                        envelope = _getEnvelope(item, diagLogger);\r\n                    }\r\n                    if (envelope) {\r\n                        rlt = _serializer.serialize(envelope);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    rlt = \"[\" + arr.join(\",\") + \"]\";\r\n                }\r\n                return rlt;\r\n            }\r\n            function _createPayload(data) {\r\n                var headers = _getHeaders();\r\n                return {\r\n                    urlString: _endpointUrl,\r\n                    data: data,\r\n                    headers: headers\r\n                };\r\n            }\r\n            function _isSampledIn(envelope) {\r\n                return _self._sample.isSampledIn(envelope);\r\n            }\r\n            function _getOnComplete(payload, status, headers, response) {\r\n                // ***********************************************************************************************\r\n                //TODO: handle other status codes\r\n                if (status === 200 && payload) {\r\n                    _self._onSuccess(payload, payload[_DYN_LENGTH /* @min:%2elength */]);\r\n                }\r\n                else {\r\n                    response && _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, response);\r\n                }\r\n            }\r\n            function _doSend(sendInterface, payload, isAsync, markAsSent) {\r\n                if (markAsSent === void 0) { markAsSent = true; }\r\n                var onComplete = function (status, headers, response) {\r\n                    // let statsbeat = _getStatsBeat();\r\n                    // if (statsbeat) {\r\n                    //     statsbeat.count(status, payloadData, _endpointUrl);\r\n                    // }\r\n                    return _getOnComplete(payload, status, headers, response);\r\n                };\r\n                var payloadData = _getPayload(payload);\r\n                // if (payloadData) {\r\n                //     payloadData.statsBeatData = {startTime: dateNow()};\r\n                // }\r\n                var sendPostFunc = sendInterface && sendInterface.sendPOST;\r\n                if (sendPostFunc && payloadData) {\r\n                    // ***********************************************************************************************\r\n                    // mark payload as sent at the beginning of calling each send function\r\n                    if (markAsSent) {\r\n                        _self._buffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](payload);\r\n                    }\r\n                    var result_2;\r\n                    var callbackExecuted_1 = false;\r\n                    var resolveFn_1;\r\n                    var rejectFn_1;\r\n                    _sendPostMgr.preparePayload(function (processedPayload) {\r\n                        result_2 = sendPostFunc(processedPayload, onComplete, !isAsync);\r\n                        callbackExecuted_1 = true;\r\n                        if (resolveFn_1) {\r\n                            doAwait(result_2, resolveFn_1, rejectFn_1);\r\n                        }\r\n                    }, _zipPayload, payloadData, !isAsync);\r\n                    if (callbackExecuted_1) {\r\n                        return result_2;\r\n                    }\r\n                    // Callback was not executed synchronously, so we need to return a promise\r\n                    return createPromise(function (resolve, reject) {\r\n                        resolveFn_1 = resolve;\r\n                        rejectFn_1 = reject;\r\n                    });\r\n                }\r\n                return null;\r\n            }\r\n            function _getPayload(payload) {\r\n                if (isArray(payload) && payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var batch = _self[_DYN__BUFFER /* @min:%2e_buffer */].batchPayloads(payload);\r\n                    var headers = _getHeaders();\r\n                    var payloadData = {\r\n                        data: batch,\r\n                        urlString: _endpointUrl,\r\n                        headers: headers,\r\n                        disableXhrSync: _disableXhr,\r\n                        disableFetchKeepAlive: !_fetchKeepAlive,\r\n                        oriPayload: payload\r\n                    };\r\n                    return payloadData;\r\n                }\r\n                return null;\r\n            }\r\n            function _getHeaders() {\r\n                try {\r\n                    var headers = _headers || {};\r\n                    if (isInternalApplicationInsightsEndpoint(_endpointUrl)) {\r\n                        headers[RequestHeaders[6 /* eRequestHeaders.sdkContextHeader */]] = RequestHeaders[7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */];\r\n                    }\r\n                    return headers;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _checkMaxSize(incomingPayload) {\r\n                var incomingSize = incomingPayload ? incomingPayload[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n                if ((_self[_DYN__BUFFER /* @min:%2e_buffer */].size() + incomingSize) > _maxBatchSizeInBytes) {\r\n                    if (!_offlineListener || _offlineListener.isOnline()) { // only trigger send when currently online\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 10 /* SendRequestReason.MaxBatchSize */);\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _checkResponsStatus(status, payload, responseUrl, countOfItemsInPayload, errorMessage, res) {\r\n                var response = null;\r\n                if (!_self._appId) {\r\n                    response = parseResponse(res);\r\n                    if (response && response.appId) {\r\n                        _self._appId = response.appId;\r\n                    }\r\n                }\r\n                if ((status < 200 || status >= 300) && status !== 0) {\r\n                    // Update End Point url if permanent redirect or moved permanently\r\n                    // Updates the end point url before retry\r\n                    if (status === 301 || status === 307 || status === 308) {\r\n                        if (!_checkAndUpdateEndPointUrl(responseUrl)) {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (_offlineListener && !_offlineListener.isOnline()) { // offline\r\n                        // Note: Don't check for status == 0, since adblock gives this code\r\n                        if (!_isRetryDisabled) {\r\n                            var offlineBackOffMultiplier = 10; // arbritrary number\r\n                            _resendPayload(payload, offlineBackOffMultiplier);\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". Offline - Response Code: \".concat(status, \". Offline status: \").concat(!_offlineListener.isOnline(), \". Will retry to send \").concat(payload.length, \" items.\"));\r\n                        }\r\n                        return;\r\n                    }\r\n                    if (!_isRetryDisabled && _isRetriable(status)) {\r\n                        _resendPayload(payload);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" +\r\n                            \"Response code \" + status + \". Will retry to send \" + payload[_DYN_LENGTH /* @min:%2elength */] + \" items.\");\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                    }\r\n                }\r\n                else {\r\n                    // check if the xhr's responseURL or fetch's response.url is same as endpoint url\r\n                    // TODO after 10 redirects force send telemetry with 'redirect=false' as query parameter.\r\n                    _checkAndUpdateEndPointUrl(responseUrl);\r\n                    if (status === 206) {\r\n                        if (!response) {\r\n                            response = parseResponse(res);\r\n                        }\r\n                        if (response && !_isRetryDisabled) {\r\n                            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, response);\r\n                        }\r\n                        else {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                        }\r\n                    }\r\n                    else {\r\n                        _consecutiveErrors = 0;\r\n                        _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, countOfItemsInPayload);\r\n                    }\r\n                }\r\n            }\r\n            function _checkAndUpdateEndPointUrl(responseUrl) {\r\n                // Maximum stamp specific redirects allowed(uncomment this when breeze is ready with not allowing redirects feature)\r\n                if (_stamp_specific_redirects >= 10) {\r\n                    //  _self._senderConfig.endpointUrl = () => Sender._getDefaultAppInsightsChannelConfig().endpointUrl()+\"/?redirect=false\";\r\n                    //  _stamp_specific_redirects = 0;\r\n                    return false;\r\n                }\r\n                if (!isNullOrUndefined(responseUrl) && responseUrl !== \"\") {\r\n                    if (responseUrl !== _endpointUrl) {\r\n                        _endpointUrl = responseUrl;\r\n                        ++_stamp_specific_redirects;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            function _doUnloadSend(payload, isAsync) {\r\n                if (_syncUnloadSender) {\r\n                    // We are unloading so always call the sender with sync set to false\r\n                    _syncUnloadSender(payload, false);\r\n                }\r\n                else {\r\n                    // Fallback to the previous beacon Sender (which causes a CORB warning on chrome now)\r\n                    var beaconInst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([3 /* TransportType.Beacon */], true);\r\n                    return _doSend(beaconInst, payload, isAsync);\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                var internalPayload = payload;\r\n                var data = internalPayload && internalPayload.oriPayload;\r\n                if (!_disableBeaconSplit) {\r\n                    // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                    var droppedPayload = [];\r\n                    for (var lp = 0; lp < data[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        var thePayload = data[lp];\r\n                        var arr = [thePayload];\r\n                        var item = _getPayload(arr);\r\n                        if (!canSend(item, onComplete)) {\r\n                            // Can't send anymore, so split the batch and drop the rest\r\n                            droppedPayload[_DYN_PUSH /* @min:%2epush */](thePayload);\r\n                        }\r\n                        else {\r\n                            _self._onSuccess(arr, arr[_DYN_LENGTH /* @min:%2elength */]);\r\n                        }\r\n                    }\r\n                    if (droppedPayload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _fallbackSend && _fallbackSend(droppedPayload, true);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                    }\r\n                }\r\n                else {\r\n                    _fallbackSend && _fallbackSend(data, true);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                }\r\n            }\r\n            function _isStringArr(arr) {\r\n                try {\r\n                    if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        return (isString(arr[0]));\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    //TODO: log, sender use IInternalStorageItem instead of string since 3.1.3\r\n                }\r\n                return null;\r\n            }\r\n            function _fetchKeepAliveSender(payload, isAsync) {\r\n                var transport = null;\r\n                if (isArray(payload)) {\r\n                    var payloadSize = payload[_DYN_LENGTH /* @min:%2elength */];\r\n                    for (var lp = 0; lp < payload[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        payloadSize += payload[lp].item[_DYN_LENGTH /* @min:%2elength */];\r\n                    }\r\n                    var syncFetchPayload = _sendPostMgr.getSyncFetchPayload();\r\n                    if ((syncFetchPayload + payloadSize) <= FetchSyncRequestSizeLimitBytes) {\r\n                        transport = 2 /* TransportType.Fetch */;\r\n                    }\r\n                    else if (isBeaconsSupported()) {\r\n                        // Fallback to beacon sender as we at least get told which events can't be scheduled\r\n                        transport = 3 /* TransportType.Beacon */;\r\n                    }\r\n                    else {\r\n                        // Payload is going to be too big so just try and send via XHR\r\n                        transport = 1 /* TransportType.Xhr */;\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with xhrSender.\");\r\n                    }\r\n                    var inst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([transport], true);\r\n                    return _doSend(inst, payload, isAsync);\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * Resend payload. Adds payload back to the send buffer and setup a send timer (with exponential backoff).\r\n             * @param payload\r\n             */\r\n            function _resendPayload(payload, linearFactor) {\r\n                if (linearFactor === void 0) { linearFactor = 1; }\r\n                if (!payload || payload[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    return;\r\n                }\r\n                var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n                _consecutiveErrors++;\r\n                for (var _i = 0, payload_1 = payload; _i < payload_1.length; _i++) {\r\n                    var item = payload_1[_i];\r\n                    item.cnt = item.cnt || 0; // to make sure we have cnt for each payload\r\n                    item.cnt++; // when resend, increase cnt\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](item);\r\n                }\r\n                // setup timer\r\n                _setRetryTime(linearFactor);\r\n                _setupTimer();\r\n            }\r\n            /**\r\n             * Calculates the time to wait before retrying in case of an error based on\r\n             * http://en.wikipedia.org/wiki/Exponential_backoff\r\n             */\r\n            function _setRetryTime(linearFactor) {\r\n                var SlotDelayInSeconds = 10;\r\n                var delayInSeconds;\r\n                if (_consecutiveErrors <= 1) {\r\n                    delayInSeconds = SlotDelayInSeconds;\r\n                }\r\n                else {\r\n                    var backOffSlot = (Math.pow(2, _consecutiveErrors) - 1) / 2;\r\n                    // tslint:disable-next-line:insecure-random\r\n                    var backOffDelay = mathFloor(Math.random() * backOffSlot * SlotDelayInSeconds) + 1;\r\n                    backOffDelay = linearFactor * backOffDelay;\r\n                    delayInSeconds = mathMax(mathMin(backOffDelay, 3600), SlotDelayInSeconds);\r\n                }\r\n                // TODO: Log the backoff time like the C# version does.\r\n                var retryAfterTimeSpan = dateNow() + (delayInSeconds * 1000);\r\n                // TODO: Log the retry at time like the C# version does.\r\n                _retryAt = retryAfterTimeSpan;\r\n            }\r\n            /**\r\n             * Sets up the timer which triggers actually sending the data.\r\n             */\r\n            function _setupTimer() {\r\n                if (!_timeoutHandle && !_paused) {\r\n                    var retryInterval = _retryAt ? mathMax(0, _retryAt - dateNow()) : 0;\r\n                    var timerValue = mathMax(_maxBatchInterval, retryInterval);\r\n                    _timeoutHandle = scheduleTimeout(function () {\r\n                        _timeoutHandle = null;\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 1 /* SendRequestReason.NormalSchedule */);\r\n                    }, timerValue);\r\n                }\r\n            }\r\n            function _clearScheduledTimer() {\r\n                _timeoutHandle && _timeoutHandle.cancel();\r\n                _timeoutHandle = null;\r\n                _retryAt = null;\r\n            }\r\n            /**\r\n             * Checks if the SDK should resend the payload after receiving this status code from the backend.\r\n             * @param statusCode\r\n             */\r\n            function _isRetriable(statusCode) {\r\n                // retryCodes = [] means should not retry\r\n                if (!isNullOrUndefined(_retryCodes)) {\r\n                    return _retryCodes[_DYN_LENGTH /* @min:%2elength */] && _retryCodes.indexOf(statusCode) > -1;\r\n                }\r\n                return statusCode === 401 // Unauthorized\r\n                    // Removing as private links can return a 403 which causes excessive retries and session storage usage\r\n                    // || statusCode === 403 // Forbidden\r\n                    || statusCode === 408 // Timeout\r\n                    || statusCode === 429 // Too many requests.\r\n                    || statusCode === 500 // Internal server error.\r\n                    || statusCode === 502 // Bad Gateway.\r\n                    || statusCode === 503 // Service unavailable.\r\n                    || statusCode === 504; // Gateway timeout.\r\n            }\r\n            // Using function lookups for backward compatibility as the getNotifyMgr() did not exist until after v2.5.6\r\n            function _getNotifyMgr() {\r\n                var func = \"getNotifyMgr\";\r\n                var result;\r\n                var core = _self.core;\r\n                if (core) {\r\n                    // During page unload the core may have been cleared and some async events may not have been sent yet\r\n                    // resulting in the core being null. In this case we don't want to create a statsbeat instance\r\n                    if (core[func]) {\r\n                        result = core[func]();\r\n                    }\r\n                    else {\r\n                        // using _self.core['_notificationManager'] for backward compatibility\r\n                        result = core[\"_notificationManager\"];\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            function _notifySendRequest(sendRequest, isAsync) {\r\n                var manager = _getNotifyMgr();\r\n                if (manager && manager.eventsSendRequest) {\r\n                    try {\r\n                        manager.eventsSendRequest(sendRequest, isAsync);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            }\r\n            /**\r\n             * Validate UUID Format\r\n             * Specs taken from https://tools.ietf.org/html/rfc4122 and breeze repo\r\n             */\r\n            function _validateInstrumentationKey(instrumentationKey, config) {\r\n                var disableValidation = config.disableInstrumentationKeyValidation;\r\n                var disableIKeyValidationFlag = isNullOrUndefined(disableValidation) ? false : disableValidation;\r\n                if (disableIKeyValidationFlag) {\r\n                    return true;\r\n                }\r\n                var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n                var regexp = new RegExp(UUID_Regex);\r\n                return regexp.test(instrumentationKey);\r\n            }\r\n            function _initDefaults() {\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _self[_DYN__BUFFER /* @min:%2e_buffer */] = null;\r\n                _self._appId = null;\r\n                _self._sample = null;\r\n                _headers = {};\r\n                _offlineListener = null;\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = null;\r\n                _paused = false;\r\n                _timeoutHandle = null;\r\n                _serializer = null;\r\n                _stamp_specific_redirects = 0;\r\n                _syncFetchPayload = 0;\r\n                _syncUnloadSender = null;\r\n                _evtNamespace = null;\r\n                _endpointUrl = null;\r\n                _orgEndpointUrl = null;\r\n                _maxBatchSizeInBytes = 0;\r\n                _beaconSupported = false;\r\n                _customHeaders = null;\r\n                _disableTelemetry = false;\r\n                _instrumentationKey = null;\r\n                _convertUndefined = UNDEFINED_VALUE;\r\n                _isRetryDisabled = false;\r\n                _sessionStorageUsed = null;\r\n                _namePrefix = UNDEFINED_VALUE;\r\n                _disableXhr = false;\r\n                _fetchKeepAlive = false;\r\n                _disableBeaconSplit = false;\r\n                _xhrSend = null;\r\n                _fallbackSend = null;\r\n                _sendPostMgr = null;\r\n                objDefine(_self, \"_senderConfig\", {\r\n                    g: function () {\r\n                        return objExtend({}, defaultAppInsightsChannelConfig);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Sender.constructEnvelope = function (orig, iKey, logger, convertUndefined) {\r\n        var envelope;\r\n        if (iKey !== orig.iKey && !isNullOrUndefined(iKey)) {\r\n            envelope = __assign(__assign({}, orig), { iKey: iKey });\r\n        }\r\n        else {\r\n            envelope = orig;\r\n        }\r\n        var creator = EnvelopeTypeCreator[envelope.baseType] || EventEnvelopeCreator;\r\n        return creator(logger, envelope, convertUndefined);\r\n    };\r\n// Removed Stub for Sender.prototype.pause.\r\n// Removed Stub for Sender.prototype.resume.\r\n// Removed Stub for Sender.prototype.flush.\r\n// Removed Stub for Sender.prototype.onunloadFlush.\r\n// Removed Stub for Sender.prototype.initialize.\r\n// Removed Stub for Sender.prototype.processTelemetry.\r\n// Removed Stub for Sender.prototype._xhrReadyStateChange.\r\n// Removed Stub for Sender.prototype.triggerSend.\r\n// Removed Stub for Sender.prototype._onError.\r\n// Removed Stub for Sender.prototype._onPartialSuccess.\r\n// Removed Stub for Sender.prototype._onSuccess.\r\n// Removed Stub for Sender.prototype._xdrOnLoad.\r\n// Removed Stub for Sender.prototype.addHeader.\r\n// Removed Stub for Sender.prototype.isCompletelyIdle.\r\n// Removed Stub for Sender.prototype.getOfflineSupport.\r\n// Removed Stub for Sender.prototype.getOfflineListener.\r\n    return Sender;\r\n}(BaseTelemetryPlugin));\r\nexport { Sender };\r\n//# sourceMappingURL=Sender.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _throwInternal, getJSON, isArray, isFunction, isObject, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_PUSH, _DYN_STRINGIFY, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer(logger) {\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            /**\r\n             * Serializes the current object to a JSON string.\r\n             */\r\n            _self.serialize = function (input) {\r\n                var output = _serializeObject(input, \"root\");\r\n                try {\r\n                    return getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](output);\r\n                }\r\n                catch (e) {\r\n                    // if serialization fails return an empty string\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                }\r\n            };\r\n            function _serializeObject(source, name) {\r\n                var circularReferenceCheck = \"__aiCircularRefCheck\";\r\n                var output = {};\r\n                if (!source) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"cannot serialize object because it is null or undefined\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (source[circularReferenceCheck]) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 50 /* _eInternalMessageId.CircularReferenceDetected */, \"Circular reference detected while serializing object\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (!source.aiDataContract) {\r\n                    // special case for measurements/properties/tags\r\n                    if (name === \"measurements\") {\r\n                        output = _serializeStringMap(source, \"number\", name);\r\n                    }\r\n                    else if (name === \"properties\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (name === \"tags\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (isArray(source)) {\r\n                        output = _serializeArray(source, name);\r\n                    }\r\n                    else {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"Attempting to serialize an object which does not implement ISerializable\", { name: name }, true);\r\n                        try {\r\n                            // verify that the object can be stringified\r\n                            getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](source);\r\n                            output = source;\r\n                        }\r\n                        catch (e) {\r\n                            // if serialization fails return an empty string\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                        }\r\n                    }\r\n                    return output;\r\n                }\r\n                source[circularReferenceCheck] = true;\r\n                objForEachKey(source.aiDataContract, function (field, contract) {\r\n                    var isRequired = (isFunction(contract)) ? (contract() & 1 /* FieldType.Required */) : (contract & 1 /* FieldType.Required */);\r\n                    var isHidden = (isFunction(contract)) ? (contract() & 4 /* FieldType.Hidden */) : (contract & 4 /* FieldType.Hidden */);\r\n                    var isArray = contract & 2 /* FieldType.Array */;\r\n                    var isPresent = source[field] !== undefined;\r\n                    var isObj = isObject(source[field]) && source[field] !== null;\r\n                    if (isRequired && !isPresent && !isArray) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 24 /* _eInternalMessageId.MissingRequiredFieldSpecification */, \"Missing required field specification. The field is required but not present on source\", { field: field, name: name });\r\n                        // If not in debug mode, continue and hope the error is permissible\r\n                    }\r\n                    else if (!isHidden) { // Don't serialize hidden fields\r\n                        var value = void 0;\r\n                        if (isObj) {\r\n                            if (isArray) {\r\n                                // special case; recurse on each object in the source array\r\n                                value = _serializeArray(source[field], field);\r\n                            }\r\n                            else {\r\n                                // recurse on the source object in this field\r\n                                value = _serializeObject(source[field], field);\r\n                            }\r\n                        }\r\n                        else {\r\n                            // assign the source field to the output even if undefined or required\r\n                            value = source[field];\r\n                        }\r\n                        // only emit this field if the value is defined\r\n                        if (value !== undefined) {\r\n                            output[field] = value;\r\n                        }\r\n                    }\r\n                });\r\n                delete source[circularReferenceCheck];\r\n                return output;\r\n            }\r\n            function _serializeArray(sources, name) {\r\n                var output;\r\n                if (!!sources) {\r\n                    if (!isArray(sources)) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 54 /* _eInternalMessageId.ItemNotInArray */, \"This field was specified as an array in the contract but the item is not an array.\\r\\n\", { name: name }, true);\r\n                    }\r\n                    else {\r\n                        output = [];\r\n                        for (var i = 0; i < sources[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                            var source = sources[i];\r\n                            var item = _serializeObject(source, name + \"[\" + i + \"]\");\r\n                            output[_DYN_PUSH /* @min:%2epush */](item);\r\n                        }\r\n                    }\r\n                }\r\n                return output;\r\n            }\r\n            function _serializeStringMap(map, expectedType, name) {\r\n                var output;\r\n                if (map) {\r\n                    output = {};\r\n                    objForEachKey(map, function (field, value) {\r\n                        if (expectedType === \"string\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else if (!value[_DYN_TO_STRING /* @min:%2etoString */]) {\r\n                                output[field] = \"invalid field: toString() is not defined.\";\r\n                            }\r\n                            else {\r\n                                output[field] = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                            }\r\n                        }\r\n                        else if (expectedType === \"number\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else {\r\n                                var num = parseFloat(value);\r\n                                output[field] = num;\r\n                            }\r\n                        }\r\n                        else {\r\n                            output[field] = \"invalid field: \" + name + \" is of unknown type.\";\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, output[field], null, true);\r\n                        }\r\n                    });\r\n                }\r\n                return output;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.serialize.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n//# sourceMappingURL=Serializer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_CONCAT, _DYN_LENGTH } from \"../../__DynamicConstants\";\r\n// (Magic number) DJB algorithm can't work on shorter strings (results in poor distribution\r\nvar MIN_INPUT_LENGTH = 8;\r\nvar HashCodeScoreGenerator = /** @class */ (function () {\r\n    function HashCodeScoreGenerator() {\r\n    }\r\n    HashCodeScoreGenerator.prototype.getHashCodeScore = function (key) {\r\n        var score = this.getHashCode(key) / HashCodeScoreGenerator.INT_MAX_VALUE;\r\n        return score * 100;\r\n    };\r\n    HashCodeScoreGenerator.prototype.getHashCode = function (input) {\r\n        if (input === \"\") {\r\n            return 0;\r\n        }\r\n        while (input[_DYN_LENGTH /* @min:%2elength */] < MIN_INPUT_LENGTH) {\r\n            input = input[_DYN_CONCAT /* @min:%2econcat */](input);\r\n        }\r\n        // 5381 is a magic number: http://stackoverflow.com/questions/10696223/reason-for-5381-number-in-djb-hash-function\r\n        var hash = 5381;\r\n        for (var i = 0; i < input[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            hash = ((hash << 5) + hash) + input.charCodeAt(i);\r\n            // 'hash' is of number type which means 53 bit integer (http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types-number-type)\r\n            // 'hash & hash' will keep it 32 bit integer - just to make it clearer what the result is.\r\n            hash = hash & hash;\r\n        }\r\n        return Math.abs(hash);\r\n    };\r\n    // We're using 32 bit math, hence max value is (2^31 - 1)\r\n    HashCodeScoreGenerator.INT_MAX_VALUE = 2147483647;\r\n    return HashCodeScoreGenerator;\r\n}());\r\nexport { HashCodeScoreGenerator };\r\n//# sourceMappingURL=HashCodeScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ContextTagKeys } from \"@microsoft/applicationinsights-common\";\r\nimport { _DYN_GET_HASH_CODE_SCORE, _DYN_TAGS, _DYN_TRACE_ID } from \"../../__DynamicConstants\";\r\nimport { HashCodeScoreGenerator } from \"./HashCodeScoreGenerator\";\r\nvar SamplingScoreGenerator = /** @class */ (function () {\r\n    function SamplingScoreGenerator() {\r\n        var _self = this;\r\n        var hashCodeGenerator = new HashCodeScoreGenerator();\r\n        var keys = new ContextTagKeys();\r\n        _self.getSamplingScore = function (item) {\r\n            var score = 0;\r\n            if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.userId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.userId]);\r\n            }\r\n            else if (item.ext && item.ext.user && item.ext.user.id) {\r\n                score = hashCodeGenerator[_DYN_GET_HASH_CODE_SCORE /* @min:%2egetHashCodeScore */](item.ext.user.id);\r\n            }\r\n            else if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.operationId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.operationId]);\r\n            }\r\n            else if (item.ext && item.ext.telemetryTrace && item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n                score = hashCodeGenerator.getHashCodeScore(item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n            }\r\n            else {\r\n                // tslint:disable-next-line:insecure-random\r\n                score = (Math.random() * 100);\r\n            }\r\n            return score;\r\n        };\r\n    }\r\n    return SamplingScoreGenerator;\r\n}());\r\nexport { SamplingScoreGenerator };\r\n//# sourceMappingURL=SamplingScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { Metric } from \"@microsoft/applicationinsights-common\";\r\nimport { safeGetLogger } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_DATA_TYPE, _DYN_SAMPLE_RATE } from \"../__DynamicConstants\";\r\nimport { SamplingScoreGenerator } from \"./SamplingScoreGenerators/SamplingScoreGenerator\";\r\nvar Sample = /** @class */ (function () {\r\n    function Sample(sampleRate, logger) {\r\n        // We're using 32 bit math, hence max value is (2^31 - 1)\r\n        this.INT_MAX_VALUE = 2147483647;\r\n        var _logger = logger || safeGetLogger(null);\r\n        if (sampleRate > 100 || sampleRate < 0) {\r\n            _logger.throwInternal(2 /* eLoggingSeverity.WARNING */, 58 /* _eInternalMessageId.SampleRateOutOfRange */, \"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.\", { samplingRate: sampleRate }, true);\r\n            sampleRate = 100;\r\n        }\r\n        this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] = sampleRate;\r\n        this.samplingScoreGenerator = new SamplingScoreGenerator();\r\n    }\r\n    /**\r\n    * Determines if an envelope is sampled in (i.e. will be sent) or not (i.e. will be dropped).\r\n    */\r\n    Sample.prototype.isSampledIn = function (envelope) {\r\n        var samplingPercentage = this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */]; // 0 - 100\r\n        var isSampledIn = false;\r\n        if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n            return true;\r\n        }\r\n        else if (envelope.baseType === Metric[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n            // exclude MetricData telemetry from sampling\r\n            return true;\r\n        }\r\n        isSampledIn = this.samplingScoreGenerator.getSamplingScore(envelope) < samplingPercentage;\r\n        return isSampledIn;\r\n    };\r\n    return Sample;\r\n}());\r\nexport { Sample };\r\n//# sourceMappingURL=Sample.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrReduce, objKeys, strEndsWith } from \"@microsoft/applicationinsights-core-js\";\r\nimport { DEFAULT_BREEZE_ENDPOINT } from \"./Constants\";\r\nimport { _DYN_INGESTIONENDPOINT, _DYN_LENGTH, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _FIELDS_SEPARATOR = \";\";\r\nvar _FIELD_KEY_VALUE_SEPARATOR = \"=\";\r\nexport function parseConnectionString(connectionString) {\r\n    if (!connectionString) {\r\n        return {};\r\n    }\r\n    var kvPairs = connectionString[_DYN_SPLIT /* @min:%2esplit */](_FIELDS_SEPARATOR);\r\n    var result = arrReduce(kvPairs, function (fields, kv) {\r\n        var kvParts = kv[_DYN_SPLIT /* @min:%2esplit */](_FIELD_KEY_VALUE_SEPARATOR);\r\n        if (kvParts[_DYN_LENGTH /* @min:%2elength */] === 2) { // only save fields with valid formats\r\n            var key = kvParts[0][_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            var value = kvParts[1];\r\n            fields[key] = value;\r\n        }\r\n        return fields;\r\n    }, {});\r\n    if (objKeys(result)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // this is a valid connection string, so parse the results\r\n        if (result.endpointsuffix) {\r\n            // apply the default endpoints\r\n            var locationPrefix = result.location ? result.location + \".\" : \"\";\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\r\n        }\r\n        // apply user override endpoint or the default endpoints\r\n        result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || DEFAULT_BREEZE_ENDPOINT;\r\n        if (strEndsWith(result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */], \"/\")) {\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */].slice(0, -1);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport var ConnectionStringParser = {\r\n    parse: parseConnectionString\r\n};\r\n//# sourceMappingURL=ConnectionStringParser.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar _a, _b;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\nimport { DEFAULT_BREEZE_PATH, parseConnectionString } from \"@microsoft/applicationinsights-common\";\r\nimport { AppInsightsCore, cfgDfValidate, createDynamicConfig, onConfigChange, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nimport { createSyncPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { isNullOrUndefined, isPromiseLike, isString, objDefine, throwError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_CONNECTION_STRING, _DYN_ENDPOINT_URL, _DYN_INSTRUMENTATION_KEY, _DYN_USER_OVERRIDE_ENDPOI0 } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar defaultConfigValues = (_a = {\r\n        diagnosticLogInterval: cfgDfValidate(_chkDiagLevel, 10000)\r\n    },\r\n    _a[_DYN_CONNECTION_STRING /* @min:connectionString */] = UNDEFINED_VALUE,\r\n    _a.endpointUrl = UNDEFINED_VALUE,\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.featureOptIn = (_b = {},\r\n        _b[\"zipPayload\"] = { mode: 1 /* FeatureOptInMode.none */ },\r\n        _b),\r\n    _a.extensionConfig = {},\r\n    _a);\r\nfunction _chkDiagLevel(value) {\r\n    // Make sure we have a value > 0\r\n    return value && value > 0;\r\n}\r\n/**\r\n * @export\r\n */\r\nvar ApplicationInsights = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ApplicationInsights.\r\n     * @param config - The configuration to use for this ApplicationInsights instance\r\n     */\r\n    function ApplicationInsights(config) {\r\n        var core = new AppInsightsCore();\r\n        var _config;\r\n        // initialize the queue and config in case they are undefined\r\n        if (isNullOrUndefined(config) ||\r\n            (isNullOrUndefined(config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */]) && isNullOrUndefined(config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */]))) {\r\n            throwError(\"Invalid input configuration\");\r\n        }\r\n        dynamicProto(ApplicationInsights, this, function (_self) {\r\n            // Define _self.config\r\n            objDefine(_self, \"config\", {\r\n                g: function () { return _config; }\r\n            });\r\n            _initialize();\r\n            _self.initialize = _initialize;\r\n            _self.track = _track;\r\n            proxyFunctions(_self, core, [\r\n                \"flush\",\r\n                \"pollInternalLogs\",\r\n                \"stopPollingInternalLogs\",\r\n                \"unload\",\r\n                \"getPlugin\",\r\n                \"addPlugin\",\r\n                \"evtNamespace\",\r\n                \"addUnloadCb\",\r\n                \"onCfgChange\",\r\n                \"getTraceCtx\",\r\n                \"updateCfg\",\r\n                \"addTelemetryInitializer\"\r\n            ]);\r\n            function _initialize() {\r\n                var cfgHandler = createDynamicConfig(config || {}, defaultConfigValues);\r\n                _config = cfgHandler.cfg;\r\n                core.addUnloadHook(onConfigChange(cfgHandler, function () {\r\n                    var configCs = _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */];\r\n                    if (isPromiseLike(configCs)) {\r\n                        var ikeyPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var ikey = _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                                if (!res.rejected && curCs) {\r\n                                    // replace cs with resolved values in case of circular promises\r\n                                    _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */] = curCs;\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    ikey = resolvedCs.instrumentationkey || ikey;\r\n                                }\r\n                                resolve(ikey);\r\n                            });\r\n                        });\r\n                        var urlPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var url = _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                                if (!res.rejected && curCs) {\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    var ingest = resolvedCs.ingestionendpoint;\r\n                                    url = ingest ? ingest + DEFAULT_BREEZE_PATH : url;\r\n                                }\r\n                                resolve(url);\r\n                            });\r\n                        });\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = ikeyPromise;\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] || urlPromise;\r\n                    }\r\n                    if (isString(configCs)) {\r\n                        var cs = parseConnectionString(configCs);\r\n                        var ingest = cs.ingestionendpoint;\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] : (ingest + DEFAULT_BREEZE_PATH); // only add /v2/track when from connectionstring\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = cs.instrumentationkey || _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    // userOverrideEndpointUrl have the highest priority\r\n                    _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] : _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                }));\r\n                // initialize core\r\n                core.initialize(_config, [new Sender()]);\r\n            }\r\n        });\r\n        function _track(item) {\r\n            if (item) {\r\n                // to pass sender.processTelemetry()\r\n                item.baseData = item.baseData || {};\r\n                item.baseType = item.baseType || \"EventData\";\r\n            }\r\n            core.track(item);\r\n        }\r\n    }\r\n// Removed Stub for ApplicationInsights.prototype.initialize.\r\n// Removed Stub for ApplicationInsights.prototype.track.\r\n// Removed Stub for ApplicationInsights.prototype.flush.\r\n// Removed Stub for ApplicationInsights.prototype.pollInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.stopPollingInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.unload.\r\n// Removed Stub for ApplicationInsights.prototype.getPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.addPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.evtNamespace.\r\n// Removed Stub for ApplicationInsights.prototype.addUnloadCb.\r\n// Removed Stub for ApplicationInsights.prototype.getTraceCtx.\r\n// Removed Stub for ApplicationInsights.prototype.addTelemetryInitializer.\r\n// Removed Stub for ApplicationInsights.prototype.updateCfg.\r\n// Removed Stub for ApplicationInsights.prototype.onCfgChange.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ApplicationInsights.__ieDyn=1;\n\n    return ApplicationInsights;\r\n}());\r\nexport { ApplicationInsights };\r\nexport { AppInsightsCore, arrForEach, isNullOrUndefined, throwError, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nexport { SeverityLevel } from \"@microsoft/applicationinsights-common\";\r\nexport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\n//# sourceMappingURL=index.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 6\r\nexport var _DYN_CONNECTION_STRING = \"connectionString\"; // Count: 4\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 5\r\nexport var _DYN_USER_OVERRIDE_ENDPOI0 = \"userOverrideEndpointUrl\"; // Count: 5\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjAssign, ObjClass } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, asString as asString21, isArray, isBoolean, isError, isFunction, isNullOrUndefined, isNumber, isObject, isPlainObject, isString, isUndefined, objDeepFreeze, objDefine, objForEachKey, objHasOwn, strIndexOf, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_GET_ALL_RESPONSE_HEA5, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_REPLACE, _DYN_SPLIT, _DYN_STATUS, _DYN_SUBSTRING, _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// RESTRICT and AVOID circular dependencies you should not import other contained modules or export the contents of this file directly\r\n// Added to help with minification\r\nvar strGetPrototypeOf = \"getPrototypeOf\";\r\nvar rCamelCase = /-([a-z])/g;\r\nvar rNormalizeInvalid = /([^\\w\\d_$])/g;\r\nvar rLeadingNumeric = /^(\\d+[\\w\\d_$])/;\r\nexport var _getObjProto = Object[strGetPrototypeOf];\r\nexport function isNotUndefined(value) {\r\n    return !isUndefined(value);\r\n}\r\nexport function isNotNullOrUndefined(value) {\r\n    return !isNullOrUndefined(value);\r\n}\r\n/**\r\n * Validates that the string name conforms to the JS IdentifierName specification and if not\r\n * normalizes the name so that it would. This method does not identify or change any keywords\r\n * meaning that if you pass in a known keyword the same value will be returned.\r\n * This is a simplified version\r\n * @param name - The name to validate\r\n */\r\nexport function normalizeJsName(name) {\r\n    var value = name;\r\n    if (value && isString(value)) {\r\n        // CamelCase everything after the \"-\" and remove the dash\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rCamelCase, function (_all, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rNormalizeInvalid, \"_\");\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rLeadingNumeric, function (_all, match) {\r\n            return \"_\" + match;\r\n        });\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * A simple wrapper (for minification support) to check if the value contains the search string.\r\n * @param value - The string value to check for the existence of the search value\r\n * @param search - The value search within the value\r\n */\r\nexport function strContains(value, search) {\r\n    if (value && search) {\r\n        return strIndexOf(value, search) !== -1;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function toISOString(date) {\r\n    return date && date.toISOString() || \"\";\r\n}\r\nexport var deepFreeze = objDeepFreeze;\r\n/**\r\n * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n */\r\nexport function getExceptionName(object) {\r\n    if (isError(object)) {\r\n        return object[_DYN_NAME /* @min:%2ename */];\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Sets the provided value on the target instance using the field name when the provided chk function returns true, the chk\r\n * function will only be called if the new value is no equal to the original value.\r\n * @param target - The target object\r\n * @param field - The key of the target\r\n * @param value - The value to set\r\n * @param valChk - [Optional] Callback to check the value that if supplied will be called check if the new value can be set\r\n * @param srcChk - [Optional] Callback to check to original value that if supplied will be called if the new value should be set (if allowed)\r\n * @returns The existing or new value, depending what was set\r\n */\r\nexport function setValue(target, field, value, valChk, srcChk) {\r\n    var theValue = value;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (theValue !== value && (!srcChk || srcChk(theValue)) && (!valChk || valChk(value))) {\r\n            theValue = value;\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Returns the current value from the target object if not null or undefined otherwise sets the new value and returns it\r\n * @param target - The target object to return or set the default value\r\n * @param field - The key for the field to set on the target\r\n * @param defValue - [Optional] The value to set if not already present, when not provided a empty object will be added\r\n */\r\nexport function getSetValue(target, field, defValue) {\r\n    var theValue;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (!theValue && isNullOrUndefined(theValue)) {\r\n            // Supports having the default as null\r\n            theValue = !isUndefined(defValue) ? defValue : {};\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    else {\r\n        // Expanded for performance so we only check defValue if required\r\n        theValue = !isUndefined(defValue) ? defValue : {};\r\n    }\r\n    return theValue;\r\n}\r\nfunction _createProxyFunction(source, funcName) {\r\n    var srcFunc = null;\r\n    var src = null;\r\n    if (isFunction(source)) {\r\n        srcFunc = source;\r\n    }\r\n    else {\r\n        src = source;\r\n    }\r\n    return function () {\r\n        // Capture the original arguments passed to the method\r\n        var originalArguments = arguments;\r\n        if (srcFunc) {\r\n            src = srcFunc();\r\n        }\r\n        if (src) {\r\n            return src[funcName][_DYN_APPLY /* @min:%2eapply */](src, originalArguments);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Effectively assigns all enumerable properties (not just own properties) and functions (including inherited prototype) from\r\n * the source object to the target, it attempts to use proxy getters / setters (if possible) and proxy functions to avoid potential\r\n * implementation issues by assigning prototype functions as instance ones\r\n *\r\n * This method is the primary method used to \"update\" the snippet proxy with the ultimate implementations.\r\n *\r\n * Special ES3 Notes:\r\n * Updates (setting) of direct property values on the target or indirectly on the source object WILL NOT WORK PROPERLY, updates to the\r\n * properties of \"referenced\" object will work (target.context.newValue = 10 =\\> will be reflected in the source.context as it's the\r\n * same object). ES3 Failures: assigning target.myProp = 3 -\\> Won't change source.myProp = 3, likewise the reverse would also fail.\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param chkSet - An optional callback to determine whether a specific property/function should be proxied\r\n */\r\nexport function proxyAssign(target, source, chkSet) {\r\n    if (target && source && isObject(target) && isObject(source)) {\r\n        var _loop_1 = function (field) {\r\n            if (isString(field)) {\r\n                var value = source[field];\r\n                if (isFunction(value)) {\r\n                    if (!chkSet || chkSet(field, true, source, target)) {\r\n                        // Create a proxy function rather than just copying the (possible) prototype to the new object as an instance function\r\n                        target[field] = _createProxyFunction(source, field);\r\n                    }\r\n                }\r\n                else if (!chkSet || chkSet(field, false, source, target)) {\r\n                    if (objHasOwn(target, field)) {\r\n                        // Remove any previous instance property\r\n                        delete target[field];\r\n                    }\r\n                    objDefine(target, field, {\r\n                        g: function () {\r\n                            return source[field];\r\n                        },\r\n                        s: function (theValue) {\r\n                            source[field] = theValue;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        // effectively apply/proxy full source to the target instance\r\n        for (var field in source) {\r\n            _loop_1(field);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Creates a proxy function on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param name - The function name that will be added on the target\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param theFunc - The function name on the source that will be proxied on the target\r\n * @param overwriteTarget - If `false` this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctionAs(target, name, source, theFunc, overwriteTarget) {\r\n    if (target && name && source) {\r\n        if (overwriteTarget !== false || isUndefined(target[name])) {\r\n            target[name] = _createProxyFunction(source, theFunc);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Creates proxy functions on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param functionsToProxy - An array of function names that will be proxied on the target\r\n * @param overwriteTarget - If false this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctions(target, source, functionsToProxy, overwriteTarget) {\r\n    if (target && source && isObject(target) && isArray(functionsToProxy)) {\r\n        arrForEach(functionsToProxy, function (theFuncName) {\r\n            if (isString(theFuncName)) {\r\n                proxyFunctionAs(target, theFuncName, source, theFuncName, overwriteTarget);\r\n            }\r\n        });\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Simpler helper to create a dynamic class that implements the interface and populates the values with the defaults.\r\n * Only instance properties (hasOwnProperty) values are copied from the defaults to the new instance\r\n * @param defaults - Simple helper\r\n */\r\nexport function createClassFromInterface(defaults) {\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            var _this = this;\r\n            if (defaults) {\r\n                objForEachKey(defaults, function (field, value) {\r\n                    _this[field] = value;\r\n                });\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper function to assist with JIT performance for objects that have properties added / removed dynamically\r\n * this is primarily for chromium based browsers and has limited effects on Firefox and none of IE. Only call this\r\n * function after you have finished \"updating\" the object, calling this within loops reduces or defeats the benefits.\r\n * This helps when iterating using for..in, objKeys() and objForEach()\r\n * @param theObject - The object to be optimized if possible\r\n */\r\nexport function optimizeObject(theObject) {\r\n    // V8 Optimization to cause the JIT compiler to create a new optimized object for looking up the own properties\r\n    // primarily for object with <= 19 properties for >= 20 the effect is reduced or non-existent\r\n    if (theObject && ObjAssign) {\r\n        theObject = ObjClass(ObjAssign({}, theObject));\r\n    }\r\n    return theObject;\r\n}\r\nexport function objExtend(obj1, obj2, obj3, obj4, obj5, obj6) {\r\n    // Variables\r\n    var theArgs = arguments;\r\n    var extended = theArgs[0] || {};\r\n    var argLen = theArgs[_DYN_LENGTH /* @min:%2elength */];\r\n    var deep = false;\r\n    var idx = 1;\r\n    // Check for \"Deep\" flag\r\n    if (argLen > 0 && isBoolean(extended)) {\r\n        deep = extended;\r\n        extended = theArgs[idx] || {};\r\n        idx++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (!isObject(extended)) {\r\n        extended = {};\r\n    }\r\n    // Loop through each remaining object and conduct a merge\r\n    for (; idx < argLen; idx++) {\r\n        var arg = theArgs[idx];\r\n        var isArgArray = isArray(arg);\r\n        var isArgObj = isObject(arg);\r\n        for (var prop in arg) {\r\n            var propOk = (isArgArray && (prop in arg)) || (isArgObj && objHasOwn(arg, prop));\r\n            if (!propOk) {\r\n                continue;\r\n            }\r\n            var newValue = arg[prop];\r\n            var isNewArray = void 0;\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && newValue && ((isNewArray = isArray(newValue)) || isPlainObject(newValue))) {\r\n                // Grab the current value of the extended object\r\n                var clone = extended[prop];\r\n                if (isNewArray) {\r\n                    if (!isArray(clone)) {\r\n                        // We can't \"merge\" an array with a non-array so overwrite the original\r\n                        clone = [];\r\n                    }\r\n                }\r\n                else if (!isPlainObject(clone)) {\r\n                    // We can't \"merge\" an object with a non-object\r\n                    clone = {};\r\n                }\r\n                // Never move the original objects always clone them\r\n                newValue = objExtend(deep, clone, newValue);\r\n            }\r\n            // Assign the new (or previous) value (unless undefined)\r\n            if (newValue !== undefined) {\r\n                extended[prop] = newValue;\r\n            }\r\n        }\r\n    }\r\n    return extended;\r\n}\r\nexport var asString = asString21;\r\n/**\r\n * Checks if the feature is enabled on not. If the feature is not defined, it will return the default state if provided or undefined.\r\n * If the feature is defined, it will check the mode and return true if the mode is enable or false if the mode is disable.\r\n * @param feature - The feature name to check\r\n * @param cfg - The configuration object to check the feature state against\r\n * @param sdkDefaultState - Optional default state to return if the feature is not defined\r\n * @returns True if the feature is enabled, false if the feature is disabled, or undefined if the feature is not defined and no default state is provided.\r\n */\r\nexport function isFeatureEnabled(feature, cfg, sdkDefaultState) {\r\n    var ft = cfg && cfg.featureOptIn && cfg.featureOptIn[feature];\r\n    if (feature && ft) {\r\n        var mode = ft.mode;\r\n        // NOTE: None will be considered as true\r\n        if (mode === 3 /* FeatureOptInMode.enable */) {\r\n            return true;\r\n        }\r\n        else if (mode === 2 /* FeatureOptInMode.disable */) {\r\n            return false;\r\n        }\r\n    }\r\n    // Return the default state if provided or undefined\r\n    return sdkDefaultState;\r\n}\r\nexport function getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nexport function formatErrorMessageXdr(xdr, message) {\r\n    if (xdr) {\r\n        return \"XDomainRequest,Response:\" + getResponseText(xdr) || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function formatErrorMessageXhr(xhr, message) {\r\n    if (xhr) {\r\n        return \"XMLHttpRequest,Status:\" + xhr[_DYN_STATUS /* @min:%2estatus */] + \",Response:\" + getResponseText(xhr) || xhr.response || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function prependTransports(theTransports, newTransports) {\r\n    if (newTransports) {\r\n        if (isNumber(newTransports)) {\r\n            theTransports = [newTransports].concat(theTransports);\r\n        }\r\n        else if (isArray(newTransports)) {\r\n            theTransports = newTransports.concat(theTransports);\r\n        }\r\n    }\r\n    return theTransports;\r\n}\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n* Converts the XHR getAllResponseHeaders to a map containing the header key and value.\r\n* @internal\r\n*/\r\n// tslint:disable-next-line: align\r\nexport function convertAllHeadersToMap(headersString) {\r\n    var headers = {};\r\n    if (isString(headersString)) {\r\n        var headersArray = strTrim(headersString)[_DYN_SPLIT /* @min:%2esplit */](/[\\r\\n]+/);\r\n        arrForEach(headersArray, function (headerEntry) {\r\n            if (headerEntry) {\r\n                var idx = headerEntry[_DYN_INDEX_OF /* @min:%2eindexOf */](\": \");\r\n                if (idx !== -1) {\r\n                    // The new spec has the headers returning all as lowercase -- but not all browsers do this yet\r\n                    var header = strTrim(headerEntry.substring(0, idx))[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                    var value = strTrim(headerEntry[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                    headers[header] = value;\r\n                }\r\n                else {\r\n                    headers[strTrim(headerEntry)] = 1;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return headers;\r\n}\r\n/**\r\n* append the XHR headers.\r\n* @internal\r\n*/\r\nexport function _appendHeader(theHeaders, xhr, name) {\r\n    if (!theHeaders[name] && xhr && xhr.getResponseHeader) {\r\n        var value = xhr.getResponseHeader(name);\r\n        if (value) {\r\n            theHeaders[name] = strTrim(value);\r\n        }\r\n    }\r\n    return theHeaders;\r\n}\r\nvar STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nvar STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nvar STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\n/**\r\n* get the XHR getAllResponseHeaders.\r\n* @internal\r\n*/\r\nexport function _getAllResponseHeaders(xhr, isOneDs) {\r\n    var theHeaders = {};\r\n    if (!xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]) {\r\n        // Firefox 2-63 doesn't have getAllResponseHeaders function but it does have getResponseHeader\r\n        // Only call these if getAllResponseHeaders doesn't exist, otherwise we can get invalid response errors\r\n        // as collector is not currently returning the correct header to allow JS to access these headers\r\n        if (!!isOneDs) {\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_TIME_DELTA_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_SECONDS_HEADER);\r\n        }\r\n    }\r\n    else {\r\n        theHeaders = convertAllHeadersToMap(xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]());\r\n    }\r\n    return theHeaders;\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\n// TODO (jimmywarting): in the feature use conditional loading with top level await (requires 14.x)\n// Node has recently added whatwg stream into core\n\nimport './streams.cjs'\n\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\n/** @param {(Blob | Uint8Array)[]} parts */\nasync function * toIterator (parts, clone = true) {\n  for (const part of parts) {\n    if ('stream' in part) {\n      yield * (/** @type {AsyncIterableIterator<Uint8Array>} */ (part.stream()))\n    } else if (ArrayBuffer.isView(part)) {\n      if (clone) {\n        let position = part.byteOffset\n        const end = part.byteOffset + part.byteLength\n        while (position !== end) {\n          const size = Math.min(end - position, POOL_SIZE)\n          const chunk = part.buffer.slice(position, position + size)\n          position += chunk.byteLength\n          yield new Uint8Array(chunk)\n        }\n      } else {\n        yield part\n      }\n    /* c8 ignore next 10 */\n    } else {\n      // For blobs that have arrayBuffer but no stream method (nodes buffer.Blob)\n      let position = 0, b = (/** @type {Blob} */ (part))\n      while (position !== b.size) {\n        const chunk = b.slice(position, Math.min(b.size, position + POOL_SIZE))\n        const buffer = await chunk.arrayBuffer()\n        position += buffer.byteLength\n        yield new Uint8Array(buffer)\n      }\n    }\n  }\n}\n\nconst _Blob = class Blob {\n  /** @type {Array.<(Blob|Uint8Array)>} */\n  #parts = []\n  #type = ''\n  #size = 0\n  #endings = 'transparent'\n\n  /**\n   * The Blob() constructor returns a new Blob object. The content\n   * of the blob consists of the concatenation of the values given\n   * in the parameter array.\n   *\n   * @param {*} blobParts\n   * @param {{ type?: string, endings?: string }} [options]\n   */\n  constructor (blobParts = [], options = {}) {\n    if (typeof blobParts !== 'object' || blobParts === null) {\n      throw new TypeError('Failed to construct \\'Blob\\': The provided value cannot be converted to a sequence.')\n    }\n\n    if (typeof blobParts[Symbol.iterator] !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': The object must have a callable @@iterator property.')\n    }\n\n    if (typeof options !== 'object' && typeof options !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': parameter 2 cannot convert to dictionary.')\n    }\n\n    if (options === null) options = {}\n\n    const encoder = new TextEncoder()\n    for (const element of blobParts) {\n      let part\n      if (ArrayBuffer.isView(element)) {\n        part = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength))\n      } else if (element instanceof ArrayBuffer) {\n        part = new Uint8Array(element.slice(0))\n      } else if (element instanceof Blob) {\n        part = element\n      } else {\n        part = encoder.encode(`${element}`)\n      }\n\n      this.#size += ArrayBuffer.isView(part) ? part.byteLength : part.size\n      this.#parts.push(part)\n    }\n\n    this.#endings = `${options.endings === undefined ? 'transparent' : options.endings}`\n    const type = options.type === undefined ? '' : String(options.type)\n    this.#type = /^[\\x20-\\x7E]*$/.test(type) ? type : ''\n  }\n\n  /**\n   * The Blob interface's size property returns the\n   * size of the Blob in bytes.\n   */\n  get size () {\n    return this.#size\n  }\n\n  /**\n   * The type property of a Blob object returns the MIME type of the file.\n   */\n  get type () {\n    return this.#type\n  }\n\n  /**\n   * The text() method in the Blob interface returns a Promise\n   * that resolves with a string containing the contents of\n   * the blob, interpreted as UTF-8.\n   *\n   * @return {Promise<string>}\n   */\n  async text () {\n    // More optimized than using this.arrayBuffer()\n    // that requires twice as much ram\n    const decoder = new TextDecoder()\n    let str = ''\n    for await (const part of toIterator(this.#parts, false)) {\n      str += decoder.decode(part, { stream: true })\n    }\n    // Remaining\n    str += decoder.decode()\n    return str\n  }\n\n  /**\n   * The arrayBuffer() method in the Blob interface returns a\n   * Promise that resolves with the contents of the blob as\n   * binary data contained in an ArrayBuffer.\n   *\n   * @return {Promise<ArrayBuffer>}\n   */\n  async arrayBuffer () {\n    // Easier way... Just a unnecessary overhead\n    // const view = new Uint8Array(this.size);\n    // await this.stream().getReader({mode: 'byob'}).read(view);\n    // return view.buffer;\n\n    const data = new Uint8Array(this.size)\n    let offset = 0\n    for await (const chunk of toIterator(this.#parts, false)) {\n      data.set(chunk, offset)\n      offset += chunk.length\n    }\n\n    return data.buffer\n  }\n\n  stream () {\n    const it = toIterator(this.#parts, true)\n\n    return new globalThis.ReadableStream({\n      // @ts-ignore\n      type: 'bytes',\n      async pull (ctrl) {\n        const chunk = await it.next()\n        chunk.done ? ctrl.close() : ctrl.enqueue(chunk.value)\n      },\n\n      async cancel () {\n        await it.return()\n      }\n    })\n  }\n\n  /**\n   * The Blob interface's slice() method creates and returns a\n   * new Blob object which contains data from a subset of the\n   * blob on which it's called.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @param {string} [type]\n   */\n  slice (start = 0, end = this.size, type = '') {\n    const { size } = this\n\n    let relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size)\n    let relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size)\n\n    const span = Math.max(relativeEnd - relativeStart, 0)\n    const parts = this.#parts\n    const blobParts = []\n    let added = 0\n\n    for (const part of parts) {\n      // don't add the overflow to new blobParts\n      if (added >= span) {\n        break\n      }\n\n      const size = ArrayBuffer.isView(part) ? part.byteLength : part.size\n      if (relativeStart && size <= relativeStart) {\n        // Skip the beginning and change the relative\n        // start & end position as we skip the unwanted parts\n        relativeStart -= size\n        relativeEnd -= size\n      } else {\n        let chunk\n        if (ArrayBuffer.isView(part)) {\n          chunk = part.subarray(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.byteLength\n        } else {\n          chunk = part.slice(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.size\n        }\n        relativeEnd -= size\n        blobParts.push(chunk)\n        relativeStart = 0 // All next sequential parts should start at 0\n      }\n    }\n\n    const blob = new Blob([], { type: String(type).toLowerCase() })\n    blob.#size = span\n    blob.#parts = blobParts\n\n    return blob\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return (\n      object &&\n      typeof object === 'object' &&\n      typeof object.constructor === 'function' &&\n      (\n        typeof object.stream === 'function' ||\n        typeof object.arrayBuffer === 'function'\n      ) &&\n      /^(Blob|File)$/.test(object[Symbol.toStringTag])\n    )\n  }\n}\n\nObject.defineProperties(_Blob.prototype, {\n  size: { enumerable: true },\n  type: { enumerable: true },\n  slice: { enumerable: true }\n})\n\n/** @type {typeof globalThis.Blob} */\nexport const Blob = _Blob\nexport default Blob\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { dumpObj, isFunction, isUndefined } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_DIAG_LOG, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_PUSH, _DYN_REPLACE, _DYN_THROW_INTERNAL, _DYN_UNLOAD, _DYN_WARN_TO_CONSOLE } from \"../__DynamicConstants\";\r\nimport { getDebugExt } from \"./DbgExtensionUtils\";\r\nimport { getConsole, getJSON, hasJSON } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar STR_WARN_TO_CONSOLE = \"warnToConsole\";\r\n/**\r\n * For user non actionable traces use AI Internal prefix.\r\n */\r\nvar AiNonUserActionablePrefix = \"AI (Internal): \";\r\n/**\r\n * Prefix of the traces in portal.\r\n */\r\nvar AiUserActionablePrefix = \"AI: \";\r\n/**\r\n *  Session storage key for the prefix for the key indicating message type already logged\r\n */\r\nvar AIInternalMessagePrefix = \"AITR_\";\r\nvar defaultValues = {\r\n    loggingLevelConsole: 0,\r\n    loggingLevelTelemetry: 1,\r\n    maxMessageLimit: 25,\r\n    enableDebug: false\r\n};\r\nvar _logFuncs = (_a = {},\r\n    _a[0 /* eLoggingSeverity.DISABLED */] = null,\r\n    _a[1 /* eLoggingSeverity.CRITICAL */] = \"errorToConsole\",\r\n    _a[2 /* eLoggingSeverity.WARNING */] = STR_WARN_TO_CONSOLE,\r\n    _a[3 /* eLoggingSeverity.DEBUG */] = \"debugToConsole\",\r\n    _a);\r\nfunction _sanitizeDiagnosticText(text) {\r\n    if (text) {\r\n        return \"\\\"\" + text[_DYN_REPLACE /* @min:%2ereplace */](/\\\"/g, STR_EMPTY) + \"\\\"\";\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _logToConsole(func, message) {\r\n    var theConsole = getConsole();\r\n    if (!!theConsole) {\r\n        var logFunc = \"log\";\r\n        if (theConsole[func]) {\r\n            logFunc = func;\r\n        }\r\n        if (isFunction(theConsole[logFunc])) {\r\n            theConsole[logFunc](message);\r\n        }\r\n    }\r\n}\r\nvar _InternalLogMessage = /** @class */ (function () {\r\n    function _InternalLogMessage(msgId, msg, isUserAct, properties) {\r\n        if (isUserAct === void 0) { isUserAct = false; }\r\n        var _self = this;\r\n        _self[_DYN_MESSAGE_ID /* @min:%2emessageId */] = msgId;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] =\r\n            (isUserAct ? AiUserActionablePrefix : AiNonUserActionablePrefix) +\r\n                msgId;\r\n        var strProps = STR_EMPTY;\r\n        if (hasJSON()) {\r\n            strProps = getJSON().stringify(properties);\r\n        }\r\n        var diagnosticText = (msg ? \" message:\" + _sanitizeDiagnosticText(msg) : STR_EMPTY) +\r\n            (properties ? \" props:\" + _sanitizeDiagnosticText(strProps) : STR_EMPTY);\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] += diagnosticText;\r\n    }\r\n    _InternalLogMessage.dataType = \"MessageData\";\r\n    return _InternalLogMessage;\r\n}());\r\nexport { _InternalLogMessage };\r\nexport function safeGetLogger(core, config) {\r\n    return (core || {})[_DYN_LOGGER /* @min:%2elogger */] || new DiagnosticLogger(config);\r\n}\r\nvar DiagnosticLogger = /** @class */ (function () {\r\n    function DiagnosticLogger(config) {\r\n        this.identifier = \"DiagnosticLogger\";\r\n        /**\r\n         * The internal logging queue\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * Count of internal messages sent\r\n         */\r\n        var _messageCount = 0;\r\n        /**\r\n         * Holds information about what message types were already logged to console or sent to server.\r\n         */\r\n        var _messageLogged = {};\r\n        var _loggingLevelConsole;\r\n        var _loggingLevelTelemetry;\r\n        var _maxInternalMessageLimit;\r\n        var _enableDebug;\r\n        var _unloadHandler;\r\n        dynamicProto(DiagnosticLogger, this, function (_self) {\r\n            _unloadHandler = _setDefaultsFromConfig(config || {});\r\n            _self.consoleLoggingLevel = function () { return _loggingLevelConsole; };\r\n            /**\r\n             * This method will throw exceptions in debug mode or attempt to log the error as a console warning.\r\n             * @param severity - The severity of the log message\r\n             * @param message  - The log message.\r\n             */\r\n            _self[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */] = function (severity, msgId, msg, properties, isUserAct) {\r\n                if (isUserAct === void 0) { isUserAct = false; }\r\n                var message = new _InternalLogMessage(msgId, msg, isUserAct, properties);\r\n                if (_enableDebug) {\r\n                    throw dumpObj(message);\r\n                }\r\n                else {\r\n                    // Get the logging function and fallback to warnToConsole of for some reason errorToConsole doesn't exist\r\n                    var logFunc = _logFuncs[severity] || STR_WARN_TO_CONSOLE;\r\n                    if (!isUndefined(message[_DYN_MESSAGE /* @min:%2emessage */])) {\r\n                        if (isUserAct) {\r\n                            // check if this message type was already logged to console for this page view and if so, don't log it again\r\n                            var messageKey = +message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                            if (!_messageLogged[messageKey] && _loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                _messageLogged[messageKey] = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Only log traces if the console Logging Level is >= the throwInternal severity level\r\n                            if (_loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                            }\r\n                        }\r\n                        _logInternalMessage(severity, message);\r\n                    }\r\n                    else {\r\n                        _debugExtMsg(\"throw\" + (severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"Critical\" : \"Warning\"), message);\r\n                    }\r\n                }\r\n            };\r\n            _self.debugToConsole = function (message) {\r\n                _logToConsole(\"debug\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */] = function (message) {\r\n                _logToConsole(\"warn\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self.errorToConsole = function (message) {\r\n                _logToConsole(\"error\", message);\r\n                _debugExtMsg(\"error\", message);\r\n            };\r\n            _self.resetInternalMessageCount = function () {\r\n                _messageCount = 0;\r\n                _messageLogged = {};\r\n            };\r\n            _self.logInternalMessage = _logInternalMessage;\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                _unloadHandler && _unloadHandler.rm();\r\n                _unloadHandler = null;\r\n            };\r\n            function _logInternalMessage(severity, message) {\r\n                if (_areInternalMessagesThrottled()) {\r\n                    return;\r\n                }\r\n                // check if this message type was already logged for this session and if so, don't log it again\r\n                var logMessage = true;\r\n                var messageKey = AIInternalMessagePrefix + message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                // if the session storage is not available, limit to only one message type per page view\r\n                if (_messageLogged[messageKey]) {\r\n                    logMessage = false;\r\n                }\r\n                else {\r\n                    _messageLogged[messageKey] = true;\r\n                }\r\n                if (logMessage) {\r\n                    // Push the event in the internal queue\r\n                    if (severity <= _loggingLevelTelemetry) {\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](message);\r\n                        _messageCount++;\r\n                        _debugExtMsg((severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"error\" : \"warn\"), message);\r\n                    }\r\n                    // When throttle limit reached, send a special event\r\n                    if (_messageCount === _maxInternalMessageLimit) {\r\n                        var throttleLimitMessage = \"Internal events throttle limit per PageView reached for this app.\";\r\n                        var throttleMessage = new _InternalLogMessage(23 /* _eInternalMessageId.MessageLimitPerPVExceeded */, throttleLimitMessage, false);\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](throttleMessage);\r\n                        if (severity === 1 /* eLoggingSeverity.CRITICAL */) {\r\n                            _self.errorToConsole(throttleLimitMessage);\r\n                        }\r\n                        else {\r\n                            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](throttleLimitMessage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _setDefaultsFromConfig(config) {\r\n                // make sure the config is dynamic\r\n                return onConfigChange(createDynamicConfig(config, defaultValues, _self).cfg, function (details) {\r\n                    var config = details.cfg;\r\n                    _loggingLevelConsole = config[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */];\r\n                    _loggingLevelTelemetry = config.loggingLevelTelemetry;\r\n                    _maxInternalMessageLimit = config.maxMessageLimit;\r\n                    _enableDebug = config.enableDebug;\r\n                });\r\n            }\r\n            function _areInternalMessagesThrottled() {\r\n                return _messageCount >= _maxInternalMessageLimit;\r\n            }\r\n            function _debugExtMsg(name, data) {\r\n                var dbgExt = getDebugExt(config || {});\r\n                if (dbgExt && dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */]) {\r\n                    dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */](name, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for DiagnosticLogger.prototype.consoleLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.throwInternal.\r\n// Removed Stub for DiagnosticLogger.prototype.debugToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.warnToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.errorToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.resetInternalMessageCount.\r\n// Removed Stub for DiagnosticLogger.prototype.logInternalMessage.\r\n// Removed Stub for DiagnosticLogger.prototype.unload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    DiagnosticLogger.__ieDyn=1;\n\n    return DiagnosticLogger;\r\n}());\r\nexport { DiagnosticLogger };\r\nfunction _getLogger(logger) {\r\n    return (logger || new DiagnosticLogger());\r\n}\r\n/**\r\n * This is a helper method which will call throwInternal on the passed logger, will throw exceptions in\r\n * debug mode or attempt to log the error as a console warning. This helper is provided mostly to better\r\n * support minification as logger.throwInternal() will not compress the publish \"throwInternal\" used throughout\r\n * the code.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity - The severity of the log message\r\n * @param message  - The log message.\r\n */\r\nexport function _throwInternal(logger, severity, msgId, msg, properties, isUserAct) {\r\n    if (isUserAct === void 0) { isUserAct = false; }\r\n    _getLogger(logger)[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](severity, msgId, msg, properties, isUserAct);\r\n}\r\n/**\r\n * This is a helper method which will call warnToConsole on the passed logger with the provided message.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param message  - The log message.\r\n */\r\nexport function _warnToConsole(logger, message) {\r\n    _getLogger(logger)[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n}\r\n/**\r\n * Logs a message to the internal queue.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity  - The severity of the log message\r\n * @param message - The message to log.\r\n */\r\nexport function _logInternalMessage(logger, severity, message) {\r\n    _getLogger(logger).logInternalMessage(severity, message);\r\n}\r\n//# sourceMappingURL=DiagnosticLogger.js.map","/**\n * GoToServerHealthViewTool - Language Model Tool for opening the Server Health view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ServerHealthView } from '../admin/ServerHealthView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToServerHealthViewTool - Opens the Server Health panel\n */\nexport class GoToServerHealthViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Server Health View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToServerHealthViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ServerHealthView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Server Health View - showing Airflow server health status, scheduler status, and metadata database status')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToServerHealthViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Server Health View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrSlice, getLength } from \"@nevware21/ts-utils\";\r\nimport { _DYN_UNLOAD } from \"../__DynamicConstants\";\r\n/**\r\n * Run the unload function of the target object if it exists\r\n * @param target - The target object that contains the unload function\r\n * @param isAsync - The caller identifies whether it is expecting the operation to complete synchronously or asynchronously. Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @returns The result of the target function\r\n */\r\nexport function runTargetUnload(target, isAsync) {\r\n    if (target && target[_DYN_UNLOAD /* @min:%2eunload */]) {\r\n        return target[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n    }\r\n}\r\n/**\r\n * Call the unload function on all targets handling any returned [IPromise](https://nevware21.github.io/ts-async/typedoc/interfaces/IPromise.html)\r\n * / Promise before calling the next targets unload\r\n * @param targets - An array of the targets to unload\r\n * @param isAsync - The caller identifies whether it is expecting the operations to complete synchronously or asynchronously.  Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @param done - Optional callback function to call once all of the unload functions have been called.\r\n */\r\nexport function doUnloadAll(targets, isAsync, done) {\r\n    var result;\r\n    if (!done) {\r\n        result = createPromise(function (resolved) {\r\n            done = resolved;\r\n        });\r\n    }\r\n    if (targets && getLength(targets) > 0) {\r\n        doAwaitResponse(runTargetUnload(targets[0], isAsync), function () {\r\n            doUnloadAll(arrSlice(targets, 1), isAsync, done);\r\n        });\r\n    }\r\n    else {\r\n        done();\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=AsyncUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnum, createTypeMap } from \"@nevware21/ts-utils\";\r\n/**\r\n * Create an enum style object which has both the key \\=\\> value and value \\=\\> key mappings\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createEnumStyle = createEnum;\r\n/**\r\n * Create a 2 index map that maps an enum's key and value to the defined map value, X[\"key\"] \\=\\> mapValue and X[0] \\=\\> mapValue.\r\n * Generic values\r\n * - E = the const enum type (typeof eRequestHeaders);\r\n * - V = Identifies the valid values for the keys, this should include both the enum numeric and string key of the type. The\r\n * resulting \"Value\" of each entry identifies the valid values withing the assignments.\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createValueMap = createTypeMap;\r\n//# sourceMappingURL=EnumHelperFuncs.js.map","import * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IGetDagSourceCodeParams {\n    dagId: string;\n}\n\nexport class GetDagSourceCodeTool implements vscode.LanguageModelTool<IGetDagSourceCodeParams> {\n    constructor(private airflowClient: AirflowClientAdapter) {}\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagSourceCodeParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagSourceCodeTool.invoke');\n        \n        try {\n            const sourceCode = await this.airflowClient.getDagSourceCode(dagId);\n\n            const result = `## DAG Source Code: ${dagId}\n\n\\`\\`\\`python\n${sourceCode}\n\\`\\`\\`\n\n**Total Lines:** ${sourceCode.split('\\n').length}\n\nThe source code has been retrieved successfully. You can analyze it for:\n- DAG structure and task dependencies\n- Operator configurations\n- Schedule and retry settings\n- Custom logic and parameters\n- Potential issues or improvements\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(result)\n            ]);\n        } catch (error) {\n            const errorMessage = `Failed to retrieve source code for DAG '${dagId}': ${error instanceof Error ? error.message : String(error)}`;\n            \n            // Track invocation error\n            Telemetry.Current.sendError('GetDagSourceCodeTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagSourceCodeParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: `Retrieving source code for DAG '${options.input.dagId}'...`\n        };\n    }\n}\n","/**\n * GetDagRunDetailTool - Language Model Tool for comprehensive DAG run analysis by run ID\n * \n * This tool retrieves comprehensive information about a specific DAG run including:\n * - DAG run details\n * - Task instances\n * - DAG source code\n * - Task logs\n * \n * It provides a complete analysis to help diagnose issues and understand execution.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n/**\n * Input parameters for analyzing a specific DAG run\n */\nexport interface IGetDagRunDetailParams {\n    dagId: string;\n    dagRunId: string;\n}\n\n/**\n * GetDagRunDetailTool - Implements vscode.LanguageModelTool for comprehensive DAG run analysis\n */\nexport class GetDagRunDetailTool implements vscode.LanguageModelTool<IGetDagRunDetailParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagRunDetailParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, dagRunId } = options.input;\n\n        return {\n            invocationMessage: `Analyzing DAG run '${dagRunId}' for DAG '${dagId}'...`\n        };\n    }\n\n    /**\n     * Execute comprehensive DAG run analysis\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagRunDetailParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagRunDetailTool.invoke');\n        \n        try {\n            // Step 1: Get task instances for this run\n            const taskInstances = await this.client.getTaskInstances(dagId, dagRunId);\n\n            if (!taskInstances || taskInstances.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No task instances found for DAG run '${dagRunId}' in DAG '${dagId}'.`)\n                ]);\n            }\n\n            // Step 2: Get DAG source code\n            let dagSourceCode = 'N/A';\n            try {\n                dagSourceCode = await this.client.getDagSource(dagId);\n            } catch (error) {\n                dagSourceCode = `Failed to retrieve source code: ${error instanceof Error ? error.message : String(error)}`;\n            }\n\n            // Step 3: Get logs for each task (focusing on failed tasks first, then all)\n            const taskLogs: { task_id: string; state: string; log: string }[] = [];\n            \n            // Sort tasks: failed first, then by execution order\n            const sortedTasks = [...taskInstances].sort((a: any, b: any) => {\n                const failedStates = ['failed', 'upstream_failed'];\n                const aFailed = failedStates.includes(a.state);\n                const bFailed = failedStates.includes(b.state);\n                \n                if (aFailed && !bFailed) return -1;\n                if (!aFailed && bFailed) return 1;\n                return 0;\n            });\n\n            // Get logs for up to 5 tasks (prioritizing failed tasks)\n            const tasksToLog = sortedTasks.slice(0, 5);\n            for (const task of tasksToLog) {\n                try {\n                    const log = await this.client.getTaskLog(\n                        dagId, \n                        dagRunId, \n                        task.task_id, \n                        task.try_number?.toString() || '1'\n                    );\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: log\n                    });\n                } catch (error) {\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: `Failed to retrieve log: ${error instanceof Error ? error.message : String(error)}`\n                    });\n                }\n            }\n\n            // Build DAG run object from task instances\n            const dagRun = {\n                dag_id: dagId,\n                dag_run_id: dagRunId,\n                state: this.deriveDagRunState(taskInstances),\n                execution_date: taskInstances[0]?.execution_date || 'N/A',\n                logical_date: taskInstances[0]?.execution_date || 'N/A',\n                start_date: this.getEarliestStartDate(taskInstances),\n                end_date: this.getLatestEndDate(taskInstances)\n            };\n\n            // Build comprehensive analysis report\n            let report = this.buildAnalysisReport(dagId, dagRun, taskInstances, dagSourceCode, taskLogs);\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(report)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to analyze DAG run\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The DAG run ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagRunDetailTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Derive overall DAG run state from task instances\n     */\n    private deriveDagRunState(taskInstances: any[]): string {\n        if (taskInstances.some((t: any) => t.state === 'failed')) return 'failed';\n        if (taskInstances.some((t: any) => t.state === 'running')) return 'running';\n        if (taskInstances.some((t: any) => t.state === 'queued')) return 'queued';\n        if (taskInstances.every((t: any) => t.state === 'success')) return 'success';\n        return 'unknown';\n    }\n\n    /**\n     * Get earliest start date from task instances\n     */\n    private getEarliestStartDate(taskInstances: any[]): string | undefined {\n        const startDates = taskInstances\n            .filter((t: any) => t.start_date)\n            .map((t: any) => new Date(t.start_date).getTime());\n        \n        if (startDates.length === 0) return undefined;\n        \n        const earliest = Math.min(...startDates);\n        return new Date(earliest).toISOString();\n    }\n\n    /**\n     * Get latest end date from task instances\n     */\n    private getLatestEndDate(taskInstances: any[]): string | undefined {\n        const endDates = taskInstances\n            .filter((t: any) => t.end_date)\n            .map((t: any) => new Date(t.end_date).getTime());\n        \n        if (endDates.length === 0) return undefined;\n        \n        const latest = Math.max(...endDates);\n        return new Date(latest).toISOString();\n    }\n\n    /**\n     * Build comprehensive analysis report\n     */\n    private buildAnalysisReport(\n        dagId: string,\n        dagRun: any,\n        taskInstances: any[],\n        dagSourceCode: string,\n        taskLogs: { task_id: string; state: string; log: string }[]\n    ): string {\n        let report = `#  Comprehensive DAG Run Analysis\\n\\n`;\n        report += `## DAG: ${dagId}\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 1: DAG Run Overview\n        report += `##  DAG Run Overview\\n\\n`;\n        report += `- **Run ID:** \\`${dagRun.dag_run_id}\\`\\n`;\n        report += `- **State:** ${this.getStatusEmoji(dagRun.state)} **${dagRun.state}**\\n`;\n        report += `- **Execution Date:** ${dagRun.execution_date}\\n`;\n        report += `- **Logical Date:** ${dagRun.logical_date}\\n`;\n        \n        if (dagRun.start_date) {\n            report += `- **Start Date:** ${dagRun.start_date}\\n`;\n        }\n        if (dagRun.end_date) {\n            report += `- **End Date:** ${dagRun.end_date}\\n`;\n            \n            // Calculate duration\n            const start = new Date(dagRun.start_date);\n            const end = new Date(dagRun.end_date);\n            const durationMs = end.getTime() - start.getTime();\n            const durationSec = Math.floor(durationMs / 1000);\n            const minutes = Math.floor(durationSec / 60);\n            const seconds = durationSec % 60;\n            report += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n        }\n        \n        report += `\\n---\\n\\n`;\n\n        // Section 2: Task Instances Summary\n        report += `##  Task Instances (${taskInstances.length} tasks)\\n\\n`;\n        \n        // Group tasks by state\n        const tasksByState: { [state: string]: any[] } = {};\n        taskInstances.forEach((task: any) => {\n            const state = task.state || 'unknown';\n            if (!tasksByState[state]) {\n                tasksByState[state] = [];\n            }\n            tasksByState[state].push(task);\n        });\n\n        // Display summary by state\n        for (const [state, tasks] of Object.entries(tasksByState)) {\n            report += `### ${this.getStatusEmoji(state)} ${state} (${tasks.length})\\n`;\n            tasks.forEach((task: any) => {\n                report += `- **${task.task_id}**`;\n                if (task.duration) {\n                    report += ` - Duration: ${Math.round(task.duration)}s`;\n                }\n                if (task.start_date) {\n                    report += ` - Started: ${task.start_date}`;\n                }\n                report += `\\n`;\n            });\n            report += `\\n`;\n        }\n\n        report += `---\\n\\n`;\n\n        // Section 3: Task Logs Analysis\n        if (taskLogs.length > 0) {\n            report += `##  Task Logs (Top ${taskLogs.length} tasks)\\n\\n`;\n            \n            taskLogs.forEach((taskLog, index) => {\n                report += `### ${index + 1}. Task: ${taskLog.task_id} (${this.getStatusEmoji(taskLog.state)} ${taskLog.state})\\n\\n`;\n                report += `\\`\\`\\`\\n${taskLog.log}\\n\\`\\`\\`\\n\\n`;\n            });\n\n            report += `---\\n\\n`;\n        }\n\n        // Section 4: DAG Source Code\n        report += `##  DAG Source Code\\n\\n`;\n        report += `\\`\\`\\`python\\n${dagSourceCode}\\n\\`\\`\\`\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 5: Raw Data\n        report += `##  Raw Data (JSON)\\n\\n`;\n        report += `### DAG Run\\n\\`\\`\\`json\\n${JSON.stringify(dagRun, null, 2)}\\n\\`\\`\\`\\n\\n`;\n        report += `### Task Instances\\n\\`\\`\\`json\\n${JSON.stringify(taskInstances, null, 2)}\\n\\`\\`\\`\\n\\n`;\n\n        // Section 6: Analysis Prompt\n        report += `---\\n\\n`;\n        report += `##  Analysis Request\\n\\n`;\n        report += `Please analyze the above information and provide:\\n`;\n        report += `1. **Summary of Execution:** What happened during this DAG run?\\n`;\n        report += `2. **Issues Identified:** What errors or problems occurred?\\n`;\n        report += `3. **Root Cause Analysis:** What likely caused any failures?\\n`;\n        report += `4. **Recommendations:** How can these issues be resolved?\\n`;\n        report += `5. **Code Review:** Any issues in the DAG code that need attention?\\n`;\n\n        return report;\n    }\n\n    /**\n     * Helper to get emoji for task/run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': '',\n            'none': '',\n            'unknown': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","/**\n * AnalyseDagLatestRunTool - Language Model Tool for comprehensive DAG run analysis\n * \n * This tool retrieves comprehensive information about the latest DAG run including:\n * - DAG run details\n * - Task instances\n * - DAG source code\n * - Task logs\n * \n * It provides a complete analysis to help diagnose issues and understand execution.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for analyzing latest DAG run\n */\nexport interface IAnalyseDagLatestRunParams {\n    dagId: string;\n}\n\n/**\n * AnalyseDagLatestRunTool - Implements vscode.LanguageModelTool for comprehensive DAG analysis\n */\nexport class AnalyseDagLatestRunTool implements vscode.LanguageModelTool<IAnalyseDagLatestRunParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IAnalyseDagLatestRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId } = options.input;\n\n        return {\n            invocationMessage: `Analyzing latest run for DAG '${dagId}'...`\n        };\n    }\n\n    /**\n     * Execute comprehensive DAG run analysis\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IAnalyseDagLatestRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('AnalyseDagLatestRunTool.invoke');\n        \n        try {\n            // Step 1: Get the latest DAG run\n            const dagRun = await this.client.getLatestDagRun(dagId);\n\n            if (!dagRun) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No DAG run found for '${dagId}'.`)\n                ]);\n            }\n\n            // Step 2: Get task instances for this run\n            const taskInstances = await this.client.getTaskInstances(dagId, dagRun.dag_run_id);\n\n            // Step 3: Get DAG source code\n            let dagSourceCode = 'N/A';\n            try {\n                dagSourceCode = await this.client.getDagSource(dagId);\n            } catch (error) {\n                dagSourceCode = `Failed to retrieve source code: ${error instanceof Error ? error.message : String(error)}`;\n            }\n\n            // Step 4: Get logs for each task (focusing on failed tasks first, then all)\n            const taskLogs: { task_id: string; state: string; log: string }[] = [];\n            \n            // Sort tasks: failed first, then by execution order\n            const sortedTasks = [...taskInstances].sort((a: any, b: any) => {\n                const failedStates = ['failed', 'upstream_failed'];\n                const aFailed = failedStates.includes(a.state);\n                const bFailed = failedStates.includes(b.state);\n                \n                if (aFailed && !bFailed) return -1;\n                if (!aFailed && bFailed) return 1;\n                return 0;\n            });\n\n            // Get logs for up to 5 tasks (prioritizing failed tasks)\n            const tasksToLog = sortedTasks.slice(0, 5);\n            for (const task of tasksToLog) {\n                try {\n                    const log = await this.client.getTaskLog(\n                        dagId, \n                        dagRun.dag_run_id, \n                        task.task_id, \n                        task.try_number?.toString() || '1'\n                    );\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: log\n                    });\n                } catch (error) {\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: `Failed to retrieve log: ${error instanceof Error ? error.message : String(error)}`\n                    });\n                }\n            }\n\n            // Build comprehensive analysis report\n            let report = this.buildAnalysisReport(dagId, dagRun, taskInstances, dagSourceCode, taskLogs);\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(report)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to analyze DAG run\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('AnalyseDagLatestRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Build comprehensive analysis report\n     */\n    private buildAnalysisReport(\n        dagId: string,\n        dagRun: any,\n        taskInstances: any[],\n        dagSourceCode: string,\n        taskLogs: { task_id: string; state: string; log: string }[]\n    ): string {\n        let report = `#  Comprehensive DAG Run Analysis\\n\\n`;\n        report += `## DAG: ${dagId}\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 1: DAG Run Overview\n        report += `##  DAG Run Overview\\n\\n`;\n        report += `- **Run ID:** \\`${dagRun.dag_run_id}\\`\\n`;\n        report += `- **State:** ${this.getStatusEmoji(dagRun.state)} **${dagRun.state}**\\n`;\n        report += `- **Execution Date:** ${dagRun.execution_date}\\n`;\n        report += `- **Logical Date:** ${dagRun.logical_date}\\n`;\n        \n        if (dagRun.start_date) {\n            report += `- **Start Date:** ${dagRun.start_date}\\n`;\n        }\n        if (dagRun.end_date) {\n            report += `- **End Date:** ${dagRun.end_date}\\n`;\n            \n            // Calculate duration\n            const start = new Date(dagRun.start_date);\n            const end = new Date(dagRun.end_date);\n            const durationMs = end.getTime() - start.getTime();\n            const durationSec = Math.floor(durationMs / 1000);\n            const minutes = Math.floor(durationSec / 60);\n            const seconds = durationSec % 60;\n            report += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n        }\n        \n        report += `\\n---\\n\\n`;\n\n        // Section 2: Task Instances Summary\n        report += `##  Task Instances (${taskInstances.length} tasks)\\n\\n`;\n        \n        // Group tasks by state\n        const tasksByState: { [state: string]: any[] } = {};\n        taskInstances.forEach((task: any) => {\n            const state = task.state || 'unknown';\n            if (!tasksByState[state]) {\n                tasksByState[state] = [];\n            }\n            tasksByState[state].push(task);\n        });\n\n        // Display summary by state\n        for (const [state, tasks] of Object.entries(tasksByState)) {\n            report += `### ${this.getStatusEmoji(state)} ${state} (${tasks.length})\\n`;\n            tasks.forEach((task: any) => {\n                report += `- **${task.task_id}**`;\n                if (task.duration) {\n                    report += ` - Duration: ${Math.round(task.duration)}s`;\n                }\n                if (task.start_date) {\n                    report += ` - Started: ${task.start_date}`;\n                }\n                report += `\\n`;\n            });\n            report += `\\n`;\n        }\n\n        report += `---\\n\\n`;\n\n        // Section 3: Task Logs Analysis\n        if (taskLogs.length > 0) {\n            report += `##  Task Logs (Top ${taskLogs.length} tasks)\\n\\n`;\n            \n            taskLogs.forEach((taskLog, index) => {\n                report += `### ${index + 1}. Task: ${taskLog.task_id} (${this.getStatusEmoji(taskLog.state)} ${taskLog.state})\\n\\n`;\n                report += `\\`\\`\\`\\n${taskLog.log}\\n\\`\\`\\`\\n\\n`;\n            });\n\n            report += `---\\n\\n`;\n        }\n\n        // Section 4: DAG Source Code\n        report += `##  DAG Source Code\\n\\n`;\n        report += `\\`\\`\\`python\\n${dagSourceCode}\\n\\`\\`\\`\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 5: Raw Data\n        report += `##  Raw Data (JSON)\\n\\n`;\n        report += `### DAG Run\\n\\`\\`\\`json\\n${JSON.stringify(dagRun, null, 2)}\\n\\`\\`\\`\\n\\n`;\n        report += `### Task Instances\\n\\`\\`\\`json\\n${JSON.stringify(taskInstances, null, 2)}\\n\\`\\`\\`\\n\\n`;\n\n        // Section 6: Analysis Prompt\n        report += `---\\n\\n`;\n        report += `##  Analysis Request\\n\\n`;\n        report += `Please analyze the above information and provide:\\n`;\n        report += `1. **Summary of Execution:** What happened during this DAG run?\\n`;\n        report += `2. **Issues Identified:** What errors or problems occurred?\\n`;\n        report += `3. **Root Cause Analysis:** What likely caused any failures?\\n`;\n        report += `4. **Recommendations:** How can these issues be resolved?\\n`;\n        report += `5. **Code Review:** Any issues in the DAG code that need attention?\\n`;\n\n        return report;\n    }\n\n    /**\n     * Helper to get emoji for task/run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': '',\n            'none': '',\n            'unknown': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* AppInsightsCore.ts\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { AppInsightsCore as InternalCore, _throwInternal, createDynamicConfig, doPerf, dumpObj, throwError } from \"@microsoft/applicationinsights-core-js\";\r\nimport { objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { STR_DEFAULT_ENDPOINT_URL, STR_EMPTY, STR_PROPERTIES, STR_VERSION } from \"./InternalConstants\";\r\nimport { FullVersionString, getTime, isLatency } from \"./Utils\";\r\nimport { _DYN_INDEX_OF, _DYN_INITIALIZE, _DYN_POLL_INTERNAL_LOGS, _DYN_TIMINGS } from \"./__DynamicConstants\";\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze({\r\n    endpointUrl: STR_DEFAULT_ENDPOINT_URL,\r\n    propertyStorageOverride: { isVal: _chkPropOverride }\r\n});\r\nfunction _chkPropOverride(propertyStorageOverride) {\r\n    // Validate property storage override\r\n    if (propertyStorageOverride && (!propertyStorageOverride.getProperty || !propertyStorageOverride.setProperty)) {\r\n        throwError(\"Invalid property storage override passed.\");\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.initialize\"; }, function () {\r\n                    try {\r\n                        _base[_DYN_INITIALIZE /* @min:%2einitialize */](createDynamicConfig(config, defaultConfig, logger || _self.logger, false).cfg, extensions, logger, notificationManager);\r\n                    }\r\n                    catch (e) {\r\n                        var logger_1 = _self.logger;\r\n                        var message = dumpObj(e);\r\n                        if (message[_DYN_INDEX_OF /* @min:%2eindexOf */](\"channels\") !== -1) {\r\n                            // Add some additional context to the underlying reported error\r\n                            message += \"\\n - Channels must be provided through config.channels only!\";\r\n                        }\r\n                        _throwInternal(logger_1, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"SDK Initialization Failed - no telemetry will be sent: \" + message);\r\n                    }\r\n                }, function () { return ({ config: config, extensions: extensions, logger: logger, notificationManager: notificationManager }); });\r\n            };\r\n            _self.track = function (item) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.track\"; }, function () {\r\n                    var telemetryItem = item;\r\n                    if (telemetryItem) {\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */].trackStart = getTime();\r\n                        if (!isLatency(telemetryItem.latency)) {\r\n                            telemetryItem.latency = 1 /* EventLatencyValue.Normal */;\r\n                        }\r\n                        var itemExt = telemetryItem.ext = telemetryItem.ext || {};\r\n                        itemExt.sdk = itemExt.sdk || {};\r\n                        itemExt.sdk.ver = FullVersionString;\r\n                        var baseData = telemetryItem.baseData = telemetryItem.baseData || {};\r\n                        baseData[STR_PROPERTIES /* @min:%2eproperties */] = baseData[STR_PROPERTIES /* @min:%2eproperties */] || {};\r\n                        var itemProperties = baseData[STR_PROPERTIES /* @min:%2eproperties */];\r\n                        itemProperties[STR_VERSION] = itemProperties[STR_VERSION] || _self.pluginVersionString || STR_EMPTY;\r\n                    }\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: item }); }, !(item.sync));\r\n            };\r\n            _self[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */] = function (eventName) {\r\n                return _base[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */](eventName || \"InternalLog\");\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(InternalCore));\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* Utils.ts\r\n* @author  Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n* File containing utility functions.\r\n*/\r\nimport { arrForEach, getGlobalInst, getNavigator, hasDocument, hasWindow, isArray, isBoolean, isNullOrUndefined, isNumber, isObject, isReactNative, isString, isUndefined, newGuid, objForEachKey, perfNow } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ObjProto, strShimObject } from \"@microsoft/applicationinsights-shims\";\r\nimport { strIndexOf, strLeft } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { _DYN_INDEX_OF, _DYN_LENGTH, _DYN_PROCESS_TELEMETRY_ST0, _DYN_TIMINGS, _DYN_VALUE } from \"./__DynamicConstants\";\r\nexport var Version = '4.3.11';\r\nexport var FullVersionString = \"1DS-Web-JS-\" + Version;\r\nvar ObjHasOwnProperty = ObjProto.hasOwnProperty;\r\n// Defining here so we don't need to take (import) the ApplicationInsights Common module\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n// If value is array just get the type for the first element\r\nvar _fieldTypeEventPropMap = (_a = {},\r\n    _a[0 /* FieldValueSanitizerType.NotSet */] = 0 /* eEventPropertyType.Unspecified */,\r\n    _a[2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a);\r\n/**\r\n * @ignore\r\n */\r\n// let _uaDisallowsSameSiteNone = null;\r\nvar uInt8ArraySupported = null;\r\n// var _areCookiesAvailable: boolean | undefined;\r\n/**\r\n * Checks if document object is available\r\n */\r\nexport var isDocumentObjectAvailable = hasDocument();\r\n/**\r\n * Checks if window object is available\r\n */\r\nexport var isWindowObjectAvailable = hasWindow();\r\n/**\r\n * Checks if value is assigned to the given param.\r\n * @param value - The token from which the tenant id is to be extracted.\r\n * @returns True/false denoting if value is assigned to the param.\r\n */\r\nexport function isValueAssigned(value) {\r\n    /// <summary> takes a value and checks for undefined, null and empty string </summary>\r\n    /// <param type=\"any\"> value to be tested </param>\r\n    /// <returns> true if value is null undefined or emptyString </returns>\r\n    return !(value === STR_EMPTY || isNullOrUndefined(value));\r\n}\r\n/**\r\n * Gets the tenant id from the tenant token.\r\n * @param apiKey - The token from which the tenant id is to be extracted.\r\n * @returns The tenant id.\r\n */\r\nexport function getTenantId(apiKey) {\r\n    if (apiKey) {\r\n        var indexTenantId = strIndexOf(apiKey, \"-\");\r\n        if (indexTenantId > -1) {\r\n            return strLeft(apiKey, indexTenantId);\r\n        }\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Checks if Uint8Array are available in the current environment. Safari and Firefox along with\r\n * ReactNative are known to not support Uint8Array properly.\r\n * @returns True if available, false otherwise.\r\n */\r\nexport function isUint8ArrayAvailable() {\r\n    if (uInt8ArraySupported === null) {\r\n        uInt8ArraySupported = !isUndefined(Uint8Array) && !isSafariOrFirefox() && !isReactNative();\r\n    }\r\n    return uInt8ArraySupported;\r\n}\r\n/**\r\n * Checks if the value is a valid EventLatency.\r\n * @param value - The value that needs to be checked.\r\n * @returns True if the value is in AWTEventLatency, false otherwise.\r\n */\r\nexport function isLatency(value) {\r\n    if (value && isNumber(value) && value >= 1 /* EventLatencyValue.Normal */ && value <= 4 /* EventLatencyValue.Immediate */) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Sanitizes the Property. It checks the that the property name and value are valid. It also\r\n * checks/populates the correct type and pii of the property value.\r\n * @param name - property name                          - The property name.\r\n * @param property - The property value or an IEventProperty containing value,\r\n * type ,pii and customer content.\r\n * @returns IEventProperty containing valid name, value, pii and type or null if invalid.\r\n */\r\nexport function sanitizeProperty(name, property, stringifyObjects) {\r\n    // Check that property is valid\r\n    if ((!property && !isValueAssigned(property)) || typeof name !== \"string\") {\r\n        return null;\r\n    }\r\n    // Perf optimization -- only need to get the type once not multiple times\r\n    var propType = typeof property;\r\n    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n    if (propType === \"string\" || propType === \"number\" || propType === \"boolean\" || isArray(property)) {\r\n        property = { value: property };\r\n    }\r\n    else if (propType === \"object\" && !ObjHasOwnProperty.call(property, \"value\")) {\r\n        property = { value: stringifyObjects ? JSON.stringify(property) : property };\r\n    }\r\n    else if (isNullOrUndefined(property[_DYN_VALUE /* @min:%2evalue */])\r\n        || property[_DYN_VALUE /* @min:%2evalue */] === STR_EMPTY || (!isString(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isNumber(property[_DYN_VALUE /* @min:%2evalue */]) && !isBoolean(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isArray(property[_DYN_VALUE /* @min:%2evalue */]))) {\r\n        // Since property is IEventProperty, we need to validate its value\r\n        return null;\r\n    }\r\n    // We need to check that if the property value is an array, it is valid\r\n    if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) &&\r\n        !isArrayValid(property[_DYN_VALUE /* @min:%2evalue */])) {\r\n        return null;\r\n    }\r\n    // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n    // If the value is a complex type like an array that can't be converted to string we will drop\r\n    // the property.\r\n    if (!isNullOrUndefined(property.kind)) {\r\n        if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) || !isValueKind(property.kind)) {\r\n            return null;\r\n        }\r\n        property[_DYN_VALUE /* @min:%2evalue */] = property[_DYN_VALUE /* @min:%2evalue */].toString();\r\n    }\r\n    return property;\r\n}\r\nexport function getCommonSchemaMetaData(value, kind, type) {\r\n    var encodedTypeValue = -1;\r\n    if (!isUndefined(value)) {\r\n        if (kind > 0) {\r\n            if (kind === 32 /* eValueKind.CustomerContent_GenericContent */) {\r\n                // encode customer content. Value can only be string. bit 13-16 are for cc\r\n                encodedTypeValue = (1 << 13);\r\n            }\r\n            else if (kind <= 13) {\r\n                // encode PII. Value can only be string. bits 5-12 are for Pii\r\n                encodedTypeValue = (kind << 5);\r\n            }\r\n        }\r\n        // isDataType checks that the \"type\" is a number so we don't need to check for undefined\r\n        if (isDataType(type)) {\r\n            // Data Type is provided and valid, so use that\r\n            if (encodedTypeValue === -1) {\r\n                // Don't return -1\r\n                encodedTypeValue = 0;\r\n            }\r\n            encodedTypeValue |= type;\r\n        }\r\n        else {\r\n            var propType = _fieldTypeEventPropMap[getFieldValueType(value)] || -1;\r\n            if (encodedTypeValue !== -1 && propType !== -1) {\r\n                // pii exists so we must return correct type\r\n                encodedTypeValue |= propType;\r\n            }\r\n            else if (propType === 6 /* eEventPropertyType.Double */) {\r\n                encodedTypeValue = propType;\r\n            }\r\n        }\r\n    }\r\n    return encodedTypeValue;\r\n}\r\n/**\r\n * Helper to get and decode the cookie value using decodeURIComponent, this is for historical\r\n * backward compatibility where the document.cookie value was decoded before parsing.\r\n * @param cookieMgr - The cookie manager to use\r\n * @param name - The name of the cookie to get\r\n * @param decode - A flag to indicate whether the cookie value should be decoded\r\n * @returns The decoded cookie value (if available) otherwise an empty string.\r\n */\r\nexport function getCookieValue(cookieMgr, name, decode) {\r\n    if (decode === void 0) { decode = true; }\r\n    var cookieValue;\r\n    if (cookieMgr) {\r\n        cookieValue = cookieMgr.get(name);\r\n        if (decode && cookieValue && decodeURIComponent) {\r\n            cookieValue = decodeURIComponent(cookieValue);\r\n        }\r\n    }\r\n    return cookieValue || STR_EMPTY;\r\n}\r\n/**\r\n * Create a new guid.\r\n * @param style - The style of guid to generated, defaults to Digits\r\n * Digits (Default) : 32 digits separated by hyphens: 00000000-0000-0000-0000-000000000000\r\n * Braces - 32 digits separated by hyphens, enclosed in braces: \\{00000000-0000-0000-0000-000000000000\\}\r\n * Parentheses - 32 digits separated by hyphens, enclosed in parentheses: (00000000-0000-0000-0000-000000000000)\r\n * Numeric - 32 digits: 00000000000000000000000000000000\r\n */\r\nexport function createGuid(style) {\r\n    if (style === void 0) { style = \"D\" /* GuidStyle.Digits */; }\r\n    var theGuid = newGuid();\r\n    if (style === \"B\" /* GuidStyle.Braces */) {\r\n        theGuid = \"{\" + theGuid + \"}\";\r\n    }\r\n    else if (style === \"P\" /* GuidStyle.Parentheses */) {\r\n        theGuid = \"(\" + theGuid + \")\";\r\n    }\r\n    else if (style === \"N\" /* GuidStyle.Numeric */) {\r\n        theGuid = theGuid.replace(/-/g, STR_EMPTY);\r\n    }\r\n    return theGuid;\r\n}\r\n/**\r\n * Pass in the objects to merge as arguments.\r\n * @param obj1 - object to merge.  Set this argument to 'true' for a deep extend.\r\n * @param obj2 - object to merge.\r\n * @param obj3 - object to merge.\r\n * @param obj4 - object to merge.\r\n * @param obj5 - object to merge.\r\n * @returns The extended object.\r\n */\r\nexport function extend(obj, obj2, obj3, obj4, obj5) {\r\n    // Variables\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments[_DYN_LENGTH /* @min:%2elength */];\r\n    var theArgs = arguments;\r\n    // Check if a deep merge\r\n    if (isBoolean(theArgs[0])) {\r\n        deep = theArgs[0];\r\n        i++;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = theArgs[i];\r\n        objForEachKey(obj, function (prop, value) {\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && value && isObject(value)) {\r\n                if (isArray(value)) {\r\n                    extended[prop] = extended[prop] || [];\r\n                    arrForEach(value, function (arrayValue, arrayIndex) {\r\n                        if (arrayValue && isObject(arrayValue)) {\r\n                            extended[prop][arrayIndex] = extend(true, extended[prop][arrayIndex], arrayValue);\r\n                        }\r\n                        else {\r\n                            extended[prop][arrayIndex] = arrayValue;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    extended[prop] = extend(true, extended[prop], value);\r\n                }\r\n            }\r\n            else {\r\n                extended[prop] = value;\r\n            }\r\n        });\r\n    }\r\n    return extended;\r\n}\r\nexport var getTime = perfNow;\r\nexport function isValueKind(value) {\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value === 0 /* eValueKind.NotSet */ || ((value > 0 /* eValueKind.NotSet */ && value <= 13 /* eValueKind.Pii_IPV4AddressLegacy */) || value === 32 /* eValueKind.CustomerContent_GenericContent */)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isDataType(value) {\r\n    // Remark: 0 returns false, but it doesn't affect encoding anyways\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value >= 0 && value <= 9) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSafariOrFirefox() {\r\n    var nav = getNavigator();\r\n    // If non-browser navigator will be undefined\r\n    if (!isUndefined(nav) && nav.userAgent) {\r\n        var ua = nav.userAgent.toLowerCase();\r\n        if ((ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"safari\") >= 0 || ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"firefox\") >= 0) && ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"chrome\") < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isArrayValid(value) {\r\n    return value[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\nexport function setProcessTelemetryTimings(event, identifier) {\r\n    var evt = event;\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */] = evt[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] = evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */][identifier] = getTime();\r\n}\r\n/**\r\n * Returns a bitwise value for the FieldValueSanitizerType enum representing the decoded type of the passed value\r\n * @param value - The value to determine the type\r\n */\r\nexport function getFieldValueType(value) {\r\n    var theType = 0 /* FieldValueSanitizerType.NotSet */;\r\n    if (value !== null && value !== undefined) {\r\n        var objType = typeof value;\r\n        if (objType === \"string\") {\r\n            theType = 1 /* FieldValueSanitizerType.String */;\r\n        }\r\n        else if (objType === \"number\") {\r\n            theType = 2 /* FieldValueSanitizerType.Number */;\r\n        }\r\n        else if (objType === \"boolean\") {\r\n            theType = 3 /* FieldValueSanitizerType.Boolean */;\r\n        }\r\n        else if (objType === strShimObject) {\r\n            theType = 4 /* FieldValueSanitizerType.Object */;\r\n            if (isArray(value)) {\r\n                theType = 4096 /* FieldValueSanitizerType.Array */;\r\n                if (value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Empty arrays are not supported and are considered to be the same as null\r\n                    theType |= getFieldValueType(value[0]);\r\n                }\r\n            }\r\n            else if (ObjHasOwnProperty.call(value, \"value\")) {\r\n                // Looks like an IEventProperty\r\n                theType = 8192 /* FieldValueSanitizerType.EventProperty */ | getFieldValueType(value[_DYN_VALUE /* @min:%2evalue */]);\r\n            }\r\n        }\r\n    }\r\n    return theType;\r\n}\r\n/**\r\n * Helper to identify whether we are running in a chromium based browser environment\r\n */\r\nexport function isChromium() {\r\n    return !!getGlobalInst(\"chrome\");\r\n}\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n * Check to see if the value is \\> 0\r\n * @param value - The value to check\r\n * @returns true if \\> 0 otherwise false\r\n */\r\nexport function isGreaterThanZero(value) {\r\n    return value > 0;\r\n}\r\n//# sourceMappingURL=Utils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { createEnumStyle } from \"./EnumHelperFuncs\";\r\nexport var ActiveStatus = ( /* @__PURE__ */createEnumStyle({\r\n    NONE: 0 /* eActiveStatus.NONE */,\r\n    PENDING: 3 /* eActiveStatus.PENDING */,\r\n    INACTIVE: 1 /* eActiveStatus.INACTIVE */,\r\n    ACTIVE: 2 /* eActiveStatus.ACTIVE */\r\n}));\r\n//# sourceMappingURL=InitActiveStatusEnum.js.map","/**\n * GoToVariablesViewTool - Language Model Tool for opening the Variables view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { VariablesView } from '../admin/VariablesView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToVariablesViewTool - Opens the Variables panel\n */\nexport class GoToVariablesViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Variables View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToVariablesViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            VariablesView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Variables View - showing Airflow variables (key-value configuration settings)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToVariablesViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Variables View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * TriggerDagRunTool - Language Model Tool for triggering Airflow DAG runs\n * \n * This tool implements a state-changing action that requires explicit user confirmation\n * via the prepareInvocation method. It displays the target DAG ID and configuration\n * payload in a markdown-formatted confirmation dialog before execution.\n */\n\nimport * as vscode from 'vscode';\nimport * as fs from 'fs';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for triggering a DAG run\n */\nexport interface ITriggerParams {\n    dagId: string;\n    configJson?: string;\n    date?: string;\n}\n\n/**\n * TriggerDagRunTool - Implements vscode.LanguageModelTool for DAG triggering\n */\nexport class TriggerDagRunTool implements vscode.LanguageModelTool<ITriggerParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * SECURITY CRITICAL: Prepare invocation with user confirmation\n     * \n     * This method is called before invoke() and provides a confirmation gate\n     * for the user to review the exact DAG and configuration before triggering.\n     * \n     * @param options - Contains the parsed input parameters\n     * @param token - Cancellation token\n     * @returns PreparedToolInvocation with confirmation message\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<ITriggerParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, configJson, date } = options.input;\n        \n        // Process configJson: check if it's a file path\n        let finalConfig = configJson || '{}';\n        let configSource = 'Inline';\n\n        if (configJson && !configJson.trim().startsWith('{')) {\n            // Assume it's a file path if it doesn't start with {\n            try {\n                // Remove quotes if present\n                const filePath = configJson.replace(/^['\"]|['\"]$/g, '');\n                if (fs.existsSync(filePath)) {\n                    finalConfig = fs.readFileSync(filePath, 'utf8');\n                    configSource = `File: ${filePath}`;\n                }\n            } catch (error) {\n                // If read fails, keep original string (validation will happen later)\n                console.warn(`Failed to read config file: ${error}`);\n            }\n        }\n\n        // Validate JSON\n        try {\n            JSON.parse(finalConfig);\n        } catch (e) {\n            throw new Error(`Invalid JSON configuration: ${e instanceof Error ? e.message : String(e)}`);\n        }\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Trigger DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to trigger the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n`);\n        if (date) {\n            confirmationMessage.appendMarkdown(`**Logical Date:** \\`${date}\\`\\n`);\n        }\n        confirmationMessage.appendMarkdown(`**Config Source:** ${configSource}\\n\\n`);\n        confirmationMessage.appendMarkdown('**Configuration Payload:**\\n');\n        confirmationMessage.appendCodeblock(finalConfig, 'json');\n        confirmationMessage.appendMarkdown('\\nDo you want to proceed?');\n\n        return {\n            invocationMessage: `Triggering DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm DAG Trigger',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    /**\n     * Execute the DAG trigger action\n     * \n     * @param options - Contains the validated input parameters\n     * @param token - Cancellation token\n     * @returns LanguageModelToolResult with success/error information\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<ITriggerParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, configJson, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('TriggerDagRunTool.invoke');\n\n        try {\n            // Re-process config for invoke (same logic as prepare)\n            let finalConfig = configJson || '{}';\n            if (configJson && !configJson.trim().startsWith('{')) {\n                try {\n                    const filePath = configJson.replace(/^['\"]|['\"]$/g, '');\n                    if (fs.existsSync(filePath)) {\n                        finalConfig = fs.readFileSync(filePath, 'utf8');\n                    }\n                } catch (error) {\n                    // Ignore error here, will fail at JSON parse in client\n                }\n            }\n\n            const result = await this.client.triggerDagRun(dagId, finalConfig, date);\n\n            const message = [\n                ` **Success!** DAG Run triggered.`,\n                ``,\n                `- **DAG ID:** ${result.dag_id}`,\n                `- **Run ID:** ${result.dag_run_id}`,\n                `- **State:** ${result.state}`,\n                `- **Logical Date:** ${result.logical_date}`,\n                date ? `- **Requested Date:** ${date}` : ''\n            ].filter(Boolean).join('\\n');\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('TriggerDagRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to trigger DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * web-streams-polyfill v3.2.1\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.WebStreamsPolyfill = {}));\n}(this, (function (exports) { 'use strict';\n\n    /// <reference lib=\"es2015.symbol\" />\n    const SymbolPolyfill = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ?\n        Symbol :\n        description => `Symbol(${description})`;\n\n    /// <reference lib=\"dom\" />\n    function noop() {\n        return undefined;\n    }\n    function getGlobals() {\n        if (typeof self !== 'undefined') {\n            return self;\n        }\n        else if (typeof window !== 'undefined') {\n            return window;\n        }\n        else if (typeof global !== 'undefined') {\n            return global;\n        }\n        return undefined;\n    }\n    const globals = getGlobals();\n\n    function typeIsObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    const rethrowAssertionErrorRejection = noop;\n\n    const originalPromise = Promise;\n    const originalPromiseThen = Promise.prototype.then;\n    const originalPromiseResolve = Promise.resolve.bind(originalPromise);\n    const originalPromiseReject = Promise.reject.bind(originalPromise);\n    function newPromise(executor) {\n        return new originalPromise(executor);\n    }\n    function promiseResolvedWith(value) {\n        return originalPromiseResolve(value);\n    }\n    function promiseRejectedWith(reason) {\n        return originalPromiseReject(reason);\n    }\n    function PerformPromiseThen(promise, onFulfilled, onRejected) {\n        // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n        // approximation.\n        return originalPromiseThen.call(promise, onFulfilled, onRejected);\n    }\n    function uponPromise(promise, onFulfilled, onRejected) {\n        PerformPromiseThen(PerformPromiseThen(promise, onFulfilled, onRejected), undefined, rethrowAssertionErrorRejection);\n    }\n    function uponFulfillment(promise, onFulfilled) {\n        uponPromise(promise, onFulfilled);\n    }\n    function uponRejection(promise, onRejected) {\n        uponPromise(promise, undefined, onRejected);\n    }\n    function transformPromiseWith(promise, fulfillmentHandler, rejectionHandler) {\n        return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n    }\n    function setPromiseIsHandledToTrue(promise) {\n        PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n    }\n    const queueMicrotask = (() => {\n        const globalQueueMicrotask = globals && globals.queueMicrotask;\n        if (typeof globalQueueMicrotask === 'function') {\n            return globalQueueMicrotask;\n        }\n        const resolvedPromise = promiseResolvedWith(undefined);\n        return (fn) => PerformPromiseThen(resolvedPromise, fn);\n    })();\n    function reflectCall(F, V, args) {\n        if (typeof F !== 'function') {\n            throw new TypeError('Argument is not a function');\n        }\n        return Function.prototype.apply.call(F, V, args);\n    }\n    function promiseCall(F, V, args) {\n        try {\n            return promiseResolvedWith(reflectCall(F, V, args));\n        }\n        catch (value) {\n            return promiseRejectedWith(value);\n        }\n    }\n\n    // Original from Chromium\n    // https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n    const QUEUE_MAX_ARRAY_SIZE = 16384;\n    /**\n     * Simple queue structure.\n     *\n     * Avoids scalability issues with using a packed array directly by using\n     * multiple arrays in a linked list and keeping the array size bounded.\n     */\n    class SimpleQueue {\n        constructor() {\n            this._cursor = 0;\n            this._size = 0;\n            // _front and _back are always defined.\n            this._front = {\n                _elements: [],\n                _next: undefined\n            };\n            this._back = this._front;\n            // The cursor is used to avoid calling Array.shift().\n            // It contains the index of the front element of the array inside the\n            // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n            this._cursor = 0;\n            // When there is only one node, size === elements.length - cursor.\n            this._size = 0;\n        }\n        get length() {\n            return this._size;\n        }\n        // For exception safety, this method is structured in order:\n        // 1. Read state\n        // 2. Calculate required state mutations\n        // 3. Perform state mutations\n        push(element) {\n            const oldBack = this._back;\n            let newBack = oldBack;\n            if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n                newBack = {\n                    _elements: [],\n                    _next: undefined\n                };\n            }\n            // push() is the mutation most likely to throw an exception, so it\n            // goes first.\n            oldBack._elements.push(element);\n            if (newBack !== oldBack) {\n                this._back = newBack;\n                oldBack._next = newBack;\n            }\n            ++this._size;\n        }\n        // Like push(), shift() follows the read -> calculate -> mutate pattern for\n        // exception safety.\n        shift() { // must not be called on an empty queue\n            const oldFront = this._front;\n            let newFront = oldFront;\n            const oldCursor = this._cursor;\n            let newCursor = oldCursor + 1;\n            const elements = oldFront._elements;\n            const element = elements[oldCursor];\n            if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n                newFront = oldFront._next;\n                newCursor = 0;\n            }\n            // No mutations before this point.\n            --this._size;\n            this._cursor = newCursor;\n            if (oldFront !== newFront) {\n                this._front = newFront;\n            }\n            // Permit shifted element to be garbage collected.\n            elements[oldCursor] = undefined;\n            return element;\n        }\n        // The tricky thing about forEach() is that it can be called\n        // re-entrantly. The queue may be mutated inside the callback. It is easy to\n        // see that push() within the callback has no negative effects since the end\n        // of the queue is checked for on every iteration. If shift() is called\n        // repeatedly within the callback then the next iteration may return an\n        // element that has been removed. In this case the callback will be called\n        // with undefined values until we either \"catch up\" with elements that still\n        // exist or reach the back of the queue.\n        forEach(callback) {\n            let i = this._cursor;\n            let node = this._front;\n            let elements = node._elements;\n            while (i !== elements.length || node._next !== undefined) {\n                if (i === elements.length) {\n                    node = node._next;\n                    elements = node._elements;\n                    i = 0;\n                    if (elements.length === 0) {\n                        break;\n                    }\n                }\n                callback(elements[i]);\n                ++i;\n            }\n        }\n        // Return the element that would be returned if shift() was called now,\n        // without modifying the queue.\n        peek() { // must not be called on an empty queue\n            const front = this._front;\n            const cursor = this._cursor;\n            return front._elements[cursor];\n        }\n    }\n\n    function ReadableStreamReaderGenericInitialize(reader, stream) {\n        reader._ownerReadableStream = stream;\n        stream._reader = reader;\n        if (stream._state === 'readable') {\n            defaultReaderClosedPromiseInitialize(reader);\n        }\n        else if (stream._state === 'closed') {\n            defaultReaderClosedPromiseInitializeAsResolved(reader);\n        }\n        else {\n            defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n        }\n    }\n    // A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n    // check.\n    function ReadableStreamReaderGenericCancel(reader, reason) {\n        const stream = reader._ownerReadableStream;\n        return ReadableStreamCancel(stream, reason);\n    }\n    function ReadableStreamReaderGenericRelease(reader) {\n        if (reader._ownerReadableStream._state === 'readable') {\n            defaultReaderClosedPromiseReject(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        else {\n            defaultReaderClosedPromiseResetToRejected(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        reader._ownerReadableStream._reader = undefined;\n        reader._ownerReadableStream = undefined;\n    }\n    // Helper functions for the readers.\n    function readerLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released reader');\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderClosedPromiseInitialize(reader) {\n        reader._closedPromise = newPromise((resolve, reject) => {\n            reader._closedPromise_resolve = resolve;\n            reader._closedPromise_reject = reject;\n        });\n    }\n    function defaultReaderClosedPromiseInitializeAsRejected(reader, reason) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseReject(reader, reason);\n    }\n    function defaultReaderClosedPromiseInitializeAsResolved(reader) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseResolve(reader);\n    }\n    function defaultReaderClosedPromiseReject(reader, reason) {\n        if (reader._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(reader._closedPromise);\n        reader._closedPromise_reject(reason);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n    function defaultReaderClosedPromiseResetToRejected(reader, reason) {\n        defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n    }\n    function defaultReaderClosedPromiseResolve(reader) {\n        if (reader._closedPromise_resolve === undefined) {\n            return;\n        }\n        reader._closedPromise_resolve(undefined);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n\n    const AbortSteps = SymbolPolyfill('[[AbortSteps]]');\n    const ErrorSteps = SymbolPolyfill('[[ErrorSteps]]');\n    const CancelSteps = SymbolPolyfill('[[CancelSteps]]');\n    const PullSteps = SymbolPolyfill('[[PullSteps]]');\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\n    const NumberIsFinite = Number.isFinite || function (x) {\n        return typeof x === 'number' && isFinite(x);\n    };\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\n    const MathTrunc = Math.trunc || function (v) {\n        return v < 0 ? Math.ceil(v) : Math.floor(v);\n    };\n\n    // https://heycam.github.io/webidl/#idl-dictionaries\n    function isDictionary(x) {\n        return typeof x === 'object' || typeof x === 'function';\n    }\n    function assertDictionary(obj, context) {\n        if (obj !== undefined && !isDictionary(obj)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-callback-functions\n    function assertFunction(x, context) {\n        if (typeof x !== 'function') {\n            throw new TypeError(`${context} is not a function.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-object\n    function isObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    function assertObject(x, context) {\n        if (!isObject(x)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    function assertRequiredArgument(x, position, context) {\n        if (x === undefined) {\n            throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n        }\n    }\n    function assertRequiredField(x, field, context) {\n        if (x === undefined) {\n            throw new TypeError(`${field} is required in '${context}'.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-unrestricted-double\n    function convertUnrestrictedDouble(value) {\n        return Number(value);\n    }\n    function censorNegativeZero(x) {\n        return x === 0 ? 0 : x;\n    }\n    function integerPart(x) {\n        return censorNegativeZero(MathTrunc(x));\n    }\n    // https://heycam.github.io/webidl/#idl-unsigned-long-long\n    function convertUnsignedLongLongWithEnforceRange(value, context) {\n        const lowerBound = 0;\n        const upperBound = Number.MAX_SAFE_INTEGER;\n        let x = Number(value);\n        x = censorNegativeZero(x);\n        if (!NumberIsFinite(x)) {\n            throw new TypeError(`${context} is not a finite number`);\n        }\n        x = integerPart(x);\n        if (x < lowerBound || x > upperBound) {\n            throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n        }\n        if (!NumberIsFinite(x) || x === 0) {\n            return 0;\n        }\n        // TODO Use BigInt if supported?\n        // let xBigInt = BigInt(integerPart(x));\n        // xBigInt = BigInt.asUintN(64, xBigInt);\n        // return Number(xBigInt);\n        return x;\n    }\n\n    function assertReadableStream(x, context) {\n        if (!IsReadableStream(x)) {\n            throw new TypeError(`${context} is not a ReadableStream.`);\n        }\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamDefaultReader(stream) {\n        return new ReadableStreamDefaultReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadRequest(stream, readRequest) {\n        stream._reader._readRequests.push(readRequest);\n    }\n    function ReadableStreamFulfillReadRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readRequest = reader._readRequests.shift();\n        if (done) {\n            readRequest._closeSteps();\n        }\n        else {\n            readRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadRequests(stream) {\n        return stream._reader._readRequests.length;\n    }\n    function ReadableStreamHasDefaultReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamDefaultReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A default reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed,\n         * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamDefaultReaderRead(this, readRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                throw defaultReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamDefaultReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultReader;\n    }\n    function ReadableStreamDefaultReaderRead(reader, readRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            readRequest._closeSteps();\n        }\n        else if (stream._state === 'errored') {\n            readRequest._errorSteps(stream._storedError);\n        }\n        else {\n            stream._readableStreamController[PullSteps](readRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n    }\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    /* eslint-disable @typescript-eslint/no-empty-function */\n    const AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () { }).prototype);\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    class ReadableStreamAsyncIteratorImpl {\n        constructor(reader, preventCancel) {\n            this._ongoingPromise = undefined;\n            this._isFinished = false;\n            this._reader = reader;\n            this._preventCancel = preventCancel;\n        }\n        next() {\n            const nextSteps = () => this._nextSteps();\n            this._ongoingPromise = this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n                nextSteps();\n            return this._ongoingPromise;\n        }\n        return(value) {\n            const returnSteps = () => this._returnSteps(value);\n            return this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n                returnSteps();\n        }\n        _nextSteps() {\n            if (this._isFinished) {\n                return Promise.resolve({ value: undefined, done: true });\n            }\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('iterate'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    this._ongoingPromise = undefined;\n                    // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n                    // FIXME Is this a bug in the specification, or in the test?\n                    queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n                },\n                _closeSteps: () => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    resolvePromise({ value: undefined, done: true });\n                },\n                _errorSteps: reason => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    rejectPromise(reason);\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promise;\n        }\n        _returnSteps(value) {\n            if (this._isFinished) {\n                return Promise.resolve({ value, done: true });\n            }\n            this._isFinished = true;\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('finish iterating'));\n            }\n            if (!this._preventCancel) {\n                const result = ReadableStreamReaderGenericCancel(reader, value);\n                ReadableStreamReaderGenericRelease(reader);\n                return transformPromiseWith(result, () => ({ value, done: true }));\n            }\n            ReadableStreamReaderGenericRelease(reader);\n            return promiseResolvedWith({ value, done: true });\n        }\n    }\n    const ReadableStreamAsyncIteratorPrototype = {\n        next() {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n            }\n            return this._asyncIteratorImpl.next();\n        },\n        return(value) {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n            }\n            return this._asyncIteratorImpl.return(value);\n        }\n    };\n    if (AsyncIteratorPrototype !== undefined) {\n        Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n    }\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamAsyncIterator(stream, preventCancel) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n        const iterator = Object.create(ReadableStreamAsyncIteratorPrototype);\n        iterator._asyncIteratorImpl = impl;\n        return iterator;\n    }\n    function IsReadableStreamAsyncIterator(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n            return false;\n        }\n        try {\n            // noinspection SuspiciousTypeOfGuard\n            return x._asyncIteratorImpl instanceof\n                ReadableStreamAsyncIteratorImpl;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamAsyncIteratorBrandCheckException(name) {\n        return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n    }\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\n    const NumberIsNaN = Number.isNaN || function (x) {\n        // eslint-disable-next-line no-self-compare\n        return x !== x;\n    };\n\n    function CreateArrayFromList(elements) {\n        // We use arrays to represent lists, so this is basically a no-op.\n        // Do a slice though just in case we happen to depend on the unique-ness.\n        return elements.slice();\n    }\n    function CopyDataBlockBytes(dest, destOffset, src, srcOffset, n) {\n        new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n    }\n    // Not implemented correctly\n    function TransferArrayBuffer(O) {\n        return O;\n    }\n    // Not implemented correctly\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    function IsDetachedBuffer(O) {\n        return false;\n    }\n    function ArrayBufferSlice(buffer, begin, end) {\n        // ArrayBuffer.prototype.slice is not available on IE10\n        // https://www.caniuse.com/mdn-javascript_builtins_arraybuffer_slice\n        if (buffer.slice) {\n            return buffer.slice(begin, end);\n        }\n        const length = end - begin;\n        const slice = new ArrayBuffer(length);\n        CopyDataBlockBytes(slice, 0, buffer, begin, length);\n        return slice;\n    }\n\n    function IsNonNegativeNumber(v) {\n        if (typeof v !== 'number') {\n            return false;\n        }\n        if (NumberIsNaN(v)) {\n            return false;\n        }\n        if (v < 0) {\n            return false;\n        }\n        return true;\n    }\n    function CloneAsUint8Array(O) {\n        const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);\n        return new Uint8Array(buffer);\n    }\n\n    function DequeueValue(container) {\n        const pair = container._queue.shift();\n        container._queueTotalSize -= pair.size;\n        if (container._queueTotalSize < 0) {\n            container._queueTotalSize = 0;\n        }\n        return pair.value;\n    }\n    function EnqueueValueWithSize(container, value, size) {\n        if (!IsNonNegativeNumber(size) || size === Infinity) {\n            throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n        }\n        container._queue.push({ value, size });\n        container._queueTotalSize += size;\n    }\n    function PeekQueueValue(container) {\n        const pair = container._queue.peek();\n        return pair.value;\n    }\n    function ResetQueue(container) {\n        container._queue = new SimpleQueue();\n        container._queueTotalSize = 0;\n    }\n\n    /**\n     * A pull-into request in a {@link ReadableByteStreamController}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBRequest {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n         */\n        get view() {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('view');\n            }\n            return this._view;\n        }\n        respond(bytesWritten) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respond');\n            }\n            assertRequiredArgument(bytesWritten, 1, 'respond');\n            bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(this._view.buffer)) ;\n            ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n        }\n        respondWithNewView(view) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respondWithNewView');\n            }\n            assertRequiredArgument(view, 1, 'respondWithNewView');\n            if (!ArrayBuffer.isView(view)) {\n                throw new TypeError('You can only respond with array buffer views');\n            }\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBRequest.prototype, {\n        respond: { enumerable: true },\n        respondWithNewView: { enumerable: true },\n        view: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBRequest.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBRequest',\n            configurable: true\n        });\n    }\n    /**\n     * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableByteStreamController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the current BYOB pull request, or `null` if there isn't one.\n         */\n        get byobRequest() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('byobRequest');\n            }\n            return ReadableByteStreamControllerGetBYOBRequest(this);\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('desiredSize');\n            }\n            return ReadableByteStreamControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('close');\n            }\n            if (this._closeRequested) {\n                throw new TypeError('The stream has already been closed; do not close it again!');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n            }\n            ReadableByteStreamControllerClose(this);\n        }\n        enqueue(chunk) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('enqueue');\n            }\n            assertRequiredArgument(chunk, 1, 'enqueue');\n            if (!ArrayBuffer.isView(chunk)) {\n                throw new TypeError('chunk must be an array buffer view');\n            }\n            if (chunk.byteLength === 0) {\n                throw new TypeError('chunk must have non-zero byteLength');\n            }\n            if (chunk.buffer.byteLength === 0) {\n                throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n            }\n            if (this._closeRequested) {\n                throw new TypeError('stream is closed or draining');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n            }\n            ReadableByteStreamControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('error');\n            }\n            ReadableByteStreamControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ReadableByteStreamControllerClearPendingPullIntos(this);\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableByteStreamControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableByteStream;\n            if (this._queueTotalSize > 0) {\n                const entry = this._queue.shift();\n                this._queueTotalSize -= entry.byteLength;\n                ReadableByteStreamControllerHandleQueueDrain(this);\n                const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n                readRequest._chunkSteps(view);\n                return;\n            }\n            const autoAllocateChunkSize = this._autoAllocateChunkSize;\n            if (autoAllocateChunkSize !== undefined) {\n                let buffer;\n                try {\n                    buffer = new ArrayBuffer(autoAllocateChunkSize);\n                }\n                catch (bufferE) {\n                    readRequest._errorSteps(bufferE);\n                    return;\n                }\n                const pullIntoDescriptor = {\n                    buffer,\n                    bufferByteLength: autoAllocateChunkSize,\n                    byteOffset: 0,\n                    byteLength: autoAllocateChunkSize,\n                    bytesFilled: 0,\n                    elementSize: 1,\n                    viewConstructor: Uint8Array,\n                    readerType: 'default'\n                };\n                this._pendingPullIntos.push(pullIntoDescriptor);\n            }\n            ReadableStreamAddReadRequest(stream, readRequest);\n            ReadableByteStreamControllerCallPullIfNeeded(this);\n        }\n    }\n    Object.defineProperties(ReadableByteStreamController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        byobRequest: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableByteStreamController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableByteStreamController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableByteStreamController.\n    function IsReadableByteStreamController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n            return false;\n        }\n        return x instanceof ReadableByteStreamController;\n    }\n    function IsReadableStreamBYOBRequest(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBRequest;\n    }\n    function ReadableByteStreamControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        // TODO: Test controller argument\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableByteStreamControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableByteStreamControllerError(controller, e);\n        });\n    }\n    function ReadableByteStreamControllerClearPendingPullIntos(controller) {\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        controller._pendingPullIntos = new SimpleQueue();\n    }\n    function ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor) {\n        let done = false;\n        if (stream._state === 'closed') {\n            done = true;\n        }\n        const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n        if (pullIntoDescriptor.readerType === 'default') {\n            ReadableStreamFulfillReadRequest(stream, filledView, done);\n        }\n        else {\n            ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n        }\n    }\n    function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor) {\n        const bytesFilled = pullIntoDescriptor.bytesFilled;\n        const elementSize = pullIntoDescriptor.elementSize;\n        return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize);\n    }\n    function ReadableByteStreamControllerEnqueueChunkToQueue(controller, buffer, byteOffset, byteLength) {\n        controller._queue.push({ buffer, byteOffset, byteLength });\n        controller._queueTotalSize += byteLength;\n    }\n    function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor) {\n        const elementSize = pullIntoDescriptor.elementSize;\n        const currentAlignedBytes = pullIntoDescriptor.bytesFilled - pullIntoDescriptor.bytesFilled % elementSize;\n        const maxBytesToCopy = Math.min(controller._queueTotalSize, pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n        const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n        const maxAlignedBytes = maxBytesFilled - maxBytesFilled % elementSize;\n        let totalBytesToCopyRemaining = maxBytesToCopy;\n        let ready = false;\n        if (maxAlignedBytes > currentAlignedBytes) {\n            totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n            ready = true;\n        }\n        const queue = controller._queue;\n        while (totalBytesToCopyRemaining > 0) {\n            const headOfQueue = queue.peek();\n            const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n            const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n            if (headOfQueue.byteLength === bytesToCopy) {\n                queue.shift();\n            }\n            else {\n                headOfQueue.byteOffset += bytesToCopy;\n                headOfQueue.byteLength -= bytesToCopy;\n            }\n            controller._queueTotalSize -= bytesToCopy;\n            ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n            totalBytesToCopyRemaining -= bytesToCopy;\n        }\n        return ready;\n    }\n    function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, size, pullIntoDescriptor) {\n        pullIntoDescriptor.bytesFilled += size;\n    }\n    function ReadableByteStreamControllerHandleQueueDrain(controller) {\n        if (controller._queueTotalSize === 0 && controller._closeRequested) {\n            ReadableByteStreamControllerClearAlgorithms(controller);\n            ReadableStreamClose(controller._controlledReadableByteStream);\n        }\n        else {\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }\n    }\n    function ReadableByteStreamControllerInvalidateBYOBRequest(controller) {\n        if (controller._byobRequest === null) {\n            return;\n        }\n        controller._byobRequest._associatedReadableByteStreamController = undefined;\n        controller._byobRequest._view = null;\n        controller._byobRequest = null;\n    }\n    function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller) {\n        while (controller._pendingPullIntos.length > 0) {\n            if (controller._queueTotalSize === 0) {\n                return;\n            }\n            const pullIntoDescriptor = controller._pendingPullIntos.peek();\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerPullInto(controller, view, readIntoRequest) {\n        const stream = controller._controlledReadableByteStream;\n        let elementSize = 1;\n        if (view.constructor !== DataView) {\n            elementSize = view.constructor.BYTES_PER_ELEMENT;\n        }\n        const ctor = view.constructor;\n        // try {\n        const buffer = TransferArrayBuffer(view.buffer);\n        // } catch (e) {\n        //   readIntoRequest._errorSteps(e);\n        //   return;\n        // }\n        const pullIntoDescriptor = {\n            buffer,\n            bufferByteLength: buffer.byteLength,\n            byteOffset: view.byteOffset,\n            byteLength: view.byteLength,\n            bytesFilled: 0,\n            elementSize,\n            viewConstructor: ctor,\n            readerType: 'byob'\n        };\n        if (controller._pendingPullIntos.length > 0) {\n            controller._pendingPullIntos.push(pullIntoDescriptor);\n            // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n            // - No change happens on desiredSize\n            // - The source has already been notified of that there's at least 1 pending read(view)\n            ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n            return;\n        }\n        if (stream._state === 'closed') {\n            const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n            readIntoRequest._closeSteps(emptyView);\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n                ReadableByteStreamControllerHandleQueueDrain(controller);\n                readIntoRequest._chunkSteps(filledView);\n                return;\n            }\n            if (controller._closeRequested) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                readIntoRequest._errorSteps(e);\n                return;\n            }\n        }\n        controller._pendingPullIntos.push(pullIntoDescriptor);\n        ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor) {\n        const stream = controller._controlledReadableByteStream;\n        if (ReadableStreamHasBYOBReader(stream)) {\n            while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n                const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, pullIntoDescriptor) {\n        ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n        if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.elementSize) {\n            return;\n        }\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n        const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n        if (remainderSize > 0) {\n            const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            const remainder = ArrayBufferSlice(pullIntoDescriptor.buffer, end - remainderSize, end);\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, remainder, 0, remainder.byteLength);\n        }\n        pullIntoDescriptor.bytesFilled -= remainderSize;\n        ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n        ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n    }\n    function ReadableByteStreamControllerRespondInternal(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            ReadableByteStreamControllerRespondInClosedState(controller);\n        }\n        else {\n            ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerShiftPendingPullInto(controller) {\n        const descriptor = controller._pendingPullIntos.shift();\n        return descriptor;\n    }\n    function ReadableByteStreamControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return false;\n        }\n        if (controller._closeRequested) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableByteStreamControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n    }\n    // A client of ReadableByteStreamController may use these functions directly to bypass state check.\n    function ReadableByteStreamControllerClose(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            controller._closeRequested = true;\n            return;\n        }\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (firstPendingPullInto.bytesFilled > 0) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                throw e;\n            }\n        }\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamClose(stream);\n    }\n    function ReadableByteStreamControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        const buffer = chunk.buffer;\n        const byteOffset = chunk.byteOffset;\n        const byteLength = chunk.byteLength;\n        const transferredBuffer = TransferArrayBuffer(buffer);\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (IsDetachedBuffer(firstPendingPullInto.buffer)) ;\n            firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);\n        }\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        if (ReadableStreamHasDefaultReader(stream)) {\n            if (ReadableStreamGetNumReadRequests(stream) === 0) {\n                ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            }\n            else {\n                if (controller._pendingPullIntos.length > 0) {\n                    ReadableByteStreamControllerShiftPendingPullInto(controller);\n                }\n                const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n                ReadableStreamFulfillReadRequest(stream, transferredView, false);\n            }\n        }\n        else if (ReadableStreamHasBYOBReader(stream)) {\n            // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n        }\n        else {\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerError(controller, e) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ReadableByteStreamControllerClearPendingPullIntos(controller);\n        ResetQueue(controller);\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableByteStreamControllerGetBYOBRequest(controller) {\n        if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {\n            const firstDescriptor = controller._pendingPullIntos.peek();\n            const view = new Uint8Array(firstDescriptor.buffer, firstDescriptor.byteOffset + firstDescriptor.bytesFilled, firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n            const byobRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n            SetUpReadableStreamBYOBRequest(byobRequest, controller, view);\n            controller._byobRequest = byobRequest;\n        }\n        return controller._byobRequest;\n    }\n    function ReadableByteStreamControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function ReadableByteStreamControllerRespond(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (bytesWritten !== 0) {\n                throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n            }\n        }\n        else {\n            if (bytesWritten === 0) {\n                throw new TypeError('bytesWritten must be greater than 0 when calling respond() on a readable stream');\n            }\n            if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {\n                throw new RangeError('bytesWritten out of range');\n            }\n        }\n        firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n    }\n    function ReadableByteStreamControllerRespondWithNewView(controller, view) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (view.byteLength !== 0) {\n                throw new TypeError('The view\\'s length must be 0 when calling respondWithNewView() on a closed stream');\n            }\n        }\n        else {\n            if (view.byteLength === 0) {\n                throw new TypeError('The view\\'s length must be greater than 0 when calling respondWithNewView() on a readable stream');\n            }\n        }\n        if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n            throw new RangeError('The region specified by view does not match byobRequest');\n        }\n        if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {\n            throw new RangeError('The buffer of view has different capacity than byobRequest');\n        }\n        if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {\n            throw new RangeError('The region specified by view is larger than byobRequest');\n        }\n        const viewByteLength = view.byteLength;\n        firstDescriptor.buffer = TransferArrayBuffer(view.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, viewByteLength);\n    }\n    function SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize) {\n        controller._controlledReadableByteStream = stream;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._byobRequest = null;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._closeRequested = false;\n        controller._started = false;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        controller._autoAllocateChunkSize = autoAllocateChunkSize;\n        controller._pendingPullIntos = new SimpleQueue();\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableByteStreamControllerError(controller, r);\n        });\n    }\n    function SetUpReadableByteStreamControllerFromUnderlyingSource(stream, underlyingByteSource, highWaterMark) {\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingByteSource.start !== undefined) {\n            startAlgorithm = () => underlyingByteSource.start(controller);\n        }\n        if (underlyingByteSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingByteSource.pull(controller);\n        }\n        if (underlyingByteSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingByteSource.cancel(reason);\n        }\n        const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n        if (autoAllocateChunkSize === 0) {\n            throw new TypeError('autoAllocateChunkSize must be greater than 0');\n        }\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize);\n    }\n    function SetUpReadableStreamBYOBRequest(request, controller, view) {\n        request._associatedReadableByteStreamController = controller;\n        request._view = view;\n    }\n    // Helper functions for the ReadableStreamBYOBRequest.\n    function byobRequestBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n    }\n    // Helper functions for the ReadableByteStreamController.\n    function byteStreamControllerBrandCheckException(name) {\n        return new TypeError(`ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamBYOBReader(stream) {\n        return new ReadableStreamBYOBReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadIntoRequest(stream, readIntoRequest) {\n        stream._reader._readIntoRequests.push(readIntoRequest);\n    }\n    function ReadableStreamFulfillReadIntoRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readIntoRequest = reader._readIntoRequests.shift();\n        if (done) {\n            readIntoRequest._closeSteps(chunk);\n        }\n        else {\n            readIntoRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadIntoRequests(stream) {\n        return stream._reader._readIntoRequests.length;\n    }\n    function ReadableStreamHasBYOBReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamBYOBReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A BYOB reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            if (!IsReadableByteStreamController(stream._readableStreamController)) {\n                throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n                    'source');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readIntoRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Attempts to reads bytes into view, and returns a promise resolved with the result.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read(view) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('read'));\n            }\n            if (!ArrayBuffer.isView(view)) {\n                return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n            }\n            if (view.byteLength === 0) {\n                return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n            }\n            if (view.buffer.byteLength === 0) {\n                return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readIntoRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamBYOBReaderRead(this, view, readIntoRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                throw byobReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readIntoRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamBYOBReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBReader;\n    }\n    function ReadableStreamBYOBReaderRead(reader, view, readIntoRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'errored') {\n            readIntoRequest._errorSteps(stream._storedError);\n        }\n        else {\n            ReadableByteStreamControllerPullInto(stream._readableStreamController, view, readIntoRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamBYOBReader.\n    function byobReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n    }\n\n    function ExtractHighWaterMark(strategy, defaultHWM) {\n        const { highWaterMark } = strategy;\n        if (highWaterMark === undefined) {\n            return defaultHWM;\n        }\n        if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n            throw new RangeError('Invalid highWaterMark');\n        }\n        return highWaterMark;\n    }\n    function ExtractSizeAlgorithm(strategy) {\n        const { size } = strategy;\n        if (!size) {\n            return () => 1;\n        }\n        return size;\n    }\n\n    function convertQueuingStrategy(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        const size = init === null || init === void 0 ? void 0 : init.size;\n        return {\n            highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n            size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n        };\n    }\n    function convertQueuingStrategySize(fn, context) {\n        assertFunction(fn, context);\n        return chunk => convertUnrestrictedDouble(fn(chunk));\n    }\n\n    function convertUnderlyingSink(original, context) {\n        assertDictionary(original, context);\n        const abort = original === null || original === void 0 ? void 0 : original.abort;\n        const close = original === null || original === void 0 ? void 0 : original.close;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        const write = original === null || original === void 0 ? void 0 : original.write;\n        return {\n            abort: abort === undefined ?\n                undefined :\n                convertUnderlyingSinkAbortCallback(abort, original, `${context} has member 'abort' that`),\n            close: close === undefined ?\n                undefined :\n                convertUnderlyingSinkCloseCallback(close, original, `${context} has member 'close' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSinkStartCallback(start, original, `${context} has member 'start' that`),\n            write: write === undefined ?\n                undefined :\n                convertUnderlyingSinkWriteCallback(write, original, `${context} has member 'write' that`),\n            type\n        };\n    }\n    function convertUnderlyingSinkAbortCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSinkCloseCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return () => promiseCall(fn, original, []);\n    }\n    function convertUnderlyingSinkStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSinkWriteCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    function assertWritableStream(x, context) {\n        if (!IsWritableStream(x)) {\n            throw new TypeError(`${context} is not a WritableStream.`);\n        }\n    }\n\n    function isAbortSignal(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        try {\n            return typeof value.aborted === 'boolean';\n        }\n        catch (_a) {\n            // AbortSignal.prototype.aborted throws if its brand check fails\n            return false;\n        }\n    }\n    const supportsAbortController = typeof AbortController === 'function';\n    /**\n     * Construct a new AbortController, if supported by the platform.\n     *\n     * @internal\n     */\n    function createAbortController() {\n        if (supportsAbortController) {\n            return new AbortController();\n        }\n        return undefined;\n    }\n\n    /**\n     * A writable stream represents a destination for data, into which you can write.\n     *\n     * @public\n     */\n    class WritableStream {\n        constructor(rawUnderlyingSink = {}, rawStrategy = {}) {\n            if (rawUnderlyingSink === undefined) {\n                rawUnderlyingSink = null;\n            }\n            else {\n                assertObject(rawUnderlyingSink, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n            InitializeWritableStream(this);\n            const type = underlyingSink.type;\n            if (type !== undefined) {\n                throw new RangeError('Invalid type is specified');\n            }\n            const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n            const highWaterMark = ExtractHighWaterMark(strategy, 1);\n            SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n        }\n        /**\n         * Returns whether or not the writable stream is locked to a writer.\n         */\n        get locked() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('locked');\n            }\n            return IsWritableStreamLocked(this);\n        }\n        /**\n         * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n         * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n         * mechanism of the underlying sink.\n         *\n         * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n         * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n         * the stream) if the stream is currently locked.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('abort'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n            }\n            return WritableStreamAbort(this, reason);\n        }\n        /**\n         * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n         * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n         *\n         * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n         * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n         * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n         */\n        close() {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('close'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamClose(this);\n        }\n        /**\n         * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n         * is locked, no other writer can be acquired until this one is released.\n         *\n         * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n         * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n         * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n         */\n        getWriter() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('getWriter');\n            }\n            return AcquireWritableStreamDefaultWriter(this);\n        }\n    }\n    Object.defineProperties(WritableStream.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        getWriter: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStream',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStream.\n    function AcquireWritableStreamDefaultWriter(stream) {\n        return new WritableStreamDefaultWriter(stream);\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(WritableStream.prototype);\n        InitializeWritableStream(stream);\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    function InitializeWritableStream(stream) {\n        stream._state = 'writable';\n        // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n        // 'erroring' or 'errored'. May be set to an undefined value.\n        stream._storedError = undefined;\n        stream._writer = undefined;\n        // Initialize to undefined first because the constructor of the controller checks this\n        // variable to validate the caller.\n        stream._writableStreamController = undefined;\n        // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n        // producer without waiting for the queued writes to finish.\n        stream._writeRequests = new SimpleQueue();\n        // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n        // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n        stream._inFlightWriteRequest = undefined;\n        // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n        // has been detached.\n        stream._closeRequest = undefined;\n        // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n        // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n        stream._inFlightCloseRequest = undefined;\n        // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n        stream._pendingAbortRequest = undefined;\n        // The backpressure signal set by the controller.\n        stream._backpressure = false;\n    }\n    function IsWritableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n            return false;\n        }\n        return x instanceof WritableStream;\n    }\n    function IsWritableStreamLocked(stream) {\n        if (stream._writer === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamAbort(stream, reason) {\n        var _a;\n        if (stream._state === 'closed' || stream._state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        stream._writableStreamController._abortReason = reason;\n        (_a = stream._writableStreamController._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        // TypeScript narrows the type of `stream._state` down to 'writable' | 'erroring',\n        // but it doesn't know that signaling abort runs author code that might have changed the state.\n        // Widen the type again by casting to WritableStreamState.\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._pendingAbortRequest !== undefined) {\n            return stream._pendingAbortRequest._promise;\n        }\n        let wasAlreadyErroring = false;\n        if (state === 'erroring') {\n            wasAlreadyErroring = true;\n            // reason will not be used, so don't keep a reference to it.\n            reason = undefined;\n        }\n        const promise = newPromise((resolve, reject) => {\n            stream._pendingAbortRequest = {\n                _promise: undefined,\n                _resolve: resolve,\n                _reject: reject,\n                _reason: reason,\n                _wasAlreadyErroring: wasAlreadyErroring\n            };\n        });\n        stream._pendingAbortRequest._promise = promise;\n        if (!wasAlreadyErroring) {\n            WritableStreamStartErroring(stream, reason);\n        }\n        return promise;\n    }\n    function WritableStreamClose(stream) {\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseRejectedWith(new TypeError(`The stream (in ${state} state) is not in the writable state and cannot be closed`));\n        }\n        const promise = newPromise((resolve, reject) => {\n            const closeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._closeRequest = closeRequest;\n        });\n        const writer = stream._writer;\n        if (writer !== undefined && stream._backpressure && state === 'writable') {\n            defaultWriterReadyPromiseResolve(writer);\n        }\n        WritableStreamDefaultControllerClose(stream._writableStreamController);\n        return promise;\n    }\n    // WritableStream API exposed for controllers.\n    function WritableStreamAddWriteRequest(stream) {\n        const promise = newPromise((resolve, reject) => {\n            const writeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._writeRequests.push(writeRequest);\n        });\n        return promise;\n    }\n    function WritableStreamDealWithRejection(stream, error) {\n        const state = stream._state;\n        if (state === 'writable') {\n            WritableStreamStartErroring(stream, error);\n            return;\n        }\n        WritableStreamFinishErroring(stream);\n    }\n    function WritableStreamStartErroring(stream, reason) {\n        const controller = stream._writableStreamController;\n        stream._state = 'erroring';\n        stream._storedError = reason;\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n        }\n        if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n            WritableStreamFinishErroring(stream);\n        }\n    }\n    function WritableStreamFinishErroring(stream) {\n        stream._state = 'errored';\n        stream._writableStreamController[ErrorSteps]();\n        const storedError = stream._storedError;\n        stream._writeRequests.forEach(writeRequest => {\n            writeRequest._reject(storedError);\n        });\n        stream._writeRequests = new SimpleQueue();\n        if (stream._pendingAbortRequest === undefined) {\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const abortRequest = stream._pendingAbortRequest;\n        stream._pendingAbortRequest = undefined;\n        if (abortRequest._wasAlreadyErroring) {\n            abortRequest._reject(storedError);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n        uponPromise(promise, () => {\n            abortRequest._resolve();\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        }, (reason) => {\n            abortRequest._reject(reason);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        });\n    }\n    function WritableStreamFinishInFlightWrite(stream) {\n        stream._inFlightWriteRequest._resolve(undefined);\n        stream._inFlightWriteRequest = undefined;\n    }\n    function WritableStreamFinishInFlightWriteWithError(stream, error) {\n        stream._inFlightWriteRequest._reject(error);\n        stream._inFlightWriteRequest = undefined;\n        WritableStreamDealWithRejection(stream, error);\n    }\n    function WritableStreamFinishInFlightClose(stream) {\n        stream._inFlightCloseRequest._resolve(undefined);\n        stream._inFlightCloseRequest = undefined;\n        const state = stream._state;\n        if (state === 'erroring') {\n            // The error was too late to do anything, so it is ignored.\n            stream._storedError = undefined;\n            if (stream._pendingAbortRequest !== undefined) {\n                stream._pendingAbortRequest._resolve();\n                stream._pendingAbortRequest = undefined;\n            }\n        }\n        stream._state = 'closed';\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseResolve(writer);\n        }\n    }\n    function WritableStreamFinishInFlightCloseWithError(stream, error) {\n        stream._inFlightCloseRequest._reject(error);\n        stream._inFlightCloseRequest = undefined;\n        // Never execute sink abort() after sink close().\n        if (stream._pendingAbortRequest !== undefined) {\n            stream._pendingAbortRequest._reject(error);\n            stream._pendingAbortRequest = undefined;\n        }\n        WritableStreamDealWithRejection(stream, error);\n    }\n    // TODO(ricea): Fix alphabetical order.\n    function WritableStreamCloseQueuedOrInFlight(stream) {\n        if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamHasOperationMarkedInFlight(stream) {\n        if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamMarkCloseRequestInFlight(stream) {\n        stream._inFlightCloseRequest = stream._closeRequest;\n        stream._closeRequest = undefined;\n    }\n    function WritableStreamMarkFirstWriteRequestInFlight(stream) {\n        stream._inFlightWriteRequest = stream._writeRequests.shift();\n    }\n    function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {\n        if (stream._closeRequest !== undefined) {\n            stream._closeRequest._reject(stream._storedError);\n            stream._closeRequest = undefined;\n        }\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseReject(writer, stream._storedError);\n        }\n    }\n    function WritableStreamUpdateBackpressure(stream, backpressure) {\n        const writer = stream._writer;\n        if (writer !== undefined && backpressure !== stream._backpressure) {\n            if (backpressure) {\n                defaultWriterReadyPromiseReset(writer);\n            }\n            else {\n                defaultWriterReadyPromiseResolve(writer);\n            }\n        }\n        stream._backpressure = backpressure;\n    }\n    /**\n     * A default writer vended by a {@link WritableStream}.\n     *\n     * @public\n     */\n    class WritableStreamDefaultWriter {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n            assertWritableStream(stream, 'First parameter');\n            if (IsWritableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n            }\n            this._ownerWritableStream = stream;\n            stream._writer = this;\n            const state = stream._state;\n            if (state === 'writable') {\n                if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n                    defaultWriterReadyPromiseInitialize(this);\n                }\n                else {\n                    defaultWriterReadyPromiseInitializeAsResolved(this);\n                }\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'erroring') {\n                defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'closed') {\n                defaultWriterReadyPromiseInitializeAsResolved(this);\n                defaultWriterClosedPromiseInitializeAsResolved(this);\n            }\n            else {\n                const storedError = stream._storedError;\n                defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n                defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n            }\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the writers lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.\n         * A producer can use this information to determine the right amount of data to write.\n         *\n         * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n         * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n         * the writers lock is released.\n         */\n        get desiredSize() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('desiredSize');\n            }\n            if (this._ownerWritableStream === undefined) {\n                throw defaultWriterLockException('desiredSize');\n            }\n            return WritableStreamDefaultWriterGetDesiredSize(this);\n        }\n        /**\n         * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions\n         * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n         * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n         *\n         * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become\n         * rejected.\n         */\n        get ready() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n            }\n            return this._readyPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('abort'));\n            }\n            return WritableStreamDefaultWriterAbort(this, reason);\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n         */\n        close() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('close'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(stream)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamDefaultWriterClose(this);\n        }\n        /**\n         * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.\n         * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n         * now on; otherwise, the writer will appear closed.\n         *\n         * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n         * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n         * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n         * other producers from writing in an interleaved manner.\n         */\n        releaseLock() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('releaseLock');\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return;\n            }\n            WritableStreamDefaultWriterRelease(this);\n        }\n        write(chunk = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('write to'));\n            }\n            return WritableStreamDefaultWriterWrite(this, chunk);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultWriter.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        releaseLock: { enumerable: true },\n        write: { enumerable: true },\n        closed: { enumerable: true },\n        desiredSize: { enumerable: true },\n        ready: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultWriter.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultWriter',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStreamDefaultWriter.\n    function IsWritableStreamDefaultWriter(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultWriter;\n    }\n    // A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n    function WritableStreamDefaultWriterAbort(writer, reason) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamAbort(stream, reason);\n    }\n    function WritableStreamDefaultWriterClose(writer) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamClose(stream);\n    }\n    function WritableStreamDefaultWriterCloseWithErrorPropagation(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        return WritableStreamDefaultWriterClose(writer);\n    }\n    function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, error) {\n        if (writer._closedPromiseState === 'pending') {\n            defaultWriterClosedPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterClosedPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, error) {\n        if (writer._readyPromiseState === 'pending') {\n            defaultWriterReadyPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterReadyPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterGetDesiredSize(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (state === 'errored' || state === 'erroring') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n    }\n    function WritableStreamDefaultWriterRelease(writer) {\n        const stream = writer._ownerWritableStream;\n        const releasedError = new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);\n        WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n        // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n        // rejected until afterwards. This means that simply testing state will not work.\n        WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n        stream._writer = undefined;\n        writer._ownerWritableStream = undefined;\n    }\n    function WritableStreamDefaultWriterWrite(writer, chunk) {\n        const stream = writer._ownerWritableStream;\n        const controller = stream._writableStreamController;\n        const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n        if (stream !== writer._ownerWritableStream) {\n            return promiseRejectedWith(defaultWriterLockException('write to'));\n        }\n        const state = stream._state;\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n        }\n        if (state === 'erroring') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        const promise = WritableStreamAddWriteRequest(stream);\n        WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n        return promise;\n    }\n    const closeSentinel = {};\n    /**\n     * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class WritableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.\n         *\n         * @deprecated\n         *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.\n         *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.\n         */\n        get abortReason() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('abortReason');\n            }\n            return this._abortReason;\n        }\n        /**\n         * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.\n         */\n        get signal() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('signal');\n            }\n            if (this._abortController === undefined) {\n                // Older browsers or older Node versions may not support `AbortController` or `AbortSignal`.\n                // We don't want to bundle and ship an `AbortController` polyfill together with our polyfill,\n                // so instead we only implement support for `signal` if we find a global `AbortController` constructor.\n                throw new TypeError('WritableStreamDefaultController.prototype.signal is not supported');\n            }\n            return this._abortController.signal;\n        }\n        /**\n         * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n         *\n         * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n         * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n         * normal lifecycle of interactions with the underlying sink.\n         */\n        error(e = undefined) {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('error');\n            }\n            const state = this._controlledWritableStream._state;\n            if (state !== 'writable') {\n                // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n                // just treat it as a no-op.\n                return;\n            }\n            WritableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [AbortSteps](reason) {\n            const result = this._abortAlgorithm(reason);\n            WritableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [ErrorSteps]() {\n            ResetQueue(this);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultController.prototype, {\n        abortReason: { enumerable: true },\n        signal: { enumerable: true },\n        error: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations implementing interface required by the WritableStream.\n    function IsWritableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultController;\n    }\n    function SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledWritableStream = stream;\n        stream._writableStreamController = controller;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._abortReason = undefined;\n        controller._abortController = createAbortController();\n        controller._started = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._writeAlgorithm = writeAlgorithm;\n        controller._closeAlgorithm = closeAlgorithm;\n        controller._abortAlgorithm = abortAlgorithm;\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n        const startResult = startAlgorithm();\n        const startPromise = promiseResolvedWith(startResult);\n        uponPromise(startPromise, () => {\n            controller._started = true;\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, r => {\n            controller._started = true;\n            WritableStreamDealWithRejection(stream, r);\n        });\n    }\n    function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream, underlyingSink, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let writeAlgorithm = () => promiseResolvedWith(undefined);\n        let closeAlgorithm = () => promiseResolvedWith(undefined);\n        let abortAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSink.start !== undefined) {\n            startAlgorithm = () => underlyingSink.start(controller);\n        }\n        if (underlyingSink.write !== undefined) {\n            writeAlgorithm = chunk => underlyingSink.write(chunk, controller);\n        }\n        if (underlyingSink.close !== undefined) {\n            closeAlgorithm = () => underlyingSink.close();\n        }\n        if (underlyingSink.abort !== undefined) {\n            abortAlgorithm = reason => underlyingSink.abort(reason);\n        }\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\n    function WritableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._writeAlgorithm = undefined;\n        controller._closeAlgorithm = undefined;\n        controller._abortAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    function WritableStreamDefaultControllerClose(controller) {\n        EnqueueValueWithSize(controller, closeSentinel, 0);\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    function WritableStreamDefaultControllerGetChunkSize(controller, chunk) {\n        try {\n            return controller._strategySizeAlgorithm(chunk);\n        }\n        catch (chunkSizeE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n            return 1;\n        }\n    }\n    function WritableStreamDefaultControllerGetDesiredSize(controller) {\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function WritableStreamDefaultControllerWrite(controller, chunk, chunkSize) {\n        try {\n            EnqueueValueWithSize(controller, chunk, chunkSize);\n        }\n        catch (enqueueE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n            return;\n        }\n        const stream = controller._controlledWritableStream;\n        if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n            const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n            WritableStreamUpdateBackpressure(stream, backpressure);\n        }\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    // Abstract operations for the WritableStreamDefaultController.\n    function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller) {\n        const stream = controller._controlledWritableStream;\n        if (!controller._started) {\n            return;\n        }\n        if (stream._inFlightWriteRequest !== undefined) {\n            return;\n        }\n        const state = stream._state;\n        if (state === 'erroring') {\n            WritableStreamFinishErroring(stream);\n            return;\n        }\n        if (controller._queue.length === 0) {\n            return;\n        }\n        const value = PeekQueueValue(controller);\n        if (value === closeSentinel) {\n            WritableStreamDefaultControllerProcessClose(controller);\n        }\n        else {\n            WritableStreamDefaultControllerProcessWrite(controller, value);\n        }\n    }\n    function WritableStreamDefaultControllerErrorIfNeeded(controller, error) {\n        if (controller._controlledWritableStream._state === 'writable') {\n            WritableStreamDefaultControllerError(controller, error);\n        }\n    }\n    function WritableStreamDefaultControllerProcessClose(controller) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkCloseRequestInFlight(stream);\n        DequeueValue(controller);\n        const sinkClosePromise = controller._closeAlgorithm();\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(sinkClosePromise, () => {\n            WritableStreamFinishInFlightClose(stream);\n        }, reason => {\n            WritableStreamFinishInFlightCloseWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerProcessWrite(controller, chunk) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkFirstWriteRequestInFlight(stream);\n        const sinkWritePromise = controller._writeAlgorithm(chunk);\n        uponPromise(sinkWritePromise, () => {\n            WritableStreamFinishInFlightWrite(stream);\n            const state = stream._state;\n            DequeueValue(controller);\n            if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n                const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n                WritableStreamUpdateBackpressure(stream, backpressure);\n            }\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, reason => {\n            if (stream._state === 'writable') {\n                WritableStreamDefaultControllerClearAlgorithms(controller);\n            }\n            WritableStreamFinishInFlightWriteWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerGetBackpressure(controller) {\n        const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n        return desiredSize <= 0;\n    }\n    // A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n    function WritableStreamDefaultControllerError(controller, error) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        WritableStreamStartErroring(stream, error);\n    }\n    // Helper functions for the WritableStream.\n    function streamBrandCheckException$2(name) {\n        return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n    }\n    // Helper functions for the WritableStreamDefaultController.\n    function defaultControllerBrandCheckException$2(name) {\n        return new TypeError(`WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);\n    }\n    // Helper functions for the WritableStreamDefaultWriter.\n    function defaultWriterBrandCheckException(name) {\n        return new TypeError(`WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n    }\n    function defaultWriterLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released writer');\n    }\n    function defaultWriterClosedPromiseInitialize(writer) {\n        writer._closedPromise = newPromise((resolve, reject) => {\n            writer._closedPromise_resolve = resolve;\n            writer._closedPromise_reject = reject;\n            writer._closedPromiseState = 'pending';\n        });\n    }\n    function defaultWriterClosedPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseReject(writer, reason);\n    }\n    function defaultWriterClosedPromiseInitializeAsResolved(writer) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseResolve(writer);\n    }\n    function defaultWriterClosedPromiseReject(writer, reason) {\n        if (writer._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._closedPromise);\n        writer._closedPromise_reject(reason);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'rejected';\n    }\n    function defaultWriterClosedPromiseResetToRejected(writer, reason) {\n        defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterClosedPromiseResolve(writer) {\n        if (writer._closedPromise_resolve === undefined) {\n            return;\n        }\n        writer._closedPromise_resolve(undefined);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'resolved';\n    }\n    function defaultWriterReadyPromiseInitialize(writer) {\n        writer._readyPromise = newPromise((resolve, reject) => {\n            writer._readyPromise_resolve = resolve;\n            writer._readyPromise_reject = reject;\n        });\n        writer._readyPromiseState = 'pending';\n    }\n    function defaultWriterReadyPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseReject(writer, reason);\n    }\n    function defaultWriterReadyPromiseInitializeAsResolved(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseResolve(writer);\n    }\n    function defaultWriterReadyPromiseReject(writer, reason) {\n        if (writer._readyPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._readyPromise);\n        writer._readyPromise_reject(reason);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'rejected';\n    }\n    function defaultWriterReadyPromiseReset(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n    }\n    function defaultWriterReadyPromiseResetToRejected(writer, reason) {\n        defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterReadyPromiseResolve(writer) {\n        if (writer._readyPromise_resolve === undefined) {\n            return;\n        }\n        writer._readyPromise_resolve(undefined);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'fulfilled';\n    }\n\n    /// <reference lib=\"dom\" />\n    const NativeDOMException = typeof DOMException !== 'undefined' ? DOMException : undefined;\n\n    /// <reference types=\"node\" />\n    function isDOMExceptionConstructor(ctor) {\n        if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n            return false;\n        }\n        try {\n            new ctor();\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    function createDOMExceptionPolyfill() {\n        // eslint-disable-next-line no-shadow\n        const ctor = function DOMException(message, name) {\n            this.message = message || '';\n            this.name = name || 'Error';\n            if (Error.captureStackTrace) {\n                Error.captureStackTrace(this, this.constructor);\n            }\n        };\n        ctor.prototype = Object.create(Error.prototype);\n        Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n        return ctor;\n    }\n    // eslint-disable-next-line no-redeclare\n    const DOMException$1 = isDOMExceptionConstructor(NativeDOMException) ? NativeDOMException : createDOMExceptionPolyfill();\n\n    function ReadableStreamPipeTo(source, dest, preventClose, preventAbort, preventCancel, signal) {\n        const reader = AcquireReadableStreamDefaultReader(source);\n        const writer = AcquireWritableStreamDefaultWriter(dest);\n        source._disturbed = true;\n        let shuttingDown = false;\n        // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n        let currentWrite = promiseResolvedWith(undefined);\n        return newPromise((resolve, reject) => {\n            let abortAlgorithm;\n            if (signal !== undefined) {\n                abortAlgorithm = () => {\n                    const error = new DOMException$1('Aborted', 'AbortError');\n                    const actions = [];\n                    if (!preventAbort) {\n                        actions.push(() => {\n                            if (dest._state === 'writable') {\n                                return WritableStreamAbort(dest, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    if (!preventCancel) {\n                        actions.push(() => {\n                            if (source._state === 'readable') {\n                                return ReadableStreamCancel(source, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n                };\n                if (signal.aborted) {\n                    abortAlgorithm();\n                    return;\n                }\n                signal.addEventListener('abort', abortAlgorithm);\n            }\n            // Using reader and writer, read all chunks from this and write them to dest\n            // - Backpressure must be enforced\n            // - Shutdown must stop all activity\n            function pipeLoop() {\n                return newPromise((resolveLoop, rejectLoop) => {\n                    function next(done) {\n                        if (done) {\n                            resolveLoop();\n                        }\n                        else {\n                            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n                            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n                            PerformPromiseThen(pipeStep(), next, rejectLoop);\n                        }\n                    }\n                    next(false);\n                });\n            }\n            function pipeStep() {\n                if (shuttingDown) {\n                    return promiseResolvedWith(true);\n                }\n                return PerformPromiseThen(writer._readyPromise, () => {\n                    return newPromise((resolveRead, rejectRead) => {\n                        ReadableStreamDefaultReaderRead(reader, {\n                            _chunkSteps: chunk => {\n                                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                                resolveRead(false);\n                            },\n                            _closeSteps: () => resolveRead(true),\n                            _errorSteps: rejectRead\n                        });\n                    });\n                });\n            }\n            // Errors must be propagated forward\n            isOrBecomesErrored(source, reader._closedPromise, storedError => {\n                if (!preventAbort) {\n                    shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Errors must be propagated backward\n            isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Closing must be propagated forward\n            isOrBecomesClosed(source, reader._closedPromise, () => {\n                if (!preventClose) {\n                    shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n                }\n                else {\n                    shutdown();\n                }\n            });\n            // Closing must be propagated backward\n            if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n                const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n                }\n                else {\n                    shutdown(true, destClosed);\n                }\n            }\n            setPromiseIsHandledToTrue(pipeLoop());\n            function waitForWritesToFinish() {\n                // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n                // for that too.\n                const oldCurrentWrite = currentWrite;\n                return PerformPromiseThen(currentWrite, () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined);\n            }\n            function isOrBecomesErrored(stream, promise, action) {\n                if (stream._state === 'errored') {\n                    action(stream._storedError);\n                }\n                else {\n                    uponRejection(promise, action);\n                }\n            }\n            function isOrBecomesClosed(stream, promise, action) {\n                if (stream._state === 'closed') {\n                    action();\n                }\n                else {\n                    uponFulfillment(promise, action);\n                }\n            }\n            function shutdownWithAction(action, originalIsError, originalError) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), doTheRest);\n                }\n                else {\n                    doTheRest();\n                }\n                function doTheRest() {\n                    uponPromise(action(), () => finalize(originalIsError, originalError), newError => finalize(true, newError));\n                }\n            }\n            function shutdown(isError, error) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n                }\n                else {\n                    finalize(isError, error);\n                }\n            }\n            function finalize(isError, error) {\n                WritableStreamDefaultWriterRelease(writer);\n                ReadableStreamReaderGenericRelease(reader);\n                if (signal !== undefined) {\n                    signal.removeEventListener('abort', abortAlgorithm);\n                }\n                if (isError) {\n                    reject(error);\n                }\n                else {\n                    resolve(undefined);\n                }\n            }\n        });\n    }\n\n    /**\n     * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('desiredSize');\n            }\n            return ReadableStreamDefaultControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('close');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits close');\n            }\n            ReadableStreamDefaultControllerClose(this);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('enqueue');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits enqueue');\n            }\n            return ReadableStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('error');\n            }\n            ReadableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableStream;\n            if (this._queue.length > 0) {\n                const chunk = DequeueValue(this);\n                if (this._closeRequested && this._queue.length === 0) {\n                    ReadableStreamDefaultControllerClearAlgorithms(this);\n                    ReadableStreamClose(stream);\n                }\n                else {\n                    ReadableStreamDefaultControllerCallPullIfNeeded(this);\n                }\n                readRequest._chunkSteps(chunk);\n            }\n            else {\n                ReadableStreamAddReadRequest(stream, readRequest);\n                ReadableStreamDefaultControllerCallPullIfNeeded(this);\n            }\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStreamDefaultController.\n    function IsReadableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultController;\n    }\n    function ReadableStreamDefaultControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableStreamDefaultControllerError(controller, e);\n        });\n    }\n    function ReadableStreamDefaultControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableStream;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    // A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n    function ReadableStreamDefaultControllerClose(controller) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        controller._closeRequested = true;\n        if (controller._queue.length === 0) {\n            ReadableStreamDefaultControllerClearAlgorithms(controller);\n            ReadableStreamClose(stream);\n        }\n    }\n    function ReadableStreamDefaultControllerEnqueue(controller, chunk) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            ReadableStreamFulfillReadRequest(stream, chunk, false);\n        }\n        else {\n            let chunkSize;\n            try {\n                chunkSize = controller._strategySizeAlgorithm(chunk);\n            }\n            catch (chunkSizeE) {\n                ReadableStreamDefaultControllerError(controller, chunkSizeE);\n                throw chunkSizeE;\n            }\n            try {\n                EnqueueValueWithSize(controller, chunk, chunkSize);\n            }\n            catch (enqueueE) {\n                ReadableStreamDefaultControllerError(controller, enqueueE);\n                throw enqueueE;\n            }\n        }\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n    }\n    function ReadableStreamDefaultControllerError(controller, e) {\n        const stream = controller._controlledReadableStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ResetQueue(controller);\n        ReadableStreamDefaultControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableStreamDefaultControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    // This is used in the implementation of TransformStream.\n    function ReadableStreamDefaultControllerHasBackpressure(controller) {\n        if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n            return false;\n        }\n        return true;\n    }\n    function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (!controller._closeRequested && state === 'readable') {\n            return true;\n        }\n        return false;\n    }\n    function SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledReadableStream = stream;\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._started = false;\n        controller._closeRequested = false;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableStreamDefaultControllerError(controller, r);\n        });\n    }\n    function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream, underlyingSource, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSource.start !== undefined) {\n            startAlgorithm = () => underlyingSource.start(controller);\n        }\n        if (underlyingSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingSource.pull(controller);\n        }\n        if (underlyingSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingSource.cancel(reason);\n        }\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // Helper functions for the ReadableStreamDefaultController.\n    function defaultControllerBrandCheckException$1(name) {\n        return new TypeError(`ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n    }\n\n    function ReadableStreamTee(stream, cloneForBranch2) {\n        if (IsReadableByteStreamController(stream._readableStreamController)) {\n            return ReadableByteStreamTee(stream);\n        }\n        return ReadableStreamDefaultTee(stream);\n    }\n    function ReadableStreamDefaultTee(stream, cloneForBranch2) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgain = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function pullAlgorithm() {\n            if (reading) {\n                readAgain = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgain = false;\n                        const chunk1 = chunk;\n                        const chunk2 = chunk;\n                        // There is no way to access the cloning code right now in the reference implementation.\n                        // If we add one then we'll need an implementation for serializable objects.\n                        // if (!canceled2 && cloneForBranch2) {\n                        //   chunk2 = StructuredDeserialize(StructuredSerialize(chunk2));\n                        // }\n                        if (!canceled1) {\n                            ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgain) {\n                            pullAlgorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableStreamDefaultControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableStreamDefaultControllerClose(branch2._readableStreamController);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            // do nothing\n        }\n        branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n        branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n        uponRejection(reader._closedPromise, (r) => {\n            ReadableStreamDefaultControllerError(branch1._readableStreamController, r);\n            ReadableStreamDefaultControllerError(branch2._readableStreamController, r);\n            if (!canceled1 || !canceled2) {\n                resolveCancelPromise(undefined);\n            }\n        });\n        return [branch1, branch2];\n    }\n    function ReadableByteStreamTee(stream) {\n        let reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgainForBranch1 = false;\n        let readAgainForBranch2 = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function forwardReaderError(thisReader) {\n            uponRejection(thisReader._closedPromise, r => {\n                if (thisReader !== reader) {\n                    return;\n                }\n                ReadableByteStreamControllerError(branch1._readableStreamController, r);\n                ReadableByteStreamControllerError(branch2._readableStreamController, r);\n                if (!canceled1 || !canceled2) {\n                    resolveCancelPromise(undefined);\n                }\n            });\n        }\n        function pullWithDefaultReader() {\n            if (IsReadableStreamBYOBReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamDefaultReader(stream);\n                forwardReaderError(reader);\n            }\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const chunk1 = chunk;\n                        let chunk2 = chunk;\n                        if (!canceled1 && !canceled2) {\n                            try {\n                                chunk2 = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                        }\n                        if (!canceled1) {\n                            ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableByteStreamControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableByteStreamControllerClose(branch2._readableStreamController);\n                    }\n                    if (branch1._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);\n                    }\n                    if (branch2._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n        }\n        function pullWithBYOBReader(view, forBranch2) {\n            if (IsReadableStreamDefaultReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamBYOBReader(stream);\n                forwardReaderError(reader);\n            }\n            const byobBranch = forBranch2 ? branch2 : branch1;\n            const otherBranch = forBranch2 ? branch1 : branch2;\n            const readIntoRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                        const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                        if (!otherCanceled) {\n                            let clonedChunk;\n                            try {\n                                clonedChunk = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                            if (!byobCanceled) {\n                                ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                            }\n                            ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);\n                        }\n                        else if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: chunk => {\n                    reading = false;\n                    const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                    const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                    if (!byobCanceled) {\n                        ReadableByteStreamControllerClose(byobBranch._readableStreamController);\n                    }\n                    if (!otherCanceled) {\n                        ReadableByteStreamControllerClose(otherBranch._readableStreamController);\n                    }\n                    if (chunk !== undefined) {\n                        if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {\n                            ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);\n                        }\n                    }\n                    if (!byobCanceled || !otherCanceled) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamBYOBReaderRead(reader, view, readIntoRequest);\n        }\n        function pull1Algorithm() {\n            if (reading) {\n                readAgainForBranch1 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, false);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function pull2Algorithm() {\n            if (reading) {\n                readAgainForBranch2 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, true);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            return;\n        }\n        branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);\n        branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);\n        forwardReaderError(reader);\n        return [branch1, branch2];\n    }\n\n    function convertUnderlyingDefaultOrByteSource(source, context) {\n        assertDictionary(source, context);\n        const original = source;\n        const autoAllocateChunkSize = original === null || original === void 0 ? void 0 : original.autoAllocateChunkSize;\n        const cancel = original === null || original === void 0 ? void 0 : original.cancel;\n        const pull = original === null || original === void 0 ? void 0 : original.pull;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        return {\n            autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n                undefined :\n                convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize, `${context} has member 'autoAllocateChunkSize' that`),\n            cancel: cancel === undefined ?\n                undefined :\n                convertUnderlyingSourceCancelCallback(cancel, original, `${context} has member 'cancel' that`),\n            pull: pull === undefined ?\n                undefined :\n                convertUnderlyingSourcePullCallback(pull, original, `${context} has member 'pull' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSourceStartCallback(start, original, `${context} has member 'start' that`),\n            type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n        };\n    }\n    function convertUnderlyingSourceCancelCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSourcePullCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSourceStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertReadableStreamType(type, context) {\n        type = `${type}`;\n        if (type !== 'bytes') {\n            throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n        }\n        return type;\n    }\n\n    function convertReaderOptions(options, context) {\n        assertDictionary(options, context);\n        const mode = options === null || options === void 0 ? void 0 : options.mode;\n        return {\n            mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n        };\n    }\n    function convertReadableStreamReaderMode(mode, context) {\n        mode = `${mode}`;\n        if (mode !== 'byob') {\n            throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n        }\n        return mode;\n    }\n\n    function convertIteratorOptions(options, context) {\n        assertDictionary(options, context);\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        return { preventCancel: Boolean(preventCancel) };\n    }\n\n    function convertPipeOptions(options, context) {\n        assertDictionary(options, context);\n        const preventAbort = options === null || options === void 0 ? void 0 : options.preventAbort;\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        const preventClose = options === null || options === void 0 ? void 0 : options.preventClose;\n        const signal = options === null || options === void 0 ? void 0 : options.signal;\n        if (signal !== undefined) {\n            assertAbortSignal(signal, `${context} has member 'signal' that`);\n        }\n        return {\n            preventAbort: Boolean(preventAbort),\n            preventCancel: Boolean(preventCancel),\n            preventClose: Boolean(preventClose),\n            signal\n        };\n    }\n    function assertAbortSignal(signal, context) {\n        if (!isAbortSignal(signal)) {\n            throw new TypeError(`${context} is not an AbortSignal.`);\n        }\n    }\n\n    function convertReadableWritablePair(pair, context) {\n        assertDictionary(pair, context);\n        const readable = pair === null || pair === void 0 ? void 0 : pair.readable;\n        assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n        assertReadableStream(readable, `${context} has member 'readable' that`);\n        const writable = pair === null || pair === void 0 ? void 0 : pair.writable;\n        assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n        assertWritableStream(writable, `${context} has member 'writable' that`);\n        return { readable, writable };\n    }\n\n    /**\n     * A readable stream represents a source of data, from which you can read.\n     *\n     * @public\n     */\n    class ReadableStream {\n        constructor(rawUnderlyingSource = {}, rawStrategy = {}) {\n            if (rawUnderlyingSource === undefined) {\n                rawUnderlyingSource = null;\n            }\n            else {\n                assertObject(rawUnderlyingSource, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n            InitializeReadableStream(this);\n            if (underlyingSource.type === 'bytes') {\n                if (strategy.size !== undefined) {\n                    throw new RangeError('The strategy for a byte stream cannot have a size function');\n                }\n                const highWaterMark = ExtractHighWaterMark(strategy, 0);\n                SetUpReadableByteStreamControllerFromUnderlyingSource(this, underlyingSource, highWaterMark);\n            }\n            else {\n                const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n                const highWaterMark = ExtractHighWaterMark(strategy, 1);\n                SetUpReadableStreamDefaultControllerFromUnderlyingSource(this, underlyingSource, highWaterMark, sizeAlgorithm);\n            }\n        }\n        /**\n         * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n         */\n        get locked() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('locked');\n            }\n            return IsReadableStreamLocked(this);\n        }\n        /**\n         * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n         *\n         * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n         * method, which might or might not use it.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('cancel'));\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n            }\n            return ReadableStreamCancel(this, reason);\n        }\n        getReader(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('getReader');\n            }\n            const options = convertReaderOptions(rawOptions, 'First parameter');\n            if (options.mode === undefined) {\n                return AcquireReadableStreamDefaultReader(this);\n            }\n            return AcquireReadableStreamBYOBReader(this);\n        }\n        pipeThrough(rawTransform, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('pipeThrough');\n            }\n            assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n            const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n            const options = convertPipeOptions(rawOptions, 'Second parameter');\n            if (IsReadableStreamLocked(this)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n            }\n            if (IsWritableStreamLocked(transform.writable)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n            }\n            const promise = ReadableStreamPipeTo(this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n            setPromiseIsHandledToTrue(promise);\n            return transform.readable;\n        }\n        pipeTo(destination, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('pipeTo'));\n            }\n            if (destination === undefined) {\n                return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n            }\n            if (!IsWritableStream(destination)) {\n                return promiseRejectedWith(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`));\n            }\n            let options;\n            try {\n                options = convertPipeOptions(rawOptions, 'Second parameter');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream'));\n            }\n            if (IsWritableStreamLocked(destination)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream'));\n            }\n            return ReadableStreamPipeTo(this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n        }\n        /**\n         * Tees this readable stream, returning a two-element array containing the two resulting branches as\n         * new {@link ReadableStream} instances.\n         *\n         * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n         * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n         * propagated to the stream's underlying source.\n         *\n         * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n         * this could allow interference between the two branches.\n         */\n        tee() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('tee');\n            }\n            const branches = ReadableStreamTee(this);\n            return CreateArrayFromList(branches);\n        }\n        values(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('values');\n            }\n            const options = convertIteratorOptions(rawOptions, 'First parameter');\n            return AcquireReadableStreamAsyncIterator(this, options.preventCancel);\n        }\n    }\n    Object.defineProperties(ReadableStream.prototype, {\n        cancel: { enumerable: true },\n        getReader: { enumerable: true },\n        pipeThrough: { enumerable: true },\n        pipeTo: { enumerable: true },\n        tee: { enumerable: true },\n        values: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStream',\n            configurable: true\n        });\n    }\n    if (typeof SymbolPolyfill.asyncIterator === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.asyncIterator, {\n            value: ReadableStream.prototype.values,\n            writable: true,\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStream.\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableByteStream(startAlgorithm, pullAlgorithm, cancelAlgorithm) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, undefined);\n        return stream;\n    }\n    function InitializeReadableStream(stream) {\n        stream._state = 'readable';\n        stream._reader = undefined;\n        stream._storedError = undefined;\n        stream._disturbed = false;\n    }\n    function IsReadableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStream;\n    }\n    function IsReadableStreamLocked(stream) {\n        if (stream._reader === undefined) {\n            return false;\n        }\n        return true;\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamCancel(stream, reason) {\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        ReadableStreamClose(stream);\n        const reader = stream._reader;\n        if (reader !== undefined && IsReadableStreamBYOBReader(reader)) {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._closeSteps(undefined);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n        const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n        return transformPromiseWith(sourceCancelPromise, noop);\n    }\n    function ReadableStreamClose(stream) {\n        stream._state = 'closed';\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseResolve(reader);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._closeSteps();\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n    }\n    function ReadableStreamError(stream, e) {\n        stream._state = 'errored';\n        stream._storedError = e;\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseReject(reader, e);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._errorSteps(e);\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n        else {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._errorSteps(e);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamBrandCheckException$1(name) {\n        return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n    }\n\n    function convertQueuingStrategyInit(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n        return {\n            highWaterMark: convertUnrestrictedDouble(highWaterMark)\n        };\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const byteLengthSizeFunction = (chunk) => {\n        return chunk.byteLength;\n    };\n    try {\n        Object.defineProperty(byteLengthSizeFunction, 'name', {\n            value: 'size',\n            configurable: true\n        });\n    }\n    catch (_a) {\n        // This property is non-configurable in older browsers, so ignore if this throws.\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n    }\n    /**\n     * A queuing strategy that counts the number of bytes in each chunk.\n     *\n     * @public\n     */\n    class ByteLengthQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('highWaterMark');\n            }\n            return this._byteLengthQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by returning the value of its `byteLength` property.\n         */\n        get size() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('size');\n            }\n            return byteLengthSizeFunction;\n        }\n    }\n    Object.defineProperties(ByteLengthQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ByteLengthQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ByteLengthQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the ByteLengthQueuingStrategy.\n    function byteLengthBrandCheckException(name) {\n        return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n    }\n    function IsByteLengthQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof ByteLengthQueuingStrategy;\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const countSizeFunction = () => {\n        return 1;\n    };\n    try {\n        Object.defineProperty(countSizeFunction, 'name', {\n            value: 'size',\n            configurable: true\n        });\n    }\n    catch (_a) {\n        // This property is non-configurable in older browsers, so ignore if this throws.\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n    }\n    /**\n     * A queuing strategy that counts the number of chunks.\n     *\n     * @public\n     */\n    class CountQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('highWaterMark');\n            }\n            return this._countQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by always returning 1.\n         * This ensures that the total queue size is a count of the number of chunks in the queue.\n         */\n        get size() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('size');\n            }\n            return countSizeFunction;\n        }\n    }\n    Object.defineProperties(CountQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(CountQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'CountQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the CountQueuingStrategy.\n    function countBrandCheckException(name) {\n        return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n    }\n    function IsCountQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof CountQueuingStrategy;\n    }\n\n    function convertTransformer(original, context) {\n        assertDictionary(original, context);\n        const flush = original === null || original === void 0 ? void 0 : original.flush;\n        const readableType = original === null || original === void 0 ? void 0 : original.readableType;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const transform = original === null || original === void 0 ? void 0 : original.transform;\n        const writableType = original === null || original === void 0 ? void 0 : original.writableType;\n        return {\n            flush: flush === undefined ?\n                undefined :\n                convertTransformerFlushCallback(flush, original, `${context} has member 'flush' that`),\n            readableType,\n            start: start === undefined ?\n                undefined :\n                convertTransformerStartCallback(start, original, `${context} has member 'start' that`),\n            transform: transform === undefined ?\n                undefined :\n                convertTransformerTransformCallback(transform, original, `${context} has member 'transform' that`),\n            writableType\n        };\n    }\n    function convertTransformerFlushCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertTransformerStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertTransformerTransformCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    // Class TransformStream\n    /**\n     * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n     * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n     * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n     * made available for reading from the readable side.\n     *\n     * @public\n     */\n    class TransformStream {\n        constructor(rawTransformer = {}, rawWritableStrategy = {}, rawReadableStrategy = {}) {\n            if (rawTransformer === undefined) {\n                rawTransformer = null;\n            }\n            const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n            const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n            const transformer = convertTransformer(rawTransformer, 'First parameter');\n            if (transformer.readableType !== undefined) {\n                throw new RangeError('Invalid readableType specified');\n            }\n            if (transformer.writableType !== undefined) {\n                throw new RangeError('Invalid writableType specified');\n            }\n            const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n            const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n            const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n            const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n            let startPromise_resolve;\n            const startPromise = newPromise(resolve => {\n                startPromise_resolve = resolve;\n            });\n            InitializeTransformStream(this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n            SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n            if (transformer.start !== undefined) {\n                startPromise_resolve(transformer.start(this._transformStreamController));\n            }\n            else {\n                startPromise_resolve(undefined);\n            }\n        }\n        /**\n         * The readable side of the transform stream.\n         */\n        get readable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('readable');\n            }\n            return this._readable;\n        }\n        /**\n         * The writable side of the transform stream.\n         */\n        get writable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('writable');\n            }\n            return this._writable;\n        }\n    }\n    Object.defineProperties(TransformStream.prototype, {\n        readable: { enumerable: true },\n        writable: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStream',\n            configurable: true\n        });\n    }\n    function InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm) {\n        function startAlgorithm() {\n            return startPromise;\n        }\n        function writeAlgorithm(chunk) {\n            return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n        }\n        function abortAlgorithm(reason) {\n            return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n        }\n        function closeAlgorithm() {\n            return TransformStreamDefaultSinkCloseAlgorithm(stream);\n        }\n        stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, writableHighWaterMark, writableSizeAlgorithm);\n        function pullAlgorithm() {\n            return TransformStreamDefaultSourcePullAlgorithm(stream);\n        }\n        function cancelAlgorithm(reason) {\n            TransformStreamErrorWritableAndUnblockWrite(stream, reason);\n            return promiseResolvedWith(undefined);\n        }\n        stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n        // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n        stream._backpressure = undefined;\n        stream._backpressureChangePromise = undefined;\n        stream._backpressureChangePromise_resolve = undefined;\n        TransformStreamSetBackpressure(stream, true);\n        stream._transformStreamController = undefined;\n    }\n    function IsTransformStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n            return false;\n        }\n        return x instanceof TransformStream;\n    }\n    // This is a no-op if both sides are already errored.\n    function TransformStreamError(stream, e) {\n        ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e);\n        TransformStreamErrorWritableAndUnblockWrite(stream, e);\n    }\n    function TransformStreamErrorWritableAndUnblockWrite(stream, e) {\n        TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n        WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n        if (stream._backpressure) {\n            // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n            // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n            // _backpressure is set.\n            TransformStreamSetBackpressure(stream, false);\n        }\n    }\n    function TransformStreamSetBackpressure(stream, backpressure) {\n        // Passes also when called during construction.\n        if (stream._backpressureChangePromise !== undefined) {\n            stream._backpressureChangePromise_resolve();\n        }\n        stream._backpressureChangePromise = newPromise(resolve => {\n            stream._backpressureChangePromise_resolve = resolve;\n        });\n        stream._backpressure = backpressure;\n    }\n    // Class TransformStreamDefaultController\n    /**\n     * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n     *\n     * @public\n     */\n    class TransformStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.\n         */\n        get desiredSize() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('desiredSize');\n            }\n            const readableController = this._controlledTransformStream._readable._readableStreamController;\n            return ReadableStreamDefaultControllerGetDesiredSize(readableController);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('enqueue');\n            }\n            TransformStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors both the readable side and the writable side of the controlled transform stream, making all future\n         * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n         */\n        error(reason = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('error');\n            }\n            TransformStreamDefaultControllerError(this, reason);\n        }\n        /**\n         * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n         * transformer only needs to consume a portion of the chunks written to the writable side.\n         */\n        terminate() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('terminate');\n            }\n            TransformStreamDefaultControllerTerminate(this);\n        }\n    }\n    Object.defineProperties(TransformStreamDefaultController.prototype, {\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        terminate: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Transform Stream Default Controller Abstract Operations\n    function IsTransformStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n            return false;\n        }\n        return x instanceof TransformStreamDefaultController;\n    }\n    function SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm) {\n        controller._controlledTransformStream = stream;\n        stream._transformStreamController = controller;\n        controller._transformAlgorithm = transformAlgorithm;\n        controller._flushAlgorithm = flushAlgorithm;\n    }\n    function SetUpTransformStreamDefaultControllerFromTransformer(stream, transformer) {\n        const controller = Object.create(TransformStreamDefaultController.prototype);\n        let transformAlgorithm = (chunk) => {\n            try {\n                TransformStreamDefaultControllerEnqueue(controller, chunk);\n                return promiseResolvedWith(undefined);\n            }\n            catch (transformResultE) {\n                return promiseRejectedWith(transformResultE);\n            }\n        };\n        let flushAlgorithm = () => promiseResolvedWith(undefined);\n        if (transformer.transform !== undefined) {\n            transformAlgorithm = chunk => transformer.transform(chunk, controller);\n        }\n        if (transformer.flush !== undefined) {\n            flushAlgorithm = () => transformer.flush(controller);\n        }\n        SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm);\n    }\n    function TransformStreamDefaultControllerClearAlgorithms(controller) {\n        controller._transformAlgorithm = undefined;\n        controller._flushAlgorithm = undefined;\n    }\n    function TransformStreamDefaultControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n            throw new TypeError('Readable side is not in a state that permits enqueue');\n        }\n        // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n        // accept TransformStreamDefaultControllerEnqueue() calls.\n        try {\n            ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n        }\n        catch (e) {\n            // This happens when readableStrategy.size() throws.\n            TransformStreamErrorWritableAndUnblockWrite(stream, e);\n            throw stream._readable._storedError;\n        }\n        const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n        if (backpressure !== stream._backpressure) {\n            TransformStreamSetBackpressure(stream, true);\n        }\n    }\n    function TransformStreamDefaultControllerError(controller, e) {\n        TransformStreamError(controller._controlledTransformStream, e);\n    }\n    function TransformStreamDefaultControllerPerformTransform(controller, chunk) {\n        const transformPromise = controller._transformAlgorithm(chunk);\n        return transformPromiseWith(transformPromise, undefined, r => {\n            TransformStreamError(controller._controlledTransformStream, r);\n            throw r;\n        });\n    }\n    function TransformStreamDefaultControllerTerminate(controller) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        ReadableStreamDefaultControllerClose(readableController);\n        const error = new TypeError('TransformStream terminated');\n        TransformStreamErrorWritableAndUnblockWrite(stream, error);\n    }\n    // TransformStreamDefaultSink Algorithms\n    function TransformStreamDefaultSinkWriteAlgorithm(stream, chunk) {\n        const controller = stream._transformStreamController;\n        if (stream._backpressure) {\n            const backpressureChangePromise = stream._backpressureChangePromise;\n            return transformPromiseWith(backpressureChangePromise, () => {\n                const writable = stream._writable;\n                const state = writable._state;\n                if (state === 'erroring') {\n                    throw writable._storedError;\n                }\n                return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n            });\n        }\n        return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n    }\n    function TransformStreamDefaultSinkAbortAlgorithm(stream, reason) {\n        // abort() is not called synchronously, so it is possible for abort() to be called when the stream is already\n        // errored.\n        TransformStreamError(stream, reason);\n        return promiseResolvedWith(undefined);\n    }\n    function TransformStreamDefaultSinkCloseAlgorithm(stream) {\n        // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n        const readable = stream._readable;\n        const controller = stream._transformStreamController;\n        const flushPromise = controller._flushAlgorithm();\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        // Return a promise that is fulfilled with undefined on success.\n        return transformPromiseWith(flushPromise, () => {\n            if (readable._state === 'errored') {\n                throw readable._storedError;\n            }\n            ReadableStreamDefaultControllerClose(readable._readableStreamController);\n        }, r => {\n            TransformStreamError(stream, r);\n            throw readable._storedError;\n        });\n    }\n    // TransformStreamDefaultSource Algorithms\n    function TransformStreamDefaultSourcePullAlgorithm(stream) {\n        // Invariant. Enforced by the promises returned by start() and pull().\n        TransformStreamSetBackpressure(stream, false);\n        // Prevent the next pull() call until there is backpressure.\n        return stream._backpressureChangePromise;\n    }\n    // Helper functions for the TransformStreamDefaultController.\n    function defaultControllerBrandCheckException(name) {\n        return new TypeError(`TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n    }\n    // Helper functions for the TransformStream.\n    function streamBrandCheckException(name) {\n        return new TypeError(`TransformStream.prototype.${name} can only be used on a TransformStream`);\n    }\n\n    exports.ByteLengthQueuingStrategy = ByteLengthQueuingStrategy;\n    exports.CountQueuingStrategy = CountQueuingStrategy;\n    exports.ReadableByteStreamController = ReadableByteStreamController;\n    exports.ReadableStream = ReadableStream;\n    exports.ReadableStreamBYOBReader = ReadableStreamBYOBReader;\n    exports.ReadableStreamBYOBRequest = ReadableStreamBYOBRequest;\n    exports.ReadableStreamDefaultController = ReadableStreamDefaultController;\n    exports.ReadableStreamDefaultReader = ReadableStreamDefaultReader;\n    exports.TransformStream = TransformStream;\n    exports.TransformStreamDefaultController = TransformStreamDefaultController;\n    exports.WritableStream = WritableStream;\n    exports.WritableStreamDefaultController = WritableStreamDefaultController;\n    exports.WritableStreamDefaultWriter = WritableStreamDefaultWriter;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ponyfill.es2018.js.map\n","/**\n * GetDagRunsTool - Language Model Tool for retrieving DAG runs\n * \n * This tool retrieves the runs for a specific DAG, optionally filtered by date.\n * Returns run ID, start time, duration, and status for each run.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport * as ui from '../common/UI';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying DAG runs\n */\nexport interface IGetDagRunsParams {\n    dagId: string;\n    date?: string; // Optional date in ISO format (defaults to today)\n}\n\n/**\n * GetDagRunsTool - Implements vscode.LanguageModelTool for retrieving DAG runs\n */\nexport class GetDagRunsTool implements vscode.LanguageModelTool<IGetDagRunsParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, date } = options.input;\n        const dateStr = date ||  ui.toISODateString(new Date());\n\n        return {\n            invocationMessage: `Retrieving runs for DAG '${dagId}' (date: ${dateStr})`\n        };\n    }\n\n    /**\n     * Execute the query for DAG runs\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagRunsTool.invoke');\n        \n        try {\n            // Get DAG run history from the API\n            const result = await this.client.getDagRunHistory(dagId);\n\n            if (!result || !result.dag_runs || result.dag_runs.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No runs found for DAG '${dagId}'.`)\n                ]);\n            }\n\n            let runs = result.dag_runs;\n\n            // Filter by date if provided\n            if (date) {\n                const targetDate = new Date(date);\n                runs = runs.filter((run: any) => {\n                    const runDate = new Date(run.execution_date || run.logical_date);\n                    return  ui.toISODateString(runDate) === ui.toISODateString(targetDate);\n                });\n\n                if (runs.length === 0) {\n                    return new vscode.LanguageModelToolResult([\n                        new vscode.LanguageModelTextPart(` No runs found for DAG '${dagId}' on ${date}.`)\n                    ]);\n                }\n            }\n\n            // Build detailed summary\n            let summaryMessage = `##  DAG Runs for '${dagId}'\\n\\n`;\n            if (date) {\n                summaryMessage += `**Date Filter:** ${date}\\n`;\n            } else {\n                summaryMessage += `**Date Filter:** Today (${ui.toISODateString(new Date())})\\n`;\n            }\n            summaryMessage += `**Total Runs:** ${runs.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details\n            runs.forEach((run: any, index: number) => {\n                const startTime = run.start_date || run.execution_date || 'N/A';\n                const endTime = run.end_date || 'N/A';\n                let duration = 'N/A';\n                \n                if (run.start_date && run.end_date) {\n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    duration = `${minutes}m ${seconds}s`;\n                }\n\n                const status = run.state || 'unknown';\n                const statusEmoji = this.getStatusEmoji(status);\n\n                summaryMessage += `### ${index + 1}. Run: ${run.dag_run_id || run.run_id}\\n\\n`;\n                summaryMessage += `- **Status:** ${statusEmoji} ${status}\\n`;\n                summaryMessage += `- **Start Time:** ${startTime}\\n`;\n                if (endTime !== 'N/A') {\n                    summaryMessage += `- **End Time:** ${endTime}\\n`;\n                }\n                summaryMessage += `- **Duration:** ${duration}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date || run.logical_date}\\n`;\n                summaryMessage += `\\n`;\n            });\n\n            // Include raw JSON for LLM processing\n            summaryMessage += `\\n---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(runs, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to retrieve DAG runs\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagRunsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Helper to get emoji for run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagLogView {\n    public static Current: DagLogView | undefined;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagId: string;\n    private dagRunId: string | undefined;\n    private taskId: string | undefined;\n    private tryNumber: number | undefined;\n\n    private dagRunJson: any;\n    private taskInstancesJson: any;\n    private logs: Map<string, any> = new Map(); // taskId -> logJson\n\n    private constructor(panel: vscode.WebviewPanel, dagId: string, dagRunId?: string, taskId?: string, tryNumber?: number) {\n        ui.logToOutput('DagLogView.constructor Started');\n        Telemetry.Current.send('DagLogView.constructor.called');\n\n        this._panel = panel;\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this.taskId = taskId;\n        this.tryNumber = tryNumber;\n\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DagLogView.constructor Completed');\n    }\n\n    public static render(dagId: string, dagRunId?: string, taskId?: string, tryNumber?: number) {\n        ui.logToOutput('DagLogView.render Started');\n        Telemetry.Current.send('DagLogView.render.called');\n        if (DagLogView.Current) {\n            DagLogView.Current.dagId = dagId;\n            DagLogView.Current.dagRunId = dagRunId;\n            DagLogView.Current.taskId = taskId;\n            DagLogView.Current.tryNumber = tryNumber;\n            DagLogView.Current._panel.reveal(vscode.ViewColumn.One);\n            DagLogView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagLogView\", \"DAG Logs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n                retainContextWhenHidden: true\n            });\n\n            DagLogView.Current = new DagLogView(panel, dagId, dagRunId, taskId, tryNumber);\n        }\n    }\n\n    public async loadData() {\n        ui.logToOutput('DagLogView.loadData Started');\n        Telemetry.Current.send('DagLogView.loadData.called');\n        if (!Session.Current.Api) { return; }\n\n        // 1. Resolve dagRunId if missing\n        if (!this.dagRunId) {\n            const lastRunResult = await Session.Current.Api.getLastDagRun(this.dagId);\n            if (lastRunResult.isSuccessful && lastRunResult.result) {\n                this.dagRunJson = lastRunResult.result;\n                this.dagRunId = this.dagRunJson.dag_run_id;\n            } else {\n                ui.showErrorMessage(\"Could not fetch latest DAG run.\");\n                return;\n            }\n        } else {\n            // Fetch specific dag run details\n            const runResult = await Session.Current.Api.getDagRun(this.dagId, this.dagRunId);\n            if (runResult.isSuccessful) {\n                this.dagRunJson = runResult.result;\n            }\n        }\n\n        // 2. Fetch Task Instances\n        if (this.dagRunId) {\n            const tasksResult = await Session.Current.Api.getTaskInstances(this.dagId, this.dagRunId);\n            if (tasksResult.isSuccessful && tasksResult.result) {\n                this.taskInstancesJson = tasksResult.result;\n            }\n        }\n\n        // 3. Clear logs cache on reload\n        this.logs.clear();\n\n        // 4. Fetch logs for tasks\n        const tasks = this._getTasks();\n        \n        // Use Promise.all to fetch concurrently\n        await Promise.all(tasks.map(t => {\n            let tryNum = t.try_number;\n            // If specific task requested AND specific try requested, use that.\n            if (this.taskId && t.task_id === this.taskId && this.tryNumber !== undefined) {\n                tryNum = this.tryNumber;\n            }\n            return this.fetchLogForTask(t.task_id, tryNum);\n        }));\n\n        await this.renderHtml();\n    }\n\n    private _getTasks(): any[] {\n        if (!this.taskInstancesJson || !this.taskInstancesJson.task_instances) {\n            return [];\n        }\n        let tasks = [...this.taskInstancesJson.task_instances];\n\n        // Filter by taskId if provided\n        if (this.taskId) {\n            tasks = tasks.filter((t: any) => t.task_id === this.taskId);\n        }\n\n        return tasks.sort((a: any, b: any) => {\n             const dateA = a.start_date ? new Date(a.start_date).getTime() : 0;\n             const dateB = b.start_date ? new Date(b.start_date).getTime() : 0;\n             return dateA - dateB;\n        });\n    }\n\n    private async fetchLogForTask(taskId: string, tryNum?: number) {\n        if (!this.dagRunId) { return; }\n        \n        let targetTryNumber = tryNum;\n        if (targetTryNumber === undefined) {\n             const task = this.taskInstancesJson.task_instances.find((t: any) => t.task_id === taskId);\n             if (task) {\n                 targetTryNumber = task.try_number;\n             } else {\n                 targetTryNumber = 1; \n             }\n        }\n        \n        if (this.logs.has(taskId)) { return; }\n\n        const result = await Session.Current.Api?.getTaskInstanceLog(this.dagId, this.dagRunId, taskId, targetTryNumber!);\n        if (result?.isSuccessful) {\n            this.logs.set(taskId, result.result);\n        }\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DagLogView.renderHtml Started');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n    }\n\n    public dispose() {\n        DagLogView.Current = undefined;\n        this._panel.dispose();\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagLogView._getWebviewContent Started');\n        Telemetry.Current.send('DagLogView._getWebviewContent.called');\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        const tasks = this._getTasks();\n        \n        // Metadata\n        const dagRun = this.dagRunJson || {};\n        const startDate = dagRun.start_date ? ui.toISODateTimeString(new Date(dagRun.start_date)) : 'N/A';\n        const endDate = dagRun.end_date ? ui.toISODateTimeString(new Date(dagRun.end_date)) : 'Running';\n        const duration = dagRun.start_date ? ui.getDuration(new Date(dagRun.start_date), dagRun.end_date ? new Date(dagRun.end_date) : new Date()) : 'N/A';\n        const status = dagRun.state || 'N/A';\n\n        const taskSections = tasks.map(t => {\n            const logData = this.logs.get(t.task_id);\n            let contentHtml = '';\n\n            const isSuccess = t.state === 'success';\n            const isError = ['failed', 'upstream_failed', 'shutdown', 'restart'].includes(t.state);\n            let statusClass = 'status-other';\n            if (isSuccess) statusClass = 'status-success';\n            if (isError) statusClass = 'status-error';\n\n            let displayTry = t.try_number;\n            if (this.taskId && t.task_id === this.taskId && this.tryNumber !== undefined) {\n                displayTry = this.tryNumber;\n            }\n\n            if (logData) {\n                if (logData.content && Array.isArray(logData.content)) {\n                    contentHtml = logData.content.map((entry: any) => {\n                         const ts = entry.timestamp ? `[${entry.timestamp}]` : '';\n                         const lvl = entry.level ? `[${entry.level}]` : '';\n                         const logger = entry.logger ? `[${entry.logger}]` : '';\n                         const evt = entry.event || '';\n                         let extra = '';\n                         // Error detail\n                         if (entry.error_detail) {\n                             extra = `<pre class=\"error-detail\">${JSON.stringify(entry.error_detail, null, 2)}</pre>`;\n                         }\n                         \n                         let lineClass = 'log-line';\n                         if (lvl.toLowerCase().includes('error')) { lineClass += ' log-error'; }\n                         if (lvl.toLowerCase().includes('warn')) { lineClass += ' log-warn'; }\n\n                         return `<div class=\"${lineClass}\"><span class=\"log-ts\">${ts}</span> <span class=\"log-lvl\">${lvl}</span> <span class=\"log-logger\">${logger}</span> <span class=\"log-msg\">${this._escapeHtml(evt)}</span>${extra}</div>`;\n                    }).join('');\n                } else if (logData.detail) {\n                     contentHtml = `<div class=\"log-error\">${this._escapeHtml(logData.detail)}</div>`;\n                } else {\n                     contentHtml = `<pre>${this._escapeHtml(JSON.stringify(logData, null, 2))}</pre>`;\n                }\n            } else {\n                contentHtml = '<div class=\"loading-logs\">Loading logs...</div>'; \n            }\n\n            return `\n            <div class=\"task-section ${statusClass}\">\n                <div class=\"task-header\">\n                    <div class=\"header-left\">\n                        <span class=\"status-indicator\"></span>\n                        <span class=\"task-title\">${this._escapeHtml(t.task_id)}</span>\n                        <span class=\"status-pill\">${this._escapeHtml(t.state)}</span>\n                    </div>\n                    <div class=\"header-right\">\n                        <span class=\"task-try\">Try: ${displayTry}</span>\n                    </div>\n                </div>\n                <div class=\"log-container\" id=\"log-${t.task_id}\">\n                    ${contentHtml}\n                </div>\n            </div>`;\n        }).join('\\n');\n\n\n        return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n    <script type=\"module\" src=\"${elementsUri}\"></script>\n    <script type=\"module\" src=\"${mainUri}\"></script>\n    <link rel=\"stylesheet\" href=\"${styleUri}\">\n    <style>\n        :root {\n            --font-size-sm: 12px;\n            --font-size-md: 13px;\n            --font-size-lg: 15px;\n            --border-radius: 4px;\n            --spacing-xs: 4px;\n            --spacing-sm: 8px;\n            --spacing-md: 16px;\n            --spacing-lg: 24px;\n        }\n\n        body { \n            padding: var(--spacing-md); \n            display: flex; \n            flex-direction: column; \n            height: 100vh; \n            box-sizing: border-box; \n            background: var(--vscode-editor-background); \n            color: var(--vscode-editor-foreground);\n            font-family: var(--vscode-font-family);\n        }\n\n        .metadata { \n            margin-bottom: var(--spacing-lg); \n            padding: var(--spacing-md); \n            background: var(--vscode-editor-inactiveSelectionBackground); \n            border-radius: var(--border-radius); \n        }\n        .metadata-row { display: flex; gap: 32px; font-size: 13px; margin-bottom: 4px; }\n        .label { font-weight: 600; color: var(--vscode-descriptionForeground); width: 70px; display: inline-block; text-transform: uppercase; font-size: 11px; }\n        \n        .task-container { display: flex; flex-direction: column; gap: 16px; padding-bottom: 20px; }\n        \n        .task-section { \n            border: 1px solid var(--vscode-widget-border); \n            border-radius: var(--border-radius); \n            overflow: hidden; \n            background: var(--vscode-editor-background);\n        }\n        \n        .task-header { \n            padding: 8px 16px; \n            display: flex; \n            justify-content: space-between;\n            align-items: center; \n            border-bottom: 1px solid var(--vscode-widget-border);\n        }\n\n        .header-left { display: flex; align-items: center; gap: 12px; }\n        .header-right { display: flex; align-items: center; gap: 12px; }\n\n        .task-title { font-weight: 600; font-size: 14px; }\n        .task-try { font-size: 11px; color: var(--vscode-descriptionForeground); }\n        \n        .status-indicator {\n            width: 8px; height: 8px; border-radius: 50%;\n            display: inline-block;\n        }\n\n        .status-pill {\n            padding: 2px 8px;\n            border-radius: 10px;\n            font-size: 10px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n\n        /* Status Colors */\n        .task-section.status-success .task-header {\n            background-color: var(--vscode-notebook-cellEditorBackground); \n        }\n        .task-section.status-success .status-indicator {\n            background-color: var(--vscode-testing-iconPassed);\n        }\n        .task-section.status-success .status-pill {\n            background-color: var(--vscode-testing-iconPassed);\n            color: var(--vscode-editor-background);\n        }\n\n        .task-section.status-error .task-header {\n            background-color: rgba(255, 0, 0, 0.1); \n        }\n        .task-section.status-error .status-indicator {\n            background-color: var(--vscode-errorForeground);\n        }\n        .task-section.status-error .status-pill {\n            background-color: var(--vscode-errorForeground);\n            color: white;\n        }\n\n        .task-section.status-other .task-header {\n            background-color: var(--vscode-sideBarSectionHeader-background);\n        }\n        .task-section.status-other .status-indicator {\n            background-color: var(--vscode-descriptionForeground);\n        }\n        .task-section.status-other .status-pill {\n            background-color: var(--vscode-badge-background);\n            color: var(--vscode-badge-foreground);\n        }\n\n        .log-container { \n            padding: 16px;\n            max-height: 500px;\n            overflow-y: auto; \n            font-family: var(--vscode-editor-font-family);\n            font-size: 12px;\n            white-space: pre-wrap;\n            line-height: 1.5;\n        }\n        \n        .log-line { margin-bottom: 2px; }\n        .log-ts { color: var(--vscode-debugConsole-infoForeground); margin-right: 8px; opacity: 0.8; font-size: 0.9em; }\n        .log-lvl { font-weight: bold; margin-right: 8px; }\n        .log-logger { color: var(--vscode-textLink-foreground); margin-right: 8px; }\n        \n        .log-error { color: var(--vscode-errorForeground); }\n        .log-warn { color: var(--vscode-editorWarning-foreground); }\n        \n        .error-detail { \n            color: var(--vscode-textPreformat-foreground); \n            background-color: var(--vscode-textBlockQuote-background);\n            padding: 12px;\n            margin: 8px 0 8px 16px;\n            border-left: 3px solid var(--vscode-errorForeground);\n            border-radius: 3px;\n        }\n        .loading-logs { font-style: italic; color: var(--vscode-descriptionForeground); padding: 20px; text-align: center; }\n\n    </style>\n    <title>DAG Logs</title>\n</head>\n<body>\n    <div class=\"metadata\">\n        <div class=\"metadata-row\">\n            <div><span class=\"label\">DAG ID:</span> <span>${this.dagId}</span></div>\n            <div><span class=\"label\">Run ID:</span> <span>${this.dagRunId}</span></div>\n            <div><span class=\"label\">Status:</span> <span>${status}</span></div>\n        </div>\n        <div class=\"metadata-row\">\n            <div><span class=\"label\">Start:</span> <span>${startDate}</span></div>\n            <div><span class=\"label\">End:</span> <span>${endDate}</span></div>\n            <div><span class=\"label\">Duration:</span> <span>${duration}</span></div>\n        </div>\n    </div>\n\n    <div class=\"task-container\">\n        ${taskSections}\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n        // Just listener for now if we want to add interactivity later e.g. collapse/expand\n    </script>\n</body>\n</html>`;\n    }\n\n    private _escapeHtml(text: string): string {\n        if (!text) return '';\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagLogView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DagLogView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            async (message: any) => {\n                // No messages expected for now\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/*!\n * Tmp\n *\n * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>\n *\n * MIT Licensed\n */\n\n/*\n * Module dependencies.\n */\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst crypto = require('crypto');\nconst _c = { fs: fs.constants, os: os.constants };\n\n/*\n * The working inner variables.\n */\nconst // the random characters to choose from\n  RANDOM_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n  TEMPLATE_PATTERN = /XXXXXX/,\n  DEFAULT_TRIES = 3,\n  CREATE_FLAGS = (_c.O_CREAT || _c.fs.O_CREAT) | (_c.O_EXCL || _c.fs.O_EXCL) | (_c.O_RDWR || _c.fs.O_RDWR),\n  // constants are off on the windows platform and will not match the actual errno codes\n  IS_WIN32 = os.platform() === 'win32',\n  EBADF = _c.EBADF || _c.os.errno.EBADF,\n  ENOENT = _c.ENOENT || _c.os.errno.ENOENT,\n  DIR_MODE = 0o700 /* 448 */,\n  FILE_MODE = 0o600 /* 384 */,\n  EXIT = 'exit',\n  // this will hold the objects need to be removed on exit\n  _removeObjects = [],\n  // API change in fs.rmdirSync leads to error when passing in a second parameter, e.g. the callback\n  FN_RMDIR_SYNC = fs.rmdirSync.bind(fs);\n\nlet _gracefulCleanup = false;\n\n/**\n * Recursively remove a directory and its contents.\n *\n * @param {string} dirPath path of directory to remove\n * @param {Function} callback\n * @private\n */\nfunction rimraf(dirPath, callback) {\n  return fs.rm(dirPath, { recursive: true }, callback);\n}\n\n/**\n * Recursively remove a directory and its contents, synchronously.\n *\n * @param {string} dirPath path of directory to remove\n * @private\n */\nfunction FN_RIMRAF_SYNC(dirPath) {\n  return fs.rmSync(dirPath, { recursive: true });\n}\n\n/**\n * Gets a temporary file name.\n *\n * @param {(Options|tmpNameCallback)} options options or callback\n * @param {?tmpNameCallback} callback the callback function\n */\nfunction tmpName(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  _assertAndSanitizeOptions(opts, function (err, sanitizedOptions) {\n    if (err) return cb(err);\n\n    let tries = sanitizedOptions.tries;\n    (function _getUniqueName() {\n      try {\n        const name = _generateTmpName(sanitizedOptions);\n\n        // check whether the path exists then retry if needed\n        fs.stat(name, function (err) {\n          /* istanbul ignore else */\n          if (!err) {\n            /* istanbul ignore else */\n            if (tries-- > 0) return _getUniqueName();\n\n            return cb(new Error('Could not get a unique tmp filename, max tries reached ' + name));\n          }\n\n          cb(null, name);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    })();\n  });\n}\n\n/**\n * Synchronous version of tmpName.\n *\n * @param {Object} options\n * @returns {string} the generated random name\n * @throws {Error} if the options are invalid or could not generate a filename\n */\nfunction tmpNameSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const sanitizedOptions = _assertAndSanitizeOptionsSync(opts);\n\n  let tries = sanitizedOptions.tries;\n  do {\n    const name = _generateTmpName(sanitizedOptions);\n    try {\n      fs.statSync(name);\n    } catch (e) {\n      return name;\n    }\n  } while (tries-- > 0);\n\n  throw new Error('Could not get a unique tmp filename, max tries reached');\n}\n\n/**\n * Creates and opens a temporary file.\n *\n * @param {(Options|null|undefined|fileCallback)} options the config options or the callback function or null or undefined\n * @param {?fileCallback} callback\n */\nfunction file(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create and open the file\n    fs.open(name, CREATE_FLAGS, opts.mode || FILE_MODE, function _fileCreated(err, fd) {\n      /* istanbu ignore else */\n      if (err) return cb(err);\n\n      if (opts.discardDescriptor) {\n        return fs.close(fd, function _discardCallback(possibleErr) {\n          // the chance of getting an error on close here is rather low and might occur in the most edgiest cases only\n          return cb(possibleErr, name, undefined, _prepareTmpFileRemoveCallback(name, -1, opts, false));\n        });\n      } else {\n        // detachDescriptor passes the descriptor whereas discardDescriptor closes it, either way, we no longer care\n        // about the descriptor\n        const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n        cb(null, name, fd, _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, false));\n      }\n    });\n  });\n}\n\n/**\n * Synchronous version of file.\n *\n * @param {Options} options\n * @returns {FileSyncObject} object consists of name, fd and removeCallback\n * @throws {Error} if cannot create a file\n */\nfunction fileSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n  const name = tmpNameSync(opts);\n  let fd = fs.openSync(name, CREATE_FLAGS, opts.mode || FILE_MODE);\n  /* istanbul ignore else */\n  if (opts.discardDescriptor) {\n    fs.closeSync(fd);\n    fd = undefined;\n  }\n\n  return {\n    name: name,\n    fd: fd,\n    removeCallback: _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, true)\n  };\n}\n\n/**\n * Creates a temporary directory.\n *\n * @param {(Options|dirCallback)} options the options or the callback function\n * @param {?dirCallback} callback\n */\nfunction dir(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create the directory\n    fs.mkdir(name, opts.mode || DIR_MODE, function _dirCreated(err) {\n      /* istanbul ignore else */\n      if (err) return cb(err);\n\n      cb(null, name, _prepareTmpDirRemoveCallback(name, opts, false));\n    });\n  });\n}\n\n/**\n * Synchronous version of dir.\n *\n * @param {Options} options\n * @returns {DirSyncObject} object consists of name and removeCallback\n * @throws {Error} if it cannot create a directory\n */\nfunction dirSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const name = tmpNameSync(opts);\n  fs.mkdirSync(name, opts.mode || DIR_MODE);\n\n  return {\n    name: name,\n    removeCallback: _prepareTmpDirRemoveCallback(name, opts, true)\n  };\n}\n\n/**\n * Removes files asynchronously.\n *\n * @param {Object} fdPath\n * @param {Function} next\n * @private\n */\nfunction _removeFileAsync(fdPath, next) {\n  const _handler = function (err) {\n    if (err && !_isENOENT(err)) {\n      // reraise any unanticipated error\n      return next(err);\n    }\n    next();\n  };\n\n  if (0 <= fdPath[0])\n    fs.close(fdPath[0], function () {\n      fs.unlink(fdPath[1], _handler);\n    });\n  else fs.unlink(fdPath[1], _handler);\n}\n\n/**\n * Removes files synchronously.\n *\n * @param {Object} fdPath\n * @private\n */\nfunction _removeFileSync(fdPath) {\n  let rethrownException = null;\n  try {\n    if (0 <= fdPath[0]) fs.closeSync(fdPath[0]);\n  } catch (e) {\n    // reraise any unanticipated error\n    if (!_isEBADF(e) && !_isENOENT(e)) throw e;\n  } finally {\n    try {\n      fs.unlinkSync(fdPath[1]);\n    } catch (e) {\n      // reraise any unanticipated error\n      if (!_isENOENT(e)) rethrownException = e;\n    }\n  }\n  if (rethrownException !== null) {\n    throw rethrownException;\n  }\n}\n\n/**\n * Prepares the callback for removal of the temporary file.\n *\n * Returns either a sync callback or a async callback depending on whether\n * fileSync or file was called, which is expressed by the sync parameter.\n *\n * @param {string} name the path of the file\n * @param {number} fd file descriptor\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {fileCallback | fileCallbackSync}\n * @private\n */\nfunction _prepareTmpFileRemoveCallback(name, fd, opts, sync) {\n  const removeCallbackSync = _prepareRemoveCallback(_removeFileSync, [fd, name], sync);\n  const removeCallback = _prepareRemoveCallback(_removeFileAsync, [fd, name], sync, removeCallbackSync);\n\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Prepares the callback for removal of the temporary directory.\n *\n * Returns either a sync callback or a async callback depending on whether\n * tmpFileSync or tmpFile was called, which is expressed by the sync parameter.\n *\n * @param {string} name\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {Function} the callback\n * @private\n */\nfunction _prepareTmpDirRemoveCallback(name, opts, sync) {\n  const removeFunction = opts.unsafeCleanup ? rimraf : fs.rmdir.bind(fs);\n  const removeFunctionSync = opts.unsafeCleanup ? FN_RIMRAF_SYNC : FN_RMDIR_SYNC;\n  const removeCallbackSync = _prepareRemoveCallback(removeFunctionSync, name, sync);\n  const removeCallback = _prepareRemoveCallback(removeFunction, name, sync, removeCallbackSync);\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Creates a guarded function wrapping the removeFunction call.\n *\n * The cleanup callback is save to be called multiple times.\n * Subsequent invocations will be ignored.\n *\n * @param {Function} removeFunction\n * @param {string} fileOrDirName\n * @param {boolean} sync\n * @param {cleanupCallbackSync?} cleanupCallbackSync\n * @returns {cleanupCallback | cleanupCallbackSync}\n * @private\n */\nfunction _prepareRemoveCallback(removeFunction, fileOrDirName, sync, cleanupCallbackSync) {\n  let called = false;\n\n  // if sync is true, the next parameter will be ignored\n  return function _cleanupCallback(next) {\n    /* istanbul ignore else */\n    if (!called) {\n      // remove cleanupCallback from cache\n      const toRemove = cleanupCallbackSync || _cleanupCallback;\n      const index = _removeObjects.indexOf(toRemove);\n      /* istanbul ignore else */\n      if (index >= 0) _removeObjects.splice(index, 1);\n\n      called = true;\n      if (sync || removeFunction === FN_RMDIR_SYNC || removeFunction === FN_RIMRAF_SYNC) {\n        return removeFunction(fileOrDirName);\n      } else {\n        return removeFunction(fileOrDirName, next || function () {});\n      }\n    }\n  };\n}\n\n/**\n * The garbage collector.\n *\n * @private\n */\nfunction _garbageCollector() {\n  /* istanbul ignore else */\n  if (!_gracefulCleanup) return;\n\n  // the function being called removes itself from _removeObjects,\n  // loop until _removeObjects is empty\n  while (_removeObjects.length) {\n    try {\n      _removeObjects[0]();\n    } catch (e) {\n      // already removed?\n    }\n  }\n}\n\n/**\n * Random name generator based on crypto.\n * Adapted from http://blog.tompawlak.org/how-to-generate-random-values-nodejs-javascript\n *\n * @param {number} howMany\n * @returns {string} the generated random name\n * @private\n */\nfunction _randomChars(howMany) {\n  let value = [],\n    rnd = null;\n\n  // make sure that we do not fail because we ran out of entropy\n  try {\n    rnd = crypto.randomBytes(howMany);\n  } catch (e) {\n    rnd = crypto.pseudoRandomBytes(howMany);\n  }\n\n  for (let i = 0; i < howMany; i++) {\n    value.push(RANDOM_CHARS[rnd[i] % RANDOM_CHARS.length]);\n  }\n\n  return value.join('');\n}\n\n/**\n * Checks whether the `obj` parameter is defined or not.\n *\n * @param {Object} obj\n * @returns {boolean} true if the object is undefined\n * @private\n */\nfunction _isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\n/**\n * Parses the function arguments.\n *\n * This function helps to have optional arguments.\n *\n * @param {(Options|null|undefined|Function)} options\n * @param {?Function} callback\n * @returns {Array} parsed arguments\n * @private\n */\nfunction _parseArguments(options, callback) {\n  /* istanbul ignore else */\n  if (typeof options === 'function') {\n    return [{}, options];\n  }\n\n  /* istanbul ignore else */\n  if (_isUndefined(options)) {\n    return [{}, callback];\n  }\n\n  // copy options so we do not leak the changes we make internally\n  const actualOptions = {};\n  for (const key of Object.getOwnPropertyNames(options)) {\n    actualOptions[key] = options[key];\n  }\n\n  return [actualOptions, callback];\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePath(name, tmpDir, cb) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  fs.stat(pathToResolve, function (err) {\n    if (err) {\n      fs.realpath(path.dirname(pathToResolve), function (err, parentDir) {\n        if (err) return cb(err);\n\n        cb(null, path.join(parentDir, path.basename(pathToResolve)));\n      });\n    } else {\n      fs.realpath(pathToResolve, cb);\n    }\n  });\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePathSync(name, tmpDir) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  try {\n    fs.statSync(pathToResolve);\n    return fs.realpathSync(pathToResolve);\n  } catch (_err) {\n    const parentDir = fs.realpathSync(path.dirname(pathToResolve));\n\n    return path.join(parentDir, path.basename(pathToResolve));\n  }\n}\n\n/**\n * Generates a new temporary name.\n *\n * @param {Object} opts\n * @returns {string} the new random name according to opts\n * @private\n */\nfunction _generateTmpName(opts) {\n  const tmpDir = opts.tmpdir;\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.name)) {\n    return path.join(tmpDir, opts.dir, opts.name);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.template)) {\n    return path.join(tmpDir, opts.dir, opts.template).replace(TEMPLATE_PATTERN, _randomChars(6));\n  }\n\n  // prefix and postfix\n  const name = [\n    opts.prefix ? opts.prefix : 'tmp',\n    '-',\n    process.pid,\n    '-',\n    _randomChars(12),\n    opts.postfix ? '-' + opts.postfix : ''\n  ].join('');\n\n  return path.join(tmpDir, opts.dir, name);\n}\n\n/**\n * Asserts and sanitizes the basic options.\n *\n * @private\n */\nfunction _assertOptionsBase(options) {\n  if (!_isUndefined(options.name)) {\n    const name = options.name;\n\n    // assert that name is not absolute and does not contain a path\n    if (path.isAbsolute(name)) throw new Error(`name option must not contain an absolute path, found \"${name}\".`);\n\n    // must not fail on valid .<name> or ..<name> or similar such constructs\n    const basename = path.basename(name);\n    if (basename === '..' || basename === '.' || basename !== name)\n      throw new Error(`name option must not contain a path, found \"${name}\".`);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(options.template) && !options.template.match(TEMPLATE_PATTERN)) {\n    throw new Error(`Invalid template, found \"${options.template}\".`);\n  }\n\n  /* istanbul ignore else */\n  if ((!_isUndefined(options.tries) && isNaN(options.tries)) || options.tries < 0) {\n    throw new Error(`Invalid tries, found \"${options.tries}\".`);\n  }\n\n  // if a name was specified we will try once\n  options.tries = _isUndefined(options.name) ? options.tries || DEFAULT_TRIES : 1;\n  options.keep = !!options.keep;\n  options.detachDescriptor = !!options.detachDescriptor;\n  options.discardDescriptor = !!options.discardDescriptor;\n  options.unsafeCleanup = !!options.unsafeCleanup;\n\n  // for completeness' sake only, also keep (multiple) blanks if the user, purportedly sane, requests us to\n  options.prefix = _isUndefined(options.prefix) ? '' : options.prefix;\n  options.postfix = _isUndefined(options.postfix) ? '' : options.postfix;\n}\n\n/**\n * Gets the relative directory to tmpDir.\n *\n * @private\n */\nfunction _getRelativePath(option, name, tmpDir, cb) {\n  if (_isUndefined(name)) return cb(null);\n\n  _resolvePath(name, tmpDir, function (err, resolvedPath) {\n    if (err) return cb(err);\n\n    const relativePath = path.relative(tmpDir, resolvedPath);\n\n    if (!resolvedPath.startsWith(tmpDir)) {\n      return cb(new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`));\n    }\n\n    cb(null, relativePath);\n  });\n}\n\n/**\n * Gets the relative path to tmpDir.\n *\n * @private\n */\nfunction _getRelativePathSync(option, name, tmpDir) {\n  if (_isUndefined(name)) return;\n\n  const resolvedPath = _resolvePathSync(name, tmpDir);\n  const relativePath = path.relative(tmpDir, resolvedPath);\n\n  if (!resolvedPath.startsWith(tmpDir)) {\n    throw new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`);\n  }\n\n  return relativePath;\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptions(options, cb) {\n  _getTmpDir(options, function (err, tmpDir) {\n    if (err) return cb(err);\n\n    options.tmpdir = tmpDir;\n\n    try {\n      _assertOptionsBase(options, tmpDir);\n    } catch (err) {\n      return cb(err);\n    }\n\n    // sanitize dir, also keep (multiple) blanks if the user, purportedly sane, requests us to\n    _getRelativePath('dir', options.dir, tmpDir, function (err, dir) {\n      if (err) return cb(err);\n\n      options.dir = _isUndefined(dir) ? '' : dir;\n\n      // sanitize further if template is relative to options.dir\n      _getRelativePath('template', options.template, tmpDir, function (err, template) {\n        if (err) return cb(err);\n\n        options.template = template;\n\n        cb(null, options);\n      });\n    });\n  });\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptionsSync(options) {\n  const tmpDir = (options.tmpdir = _getTmpDirSync(options));\n\n  _assertOptionsBase(options, tmpDir);\n\n  const dir = _getRelativePathSync('dir', options.dir, tmpDir);\n  options.dir = _isUndefined(dir) ? '' : dir;\n\n  options.template = _getRelativePathSync('template', options.template, tmpDir);\n\n  return options;\n}\n\n/**\n * Helper for testing against EBADF to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isEBADF(error) {\n  return _isExpectedError(error, -EBADF, 'EBADF');\n}\n\n/**\n * Helper for testing against ENOENT to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isENOENT(error) {\n  return _isExpectedError(error, -ENOENT, 'ENOENT');\n}\n\n/**\n * Helper to determine whether the expected error code matches the actual code and errno,\n * which will differ between the supported node versions.\n *\n * - Node >= 7.0:\n *   error.code {string}\n *   error.errno {number} any numerical value will be negated\n *\n * CAVEAT\n *\n * On windows, the errno for EBADF is -4083 but os.constants.errno.EBADF is different and we must assume that ENOENT\n * is no different here.\n *\n * @param {SystemError} error\n * @param {number} errno\n * @param {string} code\n * @private\n */\nfunction _isExpectedError(error, errno, code) {\n  return IS_WIN32 ? error.code === code : error.code === code && error.errno === errno;\n}\n\n/**\n * Sets the graceful cleanup.\n *\n * If graceful cleanup is set, tmp will remove all controlled temporary objects on process exit, otherwise the\n * temporary objects will remain in place, waiting to be cleaned up on system restart or otherwise scheduled temporary\n * object removals.\n */\nfunction setGracefulCleanup() {\n  _gracefulCleanup = true;\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDir(options, cb) {\n  return fs.realpath((options && options.tmpdir) || os.tmpdir(), cb);\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDirSync(options) {\n  return fs.realpathSync((options && options.tmpdir) || os.tmpdir());\n}\n\n// Install process exit listener\nprocess.addListener(EXIT, _garbageCollector);\n\n/**\n * Configuration options.\n *\n * @typedef {Object} Options\n * @property {?boolean} keep the temporary object (file or dir) will not be garbage collected\n * @property {?number} tries the number of tries before give up the name generation\n * @property (?int) mode the access mode, defaults are 0o700 for directories and 0o600 for files\n * @property {?string} template the \"mkstemp\" like filename template\n * @property {?string} name fixed name relative to tmpdir or the specified dir option\n * @property {?string} dir tmp directory relative to the root tmp directory in use\n * @property {?string} prefix prefix for the generated name\n * @property {?string} postfix postfix for the generated name\n * @property {?string} tmpdir the root tmp directory which overrides the os tmpdir\n * @property {?boolean} unsafeCleanup recursively removes the created temporary directory, even when it's not empty\n * @property {?boolean} detachDescriptor detaches the file descriptor, caller is responsible for closing the file, tmp will no longer try closing the file during garbage collection\n * @property {?boolean} discardDescriptor discards the file descriptor (closes file, fd is -1), tmp will no longer try closing the file during garbage collection\n */\n\n/**\n * @typedef {Object} FileSyncObject\n * @property {string} name the name of the file\n * @property {string} fd the file descriptor or -1 if the fd has been discarded\n * @property {fileCallback} removeCallback the callback function to remove the file\n */\n\n/**\n * @typedef {Object} DirSyncObject\n * @property {string} name the name of the directory\n * @property {fileCallback} removeCallback the callback function to remove the directory\n */\n\n/**\n * @callback tmpNameCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n */\n\n/**\n * @callback fileCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback fileCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallback\n * @param {simpleCallback} [next] function to call whenever the tmp object needs to be removed\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallbackSync\n */\n\n/**\n * Callback function for function composition.\n * @see {@link https://github.com/raszi/node-tmp/issues/57|raszi/node-tmp#57}\n *\n * @callback simpleCallback\n */\n\n// exporting all the needed methods\n\n// evaluate _getTmpDir() lazily, mainly for simplifying testing but it also will\n// allow users to reconfigure the temporary directory\nObject.defineProperty(module.exports, 'tmpdir', {\n  enumerable: true,\n  configurable: false,\n  get: function () {\n    return _getTmpDirSync();\n  }\n});\n\nmodule.exports.dir = dir;\nmodule.exports.dirSync = dirSync;\n\nmodule.exports.file = file;\nmodule.exports.fileSync = fileSync;\n\nmodule.exports.tmpName = tmpName;\nmodule.exports.tmpNameSync = tmpNameSync;\n\nmodule.exports.setGracefulCleanup = setGracefulCleanup;\n","/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n","/**\n * GetRunningDagsTool - Language Model Tool for listing currently running DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class GetRunningDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Checking for running DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GetRunningDagsTool.invoke');\n        \n        try {\n            const runningDags = await this.client.getRunningDags();\n\n            if (runningDags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No DAGs are currently running.\")\n                ]);\n            }\n\n            let message = `##  Running DAGs (${runningDags.length})\\n\\n`;\n            runningDags.forEach(dag => {\n                const stateEmoji = dag.latest_run_state === 'running' ? '' : '';\n                message += `- ${stateEmoji} **${dag.dag_id}** - State: ${dag.latest_run_state}, Run ID: \\`${dag.latest_run_id}\\``;\n                if (dag.description) {\n                    message += `\\n  Description: ${dag.description}`;\n                }\n                if (dag.owners && dag.owners.length > 0) {\n                    message += `\\n  Owners: ${dag.owners.join(', ')}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(runningDags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GetRunningDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to get running DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"https\");","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar InstantiationStatus;\n(function (InstantiationStatus) {\n    InstantiationStatus[InstantiationStatus[\"NOT_INSTANTIATED\"] = 0] = \"NOT_INSTANTIATED\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATING\"] = 1] = \"INSTANTIATING\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATED\"] = 2] = \"INSTANTIATED\";\n})(InstantiationStatus || (InstantiationStatus = {}));\nexport class BaseTelemetrySender {\n    constructor(key, clientFactory) {\n        // Whether or not the client has been instantiated\n        this._instantiationStatus = InstantiationStatus.NOT_INSTANTIATED;\n        // Queues used to store events until the sender is ready\n        this._eventQueue = [];\n        this._exceptionQueue = [];\n        this._clientFactory = clientFactory;\n        this._key = key;\n    }\n    /**\n     * Sends the event to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param eventName The name of the event to log\n     * @param data The data contanied in the event\n     */\n    sendEventData(eventName, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._eventQueue.push({ eventName, data });\n            }\n            return;\n        }\n        this._telemetryClient.logEvent(eventName, data);\n    }\n    /**\n     * Sends an exception to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param exception The exception to collect\n     * @param data Data associated with the exception\n     */\n    sendErrorData(exception, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._exceptionQueue.push({ exception, data });\n            }\n            return;\n        }\n        const errorData = { stack: exception.stack, message: exception.message, name: exception.name };\n        if (data) {\n            const errorProperties = data.properties || data;\n            data.properties = { ...errorProperties, ...errorData };\n        }\n        else {\n            data = { properties: errorData };\n        }\n        this._telemetryClient.logEvent(\"unhandlederror\", data);\n    }\n    /**\n     * Flushes the buffered telemetry data\n     */\n    async flush() {\n        return this._telemetryClient?.flush();\n    }\n    async dispose() {\n        if (this._telemetryClient) {\n            await this._telemetryClient.dispose();\n            this._telemetryClient = undefined;\n        }\n        return;\n    }\n    /**\n     * Flushes the queued events that existed before the client was instantiated\n     */\n    _flushQueues() {\n        this._eventQueue.forEach(({ eventName, data }) => this.sendEventData(eventName, data));\n        this._eventQueue = [];\n        this._exceptionQueue.forEach(({ exception, data }) => this.sendErrorData(exception, data));\n        this._exceptionQueue = [];\n    }\n    /**\n     * Instantiates the telemetry client to make the sender \"active\"\n     */\n    instantiateSender() {\n        if (this._instantiationStatus !== InstantiationStatus.NOT_INSTANTIATED) {\n            return;\n        }\n        this._instantiationStatus = InstantiationStatus.INSTANTIATING;\n        // Call the client factory to get the client and then let it know it's instatntiated\n        this._clientFactory(this._key).then(client => {\n            this._telemetryClient = client;\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n            this._flushQueues();\n        }).catch(err => {\n            console.error(err);\n            // If it failed to instntiate, then we don't want to try again.\n            // So we mark it as instantiated. See #94\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n        });\n    }\n}\n//# sourceMappingURL=baseTelemetrySender.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class TelemetryUtil {\n    static applyReplacements(data, replacementOptions) {\n        for (const key of Object.keys(data)) {\n            for (const option of replacementOptions) {\n                if (option.lookup.test(key)) {\n                    if (option.replacementString !== undefined) {\n                        data[key] = option.replacementString;\n                    }\n                    else {\n                        delete data[key];\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Given a key / connection string checks if it is a valid 1DS key\n     * @param key The key to check if it's a valid 1DS key\n     */\n    static shouldUseOneDataSystemSDK(key) {\n        // Simple to check to ensure the key is the right length and the dashes are in the right spot\n        return (key.length === 74 &&\n            key[32] === \"-\" &&\n            key[41] === \"-\" &&\n            key[46] === \"-\" &&\n            key[51] === \"-\" &&\n            key[56] === \"-\" &&\n            key[69] === \"-\");\n    }\n    // This also includes the common properties which core mixes in\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.nodeArch\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodecommithash\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.telemetryclientversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    static getAdditionalCommonProperties(osShim) {\n        return {\n            \"common.os\": osShim.platform,\n            \"common.nodeArch\": osShim.architecture,\n            \"common.platformversion\": (osShim.release || \"\").replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, \"$1$2$3\"),\n            // Do not change this string as it gets found and replaced upon packaging\n            \"common.telemetryclientversion\": \"1.2.0\"\n        };\n    }\n    // Get singleton instance of TelemetryUtil\n    static getInstance() {\n        if (!TelemetryUtil._instance) {\n            TelemetryUtil._instance = new TelemetryUtil();\n        }\n        return TelemetryUtil._instance;\n    }\n}\n//# sourceMappingURL=util.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class BaseTelemetryReporter {\n    constructor(telemetrySender, vscodeAPI, initializationOptions) {\n        this.telemetrySender = telemetrySender;\n        this.vscodeAPI = vscodeAPI;\n        this.userOptIn = false;\n        this.errorOptIn = false;\n        this.disposables = [];\n        this._onDidChangeTelemetryLevel = new this.vscodeAPI.EventEmitter();\n        this.onDidChangeTelemetryLevel = this._onDidChangeTelemetryLevel.event;\n        this.telemetryLogger = this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender, initializationOptions);\n        // Keep track of the user's opt-in status\n        this.updateUserOptIn();\n        this.telemetryLogger.onDidChangeEnableStates(() => {\n            this.updateUserOptIn();\n        });\n    }\n    /**\n     * Updates the user's telemetry opt-in status\n     */\n    updateUserOptIn() {\n        this.errorOptIn = this.telemetryLogger.isErrorsEnabled;\n        this.userOptIn = this.telemetryLogger.isUsageEnabled;\n        // The sender is lazy loaded so if telemetry is off it's not loaded in\n        if (this.telemetryLogger.isErrorsEnabled || this.telemetryLogger.isUsageEnabled) {\n            this.telemetrySender.instantiateSender();\n        }\n        this._onDidChangeTelemetryLevel.fire(this.telemetryLevel);\n    }\n    get telemetryLevel() {\n        if (this.errorOptIn && this.userOptIn) {\n            return \"all\";\n        }\n        else if (this.errorOptIn) {\n            return \"error\";\n        }\n        else {\n            return \"off\";\n        }\n    }\n    /**\n     * Internal function which logs telemetry events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryEvent(eventName, properties, measurements, dangerous) {\n        // If it's dangerous we skip going through the logger as the logger checks opt-in status, etc.\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logUsage(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends a telemetry event.\n     * Properties are sanitized on best-effort basis to remove sensitive data prior to sending.\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * Sends a raw (unsanitized) telemetry event with the given properties and measurements.\n     * NOTE: This will not be logged to the output channel due to API limitations.\n     * @param eventName The name of the event\n     * @param properties The set of properties to add to the event in the form of a string key value pair\n     * @param measurements The set of measurements to add to the event in the form of a string key  number value pair\n     */\n    sendRawTelemetryEvent(eventName, properties, measurements) {\n        const modifiedProperties = { ...properties };\n        for (const propertyKey of Object.keys(modifiedProperties ?? {})) {\n            const propertyValue = modifiedProperties[propertyKey];\n            if (typeof propertyKey === \"string\" && propertyValue !== undefined) {\n                // Trusted values are not sanitized, which is what we want for raw telemetry\n                modifiedProperties[propertyKey] = new this.vscodeAPI.TelemetryTrustedValue(typeof propertyValue === \"string\" ? propertyValue : propertyValue.value);\n            }\n        }\n        this.sendTelemetryEvent(eventName, modifiedProperties, measurements);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry error events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryErrorEvent(eventName, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends an error event\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryErrorEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry error event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to run the properties and measures through sanitiziation, defaults to true\n     */\n    sendDangerousTelemetryErrorEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Disposes of the telemetry reporter\n     */\n    async dispose() {\n        await this.telemetrySender.dispose();\n        this.telemetryLogger.dispose();\n        return Promise.all(this.disposables.map(d => d.dispose()));\n    }\n}\n//# sourceMappingURL=baseTelemetryReporter.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nimport * as https from \"https\";\nimport * as os from \"os\";\nimport * as vscode from \"vscode\";\nimport { oneDataSystemClientFactory } from \"../common/1dsClientFactory\";\nimport { appInsightsClientFactory } from \"../common/appInsightsClientFactory\";\nimport { BaseTelemetryReporter } from \"../common/baseTelemetryReporter\";\nimport { BaseTelemetrySender } from \"../common/baseTelemetrySender\";\nimport { TelemetryUtil } from \"../common/util\";\n/**\n * Create a replacement for the XHTMLRequest object utilizing nodes HTTP module.\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction getDefaultXHROverride() {\n    // Override the way events get sent since node doesn't have XHTMLRequest\n    const customHttpXHROverride = {\n        sendPOST: (payload, oncomplete) => {\n            const options = {\n                method: \"POST\",\n                headers: {\n                    ...payload.headers,\n                    \"Content-Type\": \"application/json\",\n                    \"Content-Length\": Buffer.byteLength(payload.data)\n                }\n            };\n            try {\n                const req = https.request(payload.urlString, options, res => {\n                    res.on(\"data\", function (responseData) {\n                        oncomplete(res.statusCode ?? 200, res.headers, responseData.toString());\n                    });\n                    // On response with error send status of 0 and a blank response to oncomplete so we can retry events\n                    res.on(\"error\", function () {\n                        oncomplete(0, {});\n                    });\n                });\n                req.write(payload.data, (err) => {\n                    if (err) {\n                        oncomplete(0, {});\n                    }\n                });\n                req.end();\n            }\n            catch {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            }\n        }\n    };\n    return customHttpXHROverride;\n}\n/**\n * Create an XHR override from a custom fetcher function.\n * @param fetcher The custom fetcher function to use for sending telemetry data\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction createXHROverrideFromFetcher(fetcher) {\n    const xhrOverride = {\n        sendPOST: (payload, oncomplete) => {\n            const dataString = typeof payload.data === \"string\" ? payload.data : Buffer.from(payload.data).toString();\n            fetcher(payload.urlString, { method: \"POST\", headers: payload.headers, body: dataString })\n                .then(async (response) => {\n                const responseHeaders = {};\n                for (const [key, value] of response.headers) {\n                    responseHeaders[key] = value;\n                }\n                const body = await response.text();\n                oncomplete(response.status, responseHeaders, body);\n            })\n                .catch(() => {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            });\n        }\n    };\n    return xhrOverride;\n}\nexport class TelemetryReporter extends BaseTelemetryReporter {\n    constructor(connectionString, replacementOptions, initializationOptions, customFetcher) {\n        const xhrOverride = customFetcher ? createXHROverrideFromFetcher(customFetcher) : getDefaultXHROverride();\n        let clientFactory = (connectionString) => appInsightsClientFactory(connectionString, vscode.env.machineId, vscode.env.sessionId, xhrOverride, replacementOptions);\n        // If connection string is usable by 1DS use the 1DS SDk\n        if (TelemetryUtil.shouldUseOneDataSystemSDK(connectionString)) {\n            clientFactory = (key) => oneDataSystemClientFactory(key, vscode, xhrOverride);\n        }\n        const osShim = {\n            release: os.release(),\n            platform: os.platform(),\n            architecture: os.arch(),\n        };\n        const sender = new BaseTelemetrySender(connectionString, clientFactory);\n        if (connectionString && connectionString.indexOf(\"AIF-\") === 0) {\n            throw new Error(\"AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions\");\n        }\n        const initializationOpts = {\n            ...initializationOptions,\n            additionalCommonProperties: initializationOptions?.additionalCommonProperties ?\n                { ...initializationOptions.additionalCommonProperties, ...TelemetryUtil.getAdditionalCommonProperties(osShim) }\n                : TelemetryUtil.getAdditionalCommonProperties(osShim)\n        };\n        super(sender, vscode, initializationOpts);\n    }\n}\n//# sourceMappingURL=telemetryReporter.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BreezeChannelIdentifier } from \"@microsoft/applicationinsights-common\";\nimport { TelemetryUtil } from \"./util\";\nexport const appInsightsClientFactory = async (connectionString, machineId, sessionId, xhrOverride, replacementOptions) => {\n    let appInsightsClient;\n    try {\n        const basicAISDK = await import /* webpackMode: \"eager\" */(\"@microsoft/applicationinsights-web-basic\");\n        const extensionConfig = {};\n        if (xhrOverride) {\n            // Configure the channel to use a XHR Request override since it's not available in node\n            const channelConfig = {\n                alwaysUseXhrOverride: true,\n                httpXHROverride: xhrOverride\n            };\n            extensionConfig[BreezeChannelIdentifier] = channelConfig;\n        }\n        let instrumentationKey;\n        if (!connectionString.startsWith(\"InstrumentationKey=\")) {\n            instrumentationKey = connectionString;\n        }\n        const authConfig = instrumentationKey ? { instrumentationKey } : { connectionString };\n        appInsightsClient = new basicAISDK.ApplicationInsights({\n            ...authConfig,\n            disableAjaxTracking: true,\n            disableExceptionTracking: true,\n            disableFetchTracking: true,\n            disableCorrelationHeaders: true,\n            disableCookiesUsage: true,\n            autoTrackPageVisitTime: false,\n            emitLineDelimitedJson: false,\n            disableInstrumentationKeyValidation: true,\n            extensionConfig,\n        });\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Sets the appinsights client into a standardized form\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            const properties = { ...data?.properties, ...data?.measurements };\n            if (replacementOptions?.length) {\n                TelemetryUtil.applyReplacements(properties, replacementOptions);\n            }\n            appInsightsClient?.track({\n                name: eventName,\n                data: properties,\n                baseType: \"EventData\",\n                ext: { user: { id: machineId, authId: machineId }, app: { sesId: sessionId } },\n                baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n            });\n        },\n        flush: async () => {\n            appInsightsClient?.flush(false);\n        },\n        dispose: async () => {\n            const unloadPromise = new Promise((resolve) => {\n                appInsightsClient?.unload(true, () => {\n                    resolve();\n                    appInsightsClient = undefined;\n                }, 1000);\n            });\n            return unloadPromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=appInsightsClientFactory.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Configures 1DS properly and returns the core client object\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n * @returns The AI core object\n */\nconst getAICore = async (key, vscodeAPI, xhrOverride) => {\n    const oneDs = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-core-js\");\n    const postPlugin = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-post-js\");\n    const appInsightsCore = new oneDs.AppInsightsCore();\n    const collectorChannelPlugin = new postPlugin.PostChannel();\n    // Configure the app insights core to send to collector++ and disable logging of debug info\n    const coreConfig = {\n        instrumentationKey: key,\n        endpointUrl: \"https://mobile.events.data.microsoft.com/OneCollector/1.0\",\n        loggingLevelTelemetry: 0,\n        loggingLevelConsole: 0,\n        disableCookiesUsage: true,\n        disableDbgExt: true,\n        disableInstrumentationKeyValidation: true,\n        channels: [[\n                collectorChannelPlugin\n            ]]\n    };\n    if (xhrOverride) {\n        coreConfig.extensionConfig = {};\n        // Configure the channel to use a XHR Request override since it's not available in node\n        const channelConfig = {\n            alwaysUseXhrOverride: true,\n            httpXHROverride: xhrOverride\n        };\n        coreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n    }\n    const config = vscodeAPI.workspace.getConfiguration(\"telemetry\");\n    const internalTesting = config.get(\"internalTesting\");\n    appInsightsCore.initialize(coreConfig, []);\n    appInsightsCore.addTelemetryInitializer((envelope) => {\n        envelope[\"ext\"] = envelope[\"ext\"] ?? {};\n        envelope[\"ext\"][\"web\"] = envelope[\"ext\"][\"web\"] ?? {};\n        envelope[\"ext\"][\"web\"][\"consentDetails\"] = \"{\\\"GPC_DataSharingOptIn\\\":false}\";\n        // Only add the remaining flags when `telemetry.internalTesting` is enabled\n        if (!internalTesting) {\n            return;\n        }\n        envelope[\"ext\"][\"utc\"] = envelope[\"ext\"][\"utc\"] ?? {};\n        // Sets it to be internal only based on Windows UTC flagging\n        envelope[\"ext\"][\"utc\"][\"flags\"] = 0x0000811ECD;\n    });\n    return appInsightsCore;\n};\n/**\n * Configures and creates a telemetry client using the 1DS sdk\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n */\nexport const oneDataSystemClientFactory = async (key, vscodeAPI, xhrOverride) => {\n    let appInsightsCore = await getAICore(key, vscodeAPI, xhrOverride);\n    const flushOneDS = async () => {\n        try {\n            const flushPromise = new Promise((resolve, reject) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.flush(true, (completedFlush) => {\n                    if (!completedFlush) {\n                        reject(\"Failed to flush app 1DS!\");\n                        return;\n                    }\n                });\n            });\n            return flushPromise;\n        }\n        catch (e) {\n            throw new Error(\"Failed to flush 1DS!\\n\" + e.message);\n        }\n    };\n    // Shape the app insights core from 1DS into a standard format\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsCore?.track({\n                    name: eventName,\n                    baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: flushOneDS,\n        dispose: async () => {\n            const disposePromise = new Promise((resolve) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.unload(false, () => {\n                    resolve();\n                    appInsightsCore = undefined;\n                    return;\n                }, 1000);\n            });\n            return disposePromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=1dsClientFactory.js.map","import { AskAIContext } from '../common/Types';\nimport { Session } from '../common/Session';\nimport * as vscode from 'vscode';\nimport * as ui from '../common/UI';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { TriggerDagRunTool } from './TriggerDagRunTool';\nimport { GetFailedRunsTool } from './GetFailedRunsTool';\nimport { ListActiveDagsTool } from './ListActiveDagsTool';\nimport { ListPausedDagsTool } from './ListPausedDagsTool';\nimport { GetRunningDagsTool } from './GetRunningDagsTool';\nimport { PauseDagTool } from './PauseDagTool';\nimport { UnpauseDagTool } from './UnpauseDagTool';\nimport { GetDagRunsTool } from './GetDagRunsTool';\nimport { CancelDagRunTool } from './CancelDagRunTool';\nimport { AnalyseDagLatestRunTool } from './AnalyseDagLatestRunTool';\nimport { GetDagHistoryTool } from './GetDagHistoryTool';\nimport { GetDagRunDetailTool } from './GetDagRunDetailTool';\nimport { GetTodayTool } from './GetTodayTool';\nimport { GetDagSourceCodeTool } from './GetDagSourceCodeTool';\nimport { GoToDagViewTool } from './GoToDagViewTool';\nimport { GoToDagLogViewTool } from './GoToDagLogViewTool';\nimport { GoToDagRunHistoryTool } from './GoToDagRunHistoryTool';\nimport { GoToProvidersViewTool } from './GoToProvidersViewTool';\nimport { GoToConnectionsViewTool } from './GoToConnectionsViewTool';\nimport { GoToVariablesViewTool } from './GoToVariablesViewTool';\nimport { GoToConfigsViewTool } from './GoToConfigsViewTool';\nimport { GoToPluginsViewTool } from './GoToPluginsViewTool';\nimport { GoToServerHealthViewTool } from './GoToServerHealthViewTool';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class AIHandler \n{\n    public static Current: AIHandler;\n\n    public askAIContext: AskAIContext | undefined;\n    public currentDagId: string | undefined;\n\n    constructor() {\n        AIHandler.Current = this;\n        Telemetry.Current.send('AIHandler.Initialized');\n    }\n\n    public async aIHandler (request: vscode.ChatRequest, context: vscode.ChatContext, stream: vscode.ChatResponseStream, token: vscode.CancellationToken) : Promise<void>\n    {\n        ui.logToOutput('AIHandler.aIHandler Started');\n        Telemetry.Current.send('AIHandler.aIHandler.Started');\n\n        const aiContext = AIHandler.Current?.askAIContext;\n        \n        // 1. Define the tools we want to expose to the model\n        // These must match the definitions in package.json\n        const tools: vscode.LanguageModelChatTool[] = [\n            {\n                name: 'list_active_dags',\n                description: 'Lists all Airflow DAGs that are currently active (not paused). Returns a list of DAG IDs and their details.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'list_paused_dags',\n                description: 'Lists all Airflow DAGs that are currently paused. Returns a list of DAG IDs and their details.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'get_running_dags',\n                description: 'Lists all Airflow DAGs that currently have running or queued DAG runs. Use this when asked about running, executing, or in-progress DAGs. Returns DAG IDs with run states and run IDs.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'pause_dag',\n                description: 'Pauses a specific Airflow DAG. Required input: dag_id (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The unique identifier (ID) of the DAG to pause' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'unpause_dag',\n                description: 'Unpauses (activates) a specific Airflow DAG. Required input: dag_id (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The unique identifier (ID) of the DAG to unpause' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'trigger_dag_run',\n                description: 'Triggers a DAG run. Inputs: dag_id (string), config_json (string, optional), date (string, optional).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        configJson: { type: 'string', description: 'JSON configuration or file path' },\n                        date: { type: 'string', description: 'Logical date in ISO 8601 format' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_failed_runs',\n                description: 'Gets failed DAG runs. Inputs: time_range_hours (number), dag_id_filter (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        timeRangeHours: { type: 'number' },\n                        dagIdFilter: { type: 'string' }\n                    },\n                    required: []\n                }\n            },\n            {\n                name: 'get_dag_runs',\n                description: 'Retrieves DAG runs for a given DAG. Optional date (YYYY-MM-DD). Returns run id, start time, duration, status.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        date: { type: 'string', description: 'Optional date filter YYYY-MM-DD' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_dag_history',\n                description: 'Retrieves DAG run history for a given date (defaults to today). Returns date/time, status, duration, note.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        date: { type: 'string', description: 'Optional date filter YYYY-MM-DD' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'cancel_dag_run',\n                description: 'Cancels the currently running DAG run for the given DAG. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'analyse_dag_latest_run',\n                description: 'Comprehensive analysis of the latest DAG run including tasks, source code, and logs. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_dag_run_detail',\n                description: 'Comprehensive analysis of a specific DAG run by run ID. Analyzes tasks, source code, and logs for the specified run. Required: dag_id, dag_run_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        dagRunId: { type: 'string', description: 'The DAG run ID to analyze' }\n                    },\n                    required: ['dagId', 'dagRunId']\n                }\n            },\n            {\n                name: 'get_today',\n                description: 'Returns the current system date in multiple formats. Use when asked about today\\'s date or current date. Helpful for date filtering operations. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'get_dag_source_code',\n                description: 'Retrieves the Python source code for a specific DAG. Use when the user wants to see or analyze the DAG implementation. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to get source code for' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_view',\n                description: 'Opens the DAG View panel to display information about a specific DAG. Optional: provide dag_run_id to view a specific run. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to view' },\n                        dagRunId: { type: 'string', description: 'Optional DAG run ID to navigate to a specific run' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_log_view',\n                description: 'Opens the DAG Log View panel to display task logs for a specific Airflow DAG. Required: dag_id. Optional: dag_run_id, task_id, try_number.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        dagRunId: { type: 'string', description: 'Optional: The DAG run ID' },\n                        taskId: { type: 'string', description: 'Optional: The Task ID' },\n                        tryNumber: { type: 'number', description: 'Optional: The try number' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_run_history',\n                description: 'Opens the DAG Run History panel with optional filters. Shows run history for a DAG with optional date range and status filters. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to view history for' },\n                        startDate: { type: 'string', description: 'Optional start date filter (YYYY-MM-DD format)' },\n                        endDate: { type: 'string', description: 'Optional end date filter (YYYY-MM-DD format)' },\n                        status: { type: 'string', description: 'Optional status filter (success, failed, running, queued, upstream_failed)' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_providers_view',\n                description: 'Opens the Providers View panel to display installed Airflow providers. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_connections_view',\n                description: 'Opens the Connections View panel to display Airflow connections. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_variables_view',\n                description: 'Opens the Variables View panel to display Airflow variables. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_configs_view',\n                description: 'Opens the Configs View panel to display Airflow configuration settings. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_plugins_view',\n                description: 'Opens the Plugins View panel to display installed Airflow plugins. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_server_health_view',\n                description: 'Opens the Server Health View panel to display Airflow server health status. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            }\n        ];\n\n        // 2. Construct the Initial Messages\n        const messages: vscode.LanguageModelChatMessage[] = [\n            vscode.LanguageModelChatMessage.User(`You are an expert in Apache Airflow. You have access to tools to manage DAGs, view logs, and check status. Use them when appropriate.`),\n            vscode.LanguageModelChatMessage.User(`Don't provide JSON responses unless specifically asked. Always format your responses in markdown.`)\n        ];\n\n        // Loop through the latest 6 entries from context.history (only previous @aws interactions)\n        const recentHistory = context.history.slice(-6);\n        for (const turn of recentHistory) {\n            if (turn instanceof vscode.ChatRequestTurn) {\n                messages.push(vscode.LanguageModelChatMessage.User(turn.prompt));\n                continue;\n            }\n\n            if (turn instanceof vscode.ChatResponseTurn) {\n                const responseContent = turn.response\n                .filter((part): part is vscode.ChatResponseMarkdownPart => part instanceof vscode.ChatResponseMarkdownPart)\n                .map((part: vscode.ChatResponseMarkdownPart) => part.value.value)\n                .join('\\n');\n\n                if (responseContent) {\n                messages.push(vscode.LanguageModelChatMessage.Assistant(responseContent));\n                }\n            }\n        }\n\n        // Add context if available\n        if (aiContext) {\n            messages.push(vscode.LanguageModelChatMessage.User(`Context:\\nDAG: ${aiContext.dag || 'N/A'}\\nLogs: ${aiContext.logs || 'N/A'}\\nCode: ${aiContext.code || 'N/A'}`));\n        }\n\n        if (this.currentDagId) {\n            messages.push(vscode.LanguageModelChatMessage.User(`Current DAG ID in focus: ${this.currentDagId}`));\n        }\n\n        messages.push(vscode.LanguageModelChatMessage.User(request.prompt));\n\n        // Check if user is expressing appreciation\n        const usedAppreciated = request.prompt.toLowerCase().includes('thank');\n\n        // 3. Select Model and Send Request\n        try {\n            //TODO: Make model configurable\n            // const [model] = await vscode.lm.selectChatModels( {id: \"claude-sonnet-4.5\"} );\n            let model = request.model;\n            if (request.model.id.includes('auto')) {\n                const models = await vscode.lm.selectChatModels({ vendor: model.vendor, family: model.family });\n                if (models.length > 0)\n                {\n                    model = models[0];\n                    ui.logToOutput(`Auto-selected model: ${model.name} (${model.id})`);\n                }\n                else\n                {\n                    ui.logToOutput(`No models found for vendor: ${model.vendor}, family: ${model.family}`);\n                    model = undefined;\n                }\n            }\n\n            ui.logToOutput(`Selected AI Family: ${model?.family || 'None'}, Name: ${model?.name || 'None'}`);\n            Telemetry.Current.send('AIHandler.aIHandler.ModelSelected', { modelId: model?.id || 'None' });\n            if (!model) {\n                stream.markdown(\"No suitable AI model found.\");\n                return;\n            }\n\n            // Tool calling loop\n            let keepGoing = true;\n            while (keepGoing && !token.isCancellationRequested) {\n                keepGoing = false; // Default to stop unless we get a tool call\n\n                const chatResponse = await model.sendRequest(messages, { tools }, token);\n                let toolCalls: vscode.LanguageModelToolCallPart[] = [];\n\n                for await (const fragment of chatResponse.text) {\n                    stream.markdown(fragment);\n                }\n                \n                // Collect tool calls from the response\n                for await (const part of chatResponse.stream) {\n                    if (part instanceof vscode.LanguageModelToolCallPart) {\n                        toolCalls.push(part);\n                    }\n                }\n\n                // Execute tools if any were called\n                if (toolCalls.length > 0) {\n                    keepGoing = true; // We need to send results back to the model\n                    \n                    // Add the model's response (including tool calls) to history\n                    messages.push(vscode.LanguageModelChatMessage.Assistant(toolCalls));\n\n                    for (const toolCall of toolCalls) {\n                        stream.progress(`Calling: ${toolCall.name}`);\n                        ui.logToOutput(`AI requested tool: ${toolCall.name} with input: ${JSON.stringify(toolCall.input)}`);\n                        Telemetry.Current.send('AIHandler.aIHandler.ToolCalled', { toolName: toolCall.name, toolInput: JSON.stringify(toolCall.input) });\n                        \n                        try {\n                            // Invoke the tool using VS Code LM API\n                            const result = await vscode.lm.invokeTool(\n                                toolCall.name, \n                                { input: toolCall.input } as any, \n                                token\n                            );\n                            \n                            // Convert result to string/text part\n                            const resultText = result.content\n                                .filter(part => part instanceof vscode.LanguageModelTextPart)\n                                .map(part => (part as vscode.LanguageModelTextPart).value)\n                                .join('\\n');\n                            \n                            // Add result to history\n                            messages.push(vscode.LanguageModelChatMessage.User([\n                                new vscode.LanguageModelToolResultPart(toolCall.callId, [new vscode.LanguageModelTextPart(resultText)])\n                            ]));\n\n                        } catch (err) {\n                            Telemetry.Current.send('AIHandler.aIHandler.ToolCallFailed', { toolName: toolCall.name, error: err instanceof Error ? err.message : String(err) });\n                            const errorMessage = `Tool execution failed: ${err instanceof Error ? err.message : String(err)}`;\n                            messages.push(vscode.LanguageModelChatMessage.User([\n                                new vscode.LanguageModelToolResultPart(toolCall.callId, [new vscode.LanguageModelTextPart(errorMessage)])\n                            ]));\n                        }\n                    }\n                }\n            }\n\n            // Final appreciation message\n            if (usedAppreciated) {\n                stream.markdown(\"\\n\\n\\n\")\n                stream.markdown(\"\\n [Donate](https://github.com/sponsors/necatiarslan) if you found me useful!\");\n                stream.markdown(\"\\n Request a [New Feature](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)\");\n                stream.markdown(\"\\n Attend [Survey](https://bit.ly/airflow-extension-survey) to help me get better. \");\n            }\n\n        } catch (err) {\n            ui.logToOutput(`AIHandler.aIHandler Error: ${err instanceof Error ? err.message : String(err)}`);\n            Telemetry.Current.send('AIHandler.aIHandler.Error', { error: err instanceof Error ? err.message : String(err) });\n            if (err instanceof Error) {\n                stream.markdown(`I'm sorry, I couldn't connect to the AI model: ${err.message}`);\n            } else {\n                stream.markdown(\"I'm sorry, I couldn't connect to the AI model.\");\n            }\n            stream.markdown(\"\\n Please [Report Bug](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)\");\n\n        }\n    };\n\n    public async isChatCommandAvailable(): Promise<boolean> {\n        const commands = await vscode.commands.getCommands(true); // 'true' includes internal commands\n        return commands.includes('workbench.action.chat.open');\n    }\n\n    public async askAI(dagId: string, fileToken: string) {\n        ui.logToOutput('AIHandler.askAI Started');\n        Telemetry.Current.send('AIHandler.askAI.Started');\n        if (!Session.Current.Api) { return; }\n        if (!await this.isChatCommandAvailable()) {\n            ui.showErrorMessage('Chat command is not available. Please ensure you have access to VS Code AI features.');\n            return;\n        }\n\n        let dagSourceCode = '';\n        let latestDagLogs = '';\n\n        // Fetch DAG Source Code\n        const sourceResult = await Session.Current.Api.getSourceCode(dagId, fileToken);\n        if (sourceResult.isSuccessful) {\n            dagSourceCode = sourceResult.result;\n        } else {\n            ui.showErrorMessage('Failed to fetch DAG source code for AI analysis.');\n            return;\n        }\n\n        // Fetch Latest DAG Run Logs\n        const logResult = await Session.Current.Api.getLastDagRunLogText(dagId);\n        if (logResult.isSuccessful) {\n            latestDagLogs = logResult.result;\n        } else {\n            ui.showErrorMessage('Failed to fetch latest DAG run logs for AI analysis.');\n            return;\n        }\n\n        await this.askAIWithContext({ code: dagSourceCode, logs: latestDagLogs, dag: dagId, dagRun: null, tasks: null, taskInstances: null });\n    }\n\n    public async askAIWithContext(askAIContext: AskAIContext) {\n        this.askAIContext = askAIContext;\n\n        const appName = vscode.env.appName;\n        let commandId = '';\n        if (appName.includes('Antigravity')) {\n            // Antigravity replaces the Chat with an Agent workflow.\n            // We must use the Agent Manager command instead.\n            // **REPLACE WITH THE ACTUAL ANTIGRAVITY AGENT COMMAND ID**\n            commandId = 'antigravity.startAgentTask';\n\n        } else if (appName.includes('Code - OSS') || appName.includes('Visual Studio Code')) {\n            // This is standard VS Code or VSCodium. Check for the legacy Chat command.\n            commandId = 'workbench.action.chat.open';\n\n        } else {\n            // Unknown environment, default to checking if the command exists at all.\n            commandId = 'workbench.action.chat.open';\n        }\n\n        await vscode.commands.executeCommand(commandId, {\n            query: '@airflow Analyze the current logs'\n        });\n    }\n\n    public registerChatParticipant(){\n        const participant = vscode.chat.createChatParticipant('airflow-ext.participant', AIHandler.Current.aIHandler.bind(AIHandler.Current));\n        participant.iconPath = vscode.Uri.joinPath(Session.Current.Context.extensionUri, 'media', 'ai-assistant-logo.png');\n        Session.Current.Context.subscriptions.push(participant);\n    }\n\n    public registerAiTools(){\n        // Register Language Model Tools for AI-powered control, monitoring, and debugging\n        ui.logToOutput('Registering Language Model Tools...');\n        \n        // Initialize the API adapter (uses DagTreeView.Current.api dynamically)\n        const airflowClient = new AirflowClientAdapter();\n        const context = Session.Current.Context;\n\n        // Register Tool 1: trigger_dag_run (Control)\n        const triggerDagRunTool = vscode.lm.registerTool(\n            'trigger_dag_run',\n            new TriggerDagRunTool(airflowClient)\n        );\n        context.subscriptions.push(triggerDagRunTool);\n        ui.logToOutput('Registered tool: trigger_dag_run');\n\n        // Register Tool 2: get_failed_runs (Monitoring)\n        const getFailedRunsTool = vscode.lm.registerTool(\n            'get_failed_runs',\n            new GetFailedRunsTool(airflowClient)\n        );\n        context.subscriptions.push(getFailedRunsTool);\n        ui.logToOutput('Registered tool: get_failed_runs');\n\n        // Register Tool 4: list_active_dags (Monitoring)\n        const listActiveDagsTool = vscode.lm.registerTool(\n            'list_active_dags',\n            new ListActiveDagsTool(airflowClient)\n        );\n        context.subscriptions.push(listActiveDagsTool);\n        ui.logToOutput('Registered tool: list_active_dags');\n\n        // Register Tool 5: list_paused_dags (Monitoring)\n        const listPausedDagsTool = vscode.lm.registerTool(\n            'list_paused_dags',\n            new ListPausedDagsTool(airflowClient)\n        );\n        context.subscriptions.push(listPausedDagsTool);\n        ui.logToOutput('Registered tool: list_paused_dags');\n\n        // Register Tool 6: get_running_dags (Monitoring)\n        const getRunningDagsTool = vscode.lm.registerTool(\n            'get_running_dags',\n            new GetRunningDagsTool(airflowClient)\n        );\n        context.subscriptions.push(getRunningDagsTool);\n        ui.logToOutput('Registered tool: get_running_dags');\n\n        // Register Tool 7: pause_dag (Control)\n        const pauseDagTool = vscode.lm.registerTool(\n            'pause_dag',\n            new PauseDagTool(airflowClient)\n        );\n        context.subscriptions.push(pauseDagTool);\n        ui.logToOutput('Registered tool: pause_dag');\n\n        // Register Tool 8: unpause_dag (Control)\n        const unpauseDagTool = vscode.lm.registerTool(\n            'unpause_dag',\n            new UnpauseDagTool(airflowClient)\n        );\n        context.subscriptions.push(unpauseDagTool);\n        ui.logToOutput('Registered tool: unpause_dag');\n\n        // Register Tool 9: get_dag_runs (Monitoring)\n        const getDagRunsTool = vscode.lm.registerTool(\n            'get_dag_runs',\n            new GetDagRunsTool(airflowClient)\n        );\n        context.subscriptions.push(getDagRunsTool);\n        ui.logToOutput('Registered tool: get_dag_runs');\n\n        // Register Tool 10: cancel_dag_run (Control)\n        const cancelDagRunTool = vscode.lm.registerTool(\n            'cancel_dag_run',\n            new CancelDagRunTool(airflowClient)\n        );\n        context.subscriptions.push(cancelDagRunTool);\n        ui.logToOutput('Registered tool: cancel_dag_run');\n\n        // Register Tool 11: analyse_dag_latest_run (Analysis)\n        const analyseDagLatestRunTool = vscode.lm.registerTool(\n            'analyse_dag_latest_run',\n            new AnalyseDagLatestRunTool(airflowClient)\n        );\n        context.subscriptions.push(analyseDagLatestRunTool);\n        ui.logToOutput('Registered tool: analyse_dag_latest_run');\n\n        // Register Tool 12: get_dag_history (Monitoring)\n        const getDagHistoryTool = vscode.lm.registerTool(\n            'get_dag_history',\n            new GetDagHistoryTool(airflowClient)\n        );\n        context.subscriptions.push(getDagHistoryTool);\n        ui.logToOutput('Registered tool: get_dag_history');\n\n        // Register Tool 13: get_dag_run_detail (Analysis)\n        const getDagRunDetailTool = vscode.lm.registerTool(\n            'get_dag_run_detail',\n            new GetDagRunDetailTool(airflowClient)\n        );\n        context.subscriptions.push(getDagRunDetailTool);\n        ui.logToOutput('Registered tool: get_dag_run_detail');\n\n        // Register Tool 14: get_today (Utility)\n        const getTodayTool = vscode.lm.registerTool(\n            'get_today',\n            new GetTodayTool()\n        );\n        context.subscriptions.push(getTodayTool);\n        ui.logToOutput('Registered tool: get_today');\n\n        // Register Tool 15: get_dag_source_code (Analysis)\n        const getDagSourceCodeTool = vscode.lm.registerTool(\n            'get_dag_source_code',\n            new GetDagSourceCodeTool(airflowClient)\n        );\n        context.subscriptions.push(getDagSourceCodeTool);\n        ui.logToOutput('Registered tool: get_dag_source_code');\n\n        // Register Tool 16: go_to_dag_view (Navigation)\n        const goToDagViewTool = vscode.lm.registerTool(\n            'go_to_dag_view',\n            new GoToDagViewTool()\n        );\n        context.subscriptions.push(goToDagViewTool);\n        ui.logToOutput('Registered tool: go_to_dag_view');\n\n        // Register Tool 17: go_to_dag_log_view (Navigation)\n        const goToDagLogViewTool = vscode.lm.registerTool(\n            'go_to_dag_log_view',\n            new GoToDagLogViewTool()\n        );\n        context.subscriptions.push(goToDagLogViewTool);\n        ui.logToOutput('Registered tool: go_to_dag_log_view');\n\n        // Register Tool 18: go_to_dag_run_history (Navigation)\n        const goToDagRunHistoryTool = vscode.lm.registerTool(\n            'go_to_dag_run_history',\n            new GoToDagRunHistoryTool()\n        );\n        context.subscriptions.push(goToDagRunHistoryTool);\n        ui.logToOutput('Registered tool: go_to_dag_run_history');\n\n        // Register Tool 19: go_to_providers_view (Navigation)\n        const goToProvidersViewTool = vscode.lm.registerTool(\n            'go_to_providers_view',\n            new GoToProvidersViewTool()\n        );\n        context.subscriptions.push(goToProvidersViewTool);\n        ui.logToOutput('Registered tool: go_to_providers_view');\n\n        // Register Tool 20: go_to_connections_view (Navigation)\n        const goToConnectionsViewTool = vscode.lm.registerTool(\n            'go_to_connections_view',\n            new GoToConnectionsViewTool()\n        );\n        context.subscriptions.push(goToConnectionsViewTool);\n        ui.logToOutput('Registered tool: go_to_connections_view');\n\n        // Register Tool 21: go_to_variables_view (Navigation)\n        const goToVariablesViewTool = vscode.lm.registerTool(\n            'go_to_variables_view',\n            new GoToVariablesViewTool()\n        );\n        context.subscriptions.push(goToVariablesViewTool);\n        ui.logToOutput('Registered tool: go_to_variables_view');\n\n        // Register Tool 22: go_to_configs_view (Navigation)\n        const goToConfigsViewTool = vscode.lm.registerTool(\n            'go_to_configs_view',\n            new GoToConfigsViewTool()\n        );\n        context.subscriptions.push(goToConfigsViewTool);\n        ui.logToOutput('Registered tool: go_to_configs_view');\n\n        // Register Tool 23: go_to_plugins_view (Navigation)\n        const goToPluginsViewTool = vscode.lm.registerTool(\n            'go_to_plugins_view',\n            new GoToPluginsViewTool()\n        );\n        context.subscriptions.push(goToPluginsViewTool);\n        ui.logToOutput('Registered tool: go_to_plugins_view');\n\n        // Register Tool 24: go_to_server_health_view (Navigation)\n        const goToServerHealthViewTool = vscode.lm.registerTool(\n            'go_to_server_health_view',\n            new GoToServerHealthViewTool()\n        );\n        context.subscriptions.push(goToServerHealthViewTool);\n        ui.logToOutput('Registered tool: go_to_server_health_view');\n\n        ui.logToOutput('All Language Model Tools registered successfully');\n    }\n}","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\n//# sourceMappingURL=Constants.js.map","import { DagView } from \"../dag/DagView\";\nimport { DagTreeView } from \"../dag/DagTreeView\";\n\n\nexport function DagTriggered(source: any, dagId: string, dagRunId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.goToDagRun(dagId, dagRunId);\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagStateWithDagId(dagId, dagRunId, \"queued\");\n    }\n    \n}\n\nexport function DagRunCancelled(source: any, dagId: string, dagRunId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.goToDagRun(dagId, dagRunId);\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagStateWithDagId(dagId, dagRunId, \"failed\");\n    }\n    \n}\n\n\nexport function DagPaused(source: any, dagId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.loadDagInfoOnly();\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagPaused(dagId)\n    }\n    \n}\n\nexport function DagUnPaused(source: any, dagId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.loadDagInfoOnly();\n    }\n    \n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagUnPaused(dagId)\n    }\n    \n}","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, getDocument, getWindow, isArray, objForEachKey, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_EVT_NAME, _DYN_LENGTH, _DYN_PUSH, _DYN_REPLACE, _DYN_SPLICE, _DYN_SPLIT, _DYN_TYPE } from \"../__DynamicConstants\";\r\nimport { createElmNodeData, createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// Added to help with minfication\r\nvar strOnPrefix = \"on\";\r\nvar strAttachEvent = \"attachEvent\";\r\nvar strAddEventHelper = \"addEventListener\";\r\nvar strDetachEvent = \"detachEvent\";\r\nvar strRemoveEventListener = \"removeEventListener\";\r\nvar strEvents = \"events\";\r\nvar strVisibilityChangeEvt = \"visibilitychange\";\r\nvar strPageHide = \"pagehide\";\r\nvar strPageShow = \"pageshow\";\r\nvar strUnload = \"unload\";\r\nvar strBeforeUnload = \"beforeunload\";\r\nvar strPageHideNamespace = createUniqueNamespace(\"aiEvtPageHide\");\r\nvar strPageShowNamespace = createUniqueNamespace(\"aiEvtPageShow\");\r\nvar rRemoveEmptyNs = /\\.[\\.]+/g;\r\nvar rRemoveTrailingEmptyNs = /[\\.]+$/;\r\nvar _guid = 1;\r\nvar elmNodeData = createElmNodeData(\"events\");\r\nvar eventNamespace = /^([^.]*)(?:\\.(.+)|)/;\r\nfunction _normalizeNamespace(name) {\r\n    if (name && name[_DYN_REPLACE /* @min:%2ereplace */]) {\r\n        return name[_DYN_REPLACE /* @min:%2ereplace */](/^[\\s\\.]+|(?=[\\s\\.])[\\.\\s]+$/g, STR_EMPTY);\r\n    }\r\n    return name;\r\n}\r\nfunction _getEvtNamespace(eventName, evtNamespace) {\r\n    if (evtNamespace) {\r\n        var theNamespace_1 = STR_EMPTY;\r\n        if (isArray(evtNamespace)) {\r\n            theNamespace_1 = STR_EMPTY;\r\n            arrForEach(evtNamespace, function (name) {\r\n                name = _normalizeNamespace(name);\r\n                if (name) {\r\n                    if (name[0] !== \".\") {\r\n                        name = \".\" + name;\r\n                    }\r\n                    theNamespace_1 += name;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            theNamespace_1 = _normalizeNamespace(evtNamespace);\r\n        }\r\n        if (theNamespace_1) {\r\n            if (theNamespace_1[0] !== \".\") {\r\n                theNamespace_1 = \".\" + theNamespace_1;\r\n            }\r\n            // We may only have the namespace and not an eventName\r\n            eventName = (eventName || STR_EMPTY) + theNamespace_1;\r\n        }\r\n    }\r\n    var parsedEvent = (eventNamespace.exec(eventName || STR_EMPTY) || []);\r\n    return {\r\n        type: parsedEvent[1],\r\n        ns: ((parsedEvent[2] || STR_EMPTY).replace(rRemoveEmptyNs, \".\").replace(rRemoveTrailingEmptyNs, STR_EMPTY)[_DYN_SPLIT /* @min:%2esplit */](\".\").sort()).join(\".\")\r\n    };\r\n}\r\n/**\r\n * Get all of the registered events on the target object, this is primarily used for testing cleanup but may also be used by\r\n * applications to remove their own events\r\n * @param target - The EventTarget that has registered events\r\n * @param eventName - [Optional] The name of the event to return the registered handlers and full name (with namespaces)\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n */\r\nexport function __getRegisteredEvents(target, eventName, evtNamespace) {\r\n    var theEvents = [];\r\n    var eventCache = elmNodeData.get(target, strEvents, {}, false);\r\n    var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n    objForEachKey(eventCache, function (evtType, registeredEvents) {\r\n        arrForEach(registeredEvents, function (value) {\r\n            if (!evtName[_DYN_TYPE /* @min:%2etype */] || evtName[_DYN_TYPE /* @min:%2etype */] === value[_DYN_EVT_NAME /* @min:%2eevtName */][_DYN_TYPE /* @min:%2etype */]) {\r\n                if (!evtName.ns || evtName.ns === evtName.ns) {\r\n                    theEvents[_DYN_PUSH /* @min:%2epush */]({\r\n                        name: value.evtName[_DYN_TYPE /* @min:%2etype */] + (value[_DYN_EVT_NAME /* @min:%2eevtName */].ns ? \".\" + value[_DYN_EVT_NAME /* @min:%2eevtName */].ns : STR_EMPTY),\r\n                        handler: value.handler\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n    return theEvents;\r\n}\r\n// Exported for internal unit testing only\r\nfunction _getRegisteredEvents(target, evtName, addDefault) {\r\n    if (addDefault === void 0) { addDefault = true; }\r\n    var aiEvts = elmNodeData.get(target, strEvents, {}, addDefault);\r\n    var registeredEvents = aiEvts[evtName];\r\n    if (!registeredEvents) {\r\n        registeredEvents = aiEvts[evtName] = [];\r\n    }\r\n    return registeredEvents;\r\n}\r\nfunction _doDetach(obj, evtName, handlerRef, useCapture) {\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        if (obj[strRemoveEventListener]) {\r\n            obj[strRemoveEventListener](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n        }\r\n        else if (obj[strDetachEvent]) {\r\n            obj[strDetachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n        }\r\n    }\r\n}\r\nfunction _doAttach(obj, evtName, handlerRef, useCapture) {\r\n    var result = false;\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */] && handlerRef) {\r\n        if (obj[strAddEventHelper]) {\r\n            // all browsers except IE before version 9\r\n            obj[strAddEventHelper](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n            result = true;\r\n        }\r\n        else if (obj[strAttachEvent]) {\r\n            // IE before version 9\r\n            obj[strAttachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction _doUnregister(target, events, evtName, unRegFn) {\r\n    var idx = events[_DYN_LENGTH /* @min:%2elength */];\r\n    while (idx--) {\r\n        var theEvent = events[idx];\r\n        if (theEvent) {\r\n            if (!evtName.ns || evtName.ns === theEvent[_DYN_EVT_NAME /* @min:%2eevtName */].ns) {\r\n                if (!unRegFn || unRegFn(theEvent)) {\r\n                    _doDetach(target, theEvent[_DYN_EVT_NAME /* @min:%2eevtName */], theEvent.handler, theEvent.capture);\r\n                    // Remove the registered event\r\n                    events[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _unregisterEvents(target, evtName, unRegFn) {\r\n    if (evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        _doUnregister(target, _getRegisteredEvents(target, evtName[_DYN_TYPE /* @min:%2etype */]), evtName, unRegFn);\r\n    }\r\n    else {\r\n        var eventCache = elmNodeData.get(target, strEvents, {});\r\n        objForEachKey(eventCache, function (evtType, events) {\r\n            _doUnregister(target, events, evtName, unRegFn);\r\n        });\r\n        // Cleanup\r\n        if (objKeys(eventCache)[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n            elmNodeData.kill(target, strEvents);\r\n        }\r\n    }\r\n}\r\nexport function mergeEvtNamespace(theNamespace, namespaces) {\r\n    var newNamespaces;\r\n    if (namespaces) {\r\n        if (isArray(namespaces)) {\r\n            newNamespaces = [theNamespace].concat(namespaces);\r\n        }\r\n        else {\r\n            newNamespaces = [theNamespace, namespaces];\r\n        }\r\n        // resort the namespaces so they are always in order\r\n        newNamespaces = (_getEvtNamespace(\"xx\", newNamespaces).ns)[_DYN_SPLIT /* @min:%2esplit */](\".\");\r\n    }\r\n    else {\r\n        newNamespaces = theNamespace;\r\n    }\r\n    return newNamespaces;\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventName - String that specifies any of the standard DHTML Events without \"on\" prefix, if may also include an optional (dot \".\" prefixed)\r\n * namespaces \"click\" \"click.mynamespace\" in addition to specific namespaces.\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function eventOn(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    var result = false;\r\n    if (target) {\r\n        try {\r\n            var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n            result = _doAttach(target, evtName, handlerRef, useCapture);\r\n            if (result && elmNodeData.accept(target)) {\r\n                var registeredEvent = {\r\n                    guid: _guid++,\r\n                    evtName: evtName,\r\n                    handler: handlerRef,\r\n                    capture: useCapture\r\n                };\r\n                _getRegisteredEvents(target, evtName.type)[_DYN_PUSH /* @min:%2epush */](registeredEvent);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventName - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function eventOff(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    if (target) {\r\n        try {\r\n            var evtName_1 = _getEvtNamespace(eventName, evtNamespace);\r\n            var found_1 = false;\r\n            _unregisterEvents(target, evtName_1, function (regEvent) {\r\n                if ((evtName_1.ns && !handlerRef) || regEvent.handler === handlerRef) {\r\n                    found_1 = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!found_1) {\r\n                // fallback to try and remove as requested\r\n                _doDetach(target, evtName_1, handlerRef, useCapture);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventNameWithoutOn - String that specifies any of the standard DHTML Events without \"on\" prefix and optional (dot \".\" prefixed) namespaces \"click\" \"click.mynamespace\".\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function attachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    return eventOn(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventNameWithoutOn  - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function detachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    eventOff(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Trys to add an event handler for the specified event to the window, body and document\r\n * @param eventName  - The name of the event\r\n * @param callback  - The callback function that needs to be executed for the given event\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns - true if the handler was successfully added\r\n */\r\nexport function addEventHandler(eventName, callback, evtNamespace) {\r\n    var result = false;\r\n    var w = getWindow();\r\n    if (w) {\r\n        result = eventOn(w, eventName, callback, evtNamespace);\r\n        result = eventOn(w[\"body\"], eventName, callback, evtNamespace) || result;\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        result = eventOn(doc, eventName, callback, evtNamespace) || result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Trys to remove event handler(s) for the specified event/namespace to the window, body and document\r\n * @param eventName - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param callback - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventHandler(eventName, callback, evtNamespace) {\r\n    var w = getWindow();\r\n    if (w) {\r\n        eventOff(w, eventName, callback, evtNamespace);\r\n        eventOff(w[\"body\"], eventName, callback, evtNamespace);\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        eventOff(doc, eventName, callback, evtNamespace);\r\n    }\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nfunction _addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && events[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                if (!excludeEvents || arrIndexOf(excludeEvents, name) === -1) {\r\n                    added = addEventHandler(name, listener, evtNamespace) || added;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && isArray(events)) {\r\n        added = _addEventListeners(events, listener, excludeEvents, evtNamespace);\r\n        if (!added && excludeEvents && excludeEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            // Failed to add any listeners and we excluded some, so just attempt to add the excluded events\r\n            added = _addEventListeners(events, listener, null, evtNamespace);\r\n        }\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Remove the listener from the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventListeners(events, listener, evtNamespace) {\r\n    if (events && isArray(events)) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                removeEventHandler(name, listener, evtNamespace);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Listen to the 'beforeunload', 'unload' and 'pagehide' events which indicates a page unload is occurring,\r\n * this does NOT listen to the 'visibilitychange' event as while it does indicate that the page is being hidden\r\n * it does not *necessarily* mean that the page is being completely unloaded, it can mean that the user is\r\n * just navigating to a different Tab and may come back (without unloading the page). As such you may also\r\n * need to listen to the 'addPageHideEventListener' and 'addPageShowEventListener' events.\r\n * @param listener - The event callback to call when a page unload event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked, unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageUnloadEventListener(listener, excludeEvents, evtNamespace) {\r\n    // Hook the unload event for the document, window and body to ensure that the client events are flushed to the server\r\n    // As just hooking the window does not always fire (on chrome) for page navigation's.\r\n    return addEventListeners([strBeforeUnload, strUnload, strPageHide], listener, excludeEvents, evtNamespace);\r\n}\r\n/**\r\n * Remove any matching 'beforeunload', 'unload' and 'pagehide' events that may have been added via addEventListener,\r\n * addEventListeners, addPageUnloadEventListener or addPageHideEventListener.\r\n * @param listener - The specific event callback to to be removed\r\n * @param evtNamespace - [Optional] Namespace(s) uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function removePageUnloadEventListener(listener, evtNamespace) {\r\n    removeEventListeners([strBeforeUnload, strUnload, strPageHide], listener, evtNamespace);\r\n}\r\n/**\r\n * Listen to the pagehide and visibility changing to 'hidden' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page hide event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] A Namespace to append to the event listeners so they can be uniquely identified and removed\r\n * based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageHideEventListener\" can remove these events.\r\n * Suggestion: pass as true if you are also calling addPageUnloadEventListener as that also hooks pagehide\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageHideEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"hidden\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    var pageUnloadAdded = _addEventListeners([strPageHide], listener, excludeEvents, newNamespaces);\r\n    if (!excludeEvents || arrIndexOf(excludeEvents, strVisibilityChangeEvt) === -1) {\r\n        pageUnloadAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageUnloadAdded;\r\n    }\r\n    if (!pageUnloadAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageUnloadAdded = addPageHideEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageUnloadAdded;\r\n}\r\n/**\r\n * Removes the pageHide event listeners added by addPageHideEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageHideEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageHideEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    removeEventListeners([strPageHide], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n/**\r\n * Listen to the pageshow and visibility changing to 'visible' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page is show event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional/Recommended] A Namespace to append to the event listeners so they can be uniquely\r\n * identified and removed based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageShowEventListener\" can remove these events.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageShowEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"visible\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    var pageShowAdded = _addEventListeners([strPageShow], listener, excludeEvents, newNamespaces);\r\n    pageShowAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageShowAdded;\r\n    if (!pageShowAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageShowAdded = addPageShowEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageShowAdded;\r\n}\r\n/**\r\n * Removes the pageShow event listeners added by addPageShowEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageShowEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageShowEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    removeEventListeners([strPageShow], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n//# sourceMappingURL=EventHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 11\r\nexport var _DYN_LENGTH = \"length\"; // Count: 64\r\nexport var _DYN_WARN_TO_CONSOLE = \"warnToConsole\"; // Count: 4\r\nexport var _DYN_THROW_INTERNAL = \"throwInternal\"; // Count: 5\r\nexport var _DYN_WATCH = \"watch\"; // Count: 7\r\nexport var _DYN_APPLY = \"apply\"; // Count: 7\r\nexport var _DYN_PUSH = \"push\"; // Count: 42\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 9\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 20\r\nexport var _DYN_CANCEL = \"cancel\"; // Count: 9\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 8\r\nexport var _DYN_REMOVE_NOTIFICATION_0 = \"removeNotificationListener\"; // Count: 4\r\nexport var _DYN_ADD_NOTIFICATION_LIS1 = \"addNotificationListener\"; // Count: 4\r\nexport var _DYN_IS_INITIALIZED = \"isInitialized\"; // Count: 11\r\nexport var _DYN_GET_NOTIFY_MGR = \"getNotifyMgr\"; // Count: 5\r\nexport var _DYN_GET_PLUGIN = \"getPlugin\"; // Count: 5\r\nexport var _DYN_NAME = \"name\"; // Count: 9\r\nexport var _DYN_PROCESS_NEXT = \"processNext\"; // Count: 15\r\nexport var _DYN_GET_PROCESS_TEL_CONT2 = \"getProcessTelContext\"; // Count: 2\r\nexport var _DYN_VALUE = \"value\"; // Count: 7\r\nexport var _DYN_ENABLED = \"enabled\"; // Count: 6\r\nexport var _DYN_STOP_POLLING_INTERNA3 = \"stopPollingInternalLogs\"; // Count: 2\r\nexport var _DYN_UNLOAD = \"unload\"; // Count: 7\r\nexport var _DYN_ON_COMPLETE = \"onComplete\"; // Count: 4\r\nexport var _DYN_VERSION = \"version\"; // Count: 4\r\nexport var _DYN_LOGGING_LEVEL_CONSOL4 = \"loggingLevelConsole\"; // Count: 2\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 7\r\nexport var _DYN_TEARDOWN = \"teardown\"; // Count: 9\r\nexport var _DYN_MESSAGE_ID = \"messageId\"; // Count: 4\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 7\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 9\r\nexport var _DYN__DO_TEARDOWN = \"_doTeardown\"; // Count: 5\r\nexport var _DYN_UPDATE = \"update\"; // Count: 5\r\nexport var _DYN_GET_NEXT = \"getNext\"; // Count: 10\r\nexport var _DYN_SET_NEXT_PLUGIN = \"setNextPlugin\"; // Count: 5\r\nexport var _DYN_USER_AGENT = \"userAgent\"; // Count: 5\r\nexport var _DYN_SPLIT = \"split\"; // Count: 8\r\nexport var _DYN_REPLACE = \"replace\"; // Count: 9\r\nexport var _DYN_SUBSTRING = \"substring\"; // Count: 4\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 5\r\nexport var _DYN_TYPE = \"type\"; // Count: 17\r\nexport var _DYN_EVT_NAME = \"evtName\"; // Count: 4\r\nexport var _DYN_STATUS = \"status\"; // Count: 9\r\nexport var _DYN_GET_ALL_RESPONSE_HEA5 = \"getAllResponseHeaders\"; // Count: 2\r\nexport var _DYN_IS_CHILD_EVT = \"isChildEvt\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 11\r\nexport var _DYN_GET_CTX = \"getCtx\"; // Count: 6\r\nexport var _DYN_SET_CTX = \"setCtx\"; // Count: 10\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 6\r\nexport var _DYN_URL_STRING = \"urlString\"; // Count: 5\r\nexport var _DYN_TIMEOUT = \"timeout\"; // Count: 6\r\nexport var _DYN_TOTAL_REQUEST = \"totalRequest\"; // Count: 4\r\nexport var _DYN_REQUEST_DURATION = \"requestDuration\"; // Count: 3\r\nexport var _DYN_FAILURE = \"failure\"; // Count: 4\r\nexport var _DYN_EXCEPTION = \"exception\"; // Count: 4\r\nexport var _DYN_THROTTLE = \"throttle\"; // Count: 4\r\nexport var _DYN_TRACE_FLAGS = \"traceFlags\"; // Count: 5\r\nexport var _DYN_GET_ATTRIBUTE = \"getAttribute\"; // Count: 3\r\n//# sourceMappingURL=__DynamicConstants.js.map","/**\n * PauseDagTool - Language Model Tool for pausing a DAG\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IPauseDagParams {\n    dagId: string;\n}\n\nexport class PauseDagTool implements vscode.LanguageModelTool<IPauseDagParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IPauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Pause DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **PAUSE** the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n\\n`);\n        confirmationMessage.appendMarkdown('**Effect:** No new runs will be scheduled for this DAG.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Pausing DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Pause DAG',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IPauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('PauseDagTool.invoke');\n        \n        try {\n            await this.client.pauseDag(dagId, true); // true = pause\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Successfully PAUSED DAG: **${dagId}**`)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('PauseDagTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to pause DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","import * as vscode from 'vscode';\nimport { Uri, Webview } from \"vscode\";\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\nlet outputChannel: vscode.OutputChannel;\nlet logsOutputChannel: vscode.OutputChannel;\n\nconst NEW_LINE: string = \"\\n\\n\";\n\nexport function toISODateString(date: Date | null): string {\n  if (!date) {\n    return \"\";\n  }\n  return date.toISOString().split('T')[0];\n}\n\nexport function toISODateTimeString(date: Date | null): string {\n  if (!date) {\n    return \"\";\n  }\n  return date.toISOString().replace('T', ' ').substring(0, 19);\n}\n\nexport function getUri(webview: Webview, extensionUri: Uri, pathList: string[]) {\n  return webview.asWebviewUri(Uri.joinPath(extensionUri, ...pathList));\n}\n\nexport function showOutputMessage(message: any, popupMessage: string = \"Results are printed to OUTPUT / Airflow-Extension\"): void {\n\n  if (!outputChannel) {\n    outputChannel = vscode.window.createOutputChannel(\"Airflow-Extension\");\n  }\n\n  outputChannel.clear();\n\n  if (typeof message === \"object\") {\n    outputChannel.appendLine(JSON.stringify(message, null, 4));\n  }\n  else {\n    outputChannel.appendLine(message);\n  }\n  outputChannel.show();\n  showInfoMessage(popupMessage);\n}\n\nexport function logToOutput(message: any, error: Error | undefined = undefined): void {\n  const now = new Date().toLocaleString();\n\n  if (!logsOutputChannel) {\n    logsOutputChannel = vscode.window.createOutputChannel(\"Airflow-Log\");\n  }\n\n  if (typeof message === \"object\") {\n    logsOutputChannel.appendLine(\"[\" + now + \"] \" + JSON.stringify(message, null, 4));\n  }\n  else {\n    logsOutputChannel.appendLine(\"[\" + now + \"] \" + message);\n  }\n\n  if (error) {\n    logsOutputChannel.appendLine(error.name);\n    logsOutputChannel.appendLine(error.message);\n    if (error.stack) {\n      logsOutputChannel.appendLine(error.stack);\n    }\n  }\n}\n\nexport function showInfoMessage(message: string): void {\n  vscode.window.showInformationMessage(message);\n}\n\nexport function showWarningMessage(message: string): void {\n  vscode.window.showWarningMessage(message);\n}\n\nexport function showErrorMessage(message: string, error: Error | undefined = undefined): void {\n  if (error) {\n    vscode.window.showErrorMessage(message + NEW_LINE + error.name + NEW_LINE + error.message);\n  }\n  else {\n    vscode.window.showErrorMessage(message);\n  }\n}\n\nexport function showApiErrorMessage(message: string, jsonResult: any): void {\n  let preText: string = \"\";\n  if (jsonResult) {\n    if (jsonResult.status === 403) {\n      preText = \"Permission Denied !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else if (jsonResult.status === 401) {\n      preText = \"Invalid Authentication Info !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else if (jsonResult.status === 404) {\n      preText = \"Resource Not Found !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else {\n      vscode.window.showErrorMessage(preText);\n    }\n  }\n  else {\n    vscode.window.showErrorMessage(message);\n  }\n}\n\nexport function getExtensionVersion() {\n  const { version: extVersion } = JSON.parse(\n    readFileSync(join(__dirname, '..', 'package.json'), { encoding: 'utf8' })\n  );\n  return extVersion;\n}\n\nexport function openFile(file: string) {\n  // Use workspace API to open file in editor and show it in column one\n  (async () => {\n    try {\n      const doc = await vscode.workspace.openTextDocument(vscode.Uri.file(file));\n      await vscode.window.showTextDocument(doc, { viewColumn: vscode.ViewColumn.One, preview: false });\n    } catch (err) {\n      logToOutput('openFile Error', err as Error);\n    }\n  })();\n}\n\nfunction padTo2Digits(num: number) {\n  return num.toString().padStart(2, '0');\n}\n\nexport function getDuration(startDate: Date, endDate: Date): string {\n  if (!startDate) {\n    return \"\";\n  }\n\n  if (!endDate || endDate < startDate) {\n    endDate = new Date();//now\n  }\n\n  const duration = endDate.valueOf() - startDate.valueOf();\n  return (convertMsToTime(duration));\n}\n\nexport function convertMsToTime(milliseconds: number): string {\n  let seconds = Math.floor(milliseconds / 1000);\n  let minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  seconds = seconds % 60;\n  minutes = minutes % 60;\n\n  return `${padTo2Digits(hours)}:${padTo2Digits(minutes)}:${padTo2Digits(seconds,)}`;\n}\n\nexport function isJsonString(jsonString: string): boolean {\n  try {\n    const json = JSON.parse(jsonString);\n    return (typeof json === 'object');\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function isValidDate(dateString: string): boolean {\n  const regEx = /^\\d{4}-\\d{2}-\\d{2}$/;\n  if (!dateString.match(regEx)) {\n    return false;  // Invalid format\n  }\n  const d = new Date(dateString);\n  const dNum = d.getTime();\n  if (!dNum && dNum !== 0) {\n    return false; // NaN value, Invalid date\n  }\n  return d.toISOString().slice(0, 10) === dateString;\n}","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\nexport var UNDEFINED_VALUE = undefined;\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_CHANNELS = \"channels\";\r\nexport var STR_CORE = \"core\";\r\nexport var STR_CREATE_PERF_MGR = \"createPerfMgr\";\r\nexport var STR_DISABLED = \"disabled\";\r\nexport var STR_EXTENSION_CONFIG = \"extensionConfig\";\r\nexport var STR_EXTENSIONS = \"extensions\";\r\nexport var STR_PROCESS_TELEMETRY = \"processTelemetry\";\r\nexport var STR_PRIORITY = \"priority\";\r\nexport var STR_EVENTS_SENT = \"eventsSent\";\r\nexport var STR_EVENTS_DISCARDED = \"eventsDiscarded\";\r\nexport var STR_EVENTS_SEND_REQUEST = \"eventsSendRequest\";\r\nexport var STR_PERF_EVENT = \"perfEvent\";\r\nexport var STR_OFFLINE_STORE = \"offlineEventsStored\";\r\nexport var STR_OFFLINE_SENT = \"offlineBatchSent\";\r\nexport var STR_OFFLINE_DROP = \"offlineBatchDrop\";\r\nexport var STR_GET_PERF_MGR = \"getPerfMgr\";\r\nexport var STR_DOMAIN = \"domain\";\r\nexport var STR_PATH = \"path\";\r\nexport var STR_NOT_DYNAMIC_ERROR = \"Not dynamic - \";\r\nexport var STR_REDACTED = \"REDACTED\";\r\nexport var DEFAULT_SENSITIVE_PARAMS = [\"sig\", \"Signature\", \"AWSAccessKeyId\", \"X-Goog-Signature\"];\r\n//# sourceMappingURL=InternalConstants.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class PluginsView {\n    public static Current: PluginsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private pluginsJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('PluginsView.constructor Started');\n        Telemetry.Current.send('PluginsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('PluginsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('PluginsView.loadData Started');\n        Telemetry.Current.send('PluginsView.loadData.called');\n\n        const result = await Session.Current.Api.getPlugins();\n        if (result.isSuccessful) {\n            this.pluginsJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('PluginsView.renderHtml Started');\n        Telemetry.Current.send('PluginsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('PluginsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('PluginsView.render Started');\n        Telemetry.Current.send('PluginsView.render.called');\n\n        if (PluginsView.Current) {\n            PluginsView.Current._panel.reveal(vscode.ViewColumn.One);\n            PluginsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"pluginsView\", \"Plugins\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            PluginsView.Current = new PluginsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('PluginsView.dispose Started');\n        Telemetry.Current.send('PluginsView.dispose.called');\n\n        PluginsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('PluginsView._getWebviewContent Started');\n        Telemetry.Current.send('PluginsView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from plugins data\n        let tableRows = '';\n        if (this.pluginsJson && this.pluginsJson.plugins) {\n            for (const plugin of this.pluginsJson.plugins) {\n                const name = plugin.name || 'N/A';\n                const hooks = plugin.hooks && plugin.hooks.length > 0 ? plugin.hooks.join(', ') : 'None';\n                const executors = plugin.executors && plugin.executors.length > 0 ? plugin.executors.join(', ') : 'None';\n                const macros = plugin.macros && plugin.macros.length > 0 ? plugin.macros.map((m: any) => m.name).join(', ') : 'None';\n                \n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(name)}</td>\n                    <td>${this._escapeHtml(hooks)}</td>\n                    <td>${this._escapeHtml(executors)}</td>\n                    <td>${this._escapeHtml(macros)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Plugins</title>\n      </head>\n      <body>  \n        <h2>Airflow Plugins</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-plugins\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Hooks</th>\n                    <th>Executors</th>\n                    <th>Macros</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"4\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No plugins found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('PluginsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('PluginsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('PluginsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-plugins\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","module.exports = require(\"path\");","import { TelemetryReporter } from \"@vscode/extension-telemetry\";\nimport * as vscode from \"vscode\";\n\nexport class Telemetry {\n\n    private connectionString = \"InstrumentationKey=10fbe7b4-13da-4481-ab61-902bd7acac44;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/;ApplicationId=1af62da8-61c9-4cb6-8c9b-34d84e6e8bfe\";\n    public static Current: Telemetry;\n\n    private reporter: TelemetryReporter | undefined = undefined;\n\n    constructor(context: vscode.ExtensionContext) {\n        Telemetry.Current = this;\n        if (vscode.env.isTelemetryEnabled && this.connectionString) {\n            this.reporter = new TelemetryReporter(this.connectionString);\n            context.subscriptions.push(this.reporter);\n        }\n    }\n\n    public send(eventName: string, properties?: { [key: string]: string }, measurements?: { [key: string]: number }) {\n        if (!vscode.env.isTelemetryEnabled) return;\n        if (!this.reporter) return;\n\n        this.reporter.sendTelemetryEvent(eventName, properties, measurements);\n    }\n\n    public sendError(eventName: string, errorOrProps?: Error | { [key: string]: string }, measurements?: { [key: string]: number }) {\n        if (!vscode.env.isTelemetryEnabled) return;\n        if (!this.reporter) return;\n\n\n        if (errorOrProps instanceof Error) {\n            this.reporter.sendTelemetryErrorEvent(eventName, {\n                message: errorOrProps.message,\n                name: errorOrProps.name,\n                stack: errorOrProps.stack ?? ''\n            }, measurements);\n        } else {\n            const props = errorOrProps || {};\n            this.reporter.sendTelemetryErrorEvent(eventName, props, measurements);\n        }\n    }\n\n    public dispose() {\n        if (this.reporter) {\n            this.reporter.dispose();\n        }\n    }\n\n}\n\n","module.exports = require(\"crypto\");","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { isArray, isPlainObject, objForEachKey, symbolFor, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\n// Using Symbol.for so that if the same symbol was already created it would be returned\r\n// To handle multiple instances using potentially different versions we are not using\r\n// createUniqueNamespace()\r\nexport var CFG_HANDLER_LINK = symbolFor(\"[[ai_dynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects / arrays with if they should not be converted\r\n */\r\nvar BLOCK_DYNAMIC = symbolFor(\"[[ai_blkDynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects to indicate that when included into the configuration that\r\n * they should be converted into a trackable dynamic object.\r\n */\r\nvar FORCE_DYNAMIC = symbolFor(\"[[ai_frcDynCfg_1]]\");\r\nexport function _cfgDeepCopy(source) {\r\n    if (source) {\r\n        var target_1;\r\n        if (isArray(source)) {\r\n            target_1 = [];\r\n            target_1[_DYN_LENGTH /* @min:%2elength */] = source[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(source)) {\r\n            target_1 = {};\r\n        }\r\n        if (target_1) {\r\n            // Copying index values by property name as the extensionConfig can be an array or object\r\n            objForEachKey(source, function (key, value) {\r\n                // Perform a deep copy of the object\r\n                target_1[key] = _cfgDeepCopy(value);\r\n            });\r\n            return target_1;\r\n        }\r\n    }\r\n    return source;\r\n}\r\n/**\r\n * @internal\r\n * Get the dynamic config handler if the value is already dynamic\r\n * @returns\r\n */\r\nexport function getDynamicConfigHandler(value) {\r\n    if (value) {\r\n        var handler = value[CFG_HANDLER_LINK] || value;\r\n        if (handler.cfg && (handler.cfg === value || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n            return handler;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Mark the provided value so that if it's included into the configuration it will NOT have\r\n * its properties converted into a dynamic (reactive) object. If the object is not a plain object\r\n * or an array (ie. a class) this function has not affect as only Objects and Arrays are converted\r\n * into dynamic objects in the dynamic configuration.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * You should only need to use this function, if you are creating dynamic \"classes\" from objects\r\n * which confirm to the require interface. A common case for this is during unit testing where it's\r\n * easier to create mock extensions.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed\r\n *\r\n * @example\r\n * ```ts\r\n * // This is a valid \"extension\", but it is technically an object\r\n * // So when included in the config.extensions it WILL be cloned and then\r\n * // converted into a dynamic object, where all of its properties will become\r\n * // get/set object properties and will be tracked. While this WILL still\r\n * // function, when attempt to use a mocking framework on top of this the\r\n * // functions are now technically get accessors which return a function\r\n * // and this can cause some mocking frameworks to fail.\r\n * let mockChannel = {\r\n *      pause: () => { },\r\n*      resume: () => { },\r\n*      teardown: () => { },\r\n*      flush: (async: any, callBack: any) => { },\r\n*      processTelemetry: (env: any) => { },\r\n*      setNextPlugin: (next: any) => { },\r\n*      initialize: (config: any, core: any, extensions: any) => { },\r\n*      identifier: \"testChannel\",\r\n*      priority: 1003\r\n* };\r\n * ```\r\n * @param value - The object that you want to block from being converted into a\r\n * trackable dynamic object\r\n * @returns The original value\r\n */\r\nexport function blockDynamicConversion(value) {\r\n    if (value && (isPlainObject(value) || isArray(value))) {\r\n        try {\r\n            value[BLOCK_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * This is the reverse case of {@link blockDynamicConversion} in that this will tag an\r\n * object to indicate that it should always be converted into a dynamic trackable object\r\n * even when not an object or array. So all properties of this object will become\r\n * get / set accessor functions.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed.\r\n * @param value - The object that should be tagged and converted if included into a dynamic\r\n * configuration.\r\n * @returns The original value\r\n */\r\nexport function forceDynamicConversion(value) {\r\n    if (value) {\r\n        try {\r\n            value[FORCE_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @internal\r\n * @ignore\r\n * Helper function to check whether an object can or should be converted into a dynamic\r\n * object.\r\n * @param value - The object to check whether it should be converted\r\n * @returns `true` if the value should be converted otherwise `false`.\r\n */\r\nexport function _canMakeDynamic(getFunc, state, value) {\r\n    var result = false;\r\n    // Object must exist and be truthy\r\n    if (value && !getFunc[state.blkVal]) {\r\n        // Tagged as always convert\r\n        result = value[FORCE_DYNAMIC];\r\n        // Check that it's not explicitly tagged as blocked\r\n        if (!result && !value[BLOCK_DYNAMIC]) {\r\n            // Only convert plain objects or arrays by default\r\n            result = isPlainObject(value) || isArray(value);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Throws an invalid access exception\r\n * @param message - The message to include in the exception\r\n */\r\nexport function throwInvalidAccess(message) {\r\n    throwTypeError(\"InvalidAccess:\" + message);\r\n}\r\n//# sourceMappingURL=DynamicSupport.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, isArray, objDefine, objDefineProp, objForEachKey, objGetOwnPropertyDescriptor } from \"@nevware21/ts-utils\";\r\nimport { UNDEFINED_VALUE } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_APPLY, _DYN_LOGGER, _DYN_PUSH, _DYN_SPLICE, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nimport { CFG_HANDLER_LINK, _canMakeDynamic, blockDynamicConversion, throwInvalidAccess } from \"./DynamicSupport\";\r\nvar arrayMethodsToPatch = [\r\n    \"push\",\r\n    \"pop\",\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"splice\"\r\n];\r\nexport var _throwDynamicError = function (logger, name, desc, e) {\r\n    logger && logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](3 /* eLoggingSeverity.DEBUG */, 108 /* _eInternalMessageId.DynamicConfigException */, \"\".concat(desc, \" [\").concat(name, \"] failed - \") + dumpObj(e));\r\n};\r\nfunction _patchArray(state, target, name) {\r\n    if (isArray(target)) {\r\n        // Monkey Patch the methods that might change the array\r\n        arrForEach(arrayMethodsToPatch, function (method) {\r\n            var orgMethod = target[method];\r\n            target[method] = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var result = orgMethod[_DYN_APPLY /* @min:%2eapply */](this, args);\r\n                // items may be added, removed or moved so need to make some new dynamic properties\r\n                _makeDynamicObject(state, target, name, \"Patching\");\r\n                return result;\r\n            };\r\n        });\r\n    }\r\n}\r\nfunction _getOwnPropGetter(target, name) {\r\n    var propDesc = objGetOwnPropertyDescriptor(target, name);\r\n    return propDesc && propDesc.get;\r\n}\r\nfunction _createDynamicProperty(state, theConfig, name, value) {\r\n    // Does not appear to be dynamic so lets make it so\r\n    var detail = {\r\n        n: name,\r\n        h: [],\r\n        trk: function (handler) {\r\n            if (handler && handler.fn) {\r\n                if (arrIndexOf(detail.h, handler) === -1) {\r\n                    // Add this handler to the collection that should be notified when the value changes\r\n                    detail.h[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n                state.trk(handler, detail);\r\n            }\r\n        },\r\n        clr: function (handler) {\r\n            var idx = arrIndexOf(detail.h, handler);\r\n            if (idx !== -1) {\r\n                detail.h[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n            }\r\n        }\r\n    };\r\n    // Flag to optimize lookup response time by avoiding additional function calls\r\n    var checkDynamic = true;\r\n    var isObjectOrArray = false;\r\n    function _getProperty() {\r\n        if (checkDynamic) {\r\n            isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n            // Make sure that if it's an object that we make it dynamic\r\n            if (value && !value[CFG_HANDLER_LINK] && isObjectOrArray) {\r\n                // It doesn't look like it's already dynamic so lets make sure it's converted the object into a dynamic Config as well\r\n                value = _makeDynamicObject(state, value, name, \"Converting\");\r\n            }\r\n            // If it needed to be converted it now has been\r\n            checkDynamic = false;\r\n        }\r\n        // If there is an active handler then add it to the tracking set of handlers\r\n        var activeHandler = state.act;\r\n        if (activeHandler) {\r\n            detail.trk(activeHandler);\r\n        }\r\n        return value;\r\n    }\r\n    // Tag this getter as our dynamic property and provide shortcut for notifying a change\r\n    _getProperty[state.prop] = {\r\n        chng: function () {\r\n            state.add(detail);\r\n        }\r\n    };\r\n    function _setProperty(newValue) {\r\n        if (value !== newValue) {\r\n            if (!!_getProperty[state.ro] && !state.upd) {\r\n                // field is marked as readonly so return false\r\n                throwInvalidAccess(\"[\" + name + \"] is read-only:\" + dumpObj(theConfig));\r\n            }\r\n            if (checkDynamic) {\r\n                isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n                checkDynamic = false;\r\n            }\r\n            // The value must be a plain object or an array to enforce the reference (in-place updates)\r\n            var isReferenced = isObjectOrArray && _getProperty[state.rf];\r\n            if (isObjectOrArray) {\r\n                // We are about to replace a plain object or an array\r\n                if (isReferenced) {\r\n                    // Reassign the properties from the current value to the same properties from the newValue\r\n                    // This will set properties not in the newValue to undefined\r\n                    objForEachKey(value, function (key) {\r\n                        value[key] = newValue ? newValue[key] : UNDEFINED_VALUE;\r\n                    });\r\n                    // Now assign / re-assign value with all of the keys from newValue\r\n                    try {\r\n                        objForEachKey(newValue, function (key, theValue) {\r\n                            _setDynamicProperty(state, value, key, theValue);\r\n                        });\r\n                        // Now drop newValue so when we assign value later it keeps the existing reference\r\n                        newValue = value;\r\n                    }\r\n                    catch (e) {\r\n                        // Unable to convert to dynamic property so just leave as non-dynamic\r\n                        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Assigning\", e);\r\n                        // Mark as not an object or array so we don't try and do this again\r\n                        isObjectOrArray = false;\r\n                    }\r\n                }\r\n                else if (value && value[CFG_HANDLER_LINK]) {\r\n                    // As we are replacing the value, if it's already dynamic then we need to notify the listeners\r\n                    // for every property it has already\r\n                    objForEachKey(value, function (key) {\r\n                        // Check if the value is dynamic\r\n                        var getter = _getOwnPropGetter(value, key);\r\n                        if (getter) {\r\n                            // And if it is tell it's listeners that the value has changed\r\n                            var valueState = getter[state.prop];\r\n                            valueState && valueState.chng();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (newValue !== value) {\r\n                var newIsObjectOrArray = newValue && _canMakeDynamic(_getProperty, state, newValue);\r\n                if (!isReferenced && newIsObjectOrArray) {\r\n                    // As the newValue is an object/array lets preemptively make it dynamic\r\n                    newValue = _makeDynamicObject(state, newValue, name, \"Converting\");\r\n                }\r\n                // Now assign the internal \"value\" to the newValue\r\n                value = newValue;\r\n                isObjectOrArray = newIsObjectOrArray;\r\n            }\r\n            // Cause any listeners to be scheduled for notification\r\n            state.add(detail);\r\n        }\r\n    }\r\n    objDefine(theConfig, detail.n, { g: _getProperty, s: _setProperty });\r\n}\r\nexport function _setDynamicProperty(state, target, name, value) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        if (!isDynamic) {\r\n            _createDynamicProperty(state, target, name, value);\r\n        }\r\n        else {\r\n            // Looks like it's already dynamic just assign the new value\r\n            target[name] = value;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _setDynamicPropertyState(state, target, name, flags) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        var inPlace = flags && flags[0 /* _eSetDynamicPropertyFlags.inPlace */];\r\n        var rdOnly = flags && flags[1 /* _eSetDynamicPropertyFlags.readOnly */];\r\n        var blkProp = flags && flags[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */];\r\n        if (!isDynamic) {\r\n            if (blkProp) {\r\n                try {\r\n                    // Attempt to mark the target as blocked from conversion\r\n                    blockDynamicConversion(target);\r\n                }\r\n                catch (e) {\r\n                    _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Blocking\", e);\r\n                }\r\n            }\r\n            try {\r\n                // Make sure it's dynamic so that we can tag the property as per the state\r\n                _setDynamicProperty(state, target, name, target[name]);\r\n                getter = _getOwnPropGetter(target, name);\r\n            }\r\n            catch (e) {\r\n                // Unable to convert to dynamic property so just leave as non-dynamic\r\n                _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"State\", e);\r\n            }\r\n        }\r\n        // Assign the optional flags if true\r\n        if (inPlace) {\r\n            getter[state.rf] = inPlace;\r\n        }\r\n        if (rdOnly) {\r\n            getter[state.ro] = rdOnly;\r\n        }\r\n        if (blkProp) {\r\n            getter[state.blkVal] = true;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _makeDynamicObject(state, target, name, desc) {\r\n    try {\r\n        // Assign target with new value properties (converting into dynamic properties in the process)\r\n        objForEachKey(target, function (key, value) {\r\n            // Assign and/or make the property dynamic\r\n            _setDynamicProperty(state, target, key, value);\r\n        });\r\n        if (!target[CFG_HANDLER_LINK]) {\r\n            // Link the config back to the dynamic config details\r\n            objDefineProp(target, CFG_HANDLER_LINK, {\r\n                get: function () {\r\n                    return state.hdlr;\r\n                }\r\n            });\r\n            _patchArray(state, target, name);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Unable to convert to dynamic property so just leave as non-dynamic\r\n        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, desc, e);\r\n    }\r\n    return target;\r\n}\r\n//# sourceMappingURL=DynamicProperty.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, createCustomError, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nvar aggregationErrorType;\r\n/**\r\n * Throws an Aggregation Error which includes all of the errors that led to this error occurring\r\n * @param message - The message describing the aggregation error (the sourceError details are added to this)\r\n * @param sourceErrors - An array of the errors that caused this situation\r\n */\r\nexport function throwAggregationError(message, sourceErrors) {\r\n    if (!aggregationErrorType) {\r\n        aggregationErrorType = createCustomError(\"AggregationError\", function (self, args) {\r\n            if (args[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                // Save the provided errors\r\n                self.errors = args[1];\r\n            }\r\n        });\r\n    }\r\n    var theMessage = message || \"One or more errors occurred.\";\r\n    arrForEach(sourceErrors, function (srcError, idx) {\r\n        theMessage += \"\\n\".concat(idx, \" > \").concat(dumpObj(srcError));\r\n    });\r\n    throw new aggregationErrorType(theMessage, sourceErrors || []);\r\n}\r\n//# sourceMappingURL=AggregationError.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, newSymbol, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { throwAggregationError } from \"../JavaScriptSDK/AggregationError\";\r\nimport { _DYN_CANCEL, _DYN_LENGTH, _DYN_LOGGER, _DYN_PUSH, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nvar symPrefix = \"[[ai_\";\r\nvar symPostfix = \"]]\";\r\nexport function _createState(cfgHandler) {\r\n    var dynamicPropertySymbol = newSymbol(symPrefix + \"get\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReadOnly = newSymbol(symPrefix + \"ro\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReferenced = newSymbol(symPrefix + \"rf\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyBlockValue = newSymbol(symPrefix + \"blkVal\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyDetail = newSymbol(symPrefix + \"dtl\" + cfgHandler.uid + symPostfix);\r\n    var _waitingHandlers = null;\r\n    var _watcherTimer = null;\r\n    var theState;\r\n    function _useHandler(activeHandler, callback) {\r\n        var prevWatcher = theState.act;\r\n        try {\r\n            theState.act = activeHandler;\r\n            if (activeHandler && activeHandler[dynamicPropertyDetail]) {\r\n                // Clear out the previously tracked details for this handler, so that access are re-evaluated\r\n                arrForEach(activeHandler[dynamicPropertyDetail], function (detail) {\r\n                    detail.clr(activeHandler);\r\n                });\r\n                activeHandler[dynamicPropertyDetail] = [];\r\n            }\r\n            callback({\r\n                cfg: cfgHandler.cfg,\r\n                set: cfgHandler.set.bind(cfgHandler),\r\n                setDf: cfgHandler.setDf.bind(cfgHandler),\r\n                ref: cfgHandler.ref.bind(cfgHandler),\r\n                rdOnly: cfgHandler.rdOnly.bind(cfgHandler)\r\n            });\r\n        }\r\n        catch (e) {\r\n            var logger = cfgHandler[_DYN_LOGGER /* @min:%2elogger */];\r\n            if (logger) {\r\n                // Don't let one individual failure break everyone\r\n                logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](1 /* eLoggingSeverity.CRITICAL */, 107 /* _eInternalMessageId.ConfigWatcherException */, dumpObj(e));\r\n            }\r\n            // Re-throw the exception so that any true \"error\" is reported back to the called\r\n            throw e;\r\n        }\r\n        finally {\r\n            theState.act = prevWatcher || null;\r\n        }\r\n    }\r\n    function _notifyWatchers() {\r\n        if (_waitingHandlers) {\r\n            var notifyHandlers = _waitingHandlers;\r\n            _waitingHandlers = null;\r\n            // Stop any timer as we are running them now anyway\r\n            _watcherTimer && _watcherTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n            _watcherTimer = null;\r\n            var watcherFailures_1 = [];\r\n            // Now run the handlers\r\n            arrForEach(notifyHandlers, function (handler) {\r\n                if (handler) {\r\n                    if (handler[dynamicPropertyDetail]) {\r\n                        arrForEach(handler[dynamicPropertyDetail], function (detail) {\r\n                            // Clear out this handler from  previously tracked details, so that access are re-evaluated\r\n                            detail.clr(handler);\r\n                        });\r\n                        handler[dynamicPropertyDetail] = null;\r\n                    }\r\n                    // The handler may have self removed as part of another handler so re-check\r\n                    if (handler.fn) {\r\n                        try {\r\n                            _useHandler(handler, handler.fn);\r\n                        }\r\n                        catch (e) {\r\n                            // Don't let a single failing watcher cause other watches to fail\r\n                            watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            // During notification we may have had additional updates -- so notify those updates as well\r\n            if (_waitingHandlers) {\r\n                try {\r\n                    _notifyWatchers();\r\n                }\r\n                catch (e) {\r\n                    watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                }\r\n            }\r\n            if (watcherFailures_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                throwAggregationError(\"Watcher error(s): \", watcherFailures_1);\r\n            }\r\n        }\r\n    }\r\n    function _addWatcher(detail) {\r\n        if (detail && detail.h[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            if (!_waitingHandlers) {\r\n                _waitingHandlers = [];\r\n            }\r\n            if (!_watcherTimer) {\r\n                _watcherTimer = scheduleTimeout(function () {\r\n                    _watcherTimer = null;\r\n                    _notifyWatchers();\r\n                }, 0);\r\n            }\r\n            // Add all of the handlers for this detail (if not already present) - using normal for-loop for performance\r\n            for (var idx = 0; idx < detail.h[_DYN_LENGTH /* @min:%2elength */]; idx++) {\r\n                var handler = detail.h[idx];\r\n                // Add this handler to the collection of handlers to re-execute\r\n                if (handler && arrIndexOf(_waitingHandlers, handler) === -1) {\r\n                    _waitingHandlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function _trackHandler(handler, detail) {\r\n        if (handler) {\r\n            var details = handler[dynamicPropertyDetail] = handler[dynamicPropertyDetail] || [];\r\n            if (arrIndexOf(details, detail) === -1) {\r\n                // If this detail is not already listed as tracked then add it so that we re-evaluate it's usage\r\n                details[_DYN_PUSH /* @min:%2epush */](detail);\r\n            }\r\n        }\r\n    }\r\n    theState = {\r\n        prop: dynamicPropertySymbol,\r\n        ro: dynamicPropertyReadOnly,\r\n        rf: dynamicPropertyReferenced,\r\n        blkVal: dynamicPropertyBlockValue,\r\n        hdlr: cfgHandler,\r\n        add: _addWatcher,\r\n        notify: _notifyWatchers,\r\n        use: _useHandler,\r\n        trk: _trackHandler\r\n    };\r\n    return theState;\r\n}\r\n//# sourceMappingURL=DynamicState.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj, isUndefined, objDefine, objForEachKey } from \"@nevware21/ts-utils\";\r\nimport { createUniqueNamespace } from \"../JavaScriptSDK/DataCacheHelper\";\r\nimport { STR_NOT_DYNAMIC_ERROR } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_THROW_INTERNAL, _DYN_WARN_TO_CONSOLE, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { _applyDefaultValue } from \"./ConfigDefaults\";\r\nimport { _makeDynamicObject, _setDynamicProperty, _setDynamicPropertyState, _throwDynamicError } from \"./DynamicProperty\";\r\nimport { _createState } from \"./DynamicState\";\r\nimport { CFG_HANDLER_LINK, _cfgDeepCopy, getDynamicConfigHandler, throwInvalidAccess } from \"./DynamicSupport\";\r\n/**\r\n * Identifies a function which will be re-called whenever any of it's accessed configuration values\r\n * change.\r\n * @param configHandler - The callback that will be called for the initial request and then whenever any\r\n * accessed configuration changes are identified.\r\n */\r\nfunction _createAndUseHandler(state, configHandler) {\r\n    var handler = {\r\n        fn: configHandler,\r\n        rm: function () {\r\n            // Clear all references to the handler so it can be garbage collected\r\n            // This will also cause this handler to never get called and eventually removed\r\n            handler.fn = null;\r\n            state = null;\r\n            configHandler = null;\r\n        }\r\n    };\r\n    objDefine(handler, \"toJSON\", { v: function () { return \"WatcherHandler\" + (handler.fn ? \"\" : \"[X]\"); } });\r\n    state.use(handler, configHandler);\r\n    return handler;\r\n}\r\n/**\r\n * Creates the dynamic config handler and associates with the target config as the root object\r\n * @param target - The config that you want to be root of the dynamic config\r\n * @param inPlace - Should the passed config be converted in-place or a new proxy returned\r\n * @returns The existing dynamic handler or a new instance with the provided config values\r\n */\r\nfunction _createDynamicHandler(logger, target, inPlace) {\r\n    var dynamicHandler = getDynamicConfigHandler(target);\r\n    if (dynamicHandler) {\r\n        // The passed config is already dynamic so return it's tracker\r\n        return dynamicHandler;\r\n    }\r\n    var uid = createUniqueNamespace(\"dyncfg\", true);\r\n    var newTarget = (target && inPlace !== false) ? target : _cfgDeepCopy(target);\r\n    var theState;\r\n    function _notifyWatchers() {\r\n        theState.notify();\r\n    }\r\n    function _setValue(target, name, value) {\r\n        try {\r\n            target = _setDynamicProperty(theState, target, name, value);\r\n        }\r\n        catch (e) {\r\n            // Unable to convert to dynamic property so just leave as non-dynamic\r\n            _throwDynamicError(logger, name, \"Setting value\", e);\r\n        }\r\n        return target[name];\r\n    }\r\n    function _watch(configHandler) {\r\n        return _createAndUseHandler(theState, configHandler);\r\n    }\r\n    function _block(configHandler, allowUpdate) {\r\n        theState.use(null, function (details) {\r\n            var prevUpd = theState.upd;\r\n            try {\r\n                if (!isUndefined(allowUpdate)) {\r\n                    theState.upd = allowUpdate;\r\n                }\r\n                configHandler(details);\r\n            }\r\n            finally {\r\n                theState.upd = prevUpd;\r\n            }\r\n        });\r\n    }\r\n    function _ref(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as referenced with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[0 /* _eSetDynamicPropertyFlags.inPlace */] = true, _a))[name];\r\n    }\r\n    function _rdOnly(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[1 /* _eSetDynamicPropertyFlags.readOnly */] = true, _a))[name];\r\n    }\r\n    function _blkPropValue(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */] = true, _a))[name];\r\n    }\r\n    function _applyDefaults(theConfig, defaultValues) {\r\n        if (defaultValues) {\r\n            // Resolve/apply the defaults\r\n            objForEachKey(defaultValues, function (name, value) {\r\n                // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                _applyDefaultValue(cfgHandler, theConfig, name, value);\r\n            });\r\n        }\r\n        return theConfig;\r\n    }\r\n    var cfgHandler = {\r\n        uid: null,\r\n        cfg: newTarget,\r\n        logger: logger,\r\n        notify: _notifyWatchers,\r\n        set: _setValue,\r\n        setDf: _applyDefaults,\r\n        watch: _watch,\r\n        ref: _ref,\r\n        rdOnly: _rdOnly,\r\n        blkVal: _blkPropValue,\r\n        _block: _block\r\n    };\r\n    objDefine(cfgHandler, \"uid\", {\r\n        c: false,\r\n        e: false,\r\n        w: false,\r\n        v: uid\r\n    });\r\n    theState = _createState(cfgHandler);\r\n    // Setup tracking for all defined default keys\r\n    _makeDynamicObject(theState, newTarget, \"config\", \"Creating\");\r\n    return cfgHandler;\r\n}\r\n/**\r\n * Log an invalid access message to the console\r\n */\r\nfunction _logInvalidAccess(logger, message) {\r\n    if (logger) {\r\n        logger[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n        logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](2 /* eLoggingSeverity.WARNING */, 108 /* _eInternalMessageId.DynamicConfigException */, message);\r\n    }\r\n    else {\r\n        // We don't have a logger so just throw an exception\r\n        throwInvalidAccess(message);\r\n    }\r\n}\r\n/**\r\n * Create or return a dynamic version of the passed config, if it is not already dynamic\r\n * @param config - The config to be converted into a dynamic config\r\n * @param defaultConfig - The default values to apply on the config if the properties don't already exist\r\n * @param inPlace - Should the config be converted in-place into a dynamic config or a new instance returned, defaults to true\r\n * @returns The dynamic config handler for the config (whether new or existing)\r\n */\r\nexport function createDynamicConfig(config, defaultConfig, logger, inPlace) {\r\n    var dynamicHandler = _createDynamicHandler(logger, config || {}, inPlace);\r\n    if (defaultConfig) {\r\n        dynamicHandler.setDf(dynamicHandler.cfg, defaultConfig);\r\n    }\r\n    return dynamicHandler;\r\n}\r\n/**\r\n * Watch and track changes for accesses to the current config, the provided config MUST already be\r\n * a dynamic config or a child accessed via the dynamic config\r\n * @param logger - The logger instance to use if there is no existing handler\r\n * @returns A watcher handler instance that can be used to remove itself when being unloaded\r\n * @throws TypeError if the provided config is not a dynamic config instance\r\n */\r\nexport function onConfigChange(config, configHandler, logger) {\r\n    var handler = config[CFG_HANDLER_LINK] || config;\r\n    if (handler.cfg && (handler.cfg === config || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n        return handler[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n    }\r\n    _logInvalidAccess(logger, STR_NOT_DYNAMIC_ERROR + dumpObj(config));\r\n    return createDynamicConfig(config, null, logger)[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n}\r\n//# sourceMappingURL=DynamicConfig.js.map","/**\n * CancelDagRunTool - Language Model Tool for cancelling a running DAG run\n * \n * This tool cancels the currently running DAG run for a specific DAG.\n * It requires user confirmation since it's a state-changing operation.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for cancelling a DAG run\n */\nexport interface ICancelDagRunParams {\n    dagId: string;\n}\n\n/**\n * CancelDagRunTool - Implements vscode.LanguageModelTool for cancelling DAG runs\n */\nexport class CancelDagRunTool implements vscode.LanguageModelTool<ICancelDagRunParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation with user confirmation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<ICancelDagRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n        \n        // Try to get the current running DAG run\n        let runInfo = '';\n        try {\n            const latestRun = await this.client.getLatestDagRun(dagId);\n            if (latestRun && (latestRun.state === 'running' || latestRun.state === 'queued')) {\n                runInfo = `\\n**Current Run:** \\`${latestRun.dag_run_id}\\`\\n**State:** ${latestRun.state}\\n\\n`;\n            }\n        } catch (error) {\n            // Ignore error, proceed with generic confirmation\n        }\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Cancel DAG Run Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **CANCEL** the running DAG run for:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n`);\n        if (runInfo) {\n            confirmationMessage.appendMarkdown(runInfo);\n        }\n        confirmationMessage.appendMarkdown('**Effect:** The current DAG run will be marked as failed and cancelled.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Cancelling DAG run: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Cancel DAG Run',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    /**\n     * Execute the cancel DAG run action\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<ICancelDagRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('CancelDagRunTool.invoke');\n        \n        try {\n            // First, get the latest DAG run to find the running one\n            const latestRun = await this.client.getLatestDagRun(dagId);\n\n            if (!latestRun) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No DAG run found for '${dagId}'.`)\n                ]);\n            }\n\n            // Check if the latest run is actually running\n            if (latestRun.state !== 'running' && latestRun.state !== 'queued') {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` DAG '${dagId}' is not currently running.\\n\\nLatest run state: **${latestRun.state}**\\nRun ID: \\`${latestRun.dag_run_id}\\``)\n                ]);\n            }\n\n            // Cancel the DAG run\n            await this.client.cancelDagRun(dagId, latestRun.dag_run_id);\n\n            const message = [\n                ` **Success!** DAG run cancelled.`,\n                ``,\n                `- **DAG ID:** ${dagId}`,\n                `- **Run ID:** ${latestRun.dag_run_id}`,\n                `- **Previous State:** ${latestRun.state}`,\n                ``,\n                `The DAG run has been marked as failed and cancelled.`\n            ].join('\\n');\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            Telemetry.Current.sendError('CancelDagRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to cancel DAG run for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","import Blob from './index.js'\n\nconst _File = class File extends Blob {\n  #lastModified = 0\n  #name = ''\n\n  /**\n   * @param {*[]} fileBits\n   * @param {string} fileName\n   * @param {{lastModified?: number, type?: string}} options\n   */// @ts-ignore\n  constructor (fileBits, fileName, options = {}) {\n    if (arguments.length < 2) {\n      throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)\n    }\n    super(fileBits, options)\n\n    if (options === null) options = {}\n\n    // Simulate WebIDL type casting for NaN value in lastModified option.\n    const lastModified = options.lastModified === undefined ? Date.now() : Number(options.lastModified)\n    if (!Number.isNaN(lastModified)) {\n      this.#lastModified = lastModified\n    }\n\n    this.#name = String(fileName)\n  }\n\n  get name () {\n    return this.#name\n  }\n\n  get lastModified () {\n    return this.#lastModified\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'File'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return !!object && object instanceof Blob &&\n      /^(File)$/.test(object[Symbol.toStringTag])\n  }\n}\n\n/** @type {typeof globalThis.File} */// @ts-ignore\nexport const File = _File\nexport default File\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { getDocument, getInst, getNavigator, getPerformance, hasNavigator, isFunction, isString, isUndefined, mathMax, strIndexOf, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SPLIT, _DYN_SUBSTRING, _DYN_TO_LOWER_CASE, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { strContains } from \"./HelperFuncs\";\r\nimport { DEFAULT_SENSITIVE_PARAMS, STR_EMPTY, STR_REDACTED } from \"./InternalConstants\";\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\nvar strDocumentMode = \"documentMode\";\r\nvar strLocation = \"location\";\r\nvar strConsole = \"console\";\r\nvar strJSON = \"JSON\";\r\nvar strCrypto = \"crypto\";\r\nvar strMsCrypto = \"msCrypto\";\r\nvar strReactNative = \"ReactNative\";\r\nvar strMsie = \"msie\";\r\nvar strTrident = \"trident/\";\r\nvar strXMLHttpRequest = \"XMLHttpRequest\";\r\nvar _isTrident = null;\r\nvar _navUserAgentCheck = null;\r\nvar _enableMocks = false;\r\nvar _useXDomainRequest = null;\r\nvar _beaconsSupported = null;\r\nfunction _hasProperty(theClass, property) {\r\n    var supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                var proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Do Nothing\r\n        }\r\n        if (!supported) {\r\n            try {\r\n                var tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            }\r\n            catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n    return supported;\r\n}\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled - A flag to enable or disable the mock\r\n */\r\nexport function setEnableEnvMocks(enabled) {\r\n    _enableMocks = enabled;\r\n}\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock) {\r\n    if (checkForMock && _enableMocks) {\r\n        var mockLocation = getInst(\"__mockLocation\");\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n    return getInst(strLocation);\r\n}\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole() {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n    return getInst(strConsole);\r\n}\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON() {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getInst(strJSON) !== null);\r\n}\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON() {\r\n    if (hasJSON()) {\r\n        return JSON || getInst(strJSON);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto() {\r\n    return getInst(strCrypto);\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto() {\r\n    return getInst(strMsCrypto);\r\n}\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative() {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    var nav = getNavigator();\r\n    if (nav && (nav[_DYN_USER_AGENT /* @min:%2euserAgent */] !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav[_DYN_USER_AGENT /* @min:%2euserAgent */];\r\n        var userAgent = (_navUserAgentCheck || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n    return _isTrident;\r\n}\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr) {\r\n    if (userAgentStr === void 0) { userAgentStr = null; }\r\n    if (!userAgentStr) {\r\n        var navigator_1 = getNavigator() || {};\r\n        userAgentStr = navigator_1 ? (navigator_1.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        var doc = getDocument() || {};\r\n        return mathMax(parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    }\r\n    else if (strContains(ua, strTrident)) {\r\n        var tridentVer = parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function isSafari(userAgentStr) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        var navigator_2 = getNavigator() || {};\r\n        userAgentStr = navigator_2 ? (navigator_2.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    return (strIndexOf(ua, \"safari\") >= 0);\r\n}\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @param useCached - [Optional] used for testing to bypass the cached lookup, when `true` this will\r\n * cause the cached global to be reset.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported(useCached) {\r\n    if (_beaconsSupported === null || useCached === false) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n    return _beaconsSupported;\r\n}\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive) {\r\n    var isSupported = false;\r\n    try {\r\n        isSupported = !!getInst(\"fetch\");\r\n        var request = getInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nexport function useXDomainRequest() {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n    return _useXDomainRequest;\r\n}\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported() {\r\n    var isSupported = false;\r\n    try {\r\n        var xmlHttpRequest = getInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nfunction _getNamedValue(values, name) {\r\n    if (values) {\r\n        for (var i = 0; i < values[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var value = values[i];\r\n            if (value[_DYN_NAME /* @min:%2ename */]) {\r\n                if (value[_DYN_NAME /* @min:%2ename */] === name) {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name - The name of the meta-tag to find.\r\n */\r\nexport function findMetaTag(name) {\r\n    var doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        return _getNamedValue(doc.querySelectorAll(\"meta\"), name).content;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name - The name of the server timing value to find.\r\n */\r\nexport function findNamedServerTiming(name) {\r\n    var value;\r\n    var perf = getPerformance();\r\n    if (perf) {\r\n        // Try looking for a server-timing header\r\n        var navPerf = perf.getEntriesByType(\"navigation\") || [];\r\n        value = _getNamedValue((navPerf[_DYN_LENGTH /* @min:%2elength */] > 0 ? navPerf[0] : {}).serverTiming, name).description;\r\n    }\r\n    return value;\r\n}\r\n// TODO: should reuse this method for analytics plugin\r\nexport function dispatchEvent(target, evnt) {\r\n    if (target && target.dispatchEvent && evnt) {\r\n        target.dispatchEvent(evnt);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function createCustomDomEvent(eventName, details) {\r\n    var event = null;\r\n    var detail = { detail: details || null };\r\n    if (isFunction(CustomEvent)) { // Use CustomEvent constructor when available\r\n        event = new CustomEvent(eventName, detail);\r\n    }\r\n    else { // CustomEvent has no constructor in IE\r\n        var doc = getDocument();\r\n        if (doc && doc.createEvent) {\r\n            event = doc.createEvent(\"CustomEvent\");\r\n            event.initCustomEvent(eventName, true, true, detail);\r\n        }\r\n    }\r\n    return event;\r\n}\r\nexport function sendCustomEvent(evtName, cfg, customDetails) {\r\n    var global = getGlobal();\r\n    if (global && global.CustomEvent) {\r\n        try {\r\n            var details = { cfg: cfg || null, customDetails: customDetails || null };\r\n            return dispatchEvent(global, createCustomDomEvent(evtName, details));\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Redacts user information from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with user information redacted\r\n */\r\nfunction redactUserInfo(url) {\r\n    return url.replace(/^([a-zA-Z][a-zA-Z0-9+.-]*:\\/\\/)([^:@]{1,200}):([^@]{1,200})@(.*)$/, \"$1REDACTED:REDACTED@$4\");\r\n}\r\n/**\r\n * Redacts sensitive query parameters from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with sensitive query parameters redacted\r\n */\r\nfunction redactQueryParameters(url, config) {\r\n    var sensitiveParams;\r\n    var questionMarkIndex = strIndexOf(url, \"?\");\r\n    if (questionMarkIndex === -1) {\r\n        return url;\r\n    }\r\n    if (config && config.redactQueryParams) {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS.concat(config.redactQueryParams);\r\n    }\r\n    else {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS;\r\n    }\r\n    var baseUrl = strSubstring(url, 0, questionMarkIndex + 1);\r\n    var queryString = strSubstring(url, questionMarkIndex + 1);\r\n    var fragment = STR_EMPTY;\r\n    var hashIndex = strIndexOf(queryString, \"#\");\r\n    if (hashIndex !== -1) {\r\n        fragment = strSubstring(queryString, hashIndex);\r\n        queryString = strSubstring(queryString, 0, hashIndex);\r\n    }\r\n    var hasPotentialSensitiveParam = false;\r\n    for (var i = 0; i < sensitiveParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        var paramCheck = sensitiveParams[i] + \"=\";\r\n        if (strIndexOf(queryString, paramCheck) !== -1) {\r\n            hasPotentialSensitiveParam = true;\r\n            break;\r\n        }\r\n    }\r\n    if (!hasPotentialSensitiveParam) {\r\n        return url;\r\n    }\r\n    var resultParts = [];\r\n    var anyParamRedacted = false;\r\n    if (queryString && queryString[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var pairs = queryString[_DYN_SPLIT /* @min:%2esplit */](\"&\");\r\n        for (var i = 0; i < pairs[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var pair = pairs[i];\r\n            if (!pair) {\r\n                continue;\r\n            }\r\n            var equalsIndex = strIndexOf(pair, \"=\");\r\n            if (equalsIndex === -1) {\r\n                // Parameter without value\r\n                resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n            }\r\n            else {\r\n                var paramName = pair[_DYN_SUBSTRING /* @min:%2esubstring */](0, equalsIndex);\r\n                var paramValue = pair[_DYN_SUBSTRING /* @min:%2esubstring */](equalsIndex + 1);\r\n                if (paramValue === STR_EMPTY) {\r\n                    resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n                }\r\n                else {\r\n                    var shouldRedact = false;\r\n                    for (var j = 0; j < sensitiveParams[_DYN_LENGTH /* @min:%2elength */]; j++) {\r\n                        if (paramName === sensitiveParams[j]) {\r\n                            shouldRedact = true;\r\n                            anyParamRedacted = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (shouldRedact) {\r\n                        resultParts[_DYN_PUSH /* @min:%2epush */](paramName + \"=\" + STR_REDACTED);\r\n                    }\r\n                    else {\r\n                        resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // If no parameters were redacted, return the original URL\r\n    if (!anyParamRedacted) {\r\n        return url;\r\n    }\r\n    return baseUrl + resultParts.join(\"&\") + fragment;\r\n}\r\n/**\r\n * Redacts sensitive information from a URL string, including credentials and specific query parameters.\r\n * @param input - The URL string to be redacted.\r\n * @param config - Configuration object that contain redactUrls setting.\r\n * @returns The redacted URL string or the original string if no redaction was needed or possible.\r\n */\r\nexport function fieldRedaction(input, config) {\r\n    if (!input || !isString(input) || input[_DYN_INDEX_OF /* @min:%2eindexOf */](\" \") !== -1) {\r\n        return input;\r\n    }\r\n    var isRedactionDisabled = config && config.redactUrls === false;\r\n    if (isRedactionDisabled) {\r\n        return input;\r\n    }\r\n    var hasCredentials = strIndexOf(input, \"@\") !== -1;\r\n    var hasQueryParams = strIndexOf(input, \"?\") !== -1;\r\n    // If no credentials and no query params, return original\r\n    if (!hasCredentials && !hasQueryParams) {\r\n        return input;\r\n    }\r\n    try {\r\n        var result = input;\r\n        if (hasCredentials) {\r\n            result = redactUserInfo(input);\r\n        }\r\n        if (hasQueryParams) {\r\n            result = redactQueryParameters(result, config);\r\n        }\r\n        return result;\r\n    }\r\n    catch (e) {\r\n        return input;\r\n    }\r\n}\r\n//# sourceMappingURL=EnvUtils.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ProvidersView {\n    public static Current: ProvidersView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private providersJson: any;\n\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ProvidersView.constructor Started');\n        Telemetry.Current.send('ProvidersView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ProvidersView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ProvidersView.loadData Started');\n        Telemetry.Current.send('ProvidersView.loadData.called');\n\n        const result = await Session.Current.Api.getProviders();\n        if (result.isSuccessful) {\n            this.providersJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ProvidersView.renderHtml Started');\n        Telemetry.Current.send('ProvidersView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ProvidersView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ProvidersView.render Started');\n        Telemetry.Current.send('ProvidersView.render.called');\n\n        if (ProvidersView.Current) {\n            ProvidersView.Current._panel.reveal(vscode.ViewColumn.One);\n            ProvidersView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"providersView\", \"Providers\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ProvidersView.Current = new ProvidersView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ProvidersView.dispose Started');\n        Telemetry.Current.send('ProvidersView.dispose.called');\n\n        ProvidersView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ProvidersView._getWebviewContent Started');\n        Telemetry.Current.send('ProvidersView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from providers data\n        let tableRows = '';\n        if (this.providersJson && this.providersJson.providers) {\n            for (const provider of this.providersJson.providers) {\n                const packageName = provider.package_name || 'N/A';\n                const version = provider.version || 'N/A';\n                const description = provider.description || 'N/A';\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(packageName)}</td>\n                    <td>${this._escapeHtml(version)}</td>\n                    <td>${this._escapeHtml(description)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Providers</title>\n      </head>\n      <body>  \n        <h2>Airflow Providers</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-providers\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Package Name</th>\n                    <th>Version</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"3\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No providers found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ProvidersView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ProvidersView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ProvidersView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-providers\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","import * as vscode from 'vscode';\n\nexport class AdminTreeItem extends vscode.TreeItem {\n  constructor(\n    public readonly label: string,\n    public readonly collapsibleState: vscode.TreeItemCollapsibleState,\n    public readonly command?: vscode.Command,\n    public readonly iconPath?: vscode.ThemeIcon\n  ) {\n    super(label, collapsibleState);\n    this.command = command;\n    this.iconPath = iconPath;\n  }\n}\n","/**\n * GoToDagRunHistoryTool - Language Model Tool for opening the DAG Run History view\n * \n * This tool allows users to open the DagRunHistory view with optional filters\n * for dagId, startDate, endDate, and status.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagRunView } from '../report/DagRunView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IGoToDagRunHistoryParams {\n    dagId: string;\n    startDate?: string;\n    endDate?: string;\n    status?: string;\n}\n\n/**\n * GoToDagRunHistoryTool - Implements vscode.LanguageModelTool for opening DAG Run History View\n * \n * This tool opens the DagRunHistory panel to display run history for a specific DAG.\n * Optional filters can be applied for date range and status.\n */\nexport class GoToDagRunHistoryTool implements vscode.LanguageModelTool<IGoToDagRunHistoryParams> {\n\n    constructor() {\n        // No external dependencies needed - uses DagTreeView.Current directly\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagRunHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, startDate, endDate, status } = options.input;\n\n        let message = `Opening DAG Run History for: **${dagId}**`;\n        if (startDate) {\n            message += `\\nStart Date: **${startDate}**`;\n        }\n        if (endDate) {\n            message += `\\nEnd Date: **${endDate}**`;\n        }\n        if (status) {\n            message += `\\nStatus Filter: **${status}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagRunHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, startDate, endDate, status } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagRunHistoryTool.invoke');\n        \n        try {\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Validate date format if provided (YYYY-MM-DD)\n            const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n            if (startDate && !dateRegex.test(startDate)) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid startDate format: \"${startDate}\". Expected format: YYYY-MM-DD`)\n                ]);\n            }\n            if (endDate && !dateRegex.test(endDate)) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid endDate format: \"${endDate}\". Expected format: YYYY-MM-DD`)\n                ]);\n            }\n\n            // Validate status if provided\n            const validStatuses = ['success', 'failed', 'running', 'queued', 'upstream_failed', 'skipped', 'deferred'];\n            if (status && !validStatuses.includes(status.toLowerCase())) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid status: \"${status}\". Valid values: ${validStatuses.join(', ')}`)\n                ]);\n            }\n\n            // Open the DagRunView with the specified parameters\n            DagRunView.render(dagId, startDate, endDate, status?.toLowerCase());\n\n            let successMessage = ` Opened DAG Run History for: **${dagId}**`;\n            const filters: string[] = [];\n            if (startDate) {\n                filters.push(`Start Date: ${startDate}`);\n            }\n            if (endDate) {\n                filters.push(`End Date: ${endDate}`);\n            }\n            if (status) {\n                filters.push(`Status: ${status}`);\n            }\n            if (filters.length > 0) {\n                successMessage += `\\n Filters applied: ${filters.join(', ')}`;\n            }\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagRunHistoryTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG Run History for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { DagView } from '../dag/DagView';\nimport { Session } from '../common/Session';\nimport { DagLogView } from './DagLogView';\nimport { Telemetry } from \"../common/Telemetry\";\n\nexport class DailyDagRunView {\n    public static Current: DailyDagRunView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagRunsJson: any;\n    \n    // Filters\n    private selectedDate: string = ui.toISODateString(new Date());\n    private selectedStatus: string = '';\n    private selectedDagId: string = '';\n    private allDagIds: string[] = [];\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('DailyDagRunView.constructor Started');\n        Telemetry.Current.send('DailyDagRunView.constructor.called');\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DailyDagRunView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('DailyDagRunView.loadData Started');\n        Telemetry.Current.send('DailyDagRunView.loadData.called');\n\t\tif (!Session.Current.Api) { return; }\n        // Fetch all DAGs to populate dag_id filter\n        const dagsResult = await Session.Current.Api.getDagList();\n        if (dagsResult.isSuccessful && Array.isArray(dagsResult.result)) {\n            this.allDagIds = dagsResult.result.map((dag: any) => dag.dag_id).sort();\n        }\n\n        // Fetch DAG runs for the selected date\n        // If a specific DAG is selected, query that DAG, otherwise query all\n        if (this.selectedDagId) {\n            const result = await Session.Current.Api.getDagRunHistory(this.selectedDagId, this.selectedDate);\n            if (result.isSuccessful && result.result && result.result.dag_runs) {\n                this.dagRunsJson = result.result.dag_runs;\n            }\n        } else {\n            // Query all DAGs for runs on the selected date\n            const allRuns: any[] = [];\n            for (const dagId of this.allDagIds) {\n                const result = await Session.Current.Api.getDagRunHistory(dagId, this.selectedDate);\n                if (result.isSuccessful && result.result && result.result.dag_runs) {\n                    allRuns.push(...result.result.dag_runs);\n                }\n            }\n            this.dagRunsJson = allRuns;\n        }\n\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DailyDagRunView.renderHtml Started');\n        Telemetry.Current.send('DailyDagRunView.renderHtml.called');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('DailyDagRunView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('DailyDagRunView.render Started');\n        Telemetry.Current.send('DailyDagRunView.render.called');\n        if (DailyDagRunView.Current) {\n            DailyDagRunView.Current._panel.reveal(vscode.ViewColumn.One);\n            DailyDagRunView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dailyDagRunView\", \"Daily DAG Runs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            DailyDagRunView.Current = new DailyDagRunView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('DailyDagRunView.dispose Started');\n        Telemetry.Current.send('DailyDagRunView.dispose.called');\n        DailyDagRunView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DailyDagRunView._getWebviewContent Started');\n        Telemetry.Current.send('DailyDagRunView._getWebviewContent.called');\n\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Filter DAG runs based on selected filters\n        let filteredRuns: any[] = [];\n        if (this.dagRunsJson && Array.isArray(this.dagRunsJson)) {\n            filteredRuns = this.dagRunsJson.filter((run: any) => {\n                // Filter by status\n                if (this.selectedStatus && run.state !== this.selectedStatus) {\n                    return false;\n                }\n\n                return true;\n            });\n        }\n\n        // Build table rows\n        let tableRows = '';\n        filteredRuns.forEach((run: any) => {\n            const dagId = run.dag_id || 'N/A';\n            const status = run.state || 'N/A';\n            const startDate = run.start_date ? ui.toISODateTimeString(new Date(run.start_date)) : 'N/A';\n            const duration = run.start_date && run.end_date ? ui.getDuration(new Date(run.start_date), new Date(run.end_date)) : 'Running';\n            const config = run.conf ? JSON.stringify(run.conf) : '{}';\n            const note = run.note || '';\n            const dagRunId = run.dag_run_id || '';\n\n            tableRows += `\n            <tr class=\"table-row\">\n                <td><a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-link\">${this._escapeHtml(dagId)}</a></td>\n                <td>\n                    <div style=\"display: flex; align-items: center;\">\n                        <div class=\"state-indicator state-${status}\" title=\"${this._escapeHtml(status)}\"></div>\n                        <span>${this._escapeHtml(status)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class=\"action-links\">\n                        <a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-log-link link-button\">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(startDate)}</td>\n                <td><span class=\"duration-badge\">${this._escapeHtml(duration)}</span></td>\n                <td><div class=\"code-block\" style=\"max-height: 50px; overflow: hidden; font-size: 11px;\">${this._escapeHtml(config)}</div></td>\n                <td>${this._escapeHtml(note)}</td>\n            </tr>`;\n        });\n\n        // Build dag_id filter options\n        const dagIdOptions = this.allDagIds.map(id => `<option value=\"${this._escapeHtml(id)}\">${this._escapeHtml(id)}</option>`).join('');\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>Daily DAG Runs</title>\n      </head>\n      <body>  \n        <h2>Daily DAG Runs</h2>\n        \n        <div class=\"filters\">\n            <div class=\"filter-group\">\n                <label>Date</label>\n                <input type=\"date\" id=\"filter-date\" value=\"${this.selectedDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>Status</label>\n                <select id=\"filter-status\">\n                    <option value=\"\">All</option>\n                    <option value=\"success\">Success</option>\n                    <option value=\"failed\">Failed</option>\n                    <option value=\"running\">Running</option>\n                    <option value=\"queued\">Queued</option>\n                    <option value=\"upstream_failed\">Upstream Failed</option>\n                </select>\n            </div>\n            <div class=\"filter-group\">\n                <label>DAG ID</label>\n                <select id=\"filter-dag-id\">\n                    <option value=\"\">All DAGs</option>\n                    ${dagIdOptions}\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"7\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-date', date: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'deferred': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DailyDagRunView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DailyDagRunView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('DailyDagRunView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"filter-date\":\n                        this.selectedDate = message.date;\n                        this.loadData();\n                        return;\n                    case \"filter-status\":\n                        this.selectedStatus = message.status;\n                        this.renderHtml();\n                        return;\n                    case \"filter-dag-id\":\n                        this.selectedDagId = message.dagId;\n                        this.loadData();\n                        return;\n                    case \"open-dag-view\":\n                        // Open DagView with specific dag and run\n                        if (Session.Current.Api && message.dagId) {\n                            DagView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                    case \"view-dag-log\":\n                        if (message.dagId) {\n                            DagLogView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","import * as vscode from 'vscode';\nimport { ReportTreeItem } from './ReportTreeItem';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ReportTreeView implements vscode.TreeDataProvider<ReportTreeItem> {\n  private _onDidChangeTreeData: vscode.EventEmitter<ReportTreeItem | undefined | null | void> = new vscode.EventEmitter<ReportTreeItem | undefined | null | void>();\n  readonly onDidChangeTreeData: vscode.Event<ReportTreeItem | undefined | null | void> = this._onDidChangeTreeData.event;\n\n  constructor() {\n    Telemetry.Current.send('ReportTreeView.constructor.called');\n  }\n\n  refresh(): void {\n    Telemetry.Current.send('ReportTreeView.refresh.called');\n    this._onDidChangeTreeData.fire();\n  }\n\n  getTreeItem(element: ReportTreeItem): vscode.TreeItem {\n    return element;\n  }\n\n  getChildren(element?: ReportTreeItem): Thenable<ReportTreeItem[]> {\n    if (!element) {\n      // Root level - return the report nodes\n      return Promise.resolve([\n        new ReportTreeItem(\n          'Daily DAG Runs',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewDagRuns',\n            title: 'View Daily DAG Runs',\n            arguments: []\n          },\n          new vscode.ThemeIcon('list-selection')\n        ),\n        new ReportTreeItem(\n          'DAG Run History',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewDagRunHistory',\n            title: 'View DAG Run History',\n            arguments: []\n          },\n          new vscode.ThemeIcon('history')\n        )\n      ]);\n    }\n    return Promise.resolve([]);\n  }\n}\n","/**\n * GoToPluginsViewTool - Language Model Tool for opening the Plugins view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { PluginsView } from '../admin/PluginsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToPluginsViewTool - Opens the Plugins panel\n */\nexport class GoToPluginsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Plugins View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToPluginsViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            PluginsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Plugins View - showing installed Airflow plugins')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToPluginsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Plugins View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","module.exports = require(\"node:stream/web\");","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nexport var ChannelControllerPriority = 500;\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\n// export const SampleRate = \"sampleRate\";\r\n// export const ProcessLegacy = \"ProcessLegacy\";\r\n// export const HttpMethod = \"http.method\";\r\n// export const DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\n// export const DEFAULT_BREEZE_PATH = \"/v2/track\";\r\n// export const strNotSpecified = \"not_specified\";\r\n// export const strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getInst } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar listenerFuncs = [STR_EVENTS_SENT, STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_PERF_EVENT];\r\nvar _aiNamespace = null;\r\nvar _debugListener;\r\nfunction _listenerProxyFunc(name, config) {\r\n    return function () {\r\n        var args = arguments;\r\n        var dbgExt = getDebugExt(config);\r\n        if (dbgExt) {\r\n            var listener = dbgExt.listener;\r\n            if (listener && listener[name]) {\r\n                listener[name][_DYN_APPLY /* @min:%2eapply */](listener, args);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction _getExtensionNamespace() {\r\n    // Cache the lookup of the global namespace object\r\n    var target = getInst(\"Microsoft\");\r\n    if (target) {\r\n        _aiNamespace = target[\"ApplicationInsights\"];\r\n    }\r\n    return _aiNamespace;\r\n}\r\nexport function getDebugExt(config) {\r\n    var ns = _aiNamespace;\r\n    if (!ns && config.disableDbgExt !== true) {\r\n        ns = _aiNamespace || _getExtensionNamespace();\r\n    }\r\n    return ns ? ns[\"ChromeDbgExt\"] : null;\r\n}\r\nexport function getDebugListener(config) {\r\n    if (!_debugListener) {\r\n        _debugListener = {};\r\n        for (var lp = 0; lp < listenerFuncs[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            _debugListener[listenerFuncs[lp]] = _listenerProxyFunc(listenerFuncs[lp], config);\r\n        }\r\n    }\r\n    return _debugListener;\r\n}\r\n//# sourceMappingURL=DbgExtensionUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isArray, isFunction, objDefine, utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_CTX, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_CTX } from \"../__DynamicConstants\";\r\nimport { STR_GET_PERF_MGR, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar strExecutionContextKey = \"ctx\";\r\nvar strParentContextKey = \"ParentContextKey\";\r\nvar strChildrenContextKey = \"ChildrenContextKey\";\r\nvar _defaultPerfManager = null;\r\nvar PerfEvent = /** @class */ (function () {\r\n    function PerfEvent(name, payloadDetails, isAsync) {\r\n        var _self = this;\r\n        _self.start = utcNow();\r\n        _self[_DYN_NAME /* @min:%2ename */] = name;\r\n        _self.isAsync = isAsync;\r\n        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return false; };\r\n        if (isFunction(payloadDetails)) {\r\n            // Create an accessor to minimize the potential performance impact of executing the payloadDetails callback\r\n            var theDetails_1;\r\n            objDefine(_self, \"payload\", {\r\n                g: function () {\r\n                    // Delay the execution of the payloadDetails until needed\r\n                    if (!theDetails_1 && isFunction(payloadDetails)) {\r\n                        theDetails_1 = payloadDetails();\r\n                        // clear it out now so the referenced objects can be garbage collected\r\n                        payloadDetails = null;\r\n                    }\r\n                    return theDetails_1;\r\n                }\r\n            });\r\n        }\r\n        _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n            if (key) {\r\n                // The parent and child links are located directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey] || key === PerfEvent[strChildrenContextKey]) {\r\n                    return _self[key];\r\n                }\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            }\r\n            return null;\r\n        };\r\n        _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n            if (key) {\r\n                // Put the parent and child links directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey]) {\r\n                    // Simple assumption, if we are setting a parent then we must be a child\r\n                    if (!_self[key]) {\r\n                        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return true; };\r\n                    }\r\n                    _self[key] = value;\r\n                }\r\n                else if (key === PerfEvent[strChildrenContextKey]) {\r\n                    _self[key] = value;\r\n                }\r\n                else {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            }\r\n        };\r\n        _self.complete = function () {\r\n            var childTime = 0;\r\n            var childEvts = _self[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n            if (isArray(childEvts)) {\r\n                for (var lp = 0; lp < childEvts[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var childEvt = childEvts[lp];\r\n                    if (childEvt) {\r\n                        childTime += childEvt.time;\r\n                    }\r\n                }\r\n            }\r\n            _self.time = utcNow() - _self.start;\r\n            _self.exTime = _self.time - childTime;\r\n            _self.complete = function () { };\r\n        };\r\n    }\r\n    PerfEvent.ParentContextKey = \"parent\";\r\n    PerfEvent.ChildrenContextKey = \"childEvts\";\r\n    return PerfEvent;\r\n}());\r\nexport { PerfEvent };\r\nvar PerfManager = /** @class */ (function () {\r\n    function PerfManager(manager) {\r\n        /**\r\n         * General bucket used for execution context set and retrieved via setCtx() and getCtx.\r\n         * Defined as private so it can be visualized via the DebugPlugin\r\n         */\r\n        this.ctx = {};\r\n        dynamicProto(PerfManager, this, function (_self) {\r\n            _self.create = function (src, payloadDetails, isAsync) {\r\n                // TODO (@MSNev): at some point we will want to add additional configuration to \"select\" which events to instrument\r\n                // for now this is just a simple do everything.\r\n                return new PerfEvent(src, payloadDetails, isAsync);\r\n            };\r\n            _self.fire = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    perfEvent.complete();\r\n                    if (manager && isFunction(manager[STR_PERF_EVENT /* @min:%2eperfEvent */])) {\r\n                        manager[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n                if (key) {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            };\r\n            _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for PerfManager.prototype.create.\r\n// Removed Stub for PerfManager.prototype.fire.\r\n// Removed Stub for PerfManager.prototype.setCtx.\r\n// Removed Stub for PerfManager.prototype.getCtx.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PerfManager.__ieDyn=1;\n\n    return PerfManager;\r\n}());\r\nexport { PerfManager };\r\nvar doPerfActiveKey = \"CoreUtils.doPerf\";\r\n/**\r\n * Helper function to wrap a function with a perf event\r\n * @param mgrSource - The Performance Manager or a Performance provider source (may be null)\r\n * @param getSource - The callback to create the source name for the event (if perf monitoring is enabled)\r\n * @param func - The function to call and measure\r\n * @param details - A function to return the payload details\r\n * @param isAsync - Is the event / function being call asynchronously or synchronously\r\n */\r\nexport function doPerf(mgrSource, getSource, func, details, isAsync) {\r\n    if (mgrSource) {\r\n        var perfMgr = mgrSource;\r\n        if (perfMgr[STR_GET_PERF_MGR]) {\r\n            // Looks like a perf manager provider object\r\n            perfMgr = perfMgr[STR_GET_PERF_MGR]();\r\n        }\r\n        if (perfMgr) {\r\n            var perfEvt = void 0;\r\n            var currentActive = perfMgr[_DYN_GET_CTX /* @min:%2egetCtx */](doPerfActiveKey);\r\n            try {\r\n                perfEvt = perfMgr.create(getSource(), details, isAsync);\r\n                if (perfEvt) {\r\n                    if (currentActive && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                        perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strParentContextKey], currentActive);\r\n                        if (currentActive[_DYN_GET_CTX /* @min:%2egetCtx */] && currentActive[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                            var children = currentActive[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n                            if (!children) {\r\n                                children = [];\r\n                                currentActive[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strChildrenContextKey], children);\r\n                            }\r\n                            children[_DYN_PUSH /* @min:%2epush */](perfEvt);\r\n                        }\r\n                    }\r\n                    // Set this event as the active event now\r\n                    perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, perfEvt);\r\n                    return func(perfEvt);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (perfEvt && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                    perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](\"exception\", ex);\r\n                }\r\n            }\r\n            finally {\r\n                // fire the perf event\r\n                if (perfEvt) {\r\n                    perfMgr.fire(perfEvt);\r\n                }\r\n                // Reset the active event to the previous value\r\n                perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, currentActive);\r\n            }\r\n        }\r\n    }\r\n    return func();\r\n}\r\n/**\r\n * Set the global performance manager to use when there is no core instance or it has not been initialized yet.\r\n * @param perfManager - The IPerfManager instance to use when no performance manager is supplied.\r\n */\r\nexport function setGblPerfMgr(perfManager) {\r\n    _defaultPerfManager = perfManager;\r\n}\r\n/**\r\n * Get the current global performance manager that will be used with no performance manager is supplied.\r\n * @returns - The current default manager\r\n */\r\nexport function getGblPerfMgr() {\r\n    return _defaultPerfManager;\r\n}\r\n//# sourceMappingURL=PerfManager.js.map","module.exports = require(\"worker_threads\");","/*!\n * NevWare21 Solutions LLC - ts-async, 0.5.5\n * https://github.com/nevware21/ts-async\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\nimport { isPromiseLike, objDefineProperties, getDocument, createCachedValue, safe, getInst, dumpObj, arrSlice, iterForOf, objDefineProp, hasSymbol, getKnownSymbol, isFunction, throwTypeError, isUndefined, scheduleTimeout, isNode, getWindow, getGlobal, objDefine, objToString, isArray, arrForEach, isIterable, createCustomError, isNumber, scheduleIdleCallback, utcNow, getLength, isIterator, fnCall, arrIndexOf } from '@nevware21/ts-utils';\n\nvar STR_PROMISE = \"Promise\";\nvar DONE = \"done\";\nvar VALUE = \"value\";\nvar RETURN = \"return\";\nvar REJECTED = \"rejected\";\n\nfunction doAwaitResponse(value, cb) {\n    return doAwait(value, function (value) {\n        return cb ? cb({\n            status: \"fulfilled\",\n            rejected: false,\n            value: value\n        }) : value;\n    }, function (reason) {\n        return cb ? cb({\n            status: REJECTED,\n            rejected: true,\n            reason: reason\n        }) : reason;\n    });\n}\nfunction doAwait(value, resolveFn, rejectFn, finallyFn) {\n    var result = value;\n    try {\n        if (isPromiseLike(value)) {\n            if (resolveFn || rejectFn) {\n                result = value.then(resolveFn, rejectFn);\n            }\n        }\n        else {\n            try {\n                if (resolveFn) {\n                    result = resolveFn(value);\n                }\n            }\n            catch (err) {\n                if (rejectFn) {\n                    result = rejectFn(err);\n                }\n                else {\n                    throw err;\n                }\n            }\n        }\n    }\n    finally {\n        if (finallyFn) {\n            doFinally(result, finallyFn);\n        }\n    }\n    return result;\n}\nfunction doFinally(value, finallyFn) {\n    var result = value;\n    if (finallyFn) {\n        if (isPromiseLike(value)) {\n            if (value.finally) {\n                result = value.finally(finallyFn);\n            }\n            else {\n                result = value.then(function (value) {\n                    finallyFn();\n                    return value;\n                }, function (reason) {\n                    finallyFn();\n                    throw reason;\n                });\n            }\n        }\n        else {\n            finallyFn();\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n\nvar _debugState;\nvar _debugResult;\nvar _debugHandled;\nvar _promiseDebugEnabled = false;\nfunction _addDebugState$1(thePromise, stateFn, resultFn, handledFn) {\n    _debugState = _debugState || { toString: function () { return \"[[PromiseState]]\"; } };\n    _debugResult = _debugResult || { toString: function () { return \"[[PromiseResult]]\"; } };\n    _debugHandled = _debugHandled || { toString: function () { return \"[[PromiseIsHandled]]\"; } };\n    var props = {};\n    props[_debugState] = { get: stateFn };\n    props[_debugResult] = { get: resultFn };\n    props[_debugHandled] = { get: handledFn };\n    objDefineProperties(thePromise, props);\n}\nfunction setPromiseDebugState(enabled, logger) {\n    _promiseDebugEnabled = enabled;\n}\n\nvar STRING_STATES = [\n    \"pending\", \"resolving\", \"resolved\", REJECTED\n];\n\nvar DISPATCH_EVENT = \"dispatchEvent\";\nvar _hasInitEvent;\nfunction _hasInitEventFn(doc) {\n    var evt;\n    if (doc && doc.createEvent) {\n        evt = doc.createEvent(\"Event\");\n    }\n    return (!!evt && evt.initEvent);\n}\nfunction emitEvent(target, evtName, populateEvent, useNewEvent) {\n    var doc = getDocument();\n    !_hasInitEvent && (_hasInitEvent = createCachedValue(!!safe(_hasInitEventFn, [doc]).v));\n    var theEvt = _hasInitEvent.v ? doc.createEvent(\"Event\") : (useNewEvent ? new Event(evtName) : {});\n    populateEvent && populateEvent(theEvt);\n    if (_hasInitEvent.v) {\n        theEvt.initEvent(evtName, false, true);\n    }\n    if (theEvt && target[DISPATCH_EVENT]) {\n        target[DISPATCH_EVENT](theEvt);\n    }\n    else {\n        var handler = target[\"on\" + evtName];\n        if (handler) {\n            handler(theEvt);\n        }\n        else {\n            var theConsole = getInst(\"console\");\n            theConsole && (theConsole[\"error\"] || theConsole[\"log\"])(evtName, dumpObj(theEvt));\n        }\n    }\n}\n\nvar NODE_UNHANDLED_REJECTION = \"unhandledRejection\";\nvar UNHANDLED_REJECTION = NODE_UNHANDLED_REJECTION.toLowerCase();\nvar _currentPromiseId = [];\nvar _uniquePromiseId = 0;\nvar _unhandledRejectionTimeout = 10;\nvar _aggregationError;\nvar _hasPromiseRejectionEvent;\nfunction dumpFnObj(value) {\n    if (isFunction(value)) {\n        return value.toString();\n    }\n    return dumpObj(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAggregationError(values) {\n    !_aggregationError && (_aggregationError = createCachedValue(safe(getInst, [\"AggregationError\"]).v || createCustomError(\"AggregationError\", function (self, args) {\n        self.errors = args[0];\n    })));\n    return new _aggregationError.v(values);\n}\nfunction _createPromise(newPromise, processor, executor) {\n    var additionalArgs = arrSlice(arguments, 3);\n    var _state = 0 ;\n    var _hasResolved = false;\n    var _settledValue;\n    var _queue = [];\n    var _id = _uniquePromiseId++;\n    var _parentId = _currentPromiseId.length > 0 ? _currentPromiseId[_currentPromiseId.length - 1] : undefined;\n    var _handled = false;\n    var _unHandledRejectionHandler = null;\n    var _thePromise;\n    function _then(onResolved, onRejected) {\n        try {\n            _currentPromiseId.push(_id);\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            var thenPromise = newPromise(function (resolve, reject) {\n                _queue.push(function () {\n                    try {\n                        var handler = _state === 2  ? onResolved : onRejected;\n                        var value = isUndefined(handler) ? _settledValue : (isFunction(handler) ? handler(_settledValue) : handler);\n                        if (isPromiseLike(value)) {\n                            value.then(resolve, reject);\n                        }\n                        else if (handler) {\n                            resolve(value);\n                        }\n                        else if (_state === 3 ) {\n                            reject(value);\n                        }\n                        else {\n                            resolve(value);\n                        }\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n                if (_hasResolved) {\n                    _processQueue();\n                }\n            }, additionalArgs);\n            return thenPromise;\n        }\n        finally {\n            _currentPromiseId.pop();\n        }\n    }\n    function _catch(onRejected) {\n        return _then(undefined, onRejected);\n    }\n    function _finally(onFinally) {\n        var thenFinally = onFinally;\n        var catchFinally = onFinally;\n        if (isFunction(onFinally)) {\n            thenFinally = function (value) {\n                onFinally && onFinally();\n                return value;\n            };\n            catchFinally = function (reason) {\n                onFinally && onFinally();\n                throw reason;\n            };\n        }\n        return _then(thenFinally, catchFinally);\n    }\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    function _processQueue() {\n        if (_queue.length > 0) {\n            var pending = _queue.slice();\n            _queue = [];\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            processor(pending);\n        }\n    }\n    function _createSettleIfFn(newState, allowState) {\n        return function (theValue) {\n            if (_state === allowState) {\n                if (newState === 2  && isPromiseLike(theValue)) {\n                    _state = 1 ;\n                    theValue.then(_createSettleIfFn(2 , 1 ), _createSettleIfFn(3 , 1 ));\n                    return;\n                }\n                _state = newState;\n                _hasResolved = true;\n                _settledValue = theValue;\n                _processQueue();\n                if (!_handled && newState === 3  && !_unHandledRejectionHandler) {\n                    _unHandledRejectionHandler = scheduleTimeout(_notifyUnhandledRejection, _unhandledRejectionTimeout);\n                }\n            }\n        };\n    }\n    function _notifyUnhandledRejection() {\n        if (!_handled) {\n            _handled = true;\n            if (isNode()) {\n                process.emit(NODE_UNHANDLED_REJECTION, _settledValue, _thePromise);\n            }\n            else {\n                var gbl = getWindow() || getGlobal();\n                !_hasPromiseRejectionEvent && (_hasPromiseRejectionEvent = createCachedValue(safe((getInst), [STR_PROMISE + \"RejectionEvent\"]).v));\n                emitEvent(gbl, UNHANDLED_REJECTION, function (theEvt) {\n                    objDefine(theEvt, \"promise\", { g: function () { return _thePromise; } });\n                    theEvt.reason = _settledValue;\n                    return theEvt;\n                }, !!_hasPromiseRejectionEvent.v);\n            }\n        }\n    }\n    _thePromise = {\n        then: _then,\n        \"catch\": _catch,\n        finally: _finally\n    };\n    objDefineProp(_thePromise, \"state\", {\n        get: _strState\n    });\n    if (_promiseDebugEnabled) {\n        _addDebugState$1(_thePromise, _strState, function () { return objToString(_settledValue); }, function () { return _handled; });\n    }\n    if (hasSymbol()) {\n        _thePromise[getKnownSymbol(11 )] = \"IPromise\";\n    }\n    function _toString() {\n        return \"IPromise\" + (_promiseDebugEnabled ? \"[\" + _id + (!isUndefined(_parentId) ? (\":\" + _parentId) : \"\") + \"]\" : \"\") + \" \" + _strState() + (_hasResolved ? (\" - \" + dumpFnObj(_settledValue)) : \"\") + (\"\");\n    }\n    _thePromise.toString = _toString;\n    (function _initialize() {\n        if (!isFunction(executor)) {\n            throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpFnObj(executor));\n        }\n        var _rejectFn = _createSettleIfFn(3 , 0 );\n        try {\n            executor.call(_thePromise, _createSettleIfFn(2 , 0 ), _rejectFn);\n        }\n        catch (e) {\n            _rejectFn(e);\n        }\n    })();\n    return _thePromise;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllPromise(newPromise) {\n    return function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            try {\n                var values_1 = [];\n                var pending_1 = 1;\n                iterForOf(input, function (item, idx) {\n                    if (item) {\n                        pending_1++;\n                        doAwait(item, function (value) {\n                            values_1[idx] = value;\n                            if (--pending_1 === 0) {\n                                resolve(values_1);\n                            }\n                        }, reject);\n                    }\n                });\n                pending_1--;\n                if (pending_1 === 0) {\n                    resolve(values_1);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createResolvedPromise(newPromise) {\n    return function (value) {\n        var additionalArgs = arrSlice(arguments, 1);\n        if (isPromiseLike(value)) {\n            return value;\n        }\n        return newPromise(function (resolve) {\n            resolve(value);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRejectedPromise(newPromise) {\n    return function (reason) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (_resolve, reject) {\n            reject(reason);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllSettledPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var values = [];\n            var pending = 1;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (value.rejected) {\n                        values[idx] = {\n                            status: REJECTED,\n                            reason: value.reason\n                        };\n                    }\n                    else {\n                        values[idx] = {\n                            status: \"fulfilled\",\n                            value: value.value\n                        };\n                    }\n                    if (--pending === 0) {\n                        resolve(values);\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0) {\n                    resolve(values);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRacePromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var isDone = false;\n            function processItem(item) {\n                doAwaitResponse(item, function (value) {\n                    if (!isDone) {\n                        isDone = true;\n                        if (value.rejected) {\n                            reject(value.reason);\n                        }\n                        else {\n                            resolve(value.value);\n                        }\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAnyPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var theErros = [];\n            var pending = 1;\n            var isDone = false;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (!value.rejected) {\n                        isDone = true;\n                        resolve(value.value);\n                        return;\n                    }\n                    else {\n                        theErros[idx] = value.reason;\n                    }\n                    if (--pending === 0 && !isDone) {\n                        reject(_createAggregationError(theErros));\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0 && !isDone) {\n                    reject(_createAggregationError(theErros));\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n\nfunction syncItemProcessor(pending) {\n    arrForEach(pending, function (fn) {\n        try {\n            fn();\n        }\n        catch (e) {\n        }\n    });\n}\nfunction timeoutItemProcessor(timeout) {\n    var callbackTimeout = isNumber(timeout) ? timeout : 0;\n    return function (pending) {\n        scheduleTimeout(function () {\n            syncItemProcessor(pending);\n        }, callbackTimeout);\n    };\n}\nfunction idleItemProcessor(timeout) {\n    var options;\n    if (timeout >= 0) {\n        options = {\n            timeout: +timeout\n        };\n    }\n    return function (pending) {\n        scheduleIdleCallback(function (deadline) {\n            syncItemProcessor(pending);\n        }, options);\n    };\n}\n\nvar _allAsyncSettledCreator;\nvar _raceAsyncCreator;\nvar _anyAsyncCreator;\nfunction createAsyncPromise(executor, timeout) {\n    return _createPromise(createAsyncPromise, timeoutItemProcessor(timeout), executor, timeout);\n}\nvar createAsyncAllPromise = ( /*#__PURE__*/_createAllPromise(createAsyncPromise));\nvar createAsyncResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createAsyncPromise));\nvar createAsyncRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createAsyncPromise));\nfunction createAsyncAllSettledPromise(input, timeout) {\n    !_allAsyncSettledCreator && (_allAsyncSettledCreator = _createAllSettledPromise(createAsyncPromise));\n    return _allAsyncSettledCreator.v(input, timeout);\n}\nfunction createAsyncRacePromise(values, timeout) {\n    !_raceAsyncCreator && (_raceAsyncCreator = _createRacePromise(createAsyncPromise));\n    return _raceAsyncCreator.v(values, timeout);\n}\nfunction createAsyncAnyPromise(values, timeout) {\n    !_anyAsyncCreator && (_anyAsyncCreator = _createAnyPromise(createAsyncPromise));\n    return _anyAsyncCreator.v(values, timeout);\n}\n\nvar _promiseCls;\nvar _allCreator;\nvar _allNativeSettledCreator;\nvar _raceNativeCreator;\nvar _anyNativeCreator;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createNativePromiseHelper(name, func) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    if (_promiseCls.v && _promiseCls.v[name]) {\n        return createCachedValue(function (input, timeout) {\n            return createNativePromise(function (resolve, reject) {\n                _promiseCls.v[name](input).then(resolve, reject);\n            });\n        });\n    }\n    return func();\n}\nfunction createNativePromise(executor, timeout) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    var PrmCls = _promiseCls.v;\n    if (!PrmCls) {\n        return createAsyncPromise(executor);\n    }\n    if (!isFunction(executor)) {\n        throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpObj(executor));\n    }\n    var _state = 0 ;\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    var thePromise = new PrmCls(function (resolve, reject) {\n        function _resolve(value) {\n            _state = 2 ;\n            resolve(value);\n        }\n        function _reject(reason) {\n            _state = 3 ;\n            reject(reason);\n        }\n        executor(_resolve, _reject);\n    });\n    objDefineProp(thePromise, \"state\", {\n        get: _strState\n    });\n    return thePromise;\n}\nfunction createNativeAllPromise(input, timeout) {\n    !_allCreator && (_allCreator = _createNativePromiseHelper(\"all\", function () { return createCachedValue(_createAllPromise(createNativePromise)); }));\n    return _allCreator.v(input, timeout);\n}\nvar createNativeResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createNativePromise));\nvar createNativeRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createNativePromise));\nfunction createNativeAllSettledPromise(input, timeout) {\n    !_allNativeSettledCreator && (_allNativeSettledCreator = _createNativePromiseHelper(\"allSettled\", function () { return _createAllSettledPromise(createNativePromise); }));\n    return _allNativeSettledCreator.v(input, timeout);\n}\nfunction createNativeRacePromise(values, timeout) {\n    !_raceNativeCreator && (_raceNativeCreator = _createNativePromiseHelper(\"race\", function () { return _createRacePromise(createNativePromise); }));\n    return _raceNativeCreator.v(values, timeout);\n}\nfunction createNativeAnyPromise(values, timeout) {\n    !_anyNativeCreator && (_anyNativeCreator = _createNativePromiseHelper(\"any\", function () { return _createAnyPromise(createNativePromise); }));\n    return _anyNativeCreator.v(values, timeout);\n}\n\nvar _allSyncSettledCreator;\nvar _raceSyncCreator;\nvar _anySyncCreator;\nfunction createSyncPromise(executor) {\n    return _createPromise(createSyncPromise, syncItemProcessor, executor);\n}\nvar createSyncAllPromise = ( /*#__PURE__*/_createAllPromise(createSyncPromise));\nvar createSyncResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createSyncPromise));\nvar createSyncRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createSyncPromise));\nfunction createSyncAllSettledPromise(input, timeout) {\n    !_allSyncSettledCreator && (_allSyncSettledCreator = _createAllSettledPromise(createSyncPromise));\n    return _allSyncSettledCreator.v(input, timeout);\n}\nfunction createSyncRacePromise(values, timeout) {\n    !_raceSyncCreator && (_raceSyncCreator = _createRacePromise(createSyncPromise));\n    return _raceSyncCreator.v(values, timeout);\n}\nfunction createSyncAnyPromise(values, timeout) {\n    !_anySyncCreator && (_anySyncCreator = _createAnyPromise(createSyncPromise));\n    return _anySyncCreator.v(values, timeout);\n}\n\nvar _defaultIdleTimeout;\nvar _allIdleSettledCreator;\nvar _raceIdleCreator;\nvar _anyIdleCreator;\nfunction setDefaultIdlePromiseTimeout(idleDeadline) {\n    _defaultIdleTimeout = idleDeadline;\n}\nvar setDefaultIdleTimeout = ( /*#__PURE__*/_pureAssign(setDefaultIdlePromiseTimeout));\nfunction createIdlePromise(executor, timeout) {\n    var theTimeout = isUndefined(timeout) ? _defaultIdleTimeout : timeout;\n    return _createPromise(createIdlePromise, idleItemProcessor(theTimeout), executor, theTimeout);\n}\nvar createIdleAllPromise = ( /*#__PURE__*/_createAllPromise(createIdlePromise));\nvar createIdleResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createIdlePromise));\nvar createIdleRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createIdlePromise));\nfunction createIdleAllSettledPromise(input, timeout) {\n    !_allIdleSettledCreator && (_allIdleSettledCreator = _createAllSettledPromise(createIdlePromise));\n    return _allIdleSettledCreator.v(input, timeout);\n}\nfunction createIdleRacePromise(values, timeout) {\n    !_raceIdleCreator && (_raceIdleCreator = _createRacePromise(createIdlePromise));\n    return _raceIdleCreator.v(values, timeout);\n}\nfunction createIdleAnyPromise(values, timeout) {\n    !_anyIdleCreator && (_anyIdleCreator = _createAnyPromise(createIdlePromise));\n    return _anyIdleCreator.v(values, timeout);\n}\n\nvar _promiseCreator;\nvar _allSettledCreator;\nvar _raceCreator;\nvar _anyCreator;\nfunction setCreatePromiseImpl(creator) {\n    _promiseCreator = creator ? createCachedValue(creator) : null;\n}\nfunction createPromise(executor, timeout) {\n    !_promiseCreator && (_promiseCreator = createCachedValue(createNativePromise));\n    return _promiseCreator.v.call(this, executor, timeout);\n}\nvar createAllPromise = ( /*#__PURE__*/_createAllPromise(createPromise));\nvar createResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createPromise));\nvar createRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createPromise));\nfunction createAllSettledPromise(input, timeout) {\n    !_allSettledCreator && (_allSettledCreator = _createAllSettledPromise(createPromise));\n    return _allSettledCreator.v(input, timeout);\n}\nfunction createRacePromise(values, timeout) {\n    !_raceCreator && (_raceCreator = _createRacePromise(createPromise));\n    return _raceCreator.v(values, timeout);\n}\nfunction createAnyPromise(values, timeout) {\n    !_anyCreator && (_anyCreator = _createAnyPromise(createPromise));\n    return _anyCreator.v(values, timeout);\n}\n\nfunction createTimeoutPromise(timeout, resolveReject, message) {\n    return createPromise(function (resolve, reject) {\n        scheduleTimeout(function () {\n            (resolveReject ? resolve : reject)(!isUndefined(message) ? message : \"Timeout of \" + timeout + \"ms exceeded\");\n        }, timeout);\n    });\n}\n\nfunction _doneChk(isDone, state, value, thisArg) {\n    var result = isDone;\n    state.res = value;\n    if (!result) {\n        if (state.isDone && isFunction(state.isDone)) {\n            return doAwait(state.isDone.call(thisArg, state), function (done) {\n                state.iter++;\n                return !!done;\n            });\n        }\n        else {\n            result = !!state.isDone;\n        }\n    }\n    state.iter++;\n    return result;\n}\nfunction doWhileAsync(callbackFn, isDoneFn, thisArg) {\n    var promise;\n    var resolve;\n    var reject = function (reason) {\n        isDone = true;\n        throw reason;\n    };\n    var isDone = false;\n    var state = {\n        st: utcNow(),\n        iter: 0,\n        isDone: isDoneFn || false\n    };\n    if (callbackFn) {\n        var _createPromise_1 = function () {\n            return createPromise(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n        };\n        var _handleAsyncDone_1 = function (done) {\n            isDone = !!done;\n            if (!isDone) {\n                _processNext_1();\n            }\n            else {\n                resolve(state.res);\n            }\n        };\n        var _processNext_1 = function () {\n            while (!isDone) {\n                try {\n                    var cbResult = callbackFn.call(thisArg, state);\n                    if (isPromiseLike(cbResult)) {\n                        promise = promise || _createPromise_1();\n                        doAwait(cbResult, function (res) {\n                            try {\n                                doAwait(_doneChk(isDone, state, res, thisArg), _handleAsyncDone_1, reject);\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                        }, reject);\n                        return promise;\n                    }\n                    else {\n                        var dnRes = _doneChk(isDone, state, cbResult, thisArg);\n                        if (isPromiseLike(dnRes)) {\n                            promise = promise || _createPromise_1();\n                            doAwait(dnRes, _handleAsyncDone_1, reject);\n                            return promise;\n                        }\n                        else {\n                            isDone = !!dnRes;\n                        }\n                    }\n                }\n                catch (e) {\n                    reject(e);\n                    return promise;\n                }\n            }\n            if (isDone && resolve) {\n                resolve(state.res);\n            }\n            return promise || state.res;\n        };\n        return _processNext_1();\n    }\n}\n\nfunction arrForEachAsync(theArray, callbackFn, thisArg) {\n    if (theArray) {\n        var len_1 = getLength(theArray);\n        if (len_1) {\n            var isDone = function (state) {\n                if (state.iter >= len_1 || state.res === -1) {\n                    return true;\n                }\n            };\n            return doWhileAsync(function (state) {\n                var idx = state.iter;\n                if (idx in theArray) {\n                    return callbackFn.call(thisArg || theArray, theArray[idx], idx, theArray);\n                }\n            }, isDone);\n        }\n    }\n}\n\nvar _iterSymbol;\nvar _iterAsyncSymbol;\nfunction iterForOfAsync(iter, callbackFn, thisArg) {\n    var err;\n    var iterResult;\n    var theIter = iter;\n    function onFailed(failed) {\n        err = { e: failed };\n        if (theIter.throw) {\n            iterResult = null;\n            theIter.throw(err);\n        }\n        throw failed;\n    }\n    function onFinally() {\n        try {\n            if (iterResult && !iterResult[DONE]) {\n                theIter[RETURN] && theIter[RETURN](iterResult);\n            }\n        }\n        finally {\n            if (err) {\n                throw err.e;\n            }\n        }\n    }\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterAsyncSymbol && (_iterAsyncSymbol = createCachedValue(getKnownSymbol(0 )));\n            theIter = iter[_iterAsyncSymbol.v] ? iter[_iterAsyncSymbol.v]() : null;\n            if (!theIter) {\n                !_iterSymbol && (_iterSymbol = createCachedValue(getKnownSymbol(3 )));\n                theIter = iter[_iterSymbol.v] ? iter[_iterSymbol.v]() : null;\n            }\n        }\n        if (theIter && isIterator(theIter)) {\n            var result = void 0;\n            try {\n                result = doWhileAsync(function (state) {\n                    return doAwait(theIter.next(), function (res) {\n                        iterResult = res;\n                        if (!res[DONE]) {\n                            return fnCall(callbackFn, thisArg || theIter, iterResult[VALUE], state.iter, theIter);\n                        }\n                    }, function (reason) {\n                        state.isDone = true;\n                        onFailed(reason);\n                    });\n                }, function (state) {\n                    if (!iterResult || iterResult[DONE] || state.res === -1) {\n                        onFinally();\n                        return true;\n                    }\n                }, thisArg || theIter);\n                if (isPromiseLike(result)) {\n                    result = doFinally(result.catch(onFailed), onFinally);\n                }\n                return result;\n            }\n            catch (failed) {\n                onFailed(failed);\n            }\n            finally {\n                if (result && !isPromiseLike(result)) {\n                    onFinally();\n                }\n            }\n        }\n    }\n}\n\nvar REJECT = \"reject\";\nvar REJECTED_ERROR = \"Rejected\";\nvar _schedulerId = 0;\nvar _debugName;\nvar _debugIntState;\nvar _customErrors = {};\nfunction _rejectDone() {\n}\nfunction _createError(type, evt, message) {\n    !_customErrors[type] && (_customErrors[type] = createCustomError(type));\n    var now = utcNow();\n    return new (_customErrors[type])(\"Task [\".concat(evt.id, \"] \").concat(message || \"\", \"- \").concat((evt.st ? \"Running\" : \"Waiting\"), \": \").concat(_calcTime(now, evt.st || evt.cr)));\n}\nfunction _calcTime(now, start) {\n    return ((now - start) || \"0\") + \" ms\";\n}\nfunction _abortStaleTasks(taskQueue, staleTimeoutPeriod) {\n    var now = utcNow();\n    var expired = now - staleTimeoutPeriod;\n    arrForEach(taskQueue, function (evt) {\n        if (evt && !evt.rj && (evt.st && evt.st < expired) || (!evt.st && evt.cr && evt.cr < expired)) {\n            evt && evt[REJECT](evt.rj || _createError(\"Aborted\", evt, \"Stale \"));\n        }\n    });\n}\nfunction _removeTask(queue, taskDetail) {\n    var idx = arrIndexOf(queue, taskDetail);\n    if (idx !== -1) {\n        queue.splice(idx, 1);\n    }\n}\nfunction _addDebugState(theScheduler, nameFn, stateFn) {\n    _debugName = _debugName || { toString: function () { return \"[[SchedulerName]]\"; } };\n    _debugIntState = _debugIntState || { toString: function () { return \"[[SchedulerState]]\"; } };\n    objDefineProp(theScheduler, _debugName, { get: nameFn });\n    objDefineProp(theScheduler, _debugIntState, { get: stateFn });\n}\nfunction createTaskScheduler(newPromise, name) {\n    var _theTask;\n    var _running = [];\n    var _waiting = [];\n    var _staleTimeoutPeriod = 600000;\n    var _staleTimeoutCheckPeriod = _staleTimeoutPeriod / 10;\n    var _taskCount = 0;\n    var _schedulerName = (name ? (name + \".\") : \"\") + _schedulerId++;\n    var _blockedTimer;\n    newPromise = newPromise || createPromise;\n    var _startBlockedTimer = function () {\n        var hasTasks = (getLength(_running) + getLength(_waiting)) > 0;\n        if (_staleTimeoutPeriod > 0) {\n            if (!_blockedTimer) {\n                _blockedTimer = scheduleTimeout(function () {\n                    _abortStaleTasks(_running, _staleTimeoutPeriod);\n                    _abortStaleTasks(_waiting, _staleTimeoutPeriod);\n                    _blockedTimer && (_blockedTimer.enabled = ((getLength(_running) + getLength(_waiting)) > 0));\n                }, _staleTimeoutCheckPeriod);\n                _blockedTimer.unref();\n            }\n            _blockedTimer && (_blockedTimer.enabled = hasTasks);\n        }\n    };\n    var _queueTask = function (startAction, taskName, timeout) {\n        var _a;\n        var taskId = _schedulerName + \".\" + _taskCount++;\n        if (taskName) {\n            taskId += \"-(\" + taskName + \")\";\n        }\n        var newTask = (_a = {\n                id: taskId,\n                cr: utcNow(),\n                to: timeout\n            },\n            _a[REJECT] = function (reason) {\n                newTask.rj = reason || _createError(REJECTED_ERROR, newTask);\n                newTask[REJECT] = _rejectDone;\n            },\n            _a);\n        if (!_theTask) {\n            newTask.p = newPromise(_runTask(newTask, startAction));\n        }\n        else {\n            newTask.p = _waitForPreviousTask(newTask, _theTask, startAction);\n        }\n        _theTask = newTask;\n        return newTask.p;\n    };\n    var _runTask = function (taskDetail, startAction) {\n        taskDetail.st = utcNow();\n        _running.push(taskDetail);\n        _startBlockedTimer();\n        return function (onTaskResolve, onTaskReject) {\n            var _promiseReject = function (reason) {\n                taskDetail.rj = taskDetail.rj || reason || _createError(REJECTED_ERROR, taskDetail);\n                taskDetail[REJECT] = _rejectDone;\n                _doCleanup(taskDetail);\n                onTaskResolve = null;\n                onTaskReject && onTaskReject(reason);\n                onTaskReject = null;\n            };\n            var taskId = taskDetail.id;\n            if (taskDetail.rj) {\n                _promiseReject(taskDetail.rj);\n            }\n            else {\n                taskDetail[REJECT] = _promiseReject;\n                try {\n                    var startResult = startAction(taskId);\n                    if (taskDetail.to && isPromiseLike(startResult)) {\n                        taskDetail.t = scheduleTimeout(function () {\n                            _promiseReject(_createError(\"Timeout\", taskDetail));\n                        }, taskDetail.to);\n                    }\n                    doAwait(startResult, function (theResult) {\n                        _doCleanup(taskDetail);\n                        try {\n                            onTaskResolve && onTaskResolve(theResult);\n                        }\n                        catch (e) {\n                            onTaskReject && onTaskReject(e);\n                        }\n                        onTaskReject = null;\n                        onTaskResolve = null;\n                    }, _promiseReject);\n                }\n                catch (e) {\n                    _promiseReject(e);\n                }\n            }\n        };\n    };\n    var _waitForPreviousTask = function (taskDetail, prevTask, startAction) {\n        _waiting.push(taskDetail);\n        _startBlockedTimer();\n        return newPromise(function (onWaitResolve, onWaitReject) {\n            doAwaitResponse(prevTask.p, function () {\n                _removeTask(_waiting, taskDetail);\n                _runTask(taskDetail, startAction)(onWaitResolve, onWaitReject);\n            });\n        });\n    };\n    var _doCleanup = function (taskDetail) {\n        _removeTask(_running, taskDetail);\n        taskDetail.t && taskDetail.t.cancel();\n        taskDetail.t = null;\n        if (_theTask && _theTask === taskDetail) {\n            _theTask = null;\n            if (getLength(_running) + getLength(_waiting) === 0) {\n                _blockedTimer && _blockedTimer.cancel();\n                _blockedTimer = null;\n            }\n        }\n    };\n    var theScheduler = {\n        idle: true,\n        queue: _queueTask,\n        setStaleTimeout: function (staleTimeout, staleCheckPeriod) {\n            _blockedTimer && _blockedTimer.cancel();\n            _blockedTimer = null;\n            _staleTimeoutPeriod = staleTimeout;\n            _staleTimeoutCheckPeriod = staleCheckPeriod || staleTimeout / 10;\n            _startBlockedTimer();\n        }\n    };\n    objDefine(theScheduler, \"idle\", {\n        g: function () {\n            return getLength(_running) + getLength(_waiting) === 0;\n        }\n    });\n    _addDebugState(theScheduler, function () { return _schedulerName; }, function () {\n        return {\n            l: _theTask,\n            r: _running,\n            w: _waiting\n        };\n    });\n    return theScheduler;\n}\n\nvar toStringTagSymbol = getKnownSymbol(11 );\nvar PolyPromise = ( /*#__PURE__*/(function () {\n    function PolyPromiseImpl(executor) {\n        this._$ = createAsyncPromise(executor);\n        if (toStringTagSymbol) {\n            this[toStringTagSymbol] = \"Promise\";\n        }\n        objDefineProp(this, \"state\", {\n            get: function () {\n                return this._$.state;\n            }\n        });\n    }\n    PolyPromiseImpl.all = createAsyncAllPromise;\n    PolyPromiseImpl.race = createAsyncRacePromise;\n    PolyPromiseImpl.any = createAsyncAnyPromise;\n    PolyPromiseImpl.reject = createAsyncRejectedPromise;\n    PolyPromiseImpl.resolve = createAsyncResolvedPromise;\n    PolyPromiseImpl.allSettled = createAsyncAllSettledPromise;\n    var theProto = PolyPromiseImpl.prototype;\n    theProto.then = function (onResolved, onRejected) {\n        return this._$.then(onResolved, onRejected);\n    };\n    theProto.catch = function (onRejected) {\n        return this._$.catch(onRejected);\n    };\n    theProto.finally = function (onfinally) {\n        return this._$.finally(onfinally);\n    };\n    return PolyPromiseImpl;\n}()));\n\nexport { PolyPromise, arrForEachAsync, createAllPromise, createAllSettledPromise, createAnyPromise, createAsyncAllPromise, createAsyncAllSettledPromise, createAsyncAnyPromise, createAsyncPromise, createAsyncRacePromise, createAsyncRejectedPromise, createAsyncResolvedPromise, createIdleAllPromise, createIdleAllSettledPromise, createIdleAnyPromise, createIdlePromise, createIdleRacePromise, createIdleRejectedPromise, createIdleResolvedPromise, createNativeAllPromise, createNativeAllSettledPromise, createNativeAnyPromise, createNativePromise, createNativeRacePromise, createNativeRejectedPromise, createNativeResolvedPromise, createPromise, createRacePromise, createRejectedPromise, createResolvedPromise, createSyncAllPromise, createSyncAllSettledPromise, createSyncAnyPromise, createSyncPromise, createSyncRacePromise, createSyncRejectedPromise, createSyncResolvedPromise, createTaskScheduler, createTimeoutPromise, doAwait, doAwaitResponse, doFinally, doWhileAsync, iterForOfAsync, setCreatePromiseImpl, setDefaultIdlePromiseTimeout, setDefaultIdleTimeout, setPromiseDebugState };\n//# sourceMappingURL=ts-async.js.map\n","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isFunction, objDefine } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PROCESS_TEL_CONT2, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_PROCESS_NEXT, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { isNotNullOrUndefined, proxyFunctionAs } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_EXTENSION_CONFIG, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext } from \"./ProcessTelemetryContext\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\nvar strGetPlugin = \"getPlugin\";\r\nvar defaultValues = (_a = {},\r\n    _a[STR_EXTENSION_CONFIG] = { isVal: isNotNullOrUndefined, v: {} },\r\n    _a);\r\n/**\r\n * BaseTelemetryPlugin provides a basic implementation of the ITelemetryPlugin interface so that plugins\r\n * can avoid implementation the same set of boiler plate code as well as provide a base\r\n * implementation so that new default implementations can be added without breaking all plugins.\r\n */\r\nvar BaseTelemetryPlugin = /** @class */ (function () {\r\n    function BaseTelemetryPlugin() {\r\n        var _self = this; // Setting _self here as it's used outside of the dynamicProto as well\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _isinitialized;\r\n        var _rootCtx; // Used as the root context, holding the current config and initialized core\r\n        var _nextPlugin; // Used for backward compatibility where plugins don't call the main pipeline\r\n        var _unloadHandlerContainer;\r\n        var _hookContainer;\r\n        _initDefaults();\r\n        dynamicProto(BaseTelemetryPlugin, _self, function (_self) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                _setDefaults(config, core, pluginChain);\r\n                _isinitialized = true;\r\n            };\r\n            _self[_DYN_TEARDOWN /* @min:%2eteardown */] = function (unloadCtx, unloadState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (unloadCtx && core !== unloadCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing as either the plugin is not initialized or was not initialized by the current core\r\n                    return;\r\n                }\r\n                var result;\r\n                var unloadDone = false;\r\n                var theUnloadCtx = unloadCtx || createProcessTelemetryUnloadContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUnloadState = unloadState || {\r\n                    reason: 0 /* TelemetryUnloadReason.ManualTeardown */,\r\n                    isAsync: false\r\n                };\r\n                function _unloadCallback() {\r\n                    if (!unloadDone) {\r\n                        unloadDone = true;\r\n                        _unloadHandlerContainer.run(theUnloadCtx, unloadState);\r\n                        _hookContainer.run(theUnloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]());\r\n                        if (result === true) {\r\n                            theUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n                        }\r\n                        _initDefaults();\r\n                    }\r\n                }\r\n                if (!_self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] || _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */](theUnloadCtx, theUnloadState, _unloadCallback) !== true) {\r\n                    _unloadCallback();\r\n                }\r\n                else {\r\n                    // Tell the caller that we will be calling processNext()\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_UPDATE /* @min:%2eupdate */] = function (updateCtx, updateState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (updateCtx && core !== updateCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing\r\n                    return;\r\n                }\r\n                var result;\r\n                var updateDone = false;\r\n                var theUpdateCtx = updateCtx || createProcessTelemetryUpdateContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUpdateState = updateState || {\r\n                    reason: 0 /* TelemetryUpdateReason.Unknown */\r\n                };\r\n                function _updateCallback() {\r\n                    if (!updateDone) {\r\n                        updateDone = true;\r\n                        _setDefaults(theUpdateCtx.getCfg(), theUpdateCtx.core(), theUpdateCtx[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n                    }\r\n                }\r\n                if (!_self._doUpdate || _self._doUpdate(theUpdateCtx, theUpdateState, _updateCallback) !== true) {\r\n                    _updateCallback();\r\n                }\r\n                else {\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            proxyFunctionAs(_self, \"_addUnloadCb\", function () { return _unloadHandlerContainer; }, \"add\");\r\n            proxyFunctionAs(_self, \"_addHook\", function () { return _hookContainer; }, \"add\");\r\n            objDefine(_self, \"_unloadHooks\", { g: function () { return _hookContainer; } });\r\n        });\r\n        // These are added after the dynamicProto so that are not moved to the prototype\r\n        _self[_DYN_DIAG_LOG /* @min:%2ediagLog */] = function (itemCtx) {\r\n            return _getTelCtx(itemCtx)[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n        };\r\n        _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () {\r\n            return _isinitialized;\r\n        };\r\n        _self.setInitialized = function (isInitialized) {\r\n            _isinitialized = isInitialized;\r\n        };\r\n        // _self.getNextPlugin = () => DO NOT IMPLEMENT\r\n        // Sub-classes of this base class *should* not be relying on this value and instead\r\n        // should use processNext() function. If you require access to the plugin use the\r\n        // IProcessTelemetryContext.getNext().getPlugin() while in the pipeline, Note getNext() may return null.\r\n        _self[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] = function (next) {\r\n            _nextPlugin = next;\r\n        };\r\n        _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = function (env, itemCtx) {\r\n            if (itemCtx) {\r\n                // Normal core execution sequence\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n            }\r\n            else if (_nextPlugin && isFunction(_nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Looks like backward compatibility or out of band processing. And as it looks\r\n                // like a ITelemetryPlugin or ITelemetryPluginChain, just call processTelemetry\r\n                _nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, null);\r\n            }\r\n        };\r\n        _self._getTelCtx = _getTelCtx;\r\n        function _getTelCtx(currentCtx) {\r\n            if (currentCtx === void 0) { currentCtx = null; }\r\n            var itemCtx = currentCtx;\r\n            if (!itemCtx) {\r\n                var rootCtx = _rootCtx || createProcessTelemetryContext(null, {}, _self[STR_CORE /* @min:%2ecore */]);\r\n                // tslint:disable-next-line: prefer-conditional-expression\r\n                if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                    // Looks like a chain object\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin[strGetPlugin]);\r\n                }\r\n                else {\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin);\r\n                }\r\n            }\r\n            return itemCtx;\r\n        }\r\n        function _setDefaults(config, core, pluginChain) {\r\n            // Make sure the extensionConfig exists and the config is dynamic\r\n            createDynamicConfig(config, defaultValues, safeGetLogger(core));\r\n            if (!pluginChain && core) {\r\n                // Get the first plugin from the core\r\n                pluginChain = core[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */]()[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n            }\r\n            var nextPlugin = _nextPlugin;\r\n            if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                // If it looks like a proxy/chain then get the plugin\r\n                nextPlugin = _nextPlugin[strGetPlugin]();\r\n            }\r\n            // Support legacy plugins where core was defined as a property\r\n            _self[STR_CORE /* @min:%2ecore */] = core;\r\n            _rootCtx = createProcessTelemetryContext(pluginChain, config, core, nextPlugin);\r\n        }\r\n        function _initDefaults() {\r\n            _isinitialized = false;\r\n            _self[STR_CORE /* @min:%2ecore */] = null;\r\n            _rootCtx = null;\r\n            _nextPlugin = null;\r\n            _hookContainer = createUnloadHookContainer();\r\n            _unloadHandlerContainer = createUnloadHandlerContainer();\r\n        }\r\n    }\r\n// Removed Stub for BaseTelemetryPlugin.prototype.initialize.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.teardown.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.update.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addUnloadCb.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseTelemetryPlugin.__ieDyn=1;\n\n    return BaseTelemetryPlugin;\r\n}());\r\nexport { BaseTelemetryPlugin };\r\n//# sourceMappingURL=BaseTelemetryPlugin.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar _a;\r\nimport { getGlobal, objCreate, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\n;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!objHasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && objHasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || objHasOwnProperty(target, funcName)) && funcName !== str__Proto && funcName !== Prototype);\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throwTypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = objCreate(null);\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = objCreate(null);\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && objHasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || objCreate(null);\r\n        instFunc = (instFuncTable[proto[DynClassName]] || objCreate(null))[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !objHasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || objCreate(null);\r\n        if (!_isObjectOrArrayPrototype(instFuncTable)) {\r\n            var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || objCreate(null)); // fetch and assign if as it may not exist yet\r\n            // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n            }\r\n            if (!_isObjectOrArrayPrototype(instFuncs_1)) {\r\n                _forEachProp(target, function (name) {\r\n                    // Only add overridden functions\r\n                    if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                        // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                        instFuncs_1[name] = target[name];\r\n                        delete target[name];\r\n                        // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                        if (!objHasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                            proto[name] = _createDynamicPrototype(proto, name);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (objHasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nexport default function dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!objHasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (objHasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\r\n//# sourceMappingURL=DynamicProto.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class VariablesView {\n    public static Current: VariablesView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private variablesJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('VariablesView.constructor Started');\n        Telemetry.Current.send('VariablesView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('VariablesView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('VariablesView.loadData Started');\n        Telemetry.Current.send('VariablesView.loadData.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getVariables();\n        if (result.isSuccessful) {\n            this.variablesJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('VariablesView.renderHtml Started');\n        Telemetry.Current.send('VariablesView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('VariablesView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('VariablesView.render Started');\n        Telemetry.Current.send('VariablesView.render.called');\n\n        if (VariablesView.Current) {\n            VariablesView.Current._panel.reveal(vscode.ViewColumn.One);\n            VariablesView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"variablesView\", \"Variables\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            VariablesView.Current = new VariablesView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('VariablesView.dispose Started');\n        Telemetry.Current.send('VariablesView.dispose.called');\n\n        VariablesView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('VariablesView._getWebviewContent Started');\n        Telemetry.Current.send('VariablesView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from variables data\n        let tableRows = '';\n        if (this.variablesJson && this.variablesJson.variables) {\n            for (const variable of this.variablesJson.variables) {\n                const key = variable.key || 'N/A';\n                const value = variable.val || 'N/A';\n                const description = variable.description || '';\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(key)}</td>\n                    <td><code>${this._escapeHtml(value)}</code></td>\n                    <td>${this._escapeHtml(description)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Variables</title>\n      </head>\n      <body>  \n        <h2>Airflow Variables</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-variables\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"3\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No variables found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('VariablesView._setWebviewMessageListener Started');\n        Telemetry.Current.send('VariablesView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('VariablesView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-variables\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","import * as vscode from 'vscode';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class GetTodayTool implements vscode.LanguageModelTool<void> {\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GetTodayTool.invoke');\n        \n        const today = new Date();\n        \n        // Format: YYYY-MM-DD\n        const formattedDate = today.toISOString().split('T')[0];\n        \n        // Additional formats for user convenience\n        const dayOfWeek = today.toLocaleDateString('en-US', { weekday: 'long' });\n        const fullDate = today.toLocaleDateString('en-US', { \n            weekday: 'long', \n            year: 'numeric', \n            month: 'long', \n            day: 'numeric' \n        });\n\n        const result = `## Today's Date\n\n**ISO Format:** ${formattedDate}\n**Full Date:** ${fullDate}\n**Day of Week:** ${dayOfWeek}\n\n*Use the ISO format (${formattedDate}) when filtering DAG runs or working with date ranges.*`;\n\n        return new vscode.LanguageModelToolResult([\n            new vscode.LanguageModelTextPart(result)\n        ]);\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Getting current system date...'\n        };\n    }\n}\n","/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nimport C from 'fetch-blob'\nimport F from 'fetch-blob/file.js'\n\nvar {toStringTag:t,iterator:i,hasInstance:h}=Symbol,\nr=Math.random,\nm='append,set,get,getAll,delete,keys,values,entries,forEach,constructor'.split(','),\nf=(a,b,c)=>(a+='',/^(Blob|File)$/.test(b && b[t])?[(c=c!==void 0?c+'':b[t]=='File'?b.name:'blob',a),b.name!==c||b[t]=='blob'?new F([b],c,b):b]:[a,b+'']),\ne=(c,f)=>(f?c:c.replace(/\\r?\\n|\\r/g,'\\r\\n')).replace(/\\n/g,'%0A').replace(/\\r/g,'%0D').replace(/\"/g,'%22'),\nx=(n, a, e)=>{if(a.length<e){throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e} arguments required, but only ${a.length} present.`)}}\n\nexport const File = F\n\n/** @type {typeof globalThis.FormData} */\nexport const FormData = class FormData {\n#d=[];\nconstructor(...a){if(a.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}\nget [t]() {return 'FormData'}\n[i](){return this.entries()}\nstatic [h](o) {return o&&typeof o==='object'&&o[t]==='FormData'&&!m.some(m=>typeof o[m]!='function')}\nappend(...a){x('append',arguments,2);this.#d.push(f(...a))}\ndelete(a){x('delete',arguments,1);a+='';this.#d=this.#d.filter(([b])=>b!==a)}\nget(a){x('get',arguments,1);a+='';for(var b=this.#d,l=b.length,c=0;c<l;c++)if(b[c][0]===a)return b[c][1];return null}\ngetAll(a,b){x('getAll',arguments,1);b=[];a+='';this.#d.forEach(c=>c[0]===a&&b.push(c[1]));return b}\nhas(a){x('has',arguments,1);a+='';return this.#d.some(b=>b[0]===a)}\nforEach(a,b){x('forEach',arguments,1);for(var [c,d]of this)a.call(b,d,c,this)}\nset(...a){x('set',arguments,2);var b=[],c=!0;a=f(...a);this.#d.forEach(d=>{d[0]===a[0]?c&&(c=!b.push(a)):b.push(d)});c&&b.push(a);this.#d=b}\n*entries(){yield*this.#d}\n*keys(){for(var[a]of this)yield a}\n*values(){for(var[,a]of this)yield a}}\n\n/** @param {FormData} F */\nexport function formDataToBlob (F,B=C){\nvar b=`${r()}${r()}`.replace(/\\./g, '').slice(-28).padStart(32, '-'),c=[],p=`--${b}\\r\\nContent-Disposition: form-data; name=\"`\nF.forEach((v,n)=>typeof v=='string'\n?c.push(p+e(n)+`\"\\r\\n\\r\\n${v.replace(/\\r(?!\\n)|(?<!\\r)\\n/g, '\\r\\n')}\\r\\n`)\n:c.push(p+e(n)+`\"; filename=\"${e(v.name, 1)}\"\\r\\nContent-Type: ${v.type||\"application/octet-stream\"}\\r\\n\\r\\n`, v, '\\r\\n'))\nc.push(`--${b}--`)\nreturn new B(c,{type:\"multipart/form-data; boundary=\"+b})}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport { AirflowDag } from '../common/Types';\nimport { DagTreeView } from './DagTreeView';\n\nexport class DagTreeItem extends vscode.TreeItem {\n    public IsPaused: boolean;\n    public IsActive: boolean;\n    public DagId: string;\n    public Owners: string[];\n    public Tags: { name: string }[];\n    public ApiResponse: AirflowDag;\n    public FileToken: string;\n    public LatestDagRunId: string = '';\n    public LatestDagState: string = '';\n    private _IsFav: boolean = false;\n    public IsFiltered: boolean = false;\n\n    constructor(apiResponse: AirflowDag) {\n        super(apiResponse.dag_id);\n        this.ApiResponse = apiResponse;\n        this.DagId = apiResponse.dag_id;\n        this.IsActive = apiResponse.is_active;\n        this.IsPaused = apiResponse.is_paused;\n        this.Owners = apiResponse.owners;\n        this.Tags = apiResponse.tags;\n        this.FileToken = apiResponse.file_token;\n        this._IsFav = DagTreeView.Current.FavoriteDags.includes(this.DagId);\n\n        this.setContextValue();\n        this.refreshUI();\n    }\n\n    public set IsFav(value: boolean) {\n        this._IsFav = value;\n        this.setContextValue();\n    }\n\n    public get IsFav(): boolean {\n        return this._IsFav;\n    }\n\n    public isDagRunning(): boolean {\n        return (this.LatestDagState === 'queued' || this.LatestDagState === 'running');\n    }\n\n    public setContextValue() {\n        let contextValue = \"#\";\n        contextValue += this.IsFav ? \"IsFav#\" : \"!IsFav#\";\n        contextValue += this.IsPaused ? \"IsPaused#\" : \"!IsPaused#\";\n        contextValue += this.IsActive ? \"IsActive#\" : \"!IsActive#\";\n        contextValue += this.IsFiltered ? \"IsFiltered#\" : \"!IsFiltered#\";\n        contextValue += this.isDagRunning() ? \"IsRunning#\" : \"!IsRunning#\";\n\n        this.contextValue = contextValue;\n    }\n\n    public refreshUI() {\n\n        if (this.IsPaused) {\n            this.iconPath = new vscode.ThemeIcon('circle-outline', new vscode.ThemeColor('disabledForeground'));\n            this.ApiResponse.is_paused = true;\n        }\n        else {\n            //\"queued\" \"running\" \"success\" \"failed\"\n            if (this.LatestDagState === 'queued') {\n                this.iconPath = new vscode.ThemeIcon('loading~spin', new vscode.ThemeColor('charts.yellow'));\n            }\n            else if (this.LatestDagState === 'running') {\n                this.iconPath = new vscode.ThemeIcon('loading~spin', new vscode.ThemeColor('charts.blue'));\n            }\n            else if (this.LatestDagState === 'success') {\n                this.iconPath = new vscode.ThemeIcon('check', new vscode.ThemeColor('testing.iconPassed'));\n            }\n            else if (this.LatestDagState === 'failed') {\n                this.iconPath = new vscode.ThemeIcon('error', new vscode.ThemeColor('testing.iconFailed'));\n            }\n            else {\n                this.iconPath = new vscode.ThemeIcon('circle-filled', new vscode.ThemeColor('charts.gray'));\n            }\n            this.ApiResponse.is_paused = false;\n        }\n        \n        // Update context value to reflect current running state\n        this.setContextValue();\n    }\n\n    public doesFilterMatch(filterString: string): boolean {\n        let words: string[] = filterString.split(',');\n        words = words.map(word => word.trim());\n\n        this.IsFiltered = false;\n        for (const word of words) {\n            if (this.DagId.includes(word)) { this.IsFiltered = true; break; }\n            if (this.Owners.includes(word))  { this.IsFiltered = true; break; }\n\n            for (const t of this.Tags) {\n                if (t.name.includes(word)) { this.IsFiltered = true; break; }\n            }\n        }\n        \n        return this.IsFiltered;\n    }\n}","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nvar _maxHooks;\r\nvar _hookAddMonitor;\r\n/**\r\n * Test hook for setting the maximum number of unload hooks and calling a monitor function when the hooks are added or removed\r\n * This allows for automatic test failure when the maximum number of unload hooks is exceeded\r\n * @param maxHooks - The maximum number of unload hooks\r\n * @param addMonitor - The monitor function to call when hooks are added or removed\r\n */\r\nexport function _testHookMaxUnloadHooksCb(maxHooks, addMonitor) {\r\n    _maxHooks = maxHooks;\r\n    _hookAddMonitor = addMonitor;\r\n}\r\n/**\r\n * Create a IUnloadHookContainer which can be used to remember unload hook functions to be executed during the component unloading\r\n * process.\r\n * @returns A new IUnloadHookContainer instance\r\n */\r\nexport function createUnloadHookContainer() {\r\n    var _hooks = [];\r\n    function _doUnload(logger) {\r\n        var oldHooks = _hooks;\r\n        _hooks = [];\r\n        // Remove all registered unload hooks\r\n        arrForEach(oldHooks, function (fn) {\r\n            // allow either rm or remove callback function\r\n            try {\r\n                (fn.rm || fn.remove).call(fn);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unloading:\" + dumpObj(e));\r\n            }\r\n        });\r\n        if (_maxHooks && oldHooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n            _hookAddMonitor ? _hookAddMonitor(\"doUnload\", oldHooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n        }\r\n    }\r\n    function _addHook(hooks) {\r\n        if (hooks) {\r\n            arrAppend(_hooks, hooks);\r\n            if (_maxHooks && _hooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n                _hookAddMonitor ? _hookAddMonitor(\"Add\", _hooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        run: _doUnload,\r\n        add: _addHook\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHookContainer.js.map","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { DagView } from '../dag/DagView';\nimport { Session } from '../common/Session';\nimport { DagLogView } from './DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagRunView {\n    public static Current: DagRunView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagRunsJson: any;\n    \n    // Filters\n    private selectedDagId: string = '';\n    private selectedStartDate: string = ui.toISODateString(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)); // Default to 7 days ago\n    private selectedEndDate: string = ui.toISODateString(new Date());\n    private selectedStatus: string = '';\n    private allDagIds: string[] = [];\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('DagRunView.constructor Started');\n        Telemetry.Current.send('DagRunView.constructor.called');\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DagRunView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('DagRunView.loadData Started');\n        Telemetry.Current.send('DagRunView.loadData.called');\n\t\tif (!Session.Current.Api) { return; }\n        // Fetch all DAGs to populate dag_id filter\n        const dagsResult = await Session.Current.Api.getDagList();\n        if (dagsResult.isSuccessful && Array.isArray(dagsResult.result)) {\n            this.allDagIds = dagsResult.result.map((dag: any) => dag.dag_id).sort();\n            \n            // If no DAG is selected yet, select the first one\n            if (!this.selectedDagId && this.allDagIds.length > 0) {\n                this.selectedDagId = this.allDagIds[0];\n            }\n        }\n\n        // Fetch DAG runs for the selected DAG and date range\n        if (this.selectedDagId) {\n            const result = await Session.Current.Api.getDagRunHistory(this.selectedDagId);\n            if (result.isSuccessful && result.result && result.result.dag_runs) {\n                // Filter runs by date range on the client side\n                const startDateTime = new Date(this.selectedStartDate + 'T00:00:00Z').getTime();\n                const endDateTime = new Date(this.selectedEndDate + 'T23:59:59Z').getTime();\n                \n                this.dagRunsJson = result.result.dag_runs.filter((run: any) => {\n                    if (run.start_date) {\n                        const runTime = new Date(run.start_date).getTime();\n                        return runTime >= startDateTime && runTime <= endDateTime;\n                    }\n                    return false;\n                });\n            }\n        } else {\n            this.dagRunsJson = [];\n        }\n\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DagRunView.renderHtml Started');\n        Telemetry.Current.send('DagRunView.renderHtml.called');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('DagRunView.renderHtml Completed');\n    }\n\n    public static render(dagId?: string, startDate?: string, endDate?: string, status?: string) {\n        ui.logToOutput('DagRunView.render Started');\n        Telemetry.Current.send('DagRunView.render.called');\n        if (DagRunView.Current) {\n            // Apply optional filter parameters\n            if (dagId) { DagRunView.Current.selectedDagId = dagId; }\n            if (startDate) { DagRunView.Current.selectedStartDate = startDate; }\n            if (endDate) { DagRunView.Current.selectedEndDate = endDate; }\n            if (status) { DagRunView.Current.selectedStatus = status; }\n            DagRunView.Current._panel.reveal(vscode.ViewColumn.One);\n            DagRunView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagRunView\", \"DAG Run History\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            DagRunView.Current = new DagRunView(panel);\n            // Apply optional filter parameters after creation\n            if (dagId) { DagRunView.Current.selectedDagId = dagId; }\n            if (startDate) { DagRunView.Current.selectedStartDate = startDate; }\n            if (endDate) { DagRunView.Current.selectedEndDate = endDate; }\n            if (status) { DagRunView.Current.selectedStatus = status; }\n            // Reload data with new parameters if any were provided\n            if (dagId || startDate || endDate || status) {\n                DagRunView.Current.loadData();\n            }\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('DagRunView.dispose Started');\n        Telemetry.Current.send('DagRunView.dispose.called');\n        DagRunView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagRunView._getWebviewContent Started');\n        Telemetry.Current.send('DagRunView._getWebviewContent.called');\n\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Filter DAG runs based on selected status\n        let filteredRuns: any[] = [];\n        if (this.dagRunsJson && Array.isArray(this.dagRunsJson)) {\n            filteredRuns = this.dagRunsJson.filter((run: any) => {\n                // Filter by status\n                if (this.selectedStatus && run.state !== this.selectedStatus) {\n                    return false;\n                }\n                return true;\n            });\n        }\n\n        // Build table rows\n        let tableRows = '';\n        filteredRuns.forEach((run: any) => {\n            const dagId = run.dag_id || 'N/A';\n            const status = run.state || 'N/A';\n            const startDate = run.start_date ? ui.toISODateTimeString(new Date(run.start_date)) : 'N/A';\n            const duration = run.start_date && run.end_date ? ui.getDuration(new Date(run.start_date), new Date(run.end_date)) : 'Running';\n            const config = run.conf ? JSON.stringify(run.conf) : '{}';\n            const note = run.note || '';\n            const dagRunId = run.dag_run_id || '';\n\n            tableRows += `\n            <tr class=\"table-row\">\n                <td><a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-link\">${this._escapeHtml(dagId)}</a></td>\n                <td>\n                    <div style=\"display: flex; align-items: center;\">\n                        <div class=\"state-indicator state-${status}\" title=\"${this._escapeHtml(status)}\"></div>\n                        <span>${this._escapeHtml(status)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class=\"action-links\">\n                        <a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-log-link link-button\">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(startDate)}</td>\n                <td><span class=\"duration-badge\">${this._escapeHtml(duration)}</span></td>\n                <td><div class=\"code-block\" style=\"max-height: 50px; overflow: hidden; font-size: 11px;\">${this._escapeHtml(config)}</div></td>\n                <td>${this._escapeHtml(note)}</td>\n            </tr>`;\n        });\n\n        // Build dag_id filter options\n        const dagIdOptions = this.allDagIds.map(id => \n            `<option value=\"${this._escapeHtml(id)}\" ${id === this.selectedDagId ? 'selected' : ''}>${this._escapeHtml(id)}</option>`\n        ).join('');\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Add state-specific colors here if standard style.css doesn't cover them all, \n               but assuming style.css has .state-* classes or DagView style block logic is global enough?\n               Actually DagView styles were inline in the file. I need to include them or rely on style.css.\n               Assuming style.css handles basic colors, but let's add the indicator styles to be safe \n               since they were in DagView's style block. */\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>DAG Run History</title>\n      </head>\n      <body>  \n        <h2>DAG Run History</h2>\n        \n        <div class=\"filters\">\n            <div class=\"filter-group\">\n                <label>DAG ID</label>\n                <select id=\"filter-dag-id\">\n                    ${dagIdOptions}\n                </select>\n            </div>\n            <div class=\"filter-group\">\n                <label>Start Date</label>\n                <input type=\"date\" id=\"filter-start-date\" value=\"${this.selectedStartDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>End Date</label>\n                <input type=\"date\" id=\"filter-end-date\" value=\"${this.selectedEndDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>Status</label>\n                <select id=\"filter-status\">\n                    <option value=\"\">All</option>\n                    <option value=\"success\" ${this.selectedStatus === 'success' ? 'selected' : ''}>Success</option>\n                    <option value=\"failed\" ${this.selectedStatus === 'failed' ? 'selected' : ''}>Failed</option>\n                    <option value=\"running\" ${this.selectedStatus === 'running' ? 'selected' : ''}>Running</option>\n                    <option value=\"queued\" ${this.selectedStatus === 'queued' ? 'selected' : ''}>Queued</option>\n                    <option value=\"upstream_failed\" ${this.selectedStatus === 'upstream_failed' ? 'selected' : ''}>Upstream Failed</option>\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"7\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            document.getElementById('filter-start-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-start-date', startDate: e.target.value });\n            });\n\n            document.getElementById('filter-end-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-end-date', endDate: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'deferred': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagRunView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DagRunView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('DagRunView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"filter-dag-id\":\n                        this.selectedDagId = message.dagId;\n                        this.loadData();\n                        return;\n                    case \"filter-start-date\":\n                        this.selectedStartDate = message.startDate;\n                        this.loadData();\n                        return;\n                    case \"filter-end-date\":\n                        this.selectedEndDate = message.endDate;\n                        this.loadData();\n                        return;\n                    case \"filter-status\":\n                        this.selectedStatus = message.status;\n                        this.renderHtml();\n                        return;\n                    case \"open-dag-view\":\n                        // Open DagView with specific dag and run\n                        if (!Session.Current.Api) { return; }\n                        if (Session.Current.Api && message.dagId) {\n                            DagView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                    case \"view-dag-log\":\n                        if (message.dagId) {\n                            DagLogView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/**\n * ListActiveDagsTool - Language Model Tool for listing active DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ListActiveDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Listing active DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('ListActiveDagsTool.invoke');\n        \n        try {\n            const dags = await this.client.getDags(false); // false = active (not paused)\n\n            if (dags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No active DAGs found.\")\n                ]);\n            }\n\n            let message = `##  Active DAGs (${dags.length})\\n\\n`;\n            dags.forEach(dag => {\n                message += `- **${dag.dag_id}**`;\n                if (dag.description) {\n                    message += `: ${dag.description}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(dags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('ListActiveDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to list active DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToDagLogViewTool - Language Model Tool for opening the DAG Log View panel\n * \n * This tool allows users to open the DagLogView for a specific DAG,\n * optionally providing dagRunId, taskId, and tryNumber.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagLogView } from '../report/DagLogView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for opening DAG Log View\n */\nexport interface IGoToDagLogViewParams {\n    dagId: string;\n    dagRunId?: string;\n    taskId?: string;\n    tryNumber?: number;\n}\n\n/**\n * GoToDagLogViewTool - Implements vscode.LanguageModelTool for opening DAG Log View\n * \n * This tool opens the DagLogView panel to display logs for tasks.\n */\nexport class GoToDagLogViewTool implements vscode.LanguageModelTool<IGoToDagLogViewParams> {\n\n    constructor() {\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagLogViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, dagRunId, taskId, tryNumber } = options.input;\n\n        let message = `Opening DAG Log View for: **${dagId}**`;\n        if (dagRunId) {\n            message += `\\nDAG Run ID: **${dagRunId}**`;\n        }\n        if (taskId) {\n            message += `\\nTask ID: **${taskId}**`;\n        }\n        if (tryNumber) {\n            message += `\\nTry Number: **${tryNumber}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagLogViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId, taskId, tryNumber } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagLogViewTool.invoke');\n        \n        try {\n\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Open the DagLogView with the specified parameters\n            DagLogView.render(dagId, dagRunId, taskId, tryNumber);\n\n            let successMessage = ` Opened DAG Log View for: **${dagId}**`;\n            if (dagRunId) successMessage += `, Run: **${dagRunId}**`;\n            if (taskId) successMessage += `, Task: **${taskId}**`;\n            if (tryNumber) successMessage += `, Try: **${tryNumber}**`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagLogViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG Log View for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:fs\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:path\");","import { statSync, createReadStream, promises as fs } from 'node:fs'\nimport { basename } from 'node:path'\nimport DOMException from 'node-domexception'\n\nimport File from './file.js'\nimport Blob from './index.js'\n\nconst { stat } = fs\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst blobFromSync = (path, type) => fromBlob(statSync(path), path, type)\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<Blob>}\n */\nconst blobFrom = (path, type) => stat(path).then(stat => fromBlob(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<File>}\n */\nconst fileFrom = (path, type) => stat(path).then(stat => fromFile(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst fileFromSync = (path, type) => fromFile(statSync(path), path, type)\n\n// @ts-ignore\nconst fromBlob = (stat, path, type = '') => new Blob([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], { type })\n\n// @ts-ignore\nconst fromFile = (stat, path, type = '') => new File([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], basename(path), { type, lastModified: stat.mtimeMs })\n\n/**\n * This is a blob backed up by a file on the disk\n * with minium requirement. Its wrapped around a Blob as a blobPart\n * so you have no direct access to this.\n *\n * @private\n */\nclass BlobDataItem {\n  #path\n  #start\n\n  constructor (options) {\n    this.#path = options.path\n    this.#start = options.start\n    this.size = options.size\n    this.lastModified = options.lastModified\n  }\n\n  /**\n   * Slicing arguments is first validated and formatted\n   * to not be out of range by Blob.prototype.slice\n   */\n  slice (start, end) {\n    return new BlobDataItem({\n      path: this.#path,\n      lastModified: this.lastModified,\n      size: end - start,\n      start: this.#start + start\n    })\n  }\n\n  async * stream () {\n    const { mtimeMs } = await stat(this.#path)\n    if (mtimeMs > this.lastModified) {\n      throw new DOMException('The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.', 'NotReadableError')\n    }\n    yield * createReadStream(this.#path, {\n      start: this.#start,\n      end: this.#start + this.size - 1\n    })\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n}\n\nexport default blobFromSync\nexport { File, Blob, blobFrom, blobFromSync, fileFrom, fileFromSync }\n","/**\n * GoToConfigsViewTool - Language Model Tool for opening the Configs view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ConfigsView } from '../admin/ConfigsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToConfigsViewTool - Opens the Configs panel\n */\nexport class GoToConfigsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Configs View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToConfigsViewTool.invoke');\n        \n        try {\n\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ConfigsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Configs View - showing Airflow configuration settings (airflow.cfg)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToConfigsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Configs View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GetFailedRunsTool - Language Model Tool for monitoring failed DAG runs\n * \n * This tool implements a read-only observability action that retrieves\n * failed DAG runs from Airflow. It does not require user confirmation\n * since it's a non-destructive operation.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter, IFailedRunSummary } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying failed runs\n */\nexport interface IQueryRunsParams {\n    timeRangeHours?: number;\n    dagIdFilter?: string;\n}\n\n/**\n * GetFailedRunsTool - Implements vscode.LanguageModelTool for monitoring\n */\nexport class GetFailedRunsTool implements vscode.LanguageModelTool<IQueryRunsParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     * \n     * Since this is a read-only monitoring tool, we don't need extensive\n     * confirmation dialogs. This method can return undefined or a simple message.\n     * \n     * @param options - Contains the parsed input parameters\n     * @param token - Cancellation token\n     * @returns PreparedToolInvocation or undefined\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IQueryRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const timeRange = options.input.timeRangeHours || 24;\n        const dagFilter = options.input.dagIdFilter;\n\n        const message = dagFilter\n            ? `Querying failed runs for DAG '${dagFilter}' (last ${timeRange} hours)`\n            : `Querying all failed runs (last ${timeRange} hours)`;\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    /**\n     * Execute the query for failed DAG runs\n     * \n     * @param options - Contains the validated input parameters\n     * @param token - Cancellation token\n     * @returns LanguageModelToolResult with failed runs data\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IQueryRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const timeRange = options.input.timeRangeHours || 24;\n        const dagFilter = options.input.dagIdFilter;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetFailedRunsTool.invoke');\n\n        try {\n            // Call the mock API client to get failed runs\n            const failedRuns = await this.client.queryFailedRuns(timeRange, dagFilter);\n\n            // Format the response for the LLM\n            if (failedRuns.length === 0) {\n                const noFailuresMessage = dagFilter\n                    ? ` No failed runs found for DAG '${dagFilter}' in the last ${timeRange} hours.`\n                    : ` No failed runs found in the last ${timeRange} hours. All DAGs are healthy!`;\n\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(noFailuresMessage)\n                ]);\n            }\n\n            // Build a detailed summary\n            let summaryMessage = `##  Failed DAG Runs Report\\n\\n`;\n            summaryMessage += `**Time Range:** Last ${timeRange} hours\\n`;\n            if (dagFilter) {\n                summaryMessage += `**DAG Filter:** ${dagFilter}\\n`;\n            }\n            summaryMessage += `**Total Failed Runs:** ${failedRuns.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details\n            failedRuns.forEach((run: IFailedRunSummary, index: number) => {\n                summaryMessage += `### ${index + 1}. ${run.dag_id}\\n\\n`;\n                summaryMessage += `- **Run ID:** \\`${run.dag_run_id}\\`\\n`;\n                summaryMessage += `- **State:** ${run.state}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date}\\n`;\n                summaryMessage += `- **Logical Date:** ${run.logical_date}\\n`;\n                if (run.start_date) {\n                    summaryMessage += `- **Started:** ${run.start_date}\\n`;\n                }\n                if (run.end_date) {\n                    summaryMessage += `- **Ended:** ${run.end_date}\\n`;\n                }\n                if (run.error_message) {\n                    summaryMessage += `- **Error:** ${run.error_message}\\n`;\n                }\n                summaryMessage += `\\n`;\n            });\n\n            // Also include raw JSON for LLM processing\n            summaryMessage += `\\n---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(failedRuns, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            // Handle errors gracefully\n            const errorMessage = `\n Failed to Query DAG Runs\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The Airflow server is accessible\n- You have the necessary permissions\n- The time range and filters are valid\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetFailedRunsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ConnectionsView {\n    public static Current: ConnectionsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private connectionsJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ConnectionsView.constructor Started');\n        Telemetry.Current.send('ConnectionsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ConnectionsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ConnectionsView.loadData Started');\n        Telemetry.Current.send('ConnectionsView.loadData.called');\n\n        const result = await Session.Current.Api.getConnections();\n        if (result.isSuccessful) {\n            this.connectionsJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ConnectionsView.renderHtml Started');\n        Telemetry.Current.send('ConnectionsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ConnectionsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ConnectionsView.render Started');\n        Telemetry.Current.send('ConnectionsView.render.called');\n\n        if (ConnectionsView.Current) {\n            ConnectionsView.Current._panel.reveal(vscode.ViewColumn.One);\n            ConnectionsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"connectionsView\", \"Connections\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ConnectionsView.Current = new ConnectionsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ConnectionsView.dispose Started');\n        Telemetry.Current.send('ConnectionsView.dispose.called');\n\n        ConnectionsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ConnectionsView._getWebviewContent Started');\n        Telemetry.Current.send('ConnectionsView._getWebviewContent.called');\n\n        const toolkitUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode\",\n            \"webview-ui-toolkit\",\n            \"dist\",\n            \"toolkit.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        let tableRows = '';\n        if (this.connectionsJson && this.connectionsJson.connections && Array.isArray(this.connectionsJson.connections)) {\n            for (const conn of this.connectionsJson.connections) {\n                const connId = conn.conn_id || 'N/A';\n                const connType = conn.conn_type || 'N/A';\n                const host = conn.host || '';\n                const port = conn.port || '';\n                const schema = conn.schema || '';\n                \n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(connId)}</td>\n                    <td><span class=\"tag\">${this._escapeHtml(connType)}</span></td>\n                    <td>${this._escapeHtml(host)}</td>\n                    <td>${this._escapeHtml(String(port))}</td>\n                    <td>${this._escapeHtml(schema)}</td>\n                </tr>`;\n            }\n        } else if (this.connectionsJson) {\n             // Fallback if structure is different\n             tableRows = `<tr><td colspan=\"5\"><pre>${JSON.stringify(this.connectionsJson, null, 2)}</pre></td></tr>`;\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${toolkitUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 11px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n        </style>\n        <title>Connections</title>\n      </head>\n      <body>  \n        <h2>Airflow Connections</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-connections\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Conn ID</th>\n                    <th>Type</th>\n                    <th>Host</th>\n                    <th>Port</th>\n                    <th>Schema</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${tableRows || '<tr><td colspan=\"5\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No connections found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        if (!text) return '';\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ConnectionsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ConnectionsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ConnectionsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-connections\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","module.exports = require(\"fs\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".extension.js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from 'vscode';\nimport * as ui from './common/UI';\nimport { Session } from './common/Session';\nimport { DagTreeView } from './dag/DagTreeView';\nimport { DagTreeItem } from './dag/DagTreeItem';\nimport { AdminTreeView } from './admin/AdminTreeView';\nimport { ReportTreeView } from './report/ReportTreeView';\nimport { AIHandler } from './language_tools/AIHandler';\nimport { Telemetry } from './common/Telemetry';\nimport { version } from 'os';\n\n// this method is called when your extension is activated\n// your extension is activated the very first time the command is executed\nexport function activate(context: vscode.ExtensionContext) {\n\tui.logToOutput('Extension activation started');\n\n\tnew Telemetry(context);\n\tconst properties = {\n\t\textensionVersion: context.extension.packageJSON.version, \n\t\tvscodeVersion: vscode.version, \n\t\tosVersion: version(), \n\t\tplatform: process.platform, \n\t\tappName: vscode.env.appName, \n\t\tappHost: vscode.env.appHost,\n\t\tlanguage: vscode.env.language\n\t};\n\tTelemetry.Current.send('extension.activate.called', properties);\n\n\tnew Session(context);\n\tnew AIHandler();\n\n\tlet dagTreeView:DagTreeView = new DagTreeView();\n\tlet adminTreeView:AdminTreeView = new AdminTreeView();\n\tlet reportTreeView:ReportTreeView = new ReportTreeView();\n\n\t// Register the Admin Tree View\n\tvscode.window.registerTreeDataProvider('adminTreeView', adminTreeView);\n\tui.logToOutput('Admin Tree View registered');\n\n\t// Register the Report Tree View\n\tvscode.window.registerTreeDataProvider('reportTreeView', reportTreeView);\n\tui.logToOutput('Report Tree View registered');\n\n\t// register commands and keep disposables so they are cleaned up on deactivate\n\tconst commands: vscode.Disposable[] = [];\n\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.refreshServer', () => { dagTreeView.refresh(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.addServer', () => { dagTreeView.addServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.removeServer', () => { dagTreeView.removeServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.connectServer', () => { dagTreeView.connectServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.clearServers', () => { dagTreeView.clearServers(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.filter', () => { dagTreeView.filter(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showOnlyActive', () => { dagTreeView.showOnlyActive(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showOnlyFavorite', () => { dagTreeView.showOnlyFavorite(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagView', (node: DagTreeItem) => { dagTreeView.viewDagView(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.triggerDag', (node: DagTreeItem) => { dagTreeView.triggerDag(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.triggerDagWithConfig', (node: DagTreeItem) => { dagTreeView.triggerDagWConfig(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.checkDagRunState', (node: DagTreeItem) => { dagTreeView.checkDagRunState(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.checkAllDagsRunState', () => { dagTreeView.checkAllDagsRunState(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.pauseDAG', (node: DagTreeItem) => { dagTreeView.pauseDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.unPauseDAG', (node: DagTreeItem) => { dagTreeView.unPauseDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.cancelDagRun', (node: DagTreeItem) => { dagTreeView.cancelDagRun(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.lastDAGRunLog', (node: DagTreeItem) => { dagTreeView.lastDAGRunLog(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.dagSourceCode', (node: DagTreeItem) => { dagTreeView.dagSourceCode(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showDagInfo', (node: DagTreeItem) => { dagTreeView.showDagInfo(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.addToFavDAG', (node: DagTreeItem) => { dagTreeView.addToFavDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.deleteFromFavDAG', (node: DagTreeItem) => { dagTreeView.deleteFromFavDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showDagView', (node: DagTreeItem) => { dagTreeView.viewDagView(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewConnections', () => { dagTreeView.viewConnections(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewVariables', () => { dagTreeView.viewVariables(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewProviders', () => { dagTreeView.viewProviders(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewConfigs', () => { dagTreeView.viewConfigs(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewPlugins', () => { dagTreeView.viewPlugins(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewServerHealth', () => { dagTreeView.viewServerHealth(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagRuns', () => { dagTreeView.viewDagRuns(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagRunHistory', () => { dagTreeView.viewDagRunHistory(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.AskAI', (node: DagTreeItem) => { AIHandler.Current.askAI(node.DagId, node.FileToken); }));\n\t\n\t// Support and feedback commands\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.donate', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/sponsors/necatiarslan')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.newFeaturesSurvey', () => { vscode.env.openExternal(vscode.Uri.parse('https://bit.ly/airflow-extension-survey')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.requestFeature', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=feature-request&template=feature_request.md')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.reportBug', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=bug&template=bug_report.md')); }));\n\t\n\tfor (const c of commands) { context.subscriptions.push(c); }\n\n\n\tAIHandler.Current.registerChatParticipant();\n\tAIHandler.Current.registerAiTools();\n\n\tTelemetry.Current?.send('extension.activated');\n\tui.logToOutput('Extension activation completed');\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() {\n\tui.logToOutput('Extension is now deactive!');\n}\n"],"names":["installedChunks","DagTreeView","FilterString","ShowOnlyActive","ShowOnlyFavorite","FavoriteDags","ui","logToOutput","Telemetry","Current","send","this","treeDataProvider","DagTreeDataProvider","view","vscode","window","createTreeView","showCollapseAll","loadState","Session","Context","subscriptions","push","dispose","setFilterMessage","refresh","dagStatusInterval","clearInterval","Api","dagList","withProgress","location","ProgressLocation","Window","title","async","progress","report","increment","loadDags","getImportErrors","viewDagView","node","DagView","render","DagId","addToFavDAG","IsFav","includes","deleteFromFavDAG","filter","d","createAndOpenTempFile","content","prefix","extension","tmpFile","tmp","fileSync","mode","postfix","fs","appendFileSync","name","openFile","startDagStatusInterval","setInterval","refreshRunningDagState","catch","err","handleTriggerSuccess","responseTrigger","LatestDagRunId","LatestDagState","refreshUI","MessageHub","DagTriggered","triggerDag","IsPaused","showWarningMessage","isDagRunning","result","isSuccessful","dagTreeView","noDagIsRunning","visibleDagList","getDagRun","undefined","triggerDagWConfig","triggerDagConfig","showInputBox","placeHolder","checkAllDagsRunState","checkDagRunState","notifyDagStateWithDagId","dagId","dagRunId","dagState","getLastDagRun","dag_run_id","state","pauseDAG","pauseDag","DagPaused","notifyDagPaused","notifyDagUnPaused","unPauseDAG","DagUnPaused","showInfoMessage","cancelDagRun","DagRunCancelled","lastDAGRunLog","DagLogView","dagSourceCode","getSourceCode","FileToken","showErrorMessage","showDagInfo","getDagInfo","JSON","stringify","filterStringTemp","value","saveState","showOnlyActive","showOnlyFavorite","addServer","apiUrlTemp","userNameTemp","passwordTemp","newServer","apiUrl","apiUserName","apiPassword","TestServer","AddServer","SetServer","removeServer","ServerList","length","items","map","s","selected","showQuickPick","canPickMany","selectedItems","split","RemoveServer","connectServer","server","GetServer","clearServers","ClearServers","getDagList","loadDagTreeItemsFromApiResponse","setViewTitle","loadLatestRunStatusForAllDags","visibleDags","slice","dagItem","runResult","error","Server","total_entries","showOutputMessage","globalState","update","message","getBoolenSign","variable","get","ShowOnlyActiveTemp","ShowOnlyFavoriteTemp","FavoriteDagsTemp","viewConnections","ConnectionsView","viewVariables","VariablesView","viewProviders","ProvidersView","viewConfigs","ConfigsView","viewPlugins","PluginsView","viewDagRuns","DailyDagRunView","viewDagRunHistory","DagRunView","viewServerHealth","ServerHealthView","_a","_b","_doc","strToGMTString","strToUTCString","strCookie","strExpires","strIsCookieUseDisabled","strDisableCookiesUsage","strConfigCookieMgr","_supportsCookies","_allowUaSameSite","_parsedCookieValue","_cookieCache","_globalCookieConfig","rootDefaultConfig","cookieCfg","fb","dfVal","path","enabled","ignoreCookies","blockedCookies","disableCookieDefer","cookieDomain","cookiePath","_getDoc","_isMgrEnabled","cookieMgr","isEnabled","_isIgnoredCookie","cookieMgrCfg","_isBlockedCookie","_isCfgEnabled","rootConfig","cookieMgrConfig","isCfgEnabled","cookieEnabled","createCookieMgr","logger","_path","_domain","unloadHandler","_enabled","_getCookieFn","_setCookieFn","_delCookieFn","_pendingCookies","_formatDeletionValue","values","_formatCookieValue","_removePendingCookie","i","n","cfg","details","setDf","ref","wasEnabled","getCookie","_getCookieValue","setCookie","_setCookieValue","delCookie","areCookiesSupported","pendingData","o","v","gblManager","setEnabled","set","maxAgeSec","domain","cookieValue","theValue","idx","_extractParts","_isIE","expireMs","expiry","Date","setTime","_formatDate","userAgent","protocol","_formatSetCookieValue","del","purge","unload","isAsync","rm","doc","e","exception","parts","thePart","theDate","func","theCookie","defaultValues","perfEvtsSendAll","_runScheduledListeners","asyncNotifications","h","callbacks","cb","fn","arg","_runListeners","listeners","callback","listener","NotificationManager","config","_listeners","_asyncNotifications","cfgHandler","_self","g","index","events","reason","sendType","sendReason","perfEvent","batch","cnt","rn_1","waiting","_finishUnload","asyncUnload","resolve","__ieDyn","TelemetryInitializerPlugin","_super","_id","_initializers","_this","call","_initDefaults","identifier","priority","_base","addTelemetryInitializer","telemetryInitializer","id","theInitializer","remove","initializer","_addInitializer","item","itemCtx","doNotSendItem","telemetryInitializersCount","_runInitializers","strValidationError","strSdkUnloadingError","defaultConfig","rdOnly","loggingLevelConsole","diagnosticLogInterval","_createPerfManager","core","notificationMgr","PerfManager","_isPluginPresent","thePlugin","plugins","exists","plugin","_deepMergeConfig","target","newValues","merge","key","_findWatcher","newWatcher","theListener","lp","w","l","AppInsightsCore","_configHandler","_isInitialized","_logger","_eventQueue","_notificationManager","_perfManager","_cfgPerfManager","_cookieManager","_pluginChain","_configExtensions","_channelConfig","_channels","_isUnloading","_telemetryInitializerPlugin","_internalLogsEventName","_evtNamespace","_unloadHandlers","_hookContainer","_debugListener","_traceCtx","_instrumentationKey","_cfgListeners","_extensions","_pluginVersionStringArr","_pluginVersionString","_activeStatus","_endpoint","_initInMemoMaxSize","_isStatusSet","_initTimer","_internalLogPoller","_internalLogPollerListening","_forceStopInternalLogPoller","_setStatus","INACTIVE","ACTIVE","_releaseQueues","releaseQueue","pollInternalLogs","_startLogPoller","alwaysStart","queue","_addUnloadHook","interval","isRunning","_flushInternalLogs","unref","_setPluginVersions","thePlugins","_addPluginVersions","ver","channels","newValue","updateCfg","join","DiagnosticLogger","newLogger","cfgExtensions","splice","_createTelCtx","theCtx","_getPluginChain","_initPluginChain","updateState","theExtensions","channelPriority","allExtensions","coreExtensions","extPriorities","ext","extPriority","_validateExtensions","rootCtx","_doUpdate","_getPlugin","pluginIdentifier","theExt","channelHosts","getChannel","host","pluginState","removeCb","pluginsToRemove","_removePlugins","removed","extensions","unloadState","removeComplete","unloadChain","unloadCtx","newConfigExtensions","newChannelConfig","newQueue","channel","logMessage","iKey","time","baseType","dataType","baseData","track","_flushChannels","callBack","cbTimeout","doneIterating","cbTimer","doCallback","iterate","flush","handled_1","updateCtx","_updateHook","_logOrThrowError","_notifyInvalidEvent","telemetryItem","manager","hooks","add","activeStatus","_setPendingStatus","notificationManager","prevCfgPerfMgr","rootCfg","initInMemoMaxSize","theConfig","ikey","instrumentationKey","endpointUrl","msg","promises","initTimeout","initTimeOut","allPromises","response","rejected","ikeyRes","endpointRes","_waitForInitPromises","_handleIKeyEndpointPromises","extCfg","configHandler","unloadContainer","debugListener","disableDbgExt","_initDebugListener","enablePerfMgr","createPerfMgr","apply","teeController","unloadHdl","_registerDelayedCfgListener","getChannels","controls","getNotifyMgr","getCookieMgr","setCookieMgr","setPerfMgr","perfMgr","eventCnt","eventQueue","event","eventName","unloadComplete","flushComplete","processUnloadCtx","_doUnload","run","addPlugin","replaceExisting","addCb","existingPlugin","_addPlugin","added","removedPlugins_1","newConfig","mergeExisting","oldCfg","_block","notify","evtNamespace","getTraceCtx","createNew","setTraceCtx","traceCtx","addUnloadHook","onCfgChange","handler","unloadHook","fnd","_createUnloadHook","getWParam","enableWParam","module","exports","require","_pureAssign","func1","func2","_pureRef","_primitiveTypes","UNDEF_VALUE","NULL_VALUE","EMPTY","FUNCTION","OBJECT","PROTOTYPE","__PROTO__","UNDEFINED","CONSTRUCTOR","SYMBOL","LENGTH","NAME","CALL","TO_STRING","GET_OWN_PROPERTY_DESCRIPTOR","ObjClass","Object","ObjProto","StrCls","String","StrProto","MathCls","Math","ArrCls","Array","ArrProto","ArrSlice","POLYFILL_TAG","POLYFILL_TYPE_NAME","safe","argArray","_createIs","theType","_createObjIs","theName","objToString","isUndefined","isNullOrUndefined","isStrictNullOrUndefined","isDefined","isString","isFunction","isObject","isArray","isDate","isNumber","isBoolean","isError","isPromiseLike","then","isTruthy","defValue","_returnNothing","_returnFalse","asString","ERROR_TYPE","dumpObj","object","format","propertyValueDump","objType","stack","replace","throwError","Error","throwTypeError","TypeError","_throwIfNullOrUndefined","obj","_throwIfNotString","objHasOwnProperty","prop","hasOwnProperty","_objGetOwnPropertyDescriptor$2","objHasOwn","polyObjHasOwn","objForEachKey","theObject","callbackfn","thisArg","arrForEach","theArray","len","_unwrapFunction","_unwrapFunctionWithPoly","funcName","clsProto","polyFunc","clsFn","theFunc","theArgs","arguments","_unwrapProp","propName","_objGetOwnPropertyDescriptor$1","propMap","c","objDefineProp","objDefineProperties","objDefine","propDesc","desc","_createProp","_createKeyValueMap","keyType","valueType","completeFn","writable","theMap","_assignMapValue","enumerable","objIsFrozen","_objFreeze","_doNothing","_getProto","objAssign","objKeys","_deepFreeze","val","visited","_key","propValue","objFreeze","objDeepFreeze","objGetPrototypeOf","createEnum","createEnumKeyMap","createTypeMap","mapClass","createSimpleMap","_globalCfg","_wellKnownSymbolMap","asyncIterator","hasInstance","isConcatSpreadable","iterator","match","matchAll","search","species","toPrimitive","toStringTag","unscopables","GLOBAL_CONFIG_KEY","_getGlobalValue","globalThis","self","global","_getGlobalConfig","gbl","mathMin","mathMax","strSlice","strSubstring","strSubstr","polyStrSubstr","start","strLeft","count","_globalLazyTestHooks","objCreate","polyObjCreate","properties","newObj","tempFunc","type","utcNow","now","polyUtcNow","getTime","fnApply","_initTestHooks","getLazy","lazyValue","b","lzy","configurable","_polySymbols","_wellKnownSymbolCache","mathRandom","_uniqueInstanceId","toString","substring","UNIQUE_REGISTRY_ID","POLY_SYM","_polyId","polyNewSymbol","description","uniqueId","symString","_setProp","theSymbol","polyfillTypeName","polySymbolFor","registry","gblCfg","gblSym","k","_globalSymbolRegistry","newSymbol_1","regId_1","createCachedValue","toJSON","_cachedGlobal","WINDOW","_getGlobalInstFn","getFn","cachedValue","getGlobal","useCached","getInst","hasDocument","getDocument","hasWindow","getWindow","hasNavigator","getNavigator","_symbol","_symbolFor","_iterSymbol$1","isNode","process","versions","_initSymbol","_getSymbolKey","hasSymbol","getSymbol","getKnownSymbol","noPoly","knownName","sym","polyGetKnownSymbol","newSymbol","symbolFor","isIterator","next","isIterable","iterForOf","iter","iterResult","done","failed","throw","return","arrAppend","elms","elm","arrIndexOf","arrMap","arrSlice","end","_isProtoArray","arrReduce","objSetPrototypeOf","_polyObjSetPrototypeOf","proto","_setName","baseClass","createCustomError","constructCb","errorBase","theBaseClass","orgName","captureFn","captureStackTrace","__","_createCustomError","orgProto","_createTrimFn","exp","_fnToString","_objCtrFnString","_gblWindow","strTrim","mathFloor","mathCeil","isPlainObject","Function","ex","_defaultDeepCopyHandler","plainObjDeepCopyHandler","defaultDeepCopyHandlers","copyTo","_deepCopy","visitMap","ctx","userHandler","newPath","concat","newCtx","src","isPlain","isPrim","indexOf","isPrimitiveType","origin","copy","source","newKey","_copyProps","theEntry","entry","newEntry","_getSetVisited","deepExtend","obj1","obj2","obj3","obj4","obj5","obj6","theArg","objCopyProps","_doExtend","_perf","getLength","perfNow","perf","mathRound","objGetOwnPropertyDescriptor","strEndsWith","polyStrEndsWith","searchString","searchValue","strIndexOf","strStartsWith","polyStrStartsWith","position","pos","_setTimeoutFn","_clearTimeoutFn","REF","UNREF","HAS_REF","ENABLED","_createTimeoutWith","startTimer","overrideFn","isArr","setFn","timeoutFn","globalOverrides","tmOut","setTimeout","_resolveTimeoutFn","clearFn","clearTimeout","_resolveClearTimeoutFn","timerFn","dn","refreshFn","cancelFn","theTimerHandler","timerId","_unref","_cancel","_refresh","cancel","_createTimerHandler","scheduleTimeout","timeout","scheduleTimeoutWith","createTimeout","constructor","prepareInvocation","options","token","invocationMessage","invoke","LanguageModelToolResult","LanguageModelTextPart","sendError","triggerDagRun","configJson","date","parse","apiResponse","dag_id","run_id","execution_date","logical_date","toISOString","start_date","end_date","conf","queryFailedRuns","timeRangeHours","dagIdFilter","failedRuns","getDagRunHistory","dag_runs","filterFailedRuns","dagListResult","resultData","runPromises","dags","dag","Promise","all","forEach","runs","getDags","isPaused","is_paused","is_active","owners","tags","getRunningDags","runningDags","latestRun","getLatestDagRun","latest_run_state","latest_run_id","getTaskInstances","task_instances","getTaskLog","taskId","tryNumber","getTaskInstanceLogText","logContent","dagRuns","cutoffTime","setHours","getHours","failedStates","error_message","extractErrorMessage","getDagSource","getDagSourceCode","dagInfoResult","fileToken","file_token","note","strHasOwnProperty","__assignFn","t","p","extendStaticsFn","__proto__","__extendsFn","__spreadArrayFn","to","from","il","j","panel","_disposables","_panel","onDidDispose","_setWebviewMessageListener","webview","loadData","getHealth","healthJson","renderHtml","html","_getWebviewContent","ExtensionUri","reveal","ViewColumn","One","createWebviewPanel","enableScripts","disposable","pop","extensionUri","elementsUri","getUri","mainUri","styleUri","tableRows","metadatabase","status","_getHealthEmoji","_escapeHtml","scheduler","latestHeartbeat","toISODateTimeString","latest_scheduler_heartbeat","triggerer","latest_triggerer_heartbeat","dag_processor","latest_dag_processor_heartbeat","text","m","statusLower","toLowerCase","onDidReceiveMessage","command","UInt32Mask","MaxUInt32","SEED1","SEED2","_mwcSeeded","_mwcW","_mwcZ","_autoSeedMwc","seedValue","random","random32","signed","getRandomValues","Uint32Array","mwcRandom32","version","instanceName","maxLength","number","chars","charAt","newId","_dataUid","_canAcceptData","nodeType","createUniqueNamespace","includeVersion","createElmNodeData","data","accept","addDefault","theCache","_getCache","kill","fetch","url","init","default","getJwtToken","jwtToken","method","headers","body","username","password","json","getHeaders","encode","checkConnection","MethodResult","allDags","offset","showApiErrorMessage","history","res","startDate","endDate","encodeURIComponent","getTaskInstanceLog","logRes","logJson","taskInstancesResult","taskInstance","find","ti","task_id","try_number","logJsonResult","logText","getLastDagRunLogText","getDagRunLogText","logTextResult","genericGet","getDagTasks","getTaskXComs","updateDagRunNote","getConnections","getVariables","getProviders","getConfig","getPlugins","endpoint","createUnloadHandlerContainer","handlers","STR_EMPTY","_noResponseQs","STR_POST_METHOD","SenderPostManager","_enableSendPromise","_diagLog","_isOneDs","_onCompleteFuncs","_disableCredentials","_fetchCredentials","_fallbackInst","_disableXhr","_disableBeacon","_disableBeaconSync","_disableFetchKeepAlive","_addNoResponse","_timeoutWrapper","_syncFetchPayload","_sendCredentials","_onError","onComplete","_doOnComplete","_onNoPayloadUrl","oncomplete","_doBeaconSend","payload","nav","plainTextBatch","Blob","sendBeacon","_beaconSender","sync","onRetry","beaconOnRetry","sendPOST","_xhrSender","thePromise","resolveFunc","rejectFunc","reject","disableXhrSync","endPointUrl","xhr","_doOnReadyFunc","onReadyFunc","xhrOnComplete","setRequestHeader","headerName","onreadystatechange","readyState","onload","onerror","ontimeout","_doFetchSender","requestHeaders","Headers","batchLength","ignoreResponse","responseHandled","append","credentials","keepalive","request","Request","_handleError","statusCode","_onFetchComplete","onCompleteFunc","fetchOnComplete","response_1","ok","resp","statusText","_xdrSender","_window","xdr","XDomainRequest","onloadFunc","xdrOnComplete","onprogress","hostingProtocol","lastIndexOf","open","diagLog","SetConfig","senderOnCompleteCallBack","disableCredentials","fetchCredentials","isOneDs","enableSendPromise","disableXhr","disableBeacon","disableBeaconSync","timeWrapper","addNoResponse","disableFetchKeepAlive","location_1","getSyncFetchPayload","getSenderInst","transports","syncSupport","transportType","sendPostFunc","_transport","_isSync","_getSenderInterface","getFallbackInst","preparePayload","zipPayload","isSync","csStream","reader_1","ReadableStream","controller","enqueue","TextEncoder","close","pipeThrough","getReader","chunks_1","totalLength_1","callbackCalled_1","read","processChunk","combined","Uint8Array","_i","chunks_2","chunk","_chunkCount","STR_DEFAULT_ENDPOINT_URL","STR_VERSION","STR_PROPERTIES","_isConfigDefaults","isVal","_getDefault","dynamicHandler","cfgDefaults","isDefaultValid","fallbacks","fallback","fbValue","_resolveDefaultValue","newValue_1","_applyDefaultValue","defaultValue","isValid","mergeDf","reference","readOnly","blkDynamicValue","blkVal","mrg","usingDefault","cfgValue","dfName","dfValue","client","input","toISODateString","AIHandler","currentDagId","queryDate","summaryMessage","runDate","getStatusEmoji","duration","durationMs","durationSec","floor","minutes","keys","errorMessage","trim","dagHistorySelectedDate","activetabid","loadAllDagData","resetDagData","dagJson","dagRunJson","dagRunHistoryJson","dagTaskInstancesJson","dagTasksJson","stopCheckingDagRunStatus","getLastRun","renderHmtl","loadDagInfoOnly","Two","startCheckingDagRunStatus","goToDagRun","goToDag","getRunHistory","toolkitUri","logical_date_string","start_date_string","hasDagRun","getDuration","runningOrFailedTasks","schedule","next_run","isPausedText","taskRows","sort","a","operator","taskDependencyTree","tasks","buildTaskDependencyTree","runHistoryRows","showDAGRunLog","getRunHistoryAndRenderHtml","showSourceCode","askAI","showTaskInstanceLog","xcomTaskId","showTaskXComs","getTasksAndRenderHtml","activeid","newNote","prompt","code","logs","askAIWithContext","dagRun","taskInstances","isJsonString","isValidDate","dagView","resultTasks","taskMap","Map","task","rootTasks","upstream_task_ids","Set","treeHtml","buildTree","has","itemHtml","downstreamIds","downstream_task_ids","downstreamId","rootTask","confirmationMessage","MarkdownString","isTrusted","appendMarkdown","confirmationMessages","_DYN_INITIALIZE","_DYN_INDEX_OF","_DYN_TIMINGS","_DYN_POLL_INTERNAL_LOGS","_DYN_VALUE","_DYN_LENGTH","_DYN_PROCESS_TELEMETRY_ST0","successMessage","uri","test","firstComma","meta","charset","base64","typeFull","encoding","unescape","buffer","Buffer","FetchBaseError","super","Symbol","FetchError","systemError","errno","erroredSysCall","syscall","isURLSearchParameters","delete","getAll","isBlob","arrayBuffer","stream","isDomainOrSubdomain","destination","original","orig","URL","hostname","dest","endsWith","isSameProtocol","pipeline","promisify","INTERNALS","Body","size","boundary","isBuffer","types","isAnyArrayBuffer","ArrayBuffer","isView","byteOffset","byteLength","disturbed","on","error_","bodyUsed","consumeBody","formData","ct","startsWith","parameters","URLSearchParams","toFormData","blob","buf","TextDecoder","decode","alloc","accum","accumBytes","destroy","readableEnded","_readableState","ended","every","prototype","deprecate","defineProperties","clone","instance","highWaterMark","p1","p2","getBoundary","PassThrough","pipe","getNonSpecFormDataBoundary","extractContentType","writeToStream","validateHeaderName","defineProperty","validateHeaderValue","raw","entries","isBoxedPrimitive","pair","Proxy","receiver","Reflect","reduce","for","property","redirectStatus","isRedirect","Response","contentType","counter","redirected","redirect","RangeError","stripURLForUseAsAReferrer","originOnly","hash","pathname","ReferrerPolicy","isUrlPotentiallyTrustworthy","hostIp","hostIPVersion","isIP","isOriginPotentiallyTrustworthy","isRequest","doBadDataWarn","parsedURL","toUpperCase","inputBody","signal","referrer","parsedReferrer","follow","compress","agent","insecureHTTPParser","referrerPolicy","validateReferrerPolicy","getNodeRequestOptions","contentLengthValue","totalBytes","getLengthSync","hasKnownLength","getTotalBytes","Number","isNaN","referrerURLCallback","referrerOriginCallback","policy","referrerSource","referrerURL","referrerOrigin","currentURL","determineRequestsReferrer","lastOffset","href","getSearch","AbortError","supportedSchemas","options_","abort","emit","aborted","abortAndFinalize","finalize","request_","addEventListener","removeEventListener","LAST_CHUNK","previousChunk","isChunkedTransfer","properLastChunkReceived","socket","onSocketClose","errorCallback","onData","compare","prependListener","removeListener","fixResponseChunkedTransferBadEnding","endedWithEventsCount","_eventsCount","hadError","response_","array","fromRawHeaders","rawHeaders","locationURL","requestOptions","responseReferrerPolicy","policyTokens","parseReferrerPolicyFromHeader","once","responseOptions","statusMessage","codings","zlibOptions","finishFlush","ReportTreeItem","TreeItem","label","collapsibleState","iconPath","strTelemetryPluginChain","strHasRunFlags","strGetTelCtx","_chainId","_createInternalContext","telemetryChain","startAt","_nextProxy","_onComplete","proxy","createTelemetryProxyChain","_getNextProxyStart","context","_next","nextProxy","completeDetails","args","getCfg","getExtCfg","_getExtCfg","field","extConfig","hasNext","getNext","setNext","nextPlugin","that","createIfMissing","idCfg","createProcessTelemetryContext","internalContext","env","createProcessTelemetryUnloadContext","createProcessTelemetryUpdateContext","firstProxy","lastProxy_1","newProxy","chainId","hasProcessTelemetry","hasSetNext","proxyChain","getPlugin","processTelemetry","_processChain","_getTelCtx","hasRun","pluginCore","_setNext","processPluginFn","hasRunContext","nextId","hasNextRun","createTelemetryPluginProxy","_stringToBoolOrDefault","cfgDfMerge","cfgDfValidate","validator","fallBackName","cfgDfBoolean","_onDidChangeTreeData","EventEmitter","onDidChangeTreeData","dagTreeItemList","fire","treeItem","DagTreeItem","getChildren","element","getVisibleDagList","doesFilterMatch","getTreeItem","LoadState","SaveState","apiUserNameTemp","apiPasswordTemp","AirflowApi","ChangeServer","some","serverConfig","AdminTreeItem","TreeItemCollapsibleState","None","ThemeIcon","BreezeChannelIdentifier","INVALID_TRACE_ID","INVALID_SPAN_ID","_isValid","invalidValue","pluginStateData","_getPluginState","initializePlugins","processContext","initPlugins","lastPlugin","isInitialized","sortPlugins","extA","extB","bHasProcess","createDistributedTraceContext","parentCtx","trace","getName","setName","getTraceId","traceId","setTraceId","getSpanId","spanId","setSpanId","getTraceFlags","setTraceFlags","newTraceFlags","EventsDiscardedReason","Unknown","NonRetryableStatus","InvalidEvent","SizeLimitExceeded","KillSwitch","QueueFull","BeaconSendFailure","RT_PROFILE","STR_DROPPED","STR_REQUEUE","DEFAULT_CACHE_CONTROL","DEFAULT_CONTENT_TYPE","STR_CACHE_CONTROL","STR_CONTENT_TYPE_HEADER","STR_CLIENT_VERSION","STR_CLIENT_ID","STR_TIME_DELTA_TO_APPLY","STR_UPLOAD_TIME","STR_API_KEY","STR_MSA_DEVICE_TICKET","STR_AUTH_WEB_TOKEN","STR_AUTH_XTOKEN","STR_MSFPC","STR_TRACE","STR_USER","_DYN_ALLOW_REQUEST_SENDIN0","_DYN_SHOULD_ADD_CLOCK_SKE1","_DYN_GET_CLOCK_SKEW_HEADE2","_DYN_SET_CLOCK_SKEW","_DYN_CONCAT","_DYN_I_KEY","_DYN_COUNT","_DYN_EVENTS","_DYN_PUSH","_DYN_SPLIT","_DYN_TO_LOWER_CASE","_DYN_HDRS","_DYN_USE_HDRS","_DYN_SET_TIMEOUT_OVERRIDE","_DYN_CLEAR_TIMEOUT_OVERRI3","_DYN_OVERRIDE_ENDPOINT_UR4","_DYN_AVOID_OPTIONS","_DYN_ENABLE_COMPOUND_KEY","_DYN_DISABLE_XHR_SYNC","_DYN_DISABLE_FETCH_KEEP_A6","_DYN_USE_SEND_BEACON","_DYN_FETCH_CREDENTIALS","_DYN_ALWAYS_USE_XHR_OVERR7","_DYN_SERIALIZE_OFFLINE_EV8","_DYN_GET_OFFLINE_REQUEST_9","_DYN_CREATE_PAYLOAD","_DYN_CREATE_ONE_DSPAYLOAD","_DYN_PAYLOAD_BLOB","_DYN_HEADERS","_DYN__THE_PAYLOAD","_DYN_BATCHES","_DYN_SEND_TYPE","_DYN_CAN_SEND_REQUEST","_DYN_SEND_QUEUED_REQUESTS","_DYN_SET_UNLOADING","_DYN_SEND_SYNCHRONOUS_BAT10","_DYN__TRANSPORT","_DYN_GET_WPARAM","_DYN_IS_BEACON","_DYN_IS_TEARDOWN","_DYN__SEND_REASON","_DYN_SET_KILL_SWITCH_TENA11","_DYN__BACK_OFF_TRANSMISSI12","_DYN_IDENTIFIER","_DYN_AUTO_FLUSH_EVENTS_LI14","_DYN_SEND_ATTEMPT","_DYN_LATENCY","_DYN_SYNC","_getEventMsfpc","theEvent","intWeb","_getMsfpc","theEvents","msfpc","EventBatch","addEvents","_msfpc","Msfpc","addEvent","fromEvent","numEvents","create","ClockSkewManager","_allowRequestSending","_shouldAddClockSkewHeaders","_isFirstRequest","_clockSkewHeaderValue","_clockSkewSet","firstRequestSent","timeDeltaInMillis","_killedTokenDictionary","killTokens","killDuration","killedTokens","parseInt","tenantToken","killDictionary","retryPolicyGetMillisToBackoffForRetry","retriesSoFar","waitDuration","randomBackoff","BaseBackoff","pow","MaxRecordSize","MaxBeaconRecordSize","metadata","f","rCheckDot","Serializer","perfManager","valueSanitizer","stringifyObjects","enableCompoundKey","getEncodedTypeOverride","excludeCsMetaData","strData","strBaseData","_checkForCompoundkey","_processSubKeys","_theSanitizer","_isReservedCache","_excludeCsMetaData","_getEncodedType","_sizeCfg","requestLimit","_getSizeLimtCfg","_requestSizeLimitBytes","_validateSizeLimit","_beaconRequestSizeLimitBytes","_maxRecordSize","recordLimit","_maxBeaconRecordSize","min","_processPathKeys","srcObj","thePath","checkReserved","metadataPathKeys","metadataCallback","processSubKeys","srcValue","name_1","theMetaPathKeys","destObj","subKeys","keyLen","subKey","isReserved","_isReservedField","handleField","createPayload","retryCnt","isTeardown","isReducedPayload","apiKeys","payloadBlob","overflow","sizeExceed","failedEvts","batches","isBeacon","appendPayload","theBatch","maxEventsPerBatch","canAddEvents","payloadEvents","eventsAdded","sizeExceeded","isBeaconPayload","requestMaxSize","recordMaxSize","joinCount","eventBlob","getEventBlob","blobLength","apiKey","evts","max","eventData","serializedEvent","_addMetadataCallback","serializedExt","pathKeys","getEncodedType","propKeys","propertyValue","encodedTypeValue","kind","propertyType","metaData","metaTarget","newTarget","_addJSONPropertyMetaData","eventExt","serializedData","serializedBaseData","cfgVal","defaultVal","createTimeoutWrapper","argSetTimeout","argClearTimeout","ms","strSendAttempt","UrlQueryString","_eventActionMap","_collectorQsHeaders","_collectorHeaderToQs","_addCollectorHeaderQsMapping","qsName","allowQs","_hasHeader","header","hasHeader","lowerHeader","_addRequestDetails","useHeaders","HttpManager","maxConnections","maxRequestRetriesBeforeBackoff","actions","_urlString","_killSwitch","_paused","_clockSkewManager","_outstandingRequests","_postManager","_sendInterfaces","_core","_customHttpInterface","_queryStringParameters","_headers","_batchQueue","_serializer","_enableEventTimings","_cookieMgr","_useHeaders","_xhrTimeout","_zipPayload","_disableXhrSync","_canHaveReducedPayload","_unloadHooks","_sendHook","_sendListener","_responseHandlers","_sendPostMgr","_useBeacons","_maxEvtPerBatch","_getSendPostMgrConfig","_xdrOncomplete","_fetchOnComplete","_xhrOnComplete","_onBeaconRetry","_handleCollectorResponse","resValue","headerMap","responseText","handleResponse","canSend","thePayload","theUrl","urlString","nav_1","persistStorage","droppedBatches_1","sentBatches_1","sentEvts","_sendBatchesNotification","_isBeaconPayload","_adjustSendType","_hasIdleConnection","_clearQueue","theQueue","_canSendPayload","theBatches","_createDebugBatches","_sendBatches","retryCount","orgBatches_1","isSynchronous_1","perfEvt","droppedBatches","serializationStart","sendInterface","sendTransport","shift","isTenantKilled","_doPayloadSend","isSynchronous","useSendBeacon","_buildRequestDetails","requestDetails","hdrs","useHdrs","apiQsKeys","wParam","_setTimingValue","timings","serializationCompleted","useSendHook_1","sendInterface_1","useHeaders_1","requestDetails_1","sendEventStart_1","batchLp","evtLp","orgPayloadData","_thePayload","_sendReason","sender","httpStatusCode","isRetrying","backOffTrans","shouldRetry","killToken","removedEvents","retryCount_1","_doAction","batchReason","_clearBackOff","sendEventCompleted_1","sendEventCompleted","_addEventCompletedTimings","_addCompleteTimings","sendQueuedRequests","_handleRequestFinished","_retryRequestIfNeeded","processedPayload","hookData_1","senderCalled_1","responseHandlers","webResult","sendSync","theAction_1","action","isSyncRequest_1","undefValue","postChannel","coreConfig","channelConfig","extensionConfig","anonCookieName","qsParams","_addQueryStringParameter","_removeQueryStringParameter","payloadListener","httpInterface","httpXHROverride","maxEvtCfg","maxEvtPerBatch","xhrTimeout","sendPostConfig","syncHttpInterface","beaconHttpInterface","fetchSyncHttpInterface","beaconUnloadTransports","theTransports","unloadTransports","addResponseHandler","responseHandler","evt","optimize","theBatches_1","payloadData","addHeader","removeHeader","isCompletelyIdle","addBatch","teardown","hook","pause","resume","MaxEventsLimitInMem","strEventsDiscarded","defaultPostChannelConfig","eventsLimitInMem","immediateEventLimit","autoFlushEventsLimit","disableAutoBatchFlushLimit","overrideInstrumentationKey","overrideEndpointUrl","disableTelemetry","ignoreMc1Ms0CookieProcessing","setTimeoutOverride","clearTimeoutOverride","payloadPreprocessor","disableEventTimings","disableOptimizeObj","avoidOptions","alwaysUseXhrOverride","maxEventRetryAttempts","maxUnloadEventRetryAttempts","PostChannel","_postConfig","_flushCallbackTimer","_immediateQueueSizeLimit","_queueSizeLimit","_scheduledTimer","_immediateTimer","_currentBackoffCount","_timerCount","_httpManager","_batchQueues","_autoFlushEventsLimit","_autoFlushBatchLimit","_delayedBatchSendLatency","_delayedBatchReason","_optimizeObject","_isPageUnloadTriggered","_maxEventSendAttempts","_maxUnloadEventSendAttempts","_ignoreMc1Ms0CookieProcessing","_disableAutoBatchFlushLimit","_unloadHandlersAdded","_overrideInstrumentationKey","_disableTelemetry","_isTeardownCalled","_flushCallbackQueue","_immediateQueueSize","_queueSize","_profiles","_currentProfile","_removeUnloadHandlers","_batch","arr","rlt","_serialize","_cleanEvent","_handleUnloadEvents","_releaseAllQueues","_handleShowEvents","_addEventToQueues","evtLatency","queueSize","queueLimit","eventDropped","_addEventToProperQueue","dropLatency","dropNumber","latency","currentLatency","eventBatch","_getEventBatch","droppedEvents","droppedCount","_notifyBatchEvents","_resetQueueCounts","_dropEventWithLatencyOrLess","_notifyEvents","_sendEventsForLatencyAndAbove","queued","_queueBatches","_hasEvents","_scheduleTimer","immediateTimeOut","_createTimer","timeOut","requeue","_requeueEvents","_sendingEvent","sent","_eventsSentEvent","drop","_eventsDropped","rspFail","_eventsResponseFail","oth","_otherEvent","_initializeProfiles","iKeyMap","_setAutoLimits","theTimerFunc","timerMultiplier","_clearScheduledTimer","batchQueue","_performAutoFlush","doFlush","immediateQueue","normalQueue","_loop_1","eventsQueued","latencyToProcess","_flushImpl","_waitForIdleManager","maxSendAttempts","_callNotification","evtName","notifyFunc","extraArgs","isSyncRequest","_addHook","existingGetWParamMethod","wparam","_hookWParam","excludePageUnloadEvents","disablePageUnloadEvents","disablePageShowEvents","setInitialized","ev","processNext","getOfflineSupport","details_1","getUrl","serialize","shouldProcess","createOneDSPayload","_doTeardown","setEventQueueLimits","eventLimit","autoFlushLimit","_loadTransmitProfiles","profiles","profileName","profileValue","profLen","directValue","cleared","setMsaAuthTicket","ticket","setAuthPluginHeader","removeAuthPluginHeader","hasEvents","_setTransmitProfile","BaseTelemetryPlugin","emitWarning","assign","params","pull","ctrl","sections","section","sectionName","option","SampleRate","ProcessLegacy","HttpMethod","DEFAULT_BREEZE_ENDPOINT","DEFAULT_BREEZE_PATH","strNotSpecified","_DYN_INGESTIONENDPOINT","_DYN_TO_STRING","_DYN_MESSAGE","_DYN_STRINGIFY","_DYN_MATCH","_DYN_PROPERTIES","_DYN_MEASUREMENTS","_DYN_SIZE_IN_BYTES","_DYN_TYPE_NAME","_DYN_EXCEPTIONS","_DYN_SEVERITY_LEVEL","_DYN_PROBLEM_GROUP","_DYN_PARSED_STACK","_DYN_HAS_FULL_STACK","_DYN_ASSEMBLY","_DYN_FILE_NAME","_DYN_LINE","_DYN_AI_DATA_CONTRACT","_DYN_DURATION","dataSanitizeKeyAndAddUniqueness","origLength","nameTrunc","dataSanitizeKey","uniqueField","dataSanitizeString","valueTrunc","dataSanitizeUrl","dataSanitizeInput","dataSanitizeMessage","messageTrunc","dataSanitizeProperties","tempProps_1","dataSanitizeMeasurements","measurements","tempMeasurements_1","measure","_msgId","inputTrunc","Event","aiDataContract","envelopeType","Trace","severityLevel","msToTimeSpan","totalms","sec","hour","days","PageView","dataSanitizeId","PageViewPerformance","unused","cs4BaseData","perfTotal","networkConnect","sentRequest","receivedResponse","domProcessing","IS_FRAME","PARSE_FILENAME_LINE_COL","PARSE_FILENAME_LINE_ONLY","NoMethod","strError","strStack","strStackDetails","strErrorSrc","strMessage","strDescription","_parseSequence","re","ln","col","chk","frame","pre","hdl","_handleFilename","_stringify","convertToString","_formatMessage","errorType","evtMessage","_isStackDetails","_convertStackObj","errorStack","_getStackFromErrorObj","errorObj","lines","_getOperaStack","_getErrorType","typeName","results","exec","_formatErrorCode","Exception","exceptions","_isExceptionInternal","isManual","_createExceptionDetails","CreateAutoException","lineNumber","columnNumber","errorSrc","stackDetails","CreateFromInterface","parsedStack","_populateFrameSizeInBytes","stackFrameAiDataContract","level","assembly","fileName","line","sizeInBytes","_stackFrameFromInterface","_createExDetailsFromInterface","toInterface","problemGroup","CreateSimpleException","formatError","exDetailsAiDataContract","outerId","hasFullStack","_toInterface","_parsedFrameToInterface","theStack","_isExceptionDetailsInternal","frames","level_1","foundStackStart_1","totalSizeInBytes_1","trimmedFrame","_isStackFrame","theFrame","parsedFrame","sequence","matches","_parseFilename","_extractStackFrame","left","right","acceptedLeft","acceptedRight","howMany","_parseStack","exceptionTrunc","dataSanitizeException","_formatStackTrace","lineCol","lineNo","filename","DataPoint","stdDev","Metric","metrics","dataPoint","_document","_htmlAnchorIdx","_htmlAnchorElement","urlParseHost","inclPort","fullHost","port","_internalEndpoints","isInternalApplicationInsightsEndpoint","RemoteDependencyData","absoluteUrl","commandName","success","resultCode","requestAPI","correlationContext","dependencyKind","dependencySource","dependencyTypeName","dependencyFields","anchorIdx","anchorCache","tempAnchor","parsedUrl","createElement","pathName","AjaxHelperParseDependencyPath","_disableEvents","LocalStorage","SessionStorage","_canUseSessionStorage","_storagePrefix","_getVerifiedStorageObject","storageType","uid","storage","setItem","fail","getItem","_getSessionStorageObject","utlCanUseSessionStorage","reset","utlGetSessionStorage","utlSetSessionStorage","requestContextHeader","requestContextTargetKey","requestContextAppIdFormat","requestIdHeader","traceParentHeader","traceStateHeader","sdkContextHeader","sdkContextHeaderAppIdRequest","requestContextHeaderLowerCase","parseResponse","itemsAccepted","itemsReceived","errors","_aiNameFunc","baseName","aiName","_aiApplication","_aiDevice","_aiLocation","_aiOperation","_aiSession","_aiUser","_aiCloud","_aiInternal","ContextTagKeys","applicationVersion","applicationBuild","applicationTypeId","applicationId","applicationLayer","deviceId","deviceIp","deviceLanguage","deviceLocale","deviceModel","deviceFriendlyName","deviceNetwork","deviceNetworkName","deviceOEMName","deviceOS","deviceOSVersion","deviceRoleInstance","deviceRoleName","deviceScreenResolution","deviceType","deviceMachineName","deviceVMName","deviceBrowser","deviceBrowserVersion","locationIp","locationCountry","locationProvince","locationCity","operationId","operationName","operationParentId","operationRootId","operationSyntheticSource","operationCorrelationVector","sessionId","sessionIsFirst","sessionIsNew","userAccountAcquisitionDate","userAccountId","userId","userStoreRegion","userAuthUserId","userAnonymousUserAcquisitionDate","userAuthenticatedUserAcquisitionDate","cloudName","cloudRole","cloudRoleVer","cloudRoleInstance","cloudEnvironment","cloudLocation","cloudDeploymentUnit","internalNodeName","internalSdkVersion","internalAgentVersion","internalSnippet","internalSdkSrc","CtxTagKeys","Envelope","sampleRate","Data","STR_DURATION","_DYN_TAGS","_DYN_DEVICE_TYPE","_DYN_DATA","_DYN_TRACE_ID","_DYN_DATA_TYPE","_DYN_ENVELOPE_TYPE","_DYN_ENQUEUE","_DYN_EMIT_LINE_DELIMITED_0","_DYN_CLEAR","_DYN_MARK_AS_SENT","_DYN_CLEAR_SENT","_DYN_BUFFER_OVERRIDE","_DYN__BUFFER__KEY","_DYN__SENT__BUFFER__KEY","_DYN__MAX__BUFFER__SIZE","_DYN_TRIGGER_SEND","_DYN_DIAG_LOG","_DYN__SENDER","_DYN_ENDPOINT_URL","_DYN_INSTRUMENTATION_KEY","_DYN_CUSTOM_HEADERS","_DYN_MAX_BATCH_SIZE_IN_BY1","_DYN_ONUNLOAD_DISABLE_BEA2","_DYN_IS_BEACON_API_DISABL3","_DYN_ALWAYS_USE_XHR_OVERR4","_DYN_ENABLE_SESSION_STORA5","_DYN__BUFFER","_DYN_ONUNLOAD_DISABLE_FET6","_DYN_DISABLE_SEND_BEACON_7","_DYN_GET_SENDER_INST","_DYN__ON_ERROR","_DYN__ON_PARTIAL_SUCCESS","_DYN__ON_SUCCESS","_DYN_ITEMS_RECEIVED","_DYN_ITEMS_ACCEPTED","_DYN_BASE_TYPE","_DYN_SAMPLE_RATE","strBaseType","strProperties","strTrue","_setValueIf","_extractPropsAndMeasurements","_convertPropsUndefinedToCustomDefinedValue","customUndefinedValue","_createEnvelope","envelope","startTime","iKeyNoDashes","envTags","itmExt","itmTags","extUser","user","authId","localId","extApp","app","sesId","extDevice","device","deviceClass","ip","model","web","browserLang","browserVer","browser","envData","envBaseData","envProps","screenRes","userConsent","extOs","os","osVer","extTrace","parentID","tgs","tg","theTags","EnvelopeCreator","Version","_extractPartAExtensions","EnvelopeCreatorInit","EventEnvelopeCreator","customProperties","customMeasurements","BaseSendBuffer","_buffer","_bufferFullMessageSent","_maxRetryCnt","maxRetryCnt","_get","_set","getItems","batchPayloads","payloads","payloadStr_1","canUseSessionStorage","newBuffer","SessionStorageSendBuffer","ArraySendBuffer","PREVIOUS_KEYS","_namePrefix","namePrefix","bufferItems","_getBuffer","itemsInSentBuffer","previousItems","_getItemsFromPreviousKey","prefixEvents","_getPreviousEvents","notDeliveredItems","_removePayloadsFromBuffer","remaining","payloadStr","_getBufferBase","bufferJson","buffer_1","_setBuffer","prefixedKey","transFormedItems_1","internalItem","utlRemoveSessionStorage","sentElements","unsentItems","sentItems","VERSION","BUFFER_KEY","SENT_BUFFER_KEY","MAX_BUFFER_SIZE","_serializeObject","circularReferenceCheck","output","_serializeStringMap","_serializeArray","contract","isRequired","isHidden","isPresent","isObj","sources","expectedType","num","parseFloat","HashCodeScoreGenerator","getHashCodeScore","getHashCode","INT_MAX_VALUE","charCodeAt","abs","SamplingScoreGenerator","hashCodeGenerator","getSamplingScore","telemetryTrace","Sample","throwInternal","samplingRate","samplingScoreGenerator","isSampledIn","samplingPercentage","UNDEFINED_VALUE","_getResponseText","defaultAppInsightsChannelConfig","maxBatchInterval","isRetryDisabled","convertUndefined","retryCodes","corsPolicy","CrossOriginResourcePolicyHeader","EnvelopeTypeCreator","props","currentContextId","bd","refUri","pageType","isLoggedIn","pageTags","pageViewData","exData","baseMetricData","average","sampleCount","remoteDepData","responseCode","Sender","_consecutiveErrors","_retryAt","_timeoutHandle","_stamp_specific_redirects","_syncUnloadSender","_offlineListener","_endpointUrl","_orgEndpointUrl","_maxBatchSizeInBytes","_beaconSupported","_beaconOnUnloadSupported","_beaconNormalSupported","_customHeaders","_convertUndefined","_isRetryDisabled","_maxBatchInterval","_sessionStorageUsed","_bufferOverrideUsed","_alwaysUseCustomSend","_fetchKeepAlive","_xhrSend","_fallbackSend","_disableBeaconSplit","_retryCodes","_xdrOnLoad","_xhrReadyStateChange","countOfItemsInPayload","_checkResponsStatus","responseURL","_getPayloadArr","oriPayload","_validate","diagLogger","_sample","_getEnvelope","defaultEnvelopeIkey","aiEnvelope","constructEnvelope","valid","_createPayload","_getHeaders","_doSend","markAsSent","_onSuccess","_getOnComplete","_getPayload","result_2","resolveFn_1","rejectFn_1","callbackExecuted_1","_checkMaxSize","incomingPayload","incomingSize","isOnline","responseUrl","_appId","appId","_checkAndUpdateEndPointUrl","_resendPayload","_isRetriable","_doUnloadSend","_isStringArr","_fetchKeepAliveSender","transport","payloadSize","linearFactor","payload_1","delayInSeconds","backOffSlot","backOffDelay","retryAfterTimeSpan","_setRetryTime","_setupTimer","retryInterval","timerValue","result_1","rsp","onunloadFlush","pluginChain","parentEvtNamespace","_navigator","_isListening","listenerList","rState","onLine","uState","_currentState","calCurrentState","_enableEvents","ononline","_setOnline","_setOffline","listnerNoticeCheck","newState","offlineState","isListening","win","addListener","setOnlineState","createOfflineListener","storagePrefix","senderConfig","curExtUrl","coreUrl","PENDING","customHeader","bufferOverride","shouldUpdate","disableValidation","disableInstrumentationKeyValidation","RegExp","_validateInstrumentationKey","payloadArr","droppedPayload","customInterface","syncInterface","xhrInterface","syncTransports","payloadItem","getOfflineListener","forcedSender","sendRequest","_getNotifyMgr","eventsSendRequest","_notifySendRequest","ieVer","retry","errors_1","reverse","extracted","_onPartialSuccess","parseConnectionString","connectionString","kvPairs","fields","kv","kvParts","endpointsuffix","locationPrefix","_DYN_CONNECTION_STRING","_DYN_USER_OVERRIDE_ENDPOI0","defaultConfigValues","featureOptIn","ApplicationInsights","_config","_track","_initialize","configCs","ikeyPromise","curCs","instrumentationkey","urlPromise","ingest","ingestionendpoint","cs","initialize","rCamelCase","rNormalizeInvalid","rLeadingNumeric","isNotNullOrUndefined","normalizeJsName","_all","letter","strContains","getExceptionName","setValue","valChk","srcChk","getSetValue","proxyFunctionAs","overwriteTarget","srcFunc","originalArguments","_createProxyFunction","proxyFunctions","functionsToProxy","theFuncName","createClassFromInterface","defaults","optimizeObject","objExtend","extended","argLen","deep","isArgArray","isArgObj","isNewArray","isFeatureEnabled","feature","sdkDefaultState","ft","getResponseText","formatErrorMessageXdr","formatErrorMessageXhr","prependTransports","newTransports","strDisabledPropertyName","strWithCredentials","strTimeout","openXhr","withCredentials","disabled","_wrapSetXhrProp","XMLHttpRequest","_appendHeader","theHeaders","getResponseHeader","STR_KILL_DURATION_HEADER","STR_KILL_DURATION_SECONDS_HEADER","STR_TIME_DELTA_HEADER","_getAllResponseHeaders","headersString","headersArray","headerEntry","convertAllHeadersToMap","toIterator","part","_Blob","blobParts","encoder","endings","decoder","str","it","relativeStart","relativeEnd","span","subarray","STR_WARN_TO_CONSOLE","loggingLevelTelemetry","maxMessageLimit","enableDebug","_logFuncs","_sanitizeDiagnosticText","_logToConsole","theConsole","logFunc","_InternalLogMessage","msgId","isUserAct","strProps","diagnosticText","safeGetLogger","_loggingLevelConsole","_loggingLevelTelemetry","_maxInternalMessageLimit","_enableDebug","_unloadHandler","_messageCount","_messageLogged","_logInternalMessage","severity","messageKey","_debugExtMsg","throttleLimitMessage","throttleMessage","errorToConsole","dbgExt","_setDefaultsFromConfig","consoleLoggingLevel","debugToConsole","resetInternalMessageCount","logInternalMessage","_getLogger","_throwInternal","_warnToConsole","runTargetUnload","doUnloadAll","targets","resolved","createEnumStyle","createValueMap","airflowClient","sourceCode","taskLogs","tasksToLog","aFailed","bFailed","log","deriveDagRunState","getEarliestStartDate","getLatestEndDate","buildAnalysisReport","startDates","earliest","endDates","latest","tasksByState","round","taskLog","S","propertyStorageOverride","getProperty","setProperty","logger_1","trackStart","itemExt","sdk","itemProperties","pluginVersionString","FullVersionString","ObjHasOwnProperty","_fieldTypeEventPropMap","isValueAssigned","getTenantId","indexTenantId","isLatency","sanitizeProperty","propType","getCommonSchemaMetaData","isDataType","getFieldValueType","extend","arrayValue","arrayIndex","setProcessTelemetryTimings","isChromium","isGreaterThanZero","ActiveStatus","NONE","finalConfig","configSource","filePath","existsSync","readFileSync","console","warn","appendCodeblock","Boolean","factory","SymbolPolyfill","noop","globals","typeIsObject","x","rethrowAssertionErrorRejection","originalPromise","originalPromiseThen","originalPromiseResolve","bind","originalPromiseReject","newPromise","executor","promiseResolvedWith","promiseRejectedWith","PerformPromiseThen","promise","onFulfilled","onRejected","uponPromise","uponFulfillment","uponRejection","transformPromiseWith","fulfillmentHandler","rejectionHandler","setPromiseIsHandledToTrue","queueMicrotask","globalQueueMicrotask","resolvedPromise","reflectCall","F","V","promiseCall","SimpleQueue","_cursor","_size","_front","_elements","_back","oldBack","newBack","QUEUE_MAX_ARRAY_SIZE","oldFront","newFront","oldCursor","newCursor","elements","peek","front","cursor","ReadableStreamReaderGenericInitialize","reader","_ownerReadableStream","_reader","_state","defaultReaderClosedPromiseInitialize","defaultReaderClosedPromiseResolve","defaultReaderClosedPromiseInitializeAsResolved","defaultReaderClosedPromiseInitializeAsRejected","_storedError","ReadableStreamReaderGenericCancel","ReadableStreamCancel","ReadableStreamReaderGenericRelease","defaultReaderClosedPromiseReject","defaultReaderClosedPromiseResetToRejected","readerLockException","_closedPromise","_closedPromise_resolve","_closedPromise_reject","AbortSteps","ErrorSteps","CancelSteps","PullSteps","NumberIsFinite","isFinite","MathTrunc","trunc","ceil","assertDictionary","assertFunction","assertObject","assertRequiredArgument","assertRequiredField","convertUnrestrictedDouble","censorNegativeZero","convertUnsignedLongLongWithEnforceRange","upperBound","MAX_SAFE_INTEGER","integerPart","assertReadableStream","IsReadableStream","AcquireReadableStreamDefaultReader","ReadableStreamDefaultReader","ReadableStreamAddReadRequest","readRequest","_readRequests","ReadableStreamFulfillReadRequest","_closeSteps","_chunkSteps","ReadableStreamGetNumReadRequests","ReadableStreamHasDefaultReader","IsReadableStreamDefaultReader","IsReadableStreamLocked","closed","defaultReaderBrandCheckException","resolvePromise","rejectPromise","ReadableStreamDefaultReaderRead","_errorSteps","releaseLock","_disturbed","_readableStreamController","AsyncIteratorPrototype","getPrototypeOf","ReadableStreamAsyncIteratorImpl","preventCancel","_ongoingPromise","_isFinished","_preventCancel","nextSteps","_nextSteps","returnSteps","_returnSteps","ReadableStreamAsyncIteratorPrototype","IsReadableStreamAsyncIterator","_asyncIteratorImpl","streamAsyncIteratorBrandCheckException","setPrototypeOf","NumberIsNaN","CreateArrayFromList","CopyDataBlockBytes","destOffset","srcOffset","ArrayBufferSlice","begin","CloneAsUint8Array","O","DequeueValue","container","_queue","_queueTotalSize","EnqueueValueWithSize","Infinity","ResetQueue","ReadableStreamBYOBRequest","IsReadableStreamBYOBRequest","byobRequestBrandCheckException","_view","respond","bytesWritten","_associatedReadableByteStreamController","ReadableByteStreamControllerRespond","respondWithNewView","ReadableByteStreamControllerRespondWithNewView","ReadableByteStreamController","byobRequest","IsReadableByteStreamController","byteStreamControllerBrandCheckException","ReadableByteStreamControllerGetBYOBRequest","desiredSize","ReadableByteStreamControllerGetDesiredSize","_closeRequested","_controlledReadableByteStream","ReadableByteStreamControllerClose","ReadableByteStreamControllerEnqueue","ReadableByteStreamControllerError","ReadableByteStreamControllerClearPendingPullIntos","_cancelAlgorithm","ReadableByteStreamControllerClearAlgorithms","ReadableByteStreamControllerHandleQueueDrain","autoAllocateChunkSize","_autoAllocateChunkSize","bufferE","pullIntoDescriptor","bufferByteLength","bytesFilled","elementSize","viewConstructor","readerType","_pendingPullIntos","ReadableByteStreamControllerCallPullIfNeeded","shouldPull","_started","ReadableStreamHasBYOBReader","ReadableStreamGetNumReadIntoRequests","ReadableByteStreamControllerShouldCallPull","_pulling","_pullAgain","_pullAlgorithm","ReadableByteStreamControllerInvalidateBYOBRequest","ReadableByteStreamControllerCommitPullIntoDescriptor","filledView","ReadableByteStreamControllerConvertPullIntoDescriptor","readIntoRequest","_readIntoRequests","ReadableStreamFulfillReadIntoRequest","ReadableByteStreamControllerEnqueueChunkToQueue","ReadableByteStreamControllerFillPullIntoDescriptorFromQueue","currentAlignedBytes","maxBytesToCopy","maxBytesFilled","maxAlignedBytes","totalBytesToCopyRemaining","ready","headOfQueue","bytesToCopy","destStart","ReadableByteStreamControllerFillHeadPullIntoDescriptor","ReadableStreamClose","_byobRequest","ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue","ReadableByteStreamControllerShiftPendingPullInto","ReadableByteStreamControllerRespondInternal","firstDescriptor","ReadableByteStreamControllerRespondInClosedState","remainderSize","remainder","ReadableByteStreamControllerRespondInReadableState","transferredBuffer","firstPendingPullInto","ReadableStreamError","SetUpReadableStreamBYOBRequest","_strategyHWM","viewByteLength","SetUpReadableByteStreamController","startAlgorithm","pullAlgorithm","cancelAlgorithm","r","AcquireReadableStreamBYOBReader","ReadableStreamBYOBReader","ReadableStreamAddReadIntoRequest","IsReadableStreamBYOBReader","byobReaderBrandCheckException","ReadableStreamBYOBReaderRead","DataView","BYTES_PER_ELEMENT","ctor","emptyView","ReadableByteStreamControllerPullInto","ExtractHighWaterMark","strategy","defaultHWM","ExtractSizeAlgorithm","convertQueuingStrategy","convertQueuingStrategySize","convertUnderlyingSinkAbortCallback","convertUnderlyingSinkCloseCallback","convertUnderlyingSinkStartCallback","convertUnderlyingSinkWriteCallback","assertWritableStream","IsWritableStream","supportsAbortController","AbortController","WritableStream","rawUnderlyingSink","rawStrategy","underlyingSink","write","convertUnderlyingSink","InitializeWritableStream","sizeAlgorithm","WritableStreamDefaultController","writeAlgorithm","closeAlgorithm","abortAlgorithm","SetUpWritableStreamDefaultController","SetUpWritableStreamDefaultControllerFromUnderlyingSink","locked","streamBrandCheckException$2","IsWritableStreamLocked","WritableStreamAbort","WritableStreamCloseQueuedOrInFlight","WritableStreamClose","getWriter","AcquireWritableStreamDefaultWriter","WritableStreamDefaultWriter","_writer","_writableStreamController","_writeRequests","_inFlightWriteRequest","_closeRequest","_inFlightCloseRequest","_pendingAbortRequest","_backpressure","_abortReason","_abortController","_promise","wasAlreadyErroring","_resolve","_reject","_reason","_wasAlreadyErroring","WritableStreamStartErroring","closeRequest","writer","defaultWriterReadyPromiseResolve","closeSentinel","WritableStreamDefaultControllerAdvanceQueueIfNeeded","WritableStreamDealWithRejection","WritableStreamFinishErroring","WritableStreamDefaultWriterEnsureReadyPromiseRejected","WritableStreamHasOperationMarkedInFlight","storedError","writeRequest","WritableStreamRejectCloseAndClosedPromiseIfNeeded","abortRequest","defaultWriterClosedPromiseReject","WritableStreamUpdateBackpressure","backpressure","defaultWriterReadyPromiseInitialize","defaultWriterReadyPromiseReset","_ownerWritableStream","defaultWriterReadyPromiseInitializeAsResolved","defaultWriterClosedPromiseInitialize","defaultWriterReadyPromiseInitializeAsRejected","defaultWriterClosedPromiseResolve","defaultWriterClosedPromiseInitializeAsRejected","IsWritableStreamDefaultWriter","defaultWriterBrandCheckException","defaultWriterLockException","WritableStreamDefaultControllerGetDesiredSize","WritableStreamDefaultWriterGetDesiredSize","_readyPromise","WritableStreamDefaultWriterAbort","WritableStreamDefaultWriterClose","WritableStreamDefaultWriterRelease","WritableStreamDefaultWriterWrite","_readyPromiseState","defaultWriterReadyPromiseReject","defaultWriterReadyPromiseResetToRejected","releasedError","_closedPromiseState","defaultWriterClosedPromiseResetToRejected","WritableStreamDefaultWriterEnsureClosedPromiseRejected","chunkSize","_strategySizeAlgorithm","chunkSizeE","WritableStreamDefaultControllerErrorIfNeeded","WritableStreamDefaultControllerGetChunkSize","WritableStreamAddWriteRequest","enqueueE","_controlledWritableStream","WritableStreamDefaultControllerGetBackpressure","WritableStreamDefaultControllerWrite","abortReason","IsWritableStreamDefaultController","defaultControllerBrandCheckException$2","WritableStreamDefaultControllerError","_abortAlgorithm","WritableStreamDefaultControllerClearAlgorithms","createAbortController","_writeAlgorithm","_closeAlgorithm","WritableStreamMarkCloseRequestInFlight","sinkClosePromise","WritableStreamFinishInFlightClose","WritableStreamFinishInFlightCloseWithError","WritableStreamDefaultControllerProcessClose","WritableStreamMarkFirstWriteRequestInFlight","WritableStreamFinishInFlightWrite","WritableStreamFinishInFlightWriteWithError","WritableStreamDefaultControllerProcessWrite","_readyPromise_resolve","_readyPromise_reject","NativeDOMException","DOMException","DOMException$1","isDOMExceptionConstructor","createDOMExceptionPolyfill","ReadableStreamPipeTo","preventClose","preventAbort","shuttingDown","currentWrite","shutdownWithAction","isOrBecomesErrored","shutdown","WritableStreamDefaultWriterCloseWithErrorPropagation","destClosed","waitForWritesToFinish","oldCurrentWrite","originalIsError","originalError","doTheRest","newError","resolveLoop","rejectLoop","resolveRead","rejectRead","ReadableStreamDefaultController","IsReadableStreamDefaultController","defaultControllerBrandCheckException$1","ReadableStreamDefaultControllerGetDesiredSize","ReadableStreamDefaultControllerCanCloseOrEnqueue","ReadableStreamDefaultControllerClose","ReadableStreamDefaultControllerEnqueue","ReadableStreamDefaultControllerError","ReadableStreamDefaultControllerClearAlgorithms","_controlledReadableStream","ReadableStreamDefaultControllerCallPullIfNeeded","ReadableStreamDefaultControllerShouldCallPull","SetUpReadableStreamDefaultController","convertUnderlyingSourceCancelCallback","convertUnderlyingSourcePullCallback","convertUnderlyingSourceStartCallback","convertReadableStreamType","convertReadableStreamReaderMode","convertPipeOptions","isAbortSignal","assertAbortSignal","rawUnderlyingSource","underlyingSource","convertUnderlyingDefaultOrByteSource","InitializeReadableStream","underlyingByteSource","SetUpReadableByteStreamControllerFromUnderlyingSource","SetUpReadableStreamDefaultControllerFromUnderlyingSource","streamBrandCheckException$1","rawOptions","convertReaderOptions","rawTransform","transform","readable","convertReadableWritablePair","pipeTo","tee","reason1","reason2","branch1","branch2","resolveCancelPromise","reading","readAgainForBranch1","readAgainForBranch2","canceled1","canceled2","cancelPromise","forwardReaderError","thisReader","pullWithDefaultReader","chunk1","chunk2","cloneE","pull1Algorithm","pull2Algorithm","pullWithBYOBReader","forBranch2","byobBranch","otherBranch","byobCanceled","clonedChunk","otherCanceled","CreateReadableByteStream","compositeReason","cancelResult","ReadableByteStreamTee","readAgain","CreateReadableStream","ReadableStreamDefaultTee","impl","AcquireReadableStreamAsyncIterator","convertIteratorOptions","convertQueuingStrategyInit","byteLengthSizeFunction","ByteLengthQueuingStrategy","_byteLengthQueuingStrategyHighWaterMark","IsByteLengthQueuingStrategy","byteLengthBrandCheckException","countSizeFunction","CountQueuingStrategy","_countQueuingStrategyHighWaterMark","IsCountQueuingStrategy","countBrandCheckException","convertTransformerFlushCallback","convertTransformerStartCallback","convertTransformerTransformCallback","TransformStream","rawTransformer","rawWritableStrategy","rawReadableStrategy","writableStrategy","readableStrategy","transformer","readableType","writableType","convertTransformer","readableHighWaterMark","readableSizeAlgorithm","writableHighWaterMark","writableSizeAlgorithm","startPromise_resolve","startPromise","_writable","CreateWritableStream","_transformStreamController","_backpressureChangePromise","TransformStreamDefaultControllerPerformTransform","TransformStreamDefaultSinkWriteAlgorithm","_readable","flushPromise","_flushAlgorithm","TransformStreamDefaultControllerClearAlgorithms","TransformStreamError","TransformStreamDefaultSinkCloseAlgorithm","TransformStreamDefaultSinkAbortAlgorithm","TransformStreamSetBackpressure","TransformStreamDefaultSourcePullAlgorithm","TransformStreamErrorWritableAndUnblockWrite","_backpressureChangePromise_resolve","InitializeTransformStream","TransformStreamDefaultController","transformAlgorithm","TransformStreamDefaultControllerEnqueue","transformResultE","flushAlgorithm","_controlledTransformStream","_transformAlgorithm","SetUpTransformStreamDefaultController","SetUpTransformStreamDefaultControllerFromTransformer","IsTransformStream","streamBrandCheckException","IsTransformStreamDefaultController","defaultControllerBrandCheckException","terminate","TransformStreamDefaultControllerTerminate","readableController","ReadableStreamDefaultControllerHasBackpressure","targetDate","endTime","statusEmoji","retainContextWhenHidden","lastRunResult","tasksResult","taskInstancesJson","clear","_getTasks","tryNum","fetchLogForTask","targetTryNumber","taskSections","logData","contentHtml","statusClass","displayTry","ts","timestamp","lvl","extra","error_detail","lineClass","detail","crypto","_c","constants","TEMPLATE_PATTERN","CREATE_FLAGS","O_CREAT","O_EXCL","O_RDWR","IS_WIN32","platform","EBADF","ENOENT","_removeObjects","FN_RMDIR_SYNC","rmdirSync","_gracefulCleanup","rimraf","dirPath","recursive","FN_RIMRAF_SYNC","rmSync","tmpName","_parseArguments","opts","realpath","tmpdir","_getTmpDir","tmpDir","_assertOptionsBase","_getRelativePath","dir","_isUndefined","template","_assertAndSanitizeOptions","sanitizedOptions","tries","_getUniqueName","_generateTmpName","stat","tmpNameSync","_getTmpDirSync","_getRelativePathSync","_assertAndSanitizeOptionsSync","statSync","_removeFileAsync","fdPath","_handler","_isENOENT","unlink","_removeFileSync","rethrownException","closeSync","_isExpectedError","unlinkSync","_prepareTmpFileRemoveCallback","fd","removeCallbackSync","_prepareRemoveCallback","removeCallback","keep","unshift","_prepareTmpDirRemoveCallback","removeFunction","unsafeCleanup","rmdir","fileOrDirName","cleanupCallbackSync","called","_cleanupCallback","toRemove","_randomChars","rnd","randomBytes","pseudoRandomBytes","RANDOM_CHARS","actualOptions","getOwnPropertyNames","pid","isAbsolute","basename","detachDescriptor","discardDescriptor","pathToResolve","dirname","parentDir","_resolvePath","resolvedPath","relativePath","relative","realpathSync","_err","_resolvePathSync","mkdir","dirSync","mkdirSync","file","possibleErr","discardOrDetachDescriptor","openSync","setGracefulCleanup","MessageChannel","port1","ab","postMessage","stateEmoji","InstantiationStatus","TelemetryUtil","applyReplacements","replacementOptions","lookup","replacementString","shouldUseOneDataSystemSDK","getAdditionalCommonProperties","osShim","architecture","release","getInstance","_instance","BaseTelemetryReporter","telemetrySender","vscodeAPI","initializationOptions","userOptIn","errorOptIn","disposables","_onDidChangeTelemetryLevel","onDidChangeTelemetryLevel","telemetryLogger","createTelemetryLogger","updateUserOptIn","onDidChangeEnableStates","isErrorsEnabled","isUsageEnabled","instantiateSender","telemetryLevel","internalSendTelemetryEvent","dangerous","sendEventData","logUsage","sendTelemetryEvent","sendRawTelemetryEvent","modifiedProperties","propertyKey","TelemetryTrustedValue","sendDangerousTelemetryEvent","internalSendTelemetryErrorEvent","logError","sendTelemetryErrorEvent","sendDangerousTelemetryErrorEvent","BaseTelemetrySender","clientFactory","_instantiationStatus","NOT_INSTANTIATED","_exceptionQueue","_clientFactory","_telemetryClient","logEvent","INSTANTIATED","sendErrorData","errorData","errorProperties","_flushQueues","INSTANTIATING","TelemetryReporter","customFetcher","xhrOverride","fetcher","dataString","responseHeaders","req","responseData","machineId","appInsightsClient","basicAISDK","authConfig","disableAjaxTracking","disableExceptionTracking","disableFetchTracking","disableCorrelationHeaders","disableCookiesUsage","autoTrackPageVisitTime","emitLineDelimitedJson","appInsightsClientFactory","appInsightsCore","oneDs","postPlugin","collectorChannelPlugin","internalTesting","workspace","getConfiguration","getAICore","completedFlush","oneDataSystemClientFactory","initializationOpts","additionalCommonProperties","aIHandler","aiContext","askAIContext","tools","inputSchema","required","messages","LanguageModelChatMessage","User","recentHistory","turn","ChatRequestTurn","ChatResponseTurn","responseContent","ChatResponseMarkdownPart","Assistant","usedAppreciated","models","lm","selectChatModels","vendor","family","modelId","markdown","keepGoing","isCancellationRequested","chatResponse","toolCalls","fragment","LanguageModelToolCallPart","toolCall","toolName","toolInput","resultText","invokeTool","LanguageModelToolResultPart","callId","isChatCommandAvailable","commands","getCommands","latestDagLogs","sourceResult","logResult","appName","commandId","executeCommand","query","registerChatParticipant","participant","chat","createChatParticipant","Uri","joinPath","registerAiTools","AirflowClientAdapter","triggerDagRunTool","registerTool","TriggerDagRunTool","getFailedRunsTool","GetFailedRunsTool","listActiveDagsTool","ListActiveDagsTool","listPausedDagsTool","ListPausedDagsTool","getRunningDagsTool","GetRunningDagsTool","pauseDagTool","PauseDagTool","unpauseDagTool","UnpauseDagTool","getDagRunsTool","GetDagRunsTool","cancelDagRunTool","CancelDagRunTool","analyseDagLatestRunTool","AnalyseDagLatestRunTool","getDagHistoryTool","GetDagHistoryTool","getDagRunDetailTool","GetDagRunDetailTool","getTodayTool","GetTodayTool","getDagSourceCodeTool","GetDagSourceCodeTool","goToDagViewTool","GoToDagViewTool","goToDagLogViewTool","GoToDagLogViewTool","goToDagRunHistoryTool","GoToDagRunHistoryTool","goToProvidersViewTool","GoToProvidersViewTool","goToConnectionsViewTool","GoToConnectionsViewTool","goToVariablesViewTool","GoToVariablesViewTool","goToConfigsViewTool","GoToConfigsViewTool","goToPluginsViewTool","GoToPluginsViewTool","goToServerHealthViewTool","GoToServerHealthViewTool","strShimFunction","strShimObject","strShimUndefined","strShimPrototype","freeGlobal","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","padding","bitStorage","bitCounter","fromCharCode","strOnPrefix","strAttachEvent","strAddEventHelper","strDetachEvent","strRemoveEventListener","strEvents","strVisibilityChangeEvt","strPageHide","strPageShow","strUnload","strBeforeUnload","strPageHideNamespace","strPageShowNamespace","rRemoveEmptyNs","rRemoveTrailingEmptyNs","_guid","elmNodeData","eventNamespace","_normalizeNamespace","_getEvtNamespace","theNamespace_1","parsedEvent","ns","_getRegisteredEvents","aiEvts","registeredEvents","_doDetach","handlerRef","useCapture","_doUnregister","unRegFn","capture","mergeEvtNamespace","theNamespace","namespaces","eventOn","_doAttach","registeredEvent","guid","eventOff","evtName_1","found_1","eventCache","evtType","_unregisterEvents","regEvent","_addEventListeners","excludeEvents","addEventHandler","removeEventListeners","removeEventHandler","addPageUnloadEventListener","addEventListeners","removePageUnloadEventListener","addPageHideEventListener","newNamespaces","pageUnloadAdded","visibilityState","removePageHideEventListener","addPageShowEventListener","pageShowAdded","removePageShowEventListener","_DYN_WARN_TO_CONSOLE","_DYN_THROW_INTERNAL","_DYN_WATCH","_DYN_APPLY","_DYN_SPLICE","_DYN_LOGGER","_DYN_CANCEL","_DYN_REMOVE_NOTIFICATION_0","_DYN_ADD_NOTIFICATION_LIS1","_DYN_IS_INITIALIZED","_DYN_GET_NOTIFY_MGR","_DYN_GET_PLUGIN","_DYN_NAME","_DYN_PROCESS_NEXT","_DYN_GET_PROCESS_TEL_CONT2","_DYN_ENABLED","_DYN_STOP_POLLING_INTERNA3","_DYN_UNLOAD","_DYN_ON_COMPLETE","_DYN_VERSION","_DYN_LOGGING_LEVEL_CONSOL4","_DYN_CREATE_NEW","_DYN_TEARDOWN","_DYN_MESSAGE_ID","_DYN__DO_TEARDOWN","_DYN_UPDATE","_DYN_GET_NEXT","_DYN_SET_NEXT_PLUGIN","_DYN_USER_AGENT","_DYN_REPLACE","_DYN_SUBSTRING","_DYN_TYPE","_DYN_EVT_NAME","_DYN_STATUS","_DYN_GET_ALL_RESPONSE_HEA5","_DYN_IS_CHILD_EVT","_DYN_GET_CTX","_DYN_SET_CTX","_DYN_URL_STRING","_DYN_TIMEOUT","_DYN_TRACE_FLAGS","pathList","asWebviewUri","popupMessage","outputChannel","createOutputChannel","appendLine","show","NEW_LINE","jsonResult","preText","extVersion","__dirname","openTextDocument","showTextDocument","viewColumn","preview","convertMsToTime","valueOf","jsonString","dateString","dNum","logsOutputChannel","toLocaleString","showInformationMessage","padTo2Digits","padStart","milliseconds","seconds","hours","STR_CHANNELS","STR_CORE","STR_CREATE_PERF_MGR","STR_DISABLED","STR_EXTENSION_CONFIG","STR_EXTENSIONS","STR_PROCESS_TELEMETRY","STR_PRIORITY","STR_EVENTS_SENT","STR_EVENTS_DISCARDED","STR_EVENTS_SEND_REQUEST","STR_PERF_EVENT","STR_OFFLINE_STORE","STR_OFFLINE_SENT","STR_OFFLINE_DROP","STR_GET_PERF_MGR","STR_DOMAIN","STR_PATH","STR_NOT_DYNAMIC_ERROR","STR_REDACTED","DEFAULT_SENSITIVE_PARAMS","pluginsJson","executors","macros","reporter","isTelemetryEnabled","errorOrProps","CFG_HANDLER_LINK","BLOCK_DYNAMIC","FORCE_DYNAMIC","_cfgDeepCopy","target_1","_canMakeDynamic","getFunc","throwInvalidAccess","aggregationErrorType","arrayMethodsToPatch","_throwDynamicError","_getOwnPropGetter","_setDynamicProperty","getter","trk","clr","checkDynamic","isObjectOrArray","_getProperty","_makeDynamicObject","activeHandler","act","chng","ro","upd","isReferenced","rf","hdlr","valueState","newIsObjectOrArray","_createDynamicProperty","_setDynamicPropertyState","flags","isDynamic","inPlace","blkProp","blockDynamicConversion","orgMethod","_patchArray","symPrefix","symPostfix","_createDynamicHandler","getDynamicConfigHandler","theState","watch","use","_createAndUseHandler","allowUpdate","prevUpd","dynamicPropertySymbol","dynamicPropertyReadOnly","dynamicPropertyReferenced","dynamicPropertyBlockValue","dynamicPropertyDetail","_waitingHandlers","_watcherTimer","_useHandler","prevWatcher","_notifyWatchers","notifyHandlers","watcherFailures_1","sourceErrors","theMessage","srcError","throwAggregationError","_createState","createDynamicConfig","onConfigChange","_logInvalidAccess","runInfo","fileBits","lastModified","strDocumentMode","strLocation","strConsole","strJSON","strCrypto","strMsCrypto","strReactNative","strMsie","strTrident","strXMLHttpRequest","_isTrident","_navUserAgentCheck","_enableMocks","_useXDomainRequest","_beaconsSupported","_hasProperty","theClass","supported","getLocation","checkForMock","mockLocation","getConsole","hasJSON","getJSON","getCrypto","getMsCrypto","isReactNative","product","isIE","getIEVersion","userAgentStr","navigator_1","ua","tridentVer","isBeaconsSupported","isFetchSupported","withKeepAlive","isSupported","useXDomainRequest","isXhrSupported","fieldRedaction","redactUrls","hasCredentials","hasQueryParams","sensitiveParams","questionMarkIndex","redactQueryParams","baseUrl","queryString","hashIndex","hasPotentialSensitiveParam","paramCheck","resultParts","anyParamRedacted","pairs","equalsIndex","paramName","shouldRedact","redactQueryParameters","providersJson","providers","provider","packageName","package_name","dateRegex","validStatuses","filters","selectedDate","selectedStatus","selectedDagId","allDagIds","dagsResult","dagRunsJson","allRuns","filteredRuns","dagIdOptions","_getStatusEmoji","ChannelControllerPriority","DisabledPropertyName","listenerFuncs","_aiNamespace","_listenerProxyFunc","getDebugExt","getDebugListener","strExecutionContextKey","strParentContextKey","strChildrenContextKey","_defaultPerfManager","PerfEvent","payloadDetails","theDetails_1","complete","childTime","childEvts","childEvt","exTime","ParentContextKey","ChildrenContextKey","doPerfActiveKey","doPerf","mgrSource","getSource","currentActive","children","getGblPerfMgr","_debugState","_debugResult","_debugHandled","STR_PROMISE","REJECTED","doAwaitResponse","doAwait","resolveFn","rejectFn","finallyFn","finally","doFinally","_hasInitEvent","_promiseDebugEnabled","STRING_STATES","DISPATCH_EVENT","_hasInitEventFn","createEvent","initEvent","_hasPromiseRejectionEvent","_promiseCls","_allSyncSettledCreator","_promiseCreator","NODE_UNHANDLED_REJECTION","UNHANDLED_REJECTION","_currentPromiseId","_uniquePromiseId","_unhandledRejectionTimeout","dumpFnObj","_createPromise","processor","_settledValue","_thePromise","additionalArgs","_hasResolved","_parentId","_handled","_unHandledRejectionHandler","_then","onResolved","_processQueue","_strState","pending","_createSettleIfFn","allowState","_notifyUnhandledRejection","populateEvent","useNewEvent","theEvt","emitEvent","onFinally","thenFinally","catchFinally","stateFn","_addDebugState$1","_rejectFn","_createAllPromise","values_1","pending_1","syncItemProcessor","createAsyncPromise","callbackTimeout","timeoutItemProcessor","createNativePromise","PrmCls","createSyncPromise","createSyncAllSettledPromise","processItem","createPromise","createAllPromise","strGetPlugin","_isinitialized","_rootCtx","_nextPlugin","_unloadHandlerContainer","currentCtx","_setDefaults","unloadDone","theUnloadCtx","theUnloadState","_unloadCallback","updateDone","theUpdateCtx","theUpdateState","_updateCallback","Constructor","Prototype","strFunction","DynInstFuncTable","DynProxyTag","DynClassName","DynClassNamePrefix","DynInstChkTag","DynAllowInstChkTag","DynProtoDefaultOptions","UnknownValue","str__Proto","DynProtoBaseProto","DynProtoGlobalSettings","DynProtoCurrent","strUseBaseInst","strSetInstFuncs","Obj","_objGetPrototypeOf","_objGetOwnProps","_gbl","_gblInst","_isObjectOrArrayPrototype","_isObjectArrayOrFunctionPrototype","_getObjProto","newProto","curProto","_forEachProp","_isDynamicCandidate","skipOwn","_throwTypeError","_hasVisited","_populatePrototype","className","baseInstFuncs","setInstanceFunc","instFuncTable","instFuncs_1","dynProtoProxy","instFunc","currentDynProtoProxy","canAddInst","objProto","protoFunc","_getInstFunc","_getProtoFunc","_createDynamicPrototype","_getObjName","unknownValue","dynamicProto","delegateFunc","classProto","thisTarget","thisProto","_checkPrototype","perfOptions","useBaseInst","instFuncs","_getInstanceFuncs","baseFuncs","_instFuncProxy","funcHost","baseProto","_getBaseFuncs","variablesJson","variables","today","formattedDate","dayOfWeek","toLocaleDateString","weekday","year","month","day","FormData","formDataToBlob","B","_IsFav","IsFiltered","ApiResponse","IsActive","Owners","Tags","setContextValue","contextValue","ThemeColor","filterString","words","word","_maxHooks","_hookAddMonitor","createUnloadHookContainer","_hooks","oldHooks","selectedStartDate","selectedEndDate","startDateTime","endDateTime","runTime","blobFromSync","fromBlob","blobFrom","fileFrom","fromFile","fileFromSync","BlobDataItem","mtimeMs","createReadStream","timeRange","dagFilter","noFailuresMessage","connectionsJson","connections","conn","connId","conn_id","connType","conn_type","schema","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","definition","chunkId","u","nmd","paths","installedChunk","moreModules","modules","chunkIds","ids","runtime","installChunk","extensionVersion","packageJSON","vscodeVersion","osVersion","appHost","language","adminTreeView","AdminTreeView","reportTreeView","ReportTreeView","registerTreeDataProvider","registerCommand","openExternal"],"ignoreList":[],"sourceRoot":""}