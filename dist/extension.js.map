{"version":3,"file":"extension.js","mappings":";UAIIA,E,+JCkBAC,GAAgB,SAAc,CAC9BC,YAAa,EAAAC,EACbC,wBAAyB,CAAEC,MAE/B,SAA0BD,GAKtB,OAHIA,GAA6BA,EAAwBE,aAAgBF,EAAwBG,cAC7F,QAAW,8CAER,CACX,KAKI,EAAiC,SAAUC,GAE3C,SAASC,IACL,IAAIC,EAAQF,EAAOG,KAAKC,OAASA,KA0CjC,OAzCA,OAAaH,EAAiBC,EAAO,SAAUG,EAAOC,GAClDD,EAAM,MAA4C,SAAUE,EAAQC,EAAYC,EAAQC,IACpF,QAAOL,EAAO,WAAc,MAAO,4BAA8B,EAAG,WAChE,IACIC,EAAM,OAA0C,OAAoBC,EAAQd,EAAegB,GAAUJ,EAAMI,QAAQ,GAAOE,IAAKH,EAAYC,EAAQC,EACvJ,CACA,MAAOE,GACH,IAAIC,EAAWR,EAAMI,OACjBK,GAAU,SAAQF,IAC4C,IAA9DE,EAAQ,MAAqC,cAE7CA,GAAW,iEAEf,QAAeD,EAAU,EAAmC,IAA6D,0DAA4DC,EACzL,CACJ,EAAG,WAAc,MAAO,CAAGP,OAAQA,EAAQC,WAAYA,EAAYC,OAAQA,EAAQC,oBAAqBA,EAAwB,EACpI,EACAL,EAAMU,MAAQ,SAAUC,IACpB,QAAOX,EAAO,WAAc,MAAO,uBAAyB,EAAG,WAC3D,IAAIY,EAAgBD,EACpB,GAAIC,EAAe,CACfA,EAAc,MAAsCA,EAAc,OAAuC,CAAC,EAC1GA,EAAc,MAAoCC,YAAa,WAC1D,QAAUD,EAAcE,WACzBF,EAAcE,QAAU,GAE5B,IAAIC,EAAUH,EAAcI,IAAMJ,EAAcI,KAAO,CAAC,EACxDD,EAAQE,IAAMF,EAAQE,KAAO,CAAC,EAC9BF,EAAQE,IAAIC,IAAM,KAClB,IAAIC,EAAWP,EAAcO,SAAWP,EAAcO,UAAY,CAAC,EACnEA,EAAS,MAA2CA,EAAS,OAA4C,CAAC,EAC1G,IAAIC,EAAiBD,EAAS,MAC9BC,EAAe,MAAeA,EAAe,OAAgBpB,EAAMqB,qBAAuB,IAC9F,CACApB,EAAMS,MAAME,EAChB,EAAG,WAAc,MAAO,CAAGD,KAAMA,EAAS,GAAKA,EAAS,KAC5D,EACAX,EAAM,MAA0D,SAAUsB,GACtE,OAAOrB,EAAM,MAAwDqB,GAAa,cACtF,CACJ,GACOzB,CACX,CAQA,OArDA,QAAUD,EAAiBD,GAmD3BC,EAAgB2B,QAAQ,EAEjB3B,CACX,CAvDoC,CAuDlC,I,sEChFK,IAAI4B,EAAY,GACZC,EAA2B,8DAC3BC,EAAc,UACdC,EAAiB,Y,2ICVxBC,E,sCAaOC,EAAoB,oBAC3BC,EAAoB,KAASC,eAM7BC,IAA0BJ,EAAK,CAAC,GAC7B,GAA0C,EAC7CA,EAAG,GAA0C,EAC7CA,EAAG,GAA0C,EAC7CA,EAAG,GAA2C,EAC9CA,EAAG,MAAqF,EACxFA,EAAG,MAAqF,EACxFA,EAAG,MAAsF,EACzFA,GAoBG,SAASK,EAAgBC,GAI5B,QAASA,IAAU,OAAa,SAAkBA,GACtD,CAMO,SAASC,EAAYC,GACxB,GAAIA,EAAQ,CACR,IAAIC,GAAgB,SAAWD,EAAQ,KACvC,GAAIC,GAAiB,EACjB,OAAO,SAAQD,EAAQC,EAE/B,CACA,OAAO,IACX,CAiBO,SAASC,EAAUJ,GACtB,SAAIA,IAAS,SAASA,IAAUA,GAAS,GAAoCA,GAAS,EAI1F,CASO,SAASK,EAAiBC,EAAMC,EAAUC,GAE7C,IAAMD,IAAaR,EAAgBQ,IAA8B,iBAATD,EACpD,OAAO,KAGX,IA6JwBN,EA7JpBS,SAAkBF,EAEtB,GAAiB,WAAbE,GAAsC,WAAbA,GAAsC,YAAbA,IAA0B,SAAQF,GACpFA,EAAW,CAAEP,MAAOO,QAEnB,GAAiB,WAAbE,GAA0Bb,EAAkBhC,KAAK2C,EAAU,UAG/D,IAAI,SAAkBA,EAAS,QAC7BA,EAAS,QAAoC,QAAe,SAASA,EAAS,UAC7E,SAASA,EAAS,UAAqC,SAAUA,EAAS,UAC1E,SAAQA,EAAS,OAErB,OAAO,UAPPA,EAAW,CAAEP,MAAOQ,EAAmBE,KAAKC,UAAUJ,GAAYA,GAUtE,IAAI,SAAQA,EAAS,UACHA,EAAS,MAuKd,MAAoC,GAtK7C,OAAO,KAKX,KAAK,SAAkBA,EAASK,MAAO,CACnC,IAAI,SAAQL,EAAS,UAuIX,KAFUP,EArIkDO,EAASK,OAuItCZ,EAAQ,GAA6BA,GAAS,IAAwD,KAAVA,GAtIjI,OAAO,KAEXO,EAAS,MAAkCA,EAAS,MAAgCM,UACxF,CACA,OAAON,CACX,CACO,SAASO,EAAwBd,EAAOY,EAAMG,GACjD,IAAIC,GAAoB,EACxB,KAAK,SAAYhB,GAYb,GAXIY,EAAO,IACM,KAATA,EAEAI,EAAmB,KAEdJ,GAAQ,KAEbI,EAAoBJ,GAAQ,IA2H5C,SAAoBZ,GAGhB,OAAIA,GAAS,GAAKA,GAAS,CAI/B,CA9HYiB,CAAWF,IAEe,IAAtBC,IAEAA,EAAmB,GAEvBA,GAAoBD,MAEnB,CACD,IAAIN,EAAWX,EAAuBoB,EAAkBlB,MAAY,GAC1C,IAAtBgB,IAAyC,IAAdP,EAE3BO,GAAoBP,EAEF,IAAbA,IACLO,EAAmBP,EAE3B,CAEJ,OAAOO,CACX,CAmDO,SAASG,EAAOC,EAAKC,EAAMC,EAAMC,EAAMC,GAE1C,IAAIC,EAAW,CAAC,EACZC,GAAO,EACPC,EAAI,EACJC,EAASC,UAAU,MACnBC,EAAUD,UAOd,KALI,SAAUC,EAAQ,MAClBJ,EAAOI,EAAQ,GACfH,KAGGA,EAAIC,EAAQD,IACXP,EAAMU,EAAQH,IAClB,SAAcP,EAAK,SAAUW,EAAM/B,GAE3B0B,GAAQ1B,IAAS,SAASA,IACtB,SAAQA,IACRyB,EAASM,GAAQN,EAASM,IAAS,IACnC,SAAW/B,EAAO,SAAUgC,EAAYC,GAChCD,IAAc,SAASA,GACvBP,EAASM,GAAME,GAAcd,GAAO,EAAMM,EAASM,GAAME,GAAaD,GAGtEP,EAASM,GAAME,GAAcD,CAErC,IAGAP,EAASM,GAAQZ,GAAO,EAAMM,EAASM,GAAO/B,GAIlDyB,EAASM,GAAQ/B,CAEzB,GAEJ,OAAOyB,CACX,EA7NuC,YAIF,WA0N9B,IAAIS,EAAU,MA8Bd,SAASC,EAA2BC,EAAOC,GAC9C,IAAIC,EAAMF,EACVE,EAAI,MAAsCA,EAAI,OAAuC,CAAC,EACtFA,EAAI,MAAoC,MAAkEA,EAAI,MAAoC,OAAmE,CAAC,EACtNA,EAAI,MAAoC,MAAgED,GAAcH,GAC1H,CAKO,SAAShB,EAAkBlB,GAC9B,IAAIuC,EAAU,EACd,GAAIvC,QAAuC,CACvC,IAAIwC,SAAiBxC,EACL,WAAZwC,EACAD,EAAU,EAEO,WAAZC,EACLD,EAAU,EAEO,YAAZC,EACLD,EAAU,EAELC,IAAY,OACjBD,EAAU,GACN,SAAQvC,IACRuC,EAAU,KACNvC,EAAM,MAAoC,IAE1CuC,GAAWrB,EAAkBlB,EAAM,MAGlCJ,EAAkBhC,KAAKoC,EAAO,WAEnCuC,EAAU,KAAmDrB,EAAkBlB,EAAM,QAGjG,CACA,OAAOuC,CACX,CAIO,SAASE,IACZ,SAAS,SAAc,SAC3B,CAqDO,SAASC,EAAkB1C,GAC9B,OAAOA,EAAQ,CACnB,C,mGC7XO,IAAI2C,EAAkB,aAClBC,EAAgB,UAChBC,EAAe,UACfC,EAA0B,mBAC1BC,EAAa,QACbC,EAAc,SACdC,EAA6B,uB,4JCV7BC,GAAyC,E,QAAA,GAAgB,CAIhEC,QAAS,EAITC,mBAAoB,EAIpBC,aAAc,EAIdC,kBAAmB,EAInBC,WAAY,EAIZC,UAAW,EAIXC,kBAAmB,I,8BC7BZC,EAAa,YCGbpE,EAAY,GAGZqE,EAAc,OAEdC,EAAc,UAGdC,EAAwB,qBACxBC,EAAuB,4BACvBC,EAAoB,gBACpBC,EAA0B,eAK1BC,EAAqB,iBACrBC,EAAgB,YAChBC,EAA0B,6BAC1BC,EAAkB,cAClBC,EAAc,SACdC,EAAwB,sBACxBC,EAAqB,eACrBC,EAAkB,aAGlBC,EAAY,QACZC,EAAY,QACZC,EAAW,OC1BXC,EAA6B,sBAC7BC,EAA6B,4BAC7BC,EAA6B,0BAC7BC,EAAsB,eACtB/B,EAAc,SACdgC,EAAc,SACdC,EAAa,OACbC,EAAa,QACbC,EAAc,SACdC,EAAY,OACZC,EAAa,QACbC,EAAqB,cACrBC,EAAY,OACZC,EAAgB,UAChB7C,EAAkB,aAClB8C,EAA4B,qBAC5BC,EAA6B,uBAE7BC,EAA6B,sBAC7BC,GAAqB,eAErBC,GAA2B,oBAC3BC,GAAwB,iBACxBC,GAA6B,wBAE7BC,GAAuB,gBACvBC,GAAyB,mBACzBC,GAA6B,uBAC7BC,GAA6B,sBAC7BC,GAA6B,2BAC7BC,GAAsB,gBACtBC,GAA4B,qBAC5BC,GAAoB,cACpBC,GAAe,UACfC,GAAoB,cACpBC,GAAe,UACfC,GAAiB,WACjBC,GAAwB,iBACxBC,GAA4B,qBAC5BC,GAAqB,eAErBC,GAA8B,uBAC9BC,GAAkB,aAClBC,GAAkB,YAClBC,GAAiB,WACjBrE,GAAe,UACfsE,GAAmB,aACnBC,GAAoB,cACpBC,GAA8B,uBAC9BC,GAA8B,uBAC9BC,GAAkB,aAElBC,GAA8B,uBAG9BC,GAAoB,cACpBC,GAAe,UACfC,GAAY,OC1DvB,SAASC,GAAeC,GACpB,IAAIC,GAAWD,EAAS/I,KAAO,CAAC,GAAY,OAC5C,OAAIgJ,IAAU,QAAgBA,EAAOrD,IAC1BqD,EAAOrD,GAEX,IACX,CACA,SAASsD,GAAUC,GAEf,IADA,IAAIC,EAAQ,KACHC,EAAK,EAAa,OAAVD,GAAkBC,EAAKF,EAAUhF,GAAmCkF,IACjFD,EAAQL,GAAeI,EAAUE,IAErC,OAAOD,CACX,CAOA,IAAIE,GAA4B,WAM5B,SAASA,EAAWC,EAAMC,GACtB,IAAIC,EAASD,EAAY,GAAGrD,GAAkCqD,GAAa,GACvEvK,EAAQD,KACR0K,EAASR,GAAUO,GACvBxK,EAAMmH,GAAiC,WACnC,OAAOmD,CACX,EACAtK,EAAM0K,MAAQ,WAEV,OAAOD,GAAUjJ,CACrB,EACAxB,EAAMoH,GAAkC,WACpC,OAAOoD,EAAOtF,EAClB,EACAlF,EAAMqH,GAAoC,WACtC,OAAOmD,CACX,EACAxK,EAAM2K,SAAW,SAAUZ,GACvB,QAAIA,IACAS,EAAOlD,GAA8ByC,GAChCU,IAEDA,EAASX,GAAeC,KAErB,EAGf,EACA/J,EAAMuH,GAAkC,SAAUqD,EAAWC,GAEzD,IAAIX,EACJ,GAAIU,EAAYJ,EAAOtF,GAAmC,CACtD,IAAI4F,EAAMN,EAAOtF,GAAoC0F,GAChD,SAAkBC,KACnBC,EAAMD,EAAYC,EAAMD,EAAYC,GAExCZ,EAAYM,EAAOO,OAAOH,EAAWE,GAErCL,EAASR,GAAUO,EACvB,CACA,OAAO,IAAIH,EAAWC,EAAMJ,EAChC,CACJ,CAQA,OAHAG,EAAWW,OAAS,SAAUV,EAAMJ,GAChC,OAAO,IAAIG,EAAWC,EAAMJ,EAChC,EACOG,CACX,CAzD+B,G,gCClB3BY,GAAkC,WAClC,SAASA,IACL,IAAIC,GAAuB,EACvBC,GAA6B,EAC7BC,GAAkB,EAClBC,EAAwB,sBACxBC,GAAgB,GACpB,OAAaL,EAAkBlL,KAAM,SAAUC,GAK3CA,EAAM8G,GAAgE,WAClE,OAAOoE,CACX,EAMAlL,EAAMuL,iBAAmB,WACjBH,IACAA,GAAkB,EACbE,IAEDJ,GAAuB,GAGnC,EAKAlL,EAAM+G,GAAsE,WACxE,OAAOoE,CACX,EAKAnL,EAAMgH,GAAoE,WACtE,OAAOqE,CACX,EAMArL,EAAMiH,GAAkD,SAAUuE,GACzDF,IACGE,GACAH,EAAwBG,EACxBL,GAA6B,EAC7BG,GAAgB,GAGhBH,GAA6B,EAGjCD,GAAuB,EAE/B,CACJ,EACJ,CAUA,OAFAD,EAAiB1J,QAAQ,EAElB0J,CACX,CA1EqC,GCEjCxF,GAA4B,WAC5B,SAASA,IACL,IAAIgG,EAAyB,CAAC,GAU9B,OAAahG,EAAY1F,KAAM,SAAUC,GACrCA,EAAMuJ,IAAkE,SAAUmC,EAAYC,GAC1F,GAAID,GAAcC,EACd,IACI,IAAIC,GAbOC,EAa0BH,EAAWnE,GAAgC,KAZxFuE,EAAS,GACTD,IACA,SAAWA,EAAQ,SAAU3J,GACzB4J,EAAOxE,IAA8B,SAAQpF,GACjD,GAEG4J,GAOK,GAAqB,sBAAjBH,EACA,OAAOC,EAGX,IADA,IAAIG,EAxBJ,IAwBiBC,SAASL,EAAc,IAC/B9H,EAAI,EAAGA,EAAI+H,EAAa1G,KAAqCrB,EAClE4H,EAAuBG,EAAa/H,KAAM,WAAYkI,CAE9D,CACA,MAAOE,GACH,MAAO,EACX,CAxBZ,IAA2BJ,EACnBC,EAyBA,MAAO,EACX,EACA9L,EAAwD,eAAI,SAAUkM,GAClE,IAAIC,EAAiBV,EACjBjJ,GAAO,SAAQ0J,GACnB,YAA6BE,IAAzBD,EAAe3J,IAAuB2J,EAAe3J,IAAQ,oBAG1D2J,EAAe3J,IACf,EACX,CACJ,EACJ,CAOA,OAFAiD,EAAWlE,QAAQ,EAEZkE,CACX,CAjD+B,GCyBxB,SAAS4G,GAAsCC,GAClD,IAAIC,EAGAC,GAAgB,SAA0B,KAAhBC,KAAKC,UAFlBC,KAIjB,OADAJ,EAAeE,KAAKG,IAAI,EAAGN,GAAgBE,GACpC,SAAQD,EAlCF,IAmCjB,CCrBA,ICvBI3K,GD2BAiL,GAAgB,IAChBC,IAAsB,SAAQD,GAFA,MAG9BE,GAAW,WACXC,GAAI,IACJC,GAAY,KAKZC,GAA4B,WAW5B,SAASA,EAAWC,EAAaC,EAAgB1K,EAAkB2K,EAAmBC,EAAwBC,EAAmBjN,GAC7H,IAAIkN,EAAU,OACVC,EAAc,WAEdC,IAAyBL,EACzBM,GAAkB,EAClBC,EAAgBR,EAChBS,EAAmB,CAAC,EACpBC,IAAuBP,EACvBQ,EAAkBT,GAA0B,KAC5CU,EA+OZ,SAAyB1N,GAErB,OAAIA,GAAOA,EAAI2N,aACJ3N,EAAI2N,aAFE,CAAC,CAKtB,CArPuBC,CAAgB5N,GAC3B6N,EAAyBC,GAAmBJ,EAASC,aAjCrC,QAiC0E,GAC1FI,EAA+BD,GAAmBJ,EAASC,aAjCrC,KAiCgF,GACtGK,EAAiBF,GAAmBJ,EAASO,YAAa1B,GAAe,GACzE2B,EAAuB/B,KAAKgC,IAAIL,GAAmBJ,EAASO,YAAazB,GAAqB,GAAIuB,IACtG,OAAanB,EAAYnN,KAAM,SAAUC,GA2JrC,SAAS0O,EAAiBC,EAAQC,EAAQC,EAASC,EAAeC,EAAkBC,EAAkBC,IAClG,SAAcN,EAAQ,SAAUO,EAAKC,GACjC,IAAIlL,EAAO,KACX,GAAIkL,IAAY,QAAgBA,GAAW,CACvC,IAAIC,EAAOP,EACPQ,EAASH,EACTI,EAAkBP,EAClBQ,EAAUX,EAEd,GAAIlB,IAAyBoB,GAAiB7B,GAAUuC,KAAKN,GAAM,CAC/D,IAAIO,EAAUP,EAAIQ,MAAM,KACpBC,EAASF,EAAQ3L,OACrB,GAAI6L,EAAS,EAAG,CACRL,IAEAA,EAAkBA,EAAgBM,SAEtC,IAAK,IAAIxF,EAAK,EAAGA,EAAKuF,EAAS,EAAGvF,IAAM,CACpC,IAAIyF,EAASJ,EAAQrF,GAErBmF,EAAUA,EAAQM,GAAUN,EAAQM,IAAW,CAAC,EAChDT,GAAQ,IAAMS,EACVP,GACAA,EAAgBQ,KAAKD,EAE7B,CACAR,EAASI,EAAQE,EAAS,EAC9B,CACJ,CACA,IAAII,EAAajB,GAxC7B,SAA0BM,GACtB,IAAItD,EAAS+B,EAAiBuB,GAQ9B,YAPehD,IAAXN,IACIsD,EAAKtL,QAAU,IAEfgI,GAAS,SAAcsD,EAAM,kBAAmB,SAAcA,EAAM,YAExEvB,EAAiBuB,GAAQtD,GAEtBA,CACX,CA8B8CkE,CAAiBZ,GAOnD,GALInL,GADC8L,GAAcnC,GAAiBA,EAAcqC,YAAYb,EAAMC,GACzDzB,EAAc1L,MAAMkN,EAAMC,EAAQF,EAAUzM,IAG5C,QAAiB2M,EAAQF,EAAUzM,GAEpC,CAEN,IAAIwN,EAAWjM,EAAK/B,MAKpB,GAJAqN,EAAQF,GAAUa,EACdlB,GACAA,EAAiBM,EAAiBD,EAAQpL,GAE1CgL,GAAsC,iBAAbiB,KAA0B,SAAQA,GAAW,CACtE,IAAIC,EAAUb,EACVa,IACAA,EAAUA,EAAQP,SACVE,KAAKT,GAGjBX,EAAiBS,EAAUe,EAAUd,EAAO,IAAMC,EAAQP,EAAeqB,EAASnB,EAAkBC,EACxG,CACJ,CACJ,CACJ,EACJ,CAjNAjP,EAAMoQ,cAAgB,SAAUC,EAAUC,EAAYC,EAAQC,EAAkBC,EAAYC,GACxF,MAAO,CACHC,QAAS,GACTC,YAAapP,EACbqP,SAAU,KACVC,WAAY,GACZC,WAAY,GACZC,QAAS,GACTnG,UAAW,EACXwF,SAAUA,EACVC,WAAYA,EACZC,OAAQA,EACRU,SAAUT,EACVE,SAAUA,EACVD,WAAYA,EAEpB,EACAzQ,EAAMkR,cAAgB,SAAUC,EAASC,EAAUC,GAC/C,IAAIC,EAAeH,GAAWC,IAAaD,EAAQN,SAiFnD,OAhFIS,IACA,QAAOnE,EAAa,WAAc,MAAO,0BAA4B,EAAG,WAYpE,IAXA,IAAIjD,EAAYkH,EAAS5G,SACrBoG,EAAcO,EAAQP,YACtBW,EAAgBJ,EAAQtG,UACxB2G,GAAc,EACdC,EAAe,GACfV,EAAa,GACbW,EAAkBP,EAAQF,SAC1BU,EAAiBD,EAAkBrD,EAA+BF,EAClEyD,EAAgBF,EAAkBlD,EAAuBF,EACzDlE,EAAK,EACLyH,EAAY,EACTzH,EAAKF,EAAUpG,QAAQ,CAC1B,IAAIiG,EAAWG,EAAUE,GACzB,GAAIL,EAAU,CACV,GAAIwH,GAAiBF,EAAmB,CAEpCF,EAAQN,SAAWO,EAAS1B,MAAMtF,GAClC,KACJ,CACA,IAAI0H,EAAY9R,EAAM+R,aAAahI,GACnC,GAAI+H,GAAaA,EAAUhO,QAAU8N,EAAe,CAEhD,IAAII,EAAaF,EAAUhO,OAE3B,GADkB8M,EAAY9M,OACZkO,EAAaL,EAAgB,CAE3CR,EAAQN,SAAWO,EAAS1B,MAAMtF,GAClC,KACJ,CACIwG,IACAA,GAAe,MAEnBA,GAAekB,IACfD,EA9FZ,MAkGgB,SAAUjB,EAAa,EAAG,GAC1BiB,EAAY,GAEhBL,GAAc,EACdD,GACJ,MAEQO,EAEAL,EAAa3B,KAAK/F,GAGlBgH,EAAWjB,KAAK/F,GAIpBG,EAAUa,OAAOX,EAAI,GACrBA,GAER,CACAA,GACJ,CASA,GARIqH,EAAa3N,OAAS,GACtBqN,EAAQL,WAAWhB,KAAKzF,GAAWW,OAAOoG,EAAS9G,OAAQmH,IAG3DV,EAAWjN,OAAS,GACpBqN,EAAQJ,WAAWjB,KAAKzF,GAAWW,OAAOoG,EAAS9G,OAAQyG,IAG3DS,EAAa,CACbL,EAAQH,QAAQlB,KAAKsB,GACrBD,EAAQP,YAAcA,EACtBO,EAAQtG,UAAY0G,EACpB,IAAInP,EAASgP,EAAS9G,QACuB,KAAzC,SAAW6G,EAAQR,QAASvO,IAC5B+O,EAAQR,QAAQb,KAAK1N,EAE7B,CACJ,EAAG,WAAc,MAAO,CAAG+O,QAASA,EAASC,SAAU,CAAE9G,KAAM8G,EAAS9G,OAAQ2H,KAAMb,EAAS5G,UAAY0H,IAAKb,EAAsB,GAEnIC,CACX,EACAtR,EAAM+R,aAAe,SAAUI,GAC3B,IACI,OAAO,QAAOhF,EAAa,WAAc,MAAO,yBAA2B,EAAG,WAC1E,IAAIiF,EAAkB,CAAC,EAEvBA,EAAgB5P,KAAO2P,EAAU3P,KACjC4P,EAAgBC,KAAOF,EAAUE,KACjCD,EAAgBlR,IAAMiR,EAAUjR,IAChCkR,EAAgB9H,KAAO,MAAO,QAAY6H,EAAU7H,MAEpD,IACIgI,EADAC,EAAgB,CAAC,EAEhBzE,IACDwE,EAAuB,SAAUE,EAAUtD,EAAKhN,IAsI5E,SAAkCuQ,EAAgBC,EAAMC,EAAUnQ,EAAMoQ,GACpE,GAAIA,GAAiBF,EAAM,CACvB,IAAIxP,EAAmBuP,EAAeG,EAAc1Q,MAAO0Q,EAAc9P,KAAM8P,EAAcC,cAC7F,GAAI3P,GAAoB,EAAG,CAEvB,IAAI4P,EAAWJ,EAAK3F,IACf+F,IAEDA,EAAWJ,EAAK3F,IAAY,CAAEC,EAAG,CAAC,IAEtC,IAAI+F,EAAaD,EAAS9F,IAO1B,GANK+F,IAGDA,EAAaD,EAAS9F,IAAK,CAAC,GAG5B2F,EACA,IAAK,IAAIvI,EAAK,EAAGA,EAAKuI,EAAS7O,OAAQsG,IAAM,CACzC,IAAI8E,EAAMyD,EAASvI,GACd2I,EAAW7D,KACZ6D,EAAW7D,GAAO,CAAElC,EAAG,CAAC,IAE5B,IAAIgG,EAAYD,EAAW7D,GAAKlC,IAC3BgG,IAEDA,EAAYD,EAAW7D,GAAKlC,IAAK,CAAC,GAEtC+F,EAAaC,CACjB,CAEJD,EAAaA,EAAWvQ,GAAQ,CAAC,GAC7B,SAAQoQ,EAAc1Q,OACtB6Q,EAAc,EAAI,CACdE,EAAG/P,GAIP6P,EAAc,EAAI7P,CAE1B,CACJ,CACJ,CA/KgCgQ,CAAyBnF,EAAiBwE,EAAeC,EAAUtD,EAAKhN,EAC5E,GAGJ,IAAIiR,EAAWhB,EAAgB,IAC3BgB,IAEAf,EAAsB,IAAIG,GAC1B,SAAcY,EAAU,SAAUjE,EAAKhN,GAGnCwM,EAAiBxM,EAFNqQ,EAAcrD,GAAO,CAAC,EAEH,OAASA,GAAK,EAAM,KAAM,MAAM,EAClE,IAEJ,IAAIkE,EAAiBhB,EAAgB5E,GAAW,CAAC,EACjD4F,EAAeC,SAAWlB,EAAUkB,SACpC,IAAIC,EAAqBF,EAAe3F,GAAe,CAAC,EAKxD,OAHAiB,EAAiByD,EAAUhR,SAAUmS,EAAoB7F,GAAa,EAAO,CAACA,GAAc6E,EAAsB3E,GAElHe,EAAiByD,EAAUoB,KAAMH,EAAgB5F,GAAS,EAAO,GAAI8E,EAAsB3E,GACpF/K,KAAKC,UAAUuP,EAC1B,EAAG,WAAc,MAAO,CAAGzR,KAAMwR,EAAc,EACnD,CACA,MAAO5R,GACH,OAAO,IACX,CACJ,CAoEJ,EACJ,CAUA,OAFA2M,EAAW3L,QAAQ,EAEZ2L,CACX,CAzP+B,GA2P/B,SAASkB,GAAmBoF,EAAQC,EAAYC,GAC5C,IAAI,SAAQF,GAAS,CACjB,IAAIG,EAAMH,EAAOE,GACjB,GAAIC,EAAM,GAAKA,GAAOF,EAClB,OAAOE,CAEf,CACA,OAAOF,CACX,CEhSO,SAASG,GAAqBC,EAAeC,GAChD,MAAO,CACHC,IAAK,SAAUC,EAAUC,GAErB,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAKpQ,UAAUD,OAAQqQ,IACpCD,EAAKC,EAAK,GAAKpQ,UAAUoQ,GAE7B,OAAO,SAAoB,CAACN,EAAeC,GAAkBE,EAAUC,EAAIC,EAC/E,EAER,CDAA,IAAIE,GAAiB,cAEjBC,GAAiB,cAAgBnO,EAAwBsB,KAAkD,IAAMxB,EAIjHsO,KAAmB1S,GAAK,CAAC,GACtB,GAA+CkE,EAClDlE,GAAG,KAAwDkE,EAC3DlE,GAAG,KAAmD,OACtDA,GAAG,MAAsDiE,EACzDjE,GAAG,MAA6DiE,EAChEjE,GAAG,MAA6DiE,EAChEjE,IACA2S,GAAsB,CAAC,EACvBC,GAAuB,CAAC,EAC5B,SAASC,GAA6BC,EAAQC,EAAYC,GACtDL,GAAoBG,GAAUC,GACd,IAAZC,IACAJ,GAAqBG,GAAcD,EAE3C,CAQA,SAASG,GAAWC,EAASC,GACzB,IAAIC,GAAY,EAChB,GAAIF,GAAWC,EAAQ,CACnB,IAAIE,GAAO,SAAQH,GACnB,GAAIG,GAAQA,EAAK/P,GAAoC,EAEjD,IADA,IAAIgQ,EAAcH,EAAOvN,KAChB4C,EAAK,EAAGA,EAAK6K,EAAK/P,GAAmCkF,IAAM,CAChE,IAAIlI,EAAQ+S,EAAK7K,GACjB,GAAIlI,IAAS,SAAe6S,EAAQ7S,IAChCA,EAAMsF,OAAoD0N,EAAa,CACvEF,GAAY,EACZ,KACJ,CACJ,CAER,CACA,OAAOA,CACX,CACA,SAASG,GAAmBC,EAAS5S,EAAMN,EAAOmT,GAC1C7S,GAAQN,GAASA,EAAMgD,GAAoC,IACvDmQ,GAAcd,GAAoB/R,IAClC4S,EAAQ3N,GAA8B8M,GAAoB/R,IAASN,EACnEkT,EAAQ1N,IAAuC,GAG/C0N,EAAQE,KAAO,IAAM9S,EAAO,IAAMN,EAG9C,CAnCAuS,GAA6BjO,EAAuBA,GAAuB,GAC3EiO,GAA6BtO,EAAoBA,GACjDsO,GAA6BrO,EAAe,aAC5CqO,GAA6BlO,EAAaA,GAC1CkO,GAA6BpO,EAAyBA,GACtDoO,GAA6BnO,EAAiBA,GAC9CmO,GAA6B/N,EAAiBA,GAkD9C,IAAI6O,GAA6B,WAK7B,SAASA,EAAYlE,EAAmBmE,EAAgBC,EAAgCC,GAIpF,IAAIC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACA1J,GACA2J,GACAC,GA7BAC,IAAc,EA8BdC,GAAkBvG,GACtB,OAAakE,EAAaxV,KAAM,SAAUC,GAmMtC,SAAS6X,EAAoBC,EAAYC,GACrC,IACI,OAAON,IAAgBA,GAAaO,cAAcF,EAAYC,EAClE,CACA,MAAOxX,GAEP,CACA,OAAO,IACX,CAIA,SAAS0X,KACL,IAoBI,MAba,CACTC,mBAAmB,EACnBC,SAAS,EACTC,oBAAoB,EACpBC,iBAAkBX,GAClBY,YAAY,EACZC,eAAgBZ,GAChBa,mBAAoBb,GACpBc,sBAAuBzB,GACvB0B,YAAalB,GACbmB,cAAezB,GACf0B,yBAjBkB,CAClBC,cAAeC,GACfC,gBAAiBC,GACjBC,cAAeC,GACfC,cAAeC,IAgBvB,CACA,MAAO7Y,GAEP,CACA,OAAO,IACX,CACA,SAASuY,GAAeO,EAAKC,EAAYnI,GACrC,IAAIoI,GAAW,QAAgBF,GAC/BG,GAAcF,EAAY,IAAK,CAAC,EAAGC,GACnCE,GAAyBF,EAC7B,CAqCA,SAASP,GAAiBO,EAAUG,EAAYC,EAAUxI,GACtD,IAIIyI,EAAY,CAAC,EACb9E,EAAUyE,EAAS7Q,IACnBoM,GACAA,EAAiB,QAAE,SAAU5S,EAAOM,GAChCoX,EAAUpX,GAAQN,CACtB,GATiB,SAAU2X,EAAQD,EAAWE,GAC9CN,GAAcE,EAAYG,EAAQD,EAAWE,GAC7CL,GAAyBK,EAC7B,CAQAC,CAAeR,EAASM,OAAQD,EAAWD,GAAYnY,EAC3D,CACA,SAAS0X,GAAec,EAASV,EAAYnI,GACzC,IAAIoI,GAAW,QAAgBS,GAC/BR,GAAcF,EAAYU,EAAQH,QAAQ,QAAuBG,GAAS,GAAOT,GACjFE,GAAyBF,EAC7B,CACA,SAASC,GAAcF,EAAYO,EAAQ/E,EAASyE,GAChD,IACID,EAAWO,EAAQ/E,EAASyE,EAChC,CACA,MAAOhZ,IACH,QAAe0V,EAAS,EAAkC,KAAiE,SAAQ1V,GACvI,CACJ,CACA,SAAS6Y,GAAejI,EAASuI,EAAYO,GAEzC,IACIJ,EAAS,IACTK,EAFsB/I,EAEWxI,IACjCwR,EAAShJ,EAAQiJ,WAAalD,GA7a9B,uBA6a+D1V,GACnE,IACI,IAAI6Y,GAAQ,WACZ,GAAIH,EAAY,CACZ,IAAII,IAAmBnE,EAAMoE,UAAU,gBAEnCC,EAAmB,GACnBC,EAAgB,IACpB,SAAWP,EAAWtR,IAAqC,SAAUwI,GACjE,GAAIoJ,GAAoBpJ,GAAYA,EAAShK,KAAoC,EAE7E,IADA,IAAI8C,EAAYkH,EAAS/J,KAChB+C,EAAK,EAAGA,EAAKF,EAAUhF,GAAmCkF,IAAM,CACrE,IAAKiQ,EAAMK,WAAWP,EAAQ3D,GAAYzE,aAAa7H,EAAUE,KAAO,CAEpEoQ,EAAiBlT,GAA8B8J,EAAS7J,GAAgC6C,IACxF,KACJ,CAEIqQ,EAAcnT,GAA8B8J,EAAShH,GAE7D,MAIAoQ,EAAiBlT,GAA8B8J,EAAS7J,GAAgC,GAEhG,GACIkT,EAAcvV,GAAoC,IAElDgV,EAAWS,SAAWF,GAErBH,GAIDM,GAAyBJ,EAAkB,KAA2DN,EAAWrR,KAAwC,EAEjK,MAEIgR,EAAS,CAEjB,CACA,MAAO5N,IACH,QAAegK,EAAS,sDAAuD,SAAQhK,IACvF4N,EAAS,CACb,CACA,QACIL,GAAcE,EAAYG,EAAQ,CAAC,EAAGrY,EAC1C,CACJ,CACA,SAASqZ,GAAiBnK,GAEtB,OAAoB,IAAbA,GAA8D,IAAbA,CAC5D,CACA,SAASoK,GAAgBpK,GAIrB,OAHIiG,IAAgBkE,GAAiBnK,KACjCA,EAAW,GAERA,CACX,CAwFA,SAASqK,KACL,OAAQlF,GAAWE,EAAuBP,CAC9C,CACA,SAASwF,KACL,IAAIC,EAAW1E,EAEf,OADAA,EAAc,GACP0E,CACX,CACA,SAASC,GAAgBC,EAAYzK,EAAUL,GAC3C,IAAIvE,GAAS,EAMb,OALIqP,GAAcA,EAAWjW,GAAoC,IAAM2Q,GAAWK,EAAgBxF,IAAa8F,KAG3G1K,EAAuB,IAAb4E,GAAgDqK,OAAyB1K,EAAW,GAAKyF,EAAkBhP,OAElHgF,CACX,CACA,SAASsP,GAAoBD,GACzB,IAAItP,EAAS,CAAC,EASd,OARIsP,IACA,SAAWA,EAAY,SAAU/J,EAAUsC,GACvC7H,EAAO6H,GAAO,CACVpJ,KAAM8G,EAASjK,KACf8K,KAAMb,EAAS/J,KAEvB,GAEGwE,CACX,CACA,SAASwP,GAAaF,EAAYG,EAAYhL,EAAYI,EAAUD,GAChE,GAAK0K,GAA+D,IAAjDA,EAAWjW,GAI9B,GAAI2Q,EACA+E,GAAyBO,EAAY,EAA6CzK,OADtF,CAKAA,EAAWoK,GAAgBpK,GAC3B,IACI,IAAI6K,EAAeJ,EACfK,EAA+B,IAAb9K,GACtB,QAAOyF,EAAO,WAAc,MAAO,0BAA4B,EAAG,SAAUsF,GACpEA,IAKAN,EAAaA,EAAWvL,MAAM,IASlC,IAPA,IAAI8L,EAAiB,GACjBxB,EAAa,KACbyB,GAAqB,UACrBC,EAAgB1F,EAAgBxF,KAAc8K,EAAkBtF,EAAgB,GAAqCA,EAAgB,IACrI2F,EAAgBD,GAAiBA,EAAc1S,IAE/CsH,EAAmByG,KAA2BN,IAAgBkE,GAAiBnK,IAAgC,IAAlBmL,GAAmDD,EAAcE,SAA6B,IAAlBD,GACtKX,GAAgBC,EAAYzK,EAAU4K,IAAa,CACtD,IAAIlK,EAAW+J,EAAWY,QACtB3K,GAAYA,EAAShK,KAAoC,IACpDwO,EAAYoG,eAAe5K,EAASjK,MAqBrCuU,EAAepU,GAA8B8J,IAnB7C8I,EAAaA,GAAc1D,GAAYjO,IAAiD+S,EAAYhL,EAAYkL,EAAiBhL,EAAkBC,EAAYC,GAE1J8F,GAAYtF,cAAcgJ,EAAY9I,EAAUwG,IAOpB,OAAxBsC,EAAWrJ,WAEhBsK,EAAa,CAACjB,EAAWrJ,UAAU3J,GAAkCiU,GACrEjB,EAAWrJ,SAAW,KACtBoL,GAAe/B,EAAYyB,GAAoB,UAAWlL,GAC1DkL,GAAqB,UACrBzB,EAAa,OAXb+B,GAAe/B,EAAYyB,GAAoB,UAAWlL,GAC1DkL,GAAqB,UACrBR,EAAa,CAAC/J,GAAUlK,GAAkCiU,GAC1DjB,EAAa,OAe7B,CAEIA,GACA+B,GAAe/B,EAAYyB,GAAoB,UAAWlL,GAE1D0K,EAAWjW,GAAoC,IAE/CqR,EAAc4E,EAAWjU,GAAkCqP,IAG/DqE,GAAyBc,EAAgB,KAAoDhL,EACjG,EAAG,WAAc,MAAO,CAAGM,QAASoK,GAAoBG,GAAeD,WAAYA,EAAYhL,WAAYA,EAAY4L,cAAeV,EAAiB/K,WAAYA,EAAY0L,cAAetB,GAAiBnK,GAAWA,SAAUA,EAAa,GAAI8K,EACzP,CACA,MAAOvP,IACH,QAAegK,EAAS,EAAkC,GAAoD,wCAAyC,SAAQhK,GACnK,CA/DA,CAgEJ,CACA,SAASmQ,GAAqBlC,EAAY7E,GACtC,IAAIgH,EAAiB,CACjB/G,IAAKK,EACL2G,KAAM,CAAC,EACPC,SAAS,GAERlH,GAeDgH,EAAe5U,IAAgC,QAAO4U,EAAe5U,GAA+B6O,GACpG+F,EAAeE,SAAW,SAAQF,EAAeC,MAAMpX,GAAoC,IAd3F,SAAcoR,EAAU,SAAU9T,EAAMN,GAChCsS,GAAqBhS,GACrB2S,GAAmBkH,EAAgB7H,GAAqBhS,GAAON,GAAO,IAItEma,EAAe5U,GAA8BjF,GAAQN,EACrDma,EAAe3U,IAAuC,EAE9D,GAOJyN,GAAmBkH,EAAgBjW,EAAe,UAAWiP,GAC7DF,GAAmBkH,EAAgBlW,EAAoB,KAAmBkP,GAC1E,IAAImH,EAAYhb,GAChB,SAAW0Y,EAAWvJ,QAAS,SAAUvO,GACjCoa,EAAUtX,GAAoC,IAC9CsX,GAAa,KAEjBA,GAAapa,CACjB,GACA+S,GAAmBkH,EAAgB9V,EAAaiW,EAAWnH,GAC3DF,GAAmBkH,EAAgB/V,GAAiB,WAAUvD,WAAYsS,GAC1E,IAAIlL,EA0SR,SAAmB+P,GACf,IAAK,IAAI9P,EAAK,EAAGA,EAAK8P,EAAWlJ,QAAQ9L,GAAmCkF,IAAM,CAC9E,IAAID,EAAQ+P,EAAWtR,IAAoCwB,GAAIM,QAC/D,GAAIP,EACA,OAAOsS,mBAAmBtS,EAElC,CACA,OAAO3I,CACX,CAlTgByI,CAAUiQ,GAOtB,IANI,QAAgB/P,KAChBkS,EAAe/G,KAAO,qBAAuBnL,GAE7C2L,EAAkB/O,MAClBoO,GAAmBkH,EAAgBhW,EAAyByP,EAAkB9O,KAAqEqO,GAEnJc,EAAMhN,IAA0C,CAChD,IAAIuT,EAASvG,EAAMhN,MACfuT,GAAU,IACVL,EAAe/G,KAAO,MAAQoH,EAEtC,CACA,IAAK,IAAI7Y,EAAI,EAAGA,EAAIwS,EAAuBnR,GAAmCrB,IAC1EwY,EAAe/G,KAAO,IAAMe,EAAuBxS,GAAGrB,KAAO,IAAM6T,EAAuBxS,GAAG3B,MAEjG,OAAOma,CACX,CACA,SAASM,GAAgBC,EAASpa,EAAMN,GACpC0a,EAAQpa,GAAQoa,EAAQpa,IAAS,CAAC,EAClCoa,EAAQpa,GAAMwT,EAAazR,YAAcrC,CAC7C,CACA,SAAS+Z,GAAe/B,EAAYyB,EAAoBkB,EAAwBpM,GAC5E,GAAIyJ,GAAcA,EAAWtJ,aAAesJ,EAAWtJ,YAAY1L,GAAoC,EAAG,CACtG,IAAI4X,IAAkB1F,GAClB2F,EAAkB7G,EAAgBgE,EAAWxJ,WAE5CmK,GAAiBX,EAAWrR,MAA2CqR,EAAW9Q,KAAoE,IAA1B8Q,EAAWzJ,aACxIsM,EAAkB7G,EAAgB,IAAqCA,EAAgB,IAAoC6G,GAE/H,IAAIC,EAAepG,IAEfsD,EAAWjJ,UAA0E,IAA9D8L,EAAgB7T,OACvC8T,GAAe,GAEnB,IAAIC,EAAmBb,GAAqBlC,EAAY8C,GACxDA,EAAeA,GAAgBC,EAAiBvV,GAChD,IAAIwV,GAAmB,WACvB,QAAO/G,EAAO,WAAc,MAAO,4BAA8B,EAAG,WAEhE,IAAK,IAAIgH,EAAU,EAAGA,EAAUjD,EAAWlJ,QAAQ9L,GAAmCiY,IAGlF,IAFA,IACIjT,EADWgQ,EAAWtR,IAAoCuU,GACrC9V,KAChB+V,EAAQ,EAAGA,EAAQlT,EAAUhF,GAAmCkY,IAAS,CAC9E,IAAIxc,EAAgBsJ,EAAUkT,GAC9B,GAAI3G,GAAqB,CACrB,IAAImG,EAAUhc,EAAcmE,IAAsCnE,EAAcmE,KAAuC,CAAC,EACxH4X,GAAgBC,EAAS,iBAAkBM,GAC3CP,GAAgBC,EAAS,qBAAsBjB,GAC/CgB,GAAgBC,EAAS,yBAA0BC,EACvD,CACAjc,EAAcwT,IAAkB,EAAIxT,EAAcwT,MAAoBxT,EAAcwT,IAAkB,CAC1G,CAGJwG,GAAyBV,EAAWtR,IAAsC,KAA4D6H,GAAc,GAAuCyJ,EAAWrR,KAAwC,GAI9O,IAAIwU,EAAiB,CACjB9J,KAAM2G,EAAWzR,IACjB2R,UAAW6C,EAAiB3H,IAC5BR,QAASmI,EAAiBxV,GAC1B6V,YAAapD,EACbqD,YAAa9M,EACb+M,QAAS3G,GACT4G,eAAgB1G,GAChB0B,sBAAuBzB,IAGvBgG,IACKnI,GAAWwI,EAAe3U,IAAqCzC,KAChEoX,EAAe3U,IAAoCzC,GAAqBF,GAEvE8O,GAAWwI,EAAe3U,IAAqCxC,KAChEmX,EAAe3U,IAAoCxC,GAA2BF,IAGtF,IAAI0X,EAAS,KACTX,IAEAW,EAAS,SAAUvM,GAEf2E,EAAkBvK,mBAClB,IAAImO,EAAa,SAAUG,EAAQ/E,IAoFvD,SAA+B+E,EAAQ/E,EAASoF,EAAYzJ,GACxD,IF92BgCkN,EE82B5BC,EAAS,IACTlC,EAAiB,KACjBmC,GAAa,EACbC,GAAe,EACnB,IACI,IAAIC,GAAc,EAClB,UAAWlE,IAAW,MAAc,CAChC,GAAI/E,EAAS,CACTgB,EAAkB7O,GAAgD6N,EPt3B3D,sBOu3BP,IAAInJ,EAAemJ,EPz3BT,kBOy3B8CA,EAAQ,0BAChE,SAAWc,EAAYrM,IAAgEuL,EP33B/E,eO23BgHnJ,GAAe,SAAUqS,IAC7I,SAAW9D,EAAWtR,IAAqC,SAAUwI,GACjE,GAAIA,EAASjK,OAAqC6W,EAAW,CAEzDtC,EAAiBA,GAAkB,GAEnC,IAAIuC,EAAgB7M,EAAS7J,GAAgC,GAE7D2S,EAAWrP,WAAaoT,EAAc7W,KACtCsU,EAAepU,GAA8B2W,EACjD,CACJ,EACJ,EACJ,CAGA,GAAc,KAAVpE,GAA2B,KAAVA,EAGjB,YADA+D,EAAS,OF14BWD,EE64Ba9D,IF14B7B,KAAO8D,EAAiB,KAAyB,KAAlBA,GACjC,KAAlBA,GACkB,KAAlBA,GEw4B4DzD,EAAWrP,WAAa,KAEpEkT,GAAc,GAGlBH,EAAS,IAA2D/D,EAAS,GACjF,CACA,GAAIkE,EAAa,CAEbH,EAAS,IACT,IAAIM,EAAehE,EAAW7J,SAC4B,IAAtD6J,EAAWrR,MAEPqV,EAAezI,GACfoI,GAAa,EACbM,GAAU,WAEoD,IAAtDjE,EAAWrR,KAIXkN,IAEJsF,GAAanB,EAAWtR,IAAqCsV,EAAe,EAAGhE,EAAW7Q,IAA4CsN,GAAe,EAAmCuD,EAAWrR,IAAwC,EAC/O,EAAG8N,GAActK,GAAsC6R,MAGvDJ,GAAe,EACXnH,KAGAiH,EAAS,OAIzB,CACJ,CACA,QACSC,IAGD/H,EAAkB7O,KAM9B,SAAgCiT,EAAYkE,EAAa3N,EAAYqN,GACjE,IACQA,GAEA9H,EAAaxM,MAEjB,IAAI2R,EAAajB,EAAWtR,IACR,MAAhBwV,IACAjD,EAAajB,EAAWS,UAAYT,EAAWtR,IAC1CkV,GAAiB5D,EAAW3J,QAI7ByF,EAAaqI,gBAoB7B,SAA6BlD,GACzB,GAAI1E,GAAqB,CACrB,IAAI6H,GAAuB,WAC3B,SAAWnD,EAAY,SAAU/J,GACzBA,GAAYA,EAAShK,KAAoC,GA5HzE,SAAmC8C,EAAWqU,GACtC9H,KACA,SAAWvM,EAAW,SAAUH,GAE5B4S,GADc5S,EAAShF,IAAsCgF,EAAShF,KAAuC,CAAC,EACrF,qBAAsBwZ,EACnD,EAER,CAsHgBC,CAA0BpN,EAAS/J,KAAqCiX,EAEhF,EACJ,CACJ,CA3BYG,CAAoBtD,IAGxBP,GAAyBO,EAAYiD,EAAalE,EAAWrR,KAAwC,EACzG,CACA,QAC8D,IAAtDqR,EAAWrR,MAEXkN,IAGmB,IAAftF,GAEAzQ,EAAM0e,mBAAmBxE,EAAWrR,IAAwC4H,GAGxF,CACJ,CArCYkO,CAAuBzE,EAAY0D,EAAQnN,EAAYqN,IAE3DlD,GAAyBc,EAAgB,KAAoDxB,EAAWrR,IAC5G,CACJ,CAjKwB+V,CAAsB/E,EAAQ/E,EAASoF,EAAYzJ,EACvD,EACIF,EAAS2J,EAAW7Q,KAA8C6Q,EAAW3J,OACjFkH,GAAaoH,eAAe,SAAUC,GAClC,IACI/B,EAAgBgC,SAASD,EAAkBpF,EAAYnJ,GACnD8G,IAEAA,GAAcgG,EAAgByB,EAAkBvO,EAAQ2J,EAAW9Q,IAE3E,CACA,MAAO6C,GACHuN,GAAcE,EAAY,EAAG,CAAC,IAC9B,QAAezD,EAAS,6CAA8C,SAAQhK,GAClF,CACJ,EAAG6K,GAAa3F,EAASZ,EAC7B,IAEJ,QAAO4F,EAAO,WAAc,MAAO,mCAAqC,EAAG,WACvE,GAAIuH,EAKA,GAJ0D,IAAtDxD,EAAWrR,KACXkN,IAGA+G,IAAkB5C,EAAWjJ,UAA0E,IAA9D8L,EAAgB7T,IAA4E,CAMrI,IAAI8V,EAAa,CACbzL,KAAM8J,EAAe9J,KACrB6G,UAAWiD,EAAejD,UAC1BtF,SAAS,QAAO,CAAC,EAAGuI,EAAe3U,KACnC8U,QAASH,EAAeG,QACxBC,eAAgBJ,EAAerV,IAC/ByQ,sBAAuB4E,EAAepV,KAEtCgX,GAAiB,GACrB,QAAO9I,EAAO,WAAc,MAAO,qCAAuC,EAAG,WACzE,IACIiB,GAAU4H,EAAY,SAAU7N,GAC5B8N,GAAiB,EAEZ7I,GAAyBjF,EAAQxI,MAClCwI,EAAQxI,IAA+CwI,EAAQxI,KAAgD0U,EAAe1U,IAC9HwI,EAAQ7H,IAA+C6H,EAAQ7H,KAAgD+T,EAAe/T,KAElIoU,EAAOvM,EACX,EAAG+I,EAAW3J,QAAU2J,EAAW7Q,IACvC,CACA,MAAO4C,GACEgT,GAEDvB,EAAOL,EAEf,CACJ,EACJ,MAEIK,EAAOL,EAGnB,EACJ,EAAG,WAAc,MAAO,CAAGnD,WAAYA,EAAYyB,mBAAoBA,EAAoBkB,uBAAwBA,EAAwBpM,WAAYA,EAAe,EAAGyJ,EAAW3J,OACxL,CACI2J,EAAWpJ,YAAcoJ,EAAWpJ,WAAW5L,GAAoC,GAEnF0V,GAAyBV,EAAWpJ,WAAY,KAA2DoJ,EAAWrR,KAEtHqR,EAAWnJ,YAAcmJ,EAAWnJ,WAAW7L,GAAoC,GAEnF0V,GAAyBV,EAAWnJ,WAAY,KAAsDmJ,EAAWrR,IAEzH,CAmIA,SAASsV,GAAUe,EAAI3O,EAAQ4O,GACvB5O,EACA2O,IAGA1H,GAAgBzD,IAAImL,EAAIC,EAEhC,CAUA,SAAS1F,GAAyBK,GAC9B,IAAIsF,EAAmB9H,GACvB,IACI,IAAK,IAAIzT,EAAI,EAAGA,EAAIub,EAAiBla,GAAmCrB,IACpE,IACIub,EAAiBvb,GAAGiW,EACxB,CACA,MAAOvZ,IACH,QAAe0V,EAAS,EAAmC,IAA2D,4BAA8B1V,EACxJ,CAEJ,GAAIuZ,EAAc,CACd,IAAIP,EAAW3W,KAAKyc,MAAMvF,IACtB,QAAgBP,EAAS+F,aAAc,QAAgB/F,EAAS+F,UAAU3Y,KAE1E+P,GAAW3C,IAAI,QAASwF,EAAS+F,UAAU3Y,GAAY,QAE/D,CACJ,CACA,MAAOsF,GAEP,CACJ,CACA,SAAS2O,GAAyBO,EAAYiD,EAAa1N,EAAU6O,GACjE,GAAIpE,GAAcA,EAAWjW,GAAoC,GAAKwQ,EAAS,CAC3E,IAAI8J,EAAc9J,GAgBMkI,EAhByBQ,EAiBjDqB,EAASnL,GAAgBsJ,IACxB,QAAgB6B,KACjBA,EP5iCG,MO6iCC7B,GAAU,KAA2DA,GAAU,KAC/E6B,EP/iCO,UOijCF7B,GAAU,KAAyDA,GAAU,KAClF6B,EAAS5Z,EAEJ+X,GAAU,KAA4DA,GAAU,OACrF6B,EPvjCC,SO0jCFA,IA7BH,GAAID,EAAa,CACb,IAAIE,EAA+B,IAAbhP,GACtB,QAAOyF,EAAO,WAAc,MAAO,sCAAwC,EAAG,WAC1EgI,GAAU,WACN,IACIqB,EAAY1f,KAAK4V,EAASyF,EAAYiD,EAAasB,EAAiBhP,EACxE,CACA,MAAOnQ,IACH,QAAe0V,EAAS,EAAmC,GAAoD,qCAAuC1V,EAC1J,CACJ,EAAGgf,GAAYG,EAAiB,EACpC,EAAG,WAAc,MAAO,CAAG1O,QAASoK,GAAoBD,GAAayC,OAAQQ,EAAa7N,OAAQmP,EAAiBH,SAAUA,EAAU7O,SAAUA,EAAa,GAAIgP,EACtK,CACJ,CAEJ,IAAgC9B,EACxB6B,CAFR,EA3rBA,WACI,IAAIE,EACJhK,EAAa,KACbC,EAAc,IAAInQ,GAClBoQ,GAAU,EACVC,EAAoB,IAAI7K,GACxB0M,IAAc,EACd5B,EAAuB,EACvBC,EAAe,KACfC,EAAU,KACVC,EAAkB,KAClBC,EAAQ,KACRC,GAAuB,EACvBC,EAAyB,GACzBC,EAAW,CAAC,EACZC,EAAc,GACdC,GAAc,KACdC,IAAsB,EACtBC,GAAa,KACbC,IAAe,EACfC,IAAc,EACdC,GAAc8I,EACd5I,GAAkB4I,EAClB3I,GAAyB2I,EACzB1I,GAAyB0I,EACzBzI,GAAiByI,EACjBxI,GAAe,GACfC,GAAYuI,EACZtI,GAAgBsI,EAChBrI,GAAoB,GACpBC,IAAiB,EACjBC,GAAkB5D,KAClB9F,IAAqB,EACrB2J,GAAe,KACfG,GAAkB,IACtB,CAlRAgI,GAEA5f,EAAM6E,GAA4C,SAAUgb,EAAWC,EAAMC,GACpExI,KACDpB,EAAQ2J,EACRpJ,GAAaoJ,EAAKE,eAElB/J,GADAD,EAAe+J,GACQE,WACvB,SAAU9I,IAAc,OAAe0I,EAAW,SAAUzK,GACxD,IAAIxT,EACAse,EAAa9K,EAAQ9U,IACrB6f,EAAgB/K,EAAQ9U,IAAI8f,gBAAgBL,EAAYxb,YAC5DiT,GAAkB5D,GAAqBuM,EAAcxY,GAA6DwY,EAAcvY,KAC5H,QAAgBsY,EAAWG,gBA9EvD,SAAkCC,EAAU9d,EAAMN,GAC9C,IAAK,IAAI2B,EAAI,EAAGA,EAAIyc,EAASpb,GAAmCrB,IAC5D,GAAIyc,EAASzc,GAAGrB,OAASA,EAErB,YADA8d,EAASzc,GAAG3B,MAAQA,GAI5Boe,EAAShZ,GAA8B,CAAE9E,KAAMA,EAAMN,MAAOA,GAChE,CAuE4Bqe,CAAyBlK,EAAwB,WAAY6J,EAAWG,gBAtEpG,SAAqCC,GACjC,IAAK,IAAIzc,EAAI,EAAGA,EAAIyc,EAASpb,GAAmCrB,IAC5D,GAuEwE,aAvEpEyc,EAASzc,GAAGrB,KAEZ,YADA8d,EAASvV,OAAOlH,EAAG,EAI/B,CAkE4B2c,CAA4BnK,GAEhCe,GAAY+I,EAAyE,oBACrF9I,GAAgB8I,EAAcM,gBAC9B,IAAIC,EAAgBP,EAAcQ,gBAE9BthB,EAAc8gB,EAActY,GAAgEsY,EAActY,GAAgEqY,EAAW7gB,YACzLsW,EAAatW,EAAcgV,GAC3BuC,MAAe,SAAYuJ,EAAcrY,OAAmDqY,EAAcrY,IAC1G2O,IAAuB0J,EAA0E,oBACjG,IAAIS,EAAYT,EAAcU,eAC9BjJ,GAAkBgJ,GAAaA,GAAavP,EAAoBuP,EAAYvP,EAC5E,IAAIjE,EAAiB+S,EAAc/S,eAC/B1K,EAAmByd,EAAczd,iBACjC2K,IAAsB6S,EAAWnY,KAChC,SAAYoY,EAAcpY,OAC3BsF,IAAsB8S,EAAcpY,KAExC8O,GAAcsJ,EAAcW,WAC5B,IAAIC,GAAW,SAAQ,qBAEvBjK,IAAc,QAAiB,aAAcoJ,GAAY,IAGpD,SAAWa,KAAa3J,KACzBN,IAAc,GAElBC,KAAoBoJ,EAAcnY,IAClCgP,KAA2BmJ,EAAclY,IACzCiP,IAAqF,IAApEiJ,EAA8D,cAC/ErS,KAAuBqS,EAAc5S,kBAC/BuS,EAAKvF,UAAU,kBAEjBvD,IAAyB,GAE7BW,KAAe,WACfnB,GAAc,IAAItJ,GAAWiJ,EAAO/I,EAAgB1K,EAAkB2K,EAAmB,KAAyBS,GAAoBqS,IACjI,SAAkBA,EAAcjY,OACjCyP,KAAgBwI,EAAcjY,KAE9BiY,EAAchY,MACduP,GAAoByI,EAAchY,KAEtC,IAAI6Y,EAAiB/I,KAEhBR,GAKDA,GAAawJ,UAAUD,IAJvBvJ,GAAe,IAAIyJ,GAAA,GACNrc,GAA0Cmc,EAAgB/K,GAK3E,IAAIkL,EAAoBT,EACpBU,EAAsBjB,EAAc/X,IAAiEsY,EAAgB,KACrHW,EAAyBlB,EAAc/X,IAAiEsY,EAAgB,KACxHY,EAAyB,CAAC,EAA8B,GAC5D,IAAKZ,EAAe,CAChBtK,GAAuB,EAOvB,IAAImL,EAAgB,IAChB,YAEAA,EAAgB,CAAC,EAA6B,GAC9CD,EAAyB,CAAC,EAA6B,EAA2B,IAIlFC,EAAgB,CAAC,EAA2B,EAA6B,IAI7Eb,EAAgB7I,EADhB0J,GAAgB,QAAkBA,EAAepB,EAAcrI,aACZ,MAE/C,QAAe7B,EAAS,yCAE5BkL,EAAoBtJ,EAAoB0J,GAAe,EAC3D,CACKH,IAGDA,EAAsBvJ,EADtByJ,GAAyB,QAAkBA,EAAwBnB,EAAcqB,mBACf,IAEtEvK,IAA0Bb,IAA0BuB,KAAe,aAA2BX,KAA0B,UAAiB,KACtHpV,EAAK,CAAC,GAClB,GAAiC8e,EACpC9e,EAAG,GAAqCuf,GAAqBtJ,EAAoB,CAAC,EAA2B,EAA6B,IAA+B,GACzKjW,EAAG,GAAoCwf,GAAuBD,GAAqBtJ,EAAoB,CAAC,IAA4B,GACpIjW,EAAG,GAAmCyf,GAA0BxJ,EAAoB,CAAC,EAA6B,IAA+B,IAASsJ,GAAqBtJ,EAAoB,CAAC,IAA4B,GAJpO3B,EAKItU,CACR,IACA2V,IAAiB,EAEzB,EACAvX,EAAMyhB,mBAAqB,SAAUC,GAEjC,OADApK,GAAkBhQ,GAA8Boa,GACzC,CACHC,GAAI,WACA,IAAIC,EAAQtK,GAAkBuK,QAAQH,GAClCE,GAAS,GACTtK,GAAkBvM,OAAO6W,EAAO,EAExC,EAER,EACA5hB,EAAMqI,IAAgE,SAAU7D,GAC5E,IACI,GAAIgS,GACA,OAAOA,GAAYzE,aAAavN,EAExC,CACA,MAAOjE,GAEP,CACA,OAAOiB,CACX,EACAxB,EAAMsI,IAAqE,WACvE,IAGI,OAAO8T,GADO5F,IAAeA,GAAYjO,IAAiD,GAAG,GAAO,GAAO,EAAO,EAA0C,GACvHqO,GACzC,CACA,MAAOrW,GAEP,CACA,OAAO,IACX,EACAP,EAAMwI,IAA8D,SAAUyJ,EAAM6P,GAChF,IAEI,IAAIC,EAAe,IAEnB,SAAW9P,EAAM,SAAUzN,GACnBsd,IACAtd,GAAM,QAAeA,IAEzB,IAAIwd,EAAQ3X,GAAWW,OAAOxG,EAAI2C,GAAgC,CAAC3C,IACnEud,EAAaza,GAA8B0a,EAC/C,GAEA,IADA,IAAI9H,EAAa,KACV6H,EAAa7c,GAAoC,GAAKsR,IAAa,CACtE,IAAIpF,EAAW2Q,EAAahG,QACxB3K,GAAYA,EAAShK,KAAoC,IACzD8S,EAAaA,GAAc1D,GAAYjO,IAAiD,GAAG,GAAO,GAAO,EAAO,EAA0C,GAC1JiO,GAAYtF,cAAcgJ,EAAY9I,EAAUwG,IAExD,CACA,IAAIyE,EAAiBD,GAAqBlC,EAAYtD,IAClDqL,EAAc,CACd1O,KAAM2G,EAAWzR,IACjB2R,UAAWiC,EAAe/G,IAC1BR,QAASuH,EAAe5U,GACxB+V,QAAS3G,GACT4G,eAAgB1G,GAChB0B,sBAAuBzB,IAW3B,OARIJ,KACK/B,GAAWoN,EAAYvZ,IAAqCzC,KAC7Dgc,EAAYvZ,IAAoCzC,GAAqBF,GAEpE8O,GAAWoN,EAAYvZ,IAAqCxC,KAC7D+b,EAAYvZ,IAAoCxC,GAA2BF,IAG5Eic,CACX,CACA,MAAO1hB,GAEP,CACA,OAAO,IACX,EAWAP,EAAyB,kBAAI,WACzB,MAAO,CAACkW,EAAgB,GAAgCN,EAAaY,GAAaN,EAAiB+B,KAAyBtC,EAAYiC,GAC5I,EAkKA5X,EAAMkiB,UAAY,SAAU1f,EAAMN,GAC9BoU,EAAS9T,GAAQN,CACrB,EACAlC,EAAMmiB,aAAe,SAAU3f,UACpB8T,EAAS9T,EACpB,EACAxC,EAAM8I,IAAsD,WACxD,OAAOiS,MAAwBjF,EAAkBhP,IACrD,EACA9G,EAAM+I,IAA8D,SAAU2H,EAAUD,IAChF,SAAYC,KACZA,EAAW,GAEXiG,KACAjG,EAAWoK,GAAgBpK,GAC3BD,EAAa,GAEbyK,GAAgB3E,EAAa7F,EAAU,IACvC2K,GAAaL,KAAe,GAAG,EAAOtK,EAAUD,GAAc,EAEtE,EACAzQ,EAAMoiB,iBAAmB,WACrB,OAAQvM,GAAoC,IAAzBE,GAAgF,IAAlDQ,EAAYrR,EACjE,EACAlF,EAAMgJ,IAAiD,SAAU9G,GAC7DyU,GAAezU,CACnB,EACAlC,EAAMqiB,SAAW,SAAUjR,GACvB,GAAIA,GAAYA,EAAShK,KAAoC,EAAG,CAE5D,GAAIwO,EAAYoG,eAAe5K,EAASjK,MACpC,OAAO,EAEXoP,EAAYjP,GAA8B8J,EAC9C,CACA,OAAO,CACX,EAKApR,EAAMsiB,SAAW,WACT/L,EAAYrR,GAAoC,GAChDmW,GAAaL,KAAe,GAAG,EAAM,EAAkC,IAE3E,SAAW7D,GAAc,SAAUoL,GAC/BA,GAAQA,EAAKZ,IAAMY,EAAKZ,IAC5B,GACAxK,GAAe,EACnB,EAIAnX,EAAMwiB,MAAQ,WACV3M,GAAU,CACd,EAIA7V,EAAMyiB,OAAS,WACX5M,GAAU,EACV7V,EAAM+I,IAA4D,EAA+B,EACrG,EAQA/I,EAAMiJ,IAAkE,SAAU+Y,EAAOtR,EAAUD,GAK3FuR,GAASA,EAAM5a,KAAoC,KAC/C,SAAkBsJ,KAClBA,EAAW,GAEXiG,KACAjG,EAAWoK,GAAgBpK,GAC3BD,EAAa,GAGjB4K,GAAa,CAAC2G,GAAQ,GAAG,EAAOtR,EAAUD,GAAc,GAEhE,CAsfJ,EACJ,CAqBA,OAFA8E,EAAYhU,QAAQ,EAEbgU,CACX,CA//BgC,GEtE5BmN,GAAsB,IACtBC,GAAqB,kBAErBhD,QAAavT,EAMbwW,IAA2B,SAAc,CACzCC,iBAAkB,CAAErjB,MAAO,KAAmBsjB,EAAGJ,IACjDK,oBAAqB,CAAEvjB,MAAO,KAAmBsjB,EAAG,KACpDE,qBAAsB,CAAExjB,MAAO,KAAmBsjB,EAAG,GACrDG,4BAA4B,EAC5BtC,gBAAiB,CAAEnhB,MA+BvB,SAAsBmhB,GAClB,OAAOA,GAAmBA,EAAgB5B,QAC9C,EAjC4C+D,EAAGnD,IAC3CuD,2BAA4BvD,GAC5BwD,oBAAqBxD,GACrByD,kBAAkB,EAClBC,8BAA8B,EAC9BC,mBAAoB3D,GACpB4D,qBAAsB5D,GACtB6D,oBAAqB7D,GACrBc,gBAAiBd,GACjB8D,oBAAqB9D,GACrBvS,eAAgBuS,GAChBjd,iBAAkBid,GAClBtS,kBAAmBsS,GACnB+D,oBAAoB,EACpBrL,iBAAkBsH,GAElB7H,WAAY6H,GACZ6B,iBAAkB7B,GAClBxD,cAAewD,GACflH,sBAAuBkH,GACvBgE,cAAc,EACd7C,WAAYnB,GACZlC,eAAgBkC,GAChBiE,sBAAsB,EACtBC,sBAAuB,CAAErkB,MAAO,MAAUsjB,EA3CxB,GA4ClBgB,4BAA6B,CAAEtkB,MAAO,MAAUsjB,EA3CpB,GA4C5BnK,cAAegH,GACfkB,eAAgB,CAAErhB,MAAO,MAAUsjB,EAhDV,KAiDzBvV,kBAAmBoS,GACnB1R,aAAc,CAAC,IAWf8V,GAA6B,SAAUpkB,GAEvC,SAASokB,IACL,IAIIC,EAJAnkB,EAAQF,EAAOG,KAAKC,OAASA,KACjCF,EAAM0E,WAAa,cACnB1E,EAAMokB,SAAW,KACjBpkB,EAAMqkB,QAAU,SAEhB,IAEIC,EAGAC,EAEAC,EAGAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA5N,EACA6N,EACAC,EACAC,EACAC,EACAC,GACAC,GACA9N,GAjCA+N,IAAoB,EACpBC,GAAsB,GAEtB/P,IAAU,EACVgQ,GAAsB,EAEtBC,GAAa,EAEbC,GAAY,CAAC,EACbC,GAAkBpgB,EA43BtB,OAn2BA,OAAame,EAAalkB,EAAO,SAAUG,EAAOC,GAuH9C,SAASgmB,KACL,QAA8B,KAAMb,IACpC,QAA4B,KAAMA,IAClC,QAA4B,KAAMA,EACtC,CAWA,SAASc,EAAOC,GACZ,IAAIC,EArOJ,GA8OA,OARID,GAAOA,EAAIjhB,KACX,SAAWihB,EAAK,SAAUxlB,GAClBylB,IACAA,GAAO,MAEXA,GAAOzlB,CACX,GAEGylB,CACX,CACA,SAASC,GAAW/hB,GAChB,IAAI8hB,EAjPJ,GAkPA,IACIE,GAAYhiB,GACZ8hB,EAAM1B,EAAarc,IAA8D/D,EACrF,CACA,MAAO/D,GAEP,CACA,OAAO6lB,CACX,CAEA,SAASG,GAAoB/hB,GAEL,kBADPA,IAAO,WAAYF,OACrBrB,OAEPgiB,GAAyB,EACzBP,EAAa1b,IAA+Cic,IAEhEuB,GAAkB,EAAkC,EACxD,CACA,SAASC,GAAkBjiB,GAEvBygB,GAAyB,EACzBP,EAAa1b,IAA+Cic,EAChE,CACA,SAASqB,GAAYhiB,GACbA,EAAMtD,KAAOsD,EAAMtD,IAAI4F,WACftC,EAAMtD,IAAI4F,GAElBtC,EAAMtD,KAAOsD,EAAMtD,IAAI6F,IAAavC,EAAMtD,IAAI6F,GAAc,WACpDvC,EAAMtD,IAAI6F,GAAe,GAGjCme,IACA1gB,EAAMtD,KAAM,QAAesD,EAAMtD,KAC7BsD,EAAMnD,WACNmD,EAAMnD,UAAW,QAAemD,EAAMnD,WAEtCmD,EAAMiP,OACNjP,EAAMiP,MAAO,QAAejP,EAAMiP,OAG9C,CACA,SAASmT,GAAkBpiB,EAAOqiB,GAU9B,GARKriB,EAAMqF,MACPrF,EAAMqF,IAA+C,GAGpDrF,EAAMsF,MACPtF,EAAMsF,IAAsC,GAEhD0c,GAAYhiB,GACRA,EAAMuF,IAGN,GAAI2a,GAAwB3O,GACxBvR,EAAMsF,IAAsC,EAC5CtF,EAAMuF,KAAgC,OAItC,GAAI6a,EAMA,OAJIM,IACA1gB,GAAQ,QAAeA,SAE3BogB,EAAazb,IAAgEoB,GAAWW,OAAO1G,EAAM6C,GAAgC,CAAC7C,KAAiD,IAAxCA,EAAMuF,IAAyC,EAAoCvF,EAAMuF,IAA+B,GAKnR,IAAI+c,EAAatiB,EAAMsF,IACnBid,EAAYf,GACZgB,EAAazC,EACE,IAAfuC,IACAC,EAAYhB,GACZiB,EAAa1C,GAEjB,IAAI2C,GAAe,EAEnB,GAAIF,EAAYC,EACZC,GAAgBC,GAAuB1iB,EAAOqiB,OAE7C,CACD,IAAIM,EAAc,EACdC,EA/UK,GAgVU,IAAfN,IAEAK,EAAc,EACdC,EAAa,GAGjBH,GAAe,EA8VvB,SAAqCzc,EAAMxJ,EAASqmB,EAAgBD,GAChE,KAAOC,GAAkBrmB,GAAS,CAC9B,IAAIsmB,EAAaC,GAAe/c,EAAMxJ,GAAS,GAC/C,GAAIsmB,GAAcA,EAAWhgB,KAAoC,EAAG,CAEhE,IAAIkgB,EAAgBF,EAAW7f,GAAgC,EAAG2f,GAC9DK,EAAeD,EAAclgB,KACjC,GAAImgB,EAAe,EAQf,OAPuB,IAAnBJ,EACAtB,IAAuB0B,EAGvBzB,IAAcyB,EAElBC,GAAmB7E,GAAoB,CAAC2E,GAAgBliB,EAAsBM,eAAW0G,IAClF,CAEf,CACA+a,GACJ,CAGA,OADAM,MACO,CACX,CApXYC,CAA4BpjB,EAAM6C,GAAgC7C,EAAMsF,IAAqCqd,EAAaC,KAC1HH,GAAgBC,GAAuB1iB,EAAOqiB,GAEtD,CACII,GAEAY,GAAchF,GAAoB,CAACre,GAAQc,EAAsBM,UAEzE,CA4HA,SAASkiB,GAA8B9mB,EAAS4P,EAAUD,GACtD,IAAIoX,EAASC,GAAchnB,EAAS4P,EAAUD,GAG9C,OADAiU,EAAa3b,IAA4D2H,EAAUD,GAC5EoX,CACX,CACA,SAASE,KACL,OAAOjC,GAAa,CACxB,CAMA,SAASkC,KAML,GAHIlD,GAA4B,GAAKgD,GAAchD,EAA0B,EAA+BC,IACxGL,EAAa3b,IAA4D,EAA+Bgc,GAExGc,GAAsB,IAAMtB,IAAoB1O,GAAS,CAGzD,IAAIoS,EAAmBlC,GAAUC,IAAiB,GAC9CiC,GAAoB,IACpB1D,EAAkB2D,GAAa,WAC3B3D,EAAkB,KAElBqD,GAA8B,EAAqC,EAA+B,GAClGI,IACJ,EAAGC,GAEX,CAEA,IAAIE,EAAUpC,GAAUC,IAAiB,IACpC1B,IAAoBH,GAAuBgE,GAAW,IAAMtS,KACzDkS,KACAzD,EAAkB4D,GAAa,WAC3B5D,EAAkB,KAClBsD,GAA8C,IAAhBnD,EAAoB,EAAqC,EAAkC,EAA+B,GAExJA,IACAA,GAAe,EACfuD,IACJ,EAAGG,GAGH1D,EAAc,EAG1B,CAeA,SAAS7E,KACLoE,EAAc,KACd2B,IAAoB,EACpBC,GAAsB,GACtBzB,EAAsB,KACtBtO,IAAU,EACVgQ,GAAsB,EACtBzB,EAA2B,IAC3B0B,GAAa,EACbzB,EAAkB3B,GAClBqD,GAAY,CAAC,EACbC,GAAkBpgB,EAClB0e,EAAkB,KAClBC,EAAkB,KAClBC,EAAuB,EACvBC,EAAc,EACdE,EAAe,CAAC,EAChBC,EAAwB,EACxBY,GAAuB,EAEvBX,EAAuB,EACvBC,GAA4B,EAC5BC,EAAsB,KACtBC,GAAkB,EAClBC,GAAyB,EACzBC,EApjBM,EAqjBNC,EApjBgB,EAqjBhBC,EAAgB,KAChBK,GAA8B,KAC9B7N,GAAkB,KAClB8N,IAAoB,EACpBlO,EAAkB5D,KAElB8Q,EAAe,IAAInP,GA9jBN,IAKR,EACgB,EAwjBkF,CACnG6S,QAASC,GACTC,KAAMC,GACNC,KAAMC,GACNC,KAAMC,GACNC,QAASC,GACTC,IAAKC,KAETC,KA2CArE,EAAa,GAAuC,CAChD3T,QAAS,GACTiY,QAAS,CAAC,GAEdtE,EAAa,GAAsC,CAC/C3T,QAAS,GACTiY,QAAS,CAAC,GAEdtE,EAAa,GAA0C,CACnD3T,QAAS,GACTiY,QAAS,CAAC,GAEdtE,EAAa,GAAoC,CAC7C3T,QAAS,GACTiY,QAAS,CAAC,GAvDdC,IACJ,CACA,SAAShB,GAAaiB,EAAchB,GAEhB,IAAZA,GAAiB3D,IACjB2D,EAAU,GAEd,IAAIiB,EAAkB,IAItB,OAHI5E,IACA4E,EAAkB/c,GAAsCmY,EAAuB,IAE5EhN,EAAgBzD,IAAIoV,EAAchB,EAAUiB,EACvD,CACA,SAASC,KACL,OAAwB,OAApB/E,IACAA,EAAgBgF,SAChBhF,EAAkB,KAClBG,EAAc,GACP,EAGf,CAEA,SAAS+B,GAAkB9V,EAAUD,GACjC4Y,KAEIlF,IACAA,EAAoBmF,SACpBnF,EAAsB,MAErBtO,IAED+R,GAA8B,EAAkClX,EAAUD,EAElF,CAwBA,SAAS4W,GAAe/c,EAAMxJ,EAASkK,GACnC,IAAIue,EAAa5E,EAAa7jB,GACzByoB,IAEDA,EAAa5E,EADb7jB,EAAU,IAGd,IAAIsmB,EAAamC,EAAWN,QAAQ3e,GAMpC,OALK8c,GAAcpc,IACfoc,EAAa/c,GAAWW,OAAOV,GAC/Bif,EAAWvY,QAAQ1J,GAA8B8f,GACjDmC,EAAWN,QAAQ3e,GAAQ8c,GAExBA,CACX,CACA,SAASoC,GAAkBC,EAASC,GAE5BhF,EAAa5b,QAA0D0b,IACnEI,EAAwB,GAAKkB,GAAalB,IAE1C8E,GAAU,GAEVA,GAAkC,MAAvBvF,GAEXnkB,EAAM2pB,MAAMF,EAAS,WAAc,EAAG,IAGlD,CACA,SAASzC,GAAuB1iB,EAAOqiB,GAE/B3B,IACA1gB,GAAQ,QAAeA,IAE3B,IAAIxD,EAAUwD,EAAMsF,IAChBwd,EAAaC,GAAe/iB,EAAM6C,GAAgCrG,GAAS,GAC/E,QAAIsmB,EAAWzc,SAASrG,KACJ,IAAZxD,GACAglB,KAEIa,GAAiE,IAAvDriB,EAAMqF,KAEhB6f,IAAmBllB,EAAMslB,KAAM/E,EAAuB,GAAKuC,EAAWhgB,MAAqCyd,IAK/GgB,MAEG,EAGf,CA6BA,SAAS4B,KAgBL,IAfA,IAAIoC,EAAiB,EACjBC,EAAc,EACdC,EAAU,SAAUjpB,GACpB,IAAIyoB,EAAa5E,EAAa7jB,GAC1ByoB,GAAcA,EAAW3gB,MACzB,SAAW2gB,EAAW3gB,IAAqC,SAAUwI,GACjD,IAAZtQ,EACA+oB,GAAkBzY,EAAShK,KAG3B0iB,GAAe1Y,EAAShK,IAEhC,EAER,EACStG,EAAU,EAAkCA,GAAW,EAAqCA,IACjGipB,EAAQjpB,GAEZglB,GAAagE,EACbjE,GAAsBgE,CAC1B,CACA,SAAS/B,GAAchnB,EAAS4P,EAAUD,GACtC,IAAIuZ,GAAe,EACfP,EAAuB,IAAb/Y,EAgDd,OA5CK+Y,GAAW/E,EAAa5b,OACzB,QAAO9I,EAAM8f,KAAM,WAAc,MAAO,2BAA6B,EAAG,WAGpE,IAFA,IAAIwH,EAAgB,GAChB2C,EAAmB,EAChBA,GAAoBnpB,GAAS,CAChC,IAAIyoB,EAAa5E,EAAasF,GAC1BV,GAAcA,EAAWvY,SAAWuY,EAAWvY,QAAQ9L,GAAoC,KAC3F,SAAWqkB,EAAW3gB,IAAqC,SAAUwI,GAE5DsT,EAAarC,SAASjR,GAKvB4Y,EAAeA,GAAiB5Y,GAAYA,EAAShK,KAAoC,EAHzFkgB,EAAgBA,EAAcpgB,GAAkCkK,EAAS/J,MAKpD,IAArB4iB,EACApE,IAAuBzU,EAAShK,KAGhC0e,IAAc1U,EAAShK,IAE/B,GAEAmiB,EAAW3gB,IAAsC,GACjD2gB,EAAWN,QAAU,CAAC,GAE1BgB,GACJ,CACI3C,EAAcpiB,GAAoC,GAClDyiB,GAAchF,GAAoB2E,EAAeliB,EAAsBK,YAEvEukB,GAAgBlF,GAA4BhkB,IAE5CgkB,GAA4B,EAC5BC,EAAsB,EAE9B,EAAG,WAAc,MAAO,CAAGjkB,QAASA,EAAS4P,SAAUA,EAAUD,WAAYA,EAAe,GAAIgZ,IAIhG3E,EAA2BA,GAA4B,GAAI,SAAQA,EAA0BhkB,GAAWA,EACxGikB,GAAsB,SAAQA,EAAqBtU,IAEhDuZ,CACX,CAMA,SAASE,GAAWlW,EAAUvD,GAE1BmX,GAA8B,EAAkC,EAA+BnX,GAE/FgX,KACA0C,GAAoB,WAEZnW,GACAA,IAEA4R,GAAoB1gB,GAAoC,EACxDif,EAAsB+D,GAAa,WAC/B/D,EAAsB,KACtB+F,GAAWtE,GAAoB7J,QAAStL,EAC5C,EAAG,IAIH0T,EAAsB,KAEtB6D,KAER,EACJ,CACA,SAASmC,GAAoBnW,GACrB0Q,EAAatC,mBACbpO,IAGAmQ,EAAsB+D,GAAa,WAC/B/D,EAAsB,KACtBgG,GAAoBnW,EACxB,EAj0BE,IAm0BV,CAWA,SAASgV,MACLjD,GAAY,CAAC,GACHngB,GAAc,CAAC,EAAG,EAAG,GAC/BmgB,GAAqB,eAAI,CAAC,EAAG,EAAG,GAChCA,GAAoB,YAAI,CAAC,GAAI,EAAG,EACpC,CAKA,SAASsC,GAAerX,EAAS4M,GAC7B,IAAI0J,EAAgB,GAChB8C,EAAkBlF,EAClBD,IAEAmF,EAAkBjF,IAEtB,SAAWnU,EAAS,SAAUI,GACtBA,GAAYA,EAAShK,KAAoC,IACzD,SAAWgK,EAAS/J,KAAqC,SAAU0C,GAC3DA,IAEIA,EAASF,MACTE,EAASH,IAAsC,EAC/CG,EAASF,KAAgC,GAEzCE,EAASJ,IAA+CygB,IAExD,QAA2BrgB,EAAU/J,EAAMyJ,KAC3Cid,GAAkB3c,GAAU,IAG5Bud,EAAchgB,GAA8ByC,GAGxD,EAER,GACIud,EAAcpiB,GAAoC,GAClDyiB,GAAchF,GAAoB2E,EAAeliB,EAAsBE,oBAEvE2f,GAEAuB,GAAkB,EAAkC,EAE5D,CACA,SAAS6D,GAAkBC,EAAStmB,GAChC,IAAIumB,EAAWhF,GAAwB,CAAC,EACpCiF,EAAaD,EAAQD,GACzB,GAAIE,EACA,IACIA,EAAWC,MAAMF,EAASvmB,EAC9B,CACA,MAAOzD,IACH,QAAeP,EAAMigB,UAAW,EAAmC,GAAoDqK,EAAU,yBAA2B/pB,EAChK,CAER,CACA,SAASonB,GAAc2C,EAASpgB,GAE5B,IADA,IAAIwgB,EAAY,GACPvW,EAAK,EAAGA,EAAKpQ,UAAUD,OAAQqQ,IACpCuW,EAAUvW,EAAK,GAAKpQ,UAAUoQ,GAE9BjK,GAAaA,EAAUhF,GAAoC,GAC3DmlB,GAAkBC,EAAS,CAACpgB,GAAWhD,GAAkCwjB,GAEjF,CACA,SAASlD,GAAmB8C,EAAStZ,GAEjC,IADA,IAAI0Z,EAAY,GACPvW,EAAK,EAAGA,EAAKpQ,UAAUD,OAAQqQ,IACpCuW,EAAUvW,EAAK,GAAKpQ,UAAUoQ,GAE9BnD,GAAWA,EAAQ9L,GAAoC,IACvD,SAAW8L,EAAS,SAAUI,GACtBA,GAAYA,EAAShK,KAAoC,GACzDijB,GAAkBC,EAAS,CAAClZ,EAAS5G,UAAUtD,GAAkCwjB,GAEzF,EAER,CAKA,SAASnC,GAAcvX,EAAS4M,EAAQ+M,GAChC3Z,GAAWA,EAAQ9L,GAAoC,GACvDmlB,GAAkB,oBAAqB,CAAEzM,GAAU,KAA4DA,GAAU,KACjHA,EAAS,IACT,GAAwD,IAAlB+M,GAEtD,CAMA,SAASlC,GAAiBzX,EAAS4M,GAC/B4J,GAAmB,aAAcxW,EAAS4M,GAE1CoK,IACJ,CACA,SAASW,GAAe3X,EAAS4M,EAAQ+M,EAAeja,GACpD8W,GAAmB7E,GAAoB3R,EAAU4M,GAAU,KAAyDA,GAAU,KAC1HA,EAAS,IACTxY,EAAsBC,QAAUqL,EACxC,CACA,SAASmY,GAAoB7X,EAAS4M,EAAQ+M,EAAeja,GACzD8W,GAAmB7E,GAAoB3R,EAAS5L,EAAsBE,mBAAoBoL,GAE1FsX,IACJ,CACA,SAASe,GAAY/X,EAAS4M,EAAQ+M,EAAeja,GACjD8W,GAAmB7E,GAAoB3R,EAAS5L,EAAsBC,QAASqL,GAE/EsX,IACJ,CACA,SAASkB,KAKDrE,EAJCS,EAIsB,GAHA,SAA0B,EAAlB1N,GAAwCyM,EAAkB,EAKjG,CAh2BAzE,KAEA5f,EAAyB,kBAAI,WACzB,MAAO,CAAC0kB,EAAcV,EAC1B,EACAhkB,EAAM6E,GAA4C,SAAUgb,EAAWC,EAAM3f,IACzE,QAAO2f,EAAM,WAAc,MAAO,wBAA0B,EAAG,WAC3D7f,EAAM4E,GAA0Cgb,EAAWC,EAAM3f,GACjEolB,EAAuBzF,EAAK8K,eAC5B,IACIxF,GAAgB,SAAkB,OAAsBplB,EAAMyJ,KAA4CqW,EAAK+K,cAAgB/K,EAAK+K,gBACpI7qB,EAAM8qB,UAAS,OAAejL,EAAW,SAAUzK,GAC/C,IAAI8K,EAAa9K,EAAQ9U,IACrByqB,GAAM,QAA8B,KAAM7K,EAAYJ,GAC1DkE,EAAc+G,EAAIC,UAAUhrB,EAAMyJ,IAA2CmZ,IAC7EpL,EAAkB5D,GAAqBoQ,EAAYrc,GAA6Dqc,EAAYpc,IAE5Hod,GAAmBhB,EAAYN,qBAAsB,UACrD2B,EAAgCrB,EAAkF,6BAyGlI,SAAqBlE,GACjB,IAAImL,EAA0BnL,EAAK3W,IACnC2W,EAAK3W,IAA2C,WAC5C,IAAI+hB,EAAS,EAIb,OAHI7F,IACA6F,GAAkB,GAEfA,EAASD,EAAwBnrB,KAAKggB,EACjD,CACJ,CAjHgBqL,CAAYrL,GACZuE,EAAkBL,EAAYnB,iBAC9BuB,EAA2BJ,EAAYjB,oBACvC6B,EAAwBZ,EAAYta,IACpCwb,EAAwBlB,EAAYH,sBACpCsB,EAA8BnB,EAAYF,4BAC1CwB,EAA8BtB,EAAgF,2BAC9GpM,GAAkBoM,EAAYnD,gBAC1B,SAAcX,EAAW7gB,aACzBW,EAAMwiB,QAEC3M,IAEP7V,EAAMyiB,SAEVyG,KAEAzD,GAA8BzB,EAAgF,2BAE9G0B,KAAsB1B,EAAYZ,iBAC9BoC,GACAS,IAEJ,IAAImF,EAA0BlL,EAAWmL,yBAA2B,GAEpE7F,GAAuB,QAA2Be,GAAqB6E,EAAyBhG,GAChGI,GAAuB,QAAyBe,GAAqB6E,EAAyBhG,IAAkBI,EAChHA,GAAuB,QAAyBiB,GAAmBvG,EAAWoL,sBAAuBlG,IAAkBI,CAC3H,IAEAd,EAAa7f,GAA0Cgb,EAAW7f,EAAM8f,KAAM9f,EAClF,CACA,MAAOO,GAGH,MADAP,EAAMurB,gBAAe,GACfhrB,CACV,CACJ,EAAG,WAAc,MAAO,CAAGsf,UAAWA,EAAWC,KAAMA,EAAM3f,WAAYA,EAAe,EAC5F,EACAH,EAAMwrB,iBAAmB,SAAUC,EAAIC,IACnC,QAA2BD,EAAIzrB,EAAMyJ,KACrCiiB,EAAUA,GAAW1rB,EAAM2rB,WAAWD,GACtC,IAAIpnB,EAAQmnB,EACP/F,IAAsBC,KAEnBF,KACAnhB,EAAM6C,GAAiCse,IAE3CiB,GAAkBpiB,GAAO,GACrB2gB,EAEAuB,GAAkB,EAAkC,GAGpDwB,MAGRhoB,EAAM4rB,YAAYtnB,EAAOonB,EAC7B,EACA1rB,EAAM6rB,kBAAoB,WACtB,IACI,IAAIC,EAAYpH,GAAgBA,EAAapc,MAC7C,GAAIoc,EACA,MAAO,CACHqH,OAAQ,WACJ,OAAID,EACOA,EAAUxW,IAEd,IACX,EACA0W,UAAW3F,GACXrE,MAAOkE,EACP+F,cAAe,SAAUznB,GACrB,OAAQkhB,EACZ,EACAtV,cAAe,SAAU5L,GACrB,OAAO,IACX,EACA0nB,mBAAoB,SAAUja,GAC1B,GAAIyS,EAAalc,IACb,OAAOkc,EAAalc,IAA4DyJ,EAAM+S,EAE9F,EAGZ,CACA,MAAOzkB,GAEP,CACA,OAAO,IACX,EACAP,EAAMmsB,YAAc,SAAUC,EAAWC,GACrC7F,GAAkB,EAAkC,GACpDb,IAAoB,EACpBjB,EAAapC,WACb2D,IAEArG,IACJ,EAoIA5f,EAAMssB,oBAAsB,SAAUC,EAAYC,GAC9CxI,EAAYnB,iBAAmBwB,GAAkB,QAAkBkI,GAAcA,EAAa7J,GAC9FsB,EAAYta,IAAkEkb,GAAwB,QAAkB4H,GAAkBA,EAAiB,EAC3JtD,KAEA,IAAIQ,EAAU5D,GAAayG,EAC3B,IAAK7C,GAAW7E,EAAuB,EAEnC,IAAK,IAAI/jB,EAAU,GAAmC4oB,GAAW5oB,GAAW,EAAoCA,IAAW,CACvH,IAAIyoB,EAAa5E,EAAa7jB,GAC1ByoB,GAAcA,EAAW3gB,MACzB,SAAW2gB,EAAW3gB,IAAqC,SAAUwI,GAC7DA,GAAYA,EAAShK,MAAqCyd,IAE1D6E,GAAU,EAElB,EAER,CAEJF,IAAkB,EAAME,EAC5B,EACA1pB,EAAMwiB,MAAQ,WACV6G,KACAxT,IAAU,EACV6O,GAAgBA,EAAalC,OACjC,EACAxiB,EAAMyiB,OAAS,WACX5M,IAAU,EACV6O,GAAgBA,EAAajC,SAC7BuF,IACJ,EACAhoB,EAAMysB,sBAAwB,SAAUC,GAucpCrD,KACAL,KACAhD,GAAkBpgB,EAClBoiB,MAxcA,SAAc0E,EAAU,SAAUC,EAAaC,GAC3C,IAAIC,EAAUD,EAAa1nB,GAC3B,GAAI2nB,GAAW,EAAG,CACd,IAAIC,EAAeD,EAAU,EAAID,EAAa,GAAK,EAQnD,GAPAA,EAAa7hB,OAAO,EAAG8hB,EAAU,GAE7BD,EAAa,GAAK,IAClBA,EAAa,IAAM,GAInBA,EAAa,GAAK,GAAKA,EAAa,GAAK,EAAG,CAC5C,IAAIxD,EAAkBwD,EAAa,GAAKA,EAAa,GACrDA,EAAa,IAAK,SAASxD,GAAmBwD,EAAa,EAC/D,CAEIE,GAAe,GAAKF,EAAa,IAAM,GAAKE,EAAcF,EAAa,KAEvEE,EAAcF,EAAa,IAE/BA,EAAatlB,GAA8BwlB,GAC3C/G,GAAU4G,GAAeC,CAC7B,CACJ,EACJ,EACA5sB,EAAM2pB,MAAQ,SAAUF,EAASzV,EAAUvD,GAEvC,IAAI3E,EACJ,QAFqB,IAAjB2d,IAAsBA,GAAU,IAE/B5T,GAED,GADApF,EAAaA,GAAc,EACvBgZ,EACKzV,IACDlI,GAAS,QAAc,SAAUihB,GAE7B/Y,EAAW+Y,CACf,IAEuB,MAAvB5I,GAEAkF,KAEAvB,GAAc,EAAkC,EAA+BrX,GAC/E0T,EAAsB+D,GAAa,WAC/B/D,EAAsB,KACtB+F,GAAWlW,EAAUvD,EACzB,EAAG,IAKHmV,GAAoBte,GAA8B0M,OAGrD,CAED,IAAIgZ,EAAU3D,KAEdzB,GAA8B,EAAkC,EAAmCnX,GACnGuD,GAAYA,IACRgZ,GAEAhF,IAER,CAEJ,OAAOlc,CACX,EACA9L,EAAMitB,iBAAmB,SAAUC,GAC/BxI,EAAaxC,UAAU1b,EAAuB0mB,EAClD,EACAltB,EAAMmtB,oBAAsB,SAAUC,GAClC1I,EAAaxC,UAAUzb,EAAoB2mB,EAC/C,EACAptB,EAAMqtB,uBAAyB,WAC3B3I,EAAavC,aAAa1b,EAC9B,EACAzG,EAAMstB,UAAYvF,GAClB/nB,EAAMutB,oBAAsB,SAAUZ,GAC9B3G,KAAoB2G,QAA0CvgB,IAA3B2Z,GAAU4G,KAC7CtD,KACArD,GAAkB2G,EAClB3E,KAER,GACA,QAAehoB,EAAO,WAAc,OAAO0kB,CAAc,EAAG,CAAC,uBAwD7D1kB,EAAMwJ,IAAkE,WAChEgb,EA5gBE,IA6gBFA,IACA6E,KACArB,KAER,EACAhoB,EAAMqe,cAAgB,WACdmG,IACAA,EAAuB,EACvB6E,KACArB,KAER,CA6aJ,GACOnoB,CACX,CAqBA,OAl6BA,QAAUkkB,EAAapkB,GAg6BvBokB,EAAYxiB,QAAQ,EAEbwiB,CACX,CAp6BgC,CAo6B9ByJ,EAAA,E,6CCv9BK,IACIC,EAA0B,0B,sFClBrC,SAASC,EAAuBC,EAAUC,EAAc/N,GACpD,OAAK8N,IAAY,SAAkBA,GACxBC,GAEP,SAAUD,GACHA,EAEmE,UAAvE,SAASA,GAAU,OAC9B,CAOO,SAASE,EAAWD,GACvB,MAAO,CACHE,KAAK,EACLhL,EAAG8K,EAEX,CAoBO,SAASG,EAAcC,EAAWJ,EAAcK,GACnD,MAAO,CACHC,GAAID,EACJzuB,MAAOwuB,EACPlL,EAAG8K,EAEX,CAQO,SAASO,EAAaP,EAAcK,GACvC,MAAO,CACHC,GAAID,EACJla,IAAK2Z,EACL5K,IAAK8K,EAEb,C,kECpEA,SAASQ,EAAkBlsB,GACvB,OAAQA,IAAS,SAASA,MAAW,SAAQA,KAAWA,EAAM1C,OAAS0C,EAAMgsB,KAAM,SAAUhsB,EAAO,OAAQ,SAAUA,EAAO,SAAU,SAAUA,EAAO,QAAUA,EAAM6R,IAC5K,CACA,SAASsa,EAAYC,EAAgBzO,EAAW0O,GAC5C,IAAIC,EACAC,EAAiBF,EAAYG,OAAS,MAE1C,GAAI7O,GAAa0O,EAAYL,GAAI,CAC7B,IAAIS,EAAYJ,EAAYL,IACvB,SAAQS,KACTA,EAAY,CAACA,IAEjB,IAAK,IAAIvkB,EAAK,EAAGA,EAAKukB,EAAU,MAAmCvkB,IAAM,CACrE,IAAIwkB,EAAWD,EAAUvkB,GACrBykB,EAAUhP,EAAU+O,GAaxB,GAZIH,EAAeI,GACfL,EAAWK,EAENP,IAGDG,EADJI,EAAUP,EAAehuB,IAAIsuB,MAEzBJ,EAAWK,GAGfP,EAAeva,IAAIua,EAAehuB,KAAK,SAASsuB,GAAWC,IAE3DJ,EAAeD,GAEf,KAER,CACJ,CAKA,OAHKC,EAAeD,IAAaC,EAAeF,EAAYzL,KACxD0L,EAAWD,EAAYzL,GAEpB0L,CACX,CAQA,SAASM,EAAqBR,EAAgBzO,EAAW0O,GACrD,IAQQQ,EARJpB,EAAWY,EA0Bf,OAzBIA,GAAeH,EAAkBG,KACjCZ,EAAWU,EAAYC,EAAgBzO,EAAW0O,IAElDZ,IACIS,EAAkBT,KAClBA,EAAWmB,EAAqBR,EAAgBzO,EAAW8N,KAG3D,SAAQA,IACRoB,EAAa,IACF,MAAoCpB,EAAS,OAEnD,SAAcA,KACnBoB,EAAa,CAAC,GAEdA,KACA,SAAcpB,EAAU,SAAUze,EAAKhN,GAC/BA,GAASksB,EAAkBlsB,KAC3BA,EAAQ4sB,EAAqBR,EAAgBzO,EAAW3d,IAE5D6sB,EAAW7f,GAAOhN,CACtB,GACAyrB,EAAWoB,IAGZpB,CACX,CAOO,SAASqB,EAAmBV,EAAgBzO,EAAWrd,EAAMorB,GAEhE,IAAIqB,EACAC,EACAV,EAEAW,EACAC,EACAC,EACAC,EAuBA3B,EA3BAY,EAAcX,EAKdQ,EAAkBG,IAElBU,EAAUV,EAAY/uB,MACtB0vB,EAAQX,EAAYxa,IACpBsb,EAAWd,EAAYgB,OACvBD,EAAkBf,EAAYiB,OAC9BL,EAAUZ,EAAYT,MACtBsB,EAAYb,EAAYkB,OACN,SAAYL,KAC1BA,IAAcD,GAElBX,EAAWH,EAAYC,EAAgBzO,EAAW0O,IAGlDC,EAAWZ,EAEX0B,GAGAhB,EAAekB,OAAO3P,EAAWrd,GAIrC,IAAIktB,GAAe,EACfC,EAAW9P,EAAUrd,IAErBmtB,IAAa,SAAkBA,KAE/BhC,EAAWgC,EACXD,GAAe,EAGXT,GAAWtB,IAAaa,IAAaS,EAAQtB,KAC7CA,EAAWa,EACXkB,GAAe,GAEfR,IAEAQ,GADA/B,EAAWuB,EAAMvB,EAAUa,EAAU3O,MACT2O,IAG/BkB,EAcD/B,EAFKa,EAEMM,EAAqBR,EAAgBzO,EAAW2O,GAGhDA,IAhBP,SAAcb,KAAa,SAAQa,KAE/BW,GAAWX,KAAa,SAAcA,KAAa,SAAQA,MAE3D,SAAcA,EAAU,SAAUoB,EAAQC,GAEtCb,EAAmBV,EAAgBX,EAAUiC,EAAQC,EACzD,GAeZvB,EAAeva,IAAI8L,EAAWrd,EAAMmrB,GAChCyB,GACAd,EAAemB,IAAI5P,EAAWrd,GAE9B6sB,GACAf,EAAeiB,OAAO1P,EAAWrd,EAEzC,C,uGC/JWstB,GAAmB,SAAU,mBAMpCC,GAAgB,SAAU,sBAO1BC,GAAgB,SAAU,sBACvB,SAASC,EAAaC,GAErB,IAAIC,EADR,OAAID,KAEI,SAAQA,IACRC,EAAW,IACF,MAAoCD,EAAO,OAE/C,SAAcA,KACnBC,EAAW,CAAC,GAEZA,KAEA,SAAcD,EAAQ,SAAUhhB,EAAKhN,GAEjCiuB,EAASjhB,GAAO+gB,EAAa/tB,EACjC,GACOiuB,GAGRD,CACX,CAqGO,SAASE,EAAgBC,EAASC,EAAOpuB,GAC5C,IAAI4J,GAAS,EAWb,OATI5J,IAAUmuB,EAAQC,EAAMd,WAExB1jB,EAAS5J,EAAM8tB,KAEC9tB,EAAM6tB,KAElBjkB,GAAS,SAAc5J,KAAU,SAAQA,KAG1C4J,CACX,CAKO,SAASykB,EAAmB9vB,IAC/B,SAAe,iBAAmBA,EACtC,CC5JA,ICFI+vB,EDEAC,EAAsB,CACtB,OACA,MACA,QACA,UACA,UAEOC,EAAqB,SAAUtwB,EAAQoC,EAAMmuB,EAAMpwB,GAC1DH,GAAUA,EAAO,MAAiD,EAAgC,IAAsD,GAAGwwB,OAAOD,EAAM,MAAMC,OAAOpuB,EAAM,gBAAiB,SAAQjC,GACxN,EAmBA,SAASswB,EAAkBjiB,EAAQpM,GAC/B,IAAIsuB,GAAW,SAA4BliB,EAAQpM,GACnD,OAAOsuB,GAAYA,EAASC,GAChC,CAkHO,SAASC,EAAoBV,EAAO1hB,EAAQpM,EAAMN,GACrD,GAAI0M,EAAQ,CAER,IAAIqiB,EAASJ,EAAkBjiB,EAAQpM,GACvByuB,GAAYA,EAAOX,EAAMrsB,MAMrC2K,EAAOpM,GAAQN,EA3H3B,SAAgCouB,EAAOzQ,EAAWrd,EAAMN,GAEpD,IAAIgvB,EAAS,CACTC,EACAC,EAAG,GACHC,IAAK,SAAUC,GACPA,GAAWA,EAAQC,MACoB,KAAnC,SAAWL,EAAOE,EAAGE,IAErBJ,EAAOE,EAAE,MAA8BE,GAE3ChB,EAAMe,IAAIC,EAASJ,GAE3B,EACAM,IAAK,SAAUF,GACX,IAAI5d,GAAM,SAAWwd,EAAOE,EAAGE,IAClB,IAAT5d,GACAwd,EAAOE,EAAE,MAAkC1d,EAAK,EAExD,GAGA+d,GAAe,EACfC,GAAkB,EACtB,SAASC,IACDF,IACAC,EAAkBA,GAAmBtB,EAAgBuB,EAAcrB,EAAOpuB,GAEtEA,IAAUA,EAAM4tB,IAAqB4B,IAErCxvB,EAAQ0vB,EAAmBtB,EAAOpuB,EAAOM,EAAM,eAGnDivB,GAAe,GAGnB,IAAII,EAAgBvB,EAAMwB,IAI1B,OAHID,GACAX,EAAOG,IAAIQ,GAER3vB,CACX,CAEAyvB,EAAarB,EAAMrsB,MAAQ,CACvB8tB,KAAM,WACFzB,EAAM0B,IAAId,EACd,IAiEJ,SAAUrR,EAAWqR,EAAOC,EAAG,CAAEc,EAAGN,EAAcO,EA/DlD,SAAsBhiB,GAClB,GAAIhO,IAAUgO,EAAU,CACdyhB,EAAarB,EAAM6B,MAAQ7B,EAAM8B,KAEnC7B,EAAmB,IAAM/tB,EAAO,mBAAoB,SAAQqd,IAE5D4R,IACAC,EAAkBA,GAAmBtB,EAAgBuB,EAAcrB,EAAOpuB,GAC1EuvB,GAAe,GAGnB,IAAIY,EAAeX,GAAmBC,EAAarB,EAAMgC,IACzD,GAAIZ,EAEA,GAAIW,EAAc,EAGd,SAAcnwB,EAAO,SAAUgN,GAC3BhN,EAAMgN,GAAOgB,EAAWA,EAAShB,GAAO,IAC5C,GAEA,KACI,SAAcgB,EAAU,SAAUhB,EAAKye,GACnCqD,EAAoBV,EAAOpuB,EAAOgN,EAAKye,EAC3C,GAEAzd,EAAWhO,CACf,CACA,MAAO3B,GAEHmwB,GAAoBJ,EAAMiC,MAAQ,CAAC,GAAG,MAAmC/vB,EAAM,YAAajC,GAE5FmxB,GAAkB,CACtB,CACJ,MACSxvB,GAASA,EAAM4tB,KAGpB,SAAc5tB,EAAO,SAAUgN,GAE3B,IAAI+hB,EAASJ,EAAkB3uB,EAAOgN,GACtC,GAAI+hB,EAAQ,CAER,IAAIuB,EAAavB,EAAOX,EAAMrsB,MAC9BuuB,GAAcA,EAAWT,MAC7B,CACJ,GAGR,GAAI7hB,IAAahO,EAAO,CACpB,IAAIuwB,EAAqBviB,GAAYkgB,EAAgBuB,EAAcrB,EAAOpgB,IACrEmiB,GAAgBI,IAEjBviB,EAAW0hB,EAAmBtB,EAAOpgB,EAAU1N,EAAM,eAGzDN,EAAQgO,EACRwhB,EAAkBe,CACtB,CAEAnC,EAAM0B,IAAId,EACd,CACJ,GAEJ,CAOYwB,CAAuBpC,EAAO1hB,EAAQpM,EAAMN,EAMpD,CACA,OAAO0M,CACX,CACO,SAAS+jB,EAAyBrC,EAAO1hB,EAAQpM,EAAMowB,GAC1D,GAAIhkB,EAAQ,CAER,IAAIqiB,EAASJ,EAAkBjiB,EAAQpM,GACnCqwB,EAAY5B,KAAYA,EAAOX,EAAMrsB,MACrC6uB,EAAUF,GAASA,EAAM,GACzBrD,EAASqD,GAASA,EAAM,GACxBG,EAAUH,GAASA,EAAM,GAC7B,IAAKC,EAAW,CACZ,GAAIE,EACA,KD/ET,SAAgC7wB,GACnC,GAAIA,KAAU,SAAcA,KAAU,SAAQA,IAC1C,IACIA,EAAM6tB,IAAiB,CAC3B,CACA,MAAOxvB,GAEP,CAGR,CCuEoByyB,CAAuBpkB,EAC3B,CACA,MAAOrO,GACHmwB,GAAoBJ,EAAMiC,MAAQ,CAAC,GAAG,MAAmC/vB,EAAM,WAAYjC,EAC/F,CAEJ,IAEIywB,EAAoBV,EAAO1hB,EAAQpM,EAAMoM,EAAOpM,IAChDyuB,EAASJ,EAAkBjiB,EAAQpM,EACvC,CACA,MAAOjC,GAEHmwB,GAAoBJ,EAAMiC,MAAQ,CAAC,GAAG,MAAmC/vB,EAAM,QAASjC,EAC5F,CACJ,CAEIuyB,IACA7B,EAAOX,EAAMgC,IAAMQ,GAEnBvD,IACA0B,EAAOX,EAAM6B,IAAM5C,GAEnBwD,IACA9B,EAAOX,EAAMd,SAAU,EAE/B,CACA,OAAO5gB,CACX,CACO,SAASgjB,EAAmBtB,EAAO1hB,EAAQpM,EAAMmuB,GACpD,KAEI,SAAc/hB,EAAQ,SAAUM,EAAKhN,GAEjC8uB,EAAoBV,EAAO1hB,EAAQM,EAAKhN,EAC5C,GACK0M,EAAOkhB,MAER,SAAclhB,EAAQkhB,EAAkB,CACpCiB,IAAK,WACD,OAAOT,EAAMiC,IACjB,IA3MhB,SAAqBjC,EAAO1hB,EAAQpM,IAC5B,SAAQoM,KAER,SAAW6hB,EAAqB,SAAUwC,GACtC,IAAIC,EAAYtkB,EAAOqkB,GACvBrkB,EAAOqkB,GAAU,WAEb,IADA,IAAI/e,EAAO,GACFC,EAAK,EAAGA,EAAKpQ,UAAUD,OAAQqQ,IACpCD,EAAKC,GAAMpQ,UAAUoQ,GAEzB,IAAIrI,EAASonB,EAAU,MAAgCnzB,KAAMmU,GAG7D,OADA0d,EAAmBtB,EAAO1hB,EAAQpM,EAAM,YACjCsJ,CACX,CACJ,EAER,CA4LYqnB,CAAY7C,EAAO1hB,EAAQpM,GAEnC,CACA,MAAOjC,GAEHmwB,GAAoBJ,EAAMiC,MAAQ,CAAC,GAAG,MAAmC/vB,EAAMmuB,EAAMpwB,EACzF,CACA,OAAOqO,CACX,CEhOA,IAAIwkB,EAAY,QACZC,EAAa,KC+BjB,SAASC,EAAsBlzB,EAAQwO,EAAQkkB,GAC3C,IAAIxE,EJSD,SAAiCpsB,GACpC,GAAIA,EAAO,CACP,IAAIovB,EAAUpvB,EAAM4tB,IAAqB5tB,EACzC,GAAIovB,EAAQhxB,MAAQgxB,EAAQhxB,MAAQ4B,GAASovB,EAAQhxB,IAAIwvB,KAAsBwB,GAC3E,OAAOA,CAEf,CACA,OAAO,IACX,CIjByBiC,CAAwB3kB,GAC7C,GAAI0f,EAEA,OAAOA,EAEX,IAEIkF,EAFAC,GAAM,OAAsB,UAAU,GACtCzgB,EAAapE,IAAsB,IAAZkkB,EAAqBlkB,EAASqhB,EAAarhB,GAyDlE8kB,EAAa,CACbD,IAAK,KACLnzB,IAAK0S,EACL5S,OAAQA,EACRuzB,OA3DJ,WACIH,EAASG,QACb,EA0DI5f,IAzDJ,SAAmBnF,EAAQpM,EAAMN,GAC7B,IACI0M,EAASoiB,EAAoBwC,EAAU5kB,EAAQpM,EAAMN,EACzD,CACA,MAAO3B,GAEHmwB,EAAmBtwB,EAAQoC,EAAM,gBAAiBjC,EACtD,CACA,OAAOqO,EAAOpM,EAClB,EAiDIoxB,MAhBJ,SAAwB/T,EAAWgU,GAQ/B,OAPIA,IAEA,SAAcA,EAAe,SAAUrxB,EAAMN,IAEzC,OAAmBwxB,EAAY7T,EAAWrd,EAAMN,EACpD,GAEG2d,CACX,EAQIiU,MAjDJ,SAAgBC,GACZ,OA5CR,SAA8BzD,EAAOyD,GACjC,IAAIzC,EAAU,CACVC,GAAIwC,EACJpS,GAAI,WAGA2P,EAAQC,GAAK,KACbjB,EAAQ,KACRyD,EAAgB,IACpB,GAIJ,OAFA,SAAUzC,EAAS,SAAU,CAAExO,EAAG,WAAc,MAAO,kBAAoBwO,EAAQC,GAAK,GAAK,MAAQ,IACrGjB,EAAM0D,IAAI1C,EAASyC,GACZzC,CACX,CA8Be2C,CAAqBT,EAAUO,EAC1C,EAgDItE,IAjCJ,SAAc7gB,EAAQpM,GAClB,IAAIZ,EAEJ,OAAO+wB,EAAyBa,EAAU5kB,EAAQpM,GAAOZ,EAAK,CAAC,EAAGA,EAAG,IAA6C,EAAMA,IAAKY,EACjI,EA8BI+sB,OA7BJ,SAAiB3gB,EAAQpM,GACrB,IAAIZ,EAEJ,OAAO+wB,EAAyBa,EAAU5kB,EAAQpM,GAAOZ,EAAK,CAAC,EAAGA,EAAG,IAA8C,EAAMA,IAAKY,EAClI,EA0BIgtB,OAzBJ,SAAuB5gB,EAAQpM,GAC3B,IAAIZ,EAEJ,OAAO+wB,EAAyBa,EAAU5kB,EAAQpM,GAAOZ,EAAK,CAAC,EAAGA,EAAG,IAA0D,EAAMA,IAAKY,EAC9I,EAsBI0xB,OAlDJ,SAAgBH,EAAeI,GAC3BX,EAASQ,IAAI,KAAM,SAAU5e,GACzB,IAAIgf,EAAUZ,EAASpB,IACvB,KACS,SAAY+B,KACbX,EAASpB,IAAM+B,GAEnBJ,EAAc3e,EAClB,CACA,QACIoe,EAASpB,IAAMgC,CACnB,CACJ,EACJ,GAgDA,OATA,SAAUV,EAAY,MAAO,CACzBW,GAAG,EACH9zB,GAAG,EACH+zB,GAAG,EACHxR,EAAG2Q,IAIP7B,EAFA4B,EDjHG,SAAsBE,GACzB,IAOIF,EAPAe,GAAwB,SAAUnB,EAAY,MAAQM,EAAWD,IAAMJ,GACvEmB,GAA0B,SAAUpB,EAAY,KAAOM,EAAWD,IAAMJ,GACxEoB,GAA4B,SAAUrB,EAAY,KAAOM,EAAWD,IAAMJ,GAC1EqB,GAA4B,SAAUtB,EAAY,SAAWM,EAAWD,IAAMJ,GAC9EsB,GAAwB,SAAUvB,EAAY,MAAQM,EAAWD,IAAMJ,GACvEuB,EAAmB,KACnBC,EAAgB,KAEpB,SAASC,EAAYjD,EAAe7d,GAChC,IAAI+gB,EAAcvB,EAAS1B,IAC3B,IACI0B,EAAS1B,IAAMD,EACXA,GAAiBA,EAAc8C,MAE/B,SAAW9C,EAAc8C,GAAwB,SAAUzD,GACvDA,EAAOM,IAAIK,EACf,GACAA,EAAc8C,GAAyB,IAE3C3gB,EAAS,CACL1T,IAAKozB,EAAWpzB,IAChByT,IAAK2f,EAAW3f,IAAIihB,KAAKtB,GACzBE,MAAOF,EAAWE,MAAMoB,KAAKtB,GAC7BjE,IAAKiE,EAAWjE,IAAIuF,KAAKtB,GACzBnE,OAAQmE,EAAWnE,OAAOyF,KAAKtB,IAEvC,CACA,MAAOnzB,GACH,IAAIH,EAASszB,EAAW,MAMxB,MALItzB,GAEAA,EAAO,MAAiD,EAAmC,KAAsD,SAAQG,IAGvJA,CACV,CACA,QACIizB,EAAS1B,IAAMiD,GAAe,IAClC,CACJ,CACA,SAASE,IACL,GAAIL,EAAkB,CAClB,IAAIM,EAAiBN,EACrBA,EAAmB,KAEnBC,GAAiBA,EAAc,QAC/BA,EAAgB,KAChB,IAAIM,EAAoB,GAwBxB,IAtBA,SAAWD,EAAgB,SAAU5D,GACjC,GAAIA,IACIA,EAAQqD,MACR,SAAWrD,EAAQqD,GAAwB,SAAUzD,GAEjDA,EAAOM,IAAIF,EACf,GACAA,EAAQqD,GAAyB,MAGjCrD,EAAQC,IACR,IACIuD,EAAYxD,EAASA,EAAQC,GACjC,CACA,MAAOhxB,GAEH40B,EAAkB,MAA8B50B,EACpD,CAGZ,GAEIq0B,EACA,IACIK,GACJ,CACA,MAAO10B,GACH40B,EAAkB,MAA8B50B,EACpD,CAEA40B,EAAkB,MAAoC,GD7E/D,SAA+B10B,EAAS20B,GACtC5E,IACDA,GAAuB,SAAkB,mBAAoB,SAAU6E,EAAMnhB,GACrEA,EAAK,MAAoC,IAEzCmhB,EAAKC,OAASphB,EAAK,GAE3B,IAEJ,IAAIqhB,ECqE8B,qBDjElC,MAHA,SAAWH,EAAc,SAAUI,EAAU9hB,GACzC6hB,GAAc,KAAK3E,OAAOld,EAAK,OAAOkd,QAAO,SAAQ4E,GACzD,GACM,IAAIhF,EAAqB+E,EAAYH,GAAgB,GAC/D,CCgEgBK,CAAsB,EAAsBN,EAEpD,CACJ,CA0CA,OAXA3B,EAAW,CACPvvB,KAAMswB,EACNpC,GAAIqC,EACJlC,GAAImC,EACJjF,OAAQkF,EACRnC,KAAMmB,EACN1B,IApCJ,SAAqBd,GACjB,GAAIA,GAAUA,EAAOE,EAAE,MAAoC,EAAG,CACrDwD,IACDA,EAAmB,IAElBC,IACDA,GAAgB,SAAgB,WAC5BA,EAAgB,KAChBI,GACJ,EAAG,IAGP,IAAK,IAAIvhB,EAAM,EAAGA,EAAMwd,EAAOE,EAAE,MAAmC1d,IAAO,CACvE,IAAI4d,EAAUJ,EAAOE,EAAE1d,GAEnB4d,IAAsD,KAA3C,SAAWsD,EAAkBtD,IACxCsD,EAAiB,MAA8BtD,EAEvD,CACJ,CACJ,EAiBIqC,OAAQsB,EACRjB,IAAKc,EACLzD,IAlBJ,SAAuBC,EAASJ,GAC5B,GAAII,EAAS,CACT,IAAIlc,EAAUkc,EAAQqD,GAAyBrD,EAAQqD,IAA0B,IAC5C,KAAjC,SAAWvf,EAAS8b,IAEpB9b,EAAQ,MAA8B8b,EAE9C,CACJ,EAaJ,CCdewE,CAAahC,GAEK1gB,EAAW,SAAU,YAC3C0gB,CACX,CAqBO,SAASiC,EAAoBz1B,EAAQd,EAAegB,EAAQ0yB,GAC/D,IAAIxE,EAAiBgF,EAAsBlzB,EAAQF,GAAU,CAAC,EAAG4yB,GAIjE,OAHI1zB,GACAkvB,EAAesF,MAAMtF,EAAehuB,IAAKlB,GAEtCkvB,CACX,CAQO,SAASsH,EAAe11B,EAAQ6zB,EAAe3zB,GAClD,IAAIkxB,EAAUpxB,EAAO4vB,IAAqB5vB,EAC1C,OAAIoxB,EAAQhxB,KAAQgxB,EAAQhxB,MAAQJ,GAAUoxB,EAAQhxB,IAAIwvB,KAAsBwB,GAjCpF,SAA2BlxB,EAAQK,GAC3BL,GACAA,EAAO,MAAkDK,GACzDL,EAAO,MAAiD,EAAkC,IAAsDK,IAIhJ8vB,EAAmB9vB,EAE3B,CA2BIo1B,CAAkBz1B,EAAQ,MAAwB,SAAQF,IACnDy1B,EAAoBz1B,EAAQ,KAAME,GAAQ,MAAgC2zB,IAHtEzC,EAAQ,MAAgCyC,EAIvD,C,iEC9JW+B,EAAkB,MAUlBC,EAAiB,K,gDCjBjBC,GAAgC,E,QAAA,GAAgB,CACvDC,KAAM,EACNC,QAAS,EACTC,SAAU,EACVC,OAAQ,G,gDCLRx0B,EAAIy0B,EAmBJC,E,0IAVAC,EAAiB,cACjBC,EAAiB,cACjBC,EAAY,SACZC,EAAa,UACbC,EAAyB,sBACzBC,EAAyB,sBACzBC,EAAqB,SACrBC,EAAmB,KACnBC,EAAmB,KACnBC,EAAqB,KAErBC,EAAe,CAAC,EAChBC,EAAsB,CAAC,EAUvBC,IAAqBv1B,EAAK,CACtBw1B,WAAW,SAAYf,EAAK,CAAC,EACzBA,EAAG,MAAc,CAAEnI,GAAI,eAAgBQ,MAAO,MAC9C2H,EAAGjnB,KAAO,CAAE8e,GAAI,aAAcQ,MAAO,MACrC2H,EAAGgB,QAAU,KACbhB,EAAGiB,cAAgB,KACnBjB,EAAGkB,eAAiB,KACpBlB,EAAGmB,oBAAqB,EACxBnB,IACJoB,aAAc,KACdC,WAAY,OAEbd,GAA0B,KAC7Bh1B,GACJ,SAAS+1B,KACJrB,IAASA,GAAO,SAAQ,WAAc,OAAO,UAAe,GACjE,CAqBA,SAASsB,EAAcC,GACnB,OAAIA,GACOA,EAAUC,WAGzB,CACA,SAASC,EAAiBC,EAAcx1B,GACpC,SAAIA,GAAQw1B,IAAgB,SAAQA,EAAaV,kBACY,KAAlD,SAAWU,EAAaV,cAAe90B,EAGtD,CACA,SAASy1B,EAAiBD,EAAcx1B,GACpC,SAAIA,GAAQw1B,IAAgB,SAAQA,EAAaT,kBACU,KAAnD,SAAWS,EAAaT,eAAgB/0B,KAIzCu1B,EAAiBC,EAAcx1B,EAC1C,CACA,SAAS01B,EAAcC,EAAYC,GAC/B,IAAIC,EAAeD,EAAgB,MACnC,IAAI,SAAkBC,GAAe,CAEjC,IAAIC,OAAqB,GAEpB,SAAYH,EAAWxB,MACxB2B,GAAiBH,EAAWxB,KAG3B,SAAYwB,EAAWvB,MACxB0B,GAAiBH,EAAWvB,IAIhCyB,EAAeC,CACnB,CACA,OAAOD,CACX,CA6BO,SAASE,EAAgBJ,EAAY/3B,GACxC,IAAIg4B,EACAI,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EAGAC,EAAkB,GAEtB,SAASC,EAAqB5pB,GAC1B,IAAIxN,EACAiK,IAAUjK,EAAK,CAAC,GACb,MAAYwN,GAAc,IAC7BxN,EAAG80B,GAAc,gCACjB90B,GAKJ,OAJK,YAEDiK,EAAO,WAAa,KAEjBotB,EAAmB,KAAWptB,EACzC,CA6CA,SAASqtB,EAAqB12B,GAC1B,GAAIu2B,EAEA,IAAK,IAAIl1B,EAAIk1B,EAAgB,MAAoC,EAAGl1B,GAAK,EAAGA,IACpEk1B,EAAgBl1B,GAAGstB,IAAM3uB,GACzBu2B,EAAgB,MAAkCl1B,EAAG,EAIrE,CAsBAs0B,GAAa,OAAoBA,GAAcjB,EAAqB,KAAM92B,GAAQE,IAElFo4B,GAAgB,OAAeP,EAAY,SAAU/iB,GAEjDA,EAAQwe,MAAMxe,EAAQ9U,IAAK62B,GAE3BiB,EAAkBhjB,EAAQqa,IAAIra,EAAQ9U,IAAK,aAC3Ck4B,EAAQJ,EAAgB,OAAgC,IACxDK,EAAUL,EAAgB,MAEtBA,EAAgBZ,mBAGhBuB,EAAkB,KAEO,OAApBA,IAELA,EAAkB,IAGtB,IAAII,EAAaR,EAEjBA,GAA0D,IAA/CT,EAAcC,EAAYC,GACrCQ,EAAeR,EAAgBgB,WAAaC,EAC5CR,EAAeT,EAAgBkB,WAAaC,EAC5CT,EAAeV,EAAgBoB,WAAaD,GAEvCJ,GAAcR,GAAYI,GA9C3BU,EAAoBr5B,IAAW24B,KAE/B,SAAWA,EAAiB,SAAUW,GAC7BzB,EAAiBG,EAAiBsB,EAAYvI,KACzB,IAAlBuI,EAAYC,EAEZd,EAAaa,EAAYvI,EAAGuI,EAAY5W,GAEjB,IAAlB4W,EAAYC,GAEjBb,EAAaY,EAAYvI,EAAGuI,EAAY5W,GAGpD,GAEAiW,EAAkB,GAkC1B,EAAG34B,GACH,IAAIy3B,EAAY,CACZC,UAAW,WACP,IAAIT,GAAyD,IAA/Ca,EAAcC,EAAYC,IAA8BO,GAAYc,EAAoBr5B,GAGlGw5B,EAAa1C,EAAoBL,GAMrC,OALIQ,GAAWuC,GAAc/B,IAAc+B,IAGvCvC,EAAUO,EAAcgC,IAErBvC,CACX,EACAwC,WAAY,SAAU33B,GAIlBk2B,EAAgB,MAAsCl2B,GAGjD,SAAYi2B,EAAWvB,MACxBuB,EAAWvB,IAA2B10B,EAE9C,EACA6R,IAAK,SAAUvR,EAAMN,EAAO43B,EAAWC,EAAQ3qB,GAC3C,IAAItD,GAAS,EAEb,IADgBmsB,EAAiBG,EAAiB51B,GAClC,CACZ,IAAIw3B,EArIhB,SAA+B93B,EAAO43B,EAAWC,EAAQ3qB,GACrD,IAAIvD,EAAS,CAAC,EACV8hB,GAAW,SAAQzrB,GAAS,MAC5BwR,GAAM,SAAWia,EAAU,KAO/B,IANa,IAATja,IACAia,GAAW,UAAQ,SAAQzrB,EAAOwR,IAClC7H,EAASouB,GAAc,SAAa/3B,EAAOwR,EAAM,MAGrD,QAAS7H,EAAQ,KAAYkuB,GAAUtB,EAAS,MAAU,SACrD,SAAkBqB,GAAY,CAC/B,IAAII,GAAQ,UACZ,IAAI,SAAYruB,EAAO6qB,IAAc,CACjC,IAEIyD,GAFQ,WAEwB,IAAZL,EAExB,GAAIK,EAAW,EAAG,CACd,IAAIC,EAAS,IAAIC,KACjBD,EAAOE,QAAQH,IACf,QAAStuB,EAAQ6qB,EAAY6D,EAAYH,EAASF,EAAyB3D,EAAjBC,IAAoC+D,EAAYH,EAAQF,EAAQ3D,EAAiBC,IAAmB,KAAW,MAC7K,CACJ,CACK0D,IAED,QAASruB,EAAQ,UAAW,KAAYiuB,EAAW,KAAM,MAEjE,CACA,IAqQgCU,EArQ5BC,GAAW,UAYf,OAXIA,GAAkC,WAAtBA,EAASC,YACrB,QAAS7uB,EAAQ,SAAU,KAAM,KAAM,OAEd,OAArBkrB,IAiQwByD,IAhQqB,YAAkB,CAAC,GAAG,MAAnEzD,KAiQP,SAASyD,MAQV,QAAYA,EAAW,sBAAuB,QAAYA,EAAW,qBAUrE,QAAYA,EAAW,qCAAsC,QAAYA,EAAW,cAAe,QAAYA,EAAW,YAU1H,QAAYA,EAAW,qCAAsC,SAAYA,EAAW,8CAMpF,QAAYA,EAAW,cAAe,QAAYA,EAAW,cAK7D,QAAYA,EAAW,mBAAoB,QAAYA,EAAW,YAMlE,QAAYA,EAAW,kBAAmB,QAAYA,EAAW,mBA5SzDzD,IACA,QAASlrB,EAAQ,WAAY,OAAQ,KAAM,SAGnD,QAASA,EAAQ,KAAUuD,GAAQopB,EAAO,KAAM,OACzCS,EAAmBtL,EAAU9hB,EACxC,CA4F8B8uB,CAAsBz4B,EAAO43B,EAAWC,EAAQ3qB,GAC9DwoB,EAAcC,IACdgB,EAAar2B,EAAMw3B,GACnBluB,GAAS,GAEJitB,IAGLG,EAAqB12B,GAErBu2B,EAAgB,MAA8B,CAC1C5H,EAAG3uB,EACHm3B,EAAG,EACH7W,EAAGkX,IAEPluB,GAAS,EAEjB,CACA,OAAOA,CACX,EACAilB,IAAK,SAAUvuB,GACX,IAAIN,EAAQ,KAEZ,IADgB61B,EAAiBK,EAAiB51B,GAE9C,GAAIo1B,EAAcC,GACd31B,EAAQ02B,EAAap2B,QAEpB,GAAIu2B,EAEL,IAAK,IAAIl1B,EAAIk1B,EAAgB,MAAoC,EAAGl1B,GAAK,EAAGA,IAAK,CAC7E,IAAI61B,EAAcX,EAAgBl1B,GAClC,GAAI61B,EAAYvI,IAAM3uB,EAAM,CAExB,GAAsB,IAAlBk3B,EAAYC,EAA8B,CAG1C,IAAIK,EAAcN,EAAY5W,EAC1BpP,GAAM,SAAWsmB,EAAa,KAClC93B,GAAiB,IAATwR,GAAa,UAAQ,SAAQsmB,EAAatmB,KAAQ,SAAQsmB,EACtE,CAEA,KACJ,CACJ,CAGR,OAAO93B,CACX,EACA04B,IAAK,SAAUp4B,EAAM4M,GACjB,IAAItD,GAAS,EAiBb,OAhBI8rB,EAAcC,GAEd/rB,EAAS+rB,EAAUgD,MAAMr4B,EAAM4M,GAE1B2pB,IAGLG,EAAqB12B,GAErBu2B,EAAgB,MAA8B,CAC1C5H,EAAG3uB,EACHm3B,EAAG,EACH7W,EAAGkW,EAAqB5pB,KAE5BtD,GAAS,GAENA,CACX,EACA+uB,MAAO,SAAUr4B,EAAM4M,GACnB,IAAItD,GAAS,EAMb,OALI2tB,EAAoBr5B,KAEpB04B,EAAat2B,EAAMw2B,EAAqB5pB,IACxCtD,GAAS,GAENA,CACX,EACAgvB,OAAQ,SAAUrR,GACdiP,GAAiBA,EAAc/W,KAC/B+W,EAAgB,KAEhBK,EAAkB,IACtB,GAIJ,OADAlB,EAAUhB,GAAsBgB,EACzBA,CACX,CAIO,SAAS4B,EAAoBr5B,GAChC,GAAyB,OAArB02B,EAA2B,CAC3BA,GAAmB,GAClBR,GAAQqB,IACT,IACI,IAAIoD,EAAMzE,EAAKxT,GAAK,CAAC,EACrBgU,OAAsC1qB,IAAnB2uB,EAAItE,EAC3B,CACA,MAAOl2B,IACH,QAAeH,EAAQ,EAAkC,GAAiD,oCAAqC,QAAiBG,GAAI,CAAEy6B,WAAW,SAAQz6B,IAC7L,CACJ,CACA,OAAOu2B,CACX,CACA,SAASmD,EAActM,GACnB,IAAI9hB,EAAS,CAAC,EACd,GAAI8hB,GAAYA,EAAS,MAAmC,CACxD,IAAIsN,GAAQ,SAAQtN,GAAU,MAAgC,MAC9D,SAAWsN,EAAO,SAAUC,GAExB,GADAA,GAAU,SAAQA,GAAW,MAChB,CACT,IAAIxnB,GAAM,SAAWwnB,EAAS,MACjB,IAATxnB,EACA7H,EAAOqvB,GAAW,KAGlBrvB,GAAO,UAAQ,SAAQqvB,EAASxnB,MAAS,UAAQ,SAAawnB,EAASxnB,EAAM,GAErF,CACJ,EACJ,CACA,OAAO7H,CACX,CACA,SAAS0uB,EAAYY,EAASC,GAC1B,OAAI,SAAWD,EAAQC,IACZD,EAAQC,KAEZ,IACX,CACA,SAASnC,EAAmB/2B,EAAO2J,GAC/B,IAAImuB,EAAc93B,GAAS,KAI3B,OAHA,SAAc2J,EAAQ,SAAUrJ,EAAMmrB,GAClCqM,GAAe,KAAOx3B,IAAS,SAAkBmrB,GAA6B,KAAjB,IAAMA,EACvE,GACOqM,CACX,CACA,SAASX,EAAgB72B,GACrB,IAAIw3B,EAAc,KAElB,IADC1D,GAAQqB,IACLrB,EAAKxT,EAAG,CACR,IAAIuY,EAAY/E,EAAKxT,EAAE2T,IAAc,KACjCO,IAAuBqE,IACvBpE,EAAegD,EAAcoB,GAC7BrE,EAAqBqE,GAEzBrB,GAAc,SAAQ/C,EAAaz0B,IAAS,KAChD,CACA,OAAOw3B,CACX,CACA,SAAST,EAAgB/2B,EAAMw3B,IAC1B1D,GAAQqB,IACLrB,EAAKxT,IACLwT,EAAKxT,EAAE2T,GAAaj0B,EAAO,IAAMw3B,EAEzC,C,uBC1bInG,EAAgB,CAChByH,iBAAiB,GAErB,SAASC,EAAuBC,GAC5BA,EAAmBpK,EAAI,KACvB,IAAIqK,EAAYD,EAAmBtc,GACnCsc,EAAmBtc,GAAK,IACxB,SAAWuc,EAAW,SAAUvc,IAE5B,SAAKA,EAAGqS,GAAI,CAACrS,EAAGwc,KACpB,EACJ,CAGA,SAASC,EAAcC,EAAWp5B,EAAMg5B,EAAoBxnB,IACxD,SAAW4nB,EAAW,SAAUC,GACxBA,GAAYA,EAASr5B,KACjBg5B,GAEAA,EAAmBtc,GAAG,MAA8B,CAChDqS,GAAIvd,EACJ0nB,IAAKG,IAETL,EAAmBpK,EAAIoK,EAAmBpK,IAAK,SAAgBmK,EAAwB,EAAGC,KAI1F,SAAKxnB,EAAU,CAAC6nB,IAG5B,EACJ,CAIA,ICzCI,EDyCAC,EAAqC,WACrC,SAASA,EAAoB57B,GAEzB,IAAIo7B,EACA5C,EAFJ34B,KAAK67B,UAAY,GAGjB,IAAIG,EAAa,GACbC,EAAsB,CACtB5K,EAAG,KACHlS,GAAI,IAEJwU,GAAa,OAAoBxzB,EAAQ2zB,GAC7C6E,EAAgBhF,EAAW,MAAgC,SAAUte,GACjEkmB,IAAoBlmB,EAAQ9U,IAAIg7B,eACpC,IACA,OAAaQ,EAAqB/7B,KAAM,SAAUC,IAC9C,SAAUA,EAAO,YAAa,CAC1BiyB,EAAG,WAAc,OAAO8J,CAAY,IAExC/7B,EAAM,MAAoE,SAAU67B,GAChFE,EAAW,MAA8BF,EAC7C,EAKA77B,EAAM,MAAuE,SAAU67B,GAEnF,IADA,IAAIja,GAAQ,SAAWma,EAAYF,GAC5Bja,GAAS,GACZma,EAAW,MAAkCna,EAAO,GACpDA,GAAQ,SAAWma,EAAYF,EAEvC,EAKA77B,EAAM,MAA4C,SAAUwK,GACxDmxB,EAAcI,EAAY,KAAiBC,EAAqB,SAAUH,GACtEA,EAAS,MAA0CrxB,EACvD,EACJ,EAQAxK,EAAM,MAAsD,SAAUwK,EAAQoT,EAAQlN,GAClFirB,EAAcI,EAAY,KAAsBC,EAAqB,SAAUH,GAC3EA,EAAS,MAAoDrxB,EAAQoT,EAAQlN,EACjF,EACJ,EAMA1Q,EAAM,MAA2D,SAAUyQ,EAAYgZ,GACnFkS,EAAcI,EAAY,KAAyBtS,EAAUuS,EAAsB,KAAM,SAAUH,GAC/FA,EAAS,MAAyDprB,EAAYgZ,EAClF,EACJ,EACAzpB,EAAM,MAA0C,SAAUi8B,GAClDA,KAEIX,GAAoBW,EAAU,SAC9BN,EAAcI,EAAY,KAAgB,KAAM,SAAUF,GAClDI,EAAUxS,SACV,SAAgB,WAAc,OAAOoS,EAAS,MAAwCI,EAAY,EAAG,GAGrGJ,EAAS,MAAwCI,EAEzD,GAGZ,EACAj8B,EAAM,MAAuD,SAAUwK,GAC/DA,GAAUA,EAAO,OACjBmxB,EAAcI,EAAY,KAAmBC,EAAqB,SAAUH,GACxEA,EAAS,MAAqDrxB,EAClE,EAER,EACAxK,EAAM,MAAmD,SAAUgiB,GAC3DA,GAASA,EAAM,OACf2Z,EAAcI,EAAY,KAAkBC,EAAqB,SAAUH,GACvEA,EAAS,MAAiD7Z,EAC9D,EAER,EACAhiB,EAAM,MAAmD,SAAU8K,EAAK8S,GACpE,GAAI9S,EAAM,EAAG,CACT,IAAIoxB,EAAOte,GAAU,EACrB+d,EAAcI,EAAY,KAAkBC,EAAqB,SAAUH,GACvEA,EAAS,MAAiD/wB,EAAKoxB,EACnE,EACJ,CACJ,EACAl8B,EAAM,MAAoC,SAAUypB,GAChD,IASI0S,EATAC,EAAgB,WAChB1D,GAAiBA,EAAc/W,KAC/B+W,EAAgB,KAChBqD,EAAa,GAEbC,EAAoB5K,GAAK4K,EAAoB5K,EAAE,QAC/C4K,EAAoB5K,EAAI,KACxB4K,EAAoB9c,GAAK,EAC7B,EAWA,GATAyc,EAAcI,EAAY,SAAU,KAAM,SAAUF,GAChD,IAAIQ,EAAcR,EAAS,MAAkCpS,GACzD4S,IACKF,IACDA,EAAU,IAEdA,EAAQ,MAA8BE,GAE9C,GACIF,EACA,OAAO,QAAc,SAAUpP,GAC3B,OAAO,SAAgB,QAAiBoP,GAAU,WAC9CC,IACArP,GACJ,EACJ,GAGAqP,GAER,CACJ,EACJ,CAeA,OAFAN,EAAoBv6B,QAAQ,EAErBu6B,CACX,CArJwC,G,+BEMpCQ,GAA4C,SAAU38B,GAEtD,SAAS28B,IACL,IAIIC,EACAC,EALA38B,EAAQF,EAAOG,KAAKC,OAASA,KAoBjC,SAAS6f,IACL2c,EAAM,EACNC,EAAgB,EACpB,CACA,OAvBA38B,EAAM0E,WAAa,6BACnB1E,EAAMokB,SAAW,IAIjBrE,KACA,OAAa0c,EAA4Bz8B,EAAO,SAAUG,EAAOC,GAC7DD,EAAMy8B,wBAA0B,SAAUC,GACtC,OAnDhB,SAAyBF,EAAeG,EAAID,GACxC,IAAIE,EAAiB,CACjBD,GAAIA,EACJpL,GAAImL,GAaR,OAXA,SAAUF,EAAeI,GACX,CACVC,OAAQ,YACJ,SAAWL,EAAe,SAAUM,EAAappB,GAC7C,GAAIopB,EAAYH,KAAOC,EAAeD,GAElC,OADAH,EAAc,MAAkC9oB,EAAK,IAC7C,CAEhB,EACJ,EAGR,CAkCuBqpB,CAAgBP,EAAeD,IAAOG,EACjD,EACA18B,EAAM,MAAwD,SAAUW,EAAM+qB,IAnC1F,SAA0B8Q,EAAe77B,EAAMP,GAG3C,IAFA,IAAI48B,GAAgB,EAChBC,EAA6BT,EAAc,MACtC34B,EAAI,EAAGA,EAAIo5B,IAA8Bp5B,EAAG,CACjD,IAAI64B,EAAuBF,EAAc34B,GACzC,GAAI64B,EACA,IACI,IAA8E,IAA1EA,EAAqBnL,GAAG,MAAgC,KAAM,CAAC5wB,IAAkB,CACjFq8B,GAAgB,EAChB,KACJ,CACJ,CACA,MAAOz8B,IAGH,QAAeH,EAAQ,EAAkC,GAAyD,kCAAmC,QAAiBG,GAAI,CAAEy6B,WAAW,SAAQz6B,KAAM,EACzM,CAER,CACA,OAAQy8B,CACZ,EAgBoBE,CAAiBV,EAAe77B,EAAM+qB,EAAUA,EAAQ,QAAyC1rB,EAAM,UACvGA,EAAM,MAA6CW,EAAM+qB,EAEjE,EACA1rB,EAAM,MAA+C,WACjD4f,GACJ,CACJ,GAKO/f,CACX,CAOA,OAlCA,QAAUy8B,EAA4B38B,GAgCtC28B,EAA2B/6B,QAAQ,EAE5B+6B,CACX,CApC+C,C,QAoC7C,G,qBD1DEa,GAAqB,yCAErBC,GAAuB,4BAyBvBh+B,IAAgB,WAAe,EAAK,CAChCg4B,UAAW,CAAC,IAEb,MAAkB,CAAE7H,QAAQ,EAAME,KAAK,EAAM3M,EAAG,IACnD,EAAG,MAAgB,CAAEyM,QAAQ,EAAME,KAAK,EAAM3M,EAAG,IACjD,EAAG,MAAwB,CAAE2M,KAAK,EAAM3M,EAAG,CAAC,GAC5C,EAAG,MAAuB,KAC1B,EAAGua,oBAAsB,EACzB,EAAGC,sBAAwB,KAC3B,IAMJ,SAASC,GAAmBzd,EAAM0d,GAC9B,OAAO,IAAIC,EAAA,GAAYD,EAC3B,CAuCA,SAASE,GAAiBC,EAAWC,GACjC,IAAIC,GAAS,EAOb,OANA,SAAWD,EAAS,SAAUE,GAC1B,GAAIA,IAAWH,EAEX,OADAE,GAAS,GACD,CAEhB,GACOA,CACX,CACA,SAASE,GAAiB3oB,EAASxG,EAAQovB,EAAWC,GAE9CD,IACA,SAAcA,EAAW,SAAU9uB,EAAKhN,GAChC+7B,IACI,SAAc/7B,KAAU,SAAc0M,EAAOM,KAE7C6uB,GAAiB3oB,EAASxG,EAAOM,GAAMhN,EAAO+7B,GAGlDA,IAAS,SAAc/7B,KAAU,SAAc0M,EAAOM,IAEtD6uB,GAAiB3oB,EAASxG,EAAOM,GAAMhN,EAAO+7B,GAI9C7oB,EAAQrB,IAAInF,EAAQM,EAAKhN,EAEjC,EAER,CACA,SAASg8B,GAAatC,EAAWuC,GAC7B,IAAIC,EAAc,KACd1qB,GAAO,EAQX,OAPA,SAAWkoB,EAAW,SAAUC,EAAUzxB,GACtC,GAAIyxB,EAASvH,IAAM6J,EAGf,OAFAC,EAAcvC,EACdnoB,EAAMtJ,GACE,CAEhB,GACO,CAAEvG,EAAG6P,EAAK2qB,EAAGD,EACxB,CAwDA,IAAIx+B,GAAiC,WACjC,SAASA,IAEL,IAAI0+B,EACA/mB,EACAtB,EACAsoB,EACAhZ,EAGAiZ,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAnoB,EACAooB,EACAC,EACA5Z,EACA6Z,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAIAC,EACAC,EACAC,GACJ,OAAargC,EAAiBG,KAAM,SAAUC,GA+T1C,SAASkgC,IACLL,GAAe,GACX,SAAkBR,IAClBK,EAAgB,IAAavJ,UAC7B,QAAelgB,EAAS,EAAmC,IAAoD,yCAG/GypB,EAAgB,IAAatJ,OAEjC+J,GACJ,CACA,SAASA,IACD5oB,IACAvX,EAAMogC,eACNpgC,EAAMqgC,mBAEd,CACA,SAASC,EAAgBC,GA6BrB,OA5BMR,GAAuBA,EAAmB,OAAyCE,IACnEM,GAAgBtqB,GAAWA,EAAQuqB,MAAM,MAAoC,KAEtFR,IACDA,GAA8B,EAG9BS,GAAenC,EAAe,MAAgC,SAAUlpB,GACpE,IAAI+J,EAAW/J,EAAQ9U,IAAIg9B,sBACtBne,GAAcA,EAAW,IAC1BA,EAAW,KAEf,IAAIuhB,GAAY,EACZX,IAEAW,EAAYX,EAAmB,MAC/BA,EAAmB,UAGvBA,GAAqB,SAAcY,GAAoBxhB,IACpCyhB,QAEnBb,EAAmB,MAAsCW,CAC7D,KAEJX,EAAmB,OAAsC,GAG1DA,CACX,CAkLA,SAASc,KACL,IAAIC,EAAa,CAAC,EAClBtB,EAA0B,GAC1B,IAAIuB,EAAqB,SAAUnD,GAC3BA,IACA,SAAWA,EAAS,SAAUE,GAC1B,GAAIA,EAAO,OAA6CA,EAAO,OAAwCgD,EAAWhD,EAAOv5B,YAAa,CAClI,IAAIrD,EAAM48B,EAAO,MAA4C,IAAMA,EAAO,KAC1E0B,EAAwB,MAA8Bt+B,GACtD4/B,EAAWhD,EAAOv5B,YAAcu5B,CACpC,CACJ,EAER,EACAiD,EAAmBjC,GACfD,IACA,SAAWA,EAAgB,SAAUmC,GACjCD,EAAmBC,EACvB,GAEJD,EAAmBnC,EACvB,CACA,SAAShf,KACLrI,GAAiB,GAEjB+mB,GAAiB,OAAoB,CAAC,EAAGl/B,GAAeY,EAAM,QAE/CM,IAAI,MAAgE,GAEnF,SAAUN,EAAO,SAAU,CACvBiyB,EAAG,WAAc,OAAOqM,EAAeh+B,GAAK,EAC5C4xB,EAAG,SAAUhiB,GACTlQ,EAAMihC,UAAU/wB,GAAU,EAC9B,KAEJ,SAAUlQ,EAAO,yBAA0B,CACvCiyB,EAAG,WAIC,OAHKuN,GACDqB,KAEGrB,CACX,KAEJ,SAAUx/B,EAAO,sBAAuB,CACpCiyB,EAAG,WAOC,OANKwN,IACID,GACDqB,KAEJpB,EAAuBD,EAAwB0B,KAAK,MAEjDzB,GAAwB,IACnC,KAEJ,SAAUz/B,EAAO,SAAU,CACvBiyB,EAAG,WAKC,OAJKhc,IACDA,EAAU,IAAIkrB,EAAA,GAAiB7C,EAAeh+B,KAC9Cg+B,EAAe,MAAoCroB,GAEhDA,CACX,EACAic,EAAG,SAAUkP,GACT9C,EAAe,MAAoC8C,EAC/CnrB,IAAYmrB,KACZ,OAAgBnrB,GAAS,GACzBA,EAAUmrB,EAElB,IAEJphC,EAAM,MAAoC,IAAImhC,EAAA,GAAiB7C,EAAeh+B,KAC9Ei/B,EAAc,GACd,IAAI8B,EAAgBrhC,EAAME,OAAO,OAA4C,GAC7EmhC,EAAct2B,OAAO,EAAGs2B,EAAc,QACtC,SAAUA,EAAe9B,GACzBR,EAA8B,IAAIzC,GAClCiC,EAAc,IACd,OAAgBhZ,GAAsB,GACtCA,EAAuB,KACvBiZ,EAAe,KAEfC,EAAkB,MAClB,OAAgBC,GAAgB,GAChCA,EAAiB,KACjBC,EAAe,KACfC,EAAoB,GACpBC,EAAiB,KACjBC,EAAY,KACZnoB,GAAe,EACfqoB,EAAyB,KACzB5Z,GAAgB,OAAsB,cAAc,GACpD6Z,GAAkB,UAClBG,EAAY,KACZC,EAAsB,KACtBH,GAAiB,UACjBI,EAAgB,GAChBG,EAAuB,KACvBD,EAA0B,KAC1BS,GAA8B,EAC9BF,EAAqB,KACrBC,GAA8B,EAC9BN,EAAgB,EAChBC,EAAY,KACZC,EAAqB,KACrBC,GAAe,EACfC,EAAa,IAMjB,CACA,SAASwB,KACL,IAAIC,GAAS,QAA8BC,KAAmBlD,EAAeh+B,IAAKN,GAElF,OADAuhC,EAAO,MAA2CjB,GAC3CiB,CACX,CAEA,SAASE,GAAiBC,GAEtB,IAAIC,EAz0BpB,SAA6BvhC,EAAQwhC,EAAiBC,GAElD,IAAIC,EAAiB,GACjBd,EAAW,GAGXe,EAAgB,CAAC,EA2BrB,OAzBA,SAAWF,EAAe,SAAU7gC,KAE5B,SAAkBA,KAAQ,SAAkBA,EAAI,UAChD,QAAWm8B,IAEf,IAAI6E,EAAchhC,EAAI,MAClBuD,EAAavD,EAAI,MACjBA,GAAOghC,KACF,SAAkBD,EAAcC,IAKjCD,EAAcC,GAAez9B,GAJ7B,QAAenE,EAAQ,sCAAwC4hC,EAAc,MAAQD,EAAcC,GAAe,KAAOz9B,KAQ5Hy9B,GAAeA,EAAcJ,EAE9BE,EAAe,MAA8B9gC,GAG7CggC,EAAS,MAA8BhgC,EAE/C,GACO,CACH8e,KAAMgiB,EACNd,SAAUA,EAElB,CAoyBoCiB,CAAoBjiC,EAAM,MAAmC,IAA2B4+B,GAC5GD,EAAe,KACfc,EAAuB,KACvBD,EAA0B,KAE1BV,GAAaD,GAAkB,IAAI,IAAM,GAEzCC,GAAY,UAAY,SAAUA,EAAW6C,EAAc,QAE3D,IAAIE,GAAgB,UAAU,SAAYF,EAAc,OAA+B7C,GAEvFS,GAAc,SAAUsC,GAIxB,IAAIR,EAAgBrhC,EAAME,OAAO,OAA4C,GAC7EmhC,EAAct2B,OAAO,EAAGs2B,EAAc,QACtC,SAAUA,EAAe9B,GACzB,IAAI2C,EAAUZ,KAEVxC,GAAaA,EAAU,MAAoC,IAC3D,SAAkBoD,EAAQ,MAAyCpD,GAAY+C,IAGnF,SAAkBK,EAASL,GACvBH,GACAS,GAAUT,EAElB,CACA,SAASU,GAAWC,GAChB,IAAIC,EAAS,KACT3E,EAAY,KACZ4E,EAAe,GAgDnB,OA/CA,SAAWhD,EAAa,SAAUv+B,GAC9B,GAAIA,EAAI,QAA8CqhC,GAAoBrhC,IAAQ+9B,EAE9E,OADApB,EAAY38B,GACJ,EAERA,EAAIwhC,YACJD,EAAa,MAA8BvhC,EAEnD,IACK28B,GAAa4E,EAAa,MAAoC,IAC/D,SAAWA,EAAc,SAAUE,GAE/B,KADA9E,EAAY8E,EAAKD,WAAWH,IAExB,OAAQ,CAEhB,GAEA1E,IACA2E,EAAS,CACLxE,OAAQH,EACR9D,WAAY,SAAUxC,IAClB,SAAgBsG,GAAW,OAAiBtG,CAChD,EACAS,UAAW,WACP,IAAI4K,GAAc,SAAgB/E,GAClC,OAAQ+E,EAAY,QAA0CA,EAAY,KAC9E,EACA7F,OAAQ,SAAUpT,EAASkZ,QACF,IAAjBlZ,IAAsBA,GAAU,GACpC,IAAImZ,EAAkB,CAACjF,GAKvBkF,GAAeD,EAJG,CACdhlB,OAAQ,EACR6L,QAASA,GAEgC,SAAUqZ,GAC/CA,GAEArB,GAAiB,CACb7jB,OAAQ,GACRklB,QAASF,IAGjBD,GAAYA,EAASG,EACzB,EACJ,IAGDR,CACX,CACA,SAASd,KACL,IAAK7C,EAAc,CAEf,IAAIx+B,GAAco/B,GAAe,IAAI3vB,SAEwB,KAAzD,SAAWzP,EAAY4+B,IACvB5+B,EAAW,MAA8B4+B,GAE7CJ,GAAe,SAA0B,SAAYx+B,GAAam+B,EAAeh+B,IAAKN,EAC1F,CACA,OAAO2+B,CACX,CACA,SAASkE,GAAe/B,EAAYzU,EAAa0W,GAC7C,GAAIjC,GAAcA,EAAW,MAAoC,EAAG,CAChE,IAAIkC,GAAc,QAA0BlC,EAAYxC,EAAeh+B,IAAKN,GACxEosB,GAAY,QAAoC4W,EAAahjC,GACjEosB,EAAU,MAA2C,WACjD,IAAI0W,GAAU,EAEVG,EAAsB,IAC1B,SAAWrE,EAAmB,SAAUd,EAAQpqB,GACvCgqB,GAAiBI,EAAQgD,GAI1BgC,GAAU,EAHVG,EAAoB,MAA8BnF,EAK1D,GACAc,EAAoBqE,EACpBxD,EAAuB,KACvBD,EAA0B,KAE1B,IAAI0D,EAAmB,GACnBrE,KACA,SAAWA,EAAgB,SAAU2B,EAAO9sB,GACxC,IAAIyvB,EAAW,IACf,SAAW3C,EAAO,SAAU4C,GACnB1F,GAAiB0F,EAAStC,GAI3BgC,GAAU,EAHVK,EAAS,MAA8BC,EAK/C,GACAF,EAAiB,MAA8BC,EACnD,GACAtE,EAAiBqE,GAErBH,GAAkBA,EAAeD,GACjCxC,GACJ,GACAlU,EAAU,MAA6CC,EAC3D,MAEI0W,GAAe,EAEvB,CACA,SAASpC,KACL,GAAI1qB,GAAWA,EAAQuqB,MAAO,CAC1B,IAAIA,EAAQvqB,EAAQuqB,MAAM5wB,MAAM,GAChCqG,EAAQuqB,MAAM,MAAoC,GAClD,SAAWA,EAAO,SAAU6C,GACxB,IAAI1iC,EAAO,CACP6B,KAAMw8B,GAAkD,sBAAwBqE,EAAW,MAC3F/4B,KAAM+0B,EACNhtB,MAAM,QAAY,IAAIgoB,MACtBhnB,SAAU,KAAoBiwB,SAC9BniC,SAAU,CAAEV,QAAS4iC,EAAW,QAEpCrjC,EAAMU,MAAMC,EAChB,EACJ,CACJ,CACA,SAAS4iC,GAAe9Z,EAAS+Z,EAAU/yB,EAAYgzB,GAEnD,IAAItH,EAAU,EACVuH,GAAgB,EAChBC,EAAU,KAEd,SAASC,IACLzH,IACIuH,GAA6B,IAAZvH,IACjBwH,GAAWA,EAAQ,QACnBA,EAAU,KACVH,GAAYA,EAASE,GACrBF,EAAW,KAEnB,CAgCA,OAzCAC,EAAYA,GAAa,IAUrB3E,GAAaA,EAAU,MAAoC,GAC5CwC,KAAgB,MAAyCxC,GAC/D+E,QAAQ,SAAU/F,GACvB,GAAIA,EAAOnU,MAAO,CACdwS,IACA,IAAI2H,GAAY,EAEXhG,EAAOnU,MAAMF,EAAS,WACvBqa,GAAY,EACZF,GACJ,EAAGnzB,IACMqzB,IAIGra,GAAsB,MAAXka,EACXA,GAAU,SAAgB,WACtBA,EAAU,KACVC,GACJ,EAAGH,GAGHG,IAIhB,CACJ,GAEJF,GAAgB,EAChBE,KACO,CACX,CAmCA,SAASzB,GAAUT,GACf,IAAIqC,GAAY,QAAoCvC,KAAmBxhC,GACvE+jC,EAAU,MAA2CzD,GAChDtgC,EAAMgkC,cAA6D,IAA9ChkC,EAAMgkC,YAAYD,EAAWrC,IACnDqC,EAAU,MAA6CrC,EAE/D,CACA,SAASuC,GAAiBxjC,GACtB,IAAIL,EAASJ,EAAM,MACfI,IAEA,QAAeA,EAAQ,EAAkC,GAA8CK,GACvG6/B,MAGA,QAAW7/B,EAEnB,CACA,SAASyjC,GAAoBtjC,GACzB,IAAI2pB,EAAUvqB,EAAM,QAChBuqB,GACAA,EAAQ,MAAoD,CAAC3pB,GAAgB,EAErF,CACA,SAAS6/B,GAAe0D,GACpBjF,EAAelN,IAAImS,EACvB,CA75BAvkB,KAEA5f,EAAyB,kBAAI,WACzB,MAAO,CAACu/B,EAAahB,EACzB,EACAv+B,EAAM,MAAmD,WAAc,OAAOuX,CAAgB,EAE9FvX,EAAMokC,aAAe,WAAc,OAAO1E,CAAe,EAGzD1/B,EAAMqkC,kBAAoB,WACtB3E,EAAgB,CACpB,EAEA1/B,EAAM,MAA4C,SAAUE,EAAQC,EAAYC,EAAQC,GAm1BxF,IAEQikC,EAp1BA3tB,IACA,QAAWymB,IAGXp9B,EAAM,UACN,QAAW,6CAIfE,GAFAo+B,GAAiB,OAAoBp+B,EAAQd,GAAegB,GAAUJ,EAAM,OAAmC,IAEvFM,IAExBmgC,GAAenC,EAAe,MAAgC,SAAUlpB,GACpE,IAAImvB,EAAUnvB,EAAQ9U,IACtBs/B,EAAqB2E,EAAQC,mBAxP1B,IA8aX,SAAqC3kB,GAKjC,IAAI4kB,EAAO5kB,EAAU6kB,mBACjBrlC,EAAcwgB,EAAUxgB,YAE5B,GAAsB,IAAlBqgC,EAAiD,CACjD,IAAI,SAAkB+E,GAAO,CACzBpF,EAAsB,KAEtBK,EAAgB,IAAavJ,SAC7B,IAAIwO,EAAM,qCASV,YARKptB,IAKD,QAAetB,EAAS,EAAmC,IAAyD0uB,GACpHxE,MAJA,QAAWwE,GAOnB,CACA,IAAIC,EAAW,IACX,SAAcH,IACdG,EAAS,MAA8BH,GACvCpF,EAAsB,MAItBA,EAAsBoF,GAEtB,SAAcplC,IACdulC,EAAS,MAA8BvlC,GACvCsgC,EAAY,MAIZA,EAAYtgC,EAGZulC,EAAS,MASrB,SAA8B/kB,EAAW+kB,GAErC/E,GAAe,EACfH,EAAgB,EAChB,IAAImF,GAAc,QAAqBhlB,EAAUilB,aAAejlB,EAAUilB,YAperE,IAqeDC,GAAc,QAA4BH,GAC1C9E,GAEAA,EAAW,QAEfA,GAAa,SAAgB,WAIzBA,EAAa,KACRD,GACDK,GAER,EAAG2E,IACH,QAAgBE,EAAa,SAAUxrB,GACnC,IACI,GAAIsmB,EAGA,OAEJ,IAAKtmB,EAASyrB,SAAU,CACpB,IAAIn5B,EAAS0N,EAAS,MACtB,GAAI1N,GAAUA,EAAO,MAAmC,CAEpD,IAAIo5B,EAAUp5B,EAAO,GAGrB,GAFAwzB,EAAsB4F,GAAWA,EAAQ,MAErCp5B,EAAO,MAAoC,EAAG,CAC9C,IAAIq5B,EAAcr5B,EAAO,GACzB8zB,EAAYuF,GAAeA,EAAY,KAC3C,CACJ,CACI7F,IAEAxf,EAAU6kB,mBAAqBrF,EAC/Bxf,EAAUxgB,YAAcsgC,EAEhC,CAIAO,GACJ,CACA,MAAO3/B,GACEs/B,GACDK,GAER,CACJ,EACJ,CA/DYiF,CAAqBtlB,EAAW+kB,GAIhC1E,GAER,CACJ,CAvOQkF,CAA4Bb,GAI5B,IAAIc,EAASjwB,EAAQqa,IAAIra,EAAQ9U,IAAK,OACtC,SAAc+kC,EAAQ,SAAUn2B,GAC5BkG,EAAQqa,IAAI4V,EAAQn2B,EACxB,EACJ,IAGAiwB,EA/GhB,SAA4BpL,EAAeuR,EAAiBjlC,EAAqBklC,GAc7E,OAZAD,EAAgBtT,IAAI+B,EAAc,MAAgC,SAAU3e,GACxE,IAAIowB,EAAgBpwB,EAAQ9U,IAAIklC,eACV,IAAlBA,GAA0BD,IAE1BllC,EAAoB,MAAqEklC,GACzFA,EAAgB,MAEhBllC,IAAwBklC,IAAmC,IAAlBC,IACzCD,GAAgB,OAAiBnwB,EAAQ9U,KACzCD,EAAoB,MAAkEklC,GAE9F,IACOA,CACX,CAgGiCE,CAAmBnH,EAAgBY,GAFpD3Z,EAAuBllB,IAEqEL,EAAM,QAAmDm/B,GA6zBrJsB,GAAenC,EAAe,MAAgC,SAAUlpB,GAEpE,GADoBA,EAAQ9U,IAAIolC,cACb,CACf,IAAIC,EAAgBvwB,EAAQ9U,IAAI,MAG3BgkC,IAAmBqB,GAAmBrB,IAClCqB,IACDA,EAAgBpI,KAGpB,QAAYnoB,EAAQ9U,IAAK,KAAqBqlC,GAC9CrB,EAAiBqB,EAEjBlH,EAAkB,MAGjBD,GAAiBC,KAAmB,SAAWkH,KAEhDlH,EAAkBkH,EAAc3lC,EAAOA,EAAM,SAErD,MAGIy+B,EAAkB,KAElB6F,EAAiB,IAEzB,IAv1BAtkC,EAAM,MAAoCI,EAC1C,IAAIihC,EAAgBnhC,EAAO,MAS3B,IAPA0+B,EAAoB,IACF,MAA8BnU,MAAMmU,GAAmB,SAAc,QAAc,GAAIz+B,GAAY,GAAQkhC,GAAe,IAC5IxC,EAAiB3+B,EAAO,MACxBuhC,GAAiB,MACZ3C,GAA6D,IAAhDA,EAAU,QACxB,QAAW,MAAQ,KAAe,cAElCD,GAAkBA,EAAe,MAAoC,EAAG,CACxE,IAAI+G,EAAgB5lC,EAAM,MAAyC,wBAC9D4lC,GAAkBA,EAAc9H,SACjC,QAAe7nB,EAAS,EAAmC,GAAmD,sBAEtH,EA3IhB,SAAqC/V,EAAQ07B,EAAWx7B,IACpD,SAAWw7B,EAAW,SAAUC,GAC5B,IAAIgK,GAAY,OAAe3lC,EAAQ27B,EAASvH,EAAGl0B,UAC5Cy7B,EAASvH,EAEhBuH,EAASla,GAAK,WACVkkB,EAAUlkB,IACd,CACJ,EACJ,CAmIgBmkB,CAA4B5lC,EAAQo/B,EAAerpB,GACnDqpB,EAAgB,KAChB/nB,GAAiB,EACbmoB,IAAkB,IAAatJ,QAC/B+J,GAER,EACAngC,EAAM+lC,YAAc,WAChB,IAAIC,EAAW,GAMf,OALIlH,IACA,SAAWA,EAAW,SAAUsE,GAC5B4C,EAAS,MAA8B5C,EAC3C,IAEG,SAAU4C,EACrB,EACAhmC,EAAMU,MAAQ,SAAUE,IACpB,QAAOZ,EAAM,QAA8C,WAAc,MAAO,uBAAyB,EAAG,WAClF,OAAlBY,IACAsjC,GAAoBtjC,IAEpB,QAAW,4BAGVA,EAAc,QAAiC,SAAkBA,EAAc,SAChFsjC,GAAoBtjC,IACpB,QAAW,4BAGfA,EAAc0J,KAAO1J,EAAc0J,MAAQ+0B,EAE3Cz+B,EAAcyR,KAAOzR,EAAcyR,OAAQ,QAAY,IAAIgoB,MAE3Dz5B,EAAcM,IAAMN,EAAcM,KAAO,OACpCyV,GAAgB3W,EAAM,SAAsD0/B,IAAkB,IAAatJ,OAE5GkL,KAAgB,MAA6C1gC,GAExD8+B,IAAkB,IAAavJ,UAEhCoI,EAAY,OAAqCqB,GAEjDrB,EAAY,MAA8B39B,EAGtD,EAAG,WAAc,MAAO,CAAGD,KAAMC,EAAkB,GAAKA,EAAkB,KAC9E,EACAZ,EAAM,MAAiEshC,GACvEthC,EAAM,MAAkD,WAMpD,OALKulB,IACDA,EAAuB,IAAIuW,EAAoBwC,EAAeh+B,KAE9DN,EAA4B,qBAAIulB,GAE7BA,CACX,EAOAvlB,EAAM,MAAoE,SAAU67B,GAChF77B,EAAM4qB,eAAe,MAAkEiR,EAC3F,EAKA77B,EAAM,MAAuE,SAAU67B,GAC/EtW,GACAA,EAAqB,MAAqEsW,EAElG,EACA77B,EAAMggB,aAAe,WAIjB,OAHK0e,IACDA,EAAiBnG,EAAgB+F,EAAeh+B,IAAKN,EAAM,QAExD0+B,CACX,EACA1+B,EAAMimC,aAAe,SAAUpO,GACvB6G,IAAmB7G,KACnB,OAAgB6G,GAAgB,GAChCA,EAAiB7G,EAEzB,EACA73B,EAAM,MAA6C,WAC/C,OAAOw+B,GAAgBC,IAAmB,SAC9C,EACAz+B,EAAMkmC,WAAa,SAAUC,GACzB3H,EAAe2H,CACnB,EAoCAnmC,EAAMomC,SAAW,WACb,OAAO7H,EAAY,KACvB,EACAv+B,EAAMogC,aAAe,WACjB,GAAI7oB,GAAkBgnB,EAAY,MAAoC,EAAG,CACrE,IAAI8H,EAAa9H,EACjBA,EAAc,GACQ,IAAlBmB,GACA,SAAW2G,EAAY,SAAU/hC,GAC7BA,EAAMgG,KAAOhG,EAAMgG,MAAQ+0B,EAC3BiC,KAAgB,MAA6Ch9B,EACjE,IAIA,QAAe2R,EAAS,EAAkC,GAA0D,iCAE5H,CACJ,EACAjW,EAAMqgC,iBAAmB,SAAU/+B,GAI/B,OAHA09B,EAAyB19B,GAAa,KACtC2+B,GAA8B,EAC9BF,GAAsBA,EAAmB,QAClCO,GAAgB,EAC3B,EA4JAtgC,EAAM,MAAoE,WACtEigC,GAA8B,EAC9BF,GAAsBA,EAAmB,QACzCY,IACJ,GAEA,QAAe3gC,EAAO,WAAc,OAAO++B,CAA6B,EAAG,CAAC,4BAC5E/+B,EAAM,MAAoC,SAAUypB,EAAS6c,EAAgB7C,QACpD,IAAjBha,IAAsBA,GAAU,GAC/BlS,IAED,QArlBO,0BAwlBPZ,IAEA,QAAWymB,IAEf,IAKItxB,EALAugB,EAAc,CACdzO,OAAQ,GACR6L,QAASA,EACT8c,eAAe,GAGf9c,IAAY6c,IACZx6B,GAAS,QAAc,SAAUihB,GAE7BuZ,EAAiBvZ,CACrB,IAEJ,IAAIyZ,GAAmB,QAAoChF,KAAmBxhC,GAc9E,SAASymC,EAAUF,GACfla,EAAYka,cAAgBA,EAC5B5vB,GAAe,EAEfsoB,EAAgByH,IAAIF,EAAkBna,GAEtCrsB,EAAM,QAENwmC,EAAiB,MAA6Cna,EAClE,CAKA,OA3BAma,EAAiB,MAA2C,WAMxDtH,EAAewH,IAAI1mC,EAAM,QAEzB,OAAY,CAAC0+B,EAAgBnZ,EAAsBtP,GAAUwT,EAAS,WAClE7J,KACA0mB,GAAkBA,EAAeja,EACrC,EACJ,EAAGrsB,GAWH2gC,KACK4C,GAAe9Z,EAASgd,EAAW,EAAqChD,IACzEgD,GAAU,GAEP36B,CACX,EACA9L,EAAM,MAA2CoiC,GACjDpiC,EAAM2mC,UAAY,SAAU7I,EAAQ8I,EAAiBnd,EAASod,GAC1D,IAAK/I,EAGD,OAFA+I,GAASA,GAAM,QACf5C,GAAiB9G,IAGrB,IAAI2J,EAAiB1E,GAAWtE,EAAO,OACvC,GAAIgJ,IAAmBF,EAGnB,OAFAC,GAASA,GAAM,QACf5C,GAAiB,WAAanG,EAAO,MAA4C,wBAGrF,IAAI4D,EAAc,CACd9jB,OAAQ,IAEZ,SAASmpB,EAAWjE,GAChBlE,EAAkB,MAA8Bd,GAChD4D,EAAYsF,MAAQ,CAAClJ,GAErB2D,GAAiBC,GACjBmF,GAASA,GAAM,EACnB,CACA,GAAIC,EAAgB,CAChB,IAAIG,EAAmB,CAACH,EAAehJ,QAKvC+E,GAAeoE,EAJG,CACdrpB,OAAQ,EACR6L,UAAWA,GAE+B,SAAUqZ,GAC/CA,GAKDpB,EAAYoB,QAAUmE,EACtBvF,EAAY9jB,QAAU,GACtBmpB,KALAF,GAASA,GAAM,EAOvB,EACJ,MAEIE,GAER,EACA/mC,EAAMihC,UAAY,SAAUiG,EAAWC,GAEnC,IAAIzF,EACJ,QAF2B,IAAvByF,IAA4BA,GAAgB,GAE5CnnC,EAAM,QAAoD,CAC1D0hC,EAAc,CACV9jB,OAAQ,EACRtd,IAAKg+B,EAAeh+B,IACpB8mC,QAAQ,SAAW,CAAC,EAAG9I,EAAeh+B,KACtC4mC,WAAW,SAAW,CAAC,EAAGA,GAC1BjJ,MAAOkJ,GAEXD,EAAYxF,EAAYwF,UACxB,IAAI5mC,EAAMg+B,EAAeh+B,IAIzB4mC,EAAU,MAA2C5mC,EAAI,MACzD4mC,EAAU,MAAuC5mC,EAAI,KACzD,CAGAg+B,EAAepK,OAAO,SAAU9e,GAE5B,IAAIyK,EAAYzK,EAAQ9U,IACxBy9B,GAAiB3oB,EAASyK,EAAWqnB,EAAWC,GAC3CA,IAED,SAActnB,EAAW,SAAU3Q,IAC1B,SAAUg4B,EAAWh4B,IAEtBkG,EAAQrB,IAAI8L,EAAW3Q,EAAK,KAEpC,GAGJkG,EAAQwe,MAAM/T,EAAWzgB,GAC7B,GAAG,GAEHk/B,EAAe3K,SACX+N,GACAS,GAAUT,EAElB,EACA1hC,EAAM6qB,aAAe,WACjB,OAAOzF,CACX,EACAplB,EAAM2pB,MAAQ4Z,GACdvjC,EAAMqnC,YAAc,SAAUC,GAI1B,OAHKlI,IACDA,GAAY,YAETA,CACX,EACAp/B,EAAMunC,YAAc,SAAUC,GAC1BpI,EAAYoI,GAAY,IAC5B,EACAxnC,EAAMynC,cAAgBhH,IAEtB,QAAgBzgC,EAAO,cAAe,WAAc,OAAOi/B,CAAiB,EAAG,OAC/Ej/B,EAAM0nC,YAAc,SAAUpW,GAC1B,IAAIqW,EApnBY/L,EAAWuC,EACnCC,EA0nBQ,OANK7mB,EAIDowB,GAAa,OAAerJ,EAAeh+B,IAAKgxB,EAAStxB,EAAM,SAxnB3Eo+B,EAAcF,GADUtC,EAsnBwB0D,EAtnBbnB,EAsnB4B7M,GArnBb+M,KAElDD,EAAc,CACV9J,EAAG6J,EACHxc,GAAI,WACA,IAAIimB,EAAM1J,GAAatC,EAAWuC,IACnB,IAAXyJ,EAAI/jC,GACJ+3B,EAAU,MAAkCgM,EAAI/jC,EAAG,EAE3D,GAEJ+3B,EAAU,MAA8BwC,IA0mB5BuJ,EAxmBTvJ,GA8BX,SAA2BuJ,GACvB,OAAO,SAAU,CACbhmB,GAAI,WACAgmB,EAAWhmB,IACf,GACD,SAAU,CAAEmB,EAAG,WAAc,MAAO,uBAAyBlgB,KAAKC,UAAU8kC,GAAc,GAAK,GACtG,CAykBuBE,CAAkBF,EAC7B,EACA3nC,EAAM8nC,UAAY,WACd,OAAQ,YAAmBxJ,EAAeh+B,IAAIynC,aAAgB,GAAK,CACvE,CAiYJ,EACJ,CA0CA,OAFAnoC,EAAgB2B,QAAQ,EAEjB3B,CACX,CAr/BoC,E,qFEnM7B,SAASooC,EAAgBp5B,EAAQ6a,GACpC,GAAI7a,GAAUA,EAAO,MACjB,OAAOA,EAAO,MAAkC6a,EAExD,CAUO,SAASwe,EAAYC,EAASze,EAAS0e,GAC1C,IAAIr8B,EAcJ,OAbKq8B,IACDr8B,GAAS,QAAc,SAAUs8B,GAC7BD,EAAOC,CACX,IAEAF,IAAW,SAAUA,GAAW,GAChC,QAAgBF,EAAgBE,EAAQ,GAAIze,GAAU,WAClDwe,GAAY,SAASC,EAAS,GAAIze,EAAS0e,EAC/C,GAGAA,IAEGr8B,CACX,C,gDCxCIlK,E,kGAWAymC,EAAe,YACfxU,IAAiBjyB,EAAK,CAAC,GACpB,MAAwB,CAAEpC,MAAO,KAAsBsjB,EAAG,CAAC,GAC9DlhB,GAMA4rB,EAAqC,WACrC,SAASA,IACL,IAEI8a,EACAC,EACAC,EACAC,EACAvJ,EANAl/B,EAAQD,KA6GZ,SAAS4rB,EAAW+c,QACQ,IAApBA,IAAyBA,EAAa,MAC1C,IAAIhd,EAAUgd,EACd,IAAKhd,EAAS,CACV,IAAIwW,EAAUqG,IAAY,QAA8B,KAAM,CAAC,EAAGvoC,EAAM,OAIpE0rB,EAFA8c,GAAeA,EAAYH,GAEjBnG,EAAQ,MAAyC,KAAMsG,EAAYH,IAGnEnG,EAAQ,MAAyC,KAAMsG,EAEzE,CACA,OAAO9c,CACX,CACA,SAASid,EAAazoC,EAAQ4f,EAAM8oB,IAEhC,OAAoB1oC,EAAQ2zB,GAAe,QAAc/T,KACpD8oB,GAAe9oB,IAEhB8oB,EAAc9oB,EAAK,QAAiE,SAExF,IAAI+oB,EAAaL,EACbA,GAAeA,EAAYH,KAE3BQ,EAAaL,EAAYH,MAG7BroC,EAAM,MAA+B8f,EACrCyoB,GAAW,QAA8BK,EAAa1oC,EAAQ4f,EAAM+oB,EACxE,CACA,SAASjpB,IACL0oB,GAAiB,EACjBtoC,EAAM,MAA+B,KACrCuoC,EAAW,KACXC,EAAc,KACdtJ,GAAiB,SACjBuJ,GAA0B,QAC9B,CA7IA7oB,KACA,OAAa4N,EAAqBxtB,EAAO,SAAUA,GAC/CA,EAAM,MAA4C,SAAUE,EAAQ4f,EAAM3f,EAAYyoC,GAClFD,EAAazoC,EAAQ4f,EAAM8oB,GAC3BN,GAAiB,CACrB,EACAtoC,EAAM,MAAwC,SAAUosB,EAAWC,GAG/D,IAAIvM,EAAO9f,EAAM,MACjB,GAAK8f,KAASsM,GAAatM,IAASsM,EAAU,SAA9C,CAIA,IAAItgB,EACAg9B,GAAa,EACbC,EAAe3c,IAAa,QAAoC,KAAMtM,EAAM0oB,GAAeA,EAAYH,GAAgBG,EAAYH,KAAkBG,GACrJQ,EAAiB3c,GAAe,CAChCzO,OAAQ,EACR6L,SAAS,GAoBb,OAPKzpB,EAAM,QAAsJ,IAAtGA,EAAM,MAA6C+oC,EAAcC,EAAgBC,GAKxIn9B,GAAS,EAJTm9B,IAMGn9B,CA1BP,CAQA,SAASm9B,IACAH,IACDA,GAAa,EACbL,EAAwB/B,IAAIqC,EAAc1c,GAC1C6S,EAAewH,IAAIqC,EAAa,UACjB,IAAXj9B,GACAi9B,EAAa,MAA6CC,GAE9DppB,IAER,CASJ,EACA5f,EAAM,MAAoC,SAAU+jC,EAAWrC,GAG3D,IAAI5hB,EAAO9f,EAAM,MACjB,GAAK8f,KAASikB,GAAajkB,IAASikB,EAAU,SAA9C,CAIA,IAAIj4B,EACAo9B,GAAa,EACbC,EAAepF,IAAa,QAAoC,KAAMjkB,EAAM0oB,GAAeA,EAAYH,GAAgBG,EAAYH,KAAkBG,GACrJY,EAAiB1H,GAAe,CAChC9jB,OAAQ,GAcZ,OANK5d,EAAMmiC,YAAgF,IAAnEniC,EAAMmiC,UAAUgH,EAAcC,EAAgBC,GAIlEv9B,GAAS,EAHTu9B,IAKGv9B,CAnBP,CAOA,SAASu9B,IACAH,IACDA,GAAa,EACbP,EAAaQ,EAAaG,SAAUH,EAAarpB,OAAQqpB,EAAa,SAE9E,CAQJ,GACA,QAAgBnpC,EAAO,eAAgB,WAAc,OAAOyoC,CAAyB,EAAG,QACxF,QAAgBzoC,EAAO,WAAY,WAAc,OAAOk/B,CAAgB,EAAG,QAC3E,SAAUl/B,EAAO,eAAgB,CAAEiyB,EAAG,WAAc,OAAOiN,CAAgB,GAC/E,GAEAl/B,EAAM,MAAuC,SAAU0rB,GACnD,OAAOC,EAAWD,GAAS,OAC/B,EACA1rB,EAAM,MAAmD,WACrD,OAAOsoC,CACX,EACAtoC,EAAMurB,eAAiB,SAAUge,GAC7BjB,EAAiBiB,CACrB,EAKAvpC,EAAM,MAAoD,SAAUwpC,GAChEhB,EAAcgB,CAClB,EACAxpC,EAAM,MAA+C,SAAUypC,EAAK/d,GAC5DA,EAEAA,EAAQ,MAA6C+d,GAEhDjB,IAAe,SAAWA,EAAY,QAG3CA,EAAY,MAAsDiB,EAAK,KAE/E,EACAzpC,EAAM2rB,WAAaA,CAyCvB,CAUA,OAFA6B,EAAoBjsB,QAAQ,EAErBisB,CACX,CAlKwC,E,oDCrBjC,IAAIkc,EAA4B,IAC5BC,EAAuB,yD,wGCG9BC,EAAa,WACbC,EAAY,WACZC,EAAQ,UACRC,EAAQ,UAERC,GAAa,EACbC,EAAQH,EACRI,EAAQH,EAWZ,SAASI,IAGL,IACI,IAAIC,EAAiB,YAAX,YAbAC,GAcC59B,KAAKC,SAAWk9B,EAAcQ,GAAOA,GAbpC,IAEZC,KAAe,GAEnBJ,EAASH,EAAQO,EAAaR,EAC9BK,EAASH,EAAQM,EAAaR,EAC9BG,GAAa,CAQb,CACA,MAAOzpC,GAEP,CAlBJ,IAAkB8pC,CAmBlB,CAgBO,SAASC,EAASC,GACrB,IAAIroC,EAAQ,EACRmyB,GAAI,YAAe,UAuBvB,OAtBIA,GAAKA,EAAEmW,kBAEPtoC,EAAQmyB,EAAEmW,gBAAgB,IAAIC,YAAY,IAAI,GAAKZ,GAEzC,IAAV3nC,IAAe,YAEV8nC,GAEDG,IAIJjoC,EA8BD,WAGH,IAAIA,IAFJgoC,EAAS,OAAiB,MAARA,IAAmBA,GAAS,IAAOL,IAE7B,KAAe,OADvCI,EAAS,MAAiB,MAARA,IAAmBA,GAAS,IAAOJ,MACD,EAAKA,EAKzD,OAFI3nC,KAAW,CAGnB,CAvCgBwoC,GAAgBb,GAEd,IAAV3nC,IAEAA,GAAQ,SAAW0nC,EAAan9B,KAAKC,SAAY,IAEhD69B,IAEDroC,KAAW,GAERA,CACX,CCtEA,IAAIgiB,EAAU,SACVymB,EAAe,IDuGZ,SAAeC,QACK,IAAnBA,IAAwBA,EAAY,IAMxC,IALA,IAEIC,EAASP,MAAe,EACxBQ,EAAQ,EACRh/B,EAAS,KACNA,EAAO,MAAoC8+B,GAC9CE,IACAh/B,GAPc,mEAOQi/B,OAAgB,GAATF,GAC7BA,KAAY,EACE,IAAVC,IAGAD,GAAYP,KAAc,EAAK,WAAwB,EAATO,KAAoB,EAClEC,EAAQ,GAGhB,OAAOh/B,CACX,CC1HyBk/B,CAAM,GAC3BC,EAAW,EAOf,SAASC,EAAet8B,GACpB,OAA2B,IAApBA,EAAOu8B,UAAsC,IAApBv8B,EAAOu8B,YAAqBv8B,EAAOu8B,QACvE,CAmBO,SAASC,EAAsB5oC,EAAM6oC,GAExC,YAD4B,IAAxBA,IAA6BA,GAAiB,IAC3C,QAAgB7oC,EAAQyoC,KAAeI,EAAiB,IAAMnnB,EAAU,MAAaymB,EAChG,CACO,SAASW,EAAkB9oC,GAC9B,IAAI+Q,EAAO,CACPopB,GAAIyO,EAAsB,YAAc5oC,GAAQ,MAAa,IAAM0hB,GACnEqnB,OAAQ,SAAU38B,GACd,OAAOs8B,EAAet8B,EAC1B,EACAmiB,IAAK,SAAUniB,EAAQpM,EAAMgsB,EAAUgd,GACnC,IAAIC,EAAW78B,EAAO2E,EAAKopB,IAC3B,OAAK8O,EAQEA,GAAS,QAAgBjpC,KAPxBgpC,IAEAC,EAjCpB,SAAmBl4B,EAAM3E,GACrB,IAAI68B,EAAW78B,EAAO2E,EAAKopB,IAC3B,IAAK8O,EAAU,CACXA,EAAW,CAAC,EACZ,IACQP,EAAet8B,KACf,SAAUA,EAAQ2E,EAAKopB,GAAI,CACvBp8B,GAAG,EACHuiB,EAAG2oB,GAGf,CACA,MAAOlrC,GAEP,CACJ,CACA,OAAOkrC,CACX,CAgB+BC,CAAUn4B,EAAM3E,GAC3B68B,GAAS,QAAgBjpC,IAASgsB,GAE/BA,EAGf,EACAmd,KAAM,SAAU/8B,EAAQpM,GACpB,GAAIoM,GAAUA,EAAOpM,GACjB,WACWoM,EAAOpM,EAClB,CACA,MAAOjC,GAEP,CAER,GAEJ,OAAOgT,CACX,C,wDC/DI4rB,E,6BAFAyM,EAAgB,CAAC,KAAiB,KAAsB,KAAyB,MACjFC,EAAe,KAEnB,SAASC,EAAmBtpC,EAAMtC,GAC9B,OAAO,WACH,IAAIgU,EAAOnQ,UACPgoC,EAASC,EAAY9rC,GACzB,GAAI6rC,EAAQ,CACR,IAAIlQ,EAAWkQ,EAAOlQ,SAClBA,GAAYA,EAASr5B,IACrBq5B,EAASr5B,GAAM,MAAgCq5B,EAAU3nB,EAEjE,CACJ,CACJ,CASO,SAAS83B,EAAY9rC,GACxB,IAPI0O,EAOAq9B,EAAKJ,EAIT,OAHKI,IAA+B,IAAzB/rC,EAAOslC,gBACdyG,EAAKJ,KATLj9B,GAAS,SAAQ,gBAEjBi9B,EAAej9B,EAA4B,qBAExCi9B,IAOAI,EAAKA,EAAiB,aAAI,IACrC,CACO,SAASC,EAAiBhsC,GAC7B,IAAKi/B,EAAgB,CACjBA,EAAiB,CAAC,EAClB,IAAK,IAAI/0B,EAAK,EAAGA,EAAKwhC,EAAc,MAAmCxhC,IACnE+0B,EAAeyM,EAAcxhC,IAAO0hC,EAAmBF,EAAcxhC,GAAKlK,EAElF,CACA,OAAOi/B,CACX,C,qFCxCIv9B,E,qEAQAuqC,EAAsB,gBAatBtY,EAAgB,CAChBwJ,oBAAqB,EACrB+O,sBAAuB,EACvBC,gBAAiB,GACjBC,aAAa,GAEbC,IAAa3qC,EAAK,CAAC,GAChB,GAAqC,KACxCA,EAAG,GAAqC,iBACxCA,EAAG,GAAoCuqC,EACvCvqC,EAAG,GAAkC,iBACrCA,GACJ,SAAS4qC,EAAwBC,GAC7B,OAAIA,EACO,IAAOA,EAAK,MAAoC,MAAO,MAAa,IAExE,IACX,CACA,SAASC,EAActR,EAAM36B,GACzB,IAAIksC,GAAa,UACjB,GAAMA,EAAY,CACd,IAAIC,EAAU,MACVD,EAAWvR,KACXwR,EAAUxR,IAEV,SAAWuR,EAAWC,KACtBD,EAAWC,GAASnsC,EAE5B,CACJ,CACA,IAAIosC,EAAqC,WACrC,SAASA,EAAoBC,EAAOnI,EAAKoI,EAAWC,QACzB,IAAnBD,IAAwBA,GAAY,GACxC,IAAI/sC,EAAQD,KACZC,EAAM,MAA2C8sC,EACjD9sC,EAAM,OACD+sC,EAzCgB,OAJG,mBA8ChBD,EACR,IAAIG,EAAW,MACX,WACAA,GAAW,UAAUpqC,UAAUmqC,IAEnC,IAAIE,GAAkBvI,EAAM,YAAc6H,EAAwB7H,GAAO,OACpEqI,EAAa,UAAYR,EAAwBS,GAAY,MAClEjtC,EAAM,OAAuCktC,CACjD,CAEA,OADAL,EAAoBvJ,SAAW,cACxBuJ,CACX,CAlBwC,GAoBjC,SAASM,EAAcrtB,EAAM5f,GAChC,OAAQ4f,GAAQ,CAAC,GAAG,OAAqC,IAAIqhB,EAAiBjhC,EAClF,CACA,IAAIihC,EAAkC,WAClC,SAASA,EAAiBjhC,GACtBH,KAAKwE,WAAa,mBAIlBxE,KAAKygC,MAAQ,GAIb,IAKI4M,EACAC,EACAC,EACAC,EACAC,EATAC,EAAgB,EAIhBC,EAAiB,CAAC,GAMtB,OAAavM,EAAkBphC,KAAM,SAAUC,GA4D3C,SAAS2tC,EAAoBC,EAAUntC,GACnC,KA6COgtC,GAAiBH,GA7CxB,CAIA,IAAIjK,GAAa,EACbwK,EA5IU,QA4I6BptC,EAAQ,MAQnD,GANIitC,EAAeG,GACfxK,GAAa,EAGbqK,EAAeG,IAAc,EAE7BxK,IAEIuK,GAAYP,IACZrtC,EAAMwgC,MAAM,MAA8B//B,GAC1CgtC,IACAK,EAA2B,IAAbF,EAAiD,QAAU,OAASntC,IAGlFgtC,IAAkBH,GAA0B,CAC5C,IAAIS,EAAuB,oEACvBC,EAAkB,IAAInB,EAAoB,GAAwDkB,GAAsB,GAC5H/tC,EAAMwgC,MAAM,MAA8BwN,GACzB,IAAbJ,EACA5tC,EAAMiuC,eAAeF,GAGrB/tC,EAAM,MAAkD+tC,EAEhE,CA7BJ,CA+BJ,CAcA,SAASD,EAAatrC,EAAM+Q,GACxB,IAAIw4B,GAAS,OAAY7rC,GAAU,CAAC,GAChC6rC,GAAUA,EAAO,OACjBA,EAAO,MAAqCvpC,EAAM+Q,EAE1D,CAhHAi6B,EA8FA,SAAgCttC,GAE5B,OAAO,QAAe,OAAoBA,EAAQ2zB,EAAe7zB,GAAOM,IAAK,SAAU8U,GACnF,IAAIlV,EAASkV,EAAQ9U,IACrB8sC,EAAuBltC,EAAO,MAC9BmtC,EAAyBntC,EAAOksC,sBAChCkB,EAA2BptC,EAAOmsC,gBAClCkB,EAAertC,EAAOosC,WAC1B,EACJ,CAvGiB4B,CAAuBhuC,GAAU,CAAC,GACnDF,EAAMmuC,oBAAsB,WAAc,OAAOf,CAAsB,EAMvEptC,EAAM,MAAmD,SAAU4tC,EAAUd,EAAOnI,EAAKqI,EAAYD,QAC1E,IAAnBA,IAAwBA,GAAY,GACxC,IAAItsC,EAAU,IAAIosC,EAAoBC,EAAOnI,EAAKoI,EAAWC,GAC7D,GAAIO,EACA,MAAM,SAAQ9sC,GAId,IAAImsC,EAAUL,EAAUqB,IAAazB,EACrC,IAAK,SAAY1rC,EAAQ,OAkBrBqtC,EAAa,SAAwB,IAAbF,EAAiD,WAAa,WAAYntC,OAlBvC,CAC3D,GAAIssC,EAAW,CAEX,IAAIc,GAAcptC,EAAQ,OACrBitC,EAAeG,IAAeT,GAAwBQ,IACvD5tC,EAAM4sC,GAASnsC,EAAQ,OACvBitC,EAAeG,IAAc,EAErC,MAGQT,GAAwBQ,GACxB5tC,EAAM4sC,GAASnsC,EAAQ,OAG/BktC,EAAoBC,EAAUntC,EAClC,CAKR,EACAT,EAAMouC,eAAiB,SAAU3tC,GAC7BisC,EAAc,QAASjsC,GACvBqtC,EAAa,UAAWrtC,EAC5B,EACAT,EAAM,MAAoD,SAAUS,GAChEisC,EAAc,OAAQjsC,GACtBqtC,EAAa,UAAWrtC,EAC5B,EACAT,EAAMiuC,eAAiB,SAAUxtC,GAC7BisC,EAAc,QAASjsC,GACvBqtC,EAAa,QAASrtC,EAC1B,EACAT,EAAMquC,0BAA4B,WAC9BZ,EAAgB,EAChBC,EAAiB,CAAC,CACtB,EACA1tC,EAAMsuC,mBAAqBX,EAC3B3tC,EAAM,MAAoC,SAAUypB,GAChD+jB,GAAkBA,EAAe7rB,KACjC6rB,EAAiB,IACrB,CAuDJ,EACJ,CAaA,OAFArM,EAAiB5/B,QAAQ,EAElB4/B,CACX,CArJqC,GAuJrC,SAASoN,EAAWnuC,GAChB,OAAQA,GAAU,IAAI+gC,CAC1B,CAUO,SAASqN,EAAepuC,EAAQwtC,EAAUd,EAAOnI,EAAKqI,EAAYD,QAC9C,IAAnBA,IAAwBA,GAAY,GACxCwB,EAAWnuC,GAAQ,MAAiDwtC,EAAUd,EAAOnI,EAAKqI,EAAYD,EAC1G,CAMO,SAAS0B,EAAeruC,EAAQK,GACnC8tC,EAAWnuC,GAAQ,MAAkDK,EACzE,C,sNC1OIiuC,EAAU,OAIVC,EAAU,OACVC,EAAa,WACbC,EAAoB,iBACpBC,EAAa,KACbC,EAAqB,KAErBC,EAAqB,KACrBC,EAAoB,KACxB,SAASC,EAAaC,EAAU1sC,GAC5B,IAAI2sC,GAAY,EAChB,GAAID,EAAU,CACV,IAEI,KADAC,EAAY3sC,KAAY0sC,GACR,CACZ,IAAIE,EAAQF,EAAS,MACjBE,IACAD,EAAY3sC,KAAY4sC,EAEhC,CACJ,CACA,MAAO9uC,GAEP,CACA,IAAK6uC,EACD,IACI,IAAIE,EAAM,IAAIH,EACdC,IAAa,SAAYE,EAAI7sC,GACjC,CACA,MAAOlC,GAEP,CAER,CACA,OAAO6uC,CACX,CAaO,SAASG,EAAYC,GAOxB,cAAW/U,WAAa,MAAiBA,SAC9BA,UAEJ,SA/DO,WAgElB,CAIO,SAASgV,IACZ,cAAWC,UAAY,KACZA,SAEJ,SAvEM,UAwEjB,CAQO,SAASC,IACZ,OAAOC,eAAgBhtC,OAAS,MAAiBA,MAA8B,QAArB,SAAQ8rC,GACtE,CAMO,SAASmB,IACZ,OAAIF,IACO/sC,OAAQ,SAAQ8rC,GAEpB,IACX,CAMO,SAASoB,IACZ,OAAO,SAlGK,SAmGhB,CAMO,SAASC,IACZ,OAAO,SAzGO,WA0GlB,CAIO,SAASC,IAEZ,IAAIC,GAAM,WACV,SAAIA,IAAOA,EAAIC,UAhHE,gBAiHND,EAAIC,OAGnB,CAIO,SAASC,IACZ,IAAIF,GAAM,WACV,GAAIA,IAAQA,EAAI,QAA6ClB,GAAqC,OAAfD,GAAsB,CAGrG,IAAItU,IADJuU,EAAqBkB,EAAI,QACc,MAAW,QAClDnB,GAAc,QAAYtU,EAAWmU,KAAY,QAAYnU,EAAWoU,EAC5E,CACA,OAAOE,CACX,CAIO,SAASsB,EAAaC,GAEzB,QAD0B,IAAtBA,IAA2BA,EAAe,OACzCA,EAAc,CACf,IAAIC,GAAc,YAAkB,CAAC,EACrCD,EAAeC,GAAeA,EAAY9V,WAAa,MAAW,QAAkD,IACxH,CACA,IAAI+V,GAAMF,GAAgB,MAAW,QAErC,IAAI,QAAYE,EAAI5B,GAAU,CAC1B,IAAI5T,GAAM,YAAiB,CAAC,EAC5B,OAAO,SAAQ/uB,SAASukC,EAAG,MAAgC5B,GAAS,IAAM5T,EAAmB,cAAK,EACtG,CACK,IAAI,QAAYwV,EAAI3B,GAAa,CAClC,IAAI4B,EAAaxkC,SAASukC,EAAG,MAAgC3B,GAAY,IACzE,GAAI4B,EACA,OAAOA,EAAa,CAE5B,CACA,OAAO,IACX,CAeO,SAASC,EAAmBC,GAI/B,OAH0B,OAAtBzB,IAA4C,IAAdyB,IAC9BzB,GAAoB,YAAkBW,SAAQ,WAAel1B,aAE1Du0B,CACX,CAMO,SAAS0B,EAAiBC,GAC7B,IAAIC,GAAc,EAClB,IACIA,KAAgB,SAAQ,SACxB,IAAI72B,GAAU,SAAQ,WAClB62B,GAAeD,GAAiB52B,IAChC62B,EAAc3B,EAAal1B,EAAS,aAE5C,CACA,MAAOzZ,GAEP,CACA,OAAOswC,CACX,CACO,SAASC,IAOZ,OAN2B,OAAvB9B,IACAA,SAA6B+B,iBAAmB,OACtBC,MACtBhC,EAAqBA,IAAuBE,GAAa,SAAQL,GAAoB,oBAGtFG,CACX,CAKO,SAASgC,IACZ,IAAIH,GAAc,EAClB,IAEIA,KADqB,SAAQhC,EAEjC,CACA,MAAOtuC,GAEP,CACA,OAAOswC,CACX,CA2KO,SAASI,EAAeC,EAAOhxC,GAClC,IAAKgxC,KAAU,SAASA,KAA+D,IAArDA,EAAM,MAAqC,KACzE,OAAOA,EAGX,GAD0BhxC,IAAgC,IAAtBA,EAAOixC,WAEvC,OAAOD,EAEX,IAAIE,GAA6C,KAA5B,SAAWF,EAAO,KACnCG,GAA6C,KAA5B,SAAWH,EAAO,KAEvC,IAAKE,IAAmBC,EACpB,OAAOH,EAEX,IACI,IAAIplC,EAASolC,EAOb,OANIE,IACAtlC,EAAwBolC,EA1GrBI,QAAQ,oEAAqE,2BA4GhFD,IACAvlC,EAtGZ,SAA+BwJ,EAAKpV,GAChC,IAAIqxC,EACAC,GAAoB,SAAWl8B,EAAK,KACxC,IAA2B,IAAvBk8B,EACA,OAAOl8B,EAGPi8B,EADArxC,GAAUA,EAAOuxC,kBACC,KAAyB7gB,OAAO1wB,EAAOuxC,mBAGvC,KAEtB,IAAIC,GAAU,SAAap8B,EAAK,EAAGk8B,EAAoB,GACnDG,GAAc,SAAar8B,EAAKk8B,EAAoB,GACpDI,EAAW,KACXC,GAAY,SAAWF,EAAa,MACrB,IAAfE,IACAD,GAAW,SAAaD,EAAaE,GACrCF,GAAc,SAAaA,EAAa,EAAGE,IAG/C,IADA,IAAIC,GAA6B,EACxBjuC,EAAI,EAAGA,EAAI0tC,EAAgB,MAAmC1tC,IAAK,CACxE,IAAIkuC,EAAaR,EAAgB1tC,GAAK,IACtC,IAA6C,KAAzC,SAAW8tC,EAAaI,GAAoB,CAC5CD,GAA6B,EAC7B,KACJ,CACJ,CACA,IAAKA,EACD,OAAOx8B,EAEX,IAAI08B,EAAc,GACdC,GAAmB,EACvB,GAAIN,GAAeA,EAAY,MAC3B,KAAIO,EAAQP,EAAY,MAAgC,KACxD,IAAS9tC,EAAI,EAAGA,EAAIquC,EAAM,MAAmCruC,IAAK,CAC9D,IAAIsuC,EAAOD,EAAMruC,GACjB,GAAKsuC,EAAL,CAGA,IAAIC,GAAc,SAAWD,EAAM,KACnC,IAAqB,IAAjBC,EAEAJ,EAAY,MAA8BG,OAEzC,CACD,IAAIE,EAAYF,EAAK,MAAwC,EAAGC,GAEhE,GADiBD,EAAK,MAAwCC,EAAc,KACzD,KACfJ,EAAY,MAA8BG,OAEzC,CAED,IADA,IAAIG,GAAe,EACVC,EAAI,EAAGA,EAAIhB,EAAgB,MAAmCgB,IACnE,GAAIF,IAAcd,EAAgBgB,GAAI,CAClCD,GAAe,EACfL,GAAmB,EACnB,KACJ,CAEAK,EACAN,EAAY,MAA8BK,EAAY,IAAM,MAG5DL,EAAY,MAA8BG,EAElD,CACJ,CA5BA,CA6BJ,CAlC4D,CAqChE,OAAKF,EAGEP,EAAUM,EAAY9Q,KAAK,KAAO0Q,EAF9Bt8B,CAGf,CA2BqBk9B,CAAsB1mC,EAAQ5L,IAEpC4L,CACX,CACA,MAAOvL,GACH,OAAO2wC,CACX,CACJ,C,+JCzaIuB,EAAiB,cACjBC,EAAoB,mBACpBC,EAAiB,cACjBC,EAAyB,sBACzBC,EAAY,SACZC,EAAyB,mBACzBC,EAAc,WACdC,EAAc,WACdC,EAAY,SACZC,EAAkB,eAClBC,GAAuB,OAAsB,iBAC7CC,GAAuB,OAAsB,iBAC7CC,EAAiB,WACjBC,EAAyB,SACzBC,EAAQ,EACRC,GAAc,OAAkB,UAChCC,EAAiB,sBACrB,SAASC,EAAoBlxC,GACzB,OAAIA,GAAQA,EAAK,MACNA,EAAK,MAAoC,+BAAgC,MAE7EA,CACX,CACA,SAASmxC,EAAiBryC,EAAWupB,GACjC,GAAIA,EAAc,CACd,IAAI+oB,EAAiB,MACjB,SAAQ/oB,IACR+oB,EAAiB,MACjB,SAAW/oB,EAAc,SAAUroB,IAC/BA,EAAOkxC,EAAoBlxC,MAEP,MAAZA,EAAK,KACLA,EAAO,IAAMA,GAEjBoxC,GAAkBpxC,EAE1B,IAGAoxC,EAAiBF,EAAoB7oB,GAErC+oB,IAC0B,MAAtBA,EAAe,KACfA,EAAiB,IAAMA,GAG3BtyC,GAAaA,GAAa,MAAasyC,EAE/C,CACA,IAAIC,EAAeJ,EAAeK,KAAKxyC,GAAa,OAAc,GAClE,MAAO,CACH2B,KAAM4wC,EAAY,GAClB5H,IAAM4H,EAAY,IAAM,MAAWvC,QAAQ+B,EAAgB,KAAK/B,QAAQgC,EAAwB,MAAW,MAAgC,KAAKS,OAAQ7S,KAAK,KAErK,CA4BA,SAAS8S,EAAqBplC,EAAQ0b,EAASkhB,QACnB,IAApBA,IAAyBA,GAAa,GAC1C,IAAIyI,EAAST,EAAYziB,IAAIniB,EAAQikC,EAAW,CAAC,EAAGrH,GAChD0I,EAAmBD,EAAO3pB,GAI9B,OAHK4pB,IACDA,EAAmBD,EAAO3pB,GAAW,IAElC4pB,CACX,CACA,SAASC,EAAU7wC,EAAKgnB,EAAS8pB,EAAYC,GACrC/wC,GAAOgnB,GAAWA,EAAQ,QACtBhnB,EAAIsvC,GACJtvC,EAAIsvC,GAAwBtoB,EAAQ,MAA+B8pB,EAAYC,GAE1E/wC,EAAIqvC,IACTrvC,EAAIqvC,GAlGE,KAkG4BroB,EAAQ,MAA+B8pB,GAGrF,CAiBA,SAASE,EAAc1lC,EAAQpE,EAAQ8f,EAASiqB,GAE5C,IADA,IAAI7gC,EAAMlJ,EAAO,MACVkJ,KAAO,CACV,IAAI3J,EAAWS,EAAOkJ,GAClB3J,IACKugB,EAAQ2hB,IAAM3hB,EAAQ2hB,KAAOliC,EAAS,MAAqCkiC,IACvEsI,IAAWA,EAAQxqC,KACpBoqC,EAAUvlC,EAAQ7E,EAAS,MAAsCA,EAASunB,QAASvnB,EAASyqC,SAE5FhqC,EAAO,MAAkCkJ,EAAK,IAI9D,CACJ,CAgBO,SAAS+gC,EAAkBC,EAAcC,GAe5C,OAbIA,EAQiBhB,EAAiB,MAP9B,SAAQgB,GACQ,CAACD,GAAc9jB,OAAO+jB,GAGtB,CAACD,EAAcC,IAGsB,GAAE,MAAgC,KAG3ED,CAGxB,CAYO,SAASE,EAAQhmC,EAAQtN,EAAW8yC,EAAYvpB,EAAcwpB,QACzC,IAApBA,IAAyBA,GAAa,GAC1C,IAAIvoC,GAAS,EACb,GAAI8C,EACA,IACI,IAAI0b,EAAUqpB,EAAiBryC,EAAWupB,GAE1C,GADA/e,EAhFZ,SAAmBxI,EAAKgnB,EAAS8pB,EAAYC,GACzC,IAAIvoC,GAAS,EAab,OAZIxI,GAAOgnB,GAAWA,EAAQ,OAAiC8pB,IACvD9wC,EAAIovC,IAEJpvC,EAAIovC,GAAmBpoB,EAAQ,MAA+B8pB,EAAYC,GAC1EvoC,GAAS,GAEJxI,EAAImvC,KAETnvC,EAAImvC,GAhHE,KAgH4BnoB,EAAQ,MAA+B8pB,GACzEtoC,GAAS,IAGVA,CACX,CAiEqB+oC,CAAUjmC,EAAQ0b,EAAS8pB,EAAYC,GAC5CvoC,GAAU0nC,EAAYjI,OAAO38B,GAAS,CACtC,IAAIkmC,EAAkB,CAClBC,KAAMxB,IACNjpB,QAASA,EACTgH,QAAS8iB,EACTI,QAASH,GAEbL,EAAqBplC,EAAQ0b,EAAQrnB,MAAM,MAA8B6xC,EAC7E,CACJ,CACA,MAAOv0C,GAEP,CAEJ,OAAOuL,CACX,CAaO,SAASkpC,EAASpmC,EAAQtN,EAAW8yC,EAAYvpB,EAAcwpB,GAElE,QADwB,IAApBA,IAAyBA,GAAa,GACtCzlC,EACA,IACI,IAAIqmC,EAAYtB,EAAiBryC,EAAWupB,GACxCqqB,GAAU,GAnF1B,SAA2BtmC,EAAQ0b,EAASiqB,GACxC,GAAIjqB,EAAQ,MACRgqB,EAAc1lC,EAAQolC,EAAqBplC,EAAQ0b,EAAQ,OAAgCA,EAASiqB,OAEnG,CACD,IAAIY,EAAa3B,EAAYziB,IAAIniB,EAAQikC,EAAW,CAAC,IACrD,SAAcsC,EAAY,SAAUC,EAAS5qC,GACzC8pC,EAAc1lC,EAAQpE,EAAQ8f,EAASiqB,EAC3C,GAE8D,KAA1D,SAAQY,GAAY,OACpB3B,EAAY7H,KAAK/8B,EAAQikC,EAEjC,CACJ,CAsEYwC,CAAkBzmC,EAAQqmC,EAAW,SAAUK,GAC3C,UAAKL,EAAUhJ,IAAOmI,IAAekB,EAAShkB,UAAY8iB,IACtDc,GAAU,EACH,GAGf,GACKA,GAEDf,EAAUvlC,EAAQqmC,EAAWb,EAAYC,EAEjD,CACA,MAAO9zC,GAEP,CAER,CA2EA,SAASg1C,EAAmB/qC,EAAQqxB,EAAU2Z,EAAe3qB,GACzD,IAAImc,GAAQ,EAUZ,OATInL,GAAYrxB,GAAUA,EAAO,MAAoC,IACjE,SAAWA,EAAQ,SAAUhI,GACrBA,IACKgzC,IAAsD,KAArC,SAAWA,EAAehzC,KAC5CwkC,EA/Cb,SAAyB1lC,EAAW0S,EAAU6W,GACjD,IAAI/e,GAAS,EACTwoB,GAAI,WACJA,IACAxoB,EAAS8oC,EAAQtgB,EAAGhzB,EAAW0S,EAAU6W,GACzC/e,EAAS8oC,EAAQtgB,EAAQ,KAAGhzB,EAAW0S,EAAU6W,IAAiB/e,GAEtE,IAAIivB,GAAM,WAIV,OAHIA,IACAjvB,EAAS8oC,EAAQ7Z,EAAKz5B,EAAW0S,EAAU6W,IAAiB/e,GAEzDA,CACX,CAmC4B2pC,CAAgBjzC,EAAMq5B,EAAUhR,IAAiBmc,GAGrE,GAEGA,CACX,CA0BO,SAAS0O,EAAqBlrC,EAAQqxB,EAAUhR,GAC/CrgB,IAAU,SAAQA,KAClB,SAAWA,EAAQ,SAAUhI,GACrBA,GA5DT,SAA4BlB,EAAW0S,EAAU6W,GACpD,IAAIyJ,GAAI,WACJA,IACA0gB,EAAS1gB,EAAGhzB,EAAW0S,EAAU6W,GACjCmqB,EAAS1gB,EAAQ,KAAGhzB,EAAW0S,EAAU6W,IAE7C,IAAIkQ,GAAM,WACNA,GACAia,EAASja,EAAKz5B,EAAW0S,EAAU6W,EAE3C,CAmDgB8qB,CAAmBnzC,EAAMq5B,EAAUhR,EAE3C,EAER,CAYO,SAAS+qB,EAA2B/Z,EAAU2Z,EAAe3qB,GAGhE,OAxCG,SAA2BrgB,EAAQqxB,EAAU2Z,EAAe3qB,GAC/D,IAAImc,GAAQ,EAQZ,OAPInL,GAAYrxB,IAAU,SAAQA,MAC9Bw8B,EAAQuO,EAAmB/qC,EAAQqxB,EAAU2Z,EAAe3qB,KAC9C2qB,GAAiBA,EAAc,MAAoC,IAE7ExO,EAAQuO,EAAmB/qC,EAAQqxB,EAAU,KAAMhR,IAGpDmc,CACX,CA8BW6O,CAAkB,CAAC3C,EAAiBD,EAAWF,GAAclX,EAAU2Z,EAAe3qB,EACjG,CAQO,SAASirB,EAA8Bja,EAAUhR,GACpD6qB,EAAqB,CAACxC,EAAiBD,EAAWF,GAAclX,EAAUhR,EAC9E,CAaO,SAASkrB,EAAyBla,EAAU2Z,EAAe3qB,GAQ9D,IAAImrB,EAAgBvB,EAAkBtB,EAAsBtoB,GACxDorB,EAAkBV,EAAmB,CAACxC,GAAclX,EAAU2Z,EAAeQ,GAQjF,OAPKR,IAAwE,KAAvD,SAAWA,EAAe1C,KAC5CmD,EAAkBV,EAAmB,CAACzC,GAV1C,SAA+BtuC,GAC3B,IAAIu2B,GAAM,WACNc,GAAYd,GAA+B,WAAxBA,EAAImb,iBACvBra,EAASr3B,EAEjB,EAK0FgxC,EAAeQ,IAAkBC,IAEtHA,GAAmBT,IAEpBS,EAAkBF,EAAyBla,EAAU,KAAMhR,IAExDorB,CACX,CAQO,SAASE,EAA4Bta,EAAUhR,GAElD,IAAImrB,EAAgBvB,EAAkBtB,EAAsBtoB,GAC5D6qB,EAAqB,CAAC3C,GAAclX,EAAUma,GAC9CN,EAAqB,CAAC5C,GAAyB,KAAMkD,EACzD,CAYO,SAASI,EAAyBva,EAAU2Z,EAAe3qB,GAQ9D,IAAImrB,EAAgBvB,EAAkBrB,EAAsBvoB,GACxDwrB,EAAgBd,EAAmB,CAACvC,GAAcnX,EAAU2Z,EAAeQ,GAM/E,QALAK,EAAgBd,EAAmB,CAACzC,GATpC,SAA+BtuC,GAC3B,IAAIu2B,GAAM,WACNc,GAAYd,GAA+B,YAAxBA,EAAImb,iBACvBra,EAASr3B,EAEjB,EAIoFgxC,EAAeQ,IAAkBK,IAC/Fb,IAElBa,EAAgBD,EAAyBva,EAAU,KAAMhR,IAEtDwrB,CACX,CAQO,SAASC,EAA4Bza,EAAUhR,GAElD,IAAImrB,EAAgBvB,EAAkBrB,EAAsBvoB,GAC5D6qB,EAAqB,CAAC1C,GAAcnX,EAAUma,GAC9CN,EAAqB,CAAC5C,GAAyB,KAAMkD,EACzD,C,0PC/cIO,EAAa,YACbC,EAAoB,eACpBC,EAAkB,iBAKf,SAASC,EAAqBx0C,GACjC,QAAQ,SAAkBA,EAC9B,CAQO,SAASy0C,EAAgBn0C,GAC5B,IAAIN,EAAQM,EAWZ,OAVIN,IAAS,SAASA,KAMlBA,GADAA,GAHAA,EAAQA,EAAM,MAAoCq0C,EAAY,SAAUK,EAAMC,GAC1E,OAAOA,EAAOC,aAClB,IACc,MAAoCN,EAAmB,MACvD,MAAoCC,EAAiB,SAAUG,EAAMG,GAC/E,MAAO,IAAMA,CACjB,IAEG70C,CACX,CAMO,SAAS80C,EAAY90C,EAAO+0C,GAC/B,SAAI/0C,IAAS+0C,KAC6B,KAA/B,SAAW/0C,EAAO+0C,EAGjC,CAIO,SAASC,EAAYC,GACxB,OAAOA,GAAQA,EAAKD,eAAiB,EACzC,CAKO,SAASE,EAAiBC,GAC7B,OAAI,SAAQA,GACDA,EAAO,MAEX,IACX,CAWO,SAASC,EAAS1oC,EAAQ2oC,EAAOr1C,EAAOs1C,EAAQC,GACnD,IAAI9pB,EAAWzrB,EAQf,OAPI0M,KACA+e,EAAW/e,EAAO2oC,MACDr1C,GAAWu1C,IAAUA,EAAO9pB,IAAgB6pB,IAAUA,EAAOt1C,KAC1EyrB,EAAWzrB,EACX0M,EAAO2oC,GAAS5pB,IAGjBA,CACX,CAOO,SAAS+pB,EAAY9oC,EAAQ2oC,EAAO/oB,GACvC,IAAIb,EAaJ,OAZI/e,IACA+e,EAAW/e,EAAO2oC,MACD,SAAkB5pB,KAE/BA,GAAY,SAAYa,GAAuB,CAAC,EAAZA,EACpC5f,EAAO2oC,GAAS5pB,GAKpBA,GAAY,SAAYa,GAAuB,CAAC,EAAZA,EAEjCb,CACX,CA+EO,SAASgqB,EAAgB/oC,EAAQpM,EAAM0tB,EAAQ0nB,EAASC,GACvDjpC,GAAUpM,GAAQ0tB,KACM,IAApB2nB,IAA6B,SAAYjpC,EAAOpM,OAChDoM,EAAOpM,GAjFnB,SAA8B0tB,EAAQ4nB,GAClC,IAAIC,EAAU,KACVC,EAAM,KAOV,OANI,SAAW9nB,GACX6nB,EAAU7nB,EAGV8nB,EAAM9nB,EAEH,WAEH,IAAI+nB,EAAoBl0C,UAIxB,GAHIg0C,IACAC,EAAMD,KAENC,EACA,OAAOA,EAAIF,GAAU,MAAgCE,EAAKC,EAElE,CACJ,CA8D2BC,CAAqBhoB,EAAQ0nB,GAGxD,CASO,SAASO,EAAevpC,EAAQshB,EAAQkoB,EAAkBP,GAQ7D,OAPIjpC,GAAUshB,IAAU,SAASthB,KAAW,SAAQwpC,KAChD,SAAWA,EAAkB,SAAUC,IAC/B,SAASA,IACTV,EAAgB/oC,EAAQypC,EAAanoB,EAAQmoB,EAAaR,EAElE,GAEGjpC,CACX,CAMO,SAAS0pC,EAAyBC,GACrC,OACI,WACI,IAAI14C,EAAQE,KACRw4C,IACA,SAAcA,EAAU,SAAUhB,EAAOr1C,GACrCrC,EAAM03C,GAASr1C,CACnB,EAER,CAGR,CAQO,SAASs2C,EAAeC,GAM3B,OAHIA,GAAa,QACbA,GAAY,SAAS,SAAU,CAAC,EAAGA,KAEhCA,CACX,CACO,SAASC,EAAUC,EAAMp1C,EAAMC,EAAMC,EAAMC,EAAMk1C,GAEpD,IAAI50C,EAAUD,UACVJ,EAAWK,EAAQ,IAAM,CAAC,EAC1B60C,EAAS70C,EAAQ,MACjBJ,GAAO,EACP8P,EAAM,EAYV,IAVImlC,EAAS,IAAK,SAAUl1C,KACxBC,EAAOD,EACPA,EAAWK,EAAQ0P,IAAQ,CAAC,EAC5BA,MAGC,SAAS/P,KACVA,EAAW,CAAC,GAGT+P,EAAMmlC,EAAQnlC,IAAO,CACxB,IAAIgoB,EAAM13B,EAAQ0P,GACdolC,GAAa,SAAQpd,GACrBqd,GAAW,SAASrd,GACxB,IAAK,IAAIz3B,KAAQy3B,EAEb,GADcod,GAAe70C,KAAQy3B,GAAUqd,IAAY,SAAUrd,EAAKz3B,GAC1E,CAGA,IAAIiM,EAAWwrB,EAAIz3B,GACf+0C,OAAkB,EAEtB,GAAIp1C,GAAQsM,KAAc8oC,GAAa,SAAQ9oC,MAAc,SAAcA,IAAY,CAEnF,IAAI+oC,EAAQt1C,EAASM,GACjB+0C,GACK,SAAQC,KAETA,EAAQ,KAGN,SAAcA,KAEpBA,EAAQ,CAAC,GAGb/oC,EAAWwoC,EAAU90C,EAAMq1C,EAAO/oC,EACtC,MAEiB9D,IAAb8D,IACAvM,EAASM,GAAQiM,EAtBrB,CAyBR,CACA,OAAOvM,CACX,CAUO,SAASu1C,EAAiBC,EAAS74C,EAAK84C,GAC3C,IAAIC,EAAK/4C,GAAOA,EAAIg5C,cAAgBh5C,EAAIg5C,aAAaH,GACrD,GAAIA,GAAWE,EAAI,CACf,IAAIE,EAAOF,EAAGE,KAEd,GAAa,IAATA,EACA,OAAO,EAEN,GAAa,IAATA,EACL,OAAO,CAEf,CAEA,OAAOH,CACX,CACO,SAASI,EAAgBC,GAC5B,IACI,OAAOA,EAAI3/B,YACf,CACA,MAAOvZ,GAEP,CACA,OAAO,IACX,CACO,SAASm5C,EAAsBrgC,EAAK5Y,GACvC,OAAI4Y,EACO,2BAA6BmgC,EAAgBngC,IAAQ,EAEzD5Y,CACX,CACO,SAASk5C,EAAsBF,EAAKh5C,GACvC,OAAIg5C,EACO,yBAA2BA,EAAI,MAAoC,aAAeD,EAAgBC,IAAwB,EAE9Hh5C,CACX,CACO,SAASm5C,EAAkBr4B,EAAes4B,GAS7C,OARIA,KACI,SAASA,GACTt4B,EAAgB,CAACs4B,GAAejpB,OAAOrP,IAElC,SAAQs4B,KACbt4B,EAAgBs4B,EAAcjpB,OAAOrP,KAGtCA,CACX,CAvV0Bu4B,OAAwB,eAwVlD,IACIC,EAAqB,kBAYlB,SAASC,EAAQ/mB,EAAQ7Y,EAAW6/B,EAAiBC,EAAU3pC,EAAQiN,GAG1E,SAAS28B,EAAgBV,EAAKx1C,EAAM/B,GAChC,IACIu3C,EAAIx1C,GAAQ/B,CAChB,CACA,MAAO3B,GAEP,CACJ,MATsB,IAAlB25C,IAAuBA,GAAW,QAClB,IAAhB3pC,IAAqBA,GAAS,GASlC,IAAIkpC,EAAM,IAAIW,eAwBd,OAvBIF,GAIAC,EAAgBV,EA7BM,0DA6BwBS,GAE9CD,GAGAE,EAAgBV,EAAKM,EAAoBE,GAE7CR,EAAIY,KAAKpnB,EAAQ7Y,GAAY7J,GACzB0pC,GAGAE,EAAgBV,EAAKM,EAAoBE,IAKxC1pC,GAAUiN,GACX28B,EAAgBV,EA5CP,UA4CwBj8B,GAE9Bi8B,CACX,CA+BO,SAASa,EAAcC,EAAYd,EAAKj3C,GAC3C,IAAK+3C,EAAW/3C,IAASi3C,GAAOA,EAAIe,kBAAmB,CACnD,IAAIt4C,EAAQu3C,EAAIe,kBAAkBh4C,GAC9BN,IACAq4C,EAAW/3C,IAAQ,SAAQN,GAEnC,CACA,OAAOq4C,CACX,CAQO,SAASE,EAAuBhB,EAAKthC,GACxC,IAAIoiC,EAAa,CAAC,EAclB,OAbKd,EAAI,MAWLc,EAtDD,SAAgCG,GACnC,IAAI5lC,EAAU,CAAC,EACf,IAAI,SAAS4lC,GAAgB,CACzB,IAAIC,GAAe,SAAQD,GAAe,MAAgC,YAC1E,SAAWC,EAAc,SAAUC,GAC/B,GAAIA,EAAa,CACb,IAAIlnC,EAAMknC,EAAY,MAAqC,MAC3D,IAAa,IAATlnC,EAAY,CAEZ,IAAIqB,GAAS,SAAQ6lC,EAAYC,UAAU,EAAGnnC,IAAM,QAChDxR,GAAQ,SAAQ04C,EAAY,MAAwClnC,EAAM,IAC9EoB,EAAQC,GAAU7S,CACtB,MAEI4S,GAAQ,SAAQ8lC,IAAgB,CAExC,CACJ,EACJ,CACA,OAAO9lC,CACX,CAkCqBgmC,CAAuBrB,EAAI,SAPlCthC,IACFoiC,EAAaD,EAAcC,EAAYd,EAZvB,qBAahBc,EAAaD,EAAcC,EAAYd,EAfpB,iBAgBnBc,EAAaD,EAAcC,EAAYd,EAfZ,0BAqB5Bc,CACX,C,mPC/cO,IAAIQ,OAAkB3uC,EAClB5K,EAAY,GACZw5C,EAAe,WACfC,EAAW,OACXC,EAAsB,gBACtBC,EAAe,WACfC,EAAuB,kBACvBC,EAAiB,aACjBC,EAAwB,mBACxBC,EAAe,WACfC,EAAkB,aAClBC,EAAuB,kBACvBC,EAA0B,oBAC1BC,EAAiB,YACjBC,EAAoB,sBACpBC,EAAmB,mBACnBC,EAAmB,mBACnBC,EAAmB,aACnBC,EAAa,SACbC,EAAW,OACXC,EAAwB,iBACxBC,EAAe,WACfC,EAA2B,CAAC,MAAO,YAAa,iBAAkB,mB,0GCrBzEC,EAAyB,MACzBC,EAAsB,mBACtBC,EAAwB,qBAExBC,EAA2B,WAC3B,SAASA,EAAUh6C,EAAMi6C,EAAgBhzB,GACrC,IAOQizB,EAPJ18C,EAAQD,KACZC,EAAM28C,OAAQ,WACd38C,EAAM,MAAgCwC,EACtCxC,EAAMypB,QAAUA,EAChBzpB,EAAM,MAA8C,WAAc,OAAO,CAAO,GAC5E,SAAWy8C,KAGX,SAAUz8C,EAAO,UAAW,CACxBiyB,EAAG,WAOC,OALKyqB,IAAgB,SAAWD,KAC5BC,EAAeD,IAEfA,EAAiB,MAEdC,CACX,IAGR18C,EAAM,MAAqC,SAAUkP,GACjD,OAAIA,EAEIA,IAAQstC,EAAUF,IAAwBptC,IAAQstC,EAAUD,GACrDv8C,EAAMkP,IAETlP,EAAMq8C,IAA2B,CAAC,GAAGntC,GAE1C,IACX,EACAlP,EAAM,MAAqC,SAAUkP,EAAKhN,GAClDgN,IAEIA,IAAQstC,EAAUF,IAEbt8C,EAAMkP,KACPlP,EAAM,MAA8C,WAAc,OAAO,CAAM,GAEnFA,EAAMkP,GAAOhN,GAERgN,IAAQstC,EAAUD,GACvBv8C,EAAMkP,GAAOhN,GAGHlC,EAAMq8C,GAA0Br8C,EAAMq8C,IAA2B,CAAC,GACxEntC,GAAOhN,EAGvB,EACAlC,EAAM48C,SAAW,WACb,IAAIC,EAAY,EACZC,EAAY98C,EAAM,MAAmCw8C,EAAUD,IACnE,IAAI,SAAQO,GACR,IAAK,IAAI1yC,EAAK,EAAGA,EAAK0yC,EAAU,MAAmC1yC,IAAM,CACrE,IAAI2yC,EAAWD,EAAU1yC,GACrB2yC,IACAF,GAAaE,EAAS1qC,KAE9B,CAEJrS,EAAMqS,MAAO,WAAWrS,EAAM28C,MAC9B38C,EAAMg9C,OAASh9C,EAAMqS,KAAOwqC,EAC5B78C,EAAM48C,SAAW,WAAc,CACnC,CACJ,CAGA,OAFAJ,EAAUS,iBAAmB,SAC7BT,EAAUU,mBAAqB,YACxBV,CACX,CAtE8B,GAwE1B/e,EAA6B,WAC7B,SAASA,EAAYlT,GAKjBxqB,KAAKgrB,IAAM,CAAC,GACZ,OAAa0S,EAAa19B,KAAM,SAAUC,GACtCA,EAAMgL,OAAS,SAAUgtC,EAAKyE,EAAgBhzB,GAG1C,OAAO,IAAI+yB,EAAUxE,EAAKyE,EAAgBhzB,EAC9C,EACAzpB,EAAMm9C,KAAO,SAAUlhB,GACfA,IACAA,EAAU2gB,WACNryB,IAAW,SAAWA,EAAQ,QAC9BA,EAAQ,MAAwC0R,GAG5D,EACAj8B,EAAM,MAAqC,SAAUkP,EAAKhN,GAClDgN,KACUlP,EAAMq8C,GAA0Br8C,EAAMq8C,IAA2B,CAAC,GACxEntC,GAAOhN,EAEnB,EACAlC,EAAM,MAAqC,SAAUkP,GACjD,OAAQlP,EAAMq8C,IAA2B,CAAC,GAAGntC,EACjD,CACJ,EACJ,CASA,OAFAuuB,EAAYl8B,QAAQ,EAEbk8B,CACX,CAzCgC,GA2C5B2f,EAAkB,mBASf,SAASC,EAAOC,EAAWC,EAAWniB,EAAMhmB,EAASqU,GACxD,GAAI6zB,EAAW,CACX,IAAInX,EAAUmX,EAKd,GAJInX,EAAQ,QAERA,EAAUA,EAAQ,SAElBA,EAAS,CACT,IAAI1qB,OAAe,EACf+hC,EAAgBrX,EAAQ,MAAmCiX,GAC/D,IAEI,GADA3hC,EAAU0qB,EAAQn7B,OAAOuyC,IAAanoC,EAASqU,GAClC,CACT,GAAI+zB,GAAiB/hC,EAAQ,QACzBA,EAAQ,MAAmC+gC,EAAUF,GAAsBkB,GACvEA,EAAc,OAAsCA,EAAc,OAAoC,CACtG,IAAIC,EAAWD,EAAc,MAAmChB,EAAUD,IACrEkB,IACDA,EAAW,GACXD,EAAc,MAAmChB,EAAUD,GAAwBkB,IAEvFA,EAAS,MAA8BhiC,EAC3C,CAIJ,OADA0qB,EAAQ,MAAmCiX,EAAiB3hC,GACrD2f,EAAK3f,EAChB,CACJ,CACA,MAAOxP,GACCwP,GAAWA,EAAQ,OACnBA,EAAQ,MAAmC,YAAaxP,EAEhE,CACA,QAEQwP,GACA0qB,EAAQgX,KAAK1hC,GAGjB0qB,EAAQ,MAAmCiX,EAAiBI,EAChE,CACJ,CACJ,CACA,OAAOpiB,GACX,CAYO,SAASsiB,IACZ,OAvLsB,IAwL1B,C,oKCpLIC,EAAiB,UACjBC,EAAe,aACfC,EAAW,EAmBf,SAASC,EAAuBC,EAAgBzvB,EAAgBxO,EAAMk+B,GAGlE,IAAIC,EAAa,KACbC,EAAc,GACb5vB,IACDA,GAAiB,OAAoB,CAAC,EAAG,KAAMxO,EAAK,QAExC,OAAZk+B,IAEAC,EAAaD,EA5BrB,SAA4BG,EAAOr+B,EAAMk+B,GACrC,KAAOG,GAAO,CACV,GAAIA,EAAM,UAA+CH,EACrD,OAAOG,EAEXA,EAAQA,EAAM,OAClB,CAEA,OAAOC,EAA0B,CAACJ,GAAUl+B,EAAK5f,QAAU,CAAC,EAAG4f,EACnE,CAmB+Bu+B,CAAmBN,EAAgBj+B,EAAMk+B,GAAWD,GAE/E,IAAIO,EAAU,CACVC,MAuCJ,WACI,IAAIC,EAAYP,EAGhB,GADAA,EAAaO,EAAYA,EAAU,QAAyC,MACvEA,EAAW,CACZ,IAAI9kC,EAAawkC,EACbxkC,GAAcA,EAAW,MAAoC,KAC7D,SAAWA,EAAY,SAAU+kC,GAC7B,IACIA,EAAgBrjB,KAAKt7B,KAAK2+C,EAAgBppB,KAAMopB,EAAgBvqC,KACpE,CACA,MAAO3T,IACH,QAAeuf,EAAK,MAAmC,EAAkC,GAA8C,6CAA8C,SAAQvf,GACjM,CACJ,GACA29C,EAAc,GAEtB,CACA,OAAOM,CACX,EAzDIzzB,IAAK,CACDjL,KAAM,WACF,OAAOA,CACX,EACAG,QAAS,WACL,OAAO,QAAcH,EAAMwO,EAAehuB,IAC9C,EACAgpC,OAAQ,WACJ,OAAOhb,EAAehuB,GAC1B,EACA0qB,UAyER,SAAwBzmB,EAAYsvB,GAChC,IAAIqT,EAAYwX,EAAWn6C,GAAY,GAevC,OAdIsvB,IAGA,SAAcA,EAAe,SAAU0jB,EAAO3pB,GAE1C,IAAI,SAAkBsZ,EAAUqQ,IAAS,CACrC,IAAI5nB,EAAWrB,EAAehuB,IAAIi3C,IAC9B5nB,IAAa,SAAkBA,KAC/BuX,EAAUqQ,GAAS5nB,EAE3B,EACA,OAAmBrB,EAAgB4Y,EAAWqQ,EAAO3pB,EACzD,GAEGU,EAAesF,MAAMsT,EAAWrT,EAC3C,EAzFQ8qB,UA0FR,SAAoBp6C,EAAYgzC,EAAO3pB,QACT,IAAtBA,IAA2BA,GAAe,GAC9C,IAAID,EACAixB,EAAYF,EAAWn6C,GAAY,GACnC4zB,EAAa7J,EAAehuB,IAOhC,OANIs+C,IAAcA,EAAUrH,KAAW,SAAkBqH,EAAUrH,KAG1Dpf,EAAWof,KAAW,SAAkBpf,EAAWof,MACxD5pB,EAAWwK,EAAWof,IAHtB5pB,EAAWixB,EAAUrH,GAKjB5pB,KAAa,SAAkBA,GAAaA,EAAWC,CACnE,EArGQixB,QAAS,WACL,QAASZ,CACb,EACAa,QAAS,WACL,OAAOb,CACX,EACAc,QAAS,SAAUlW,GACfoV,EAAapV,CACjB,EACAhF,QA6FR,SAAuB3kB,GAGnB,IADA,IAAI2pB,EACMA,EAAayV,EAAQC,SAAU,CACrC,IAAIzgB,EAAS+K,EAAW,QACpB/K,GAEA5e,EAAG4e,EAEX,CACJ,EAtGQpkB,WAGR,SAAwBA,EAAYslC,GAEhC,IADA,IAAI9qC,EAAO,GACFC,EAAK,EAAGA,EAAKpQ,UAAUD,OAAQqQ,IACpCD,EAAKC,EAAK,GAAKpQ,UAAUoQ,GAEzBuF,GACAwkC,EAAY,MAA8B,CACtC9iB,KAAM1hB,EACN2b,MAAO,SAAY2pB,GAAeV,EAAQvzB,IAAfi0B,EAC3B9qC,KAAMA,GAGlB,IAqBA,SAASwqC,EAAWn6C,EAAY06C,GAC5B,IAAIC,EAAQ,KACR5+C,EAAMguB,EAAehuB,IACzB,GAAIA,GAAOiE,EAAY,CACnB,IAAI8gC,EAAS/kC,EAAI,OACZ+kC,GAAU4Z,IACX5Z,EAAS,CAAC,GAGd/kC,EAAI,MAAwB+kC,GAE5BA,EAAS/W,EAAemB,IAAInvB,EAAK,WAE7B4+C,EAAQ7Z,EAAO9gC,KACD06C,IACVC,EAAQ,CAAC,GAGb7Z,EAAO9gC,GAAc26C,EAErBA,EAAQ5wB,EAAemB,IAAI4V,EAAQ9gC,GAE3C,CACA,OAAO26C,CACX,CA2CA,OAAOZ,CACX,CAQO,SAASa,EAA8BpB,EAAgBz9C,EAAKwf,EAAMk+B,GACrE,IAAI99C,GAAS,OAAoBI,GAC7B8+C,EAAkBtB,EAAuBC,EAAgB79C,EAAQ4f,EAAMk+B,GACvEM,EAAUc,EAAgBr0B,IAkB9B,OAFAuzB,EAAQ,MAfR,SAAsB7U,GAClB,IAAIZ,EAAauW,EAAgBb,QAKjC,OAJI1V,GAEAA,EAAW,MAAsDY,EAAK6U,IAElEzV,CACZ,EASAyV,EAAQ,MARR,SAAoB1gB,EAASogB,GAKzB,YAJqB,IAAjBpgB,IAAsBA,EAAU,OAChC,SAAQA,KACRA,EAAUwgB,EAA0BxgB,EAAS19B,EAAOI,IAAKwf,EAAMk+B,IAE5DmB,EAA8BvhB,GAAW0gB,EAAQ,QAAwCp+C,EAAOI,IAAKwf,EAAMk+B,EACtH,EAGOM,CACX,CAQO,SAASe,EAAoCtB,EAAgBj+B,EAAMk+B,GACtE,IAAI99C,GAAS,OAAoB4f,EAAK5f,QAClCk/C,EAAkBtB,EAAuBC,EAAgB79C,EAAQ4f,EAAMk+B,GACvEM,EAAUc,EAAgBr0B,IAe9B,OAFAuzB,EAAQ,MAZR,SAAsBjyB,GAClB,IAAIwc,EAAauW,EAAgBb,QAEjC,OADA1V,GAAcA,EAAW,MAAkCyV,EAASjyB,IAC5Dwc,CACZ,EASAyV,EAAQ,MARR,SAAoB1gB,EAASogB,GAKzB,YAJqB,IAAjBpgB,IAAsBA,EAAU,OAChC,SAAQA,KACRA,EAAUwgB,EAA0BxgB,EAAS19B,EAAOI,IAAKwf,EAAMk+B,IAE5DqB,EAAoCzhB,GAAW0gB,EAAQ,QAAwCx+B,EAAMk+B,EAChH,EAGOM,CACX,CAQO,SAASgB,EAAoCvB,EAAgBj+B,EAAMk+B,GACtE,IAAI99C,GAAS,OAAoB4f,EAAK5f,QAElCo+C,EADkBR,EAAuBC,EAAgB79C,EAAQ4f,EAAMk+B,GAC7CjzB,IAiB9B,OAFAuzB,EAAQ,MAdR,SAAsB5c,GAClB,OAAO4c,EAAQza,QAAQ,SAAU/F,IACzB,SAAWA,EAAO,QAClBA,EAAO,MAAkCwgB,EAAS5c,EAE1D,EACJ,EASA4c,EAAQ,MARR,SAAoB1gB,EAASogB,GAKzB,YAJqB,IAAjBpgB,IAAsBA,EAAU,OAChC,SAAQA,KACRA,EAAUwgB,EAA0BxgB,EAAS19B,EAAOI,IAAKwf,EAAMk+B,IAE5DsB,EAAoC1hB,GAAW0gB,EAAQ,QAAwCx+B,EAAMk+B,EAChH,EAGOM,CACX,CAQO,SAASF,EAA0BxgB,EAAS19B,EAAQ4f,EAAMk+B,GAC7D,IAAIuB,EAAa,KACbvtB,GAAMgsB,EACV,IAAI,SAAQpgB,IAAYA,EAAQ,MAAoC,EAAG,CAEnE,IAAI4hB,EAAc,MAClB,SAAW5hB,EAAS,SAAUD,GAI1B,GAHK3L,GAAOgsB,IAAYrgB,IACpB3L,GAAM,GAENA,GAAO2L,IAAa,SAAWA,EAAU,OAAwD,CAEjG,IAAI8hB,EA6Bb,SAAoC3hB,EAAQ59B,EAAQ4f,GACvD,IAGI4/B,EAHAlB,EAAY,KACZmB,GAAsB,SAAW7hB,EAAO,OACxC8hB,GAAa,SAAW9hB,EAAO,OAQ/B+hB,EAAa,CACbtlC,UAAW,WACP,OAAOujB,CACX,EACAghB,QAAS,WACL,OAAON,CACX,EACAhzB,iBA2DJ,SAA2Bie,EAAK/d,GAqBvBo0B,EApBLp0B,EAAUA,GApDd,WACI,IAAIA,EAUJ,OARIoS,IAAU,SAAWA,EAAO8f,MAE5BlyB,EAAUoS,EAAO8f,MAEhBlyB,IAEDA,EAAUyzB,EAA8BU,EAAY3/C,EAAQ4f,IAEzD4L,CACX,CAwCyBC,GACrB,SAA+BD,GAC3B,IAAKoS,IAAW6hB,EACZ,OAAO,EAEX,IAAIjd,GAAc,QAAgB5E,GAClC,OAAI4E,EAAY,QAAyCA,EAAY,QAMjEkd,GAEA9hB,EAAO,MAAkD0gB,GAE7D1gB,EAAO,MAAsD2L,EAAK/d,IAE3D,EACX,EACmD,mBAAoB,WAAc,MAAO,CAAG/qB,KAAM8oC,EAAQ,GAAKA,EAAQ,OAGtH/d,EAAQ,MAA6C+d,EAE7D,EApFI3O,OAqFJ,SAAuB1O,EAAWC,GAqBzByzB,EAAc1zB,EApBnB,WAEI,IAAI2zB,GAAS,EACb,GAAIjiB,EAAQ,CACR,IAAI4E,GAAc,QAAgB5E,GAC9BkiB,EAAaliB,EAAO,OAAa4E,EAAY,OAE7C5E,GAAYkiB,GAAcA,IAAe5zB,EAAUtM,QAAY4iB,EAAY,QAE3EA,EAAY,MAA+B,KAC3CA,EAAY,OAAwC,EACpDA,EAAY,OAAmD,EAC3D5E,EAAO,QAAkH,IAAzEA,EAAO,MAAsC1R,EAAWC,KAExG0zB,GAAS,GAGrB,CACA,OAAOA,CACX,EAC6C,SAAU,WAAc,EAAG1zB,EAAY5C,UAEhF2C,EAAU,MAA6CC,EAE/D,EA7GI4zB,OA8GJ,SAAuBlc,EAAWrC,GAiBzBoe,EAAc/b,EAhBnB,WAEI,IAAIgc,GAAS,EACb,GAAIjiB,EAAQ,CACR,IAAI4E,GAAc,QAAgB5E,GAC9BkiB,EAAaliB,EAAO,OAAa4E,EAAY,OAE7C5E,GAAYkiB,GAAcA,IAAejc,EAAUjkB,QAAY4iB,EAAY,OACvE5E,EAAO,QAA0G,IAArEA,EAAO,MAAkCiG,EAAWrC,KAEhGqe,GAAS,EAGrB,CACA,OAAOA,CACX,EAC2C,SAAU,WAAc,GAAG,IAElEhc,EAAU,MAA6CrC,EAE/D,EAlIInF,IAfAmjB,EADA5hB,EACUA,EAAO,MAA4C,IAAMA,EAAO,MAAuC,IAAM+f,IAG7G,aAAeA,IAazBqC,SAAU,SAAUrX,GAChB2V,EAAY3V,CAChB,GAeJ,SAASiX,EAAcp0B,EAASy0B,EAAiB39C,EAAM4S,EAASqU,GAC5D,IAAIs2B,GAAS,EACTx7C,EAAau5B,EAASA,EAAO,MAlVX,uBAmVlBsiB,EAAgB10B,EAAQiyB,GAiC5B,OAhCKyC,IAEDA,EAAgB10B,EAAQiyB,GAAkB,CAAC,GAG/CjyB,EAAQqzB,QAAQP,GACZ1gB,IACA,QAAOpS,EAAQ,QAAgC,WAAc,OAAOnnB,EAAa,IAAM/B,CAAM,EAAG,WAE5F49C,EAAcV,IAAW,EACzB,IAEI,IAAIW,EAAS7B,EAAYA,EAAUjiB,IAAM,KACrC8jB,IACAD,EAAcC,IAAU,GAE5BN,EAASI,EAAgBz0B,EAC7B,CACA,MAAO40B,GACH,IAAIC,GAAa/B,GAAY4B,EAAc5B,EAAUjiB,KACjDgkB,IAEAR,GAAS,GAERvB,GAAc+B,IAGf,QAAe70B,EAAQ,QAAwC,EAAmC,GAA8C,WAAannB,EAAa,mBAAqB/B,EAAO,OAAQ,SAAQ89C,GAAS,iBAAkB,SAAQF,GAEjQ,CACJ,EAAGhrC,EAASqU,GAETs2B,CACX,CA4EA,OAAO,SAAUF,EACrB,CAtL+BW,CAA2B7iB,EAAWz9B,EAAQ4f,GACxDy/B,IACDA,EAAaE,GAEbD,GAEAA,EAAYU,SAAST,GAEzBD,EAAcC,CAClB,CACJ,EACJ,CACA,OAAIzB,IAAYuB,EAELnB,EAA0B,CAACJ,GAAU99C,EAAQ4f,GAEjDy/B,CACX,C,8HC/RI/9C,EAAY,GAEZi/C,EAAgB,uBAChBC,EAAkB,OAOlBx/B,EAAmC,WACnC,SAASA,IACL,IACIy/B,EACAppC,EACAqpC,EACAC,EACAC,EACAC,EACArpC,EACAspC,EACAC,EACAC,EACAC,EACAnqC,EACAE,EACAM,EAdA4pC,EAAoB,GAexB,OAAalgC,EAAmBnhB,KAAM,SAAUC,EAAOC,GACnD,IAAIohD,GAAmB,EA2IvB,SAASC,EAAS7gD,EAASiZ,IACvB,QAAeknC,EAAU,EAAkC,GAAsC,4BAA6B,CAAEngD,QAASA,IACzI+Y,EAAcE,EAAY,IAAK,CAAC,EACpC,CACA,SAAS6nC,EAAgB7nC,GACrB4nC,EAAS,4CAA6C5nC,EAC1D,CAiCA,SAASF,EAAcF,EAAYO,EAAQ/E,EAASyE,GAChD,IACID,GAAcA,EAAWO,EAAQ/E,EAASyE,EAC9C,CACA,MAAOhZ,GAEP,CACJ,CACA,SAASihD,EAAcrwC,EAASmI,GAC5B,IAAI22B,GAAM,WACN36B,EAAMnE,EAAQ,MAClB,IAAKmE,EAGD,OAFAisC,EAAgBjoC,IAET,EAEXhE,EAAMnE,EAAQ,OAA4C+F,EAAiBupC,EAAgBj/C,GAC3F,IAAI+R,EAAOpC,EAAQ,MAKfswC,EAAiBZ,EAAWttC,EAAO,IAAImuC,KAAK,CAACnuC,GAAO,CAAEtQ,KAAM,6BAGhE,OADagtC,EAAIv1B,WAAWpF,EAAKmsC,EAErC,CAQA,SAASE,EAAcxwC,EAASmI,EAAYsQ,GACxC,IAAIrW,EAAOpC,EAAQ,MACnB,IACI,GAAIoC,EAEA,GAAKiuC,EAAcrwC,EAASmI,GAnFpCE,EA+FkCF,EA/FR,IAAK,CAAC,EA+FT9X,OAZ0B,CACrC,IAAIogD,EAAUd,GAAoBA,EAAiB3nC,cAC/CyoC,IAAW,SAAWA,GACtBA,EAAQzwC,EAASmI,EAAYkoC,IAG7BR,GAAiBA,EAAcjiC,SAAS5N,EAASmI,GAAY,IAC7D,QAAesnC,EAAU,EAAkC,GAAiD,2EAEpH,CAMR,CACA,MAAOrgD,GACHsgD,IAAY,QAAeD,EAAU,sDAAuD,SAAQrgD,IACpGiZ,EAAcF,EAAYunC,EAAW,EAAI,IAAK,CAAC,EAAGr/C,EACtD,CAEJ,CAMA,SAASqgD,EAAW1wC,EAASmI,EAAYsQ,GAErC,IAAIk4B,EACAC,EACAC,EACAltC,EAAU3D,EAAQ,OAAuC,CAAC,GACzDyY,GAAQ+2B,IACTmB,GAAa,QAAc,SAAU/0B,EAASk1B,GAC1CF,EAAch1B,EACdi1B,EAAaC,CACjB,IAEApB,GAAYj3B,GAAQzY,EAAQsM,iBAC5BmM,GAAO,GAGX,IAAIs4B,EAAc/wC,EAAQ,MAC1B,IAAK+wC,EAGD,OAFAX,EAAgBjoC,QAChByoC,GAAeA,GAAY,IAG/B,IAAItI,GAAM,QAAQiH,EAAiBwB,EAAab,GAAkB,EAAMz3B,EAAMzY,EAAQ,OAqBtF,SAASgxC,EAAe1I,GACpB,IAAI2I,EAActB,GAAoBA,EAAiB7nC,cAEvD,GADuBmpC,IAAe,SAAWA,GAE7CA,EAAY3I,EAAKngC,EAAYnI,OAE5B,CACD,IAAIoI,GAAW,QAAgBkgC,GAC/BjgC,EAAcF,EAAYmgC,EAAI,OAAmC,QAAuBA,EAAKoH,GAAWtnC,EAC5G,CACJ,CAUA,OAxCKsnC,GAEDpH,EAAI4I,iBAAiB,eAAgB,qBAEzC,UAAW,SAAQvtC,GAAU,SAAUH,GACnC8kC,EAAI4I,iBAAiB1tC,EAAYG,EAAQH,GAC7C,GACA8kC,EAAI6I,mBAAqB,WAChBzB,IACDsB,EAAe1I,GACQ,IAAnBA,EAAI8I,YACJR,GAAeA,GAAY,GAGvC,EACAtI,EAAI+I,OAAS,WACL3B,GACAsB,EAAe1I,EAEvB,EAYAA,EAAIgJ,QAAU,SAAUn+C,GACpBkV,EAAcF,EAAYunC,EAAWpH,EAAI,MAAoC,KAAK,QAAuBA,EAAKoH,GAAWA,EAAWr/C,GAAY,QAAsBi4C,IACtKuI,GAAcA,EAAW19C,EAC7B,EACAm1C,EAAIiJ,UAAY,WACZlpC,EAAcF,EAAYunC,EAAWpH,EAAI,MAAoC,KAAK,QAAuBA,EAAKoH,GAAWA,EAAWr/C,GAAY,QAAsBi4C,IACtKsI,GAAeA,GAAY,EAC/B,EACAtI,EAAInxB,KAAKnX,EAAQ,OACV2wC,CACX,CAMA,SAASa,EAAexxC,EAASmI,EAAYsQ,GACzC,IAAIhoB,EAIAkgD,EACAC,EACAC,EALAE,EAAc/wC,EAAQ,MACtB6Q,EAAQ7Q,EAAQ,MAChBswC,EAAiBZ,EAAW7+B,EAAQ,IAAI0/B,KAAK,CAAC1/B,GAAQ,CAAE/e,KAAM,qBAI9D2/C,EAAiB,IAAIC,QACrBC,EAAc9gC,EAAM,MACpB+gC,GAAiB,EACjBC,GAAkB,EAClBluC,EAAU3D,EAAQ,OAAuC,CAAC,EAE1D8xC,IAAQrhD,EAAK,CACTqxB,OAAQytB,EACRwC,KAAMzB,IAEP,MAAwB,EAE3B7/C,GAEAuP,EAAQ2D,UAAW,SAAQ3D,EAAQ2D,SAAS,MAAoC,KAChF,UAAW,SAAQA,GAAU,SAAUH,GACnCiuC,EAAej8B,OAAOhS,EAAYG,EAAQH,GAC9C,GACAsuC,EAAK,MAAsCL,GAE3ClrC,EACAurC,EAAKE,YAAczrC,EAEd2pC,GAAoBR,IAEzBoC,EAAKE,YAAc,WAEnBv5B,IACAq5B,EAAKG,WAAY,EACjBhC,GAAqB0B,EACjBjC,EAC+B,IAA3B1vC,EAAqB,cAGrB4xC,GAAiB,EACb7rC,IACAgrC,GAAezB,IAMvBsC,GAAiB,GAGzB,IAAI/oC,EAAU,IAAIqpC,QAAQnB,EAAae,GACvC,IAEIjpC,EAAQ,MAAwB,CACpC,CACA,MAAOzZ,GAGP,CAOA,IANKqpB,GAAQ+2B,IACTmB,GAAa,QAAc,SAAU/0B,EAASk1B,GAC1CF,EAAch1B,EACdi1B,EAAaC,CACjB,KAECC,EAGD,OAFAX,EAAgBjoC,QAChByoC,GAAeA,GAAY,IAG/B,SAASuB,EAAaC,EAAKC,GAInBhqC,EAAcF,EADdkqC,EAC0B3C,EAAW,EAAI2C,EAGf3C,EAAW,EAAI,IAHY,CAAC,EAAGA,EAAWr/C,EAAY+hD,EAKxF,CACA,SAASE,EAAiBlqC,EAAUpI,EAASjP,GACzC,IAAI2X,EAASN,EAAS,MAClBmqC,EAAiB5C,EAAiB/nC,gBAClC2qC,IAAkB,SAAWA,GAC7BA,EAAenqC,EAAUD,EAAYpX,GAASV,EAAW2P,GAGzDqI,EAAcF,EAAYO,EAAQ,CAAC,EAAG3X,GAASV,EAEvD,CACA,KACI,QAAgBmiD,MAAM9C,EAAWqB,EAAcloC,EAAS6mC,EAAWoC,EAAO,MAAO,SAAUn3C,GAKvF,GAJI8d,IACAw3B,GAAqB0B,EACrBA,EAAc,IAEbE,EAED,GADAA,GAAkB,EACbl3C,EAAOk5B,SA0CRse,EAAax3C,EAAO8R,QAAU9R,EAAO8R,OAAO,MAAqC,KACjFokC,GAAcA,EAAWl2C,EAAO8R,YA3Cd,CAClB,IAAIgmC,EAAa93C,EAAO,MACxB,IAMS+0C,GAAa+C,EAAWC,GAWrBhD,IAAa+C,EAAWV,MACxBO,EAAiBG,EAAY,KAAMpiD,GACnCugD,GAAeA,GAAY,KAG3B,QAAgB6B,EAAWnX,OAAQ,SAAUqX,GACzCL,EAAiBG,EAAYzyC,EAAS2yC,EAAK,OAC3C/B,GAAeA,GAAY,EAC/B,IAjBA6B,EAAW,MACXN,EAAaM,EAAWG,WAAYH,EAAW,OAG/CN,EAAaM,EAAWG,WAAY,KAExChC,GAAeA,GAAY,GAcnC,CACA,MAAOxhD,GACCqjD,GAAcA,EAAW,MACzBN,GAAa,SAAQ/iD,GAAIqjD,EAAW,OAGpCN,GAAa,SAAQ/iD,GAAI,KAE7ByhD,GAAcA,EAAWzhD,EAC7B,CACJ,CAMR,EACJ,CACA,MAAOA,GACEyiD,IACDM,GAAa,SAAQ/iD,GAAI,KACzByhD,GAAcA,EAAWzhD,GAEjC,CAkBA,OAjBIwiD,IAAmBC,IAEnBA,GAAkB,EAClBxpC,EAAcF,EAAY,IAAK,CAAC,GAChCyoC,GAAeA,GAAY,IAE3BlB,IAAamC,GAAmB7xC,EAAQ,MAAsC,GAE9EqG,GAAmBA,EAAgBzD,IAAI,WAC9BivC,IAEDA,GAAkB,EAClBxpC,EAAcF,EAAY,IAAK,CAAC,GAChCyoC,GAAeA,GAAY,GAEnC,EAAG5wC,EAAQ,OAER2wC,CACX,CAWA,SAASkC,EAAW7yC,EAASmI,EAAYsQ,GAErC,IAAIq6B,GAAU,WACV5qC,EAAM,IAAI03B,eACVx9B,EAAOpC,EAAQ,MACnBkI,EAAImpC,OAAS,WACT,IAAIjpC,GAAW,QAAgBF,GAC3B6qC,EAAapD,GAAoBA,EAAiBjoC,cAClDqrC,IAAc,SAAWA,GACzBA,EAAW7qC,EAAKC,EAAYnI,GAG5BqI,EAAcF,EAAY,IAAK,CAAC,EAAGC,EAE3C,EACAF,EAAIopC,QAAU,WACVjpC,EAAcF,EAAY,IAAK,CAAC,EAAGunC,EAAWr/C,GAAY,QAAsB6X,GACpF,EACAA,EAAIqpC,UAAY,WACZlpC,EAAcF,EAAY,IAAK,CAAC,EACpC,EACAD,EAAI8qC,WAAa,WAAc,EAG/B,IAAIC,EAAkBH,GAAWA,EAAQxpB,UAAYwpB,EAAQxpB,SAASC,UAAY,GAC9E2pB,EAAWlzC,EAAQ,MACvB,GAAKkzC,EAAL,CAIA,IAAKxD,GAAyD,IAA7CwD,EAASC,YAAYF,EAAiB,GAAU,CAC7D,IAAIzf,EAAM,kGAGV,OAFA,QAAeic,EAAU,EAAkC,GAAiD,KAAOjc,QACnH2c,EAAS3c,EAAKrrB,EAElB,CACA,IAAIja,EAAcwhD,EAAWwD,EAAWA,EAAS,MAAoC,aAAc,IACnGhrC,EAAIghC,KAAKqG,EAAiBrhD,GACtB8R,EAAQ,QACRkI,EAAI,MAAsClI,EAAQ,OAEtDkI,EAAIiP,KAAK/U,GACLstC,GAAYj3B,EACZpS,GAAmBA,EAAgBzD,IAAI,WACnCsF,EAAIiP,KAAK/U,EACb,EAAG,GAGH8F,EAAIiP,KAAK/U,EAnBb,MAFIguC,EAAgBjoC,EAuBxB,CACA,SAASsG,IACLwhC,EAAoB,EACpB7pC,GAAiB,EACjBopC,GAAqB,EACrBC,EAAW,KACXC,EAAW,KACXC,EAAmB,KACnBC,EAAsB,KACtBrpC,EAAoB,KACpBspC,EAAgB,KAChBC,GAAc,EACdC,GAAiB,EACjBC,GAAqB,EACrBnqC,GAAyB,EACzBE,GAAiB,EACjBM,EAAkB,IACtB,CApjBAoI,IACA5f,EAAM,MAA4C,SAAUE,EAAQ+f,GAChE2gC,EAAW3gC,EACP1I,IACA,QAAeqpC,EAAU,EAAmC,GAAmD,iCAEnH5gD,EAAMihB,UAAU/gB,GAChBqX,GAAiB,CACrB,EACAvX,EAAyB,kBAAI,WACzB,MAAO,CAACuX,EAAgBspC,EAAUE,EAAqBJ,EAC3D,EAGA3gD,EAAMihB,UAAY,SAAU/gB,GACxB,IAgBI,GAfA4gD,EAAmB5gD,EAAO0Y,0BAA4B,CAAC,EACvDmoC,IAAwB7gD,EAAOkY,mBAC/BV,EAAoBxX,EAAOmY,iBAC3BwoC,IAAa3gD,EAAOiY,QACpBwoC,IAAuBzgD,EAAOgY,kBAC9B+oC,IAAgB/gD,EAAOoY,WACvB4oC,IAAmBhhD,EAAOqY,cAC1B4oC,IAAuBjhD,EAAOsY,kBAC9BhB,EAAkBtX,EAAOwY,YACzBxB,IAAmBhX,EAAOyY,cAC1B3B,IAA2B9W,EAAOuY,sBAClCuoC,EAAgB,CAAEjiC,SAAU8iC,GACvBhB,IACDQ,GAAmB,GAEnBN,EAAqB,CACrB,IAAIwD,GAAa,UACbA,GAAcA,EAAW7pB,UAAoF,UAAxE6pB,EAAW7pB,SAAS,UAEzD2mB,GAAmB,EAE3B,CACA,OAAO,CACX,CACA,MAAO9gD,GAEP,CACA,OAAO,CACX,EACAP,EAAMwkD,oBAAsB,WACxB,OAAOpD,CACX,EACAphD,EAAMgY,cAAgB,SAAUF,EAAY8R,GACxC,OAAI9R,GAAcA,EAAW,MAgGjC,SAA6BA,EAAYC,GAIrC,IAHA,IAAI0sC,EAAgB,EAChBC,EAAe,KACft6C,EAAK,EACc,MAAhBs6C,GAAwBt6C,EAAK0N,EAAW,OAC3C2sC,EAAgB3sC,EAAW1N,GACtB62C,GAAiC,IAAlBwD,EASO,IAAlBA,KAAiD,QAAiB1sC,IAAkBA,GAAgBf,EAGlF,IAAlBytC,KAAkD,YAAyB1sC,EAAeopC,EAAsBD,KACrHwD,EAAe/C,GAHf+C,EAAe/B,GATX,UAEA+B,EAAeV,GAEV,YACLU,EAAe7C,GASvBz3C,IAEJ,OAAIs6C,EACO,CACHC,WAAYF,EACZ3oC,QAAS/D,EACTgH,SAAU2lC,GAGX,IACX,CA9He7sC,CAAoBC,EAAY8R,GAEpC,IACX,EACA5pB,EAAM4kD,gBAAkB,WACpB,OAAO5D,CACX,EACAhhD,EAAM,MAA+C,SAAUosB,EAAWC,GACtEzM,GACJ,EACA5f,EAAM6e,eAAiB,SAAU7K,EAAU6wC,EAAY1zC,EAASZ,GAC5D,GAAKs0C,IAAct0C,GAAWY,EAAQ,MAKtC,IACI,IAAI4P,GAAW,SAAQ,qBACvB,KAAK,SAAWA,GAEZ,YADA/M,EAAS7C,GAIb,IAOI2zC,EAPO,IAAIC,eAAe,CAC1BpI,MAAO,SAAUqI,GACbA,EAAWC,SAAQ,SAAS9zC,EAAQ,QAAiC,IAAI+zC,aAAcC,OAAOh0C,EAAQ,OAAiCA,EAAQ,OAC/I6zC,EAAWI,OACf,IAEwBC,YAAY,IAAItkC,EAAS,SACrBukC,YAC5BC,EAAW,GACXC,EAAgB,EAChBC,GAAmB,EAsCvB,OApCA,QAAgBX,EAASY,OAAQ,SAASC,EAAapsC,GACnD,IAAKksC,IAAqBlsC,EAASyrB,SAAU,CAEzC,IAAIl5B,EAASyN,EAAS,MACtB,IAAKzN,EAAOq8B,KAIR,OAFAod,EAAS,MAA8Bz5C,EAAO,OAC9C05C,GAAiB15C,EAAO5J,MAAM,OACvB,QAAgB4iD,EAASY,OAAQC,GAK5C,IAFA,IAAIC,EAAW,IAAIC,WAAWL,GAC1BM,EAAS,EACJ3xC,EAAK,EAAG4xC,EAAWR,EAAUpxC,EAAK4xC,EAASjiD,OAAQqQ,IAAM,CAC9D,IAAI6xC,EAAQD,EAAS5xC,GACrByxC,EAAS7xC,IAAIiyC,EAAOF,GACpBA,GAAUE,EAAM,KACpB,CAEA70C,EAAQ,MAAgCy0C,EACxCz0C,EAAQ,MAAoC,oBAAsB,OAClEA,EAAQ80C,YAAcV,EAAS,KACnC,CACKE,IAIDA,GAAmB,EACnBzxC,EAAS7C,GAGjB,GAKO2zC,CACX,CACA,MAAOxE,GAGH,YADAtsC,EAAS7C,EAEb,MAhEI6C,EAAS7C,EAiEjB,CAqbJ,EACJ,CAYA,OAFA+P,EAAkB3f,QAAQ,EAEnB2f,CACX,CAtlBsC,E,kHCRtC,SAASglC,EAAShkD,EAAOikD,EAAKC,GAC1B,SAAIlkD,GAASA,EAAM,QAAsCikD,GAAOjkD,IAAUkkD,IAC7DlkD,EAAM60C,MAAM,eAG7B,CCVA,IAAIsP,GAAkB,OAAkB,UACjC,SAASC,EAAgBxoB,GAC5B,OAAOuoB,EAAgBt1B,IAAI+M,EAAQ,QAAS,CAAC,GAAG,EACpD,CAQO,SAASyoB,EAAkBC,EAAgBrmD,GAM9C,IAJA,IAGIuiC,EAHA+jB,EAAc,GACdC,EAAa,KACbvI,EAAQqI,EAAe,QAEpBrI,GAAO,CACV,IAAIxgB,EAAYwgB,EAAM,QACtB,GAAIxgB,EAAW,CACP+oB,GAAcA,EAAW,OAAqD/oB,EAAU,OAExF+oB,EAAW,MAAkD/oB,GAGjE,IAAI4L,KADJ7G,EAAc4jB,EAAgB3oB,IACI,MAC9BA,EAAU,QACV4L,EAAgB5L,EAAU,SAEzB4L,GACDkd,EAAY,MAA8B9oB,GAE9C+oB,EAAa/oB,EACbwgB,EAAQA,EAAM,OAClB,CACJ,EAEA,SAAWsI,EAAa,SAAU9oB,GAC9B,IAAI7d,EAAO0mC,EAAe,QAC1B7oB,EAAU,MAA0C6oB,EAAeld,SAAUxpB,EAAM3f,EAAYqmD,EAAe,SAC9G9jB,EAAc4jB,EAAgB3oB,GAEzBA,EAAU,OAAc+E,EAAY,QACrCA,EAAY,MAAY5iB,GAE5B4iB,EAAY,OAAmD,SACxDA,EAAY,KACvB,EACJ,CACO,SAASikB,EAAY/oB,GAExB,OAAOA,EAAQmW,KAAK,SAAU6S,EAAMC,GAChC,IAAI/6C,EAAS,EACb,GAAI+6C,EAAM,CACN,IAAIC,EAAcD,EAAK,MACnBD,EAAK,MACL96C,EAASg7C,EAAcF,EAAK,MAAgBC,EAAK,MAAgB,EAE5DC,IACLh7C,GAAU,EAElB,MAEIA,EAAS86C,EAAO,GAAK,EAEzB,OAAO96C,CACX,EAEJ,CAgCO,SAASi7C,EAA8BC,GAC1C,IAAIC,EAAQ,CAAC,EACb,MAAO,CACHC,QAAS,WACL,OAAOD,EAAM,KACjB,EACAE,QAAS,SAAUj3C,GACf82C,GAAaA,EAAUG,QAAQj3C,GAC/B+2C,EAAM,MAAgC/2C,CAC1C,EACAk3C,WAAY,WACR,OAAOH,EAAMI,OACjB,EACAC,WAAY,SAAUp3C,GAClB82C,GAAaA,EAAUM,WAAWp3C,GDxBnCg2C,ECyBoBh2C,EDzBJ,GAxFJ,sCCkHP+2C,EAAMI,QAAUn3C,EAExB,EACAq3C,UAAW,WACP,OAAON,EAAMO,MACjB,EACAC,UAAW,SAAUv3C,GACjB82C,GAAaA,EAAUS,UAAUv3C,GDvBlCg2C,ECwBmBh2C,EDxBH,GAjGL,sBC0HN+2C,EAAMO,OAASt3C,EAEvB,EACAw3C,cAAe,WACX,OAAOT,EAAM,KACjB,EACAU,cAAe,SAAUC,GACrBZ,GAAaA,EAAUW,cAAcC,GACrCX,EAAM,MAA6CW,CACvD,EAER,C,4EC1IO,SAASC,IACZ,IAAIC,EAAW,GAiBf,MAAO,CACH91B,IAjBJ,SAAqBV,GACbA,GACAw2B,EAAS,MAA8Bx2B,EAE/C,EAcIoV,IAbJ,SAAsBta,EAAWC,IAC7B,SAAWy7B,EAAU,SAAUx2B,GAC3B,IACIA,EAAQlF,EAAWC,EACvB,CACA,MAAO9rB,IACH,QAAe6rB,EAAU,QAAwC,EAAkC,GAA8C,8CAA+C,SAAQ7rB,GAC5M,CACJ,GACAunD,EAAW,EACf,EAKJ,C,6ECLO,SAASC,IACZ,IAAIC,EAAS,GA0Bb,MAAO,CACHthB,IA1BJ,SAAmBtmC,GACf,IAAI6nD,EAAWD,EACfA,EAAS,IAET,SAAWC,EAAU,SAAU12B,GAE3B,KACKA,EAAG5P,IAAM4P,EAAGsL,QAAQ/8B,KAAKyxB,EAC9B,CACA,MAAOhxB,IACH,QAAeH,EAAQ,EAAkC,GAA8C,cAAe,SAAQG,GAClI,CACJ,EAIJ,EAWIyxB,IAVJ,SAAkBmS,GACVA,IACA,SAAU6jB,EAAQ7jB,EAK1B,EAKJ,C,4gBC5CO,IAAI38B,EAAqB,cACrBtC,EAAc,SACdgjD,EAAuB,gBACvBC,EAAsB,gBACtBC,EAAa,QACbC,EAAa,QACb/gD,EAAY,OACZghD,EAAc,SACdC,EAAc,SACdC,EAAc,SACd3jD,EAAkB,aAClB4E,EAAkB,aAClBg/C,EAA6B,6BAC7BC,EAA6B,0BAC7BC,EAAsB,gBACtBC,EAAsB,eACtBC,EAAkB,YAClBC,EAAY,OACZC,EAAoB,cACpBC,EAA6B,uBAC7B/jD,EAAa,QACbgkD,EAAe,UACfC,EAA6B,0BAC7BC,EAAc,SACdC,EAAmB,aACnBC,EAAe,UACfC,EAA6B,sBAC7BC,EAAkB,YAClBC,EAAgB,WAChBC,EAAkB,YAClBC,EAAe,UACfC,EAAgB,UAChBC,EAAoB,cACpBC,EAAc,SACdC,EAAgB,UAChBC,EAAuB,gBACvBC,EAAkB,YAClBziD,EAAa,QACb0iD,EAAe,UACfC,EAAiB,YACjBplD,EAAgB,UAChBqlD,EAAY,OACZC,EAAgB,UAChBC,EAAc,SACdC,EAA6B,wBAC7BC,EAAoB,aACpBC,EAAY,OACZC,EAAe,SACfC,EAAe,SACfC,EAAsB,gBACtBjiD,EAAe,UACfkiD,GAAkB,YAClBC,GAAe,UAMfC,GAAmB,Y,0FCrEvB,IAAIC,EAAkB,WAClBC,EAAgB,SAChBC,EAAmB,YACnBC,EAAmB,YAEnBC,EAAWrR,OACXsR,EAAWD,EAASD,E,qFCQ3BG,KAPoB,YAAe,CAAC,GAAW,SAC1B,YAAe,CAAC,GAAY,QAM7B,kBAabC,EAAa,OAZO,SAAUr4C,GAErC,IAAK,IAAIif,EAAGruB,EAAI,EAAGstB,EAAIptB,UAAUD,OAAQD,EAAIstB,EAAGttB,IAE5C,IAAK,IAAI0nD,KADTr5B,EAAInuB,UAAUF,GAEN,KAASwnD,GAAmBvrD,KAAKoyB,EAAGq5B,KACpCt4C,EAAEs4C,GAAKr5B,EAAEq5B,IAIrB,OAAOt4C,CACX,EAGIu4C,EAAkB,SAAUC,EAAGC,GAc/B,OAbAF,EAAkB,KAAyB,gBAEtC,CAAEG,UAAW,cAAgBC,OAAS,SAAUH,EAAGC,GAChDD,EAAEE,UAAYD,CAClB,GAEA,SAAUD,EAAGC,GACT,IAAK,IAAIH,KAAKG,EACNA,EAAEL,GAAmBE,KACrBE,EAAEF,GAAKG,EAAEH,GAGrB,EACGC,EAAgBC,EAAGC,EAC9B,EACO,SAASG,EAAYJ,EAAGC,GAK3B,SAASI,IACL/rD,KAAKgsD,YAAcN,CACvB,QANWC,IAAM,MAAyB,OAANA,IAChC,SAAe,uBAAyBM,OAAON,GAAK,iCAExDF,EAAgBC,EAAGC,GAKnBD,EAAE,MAA0B,OAANC,GAAa,SAAUA,IAAMI,EAAG,MAAoBJ,EAAE,MAAmB,IAAII,EACvG,CAkIO,SAASG,EAAgBC,EAAIC,GAChC,IAAK,IAAItoD,EAAI,EAAGuoD,EAAKD,EAAKroD,OAAQyuC,EAAI2Z,EAAGpoD,OAAQD,EAAIuoD,EAAIvoD,IAAK0uC,IAC1D2Z,EAAG3Z,GAAK4Z,EAAKtoD,GAEjB,OAAOqoD,CACX,C,sFClLWG,EAAa,aACbC,EAAgB,gBAChBC,EAAa,cACbC,EAA0B,uCAC1BC,EAAsB,YACtBC,EAAkB,gBCNlBnlD,EAAa,QACbrC,EAAc,SACdsC,EAAqB,cACrBmlD,EAAyB,oBACzBC,EAAiB,WACjBC,EAAmB,aACnBnD,EAAe,UAIfoD,EAAiB,YACjBC,EAAgB,WAChBC,EAAa,QAEblE,EAAY,OAEZmE,EAAkB,aAClBC,EAAoB,eACpBC,EAAqB,cACrBC,EAAiB,WACjBC,EAAkB,aAClBC,EAAsB,gBACtBC,EAAqB,eACrBC,EAAoB,cACpBC,EAAsB,eACtBC,EAAgB,WAChBC,EAAiB,WACjBC,EAAY,OACZC,EAAwB,iBACxBC,EAAgB,W,6BCjCpB,SAASC,EAAgC3tD,EAAQ8O,EAAK8+C,GACzD,IAAIC,EAAa/+C,EAAIhK,GACjBqyC,EAaD,SAAyBn3C,EAAQoC,GACpC,IAAI0rD,EAUJ,OATI1rD,IAEAA,GAAO,UAAQ,SAASA,KAEf0C,GAAoC,MACzCgpD,GAAY,SAAa1rD,EAAM,EAAG,MAClC,QAAepC,EAAQ,EAAkC,GAA0C,8DAAiH,CAAEoC,KAAMA,IAAQ,IAGrO0rD,GAAa1rD,CACxB,CAzBgB2rD,CAAgB/tD,EAAQ8O,GAEpC,GAAIqoC,EAAMryC,KAAsC+oD,EAAY,CAGxD,IAFA,IAAIpqD,EAAI,EACJuqD,EAAc7W,OACUnrC,IAArB4hD,EAAII,IACPvqD,IACAuqD,GAAc,SAAa7W,EAAO,EAAG,KAAqD8W,EAAYxqD,GAE1G0zC,EAAQ6W,CACZ,CACA,OAAO7W,CACX,CAcO,SAAS+W,EAAmBluD,EAAQ8B,EAAO0oC,GAE9C,IAAI2jB,EASJ,YAVuB,IAAnB3jB,IAAwBA,EAAY,MAEpC1oC,IACA0oC,EAAYA,GAAwB,MACpC1oC,GAAQ,UAAQ,SAASA,KACfgD,GAAoC0lC,IAC1C2jB,GAAa,SAAarsD,EAAO,EAAG0oC,IACpC,QAAexqC,EAAQ,EAAkC,GAAiD,sDAAwDwqC,EAAY,eAAgB,CAAE1oC,MAAOA,IAAS,KAGjNqsD,GAAcrsD,CACzB,CACO,SAASssD,EAAgBpuD,EAAQkV,EAAKpV,GAIzC,OAHI,SAASoV,KACTA,GAAM,QAAeA,EAAKpV,IAEvBuuD,EAAkBruD,EAAQkV,EAAK,KAA+C,GACzF,CACO,SAASo5C,EAAoBtuD,EAAQK,GACxC,IAAIkuD,EAOJ,OANIluD,GACIA,EAAQyE,GAAoC,QAC5CypD,GAAe,SAAaluD,EAAS,EAAG,QACxC,QAAeL,EAAQ,EAAkC,GAA+C,kEAAwH,CAAEK,QAASA,IAAW,IAGvPkuD,GAAgBluD,CAC3B,CAaO,SAASmuD,EAAuBxuD,EAAQ4sC,GAC3C,GAAIA,EAAY,CACZ,IAAI6hB,EAAc,CAAC,GACnB,SAAc7hB,EAAY,SAAU/oC,EAAM/B,GACtC,IAAI,SAASA,KAAU,SAEnB,IACIA,GAAQ,UAAU4qD,GAAwC5qD,EAC9D,CACA,MAAO3B,IACH,QAAeH,EAAQ,EAAkC,GAAmE,+BAAgC,CAAE46B,UAAWz6B,IAAK,EAClL,CAEJ2B,EAAQosD,EAAmBluD,EAAQ8B,EAAO,MAC1C+B,EAAO8pD,EAAgC3tD,EAAQ6D,EAAM4qD,GACrDA,EAAY5qD,GAAQ/B,CACxB,GACA8qC,EAAa6hB,CACjB,CACA,OAAO7hB,CACX,CACO,SAAS8hB,EAAyB1uD,EAAQ2uD,GAC7C,GAAIA,EAAc,CACd,IAAIC,EAAqB,CAAC,GAC1B,SAAcD,EAAc,SAAUE,EAAS/sD,GAC3C+sD,EAAUlB,EAAgC3tD,EAAQ6uD,EAASD,GAC3DA,EAAmBC,GAAW/sD,CAClC,GACA6sD,EAAeC,CACnB,CACA,OAAOD,CACX,CAIO,SAASN,EAAkBruD,EAAQ8wC,EAAOtG,EAAWskB,GACxD,IAAIC,EAQJ,OAPIje,IACAA,GAAQ,UAAQ,SAASA,KACfhsC,GAAoC0lC,IAC1CukB,GAAa,SAAaje,EAAO,EAAGtG,IACpC,QAAexqC,EAAQ,EAAkC8uD,EAAQ,+CAAiDtkB,EAAY,eAAgB,CAAEr3B,KAAM29B,IAAS,IAGhKie,GAAcje,CACzB,CACO,SAASmd,EAAYe,GACxB,IAAIl9B,EAAI,KAAOk9B,EACf,OAAO,SAAUl9B,EAAGA,EAAEhtB,GAAoC,EAC9D,CCtHA,IAAImqD,EAAuB,WAIvB,SAASA,EAAMjvD,EAAQoC,EAAMwqC,EAAY+hB,GACrChvD,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACLsB,KAAM,EACNwqC,WAAY,EACZ+hB,aAAc,GAElB,IAAI/uD,EAAQD,KACZC,EAAMkB,IAAM,EACZlB,EAAM8oD,GAAgCwF,EAAmBluD,EAAQoC,IAASkqD,EAC1E1sD,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,EAC3F,CAGA,OAFAM,EAAME,aAAe,0CACrBF,EAAM/rB,SAAW,YACV+rB,CACX,CApB0B,GCAtBG,EAAuB,WAIvB,SAASA,EAAMpvD,EAAQK,EAASgvD,EAAeziB,EAAY+hB,GACvDhvD,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACLT,QAAS,EACTgvD,cAAe,EACfziB,WAAY,GAEhB,IAAIhtC,EAAQD,KACZC,EAAMkB,IAAM,EACZT,EAAUA,GAAWisD,EACrB1sD,EAAM0pD,GAAsCgF,EAAoBtuD,EAAQK,GACxET,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,GACnFU,IACAzvD,EAAMstD,GAAmDmC,EAEjE,CAGA,OAFAD,EAAMD,aAAe,4CACrBC,EAAMlsB,SAAW,cACVksB,CACX,CAxB0B,GCWnB,SAASE,EAAaC,IACrBC,MAAMD,IAAYA,EAAU,KAC5BA,EAAU,GAGd,IAAI17C,EAhBO,IAeX07C,GAAU,QAAUA,IACU,IAC1BE,EAjBO,IAiBU,SAAUF,EAAU,KAAQ,GAC7ClhD,EAlBO,IAkBU,SAAUkhD,EAAU,KAAe,GACpDG,EAnBO,IAmBW,SAAUH,EAAU,MAAoB,GAC1DI,GAAO,SAAUJ,EAAU,OAK/B,OAJA17C,EAA8C,IAAzCA,EAAG/O,GAA0C,KAAO+O,EAA8C,IAAzCA,EAAG/O,GAA0C,IAAM+O,EAAKA,EACtH47C,EAAMA,EAAI3qD,GAAoC,EAAI,IAAM2qD,EAAMA,EAC9DphD,EAAMA,EAAIvJ,GAAoC,EAAI,IAAMuJ,EAAMA,GAEtDshD,EAAO,EAAIA,EAAO,IAzBf,KAwBXD,EAAOA,EAAK5qD,GAAoC,EAAI,IAAM4qD,EAAOA,GACd,IAAMrhD,EAAM,IAAMohD,EAAM,IAAM57C,CACrF,CCzBA,IAAI+7C,EAA0B,WAI1B,SAASA,EAAS5vD,EAAQoC,EAAM8S,EAAKvJ,EAAYihC,EAAY+hB,EAAcpyB,GACvE58B,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACLsB,KAAM,EACN8S,IAAK,EACL26C,SAAU,EACVjjB,WAAY,EACZ+hB,aAAc,EACdpyB,GAAI,GAER,IAAI38B,EAAQD,KACZC,EAAMkB,IAAM,EACZlB,EAAM28B,GJoFP,SAAwBv8B,EAAQu8B,GACnC,OAAOA,EAAK8xB,EAAkBruD,EAAQu8B,EAAI,IAA6C,IAAwCiwB,KAA2CjwB,CAC9K,CItFmBuzB,CAAe9vD,EAAQu8B,GAClC38B,EAAMsV,IAAMk5C,EAAgBpuD,EAAQkV,GACpCtV,EAAM8oD,GAAgCwF,EAAmBluD,EAAQoC,IAASkqD,EACrEkD,MAAM7jD,KACP/L,EAAM8tD,GAAwC4B,EAAa3jD,IAE/D/L,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,EAC3F,CAGA,OAFAiB,EAAST,aAAe,6CACxBS,EAAS1sB,SAAW,eACb0sB,CACX,CA5B6B,GCDzBG,EAAqC,WAIrC,SAASA,EAAoB/vD,EAAQoC,EAAM8S,EAAK86C,EAAQpjB,EAAY+hB,EAAcsB,GAC9EtwD,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACLsB,KAAM,EACN8S,IAAK,EACL26C,SAAU,EACVK,UAAW,EACXC,eAAgB,EAChBC,YAAa,EACbC,iBAAkB,EAClBC,cAAe,EACf1jB,WAAY,EACZ+hB,aAAc,GAElB,IAAI/uD,EAAQD,KACZC,EAAMkB,IAAM,EACZlB,EAAMsV,IAAMk5C,EAAgBpuD,EAAQkV,GACpCtV,EAAM8oD,GAAgCwF,EAAmBluD,EAAQoC,IAASkqD,EAC1E1sD,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,GACnFsB,IACArwD,EAAM0wD,cAAgBL,EAAYK,cAClC1wD,EAAM8tD,GAAwCuC,EAAYvC,GAC1D9tD,EAAMuwD,eAAiBF,EAAYE,eACnCvwD,EAAMswD,UAAYD,EAAYC,UAC9BtwD,EAAMywD,iBAAmBJ,EAAYI,iBACrCzwD,EAAMwwD,YAAcH,EAAYG,YAExC,CAGA,OAFAL,EAAoBZ,aAAe,wDACnCY,EAAoB7sB,SAAW,0BACxB6sB,CACX,CApCwC,GC+BpCQ,EAAW,0GAsGXC,EAA0B,kCAI1BC,GAA2B,yBAC3BC,GAAW,cACXC,GAAW,QACXC,GAAW,QACXC,GAAkB,eAClBC,GAAc,WACdC,GAAa,UACbC,GAAiB,cACjBC,GAAiB,CACjB,CAAEC,GAvGmB,4GAuGKnL,IAAK,EAAGoL,EAAG,EAAGhgC,GAAI,EAAGigC,GAAI,EAAGC,IAAK,GAC3D,CAAEC,IAON,SAAuBC,GACnB,OAAO,SAAWA,EAAO,WAAa,CAC1C,EAT0BC,IAI1B,SAAyBD,GACrB,OAAOA,EAAMrgB,QAAQ,kBAAmB,cAC5C,EANgDggB,GAjFvB,iGAiF+CnL,IAAK,EAAGoL,EAAG,EAAGhgC,GAAI,EAAGigC,GAAI,GAC7F,CAAEF,GA/CmB,wFA+CKnL,IAAK,EAAGoL,EAAG,EAAGhgC,GAAI,EAAGsgC,IAAKC,IACpD,CAAER,GApBiB,sFAoBKnL,IAAK,EAAG50B,GAAI,EAAGsgC,IAAKC,KAQhD,SAASC,GAAW7vD,EAAO8vD,GACvB,IAAIlmD,EAAS5J,EAiBb,OAhBI4J,KAAW,SAASA,KAChBlJ,MAAQA,KAAKkqD,IACbhhD,EAASlJ,KAAKkqD,GAAwC5qD,IAClD8vD,GAAqBlmD,GAAqB,OAAXA,IAE3BA,GADA,SAAW5J,EAAM0qD,IACR1qD,EAAM0qD,KAGN,GAAK1qD,IAKtB4J,EAAc5J,EAAQ,+BAGvB4J,GAAU,EACrB,CACA,SAASmmD,GAAeloD,EAAUmoD,GAC9B,IAAIC,EAAapoD,EAmBjB,OAlBIA,IACIooD,KAAe,SAASA,KACxBA,EAAapoD,EAASonD,KAAepnD,EAASqnD,KAAmBe,GAGjEA,KAAe,SAASA,KAExBA,EAAaJ,GAAWI,GAAY,IAEpCpoD,EAAmB,WAEnBooD,EAAaA,EAAa,MAAQpoD,EAAmB,UAAK,IAAM,KAAOA,EAAiB,QAAK,KAAO,KAAOA,EAAgB,OAAK,OAIpImoD,GAA2B,WAAdA,GAAwC,WAAdA,GAAwC,UAAdA,IAAsE,KAA7C,SAAWC,GAAc,GAAID,KACvHC,EAAaD,EAAY,KAAOC,GAE7BA,GAAc,EACzB,CAuBA,SAASC,GAAgBh9C,GACrB,OAAOA,GAAWA,EAAQ4iC,MAAO,SAAS5iC,EAAQ4iC,MAAQ5iC,EAAQ9R,MAAO,SAAQ8R,EAAQ9R,IAC7F,CACA,SAAS+uD,GAAiBC,GACtB,IAAIta,EAAMsa,GAAc,IACnB,SAASta,KAENA,GADA,SAASA,EAAIgZ,KACPhZ,EAAIgZ,IAGJ,GAAKhZ,GAGnB,IAAIua,EAAQva,EAAIzwC,GAAgC,MAChD,MAAO,CACHywC,IAAKA,EACL10C,IAAKivD,EAEb,CAiBA,SAASC,GAAsBC,GAC3B,IAAIr9C,EAAU,KACd,GAAIq9C,EACA,IAGI,GAAIA,EAASzB,IAET57C,EAAUi9C,GAAiBI,EAASzB,UAEnC,GAAIyB,EAAS1B,KAAa0B,EAAS1B,IAAUC,IAE9C57C,EAAUi9C,GAAiBI,EAAS1B,IAAUC,UAE7C,GAAIyB,EAAoB,WAAKA,EAASz3B,UAAUg2B,IACjD57C,EAAUi9C,GAAiBI,EAASz3B,UAAUg2B,UAE7C,GAAIoB,GAAgBK,GACrBr9C,EAAUq9C,OAET,GAAIL,GAAgBK,EAASxB,KAC9B77C,EAAUq9C,EAASxB,SAElB,IAAI,aAAe,WAAmB,OAAKwB,EAAStB,IAErD/7C,EAzChB,SAAwBs9C,GAGpB,IAFA,IAAIC,EAAQ,GACRC,EAAQF,EAAanrD,GAAgC,MAChD6C,EAAK,EAAGA,EAAKwoD,EAAM1tD,GAAmCkF,IAAM,CACjE,IAAIyoD,EAAQD,EAAMxoD,GACdwoD,EAAMxoD,EAAK,KACXyoD,GAAS,IAAMD,EAAMxoD,EAAK,GAC1BA,KAEJuoD,EAAM7iD,KAAK+iD,EACf,CACA,MAAO,CACH7a,IAAK0a,EACLpvD,IAAKqvD,EAEb,CA0B0BG,CAAeL,EAAS/I,SAEjC,GAAI+I,EAAiB,QAAKA,EAAS70C,OAAOozC,IAE3C57C,EAAUi9C,GAAiBI,EAAS70C,OAAOozC,UAE1C,IAAI,SAASyB,GACdr9C,EAAUi9C,GAAiBI,OAE1B,CACD,IAAIN,EAAaM,EAAStB,KAAesB,EAASrB,KAAmB,IACjE,SAASqB,EAASvB,OACdiB,IACAA,GAAc,MAElBA,GAAc,SAAWM,EAASvB,KAElCiB,IACA/8C,EAAUi9C,GAAiBF,GAEnC,CACJ,CACA,MAAO5xD,GAGH6U,EAAUi9C,GAAiB9xD,EAC/B,CAEJ,OAAO6U,GAAW,CACd4iC,IAAK,GACL10C,IAAK,KAEb,CAgEA,SAASyvD,GAAcb,GAEnB,IAAIc,EAAW,GACf,GAAId,KACAc,EAAWd,EAAUc,UAAYd,EAAUpJ,IAAiC,IAExE,IACI,IACImK,EADgB,wBACUnf,KAAK,EAAYiY,YAAYa,MAC3DoG,EAAYC,GAAWA,EAAQ/tD,GAAoC,EAAK+tD,EAAQ,GAAK,EACzF,CACA,MAAO1yD,GAEP,CAGR,OAAOyyD,CACX,CAKO,SAASE,GAAiBT,GAC7B,GAAIA,EACA,IACI,KAAK,SAASA,GAAW,CACrB,IAAIP,EAAYa,GAAcN,GAC1B3mD,EAASimD,GAAWU,GAAU,GASlC,OARK3mD,GAAqB,OAAXA,IACP2mD,EAAS1B,MAGTmB,EAAYa,GADZN,EAAWA,EAAS1B,MAGxBjlD,EAASimD,GAAWU,GAAU,IAEI,KAAlC,SAAW3mD,EAAQomD,IAAkC,WAAdA,EAChCA,EAAY,IAAMpmD,EAEtBA,CACX,CACJ,CACA,MAAOvL,GAEP,CAGJ,MAAO,IAAMkyD,GAAY,GAC7B,CACA,IAAIU,GAA2B,WAI3B,SAASA,EAAU/yD,EAAQ46B,EAAWgS,EAAY+hB,EAAcU,EAAe9yB,GAC3E58B,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACLkyD,WAAY,EACZ3D,cAAe,EACfziB,WAAY,EACZ+hB,aAAc,GAElB,IAAI/uD,EAAQD,KACZC,EAAMkB,IAAM,EArOpB,SAA8BgB,GAC1B,IACI,IAAI,SAASA,GACT,MAAQ,QAASA,GAAS,eAAgBA,GAAS,eAAgBA,CAE3E,CACA,MAAO3B,GAEP,CACA,OAAO,CACX,CA4Na8yD,CAAqBr4B,IAkBtBh7B,EAAMqtD,GAA4CryB,EAAUqyB,IAA6C,GACzGrtD,EAAMitD,GAA4CjyB,EAAUiyB,GAC5DjtD,EAAMktD,GAAgDlyB,EAAUkyB,GAC5DlyB,EAAUsyB,KACVttD,EAAMstD,GAAmDtyB,EAAUsyB,IAEnEtyB,EAAU2B,KACV38B,EAAM28B,GAAK3B,EAAU2B,GACrB3B,EAAUiyB,GAA0CtwB,GAAK3B,EAAU2B,IAEnE3B,EAAUuyB,KACVvtD,EAAMutD,GAAiDvyB,EAAUuyB,KAGhE,SAAkBvyB,EAAUs4B,YAC7BtzD,EAAMszD,SAAWt4B,EAAUs4B,YAhC1BtmB,IACDA,EAAa,CAAC,GAEdrQ,IACAqQ,EAAWrQ,GAAKA,GAEpB38B,EAAMqtD,GAA4C,CAACkG,GAAwBnzD,EAAQ46B,EAAWgS,IAC9FhtC,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,GACnFU,IACAzvD,EAAMstD,GAAmDmC,GAEzD9yB,IACA38B,EAAM28B,GAAKA,GAsBvB,CAwDA,OAvDAw2B,EAAUK,oBAAsB,SAAU/yD,EAAS6U,EAAKm+C,EAAYC,EAAcpT,EAAO97C,EAAKmuD,EAAOgB,GACjG,IAAIzB,EAAYa,GAAczS,GAAS97C,GAAO/D,GAC9C,MAAO,CACHA,QAASwxD,GAAexxD,EAASyxD,GACjC58C,IAAKA,EACLm+C,WAAYA,EACZC,aAAcA,EACdpT,MAAO4S,GAAiB5S,GAAS97C,GAAO/D,GACxC+D,IAAK0uD,GAAiB1uD,GAAO/D,GAC7BuyD,SAAUd,EACV0B,aAAcpB,GAAsBG,GAASrS,GAAS97C,GACtDmvD,SAAUA,EAElB,EACAR,EAAUU,oBAAsB,SAAUzzD,EAAQ46B,EAAWgS,EAAY+hB,GACrE,IAAIqE,EAAap4B,EAAUqyB,KACpB,SAAOryB,EAAUqyB,GAA2C,SAAUphD,GAAM,OAqHpF,SAAuC7L,EAAQ46B,GAClD,IAAI84B,GAAe,SAAQ94B,EAAUwyB,MAC9B,SAAOxyB,EAAUwyB,GAA8C,SAAUmE,GAAS,OAuG7F,SAAkCA,GAC9B,IAAI/vD,EAUJ,OAAOmyD,KATYnyD,EAAK,CAAC,GAClBisD,GAAmDmG,GACtDpyD,EAAGqyD,MAAQtC,EAAMsC,MACjBryD,EAAGqxB,OAAS0+B,EAAM1+B,OAClBrxB,EAAGsyD,SAAWvC,EAAMjE,GACpB9rD,EAAGuyD,SAAWxC,EAAMhE,GACpB/rD,EAAGwyD,KAAOzC,EAAM/D,GAChBhsD,EAAGyyD,YAAc,EACjBzyD,GAER,CAnHoG0yD,CAAyB3C,EAAQ,IAC1H32B,EAAUwyB,GAEjB,OADuB+F,GAAwBnzD,GAAQ,SAAS,QAAS,CAAC,EAAG46B,GAAY,CAAE84B,YAAaA,IAE5G,CA3HkGS,CAA8Bn0D,EAAQ6L,EAAK,GAErI,OADoB,IAAIknD,EAAU/yD,GAAQ,SAAS,QAAS,CAAC,EAAG46B,GAAY,CAAEo4B,WAAYA,IAAepmB,EAAY+hB,EAEzH,EACAoE,EAAUqB,UAAUC,YAAc,WAC9B,IAAI7yD,EAAK7B,KAAMqzD,EAAaxxD,EAAGwxD,WAAYpmB,EAAaprC,EAAGorC,WAAY+hB,EAAentD,EAAGmtD,aAAcU,EAAgB7tD,EAAG6tD,cAAeiF,EAAe9yD,EAAG8yD,aAAc/3B,EAAK/6B,EAAG+6B,GAAI22B,EAAW1xD,EAAG0xD,SAInM,MAAO,CACHpyD,IAAK,MACLkyD,WAL4BA,aAAsBxH,QAC/C,SAAOwH,EAAY,SAAUp4B,GAAa,OAAOA,EAAUy5B,aAAe,SAC1EroD,EAIHqjD,cAAeA,EACfziB,WAAYA,EACZ+hB,aAAcA,EACd2F,aAAcA,EACd/3B,GAAIA,EACJ22B,SAAUA,EAElB,EAIAH,EAAUwB,sBAAwB,SAAUl0D,EAASuyD,EAAUkB,EAAUC,EAAU/+C,EAASg/C,GACxF,IAAIxyD,EACJ,MAAO,CACHwxD,WAAY,EACPxxD,EAAK,CAAC,EACHA,EAAG6rD,IAA+C,EAClD7rD,EAAGnB,QAAUA,EACbmB,EAAG+wD,MAAQv9C,EACXxT,EAAGoxD,SAAWA,EACdpxD,IAGhB,EACAuxD,EAAU5D,aAAe,8CACzB4D,EAAU7vB,SAAW,gBACrB6vB,EAAUyB,YAAc1B,GACjBC,CACX,CA3G8B,GA6G1B0B,IAA0B,SAAU,CACpCl4B,GAAI,EACJm4B,QAAS,EACT9B,SAAU,EACVvyD,QAAS,EACTs0D,aAAc,EACdpC,MAAO,EACPmB,YAAa,IAEjB,SAASkB,KACL,IAAIh1D,EAAQD,KACR+zD,GAAc,SAAQ9zD,EAAMwtD,MACzB,SAAOxtD,EAAMwtD,GAA8C,SAAUmE,GAAS,OAiMlF,SAAiCA,GACpC,MAAO,CACHsC,MAAOtC,EAAMsC,MACbhhC,OAAQ0+B,EAAM1+B,OACdihC,SAAUvC,EAAMjE,GAChByG,SAAUxC,EAAMhE,GAChByG,KAAMzC,EAAM/D,GAEpB,CAzMgGqH,CAAwBtD,EAAQ,GAU5H,MATgC,CAC5Bh1B,GAAI38B,EAAM28B,GACVm4B,QAAS90D,EAAM80D,QACf9B,SAAUhzD,EAAMotD,GAChB3sD,QAAST,EAAM0pD,GACfqL,aAAc/0D,EAAMytD,GACpBkF,MAAO3yD,EAAMgxD,IACb8C,YAAaA,QAAe1nD,EAGpC,CACO,SAASmnD,GAAwBnzD,EAAQ46B,EAAWgS,GACvD,IAAIprC,EAGAoxD,EACAvyD,EACAs0D,EACAG,EACApB,EACJ,GAjXJ,SAAqC5xD,GACjC,IACI,IAAI,SAASA,GACT,MAAO,iBAAkBA,GAAS,aAAcA,CAExD,CACA,MAAO3B,GAEP,CACA,OAAO,CACX,CAuWS40D,CAA4Bn6B,GAwB7Bg4B,EAAWh4B,EAAUoyB,GACrB3sD,EAAUu6B,EAAU0uB,GACpBwL,EAAWl6B,EAAUg2B,IACrB8C,EAAc94B,EAAUwyB,IAAgD,GACxEuH,EAAe/5B,EAAUyyB,OA5BgB,CACzC,IAAInN,EAAQtlB,EACRx2B,EAAM87C,GAASA,EAAM97C,KACpB,SAAQ87C,KACTA,EAAQA,EAAMyQ,KAAavsD,GAAO87C,GAEtC0S,EAAW1E,EAAmBluD,EAAQ2yD,GAAczS,KAAWoM,EAC/DjsD,EAAUiuD,EAAoBtuD,EAAQ6xD,GAAej3B,GAAaslB,EAAO0S,KAActG,EACvF,IAAIiG,EAAQ33B,EAAUi2B,KAAoBuB,GAAsBx3B,GAChE84B,EA3PR,SAAqBnB,GACjB,IAAImB,EACAsB,EAASzC,EAAMrvD,IACnB,GAAI8xD,GAAUA,EAAOlwD,GAAoC,EAAG,CACxD4uD,EAAc,GACd,IAAIuB,EAAU,EACVC,GAAoB,EACpBC,EAAqB,EAiBzB,IAhBA,SAAWH,EAAQ,SAAUzD,GACzB,GAAI2D,GA0ThB,SAAuB3D,GACnB,IAAI7lD,GAAS,EACb,GAAI6lD,IAAS,SAASA,GAAQ,CAC1B,IAAI6D,GAAe,SAAQ7D,GACvB6D,IACA1pD,EAAS6kD,EAASnhD,KAAKgmD,GAE/B,CACA,OAAO1pD,CACX,CAnUqC2pD,CAAc9D,GAAQ,CAC3C,IAAI+D,GAAW,SAAS/D,GAExB2D,GAAoB,EACpB,IAAIK,EAuUb,SAA4BhE,EAAOsC,GACtC,IAAIryD,EACA8zD,EACJ,GAAI/D,IAAS,SAASA,KAAU,SAAQA,GAAQ,EAChC/vD,EAAK,CAAC,GACXisD,GAAmDmG,GACtDpyD,EAAGqyD,MAAQA,EACXryD,EAAGsyD,UAAW,SAAQvC,GACtB/vD,EAAGqxB,OAAS69B,GACZlvD,EAAGuyD,SAAW,GACdvyD,EAAGwyD,KAAO,EACVxyD,EAAGyyD,YAAc,EAPrBqB,EAQI9zD,EAEJ,IADA,IAAI8R,EAAM,EACHA,EAAM29C,GAAensD,IAAmC,CAC3D,IAAI0wD,EAAWvE,GAAe39C,GAC9B,GAAIkiD,EAASlE,MAAQkE,EAASlE,IAAIC,GAC9B,MAEAiE,EAAShE,MACTD,EAAQiE,EAAShE,IAAID,IAGzB,IAAIkE,EAAUlE,EAAM3E,GAAgC4I,EAAStE,IAC7D,GAAIuE,GAAWA,EAAQ3wD,IAAqC0wD,EAASzP,IAAK,CAClEyP,EAASrE,IACTmE,EAASziC,QAAS,SAAQ4iC,EAAQD,EAASrE,IAAMT,KAEjD8E,EAAS/D,IAET+D,EAAS/D,IAAI6D,EAAUE,EAAUC,GAE5BD,EAASrkC,KACVqkC,EAASpE,IACTkE,EAAS/H,IAAyC,SAAQkI,EAAQD,EAASrkC,KAAO,IAClFmkC,EAAS9H,GAAgC5hD,UAAS,SAAQ6pD,EAAQD,EAASpE,KAAO,MAAQ,GAG1FsE,GAAeJ,EAAUG,EAAQD,EAASrkC,KAAO,KAIzD,KACJ,CACA7d,GACJ,CACJ,CACA,OAAOqgD,GAA0B2B,EACrC,CAvXkCK,CAAmBL,EAAUL,GAC3CM,IACAJ,GAAsBI,EAAYxI,GAClC2G,EAAYhkD,KAAK6lD,GACjBN,IAER,CACJ,GAIIE,EADgC,MAOhC,IALA,IAAIS,EAAO,EACPC,EAAQnC,EAAY5uD,GAAoC,EACxDgxD,EAAO,EACPC,EAAeH,EACfI,EAAgBH,EACbD,EAAOC,GAAO,CAKjB,IADAC,GAFYpC,EAAYkC,GAAM7I,GAClB2G,EAAYmC,GAAO9I,IAVH,MAYc,CAEtC,IAAIkJ,EAAUD,EAAgBD,EAAe,EAC7CrC,EAAY/oD,OAAOorD,EAAcE,GACjC,KACJ,CAEAF,EAAeH,EACfI,EAAgBH,EAChBD,IACAC,GACJ,CAER,CACA,OAAOnC,CACX,CAyMsBwC,CAAY3D,IAEtB,SAAQmB,KACR,SAAOA,EAAa,SAAUnC,GAC1BA,EAAMjE,GAAwCY,EAAmBluD,EAAQuxD,EAAMjE,IAC/EiE,EAAMhE,GAAyCW,EAAmBluD,EAAQuxD,EAAMhE,GACpF,GAEJuH,ENhhBD,SAA+B90D,EAAQ46B,GAC1C,IAAIu7B,EACJ,GAAIv7B,EAAW,CAEX,IAAI94B,EAAQ,GAAK84B,EACb94B,EAAMgD,GAAoC,QAC1CqxD,GAAiB,SAAar0D,EAAO,EAAG,QACxC,QAAe9B,EAAQ,EAAkC,GAAiD,oEAA4H,CAAE46B,UAAWA,IAAa,GAExQ,CACA,OAAOu7B,GAAkBv7B,CAC7B,CMqgBmBw7B,CAAsBp2D,EA/QzC,SAA2BwzD,GACvB,IAAIjB,EAAQ,GASZ,OARIiB,IAEIjB,EADAiB,EAAatwD,IACLswD,EAAatwD,IAAI49B,KAAK,MAGtB0yB,EAAa5b,KAAO,IAG7B2a,CACX,CAoQiD8D,CAAkB9D,IAC3DoC,GAAe,SAAQjB,IAAgBA,EAAY5uD,GAAoC,EACnF8nC,IACAA,EAAWogB,GAAyCpgB,EAAWogB,IAA0C4F,EAEjH,CAQA,OAAOpxD,EAAK,CAAC,GACNisD,GAAmDgH,GACtDjzD,EAAG+6B,QAvCHA,EAwCA/6B,EAAGkzD,aAvCHA,EAwCAlzD,EAAGoxD,SAAWA,EACdpxD,EAAGnB,QAAUA,EACbmB,EAAG6rD,GAA+CsH,EAClDnzD,EAAG+wD,MAAQuC,EACXtzD,EAAGkyD,YAAcA,EACjBlyD,EAAG6yD,YAAcO,GACjBpzD,CACR,CAQA,SAASk0D,GAAeJ,EAAUvB,GAC9B,IAAIuC,EAAUvC,EAASnH,GAAgC4D,GACvD,GAAI8F,GAAWA,EAAQxxD,IAAqC,EACxDwwD,EAAS/H,GAAyC+I,EAAQ,GAC1DhB,EAAS9H,GAAgC5hD,SAAS0qD,EAAQ,QAEzD,CACD,IAAIC,EAASxC,EAASnH,GAAgC6D,IAClD8F,GAAUA,EAAOzxD,IAAqC,GACtDwwD,EAAS/H,GAAyCgJ,EAAO,GACzDjB,EAAS9H,GAAgC5hD,SAAS2qD,EAAO,KAGzDjB,EAAS/H,GAAyCwG,CAE1D,CACJ,CACA,SAASrC,GAAgB4D,EAAUE,EAAUC,GACzC,IAAIe,EAAWlB,EAAS/H,GACpBiI,EAASrkC,IAAMskC,GAAWA,EAAQ3wD,GAAoC0wD,EAASrkC,KAC3EqkC,EAASpE,IAAMqE,EAAQ3wD,GAAoC0wD,EAASpE,IACpEoF,GAAW,SAAQf,EAAQD,EAASrkC,KAAO,IAC3CmkC,EAAS9H,GAAgC5hD,UAAS,SAAQ6pD,EAAQD,EAASpE,KAAO,MAAQ,GAG1FoF,GAAW,SAAQf,EAAQD,EAASrkC,KAAO,KAG/CqlC,GACAd,GAAeJ,EAAUkB,EAEjC,CAWA,IAAI5C,IAA2B,SAAU,CACrCC,MAAO,EACPhhC,OAAQ,EACRihC,SAAU,EACVC,SAAU,EACVC,KAAM,IAgEV,SAASL,GAA0BpC,GAC/B,IAAI0C,EAtsBmB,GA+sBvB,OARI1C,IACA0C,GAAe1C,EAAM1+B,OAAO/tB,GAC5BmvD,GAAe1C,EAAMuC,SAAShvD,GAC9BmvD,GAAe1C,EAAMwC,SAASjvD,GAC9BmvD,GAAe1C,EAAMsC,MAAMlxD,WAAWmC,GACtCmvD,GAAe1C,EAAMyC,KAAKrxD,WAAWmC,GACrCysD,EAAMxE,GAAgDkH,GAEnD1C,CACX,CCtuBA,IAAIkF,GACA,WAII92D,KAAKuvD,eAAiB,CAClB9sD,KAAM,EACNM,KAAM,EACNZ,MAAO,EACP40D,MAAO,EACProD,IAAK,EACLyD,IAAK,EACL6kD,OAAQ,GAKZh3D,KAAK+C,KAAO,CAChB,ECdAk0D,GAAwB,WAIxB,SAASA,EAAO52D,EAAQoC,EAAMN,EAAO40D,EAAOroD,EAAKyD,EAAK6kD,EAAQ/pB,EAAY+hB,GACtEhvD,KAAKuvD,eAAiB,CAClBpuD,IAAK,EACL+1D,QAAS,EACTjqB,WAAY,GAEhB,IAAIhtC,EAAQD,KACZC,EAAMkB,IAAM,EACZ,IAAIg2D,EAAY,IAAIL,GACpBK,EAAwC,MAAIJ,EAAQ,EAAIA,OAAQ1qD,EAChE8qD,EAAUhlD,IAAM09C,MAAM19C,IAAgB,OAARA,OAAe9F,EAAY8F,EACzDglD,EAAUzoD,IAAMmhD,MAAMnhD,IAAgB,OAARA,OAAerC,EAAYqC,EACzDyoD,EAAUpO,GAAgCwF,EAAmBluD,EAAQoC,IAASkqD,EAC9EwK,EAAUh1D,MAAQA,EAClBg1D,EAAUH,OAASnH,MAAMmH,IAAsB,OAAXA,OAAkB3qD,EAAY2qD,EAClE/2D,EAAMi3D,QAAU,CAACC,GACjBl3D,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,EAC3F,CAGA,OAFAiI,EAAOzH,aAAe,2CACtByH,EAAO1zB,SAAW,aACX0zB,CACX,CA1B2B,GCFvBG,IAAY,YAAiB,CAAC,EAC9BC,GAAiB,EAGjBC,GAAqB,CAAC,KAAM,KAAM,KAAM,KAAM,MA6C3C,SAASC,GAAahiD,EAAKiiD,GAC9B,IAAIC,EASD,SAA0BliD,EAAKiiD,GAClC,IAAIzrD,EAAS,KACb,GAAIwJ,EAAK,CACL,IAAIyhC,EAAQzhC,EAAI03C,GAAgC,gDAChD,GAAa,MAATjW,GAAiBA,EAAM7xC,GAAoC,IAAK,SAAS6xC,EAAM,KAAOA,EAAM,GAAG7xC,GAAoC,IACnI4G,EAASirC,EAAM,IAAM,GACjBwgB,GAAYxgB,EAAM7xC,GAAoC,GAAG,CACzD,IAAIw1B,GAAYqc,EAAM,IAAM,IAAIvvC,KAC5BiwD,EAAO1gB,EAAM,IAAM,IAEN,SAAbrc,GAAgC,QAAT+8B,GAGL,UAAb/8B,GAAiC,SAAT+8B,KAF7BA,EAAO,IAKX3rD,GAAU2rD,CACd,CAER,CACA,OAAO3rD,CACX,CA9BmB4rD,CAAiBpiD,EAAKiiD,IAAa,GAClD,GAAIC,EAAU,CACV,IAAIzgB,EAAQygB,EAASxK,GAAgC,+CACrD,GAAa,MAATjW,GAAiBA,EAAM7xC,GAAoC,IAAK,SAAS6xC,EAAM,KAAOA,EAAM,GAAG7xC,GAAoC,EACnI,OAAO6xC,EAAM,IAAMA,EAAM,IAAM,GAEvC,CACA,OAAOygB,CACX,CCpDA,IAAIG,GAAqB,CACrBnL,EAA0BC,EAC1B,8CAAgDA,EAChD,2CAA6CA,GAG1C,SAASmL,GAAsCv4D,GAClD,OAAwG,KAAjG,SAAWs4D,GAAoBt4D,EAAYmI,KACtD,CCZA,IAAIqwD,GAAsC,WAItC,SAASA,EAAqBz3D,EAAQu8B,EAAIm7B,EAAaC,EAAa71D,EAAO81D,EAASC,EAAYhlC,EAAQilC,EAAYC,EAAoBnrB,EAAY+hB,QACxH,IAApBmJ,IAAyBA,EAAa,QAC1Cn4D,KAAKuvD,eAAiB,CAClB3yB,GAAI,EACJz7B,IAAK,EACLsB,KAAM,EACNy1D,WAAY,EACZhI,SAAU,EACV+H,QAAS,EACTzkD,KAAM,EACN3E,OAAQ,EACR3L,KAAM,EACN+pC,WAAY,EACZ+hB,aAAc,EACdjsD,KAAM,EACNZ,MAAO,EACP40D,MAAO,EACProD,IAAK,EACLyD,IAAK,EACL6kD,OAAQ,EACRqB,eAAgB,EAChBC,iBAAkB,EAClBN,YAAa,EACbO,mBAAoB,GAExB,IAAIt4D,EAAQD,KACZC,EAAMkB,IAAM,EACZlB,EAAM28B,GAAKA,EACX38B,EAAM8tD,GAAwC4B,EAAaxtD,GAC3DlC,EAAMg4D,QAAUA,EAChBh4D,EAAMi4D,WAAaA,EAAa,GAChCj4D,EAAMiD,KAAOqrD,EAAmBluD,EAAQ83D,GACxC,IAAIK,ED4DL,SAAuCn4D,EAAQ03D,EAAa7kC,EAAQ8kC,GACvE,IAAInpD,ED9FoB0G,EACpBkjD,EACAC,EACAC,EC2FQl2D,EAAOu1D,EAAaxkD,EAAOwkD,EACvC,GAAID,GAAeA,EAAY5yD,GAAoC,EAAG,CAClE,IAAIyzD,GDhGgBrjD,ECgGQwiD,ED7F5BY,GADAD,EAAcpB,IADdmB,EAAYpB,IAGXD,GAAUyB,cAILH,EAAYD,KAElBE,EAAaD,EAAYD,GAAarB,GAAUyB,cAAc,MAJ9DF,EAAa,CAAEj2B,KAAM60B,GAAahiD,GAAK,IAM3CojD,EAAWG,KAAOvjD,IAElBkjD,GACiBC,EAAYvzD,KACzBszD,EAAY,GAEhBpB,GAAiBoB,EACVE,GC+EH,GADA9pD,EAAS+pD,EAAUl2B,MACdjgC,EACD,GAAuD,MAAnDm2D,EAAU5L,GAA+C,CACzD,IAAI+L,EAAqE,IAAzDH,EAAUI,SAAS7zD,GAA2C,IAAMyzD,EAAU5L,GACnE,MAAvB+L,EAAS/tB,OAAO,KAChB+tB,EAAW,IAAMA,GAErBvlD,EAAOolD,EAAU5L,GACjBvqD,EAAO8rD,EAAmBluD,EAAQ6yB,EAASA,EAAS,IAAM6lC,EAAWA,EACzE,MAEIt2D,EAAO8rD,EAAmBluD,EAAQ03D,EAG9C,MAEIlpD,EAASmpD,EACTv1D,EAAOu1D,EAEX,MAAO,CACHnpD,OAAQA,EACRpM,KAAMA,EACN+Q,KAAMA,EAEd,CCxF+BylD,CAA8B54D,EAAQ03D,EAAa7kC,EAAQ8kC,GAClF/3D,EAAMuT,KAAOi7C,EAAgBpuD,EAAQ23D,IAAgBQ,EAAiBhlD,KACtEvT,EAAM4O,OAAS0/C,EAAmBluD,EAAQm4D,EAAiB3pD,QACvDupD,IACAn4D,EAAM4O,OAAS,GAAGgiB,OAAO5wB,EAAM4O,OAAQ,OAAOgiB,OAAOunC,IAEzDn4D,EAAM8oD,GAAgCwF,EAAmBluD,EAAQm4D,EAAiBzP,IAClF9oD,EAAMitD,GAA4C2B,EAAuBxuD,EAAQ4sC,GACjFhtC,EAAMktD,GAAgD4B,EAAyB1uD,EAAQ2uD,EAC3F,CAGA,OAFA8I,EAAqBtI,aAAe,qDACpCsI,EAAqBv0B,SAAW,uBACzBu0B,CACX,CAjDyC,G,gCCLzC,SAASoB,GAAerqD,EAAQic,IAC5B,SAASjc,EAAQ,KAAM,KAAMic,EACjC,C,0BCAWquC,IAA+B,QAAgB,CACtDC,aAAc,EACdC,eAAgB,ICChBC,QAAwBjtD,EACxBktD,GAAiB,GAiBrB,SAASC,GAA0BC,GAC/B,IACI,IAAI,UAAkB,YAClB,OAAO,KAEX,IAAI/lC,GAAM,IAAK4G,MAAMuyB,KACjB6M,GAAU,SAAcD,IAAgBN,GAAYC,aAAe,eAAiB,kBACpF9pD,EAASiqD,GAAiB7lC,EAC9BgmC,EAAQC,QAAQrqD,EAAQokB,GACxB,IAAIkmC,EAAOF,EAAQG,QAAQvqD,KAAYokB,EAEvC,GADAgmC,EAAQ5M,GAA2Cx9C,IAC9CsqD,EACD,OAAOF,CAEf,CACA,MAAOz+B,GAEP,CACA,OAAO,IACX,CAKA,SAAS6+B,KACL,OAAIC,KACOP,GAA0BL,GAAYE,gBAE1C,IACX,CAsEO,SAASU,GAAwBC,GAIpC,OAHIA,QAAmC3tD,IAA1BitD,MACTA,KAA0BE,GAA0BL,GAAYE,iBAE7DC,EACX,CAUO,SAASW,GAAqB55D,EAAQoC,GACzC,IAAIi3D,EAAUI,KACd,GAAgB,OAAZJ,EACA,IACI,OAAOA,EAAQG,QAAQp3D,EAC3B,CACA,MAAOjC,GACH84D,IAAwB,GACxB,QAAej5D,EAAQ,EAAkC,EAA6D,4CAA6C,SAAiBG,GAAI,CAAEy6B,WAAW,SAAQz6B,IACjN,CAEJ,OAAO,IACX,CACO,SAAS05D,GAAqB75D,EAAQoC,EAAM+Q,GAC/C,IAAIkmD,EAAUI,KACd,GAAgB,OAAZJ,EACA,IAEI,OADAA,EAAQC,QAAQl3D,EAAM+Q,IACf,CACX,CACA,MAAOhT,GACH84D,IAAwB,GACxB,QAAej5D,EAAQ,EAAkC,EAA8D,6CAA8C,SAAiBG,GAAI,CAAEy6B,WAAW,SAAQz6B,IACnN,CAEJ,OAAO,CACX,CCjKO,IAAI,IAAkC,QAAe,CACxD25D,qBAAsB,CAAC,EAA8C,mBACrEC,wBAAyB,CAAC,EAAiD,SAC3EC,0BAA2B,CAAC,EAAmD,iBAC/EC,gBAAiB,CAAC,EAAyC,cAC3DC,kBAAmB,CAAC,EAA2C,eAC/DC,iBAAkB,CAAC,EAA0C,cAC7DC,iBAAkB,CAAC,EAA0C,eAC7DC,6BAA8B,CAAC,EAAsD,SACrFC,8BAA+B,CAAC,EAAuD,qB,4ECFpF,SAASC,GAAcphD,EAAU0G,GACpC,IACI,GAAI1G,GAAyB,KAAbA,EAAiB,CAC7B,IAAIzN,GAAS,UAAUuT,MAAM9F,GAC7B,GAAIzN,GAAUA,EAAO,QAAoDA,EAAO,QAAoDA,EAAO8uD,eACvI9uD,EAAO+uD,cAAgB/uD,EAAO8uD,gBAAkB9uD,EAAOwpB,OAAO,OAC9D,OAAOxpB,CAEf,CACJ,CACA,MAAOvL,IACH,QAAe0f,EAAS,EAAmC,GAAqD,+BAAiC1f,EAAE,SAAiC,SAAQA,IAAK,CAC7LgZ,SAAUA,GAElB,CACA,OAAO,IACX,C,0BCtBA,SAASuhD,GAAYC,GACjB,IAAIC,EAAS,MAAQD,EAAW,IAChC,OAAO,SAAUv4D,GACb,OAAOw4D,EAASx4D,CACpB,CACJ,CACA,IAAIy4D,GAAiBH,GAAY,eAC7BI,GAAYJ,GAAY,UACxBK,GAAcL,GAAY,YAC1BM,GAAeN,GAAY,aAC3BO,GAAaP,GAAY,WACzBQ,GAAUR,GAAY,QACtBS,GAAWT,GAAY,SACvBU,GAAcV,GAAY,YAC1BW,GAAgC,SAAU97D,GAE1C,SAAS87D,IACL,OAAO97D,EAAOG,KAAKC,OAASA,IAChC,CACA,OAJA,QAAU07D,EAAgB97D,GAInB87D,CACX,CANmC,EAMjC,SAAyB,CACvBC,mBAAoBT,GAAe,OACnCU,iBAAkBV,GAAe,SACjCW,kBAAmBX,GAAe,UAClCY,cAAeZ,GAAe,iBAC9Ba,iBAAkBb,GAAe,SACjCc,SAAUb,GAAU,MACpBc,SAAUd,GAAU,MACpBe,eAAgBf,GAAU,YAC1BgB,aAAchB,GAAU,UACxBiB,YAAajB,GAAU,SACvBkB,mBAAoBlB,GAAU,gBAC9BmB,cAAenB,GAAU,WACzBoB,kBAAmBpB,GAAU,eAC7BqB,cAAerB,GAAU,WACzBsB,SAAUtB,GAAU,MACpBuB,gBAAiBvB,GAAU,aAC3BwB,mBAAoBxB,GAAU,gBAC9ByB,eAAgBzB,GAAU,YAC1B0B,uBAAwB1B,GAAU,oBAClC2B,WAAY3B,GAAU,QACtB4B,kBAAmB5B,GAAU,eAC7B6B,aAAc7B,GAAU,UACxB8B,cAAe9B,GAAU,WACzB+B,qBAAsB/B,GAAU,kBAChCgC,WAAY/B,GAAY,MACxBgC,gBAAiBhC,GAAY,WAC7BiC,iBAAkBjC,GAAY,YAC9BkC,aAAclC,GAAY,QAC1BmC,YAAalC,GAAa,MAC1BmC,cAAenC,GAAa,QAC5BoC,kBAAmBpC,GAAa,YAChCqC,gBAAiBrC,GAAa,UAC9BsC,yBAA0BtC,GAAa,mBACvCuC,2BAA4BvC,GAAa,qBACzCwC,UAAWvC,GAAW,MACtBwC,eAAgBxC,GAAW,WAC3ByC,aAAczC,GAAW,SACzB0C,2BAA4BzC,GAAQ,0BACpC0C,cAAe1C,GAAQ,aACvB9gC,UAAW8gC,GAAQ,aACnB2C,OAAQ3C,GAAQ,MAChB4C,gBAAiB5C,GAAQ,eACzB6C,eAAgB7C,GAAQ,cACxB8C,iCAAkC9C,GAAQ,2BAC1C+C,qCAAsC/C,GAAQ,2BAC9CgD,UAAW/C,GAAS,QACpBgD,UAAWhD,GAAS,QACpBiD,aAAcjD,GAAS,WACvBkD,kBAAmBlD,GAAS,gBAC5BmD,iBAAkBnD,GAAS,eAC3BoD,cAAepD,GAAS,YACxBqD,oBAAqBrD,GAAS,kBAC9BsD,iBAAkBrD,GAAY,YAC9BsD,mBAAoBtD,GAAY,cAChCuD,qBAAsBvD,GAAY,gBAClCwD,gBAAiBxD,GAAY,WAC7ByD,eAAgBzD,GAAY,aCtErB0D,GAAa,IAAIzD,GCLxB0D,GAIA,SAAkB/+D,EAAQmT,EAAM/Q,GAC5B,IAAI3C,EAAQE,KACRC,EAAQD,KACZC,EAAMkB,IAAM,EACZlB,EAAMo/D,WAAa,IACnBp/D,EAAMq/D,KAAO,CAAC,EACdr/D,EAAM8oD,GAAgCwF,EAAmBluD,EAAQoC,IAASkqD,EAC1E1sD,EAAMuT,KAAOA,EACbvT,EAAMqS,MAAO,SAAY,IAAIgoB,MAC7Br6B,EAAM6tD,GAAsD,CACxDx7C,KAAM,EACN/H,KAAM,EACN9H,KAAM,EACN48D,WAAY,WACR,OAA6B,MAArBv/D,EAAMu/D,WAAsB,EAA2B,CACnE,EACAC,KAAM,EACN9rD,KAAM,EAEd,EC3BA+rD,GAIA,SAAcjsD,EAAUE,GAIpBxT,KAAKuvD,eAAiB,CAClBj8C,SAAU,EACVlS,SAAU,GAEdpB,KAAKsT,SAAWA,EAChBtT,KAAKoB,SAAWoS,CACpB,ECTOgsD,GAAe,WCEfC,GAAY,OACZC,GAAmB,aACnBjV,GAAY,OACZ,GAAY,OACZkV,GAAgB,UAChB,GAAc,SACd,GAAiB,YACjB,GAAoB,eACpBC,GAAiB,WACjBC,GAAqB,eACrB,GAAiB,WACjBC,GAAe,UACf,GAAa,QACbv4D,GAAY,OACZw4D,GAA6B,wBAC7BC,GAAa,QACbC,GAAoB,aACpBC,GAAkB,YAClBC,GAAuB,iBACvBC,GAAoB,aACpBC,GAA0B,kBAC1Bl5D,GAAc,SACdm5D,GAA0B,kBAC1BC,GAAoB,cACpB3W,GAAgB,UAChB9kD,GAAkB,aAClB07D,GAAe,UACfC,GAAoB,cACpBC,GAA2B,qBAC3BC,GAAsB,gBACtBC,GAA6B,sBAC7BC,GAA6B,wBAC7BC,GAA6B,sBAC7BC,GAA6B,uBAC7BC,GAA6B,6BAC7BC,GAAe,UACfC,GAA6B,uBAC7BC,GAA6B,yBAC7BC,GAAuB,gBACvBC,GAAiB,WACjBC,GAA2B,oBAC3BC,GAAmB,aACnB3W,GAAsB,gBACtB4W,GAAsB,gBACtBC,GAAiB,WACjBC,GAAmB,aChD1BC,GAAc,WACdj0D,GAAc,WACdk0D,GAAgB,aAChBC,GAAU,OACd,SAASC,GAAYjzD,EAAQ2oC,EAAOr1C,GAChC,OAAO,SAAS0M,EAAQ2oC,EAAOr1C,EAAO,MAC1C,CAsFA,SAAS4/D,GAA6BvuD,EAAMy5B,EAAY+hB,IAC/C,SAAkBx7C,KACnB,SAAcA,EAAM,SAAUrE,EAAKhN,IAC3B,SAASA,GACT6sD,EAAa7/C,GAAOhN,GAEf,SAASA,GACd8qC,EAAW99B,GAAOhN,GAEb,WACL8qC,EAAW99B,IAAO,UAAU,IAAwChN,GAE5E,EAER,CACA,SAAS6/D,GAA2C/0B,EAAYg1B,IACvD,SAAkBh1B,KACnB,SAAcA,EAAY,SAAU99B,EAAKhN,GACrC8qC,EAAW99B,GAAOhN,GAAS8/D,CAC/B,EAER,CAEA,SAASC,GAAgB7hE,EAAQmvD,EAAc3uD,EAAe2S,GAC1D,IAAI2uD,EAAW,IAAI/C,GAAS/+D,EAAQmT,EAAMg8C,GAC1CsS,GAAYK,EAAU,aAActhE,EAAcyrD,KAC7CzrD,EAAc6M,KAAgB,CAAC,GAAG00D,YAGnCD,EAAS7vD,MAAO,SAAYzR,EAAc6M,IAAa00D,YAE3DD,EAAS53D,KAAO1J,EAAc0J,KAC9B,IAAI83D,EAAexhE,EAAc0J,KAAKgnC,QAAQ,KAAM,IAMpD,OALA4wB,EAAS,IAAgCA,EAAS,IAA8B5wB,QAAQ,MAAO8wB,GAnHnG,SAAiChiE,EAAQO,EAAM8oC,GAE3C,IAAI44B,EAAU54B,EAAI+1B,IAAgC/1B,EAAI+1B,KAAiC,CAAC,EACpF8C,EAAS3hE,EAAKK,IAAML,EAAKK,KAAO,CAAC,EACjCuhE,EAAU5hE,EAAK6+D,IAAgC7+D,EAAK6+D,KAAiC,GACrFgD,EAAUF,EAAOG,KACjBD,IACAX,GAAYQ,EAASnD,GAAWf,eAAgBqE,EAAQE,QACxDb,GAAYQ,EAASnD,GAAWjB,OAAQuE,EAAQ7lC,IAAM6lC,EAAQG,UAElE,IAAIC,EAASN,EAAOO,IAChBD,GACAf,GAAYQ,EAASnD,GAAWtB,UAAWgF,EAAOE,OAEtD,IAAIC,EAAYT,EAAOU,OACnBD,IACAlB,GAAYQ,EAASnD,GAAWnD,SAAUgH,EAAUpmC,IAAMomC,EAAUJ,SACpEd,GAAYQ,EAASnD,GAAWO,IAA4CsD,EAAUE,aACtFpB,GAAYQ,EAASnD,GAAWlD,SAAU+G,EAAUG,IACpDrB,GAAYQ,EAASnD,GAAW/C,YAAa4G,EAAUI,OACvDtB,GAAYQ,EAASnD,GAAWO,IAA4CsD,EAAUtD,MAE1F,IAAI2D,EAAMziE,EAAKK,IAAIoiE,IACnB,GAAIA,EAAK,CACLvB,GAAYQ,EAASnD,GAAWjD,eAAgBmH,EAAIC,aACpDxB,GAAYQ,EAASnD,GAAWjC,qBAAsBmG,EAAIE,YAC1DzB,GAAYQ,EAASnD,GAAWlC,cAAeoG,EAAIG,SACnD,IAAIC,EAAU/5B,EAAI+gB,IAAgC/gB,EAAI+gB,KAAiC,CAAC,EACpFiZ,EAAcD,EAAQ/1D,IAAe+1D,EAAQ/1D,KAAgB,CAAC,EAC9Di2D,EAAWD,EAAY9B,IAAiB8B,EAAY9B,KAAkB,CAAC,EAC3EE,GAAY6B,EAAU,SAAUN,EAAIrpC,QACpC8nC,GAAY6B,EAAU,WAAYN,EAAI9P,SAAWsO,GAAU,MAC3DC,GAAY6B,EAAU,YAAaN,EAAIO,WACvC9B,GAAY6B,EAAU,cAAeN,EAAIQ,YAAchC,GAAU,KACrE,CACA,IAAIiC,EAAQvB,EAAOwB,GACfD,IACAhC,GAAYQ,EAASnD,GAAW1C,SAAUqH,EAAM,KAChDhC,GAAYQ,EAASnD,GAAWzC,gBAAiBoH,EAAME,QAG3D,IAAIC,EAAW1B,EAAOrb,MAClB+c,IACAnC,GAAYQ,EAASnD,GAAW1B,kBAAmBwG,EAASC,UAC5DpC,GAAYQ,EAASnD,GAAW3B,cAAejP,EAAmBluD,EAAQ4jE,EAAS,MACnFnC,GAAYQ,EAASnD,GAAW5B,YAAa0G,EAAStE,MAmB1D,IAFA,IAAIwE,EAAM,CAAC,EAEFrgE,EAAI0+D,EAAQ,IAAoC,EAAG1+D,GAAK,EAAGA,IAAK,CACrE,IAAIsgE,EAAK5B,EAAQ1+D,IACjB,SAAcsgE,EAAI,SAAUj1D,EAAKhN,GAC7BgiE,EAAIh1D,GAAOhN,CACf,GACAqgE,EAAQx3D,OAAOlH,EAAG,EACtB,EAEA,SAAc0+D,EAAS,SAAU4B,EAAIjiE,GACjCgiE,EAAIC,GAAMjiE,CACd,GACA,IAAIkiE,GAAU,SAAS,QAAS,CAAC,EAAG/B,GAAU6B,GACzCE,EAAQlF,GAAWJ,sBAEpBsF,EAAQlF,GAAWJ,oBAAsBxQ,EAAmBluD,EAAQ,cAAcwwB,OAAOyzC,GAAgBC,SAAU,KAEvH76B,EAAI+1B,KAAgC,SAAe4E,EACvD,CAoCIG,CAAwBnkE,EAAQQ,EAAeshE,GAE/CthE,EAAc4+D,IAAgC5+D,EAAc4+D,KAAiC,IACtF,SAAe0C,EAC1B,CACA,SAASsC,GAAoBpkE,EAAQQ,IAC7B,SAAkBA,EAAc6M,OAChC,QAAerN,EAAQ,EAAmC,GAAuD,yCAEzH,CACO,IAAIikE,GAAkB,CACzBC,QAAS,UAoBN,SAASG,GAAqBrkE,EAAQQ,EAAeohE,GACxDwC,GAAoBpkE,EAAQQ,GAC5B,IAAI8jE,EAAmB,CAAC,EACpBC,EAAqB,CAAC,EACtB/jE,EAAc8gE,MAAiBrS,EAAMsQ,MACrC+E,EAAiC,eAAI9jE,EAAc8gE,KAEnD9gE,EAAc8gE,MAAiBrS,EAAMsQ,KACrC+E,EAAmB9jE,EAAc6M,IAAak0D,KAAkB,CAAC,EACjEgD,EAAqB/jE,EAAc6M,IAAa,KAAiD,CAAC,GAG9F7M,EAAc6M,KACdq0D,GAA6BlhE,EAAc6M,IAAci3D,EAAkBC,GAInF7C,GAA6BlhE,EAAc4pD,IAA+Bka,EAAkBC,IACvF,SAAkB3C,IACnBD,GAA2C2C,EAAkB1C,GAEjE,IAAI1gE,EAAYV,EAAc6M,IAAa,IACvC0E,EAAY,IAAIk9C,EAAMjvD,EAAQkB,EAAWojE,EAAkBC,GAC3DpxD,EAAO,IAAI+rD,GAAKjQ,EAAMsQ,IAAwCxtD,GAClE,OAAO8vD,GAAgB7hE,EAAQivD,EAAMuQ,IAAgDh/D,EAAe2S,EACxG,CCxLA,ICLI3R,GAAIy0B,GDKJuuC,GAAgC,WAChC,SAASA,EAAexkE,EAAQF,GAC5B,IAAI2kE,EAAU,GACVC,GAAyB,EACzBC,EAAe7kE,EAAO8kE,YAC1BjlE,KAAKklE,KAAO,WACR,OAAOJ,CACX,EACA9kE,KAAKmlE,KAAO,SAAUC,GAElB,OADAN,EAAUM,CAEd,GACA,OAAaP,EAAgB7kE,KAAM,SAAUC,GACzCA,EAAM6/D,IAAsC,SAAU1uD,GAC9CnR,EAAM,OAAqCE,EAAO2iB,iBAE7CiiD,KACD,QAAe1kE,EAAQ,EAAkC,IAAyD,0CAA4CJ,EAAM,OAAmC,GACvM8kE,GAAyB,IAIjC3zD,EAAQrG,IAAMqG,EAAQrG,KAAO,IAExB,SAAkBi6D,IACf5zD,EAAQrG,IAAMi6D,GAMtBF,EAAQv9D,IAA8B6J,GAE1C,EACAnR,EAAM,IAAkC,WACpC,OAAO6kE,EAAQ,GACnB,EACA7kE,EAAMk2D,KAAO,WAET,IADA,IAAIA,EAAO2O,EAAQ,IACVz6D,EAAK,EAAGA,EAAKy6D,EAAQ,IAAmCz6D,IAC7D8rD,GAAS2O,EAAQz6D,GAAQ,KAAE,IAK/B,OAHKlK,EAAO4/D,MACR5J,GAAQ,GAELA,CACX,EACAl2D,EAAM+/D,IAAkC,WACpC8E,EAAU,GACVC,GAAyB,CAC7B,EACA9kE,EAAMolE,SAAW,WACb,OAAOP,EAAQj1D,MAAM,EACzB,EACA5P,EAAMqlE,cAAgB,SAAUC,GAC5B,GAAIA,GAAYA,EAAS,IAAoC,EAAG,CAC5D,IAAIC,EAAe,GAOnB,OANA,SAAWD,EAAU,SAAUn0D,GAC3Bo0D,EAAaj+D,IAA8B6J,EAAQxQ,KACvD,GACYT,EAAO4/D,IACfyF,EAAarkC,KAAK,MAClB,IAAMqkC,EAAarkC,KAAK,KAAO,GAEvC,CACA,OAAO,IACX,EACAlhC,EAAMsnC,UAAY,SAAUlG,EAAW8F,EAAWs+B,GAC9C,IAAIjT,EAAQsS,EAAQj1D,MAAM,GAC1BwxB,EAAYA,GAAahhC,EACzB8mC,EAAYA,GAAa,CAAC,EAC1B,IAAIu+B,EAAcD,EAAuB,IAAIE,GAAyBtkC,EAAW8F,GAAa,IAAIy+B,GAAgBvkC,EAAW8F,GAI7H,OAHA,SAAWqrB,EAAO,SAAUphD,GACxBs0D,EAAU5F,IAAoC1uD,EAClD,GACOs0D,CACX,CACJ,EACJ,CAYA,OAFAb,EAAerjE,QAAQ,EAEhBqjE,CACX,CA3FmC,GA+F/Be,GAAiC,SAAUhmE,GAE3C,SAASgmE,EAAgBvlE,EAAQF,GAC7B,IAAIL,EAAQF,EAAOG,KAAKC,KAAMK,EAAQF,IAAWH,KASjD,OARA,OAAa4lE,EAAiB9lE,EAAO,SAAUG,EAAOC,GAClDD,EAAMggE,IAA8C,SAAU7uD,GAC1DlR,EAAM8/D,KACV,EACA//D,EAAMigE,IAA2C,SAAU9uD,GAE3D,CACJ,GACOtR,CACX,CAOA,OAnBA,QAAU8lE,EAAiBhmE,GAiB3BgmE,EAAgBpkE,QAAQ,EAEjBokE,CACX,CArBoC,CAqBlCf,IAEEgB,GAAgB,CAAC,YAAa,iBAI9BF,GAA0C,SAAU/lE,GAEpD,SAAS+lE,EAAyBtlE,EAAQF,GACtC,IAAIL,EAAQF,EAAOG,KAAKC,KAAMK,EAAQF,IAAWH,KAC7C+kE,GAAyB,EAEzBe,EAAc3lE,aAA4C,EAAIA,EAAO4lE,WAErEzvC,EAAKn2B,EAAOggE,KAAsD,CAAEtG,QAASI,GAAsBN,QAASO,IAAwBL,EAAUvjC,EAAGujC,QAASF,EAAUrjC,EAAGqjC,QACvKqL,EAAe7kE,EAAO8kE,YA0K1B,OAzKA,OAAaU,EAA0B7lE,EAAO,SAAUG,EAAOC,GAC3D,IAAI8lE,EAAcC,EAAWN,EAAyBvF,KAClD8F,EAAoBD,EAAWN,EAAyBtF,KACxD8F,EA4HJ,WACI,IAAI3T,EAAQ,GACZ,IAWI,OAVA,SAAWqT,GAAe,SAAU12D,GAChC,IAAI1E,EAAS27D,EAAyBj3D,GAGtC,GAFAqjD,EAAQA,EAAMrrD,IAAkCsD,GAE5Cq7D,EAAa,CACb,IACIO,EAAeD,EADDN,EAAc,IAAM32D,GAEtCqjD,EAAQA,EAAMrrD,IAAkCk/D,EACpD,CACJ,GACO7T,CACX,CACA,MAAOhyD,IACH,QAAeH,EAAQ,EAAkC,GAAuD,2CAA4C,SAAiBG,GAAK,6CAA8C,CAAEy6B,WAAW,SAAQz6B,IACzP,CACA,MAAO,EACX,CA/IoB8lE,GAChBC,EAAoBL,EAAkB/+D,IAAkCg/D,GACxEf,EAASnlE,EAAMklE,KAAKa,EAAY7+D,IAAkCo/D,IAsEtE,SAASC,EAA0BjB,EAAUH,GACzC,IAAIqB,EAAY,GACZC,EAAa,GASjB,OARA,SAAWnB,EAAU,SAAUn0D,GAC3Bs1D,EAAWn/D,IAA8B6J,EAAQxQ,KACrD,IACA,SAAWwkE,EAAQ,SAAUjjE,IACpB,SAAWA,KAAkD,KAAxC,SAAWukE,EAAYvkE,EAAMvB,OACnD6lE,EAAUl/D,IAA8BpF,EAEhD,GACOskE,CACX,CACA,SAASR,EAAW92D,GAGhB,OAAOw3D,EADOb,EAAcA,EAAc,IADxB32D,IAGtB,CACA,SAASw3D,EAAex3D,GACpB,IACI,IAAIy3D,EAAa/M,EAAQx5D,EAAQ8O,GACjC,GAAIy3D,EAAY,CACZ,IAAIC,GAAW,UAAUvnD,MAAMsnD,GAK/B,IAJI,SAASC,KAETA,GAAW,UAAUvnD,MAAMunD,IAE3BA,IAAY,SAAQA,GACpB,OAAOA,CAEf,CACJ,CACA,MAAOrmE,IACH,QAAeH,EAAQ,EAAmC,GAA2D,iBAAmB8O,EAAM,MAAO,SAAiB3O,GAAI,CAAEy6B,WAAW,SAAQz6B,IACnM,CACA,MAAO,EACX,CACA,SAASsmE,EAAW33D,EAAKi2D,GACrB,IAAI2B,EAAc53D,EAClB,IACI43D,EAAcjB,EAAcA,EAAc,IAAMiB,EAAcA,EAC9D,IAAIH,EAAa/jE,KAAK,IAAwCuiE,GAC9DzL,EAAQt5D,EAAQ0mE,EAAaH,EACjC,CACA,MAAOpmE,GAGHm5D,EAAQt5D,EAAQ0mE,EAAalkE,KAAK,IAAwC,MAC1E,QAAexC,EAAQ,EAAkC,GAAuD,iBAAmB0mE,EAAc,MAAO,SAAiBvmE,GAAK,mBAAoB,CAAEy6B,WAAW,SAAQz6B,IAC3N,CACJ,CAuBA,SAAS4lE,EAAyBj3D,GAC9B,IACI,IAAIqjD,EAAQmU,EAAex3D,GACvB63D,EAAqB,GAUzB,OATA,SAAWxU,EAAO,SAAU5xD,GACxB,IAAIqmE,EAAe,CACfrmE,KAAMA,EACNmK,IAAK,GAETi8D,EAAmBz/D,IAA8B0/D,EACrD,GVlIb,SAAiC5mE,EAAQoC,GAC5C,IAAIi3D,EAAUI,KACd,GAAgB,OAAZJ,EACA,IAEI,OADAA,EAAQ5M,GAA2CrqD,IAC5C,CACX,CACA,MAAOjC,GACH84D,IAAwB,GACxB,QAAej5D,EAAQ,EAAkC,EAAoE,oDAAqD,SAAiBG,GAAI,CAAEy6B,WAAW,SAAQz6B,IAChO,CAGR,CUuHoB0mE,CAAwB7mE,EAAQ8O,GACzB63D,CACX,CACA,MAAOxmE,GAEP,CACA,MAAO,EACX,CAhKI4kE,EAAO,IAAoCO,EAAyBrF,MACpE8E,EAAO,IAAoCO,EAAyBrF,KAExEwG,EAAWnB,EAAyBtF,IAAwD,IAC5FyG,EAAWnB,EAAyBvF,IAA6CgF,GACjFnlE,EAAM6/D,IAAsC,SAAU1uD,GAC9CnR,EAAM,OAAqC0lE,EAAyBrF,IAE/DyE,KACD,QAAe1kE,EAAQ,EAAkC,GAAuD,gCAAkCJ,EAAM,OAAmC,GAC3L8kE,GAAyB,IAIjC3zD,EAAQrG,IAAMqG,EAAQrG,KAAO,IAExB,SAAkBi6D,IACf5zD,EAAQrG,IAAMi6D,IAKtB9kE,EAAM4/D,IAAoC1uD,GAC1C01D,EAAWnB,EAAyBvF,IAA6CngE,EAAMilE,SAC3F,EACAjlE,EAAM+/D,IAAkC,WACpC9/D,EAAM8/D,MACN8G,EAAWnB,EAAyBvF,IAA6CngE,EAAMilE,QACvF4B,EAAWnB,EAAyBtF,IAAwD,IAC5F0E,GAAyB,CAC7B,EACA9kE,EAAMggE,IAA8C,SAAU7uD,GAC1D01D,EAAWnB,EAAyBvF,IAA6CngE,EAAMklE,KAAKqB,EAA0Bp1D,EAASnR,EAAMilE,UACrI,IAAIiC,EAAelB,EAAWN,EAAyBtF,KACnD8G,aAAwBtb,OAASz6C,aAAmBy6C,SACpDsb,EAAeA,EAAahgE,IAAkCiK,IAC7C,IAAoCu0D,EAAyBrF,OAG1E,QAAejgE,EAAQ,EAAmC,GAAuD,yCAA2C8mE,EAAa,KAAmC,GAC5MA,EAAa,IAAoCxB,EAAyBrF,KAE9EwG,EAAWnB,EAAyBtF,IAAwD8G,GAEpG,EACAlnE,EAAMigE,IAA2C,SAAU9uD,GACvD,IAAI+1D,EAAelB,EAAWN,EAAyBtF,KACvD8G,EAAeX,EAA0Bp1D,EAAS+1D,GAClDL,EAAWnB,EAAyBtF,IAAwD8G,EAChG,EACAlnE,EAAMsnC,UAAY,SAAUlG,EAAW8F,EAAWs+B,GAC9CA,IAAyBA,EACzB,IAAI2B,EAAcnnE,EAAMilE,OAAOr1D,MAAM,GACjCw3D,EAAYpB,EAAWN,EAAyBtF,KAAwDxwD,MAAM,GAClHwxB,EAAYA,GAAahhC,EACzB8mC,EAAYA,GAAa,CAAC,EAE1BlnC,EAAM+/D,MACN,IAAI0F,EAAYD,EAAuB,IAAIE,EAAyBtkC,EAAW8F,GAAa,IAAIy+B,GAAgBvkC,EAAW8F,GAQ3H,OAPA,SAAWigC,EAAa,SAAUh2D,GAC9Bs0D,EAAU5F,IAAoC1uD,EAClD,GACIq0D,GAEAC,EAAUzF,IAA4CoH,GAEnD3B,CACX,CA8FJ,GACO5lE,CACX,CAMA,IAAI+B,EAOJ,OAhMA,QAAU8jE,EAA0B/lE,GA0LpCiC,EAAK8jE,EACLA,EAAyB2B,QAAU,KACnC3B,EAAyB4B,WAAa,YAAc1lE,EAAGylE,QACvD3B,EAAyB6B,gBAAkB,gBAAkB3lE,EAAGylE,QAEhE3B,EAAyB8B,gBAAkB,IACpC9B,CACX,CAlM6C,CAkM3Cd,IE9TE13D,GAA4B,WAC5B,SAASA,EAAW9M,IAChB,OAAa8M,EAAYnN,KAAM,SAAUC,GAcrC,SAASynE,EAAiBv3C,EAAQ1tB,GAC9B,IAAIklE,EAAyB,uBACzBC,EAAS,CAAC,EACd,IAAKz3C,EAED,OADA,QAAe9vB,EAAQ,EAAmC,GAAoD,0DAA2D,CAAEoC,KAAMA,IAAQ,GAClLmlE,EAEX,GAAIz3C,EAAOw3C,GAEP,OADA,QAAetnE,EAAQ,EAAkC,GAAwD,uDAAwD,CAAEoC,KAAMA,IAAQ,GAClLmlE,EAEX,IAAKz3C,EAAOo/B,eAAgB,CAExB,GAAa,iBAAT9sD,EACAmlE,EAASC,EAAoB13C,EAAQ,SAAU1tB,QAE9C,GAAa,eAATA,EACLmlE,EAASC,EAAoB13C,EAAQ,SAAU1tB,QAE9C,GAAa,SAATA,EACLmlE,EAASC,EAAoB13C,EAAQ,SAAU1tB,QAE9C,IAAI,SAAQ0tB,GACby3C,EAASE,EAAgB33C,EAAQ1tB,OAEhC,EACD,QAAepC,EAAQ,EAAkC,GAAmE,2EAA4E,CAAEoC,KAAMA,IAAQ,GACxN,KAEI,UAAU,IAAwC0tB,GAClDy3C,EAASz3C,CACb,CACA,MAAO3vB,IAEH,QAAeH,EAAQ,EAAmC,GAAqDG,IAAK,SAAWA,EAAE,KAA2CA,EAAE,MAA2C,2BAA4B,MAAM,EAC/P,CACJ,CACA,OAAOonE,CACX,CAmCA,OAlCAz3C,EAAOw3C,IAA0B,GACjC,SAAcx3C,EAAOo/B,eAAgB,SAAU/X,EAAOuwB,GAClD,IAAIC,GAAc,SAAWD,GAA2B,EAAbA,IAAuD,EAAXA,EACnFE,GAAY,SAAWF,GAA2B,EAAbA,IAAqD,EAAXA,EAC/EG,EAAqB,EAAXH,EACVI,OAA8B97D,IAAlB8jB,EAAOqnB,GACnB4wB,GAAQ,SAASj4C,EAAOqnB,KAA6B,OAAlBrnB,EAAOqnB,GAC9C,IAAIwwB,GAAeG,GAAcD,GAI5B,IAAKD,EAAU,CAChB,IAAI9lE,OAgBUkK,KAZNlK,EAHJimE,EACIF,EAEQJ,EAAgB33C,EAAOqnB,GAAQA,GAI/BkwB,EAAiBv3C,EAAOqnB,GAAQA,GAKpCrnB,EAAOqnB,MAIfowB,EAAOpwB,GAASr1C,EAExB,OAvBI,QAAe9B,EAAQ,EAAmC,GAAgE,wFAAyF,CAAEm3C,MAAOA,EAAO/0C,KAAMA,GAwBjP,UACO0tB,EAAOw3C,GACPC,CACX,CACA,SAASE,EAAgBO,EAAS5lE,GAC9B,IAAImlE,EACJ,GAAMS,EACF,IAAK,SAAQA,GAGR,CACDT,EAAS,GACT,IAAK,IAAI9jE,EAAI,EAAGA,EAAIukE,EAAQ,IAAmCvkE,IAAK,CAChE,IACIlD,EAAO8mE,EADEW,EAAQvkE,GACerB,EAAO,IAAMqB,EAAI,KACrD8jE,EAAOrgE,IAA8B3G,EACzC,CACJ,MATI,QAAeP,EAAQ,EAAmC,GAA6C,yFAA0F,CAAEoC,KAAMA,IAAQ,GAWzN,OAAOmlE,CACX,CACA,SAASC,EAAoB5Z,EAAKqa,EAAc7lE,GAC5C,IAAImlE,EAoCJ,OAnCI3Z,IACA2Z,EAAS,CAAC,GACV,SAAc3Z,EAAK,SAAUzW,EAAOr1C,GAChC,GAAqB,WAAjBmmE,OACcj8D,IAAVlK,EACAylE,EAAOpwB,GAAS,YAED,OAAVr1C,EACLylE,EAAOpwB,GAAS,OAEVr1C,EAAM,IAIZylE,EAAOpwB,GAASr1C,EAAM,MAHtBylE,EAAOpwB,GAAS,iDAMnB,GAAqB,WAAjB8wB,EACL,QAAcj8D,IAAVlK,EACAylE,EAAOpwB,GAAS,iBAEf,GAAc,OAAVr1C,EACLylE,EAAOpwB,GAAS,WAEf,CACD,IAAI6X,EAAMkZ,WAAWpmE,GACrBylE,EAAOpwB,GAAS6X,CACpB,MAGAuY,EAAOpwB,GAAS,kBAAoB/0C,EAAO,wBAC3C,QAAepC,EAAQ,EAAmCunE,EAAOpwB,GAAQ,MAAM,EAEvF,IAEGowB,CACX,CA5IA3nE,EAAMgsB,UAAY,SAAUklB,GACxB,IAAIy2B,EAASF,EAAiBv2B,EAAO,QACrC,IACI,OAAO,UAAU,IAAwCy2B,EAC7D,CACA,MAAOpnE,IAEH,QAAeH,EAAQ,EAAmC,GAAqDG,IAAK,SAAWA,EAAE,KAA2CA,EAAE,MAA2C,2BAA4B,MAAM,EAC/P,CACJ,CAoIJ,EACJ,CAMA,OAFA2M,EAAW3L,QAAQ,EAEZ2L,CACX,CA3J+B,GCE3Bq7D,GAAwC,WACxC,SAASA,IACT,CAwBA,OAvBAA,EAAuB/T,UAAUgU,iBAAmB,SAAUt5D,GAE1D,OADYnP,KAAK0oE,YAAYv5D,GAAOq5D,EAAuBG,cAC5C,GACnB,EACAH,EAAuB/T,UAAUiU,YAAc,SAAUv3B,GACrD,GAAc,KAAVA,EACA,OAAO,EAEX,KAAOA,EAAM,IAZE,GAaXA,EAAQA,EAAMhqC,IAAkCgqC,GAIpD,IADA,IAAIy3B,EAAO,KACF9kE,EAAI,EAAGA,EAAIqtC,EAAM,MAAqCrtC,EAC3D8kE,GAASA,GAAQ,GAAKA,EAAQz3B,EAAM03B,WAAW/kE,GAG/C8kE,GAAcA,EAElB,OAAOl8D,KAAKo8D,IAAIF,EACpB,EAEAJ,EAAuBG,cAAgB,WAChCH,CACX,CA3B2C,GCAvCO,GACA,WACI,IACIC,EAAoB,IAAIR,GACxBtzD,EAAO,IAAIwmD,GAFH17D,KAGNipE,iBAAmB,SAAUroE,GAkB/B,OAhBIA,EAAK6+D,KAAiC7+D,EAAK6+D,IAA8BvqD,EAAKgpD,QACtE8K,EAAkBP,iBAAiB7nE,EAAK6+D,IAA8BvqD,EAAKgpD,SAE9Et9D,EAAKK,KAAOL,EAAKK,IAAIyhE,MAAQ9hE,EAAKK,IAAIyhE,KAAK9lC,GACxCosC,EAAyE,iBAAEpoE,EAAKK,IAAIyhE,KAAK9lC,IAE5Fh8B,EAAK6+D,KAAiC7+D,EAAK6+D,IAA8BvqD,EAAKqoD,aAC3EyL,EAAkBP,iBAAiB7nE,EAAK6+D,IAA8BvqD,EAAKqoD,cAE9E38D,EAAKK,KAAOL,EAAKK,IAAIioE,gBAAkBtoE,EAAKK,IAAIioE,eAAevJ,IAC5DqJ,EAAkBP,iBAAiB7nE,EAAKK,IAAIioE,eAAevJ,KAI1C,IAAhBjzD,KAAKC,QAGtB,CACJ,ECxBAw8D,GAAwB,WACxB,SAASA,EAAO9J,EAAYh/D,GAExBL,KAAK2oE,cAAgB,WACrB,IAAIzyD,EAAU7V,IAAU,QAAc,OAClCg/D,EAAa,KAAOA,EAAa,KACjCnpD,EAAQkzD,cAAc,EAAkC,GAAmD,8IAA+I,CAAEC,aAAchK,IAAc,GACxRA,EAAa,KAEjBr/D,KAAK0hE,IAA6CrC,EAClDr/D,KAAKspE,uBAAyB,IAAIP,EACtC,CAiBA,OAbAI,EAAO1U,UAAU8U,YAAc,SAAUpH,GACrC,IAAIqH,EAAqBxpE,KAAK0hE,IAE9B,OAAI8H,SAAmEA,GAAsB,KAGpFrH,EAAS7uD,WAAa2jD,GAAO2I,KAIxB5/D,KAAKspE,uBAAuBL,iBAAiB9G,GAAYqH,CAE3E,EACOL,CACX,CA7B2B,GJMvBnuB,QAAkB3uC,EAGtB,SAASo9D,GAAiB/vB,GACtB,IACI,OAAOA,EAAI3/B,YACf,CACA,MAAOvZ,GAEP,CACA,OAAO,IACX,CAIA,IAAIkpE,IAAkC,WAAe7nE,GAAK,CAElDvC,aAAa,SAAc,MAAUmtD,EAA0BC,KAEhEqT,KAA+D,WAClEl+D,GAAG8nE,iBAAmB,KACtB9nE,GAAG++D,IAA6D,OAChE/+D,GAAGwhB,kBAAmB,WACtBxhB,GAAGm/D,KAAoE,UAAa,GACpFn/D,GAAG+nE,iBAAkB,WACrB/nE,GAAGi/D,KAA6D,UAAa,GAC7Ej/D,GAAGs/D,KAAgE,UAAa,GAChFt/D,GAAG0W,YAAa,WAChB1W,GAAGq/D,KAA8D,WACjEr/D,GAAGg/D,KAA+D,WAClEh/D,GAAG6+D,IAA0D1lB,GAC7Dn5C,GAAGkkE,WAAa/qB,GAChBn5C,GAAG2nE,oBAAqB,SAa5B,SAAsBrnE,GAClB,OAAQ0tD,MAAM1tD,IAAUA,EAAQ,GAAKA,GAAS,GAClD,EAfwD,KACpDN,GAAG8+D,IAAgD3lB,GACnDn5C,GAAGgoE,iBAAmB7uB,GACtBn5C,GAAGihB,iBAAmB,IACtBjhB,GAAGs+D,KAAkD,EACrDt+D,GAAG+e,gBAAkB,CAAEnhB,MAzB3B,SAAsBmhB,GAClB,OAAOA,GAAmBA,EAAgB5B,QAC9C,EAuBgD+D,EAAGi4B,IAC/Cn5C,GAAGk/D,KAA8D,WACjEl/D,GAAGkW,WAAaijC,GAChBn5C,GAAGioE,WAAa9uB,GAChBn5C,GAAGkoE,WAAa/uB,GAChBn5C,GAAGojE,YAAc,CAAExlE,MAAO,MAAUsjB,EAAG,IACvClhB,KACAmoE,GAAkC,qCAIlCC,KAAuB3zC,GAAK,CAAC,GAC1Bg5B,EAAM/rB,UAAYmhC,GACrBpuC,GAAGm5B,EAAMlsB,UFgON,SAA8BljC,EAAQQ,EAAeohE,GACxDwC,GAAoBpkE,EAAQQ,GAC5B,IAAIH,EAAUG,EAAc6M,IAAahN,QACrCgvD,EAAgB7uD,EAAc6M,IAAagiD,cAC3Cwa,EAAQrpE,EAAc6M,IAAak0D,KAAkB,CAAC,EACtD5S,EAAenuD,EAAc6M,IAAa,KAAiD,CAAC,EAChGq0D,GAA6BlhE,EAAc4pD,IAA+Byf,EAAOlb,IAC5E,SAAkBiT,IACnBD,GAA2CkI,EAAOjI,GAEtD,IAAI7gE,EAAW,IAAIquD,EAAMpvD,EAAQK,EAASgvD,EAAewa,EAAOlb,GAC5Dx7C,EAAO,IAAI+rD,GAAK9P,EAAMmQ,IAAwCx+D,GAClE,OAAO8gE,GAAgB7hE,EAAQovD,EAAMoQ,IAAgDh/D,EAAe2S,EACxG,EE5OI8iB,GAAG25B,EAAS1sB,UF0JT,SAAiCljC,EAAQQ,EAAeohE,GAG3D,IAAI/R,EAFJuU,GAAoBpkE,EAAQQ,GAG5B,IAAIO,EAAWP,EAAc6M,KACxB,SAAkBtM,KAClB,SAAkBA,EAASwgE,OAC3B,SAAkBxgE,EAASwgE,IAAepC,MAIrC,SAAkB3+D,EAAc4pD,OACrC,SAAkB5pD,EAAc4pD,IAA8B+U,OAC/DtP,EAAWrvD,EAAc4pD,IAA8B+U,WAChD3+D,EAAc4pD,IAA8B+U,MANnDtP,EAAW9uD,EAASwgE,IAAepC,WAC5Bp+D,EAASwgE,IAAepC,KAOnC,IAEI2K,EAFAC,EAAKvpE,EAAc6M,MAGjB7M,EAAcI,KAAO,CAAC,GAAGimD,OAAS,CAAC,GAAGyY,MACxCwK,EAAmBtpE,EAAcI,IAAIimD,MAAMyY,KAE/C,IAAI/iC,EAAKwtC,EAAGxtC,IAAMutC,EACd1nE,EAAO2nE,EAAG,IACV70D,EAAM60D,EAAGC,IACTp9B,EAAam9B,EAAGxI,KAAkB,CAAC,EACnC5S,EAAeob,EAAG,KAAiD,CAAC,EAcxE,IAZK,SAAkBA,EAAGE,UACtBr9B,EAAmB,OAAIm9B,EAAGE,SAGzB,SAAkBF,EAAGG,YACtBt9B,EAAqB,SAAIm9B,EAAGG,WAG3B,SAAkBH,EAAGI,cACtBv9B,EAAuB,WAAIm9B,EAAGI,WAAW,SAGxC,SAAkBJ,EAAGxI,KAAiB,CACvC,IAAI6I,EAAWL,EAAGxI,KAClB,SAAc6I,EAAU,SAAUt7D,EAAKhN,GACnC8qC,EAAW99B,GAAOhN,CACtB,EACJ,CACA4/D,GAA6BlhE,EAAc4pD,IAA+Bxd,EAAY+hB,IACjF,SAAkBiT,IACnBD,GAA2C/0B,EAAYg1B,GAE3D,IAAIyI,EAAe,IAAIza,EAAS5vD,EAAQoC,EAAM8S,EAAK26C,EAAUjjB,EAAY+hB,EAAcpyB,GACnFppB,EAAO,IAAI+rD,GAAKtP,EAAS2P,IAAwC8K,GACrE,OAAOxI,GAAgB7hE,EAAQ4vD,EAAS4P,IAAgDh/D,EAAe2S,EAC3G,EE9MI8iB,GAAG85B,EAAoB7sB,UF+MpB,SAA4CljC,EAAQQ,EAAeohE,GACtEwC,GAAoBpkE,EAAQQ,GAC5B,IAAIupE,EAAKvpE,EAAc6M,IACnBjL,EAAO2nE,EAAG,IACV70D,EAAM60D,EAAGC,KAAOD,EAAG70D,IACnB03B,EAAam9B,EAAGxI,KAAkB,CAAC,EACnC5S,EAAeob,EAAG,KAAiD,CAAC,EACxErI,GAA6BlhE,EAAc4pD,IAA+Bxd,EAAY+hB,IACjF,SAAkBiT,IACnBD,GAA2C/0B,EAAYg1B,GAE3D,IAAI7gE,EAAW,IAAIgvD,EAAoB/vD,EAAQoC,EAAM8S,OAAKlJ,EAAW4gC,EAAY+hB,EAAcob,GAC3F52D,EAAO,IAAI+rD,GAAKnP,EAAoBwP,IAAwCx+D,GAChF,OAAO8gE,GAAgB7hE,EAAQ+vD,EAAoByP,IAAgDh/D,EAAe2S,EACtH,EE5NI8iB,GAAG88B,GAAU7vB,UF6HV,SAAkCljC,EAAQQ,EAAeohE,GAC5DwC,GAAoBpkE,EAAQQ,GAE5B,IAAI+jE,EAAqB/jE,EAAc6M,IAAa,KAAiD,CAAC,EAClGi3D,EAAmB9jE,EAAc6M,IAAak0D,KAAkB,CAAC,EACrEG,GAA6BlhE,EAAc4pD,IAA+Bka,EAAkBC,IACvF,SAAkB3C,IACnBD,GAA2C2C,EAAkB1C,GAEjE,IAAImI,EAAKvpE,EAAc6M,IACnBi9D,EAASvX,GAAUU,oBAAoBzzD,EAAQ+pE,EAAIzF,EAAkBC,GACrEpxD,EAAO,IAAI+rD,GAAKnM,GAAUwM,IAAwC+K,GACtE,OAAOzI,GAAgB7hE,EAAQ+yD,GAAUyM,IAAgDh/D,EAAe2S,EAC5G,EEzII8iB,GAAG2gC,GAAO1zB,UF0IP,SAA+BljC,EAAQQ,EAAeohE,GACzDwC,GAAoBpkE,EAAQQ,GAC5B,IAAIO,EAAWP,EAAc6M,IACzBw8D,EAAQ9oE,EAASwgE,KAAkB,CAAC,EACpC5S,EAAe5tD,EAAS,KAAiD,CAAC,EAC9E2gE,GAA6BlhE,EAAc4pD,IAA+Byf,EAAOlb,IAC5E,SAAkBiT,IACnBD,GAA2CkI,EAAOjI,GAEtD,IAAI2I,EAAiB,IAAI3T,GAAO52D,EAAQe,EAAS,IAA+BA,EAASypE,QAASzpE,EAAS0pE,YAAa1pE,EAASsN,IAAKtN,EAAS+Q,IAAK/Q,EAAS41D,OAAQkT,EAAOlb,GACxKx7C,EAAO,IAAI+rD,GAAKtI,GAAO2I,IAAwCgL,GACnE,OAAO1I,GAAgB7hE,EAAQ42D,GAAO4I,IAAgDh/D,EAAe2S,EACzG,EErJI8iB,GAAGwhC,GAAqBv0B,UF+ErB,SAAmCljC,EAAQQ,EAAeohE,GAC7DwC,GAAoBpkE,EAAQQ,GAC5B,IAAI+jE,EAAqB/jE,EAAc6M,IAAa,KAAiD,CAAC,EAClGi3D,EAAmB9jE,EAAc6M,IAAak0D,KAAkB,CAAC,EACrEG,GAA6BlhE,EAAc4pD,IAA+Bka,EAAkBC,IACvF,SAAkB3C,IACnBD,GAA2C2C,EAAkB1C,GAEjE,IAAImI,EAAKvpE,EAAc6M,IACvB,IAAI,SAAkB08D,GAElB,OADA,QAAe/pE,EAAQ,qCAChB,KAEX,IAAI6yB,EAASk3C,EAAGxI,KAAkBwI,EAAGxI,IAAepV,GAAc4d,EAAGxI,IAAepV,GAAc,MAC9Fue,EAAgB,IAAIjT,GAAqBz3D,EAAQ+pE,EAAGxtC,GAAIwtC,EAAGv7D,OAAQu7D,EAAG,IAA+BA,EAAG5K,IAAsC4K,EAAGnS,QAASmS,EAAGY,aAAc93C,EAAQk3C,EAAGlnE,KAAMknE,EAAGhS,mBAAoBuM,EAAkBC,GACrOpxD,EAAO,IAAI+rD,GAAKzH,GAAqB8H,IAAwCmL,GACjF,OAAO7I,GAAgB7hE,EAAQy3D,GAAqB+H,IAAgDh/D,EAAe2S,EACvH,EE/FI8iB,IACA20C,GAAwB,SAAUrrE,GAElC,SAASqrE,IACL,IAIIC,EACAC,EAEAr1D,EACAs1D,EACA30D,EACA40D,EACA90D,EAXAzW,EAAQF,EAAOG,KAAKC,OAASA,KACjCF,EAAMokB,SAAW,KACjBpkB,EAAM0E,WAAa,MAUnB,IACI8mE,EACAC,EACAlmD,EACAmmD,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAnmD,EACA2Z,EACAysC,EACAC,EACAC,EACAC,EACAC,EACArG,EACAllB,EACAwrB,EACAlrB,EACAmrB,EACAC,EACAC,EACAC,EACA90D,EACA+0D,EACA11D,EA5BAsqC,EAAoB,EAolCxB,OAvjCA,OAAa4pB,EAAQnrE,EAAO,SAAUG,EAAOC,GA+ZzC,SAASwsE,EAAWpzD,EAAKlI,GACrB,IAAI2I,EAAe0vD,GAAiBnwD,GACpC,IAAIA,GAAQS,EAAe,IAAO,OAA0B,KAAjBA,EAItC,CACD,IAAIm5C,EAAU0H,GAAc7gD,GACxBm5C,GAAWA,EAAQtI,KAAoDsI,EAAQtI,IAAmDsI,EAAQsO,MACtIwK,EACJ/rE,EAAMqhE,IAA0DlwD,EAAS8hD,GAGzEjzD,EAAMohE,IAAuCjwD,GAAS,SAAsBkI,GAEpF,MAZI4xD,EAAqB,EACrBjrE,EAAMshE,IAA2CnwD,EAAS,EAYlE,CA4EA,SAASu7D,EAAqBjzB,EAAKtoC,EAASw7D,GACjB,IAAnBlzB,EAAI8I,YACJqqB,GAAoBnzB,EAAI5/B,OAAQ1I,EAASsoC,EAAIozB,YAAaF,GAAuB,SAAsBlzB,GAAM+vB,GAAiB/vB,IAAQA,EAAIlgC,SAElJ,CA8CA,SAASuzD,EAAe37D,GACpB,IACI,GAAIA,EAAS,CACT,IACIgV,EADkBhV,EACI47D,WAC1B,OAAI5mD,GAAOA,EAAI,IACJA,EAEJ,IACX,CACJ,CACA,MAAO5lB,GAEP,CACA,OAAO,IACX,CACA,SAASysE,EAAUpsE,EAAeqsE,GAC9B,QAAIvnD,IAKC9kB,EAKDA,EAAcO,WAAaP,EAAc4gE,KACzCyL,IAAc,QAAeA,EAAY,EAAmC,GAA2C,uDAChH,IAENrsE,EAAc4gE,MAEf5gE,EAAc4gE,IAAyC,aAGtDxhE,EAAMugE,KAgFO2B,EA3EAthE,EA4EXZ,EAAMktE,QAAQ5D,YAAYpH,IAtE7BthE,EAAcyrD,GAAcrsD,EAAMktE,QAAQzL,IAEvC,IANHwL,IAAc,QAAeA,EAAY,EAAkC,GAAyD,8CAA+C,CAAE5gB,WAAYrsD,EAAMktE,QAAQzL,MACxM,KAPPwL,IAAc,QAAeA,EAAY,EAAmC,GAAmD,8BACxH,KAfPA,IAAc,QAAeA,EAAY,EAAmC,EAAsD,+BAC3H,KA4Ff,IAAsB/K,CAlEtB,CACA,SAASiL,EAAavsE,EAAeqsE,GAGjC,IAAIG,EAAsBxsE,EAAc0J,MAAQ+0B,EAC5CguC,EAAarC,EAAOsC,kBAAkB1sE,EAAewsE,EAAqBH,EAAYnB,GAC1F,GAAKuB,EAAL,CAIA,IAAIrwC,GAAgB,EAkBpB,GAhBIp8B,EAAc4+D,KAAiC5+D,EAAc4+D,IAA8BlT,MAC3F,SAAW1rD,EAAc4+D,IAA8BlT,GAAgB,SAAU9oB,GAC7E,IACQA,IAAqC,IAAzBA,EAAS6pC,KACrBrwC,GAAgB,GAChB,QAAeiwC,EAAY,2CAEnC,CACA,MAAO1sE,IAGH,QAAe0sE,EAAY,EAAmC,GAAyD,2EAA4E,SAAiB1sE,GAAI,CAAEy6B,WAAW,SAAQz6B,KAAM,EACvP,CACJ,UACOK,EAAc4+D,IAA8BlT,KAEnDtvB,EAGJ,OAAOqwC,CAtBP,MAFI,QAAeJ,EAAY,EAAmC,GAAkD,2CAyBxH,CACA,SAAS5mD,EAAW1lB,GAChB,IAAIylB,EAruBJ,GAsuBI6mD,EAAajtE,EAAM2pD,MACvB,IACI,IAAI4jB,EAAQP,EAAUrsE,EAAMssE,GACxB/K,EAAW,KACXqL,IACArL,EAAWiL,EAAaxsE,EAAMssE,IAE9B/K,IACA97C,EAAM5P,EAAYwV,UAAUk2C,GAEpC,CACA,MAAO3hE,GAEP,CACA,OAAO6lB,CACX,CACA,SAASF,EAAOC,GACZ,IAAIC,EAvvBJ,GA2vBA,OAHID,GAAOA,EAAI,MACXC,EAAM,IAAMD,EAAI+a,KAAK,KAAO,KAEzB9a,CACX,CACA,SAASonD,EAAej6D,GACpB,IAAIuB,EAAU24D,KACd,MAAO,CACHrzD,UAAWmxD,EACXh4D,KAAMA,EACNuB,QAASA,EAEjB,CAcA,SAAS44D,EAAQ9xD,EAAezK,EAASsY,EAASkkD,QACtB,IAApBA,IAAyBA,GAAa,GAC1C,IAAIj0D,EAAa,SAAUG,EAAQ/E,EAASyE,GAKxC,OAjBR,SAAwBpI,EAAS0I,EAAQ/E,EAASyE,GAG/B,MAAXM,GAAkB1I,EAClBnR,EAAM4tE,WAAWz8D,EAASA,EAAQ,KAGlCoI,GAAYvZ,EAAMohE,IAAuCjwD,EAASoI,EAE1E,CAQes0D,CAAe18D,EAAS0I,EAAQ/E,EAASyE,EACpD,EACI0I,EAAc6rD,GAAY38D,GAI1BuzC,EAAe9oC,GAAiBA,EAAcmD,SAClD,GAAI2lC,GAAgBziC,EAAa,CAM7B,IAAI8rD,EAHAJ,GACA3tE,EAAM6kE,QAAQ7E,IAA4C7uD,GAG9D,IACI68D,EACAC,EAFAC,GAAqB,EAUzB,OAPAz2D,EAAaoH,eAAe,SAAUC,GAClCivD,EAAWrpB,EAAa5lC,EAAkBpF,GAAa+P,GACvDykD,GAAqB,EACjBF,IACA,SAAQD,EAAUC,EAAaC,EAEvC,EAAGn3D,EAAamL,GAAcwH,GAC1BykD,EACOH,GAGJ,SAAc,SAAUhhD,EAASk1B,GACpC+rB,EAAcjhD,EACdkhD,EAAahsB,CACjB,EACJ,CACA,OAAO,IACX,CACA,SAAS6rB,GAAY38D,GACjB,IAAI,SAAQA,IAAYA,EAAQ,IAAoC,EAAG,CACnE,IAAI6Q,EAAQhiB,EAAMghE,IAAoCqE,cAAcl0D,GAChE2D,EAAU24D,KASd,MARkB,CACdl6D,KAAMyO,EACN5H,UAAWmxD,EACXz2D,QAASA,EACT2I,eAAgBwjC,EAChBxoC,uBAAwB2zD,EACxBW,WAAY57D,EAGpB,CACA,OAAO,IACX,CACA,SAASs8D,KACL,IACI,IAAI34D,EAAUwB,GAAY,CAAC,EAI3B,OAHIshD,GAAsC2T,KACtCz2D,EAAQ,GAAe,IAA6C,GAAe,IAEhFA,CACX,CACA,MAAOvU,GAEP,CACA,OAAO,IACX,CACA,SAAS4tE,GAAcC,GACnB,IAAIC,EAAeD,EAAkBA,EAAgB,IAAoC,EACzF,OAAKpuE,EAAMghE,IAAoC9K,OAASmY,EAAgB5C,IAC/DH,IAAoBA,EAAiBgD,YACtCtuE,EAAMsgE,KAA6C,EAAM,KAAM,KAE5D,EAGf,CACA,SAASsM,GAAoB/yD,EAAQ1I,EAASo9D,EAAa5B,EAAuBja,EAAcnP,GAC5F,IAAIhqC,EAAW,KAOf,GANKvZ,EAAMwuE,SACPj1D,EAAWohD,GAAcpX,KACThqC,EAASk1D,QACrBzuE,EAAMwuE,OAASj1D,EAASk1D,QAG3B50D,EAAS,KAAOA,GAAU,MAAmB,IAAXA,EAAc,CAGjD,IAAe,MAAXA,GAA6B,MAAXA,GAA6B,MAAXA,KAC/B60D,GAA2BH,GAE5B,YADAvuE,EAAMohE,IAAuCjwD,EAASuhD,GAI9D,GAAI4Y,IAAqBA,EAAiBgD,WAOtC,YALKvC,IAED4C,GAAex9D,EADgB,KAE/B,QAAenR,EAAM2pD,MAAwC,EAAkC,GAAiD,8BAA8B/4B,OAAO/W,EAAQ,sBAAsB+W,QAAQ06C,EAAiBgD,WAAY,yBAAyB19C,OAAOzf,EAAQrN,OAAQ,eAI3SioE,GAAoB6C,GAAa/0D,IAClC80D,GAAex9D,IACf,QAAenR,EAAM2pD,MAAwC,EAAkC,GAAiD,mBACzH9vC,EAAS,wBAA0B1I,EAAQ,IAAoC,YAGtGnR,EAAMohE,IAAuCjwD,EAASuhD,EAE9D,MAIIgc,GAA2BH,GACZ,MAAX10D,GACKN,IACDA,EAAWohD,GAAcpX,IAEzBhqC,IAAawyD,EACb/rE,EAAMqhE,IAA0DlwD,EAASoI,GAGzEvZ,EAAMohE,IAAuCjwD,EAASuhD,KAI1DuY,EAAqB,EACrBjrE,EAAMshE,IAA2CnwD,EAASw7D,GAGtE,CACA,SAAS+B,GAA2BH,GAEhC,QAAInD,GAA6B,KAK5B,SAAkBmD,IAAgC,KAAhBA,GAC/BA,IAAgBhD,IAChBA,EAAegD,IACbnD,EACK,GAInB,CACA,SAASyD,GAAc19D,EAASsY,GAC5B,IAAI4hD,EAOA,OAAOqC,EADUj2D,GAAgBA,EAAa0pD,IAAkD,CAAC,IAA+B,GACrGhwD,EAASsY,GALpC4hD,EAAkBl6D,GAAS,EAOnC,CA6BA,SAAS29D,GAAa3oD,GAClB,IACI,GAAIA,GAAOA,EAAI,IACX,OAAQ,SAASA,EAAI,GAE7B,CACA,MAAO5lB,GAEP,CACA,OAAO,IACX,CACA,SAASwuE,GAAsB59D,EAASsY,GACpC,IAAIulD,EAAY,KAChB,IAAI,SAAQ79D,GAAU,CAElB,IADA,IAAI89D,EAAc99D,EAAQ,IACjB/G,EAAK,EAAGA,EAAK+G,EAAQ,IAAmC/G,IAC7D6kE,GAAe99D,EAAQ/G,GAAIzJ,KAAK,IAgBpC,OAduB8W,EAAa+sC,sBACZyqB,GAp+BP,KAq+BbD,EAAY,GAEP,UAELA,EAAY,GAIZA,EAAY,GACZ,QAAehvE,EAAM2pD,MAAwC,EAAkC,GAAiD,wEAG7I+jB,EADIj2D,GAAgBA,EAAa0pD,IAAkD,CAAC6N,IAAY,GAClF79D,EAASsY,EAClC,CACA,OAAO,IACX,CAKA,SAASklD,GAAex9D,EAAS+9D,GAE7B,QAD0B,IAAtBA,IAA2BA,EAAe,GACzC/9D,GAAyD,IAA9CA,EAAQ,IAAxB,CAGA,IAAIg0D,EAASnlE,EAAMghE,IACnBmE,EAAOlF,IAAyC9uD,GAChD85D,IACA,IAAK,IAAI92D,EAAK,EAAGg7D,EAAYh+D,EAASgD,EAAKg7D,EAAUrrE,OAAQqQ,IAAM,CAC/D,IAAIxT,EAAOwuE,EAAUh7D,GACrBxT,EAAKmK,IAAMnK,EAAKmK,KAAO,EACvBnK,EAAKmK,MACLq6D,EAAOtF,IAAoCl/D,EAC/C,EASJ,SAAuBuuE,GACnB,IACIE,EACJ,GAAInE,GAAsB,EACtBmE,EAHqB,OAKpB,CACD,IAAIC,GAAe5iE,KAAKG,IAAI,EAAGq+D,GAAsB,GAAK,EAEtDqE,GAAe,SAAU7iE,KAAKC,SAAW2iE,EARxB,IAQ4D,EACjFC,GAAeJ,EACfE,GAAiB,UAAQ,SAAQE,EAAc,MAV1B,GAWzB,CAEA,IAAIC,GAAqB,WAA8B,IAAjBH,EAEtClE,EAAWqE,CACf,CAxBIC,CAAcN,GACdO,IAZA,CAaJ,CA0BA,SAASA,KACL,IAAKtE,IAAmBt1D,EAAS,CAC7B,IAAI65D,EAAgBxE,GAAW,SAAQ,EAAGA,GAAW,YAAa,EAC9DyE,GAAa,SAAQ3D,EAAmB0D,GAC5CvE,GAAiB,SAAgB,WAC7BA,EAAiB,KACjBnrE,EAAMsgE,KAA6C,EAAM,KAAM,EACnE,EAAGqP,EACP,CACJ,CACA,SAAStmD,KACL8hD,GAAkBA,EAAe7hD,SACjC6hD,EAAiB,KACjBD,EAAW,IACf,CAKA,SAAS0D,GAAaprB,GAElB,OAAK,SAAkBgpB,GAGD,MAAfhpB,GAGe,MAAfA,GACe,MAAfA,GACe,MAAfA,GACe,MAAfA,GACe,MAAfA,GACe,MAAfA,EAVIgpB,EAAY,KAAqCA,EAAY3qD,QAAQ2hC,IAAe,CAWnG,CA4CA,SAAS5jC,KACL5f,EAAMugE,IAAsC,KAC5CvgE,EAAMghE,IAAsC,KAC5ChhE,EAAMwuE,OAAS,KACfxuE,EAAMktE,QAAU,KAChB52D,EAAW,CAAC,EACZg1D,EAAmB,KACnBL,EAAqB,EACrBC,EAAW,KAEXr1D,GAAU,EACVs1D,EAAiB,KACjB30D,EAAc,KACd40D,EAA4B,EAC5BhqB,EAAoB,EACpBiqB,EAAoB,KACpBjmD,EAAgB,KAChBmmD,EAAe,KACfC,EAAkB,KAClBC,EAAuB,EACvBC,GAAmB,EACnBG,EAAiB,KACjBnmD,GAAoB,EACpB2Z,EAAsB,KACtBysC,EAAoB/wB,GACpBgxB,GAAmB,EACnBE,EAAsB,KACtBpG,EAAc9qB,GACdkG,GAAc,EACdmrB,GAAkB,EAClBG,GAAsB,EACtBF,EAAW,KACXC,EAAgB,KAChB70D,EAAe,MACf,SAAUzX,EAAO,gBAAiB,CAC9BiyB,EAAG,WACC,OAAO,SAAU,CAAC,EAAGw3C,GACzB,GAER,CApjCA7pD,KACA5f,EAAMwiB,MAAQ,WACV6G,KACAxT,GAAU,CACd,EACA7V,EAAMyiB,OAAS,WACP5M,IACAA,GAAU,EACVq1D,EAAW,KAEXiD,KACAsB,KAER,EACAzvE,EAAM2pB,MAAQ,SAAUF,EAAS+Z,EAAU/yB,GAEvC,QADqB,IAAjBgZ,IAAsBA,GAAU,IAC/B5T,EAAS,CAEVwT,KACA,IACI,IAAIumD,EAAW5vE,EAAMsgE,IAA6C72C,EAAS,KAAMhZ,GAAc,GAE/F,OAAO,SAAgBm/D,EAAU,SAAUC,GACvC,OAAIrsC,GACAA,GAAUqsC,EAAI7qC,WACP,GAGPvb,GACO,SAAc,SAAUsD,GAC3BA,GAAS8iD,EAAI7qC,SACjB,GAEG4qC,CACX,EACJ,CACA,MAAOrvE,IACH,QAAeP,EAAM2pD,MAAwC,EAAmC,GAA0C,mDAAoD,SAAiBppD,GAAI,CAAEy6B,WAAW,SAAQz6B,IAC5O,CACJ,CACJ,EACAP,EAAM8vE,cAAgB,WAClB,IAAKj6D,EACD,GAAI61D,GAAoBS,EACpB,IACI,OAAOnsE,EAAMsgE,KAA6C,EAAMuO,GAAe,EACnF,CACA,MAAOtuE,IACH,QAAeP,EAAM2pD,MAAwC,EAAmC,GAA0D,wFAAyF,SAAiBppD,GAAI,CAAEy6B,WAAW,SAAQz6B,IACjS,MAGAP,EAAM2pB,OAAM,EAGxB,EACA3pB,EAAMkiB,UAAY,SAAU1f,EAAMN,GAC9BoU,EAAS9T,GAAQN,CACrB,EACAlC,EAAM6E,IAA4C,SAAU3E,EAAQ4f,EAAM3f,EAAYyoC,GAC9E5oC,EAAMupC,kBACN,QAAevpC,EAAM2pD,MAAwC,EAAmC,GAAmD,iCAEvJ1pD,EAAM4E,IAA0C3E,EAAQ4f,EAAM3f,EAAYyoC,GAC1E,IAAIrkC,EAAavE,EAAMuE,WACvBiS,EAAc,IAAItJ,GAAW4S,EAAK1f,QAClC6qE,EAAqB,EACrBC,EAAW,KAEXlrE,EAAMugE,IAAsC,KAC5C6K,EAA4B,EAC5B,IAAInrD,EAAUjgB,EAAM2pD,MACpBvkC,GAAgB,UAAkB,QAAsB,UAAWtF,EAAK+K,cAAgB/K,EAAK+K,gBAC7FygD,EbnLT,SAA+ByE,GAClC,IAAI5Y,GAAY,WACZ6Y,GAAa,WACbC,GAAe,EACfC,EAAe,GAGfC,EAAS,GACTH,IAAe,SAAkBA,EAAWI,SAAYJ,EAAWI,SACnED,EAAS,GAGb,IAAIE,EAAS,EAGTC,EAAgBC,IAChBnrD,GAAgB,UAAkB,QAAsB,mBAAoB2qD,GAChF,IAII,GAHIS,GAAc,cACdP,GAAe,GAEf9Y,EAAW,CAEX,IAAIvoD,EAASuoD,EAAUjU,MAAQiU,EAC3BvoD,EAAO6hE,UACHD,EAAc5hE,KACdqhE,GAAe,EAG3B,CACJ,CACA,MAAO1vE,GAEH0vE,GAAe,CACnB,CACA,SAASO,EAAc5hE,GACnB,IAAIyoB,GAAU,EAOd,OANIzoB,IACAyoB,GAAU,SAAQzoB,EAAQ,SAAU8hE,EAAYtrD,MAE5C,SAAQxW,EAAQ,UAAW+hE,EAAavrD,GAGzCiS,CACX,CAIA,SAASk5C,IACL,OAAe,IAAXF,GAAuD,IAAXF,CAIpD,CACA,SAASS,IAEL,IAAIC,EAAWN,IACXD,IAAkBO,IAClBP,EAAgBO,GAEhB,SAAWX,EAAc,SAAUl8D,GAC/B,IAAI88D,EAAe,CACfxC,SAAUgC,EACVH,OAAQA,EACRE,OAAQA,GAEZ,IACIr8D,EAAS88D,EACb,CACA,MAAOvwE,GAEP,CACJ,GAER,CAKA,SAASmwE,IACLP,EAAS,EACTS,GACJ,CACA,SAASD,IACLR,EAAS,EACTS,GACJ,CA8BA,MAAO,CACHtC,SAxEJ,WACI,OAAOgC,CACX,EAuEIS,YAAa,WAAc,OAAOd,CAAc,EAChDn1C,OAhCJ,WACI,IAAIk2C,GAAM,WACV,GAAIA,GAAOf,EAAc,CAErB,GADAhX,GAAe+X,EAAK5rD,GAChB+xC,EAAW,CAEX,IAAIvoD,EAASuoD,EAAUjU,MAAQiU,GAC1B,SAAYvoD,EAAO6hE,WACpBxX,GAAerqD,EAAQwW,EAE/B,CACA6qD,GAAe,CACnB,CACJ,EAoBIgB,YAnBJ,SAAqBj9D,GAGjB,OAFAk8D,EAAapgE,KAAKkE,GAEX,CACH2N,GAAI,WACA,IAAIC,EAAQsuD,EAAaruD,QAAQ7N,GACjC,OAAI4N,GAAS,EACFsuD,EAAanlE,OAAO6W,EAAO,QAGlC,CAER,EAER,EAMIsvD,eA9CJ,SAAwBL,GACpBR,EAASQ,EACTD,GACJ,EA6CJ,CawDmCO,CAAsB/rD,GAEzCplB,EAAM8qB,UAAS,QAAe5qB,EAAQ,SAAUkV,GAC5C,IXjIgBg8D,EWiIZlxE,EAASkV,EAAQ9U,IACjBJ,EAAOkxE,gBXlIKA,EWmIQlxE,EAAOkxE,cXlI/C9X,GAAiB8X,GAAiB,IWoIlB,IAEIC,GAFM,SAA8B,KAAMnxE,EAAQ4f,GAE/BkL,UAAUzmB,EAAYklE,IACzC6H,EAAYD,EAAa7Q,IAK7B,GAAI+K,GAAgB+F,IAAc/F,EAAc,CAC5C,IAAIgG,EAAUrxE,EAAOsgE,IAEjB+Q,GAAWA,IAAYD,IAEvBD,EAAa7Q,IAA+C+Q,EAEpE,CACA,IAAIxwD,GAAW,SAAQ,qBAEvBjK,GAAc,SAAiB,aAAc5W,GAAQ,IAChD,SAAW6gB,KACZjK,GAAc,GAElB,IAAIgzD,EAAauH,EAAavH,WAC1BA,EACmB,gBAAfA,GAA+C,cAAfA,GAA6C,iBAAfA,GAC9DjqE,EAAMqiB,UAAU6nD,GAAiCD,UAI9CxzD,EAASyzD,KAEhB,SAAcsH,EAAa5Q,OAE3B4Q,EAAa5Q,IAA6DvgE,EAAOugE,MAErF,SAAUzgE,EAAO,gBAAiB,CAC9BiyB,EAAG,WACC,OAAOo/C,CACX,IAIA7F,IAAoB6F,EAAa7Q,MAIjC+K,EAAeC,EAAkB6F,EAAa7Q,KAG9C1gD,EAAKskB,iBAAmB,KAAalO,QAGrCl2B,EAAMwiB,QAED1C,EAAKskB,iBAAmB,KAAahO,QAE1Cp2B,EAAMyiB,SAENopD,GAAkBA,IAAmBwF,EAAa3Q,MAElD,SAAWmL,EAAgB,SAAU2F,UAC1Bl7D,EAASk7D,EAAaz8D,OACjC,GAEJ02D,EAAuB4F,EAAa1Q,IACpC+K,IAAqG,IAAjF2F,EAAazQ,MAA4J,IAA/EyQ,EAAaxQ,OAA4E,UACvM8K,GAA4G,IAAjF0F,EAAazQ,MAA6E,UACrHgL,GAAwG,IAA/EyF,EAAaxQ,MAA2E,UACjHsL,EAAuBkF,EAAavQ,IACpC7f,IAAgBowB,EAAa/4D,WAC7Bk0D,EAAc6E,EAAaxH,WAC3B,IAAI4H,EAAiBJ,EAAanR,IAC9BsF,IAAyB6L,EAAatQ,QACnC0Q,GAAkB3X,MACrBgM,EAAauL,EAAavL,WAG1B4L,EAAgBlM,IAAyByG,GACrCzG,GAAyBK,IAAgBC,GACzCN,GAAyB0G,IAAwBuF,EACzD,GAAIzxE,EAAMghE,IAAqC,CAM3C,GAAI0Q,EACA,IACI1xE,EAAMghE,IAAsChhE,EAAMghE,IAAoC15B,UAAUrnB,EAASoxD,EAAc7L,EAC3H,CACA,MAAOjlE,IACH,QAAeP,EAAM2pD,MAAwC,EAAmC,GAA4D,sFAAuF,SAAiBppD,GAAI,CAAEy6B,WAAW,SAAQz6B,IACjS,CAEJ4tE,IACJ,MAEInuE,EAAMghE,IAAsCwE,EACtC,IAAIE,GAAyBzlD,EAASoxD,GAAgB,IAAI1L,GAAgB1lD,EAASoxD,GAE7FxL,EAAcC,EACdmG,EAAsBzG,EACtB0G,EAAsBuF,EACtBrF,GAAmBiF,EAAapQ,MAAkE,SAAiB,GACnHsL,IAAwB8E,EAAanQ,IACrClhE,EAAMktE,QAAU,IAAIhE,GAAOmI,EAAa9H,mBAAoBtpD,GAC5Dof,EAAsBgyC,EAAa5Q,KAC9B,SAAcphC,IAw0B3B,SAAqCqF,EAAoBxkC,GACrD,IAAIyxE,EAAoBzxE,EAAO0xE,oCAE/B,SADgC,SAAkBD,KAA6BA,IAKlE,IAAIE,OADA,kEAEHriE,KAAKk1B,EACvB,CAj1BoDotC,CAA4BzyC,EAAqBn/B,KACzF,QAAe+f,EAAS,EAAmC,IAAyD,+BAAiCof,GAEzJwsC,EAAiBwF,EAAa3Q,KAC1B,SAAS6K,KAAkB3T,GAAsC2T,IAAiBM,GAAkBA,EAAe,IAAoC,GACvJ,SAAWA,EAAgB,SAAU2F,GACjC3xE,EAAMqiB,UAAUsvD,EAAaz8D,OAAQy8D,EAAatvE,MACtD,GAGA2pE,EAAiB,KAErBlrB,EAAqB0wB,EAAan5D,kBAClC,IAAI8I,EAuOZ,WACI,IAgEI,MATa,CACT9I,kBAAmByoC,EACnBxoC,SAAS,EACTC,oBAAoB,EACpBE,WAAY2oC,EACZ1oC,eAAgBqzD,EAChBpzD,mBAAoBmzD,EACpB/yD,yBA7DkB,CAClBC,cAAe,SAAUQ,EAAKC,EAAYnI,GACtC,IAAI4gE,EAAajF,EAAe37D,GAChC,GAAK4gE,EAmBL,OAAOtF,EAAWpzD,EAAK04D,EAC3B,EACAh5D,gBAAiB,SAAUQ,EAAUG,EAAYC,EAAUxI,GACvD,IAAI4gE,EAAajF,EAAe37D,GAChC,GAAK4gE,EAOL,OAAOnF,GAAoBrzD,EAASM,OAAQk4D,EAAYx4D,EAASjE,IAAKy8D,EAAW,IAAmCx4D,EAASwqC,WAAYpqC,GAAY,GACzJ,EACAV,cAAe,SAAUe,EAASV,EAAYnI,GAC1C,IAAI4gE,EAAajF,EAAe37D,GAChC,GAAK4gE,EAOL,OAAOrF,EAAqB1yD,EAAS+3D,EAAYA,EAAW,IAChE,EACA54D,cAAe,SAAU5F,EAAMmG,EAAYO,GAKvC,OA6WhB,SAAwB9I,EAASuI,EAAYO,GACzC,IACI1G,EADkBpC,KACwB47D,WAC9C,GAAKR,EAqBDD,GAAiBA,EAAc/4D,GAAM,IACrC,QAAevT,EAAM2pD,MAAwC,EAAkC,GAAiD,+EAtB1H,CAGtB,IADA,IAAIqoB,EAAiB,GACZ5nE,EAAK,EAAGA,EAAKmJ,EAAK,IAAmCnJ,IAAM,CAChE,IAAI8P,EAAa3G,EAAKnJ,GAClB+b,EAAM,CAACjM,GAEND,EADM6zD,GAAY3nD,GACJzM,GAKf1Z,EAAM4tE,WAAWznD,EAAKA,EAAI,KAH1B6rD,EAAe1qE,IAA8B4S,EAKrD,CACI83D,EAAe,IAAoC,IACnD1F,GAAiBA,EAAc0F,GAAgB,IAC/C,QAAehyE,EAAM2pD,MAAwC,EAAkC,GAAiD,2EAExJ,CAKJ,CAxYuBvwC,CAAe7F,EAAMmG,EAAYO,EAC5C,GAYR,CACA,MAAO1Z,GAEP,CACA,OAAO,IACX,CA9S6B0X,GAEhBR,EAKDA,EAAawJ,UAAUD,IAJvBvJ,EAAe,IAAIyJ,GAAA,GACNrc,IAA0Cmc,EAAgBf,GAK3E,IAAIgyD,EAAkBZ,EAAa1wD,gBAC/BD,EAAgB,KAChBwxD,GAAgB,KAGhB3wD,IAAgB,SAAkB,CAAC,EAA8B,EAA2B,GAA8B8vD,EAAav5D,YAC3I4I,EAAgBjJ,GAAgBA,EAAa0pD,IAAkD5/C,IAAe,GAC9G,IAAI4wD,GAAe16D,GAAgBA,EAAamtC,kBAChDynB,EAAW,SAAUl7D,EAASsY,GAC1B,OAAOikD,EAAQyE,GAAchhE,EAASsY,EAC1C,EACA6iD,EAAgB,SAAUn7D,EAASsY,GAC/B,OAAOikD,EAAQyE,GAAchhE,EAASsY,GAAS,EACnD,EACA/I,EAAgByrD,EAAuB8F,EAAmBvxD,GAAiBuxD,GAAmBE,GAC9FnyE,EAAMugE,IAAsC,SAAUpvD,EAASsY,GAC3D,OAAOikD,EAAQhtD,EAAevP,EAASsY,EAC3C,EACI2iD,IAEAf,EAAoB0D,IAExB,IAAIqD,IAAiB,SAAkB,CAAC,EAA8B,GAA4Bf,EAAa7vD,kBAC1G4qD,IAEDgG,GAAiBA,GAAeC,OAAO,SAAUrD,GAAa,OAAqB,IAAdA,CAA2C,IAEpHkD,GAAgBz6D,GAAgBA,EAAa0pD,IAAkDiR,IAAgB,GAC/GF,GAAgB/F,EAAuB8F,EAAmBC,IAAiBD,GACtE9F,GAAwBkF,EAAa7vD,mBAAqB6pD,IAAsB6G,KACjF7G,EAAoB,SAAUl6D,EAASsY,GACnC,OAAOikD,EAAQwE,GAAe/gE,EAASsY,EAC3C,GAEC4hD,IACDA,EAAoBgB,GAExB3mD,EAAoB2rD,EAAajuD,iBACjC0oD,EAAoBuF,EAAazH,kBAAoB7uB,GACrDgxB,EAAmBsF,EAAa1H,gBAChCqC,EAAoBqF,EAAa3H,gBACrC,GACJ,EACA1pE,EAAMwrB,iBAAmB,SAAU5qB,EAAe8qB,GAE9C,IAAIuhD,GADJvhD,EAAU1rB,EAAM2rB,WAAWD,IACFi+B,MACzB,IAEI,IADiBqjB,EAAUpsE,EAAeqsE,GAEtC,OAEJ,IAAII,EAAaF,EAAavsE,EAAeqsE,GAC7C,IAAKI,EACD,OAGJ,IAAIl8D,EAAUqF,EAAYwV,UAAUqhD,GAEhClI,EAASnlE,EAAMghE,IACnBmN,GAAch9D,GACd,IAAImhE,EAAc,CACd3xE,KAAMwQ,EACNrG,IAAK,GAGTq6D,EAAOtF,IAAoCyS,GAE3C7C,IACJ,CACA,MAAOlvE,IACH,QAAe0sE,EAAY,EAAkC,GAA4D,iFAAkF,SAAiB1sE,GAAI,CAAEy6B,WAAW,SAAQz6B,IACzP,CAEAP,EAAM4rB,YAAYhrB,EAAe8qB,EACrC,EACA1rB,EAAMoiB,iBAAmB,WACrB,OAAQvM,GAAiC,IAAtBurC,GAA+E,IAApDphD,EAAM6kE,QAAQ,KAChE,EACA7kE,EAAMuyE,mBAAqB,WACvB,OAAOjH,CACX,EAIAtrE,EAAM0sE,qBAAuB,SAAUjzB,EAAKtoC,EAASw7D,GAEjD,IAAImC,GAAa39D,GAGjB,OAAOu7D,EAAqBjzB,EAAKtoC,EAASw7D,EAC9C,EAMA3sE,EAAMsgE,IAA+C,SAAU72C,EAAS+oD,EAAc/hE,GAElF,IAAI3E,EACJ,QAFqB,IAAjB2d,IAAsBA,GAAU,IAE/B5T,EACD,IACI,IAAIsvD,EAASnlE,EAAMghE,IAEnB,GAAKt7C,EAgBDy/C,EAAOpF,UAhBa,CACpB,GAAIoF,EAAO,MAAoC,EAAG,CAC9C,IAAIh0D,EAAUg0D,EAAOC,YA0rBzC,SAA4BqN,EAAahpD,GACrC,IAAIc,EAlBR,WACI,IACIze,EADAsvB,EAAO,eAEPtb,EAAO9f,EAAM8f,KAYjB,OAXIA,IAIIhU,EADAgU,EAAKsb,GACItb,EAAKsb,KAILtb,EAA2B,sBAGrChU,CACX,CAEkB4mE,GACd,GAAInoD,GAAWA,EAAQooD,kBACnB,IACIpoD,EAAQooD,kBAAkBF,EAAahpD,EAC3C,CACA,MAAOlpB,IACH,QAAeP,EAAM2pD,MAAwC,EAAmC,GAAoD,sCAAuC,SAAiBppD,GAAI,CAAEy6B,WAAW,SAAQz6B,IACzO,CAER,CAnsBoBqyE,CAAmBniE,GAAc,EAAqCgZ,GAGlE3d,EADA0mE,EACSA,EAAa1yE,KAAKE,EAAOmR,EAASsY,GAGlCzpB,EAAMugE,IAAoCpvD,EAASsY,EAEpE,CAEa,IAAI4Q,IACrB,CAIAhR,IACJ,CACA,MAAO9oB,GAEH,IAAIsyE,GAAQ,YACPA,GAASA,EAAQ,KAClB,QAAe7yE,EAAM2pD,MAAwC,EAAmC,GAAiD,gEAAiE,SAAiBppD,GAAI,CAAEy6B,WAAW,SAAQz6B,IAGpQ,CAEJ,OAAOuL,CACX,EACA9L,EAAM6rB,kBAAoB,WACtB,MAAO,CACHE,OAAQ,WACJ,OAAOw/C,CACX,EACAn7D,cAAeo9D,EACfxhD,UAAW3F,EACXrE,MAAOkE,EACP+F,cAAe,SAAUznB,GACrB,QAASwoE,EAAUxoE,EACvB,EAER,EACAxE,EAAMmsB,YAAc,SAAUC,EAAWC,GACrCrsB,EAAM8vE,iBACN,QAAgBxE,GAAkB,GAClC1rD,IACJ,EAIA5f,EAAMohE,IAAyC,SAAUjwD,EAAS1Q,EAAS6D,GAEvE,IAAIwqE,GAAa39D,GAGjB,OAiJJ,SAAkBA,EAAS1Q,IACvB,QAAeT,EAAM2pD,MAAwC,EAAkC,GAAsC,4BAA6B,CAAElpD,QAASA,IAC7KT,EAAM6kE,SAAW7kE,EAAM6kE,QAAQ5E,IAAyC9uD,EAC5E,CApJWmwC,CAASnwC,EAAS1Q,EAC7B,EAIAT,EAAMqhE,IAA4D,SAAUlwD,EAAS8hD,GAEjF,IAAI6b,GAAa39D,GAGjB,OA8IJ,SAA2BA,EAAS8hD,GAKhC,IAJA,IAAI6f,EAAS,GACTC,EAAQ,GAGH5+D,EAAK,EAAG6+D,EADJ/f,EAAQ39B,OAAO29C,UACQ9+D,EAAK6+D,EAASlvE,OAAQqQ,IAAM,CAC5D,IAAImsC,EAAQ0yB,EAAS7+D,GACjB++D,EAAY/hE,EAAQpG,OAAOu1C,EAAM1+B,MAAO,GAAG,GAC3CgtD,GAAatuB,EAAMkD,YACnBuvB,EAAMzrE,IAA8B4rE,GAIpCJ,EAAOxrE,IAA8B4rE,EAE7C,CACI/hE,EAAQ,IAAoC,GAC5CnR,EAAMshE,IAA2CnwD,EAAS8hD,EAAQsO,KAElEuR,EAAO,IAAoC,GAC3C9yE,EAAMohE,IAAuC0R,GAAQ,SAAsB,KAAM,CAAC,kBAAmB7f,EAAQsO,IAAkD,KAAMtO,EAAQ4H,eAAe35B,KAAK,OAEjM6xC,EAAM,IAAoC,IAC1CpE,GAAeoE,IACf,QAAe/yE,EAAM2pD,MAAwC,EAAkC,GAAiD,+BAC5Hx4C,EAAQ,IAAoC,aAAe2hE,EAAO,IAClF,wBAA0BC,EAAM,IAAoC,WAAa9f,EAAQtI,IAAmD,UAExJ,CA1KWwoB,CAAkBhiE,EAAS8hD,EACtC,EAIAjzD,EAAMshE,IAA6C,SAAUnwD,EAASw7D,GAElE,IAAImC,GAAa39D,GAGjB,OAoKJ,SAAoBA,GAChBnR,EAAM6kE,SAAW7kE,EAAM6kE,QAAQ5E,IAAyC9uD,EAC5E,CAtKWy8D,CAAWz8D,EAEtB,EAIAnR,EAAMysE,WAAa,SAAUpzD,EAAKlI,GAE9B,IAAI29D,GAAa39D,GAGjB,OAAOs7D,EAAWpzD,EAAKlI,EAC3B,CAoqBJ,GACOtR,CACX,CA4BA,OA/nCA,QAAUmrE,EAAQrrE,GAomClBqrE,EAAOsC,kBAAoB,SAAU8F,EAAM9oE,EAAMlK,EAAQwpE,GACrD,IAAI1H,EAQJ,OAHIA,EAJA53D,IAAS8oE,EAAK9oE,OAAS,SAAkBA,GAI9B8oE,GAHA,SAAS,QAAS,CAAC,EAAGA,GAAO,CAAE9oE,KAAMA,KAKtC0/D,GAAoB9H,EAAS7uD,WAAaoxD,IACzCrkE,EAAQ8hE,EAAU0H,EACrC,EAiBOoB,CACX,CAjoC2B,CAioCzBx9C,GAAA,GK/rCK,SAAS6lD,GAAsBC,GAClC,IAAKA,EACD,MAAO,CAAC,EAEZ,IAAIC,EAAUD,EAAiB/rE,GANX,KAOhBuE,GAAS,SAAUynE,EAAS,SAAUC,EAAQC,GAC9C,IAAIC,EAAUD,EAAGlsE,GAPQ,KAQzB,GAAkD,IAA9CmsE,EAAQxuE,GAAyC,CACjD,IAAIgK,EAAMwkE,EAAQ,GAAGlsE,KACjBtF,EAAQwxE,EAAQ,GACpBF,EAAOtkE,GAAOhN,CAClB,CACA,OAAOsxE,CACX,EAAG,CAAC,GACJ,IAAI,SAAQ1nE,GAAQ5G,GAAoC,EAAG,CAEvD,GAAI4G,EAAO6nE,eAAgB,CAEvB,IAAIC,EAAiB9nE,EAAO2uB,SAAW3uB,EAAO2uB,SAAW,IAAM,GAC/D3uB,EAAO6gD,GAA0D7gD,EAAO6gD,IAA4D,WAAainB,EAAiB,MAAQ9nE,EAAO6nE,cACrL,CAEA7nE,EAAO6gD,GAA0D7gD,EAAO6gD,IAA2DH,GAC/H,SAAY1gD,EAAO6gD,GAAyD,OAC5E7gD,EAAO6gD,GAA0D7gD,EAAO6gD,GAAwD/8C,MAAM,GAAI,GAElJ,CACA,OAAO9D,CACX,CACO,IClCH,GAAI,G,UCOG,GAA2B,qBAC3B+nE,GAAyB,mBACzB,GAAoB,cACpBC,GAA6B,0BDFpC,QAAkB1nE,EAClB2nE,KAAuB,GAAK,CACxBz2C,uBAAuB,SAU/B,SAAuBp7B,GAEnB,OAAOA,GAASA,EAAQ,CAC5B,EAb4D,OAErD2xE,IAAsD,GACzD,GAAGx0E,YAAc,GACjB,GAAG,IAA0D,GAC7D,GAAGi6C,eAAgB,GAAK,CAAC,GACN,WAAI,CAAEC,KAAM,GAC3B,IACJ,GAAGn5B,gBAAkB,CAAC,EACtB,IAQA4zD,GAAqC,WAKrC,SAASA,EAAoB9zE,GACzB,IACI+zE,EADAn0D,EAAO,IAAIlgB,GAAA,EA4Ef,SAASs0E,EAAOvzE,GACRA,IAEAA,EAAKQ,SAAWR,EAAKQ,UAAY,CAAC,EAClCR,EAAK0S,SAAW1S,EAAK0S,UAAY,aAErCyM,EAAKpf,MAAMC,EACf,GAhFI,SAAkBT,KACjB,SAAkBA,EAAO,OAA+D,SAAkBA,EAAO2zE,QAClH,QAAW,gCAEf,OAAaG,EAAqBj0E,KAAM,SAAUC,GAsB9C,SAASm0E,IACL,IAAIzgD,GAAa,QAAoBxzB,GAAU,CAAC,EAAG6zE,IACnDE,EAAUvgD,EAAWpzB,IACrBwf,EAAK2nB,eAAc,QAAe/T,EAAY,WAC1C,IAAI0gD,EAAWH,EAAQJ,IACvB,IAAI,SAAcO,GAAW,CACzB,IAAIC,GAAc,SAAkB,SAAUtnD,EAASk1B,IACnD,SAAgBmyB,EAAU,SAAU7wB,GAChC,IAAI+wB,EAAQ/wB,EAAIrhD,MACZuiC,EAAOwvC,EAAQ,KACd1wB,EAAIve,UAAYsvC,IAEjBL,EAAQJ,IAAyDS,EAEjE7vC,EADiB4uC,GAAsBiB,GACrBC,oBAAsB9vC,GAE5C1X,EAAQ0X,EACZ,EACJ,GACI+vC,GAAa,SAAkB,SAAUznD,EAASk1B,IAClD,SAAgBmyB,EAAU,SAAU7wB,GAChC,IAAI+wB,EAAQ/wB,EAAIrhD,MACZoT,EAAM2+D,EAAQ,IAClB,IAAK1wB,EAAIve,UAAYsvC,EAAO,CACxB,IACIG,EADapB,GAAsBiB,GACfI,kBACxBp/D,EAAMm/D,EAASA,EAAShoB,EAAsBn3C,CAClD,CACAyX,EAAQzX,EACZ,EACJ,GACA2+D,EAAQ,IAA6DI,EACrEJ,EAAQ,IAA+CA,EAAQH,KAAqEU,CACxI,CACA,IAAI,SAASJ,GAAW,CACpB,IAAIO,EAAKtB,GAAsBe,GAC3BK,EAASE,EAAGD,kBAChBT,EAAQ,IAA+CA,EAAQH,IAAoEG,EAAQH,IAAqEW,EAAShoB,EACzNwnB,EAAQ,IAA6DU,EAAGJ,oBAAsBN,EAAQ,GAC1G,CAEAA,EAAQ,IAA+CA,EAAQH,IAAoEG,EAAQH,IAAoEG,EAAQ,GAC3N,IAEAn0D,EAAK80D,WAAWX,EAAS,CAAC,IAAIjJ,IAClC,EAjEA,SAAUhrE,EAAO,SAAU,CACvBiyB,EAAG,WAAc,OAAOgiD,CAAS,IAErCE,IACAn0E,EAAM40E,WAAaT,EACnBn0E,EAAMU,MAAQwzE,GACd,SAAel0E,EAAO8f,EAAM,CACxB,QACA,mBACA,0BACA,SACA,YACA,YACA,eACA,cACA,cACA,cACA,YACA,2BAgDR,EASJ,CAmBA,OAFAk0D,EAAoBzyE,QAAQ,EAErByyE,CACX,CA9GwC,E,gDE/BpCpyE,E,SAQAizE,EAAc,cAKdC,EAAY,YAKZC,EAAc,WAKdC,EAAmB,gBAKnBC,EAAc,cAKdC,EAAe,YAUfC,EAAgB,cAKhBC,EAAqBD,EAIrBE,EAAyB,UAKzBC,EAAe,YAKfC,EAAa,YAIbC,EAAoB,OAASD,EAI7BE,EAAyB,iBAIzBC,EAAkB,gBAKlBC,EAAiB,cAKjBC,EAAkB,eAClBC,EAAM/7B,OAKNg8B,EAAqBD,EAAoB,eAIzCE,EAAkBF,EAAyB,oBAG3CG,GAAO,WACPC,EAAWD,EAAKP,KAA4BO,EAAKP,GAA0B,CAC3E97C,GAAI/3B,EAAK,CAAC,EACNA,EAAGg0E,IAAmB,EACtBh0E,EAAG+zE,IAAkB,EACrB/zE,GACJuvB,EAAG,MAMP,SAAS+kD,EAA0BtnE,GAC/B,OAAOA,IAAWA,IAAWinE,EAAIf,IAAclmE,IAAWg9C,MAAMkpB,GACpE,CAKA,SAASqB,EAAkCvnE,GACvC,OAAOsnE,EAA0BtnE,IAAWA,IAAWwnE,SAAStB,EACpE,CAKA,SAASuB,EAAaznE,GAClB,IAAI0nE,EACJ,GAAI1nE,EAAQ,CAER,GAAIknE,EACA,OAAOA,EAAmBlnE,GAE9B,IAAI2nE,EAAW3nE,EAAO2mE,IAAe3mE,EAAOkmE,KAAelmE,EAAOimE,GAAejmE,EAAOimE,GAAaC,GAAa,MAElHwB,EAAW1nE,EAAO4mE,IAAsBe,GACnC,SAAkB3nE,EAAQ4mE,YAGpB5mE,EAAO8mE,GACdY,EAAW1nE,EAAO4mE,GAAqB5mE,EAAO8mE,IAAoB9mE,EAAO4mE,GACzE5mE,EAAO8mE,GAAmBa,EAElC,CACA,OAAOD,CACX,CAMA,SAASE,EAAa5nE,EAAQwsB,GAC1B,IAAI6uC,EAAQ,GACZ,GAAI8L,EACA9L,EAAQ8L,EAAgBnnE,QAGxB,IAAK,IAAIS,KAAUT,EACO,iBAAXS,IAAuB,SAAkBT,EAAQS,IACxD46D,EAAMn6D,KAAKT,GAIvB,GAAI46D,GAASA,EAAMnmE,OAAS,EACxB,IAAK,IAAIsG,EAAK,EAAGA,EAAK6/D,EAAMnmE,OAAQsG,IAChCgxB,EAAK6uC,EAAM7/D,GAGvB,CASA,SAASqsE,EAAoB7nE,EAAQkpC,EAAU4+B,GAC3C,OAAQ5+B,IAAa+8B,UAAsBjmE,EAAOkpC,KAAci9B,IAAgB2B,IAAW,SAAkB9nE,EAAQkpC,KAAcA,IAAay9B,GAAcz9B,IAAag9B,CAC/K,CAMA,SAAS6B,EAAgBl2E,IACrB,SAAe,iBAAmBA,EACtC,CAyBA,SAASm2E,EAAY/qE,EAAQ3J,GACzB,IAAK,IAAIkI,EAAKyB,EAAO/H,OAAS,EAAGsG,GAAM,EAAGA,IACtC,GAAIyB,EAAOzB,KAAQlI,EACf,OAAO,EAGf,OAAO,CACX,CA0HA,SAAS20E,EAAmBxnC,EAAOynC,EAAWloE,EAAQmoE,EAAeC,GAajE,IAAKd,EAA0B7mC,GAAQ,CACnC,IAAI4nC,EAAgBroE,EAAOomE,GAAoBpmE,EAAOomE,KAAqB,SAAU,MACrF,IAAKkB,EAA0Be,GAAgB,CAC3C,IAAIC,EAAcD,EAAcH,GAAcG,EAAcH,KAAc,SAAU,OAE1C,IAAtCG,EAAc7B,KACd6B,EAAc7B,KAAwB4B,GAErCd,EAA0BgB,IAC3BV,EAAa5nE,EAAQ,SAAUpM,GAEvBi0E,EAAoB7nE,EAAQpM,GAAM,IAAUoM,EAAOpM,KAAUu0E,EAAcv0E,KAE3E00E,EAAY10E,GAAQoM,EAAOpM,UACpBoM,EAAOpM,MAET,SAAkB6sC,EAAO7sC,IAAU6sC,EAAM7sC,KAAU6sC,EAAM7sC,GAAMyyE,MAChE5lC,EAAM7sC,GA7B9B,SAAiC6sC,EAAOyI,GACpC,IAAIq/B,EAAgB,WAEhB,IAAIC,EA1EhB,SAAsBxoE,EAAQkpC,EAAUzI,EAAOgoC,GAC3C,IAAID,EAAW,KAGf,GAAIxoE,IAAU,SAAkBygC,EAAO6lC,GAAe,CAClD,IAAI+B,EAAgBroE,EAAOomE,KAAqB,SAAU,MAQ1D,IAPAoC,GAAYH,EAAc5nC,EAAM6lC,MAAkB,SAAU,OAAOp9B,KAG/D6+B,EAAgB,YAAc7+B,EAAW,KAAOi9B,IAI/CqC,EAASjC,KAAwD,IAAtC8B,EAAc7B,GAA+B,CAQzE,IANA,IAAIkC,IAAc,SAAkB1oE,EAAQkpC,GAExCy/B,EAAWlB,EAAaznE,GACxB4oE,EAAU,GAGPF,GAAcC,IAAapB,EAAkCoB,KAAcX,EAAYY,EAASD,IAAW,CAC9G,IAAIE,EAAYF,EAASz/B,GACzB,GAAI2/B,EAAW,CACXH,EAAcG,IAAcJ,EAC5B,KACJ,CAEAG,EAAQ1nE,KAAKynE,GACbA,EAAWlB,EAAakB,EAC5B,CACA,IACQD,IAGA1oE,EAAOkpC,GAAYs/B,GAGvBA,EAASjC,GAAiB,CAC9B,CACA,MAAO50E,GAGH02E,EAAc7B,IAAsB,CACxC,CACJ,CACJ,CACA,OAAOgC,CACX,CA0B2BM,CAAa33E,KAAM+3C,EAAUzI,EAAO8nC,IAzB/D,SAAuBr/B,EAAUzI,EAAOgoC,GACpC,IAAII,EAAYpoC,EAAMyI,GAStB,OAPI2/B,IAAcJ,IAEdI,EAAYpB,EAAahnC,GAAOyI,WAEzB2/B,IAAc1C,GACrB4B,EAAgB,IAAM7+B,EAAW,cAAgBi9B,GAE9C0C,CACX,CAciFE,CAAc7/B,EAAUzI,EAAO8nC,GAEpG,OAAOC,EAAS3sD,MAAM1qB,KAAMgE,UAChC,EAIA,OADAozE,EAAclC,GAAe,EACtBkC,CACX,CAkBsCS,CAAwBvoC,EAAO7sC,IAGzD,EAER,CACJ,CACJ,CAkCA,SAASq1E,EAAYjpE,EAAQkpE,GACzB,OAAI,SAAkBlpE,EAAQkmE,GAEnBlmE,EAAOpM,MAAQs1E,GAAgBxC,IAEhC1mE,GAAU,CAAC,GAAGimE,IAAiB,CAAC,GAAGryE,MAAQs1E,GAAgBxC,CACzE,CAqDe,SAASyC,EAAa5oC,EAAUvgC,EAAQopE,EAAcC,IAE5D,SAAkB9oC,EAAU2lC,IAC7B6B,EAAgB,4CAGpB,IAAIuB,EAAa/oC,EAAS2lC,IA5F9B,SAAyBoD,EAAYC,GAEjC,GAAIrC,EAAoB,CAIpB,IAFA,IAAI0B,EAAU,GACVY,EAAY/B,EAAa8B,GACtBC,IAAcjC,EAAkCiC,KAAexB,EAAYY,EAASY,IAAY,CACnG,GAAIA,IAAcF,EACd,OAAO,EAIXV,EAAQ1nE,KAAKsoE,GACbA,EAAY/B,EAAa+B,EAC7B,CACA,OAAO,CACX,CAEA,OAAO,CACX,EA0ESC,CAAgBH,EAAYtpE,IAC7B+nE,EAAgB,IAAMkB,EAAY1oC,GAAY,0BAA4B0oC,EAAYjpE,GAAU,KAEpG,IAAIkoE,EAAY,MACZ,SAAkBoB,EAAYhD,GAE9B4B,EAAYoB,EAAWhD,IAMvB4B,EAjciB,WAicgBe,EAAY1oC,EAAU,KAAO,IAAM8mC,EAAS9kD,EAC7E8kD,EAAS9kD,IACT+mD,EAAWhD,GAAgB4B,GAE/B,IAAIwB,EAAcP,EAAa1C,GAC3BkD,IAAgBD,EAAY3C,GAC5B4C,GAAeN,QAAuC7rE,IAA5B6rE,EAAQtC,KAClC4C,IAAgBN,EAAQtC,IAG5B,IAAI6C,EAlTR,SAA2BL,GAEvB,IAAIK,GAAY,SAAU,MAS1B,OAPAhC,EAAa2B,EAAY,SAAU31E,IAE1Bg2E,EAAUh2E,IAASi0E,EAAoB0B,EAAY31E,GAAM,KAE1Dg2E,EAAUh2E,GAAQ21E,EAAW31E,GAErC,GACOg2E,CACX,CAsSoBC,CAAkB7pE,GAE9B8pE,EApRR,SAAuBR,EAAYC,EAAYK,EAAWD,GACtD,SAASI,EAAe/pE,EAAQgqE,EAAU9gC,GACtC,IAAIF,EAAUghC,EAAS9gC,GACvB,GAAIF,EAAQq9B,IAAgBsD,EAAa,CAErC,IAAItB,EAAgBroE,EAAOomE,IAAqB,CAAC,GACP,IAAtCiC,EAAc7B,KACdx9B,GAAWq/B,EAAc2B,EAAS1D,KAAkB,CAAC,GAAGp9B,IAAaF,EAE7E,CACA,OAAO,WAEH,OAAOA,EAAQntB,MAAM7b,EAAQ7K,UACjC,CACJ,CAEA,IAAI20E,GAAY,SAAU,MAC1BlC,EAAagC,EAAW,SAAUh2E,GAE9Bk2E,EAAUl2E,GAAQm2E,EAAeR,EAAYK,EAAWh2E,EAC5D,GAKA,IAHA,IAAIq2E,EAAYxC,EAAa6B,GACzBV,EAAU,GAEPqB,IAAc1C,EAAkC0C,KAAejC,EAAYY,EAASqB,IAEvFrC,EAAaqC,EAAW,SAAUr2E,IAKzBk2E,EAAUl2E,IAASi0E,EAAoBoC,EAAWr2E,GAAOszE,KAE1D4C,EAAUl2E,GAAQm2E,EAAeR,EAAYU,EAAWr2E,GAEhE,GAIAg1E,EAAQ1nE,KAAK+oE,GACbA,EAAYxC,EAAawC,GAE7B,OAAOH,CACX,CAwOoBI,CAAcZ,EAAYtpE,EAAQ4pE,EAAWD,GAG7DP,EAAappE,EAAQ8pE,GAErB,IAAI1B,IAAoBlB,KAAwBwC,EAAY1C,GACxDoB,GAAmBiB,IACnBjB,IAAoBiB,EAAQrC,IAGhCiB,EAAmBqB,EAAYpB,EAAWloE,EAAQ4pE,GAA+B,IAApBxB,EACjE,CAMAe,EAAa1C,GAA0BY,EAASt8C,C,uGC9f5Co/C,EAAc,UAIdC,EAAW,WAEf,SAASC,EAAgB/2E,EAAOgd,GAC5B,OAAOg6D,EAAQh3E,EAAO,SAAUA,GAC5B,OAAOgd,EAAKA,EAAG,CACXrF,OAAQ,YACRmrB,UAAU,EACV9iC,MAAOA,IACNA,CACT,EAAG,SAAU0b,GACT,OAAOsB,EAAKA,EAAG,CACXrF,OAAQm/D,EACRh0C,UAAU,EACVpnB,OAAQA,IACPA,CACT,EACJ,CACA,SAASs7D,EAAQh3E,EAAOi3E,EAAWC,EAAUC,GACzC,IAAIvtE,EAAS5J,EACb,IACI,IAAI,SAAcA,IACVi3E,GAAaC,KACbttE,EAAS5J,EAAMo3E,KAAKH,EAAWC,SAInC,IACQD,IACArtE,EAASqtE,EAAUj3E,GAE3B,CACA,MAAOq3E,GACH,IAAIH,EAIA,MAAMG,EAHNztE,EAASstE,EAASG,EAK1B,CAER,CACA,QACQF,GAMZ,SAAmBn3E,EAAOm3E,GACtB,IAAIvtE,EAAS5J,EACTm3E,KACI,SAAcn3E,GAEV4J,EADA5J,EAAMs3E,QACGt3E,EAAMs3E,QAAQH,GAGdn3E,EAAMo3E,KAAK,SAAUp3E,GAE1B,OADAm3E,IACOn3E,CACX,EAAG,SAAU0b,GAET,MADAy7D,IACMz7D,CACV,GAIJy7D,IAIZ,CA3BYI,CAAU3tE,EAAQutE,EAE1B,CACA,OAAOvtE,CACX,CAiCA,IAoBI4tE,EALAC,EAAgB,CAChB,UAAW,YAAa,WAAYX,GAGpCY,EAAiB,gBAErB,SAASC,EAAgB9+C,GACrB,IAAIv2B,EAIJ,OAHIu2B,GAAOA,EAAI++C,cACXt1E,EAAMu2B,EAAI++C,YAAY,YAEhBt1E,GAAOA,EAAIu1E,SACzB,CAwBA,IAMIC,EA2YAC,EAiEAC,EAkDAC,EApgBAC,EAA2B,qBAC3BC,EAAsBD,EAAyBE,cAC/CC,EAAoB,GACpBC,EAAmB,EAIvB,SAASC,EAAUv4E,GACf,OAAI,SAAWA,GACJA,EAAMa,YAEV,SAAQb,EACnB,CAQA,SAASw4E,EAAeC,EAAYC,EAAWC,GAC3C,IAGIC,EAMAC,EATAC,GAAiB,SAASj3E,UAAW,GACrCk3E,EAAS,EACTC,GAAe,EAEfC,EAAS,GACT5+C,EAAMi+C,IAENY,GADYb,EAAkBz2E,OAAS,GAAIy2E,EAAkBA,EAAkBz2E,OAAS,IAC7E,GACXu3E,EAA6B,KAEjC,SAASC,EAAMC,EAAYC,GACvB,IA+BI,OA9BAjB,EAAkBzqE,KAAKysB,GACvB6+C,GAAW,EACXC,GAA8BA,EAA2B/xD,SACzD+xD,EAA6B,KACXV,EAAW,SAAU5tD,EAASk1B,GAC5Ck5B,EAAOrrE,KAAK,WACR,IACI,IAAIwhB,EAAqB,IAAX2pD,EAAgBM,EAAaC,EACvCt5E,GAAQ,SAAYovB,GAAWwpD,GAAiB,SAAWxpD,GAAWA,EAAQwpD,GAAiBxpD,GAC/F,SAAcpvB,GACdA,EAAMo3E,KAAKvsD,EAASk1B,GAEf3wB,EACLvE,EAAQ7qB,GAEQ,IAAX+4E,EACLh5B,EAAO//C,GAGP6qB,EAAQ7qB,EAEhB,CACA,MAAO3B,GACH0hD,EAAO1hD,EACX,CACJ,GACI26E,GACAO,GAER,EAAGT,EAEP,CACA,QACIT,EAAkBmB,KACtB,CACJ,CAmBA,SAASC,IACL,OAAOhC,EAAcsB,EACzB,CACA,SAASQ,IACL,GAAIN,EAAOr3E,OAAS,EAAG,CACnB,IAAI83E,EAAUT,EAAOvrE,QACrBurE,EAAS,GACTC,GAAW,EACXC,GAA8BA,EAA2B/xD,SACzD+xD,EAA6B,KAC7BT,EAAUgB,EACd,CACJ,CACA,SAASC,EAAkBhL,EAAUiL,GACjC,OAAO,SAAUnuD,GACb,GAAIstD,IAAWa,EAAY,CACvB,GAAiB,IAAbjL,IAAmB,SAAcljD,GAGjC,OAFAstD,EAAS,OACTttD,EAAS2rD,KAAKuC,EAAkB,EAAI,GAAKA,EAAkB,EAAI,IAGnEZ,EAASpK,EACTqK,GAAe,EACfJ,EAAgBntD,EAChB8tD,IACKL,GAAyB,IAAbvK,GAAoBwK,IACjCA,GAA6B,SAAgBU,EA7GhC,IA+GrB,CACJ,CACJ,CACA,SAASA,IACL,IAAKX,EAED,GADAA,GAAW,GACP,WACAY,QAAQC,KAAK7B,EAA0BU,EAAeC,OAErD,CACD,IAAImB,GAAM,aAAe,YACxBlC,IAA8BA,GAA4B,UAAkB,SAAM,EAAO,IAAG,CAACjB,EAAc,mBAAmBj2D,IArJ/I,SAAmBlU,EAAQ0b,EAAS6xD,EAAeC,GAC/C,IAAIrhD,GAAM,YACT2+C,IAAkBA,GAAgB,YAAoB,SAAKG,EAAiB,CAAC9+C,IAAMjY,IACpF,IAAIu5D,EAAS3C,EAAc52D,EAAIiY,EAAI++C,YAAY,SAAYsC,EAAc,IAAI/sB,MAAM/kC,GAAW,CAAC,EAK/F,GAJA6xD,GAAiBA,EAAcE,GAC3B3C,EAAc52D,GACdu5D,EAAOtC,UAAUzvD,GAAS,GAAO,GAEjC+xD,GAAUztE,EAAOgrE,GACjBhrE,EAAOgrE,GAAgByC,OAEtB,CACD,IAAI/qD,EAAU1iB,EAAO,KAAO0b,GAC5B,GAAIgH,EACAA,EAAQ+qD,OAEP,CACD,IAAI1vC,GAAa,SAAQ,WACzBA,IAAeA,EAAkB,OAAKA,EAAgB,KAAGriB,GAAS,SAAQ+xD,GAC9E,CACJ,CACJ,CAiIgBC,CAAUJ,EAAK7B,EAAqB,SAAUgC,GAG1C,OAFA,SAAUA,EAAQ,UAAW,CAAEpqD,EAAG,WAAc,OAAO8oD,CAAa,IACpEsB,EAAOz+D,OAASk9D,EACTuB,CACX,IAAKrC,EAA0Bl3D,EACnC,CAER,CA+BA,OA9BAi4D,EAAc,CACVzB,KAAMgC,EACN,MApEJ,SAAgBE,GACZ,OAAOF,OAAMlvE,EAAWovE,EAC5B,EAmEIhC,QAlEJ,SAAkB+C,GACd,IAAIC,EAAcD,EACdE,EAAeF,EAWnB,OAVI,SAAWA,KACXC,EAAc,SAAUt6E,GAEpB,OADAq6E,GAAaA,IACNr6E,CACX,EACAu6E,EAAe,SAAU7+D,GAErB,MADA2+D,GAAaA,IACP3+D,CACV,GAEG09D,EAAMkB,EAAaC,EAC9B,IAsDA,SAAc1B,EAAa,QAAS,CAChChqD,IAAK4qD,KAKL,aACAZ,GAAY,SAAe,KAAQ,YAKvCA,EAAYh4E,SAHZ,WACI,MAAO,YAAwH44E,KAAeT,EAAgB,MAAQT,EAAUK,GAAkB,GACtM,EAEA,YACS,SAAWD,KACZ,SAAe9B,EAAc,kCAAoC0B,EAAUI,IAE/E,IAAI6B,EAAYb,EAAkB,EAAI,GACtC,IACIhB,EAAS/6E,KAAKi7E,EAAac,EAAkB,EAAI,GAAKa,EAC1D,CACA,MAAOn8E,GACHm8E,EAAUn8E,EACd,CACH,CAXD,GAYOw6E,CACX,CAEA,SAAS4B,EAAkBhC,GACvB,OAAO,SAAUzpC,GACb,IAAI8pC,GAAiB,SAASj3E,UAAW,GACzC,OAAO42E,EAAW,SAAU5tD,EAASk1B,GACjC,IACI,IAAI26B,EAAW,GACXC,EAAY,GAChB,SAAU3rC,EAAO,SAAUvwC,EAAM+S,GACzB/S,IACAk8E,IACA3D,EAAQv4E,EAAM,SAAUuB,GACpB06E,EAASlpE,GAAOxR,EACI,MAAd26E,GACF9vD,EAAQ6vD,EAEhB,EAAG36B,GAEX,GAEkB,MADlB46B,GAEI9vD,EAAQ6vD,EAEhB,CACA,MAAOr8E,GACH0hD,EAAO1hD,EACX,CACJ,EAAGy6E,EACP,CACJ,CAwJA,SAAS8B,EAAkBlB,IACvB,SAAWA,EAAS,SAAUrqD,GAC1B,IACIA,GACJ,CACA,MAAOhxB,GACP,CACJ,EACJ,CA0BA,SAASw8E,EAAmBlC,EAAUr9D,GAClC,OAAOk9D,EAAeqC,EA1B1B,SAA8Bv/D,GAC1B,IAAIw/D,GAAkB,SAASx/D,GAAWA,EAAU,EACpD,OAAO,SAAUo+D,IACb,SAAgB,WACZkB,EAAkBlB,EACtB,EAAGoB,EACP,CACJ,CAmB8CC,CAAqBz/D,GAAUq9D,EAAUr9D,EACvF,CAkCA,SAAS0/D,EAAoBrC,EAAUr9D,IAClCy8D,IAAgBA,GAAc,UAAmB,SAAK,MAAS,CAAClB,IAAe,GAAK,OACrF,IAAIoE,EAASlD,EAAYn3D,EACzB,IAAKq6D,EACD,OAAOJ,EAAmBlC,IAEzB,SAAWA,KACZ,SAAe9B,EAAc,mCAAoC,SAAQ8B,IAE7E,IAAII,EAAS,EAITn5B,EAAa,IAAIq7B,EAAO,SAAUpwD,EAASk1B,GAS3C44B,EARA,SAAkB34E,GACd+4E,EAAS,EACTluD,EAAQ7qB,EACZ,EACA,SAAiB0b,GACbq9D,EAAS,EACTh5B,EAAOrkC,EACX,EAEJ,GAIA,OAHA,SAAckkC,EAAY,QAAS,CAC/B/wB,IAfJ,WACI,OAAO4oD,EAAcsB,EACzB,IAeOn5B,CACX,CAuBA,SAASs7B,EAAkBvC,GACvB,OAAOH,EAAe0C,EAAmBN,EAAmBjC,EAChE,CAIA,SAASwC,EAA4BnsC,EAAO1zB,GAExC,OADC08D,IAjQ6BS,EAiQgDyC,EAAlDlD,GAhQrB,SAAkB,SAAUhpC,GAC/B,IAAI8pC,GAAiB,SAASj3E,UAAW,GACzC,OAAO42E,EAAW,SAAU5tD,EAASk1B,GACjC,IAAIp2C,EAAS,GACT+vE,EAAU,EACd,SAAS0B,EAAY38E,EAAM+S,GACvBkoE,IACA3C,EAAgBt4E,EAAM,SAAUuB,GACxBA,EAAM8iC,SACNn5B,EAAO6H,GAAO,CACVmG,OAAQm/D,EACRp7D,OAAQ1b,EAAM0b,QAIlB/R,EAAO6H,GAAO,CACVmG,OAAQ,YACR3X,MAAOA,EAAMA,OAGH,MAAZ05E,GACF7uD,EAAQlhB,EAEhB,EACJ,CACA,KACQ,SAAQqlC,IACR,SAAWA,EAAOosC,IAEb,SAAWpsC,IAChB,SAAUA,EAAOosC,IAGjB,SAAe,4BAGH,MADhB1B,GAEI7uD,EAAQlhB,EAEhB,CACA,MAAOtL,GACH0hD,EAAO1hD,EACX,CACJ,EAAGy6E,EACP,IAqNOd,EAAuBp3D,EAAEouB,EAAO1zB,GAlQ3C,IAAkCm9D,CAmQlC,CA6CA,SAAS4C,EAAc1C,EAAUr9D,GAE7B,OADC28D,IAAoBA,GAAkB,SAAkB+C,IAClD/C,EAAgBr3D,EAAEhjB,KAAKC,KAAM86E,EAAUr9D,EAClD,CACA,IAAIggE,EAAkCb,EAAkBY,IA4XhC,SAAe,G,0BCphCvC,SAASE,EAAYC,EAAOC,GACxB,OAAOD,GAASC,CACpB,CAEA,SAASC,EAAS17E,EAAOM,GACrB,OAAON,EAAMM,EACjB,C,yzBAEA,IAqDIq7E,EArDAC,OAAc1xE,EACd2xE,EAAa,KAEbC,EAAW,WACXC,EAAS,SACTC,EAAY,YACZC,EAAY,YACZC,EAAY,YACZC,EAAc,cACdC,EAAS,SACTC,EAAS,SACTC,EAAO,OACPC,EAAO,OACPC,EAAY,WACZC,EAA8B,2BAG9BxzB,EAA0BsyB,EAAY3jC,QACtCsR,EAA0BwyB,EAASzyB,EAAU+yB,GAC7CU,EAAwBnB,EAAYzxB,QACpC6yB,EAA0BjB,EAASgB,EAAQV,GAC3CY,EAAyBrB,EAAYhxE,MACrCsyE,EAAwBtB,EAAY7xB,OACpCozB,EAA0BpB,EAASmB,EAAQb,GAC3Ce,EAA0BrB,EAASoB,EAAU,SAG7CE,EAAe,YACfC,EAAqB,oBAQzB,SAASC,EAAKhkD,EAAMikD,GAChB,IACI,MAAO,CACHv8D,EAAGsY,EAAK3Q,MAAM1qB,KAAMs/E,GAE5B,CACA,MAAO9+E,GACH,MAAO,CAAEA,EACb,CACJ,CAUA,SAAS++E,EAAU76E,GACf,OAAO,SAAUvC,GACb,cAAcA,IAAUuC,CAC5B,CACJ,CAQA,SAAS86E,EAAaC,GAClB,IAAI/6E,EAAU,WAAa+6E,EAAU,IACrC,OAAO,SAAUt9E,GACb,SAAUA,GAASu9E,EAAYv9E,KAAWuC,EAC9C,CACJ,CAEA,SAASg7E,EAAYv9E,GACjB,OAAOkpD,EAASszB,GAAW5+E,KAAKoC,EACpC,CAMA,SAASw9E,EAAYx9E,GACjB,cAAcA,IAAUk8E,GAAal8E,IAAUk8E,CACnD,CAMA,SAASuB,EAAkBz9E,GACvB,OAAOA,IAAU67E,GAAc2B,EAAYx9E,EAC/C,CAEA,SAAS09E,EAAwB19E,GAC7B,OAAOA,IAAU67E,GAAc77E,IAAU47E,CAC7C,CAEA,SAAS+B,EAAUnkD,GACf,QAASA,GAAOA,IAAQoiD,CAC5B,CAUA,IAAIgC,EAA0BR,EAAU,UACpCS,EAA4BT,EAAUtB,GAK1C,SAASgC,EAAS99E,GACd,SAAKA,GAASy9E,EAAkBz9E,KAGvBA,UAAgBA,IAAU+7E,EACvC,CACA,IAAIhW,EAA0B2V,EAASmB,EAAQ,WAC3CkB,EAAwBV,EAAa,QACrCW,EAA0BZ,EAAU,UACpCa,EAA2Bb,EAAU,WAMrCc,EAAyBb,EAAa,SAE1C,SAASc,EAAcn+E,GACnB,SAAUA,GAASA,EAAMo3E,MAAQyG,EAAW79E,EAAMo3E,MACtD,CA+BA,SAASgH,EAASp+E,GACd,SAAUA,IAvHGgd,EAuHc,WAAc,QAAShd,GAAU,EAAIA,EAAS,EAvHxDssB,GAuH4DtsB,EAtHzE4J,EAASszE,EAAKlgE,OADSmgE,GAEpBvzE,EAAOvL,EAAIiuB,EAAW1iB,EAAOgX,IAFxC,IAAiB5D,EAAIsP,EACb1iB,CAuHR,CAGA,SAASy0E,IAET,CAIA,SAASC,IACL,OAAO,CACX,CAEA,IAAIC,EAA0BhD,EAAYmB,GAI1C,SAAS8B,EAAQrpC,EAAQspC,GACrB,IAAIC,EAxLI,GAyLJl8E,EAAU0mD,EAASszB,GAAWD,GAAMpnC,GAJ3B,mBAKT3yC,IACA2yC,EAAS,CAAEsb,MAAO8tB,EAASppC,EAAOsb,OAAQlyD,QAASggF,EAASppC,EAAO52C,SAAU+B,KAAMi+E,EAASppC,EAAO70C,QAEvG,IAEIo+E,IADAA,EAAoBh+E,KAAKC,UAAUw0C,EAAQ0mC,EAAY4C,EAA6B,iBAAXA,EAAuBA,EAAS,EAAK7C,IACrE8C,EAAkBtvC,QAAQ,sBAAuB,QAAUysC,IAAe0C,EAASppC,EAChI,CACA,MAAO92C,GACHqgF,EAAoB,MAAQF,EAAQngF,EAAGogF,EAC3C,CACA,OAAOj8E,EAAU,KAAOk8E,CAC5B,CAEA,SAASC,EAAWpgF,GAChB,MAAM,IAAIqgF,MAAMrgF,EACpB,CACA,SAASsgF,EAAetgF,GACpB,MAAM,IAAIugF,UAAUvgF,EACxB,CAKA,SAASwgF,GAAwB39E,GACzBs8E,EAAwBt8E,IACxBy9E,EAAe,6CAEvB,CACA,SAASG,GAAkBh/E,GAClB49E,EAAS59E,IACV6+E,EAAe,IAAML,EAAQx+E,GAAS,oBAE9C,CAGA,SAASi/E,GAAkB79E,EAAKW,GAC5B,QAASX,GAAO8nD,EAASrpD,eAAe08E,GAAMn7E,EAAKW,EACvD,CAEA,IAAIm9E,GAAgD3D,EAA2BG,EAASzyB,EAAUwzB,GAA+B4B,GAC7Hc,GAA2B5D,EAA2BG,EAASzyB,EAAU,UAAYm2B,IAEzF,SAASA,GAAch+E,EAAKW,GAExB,OADAg9E,GAAwB39E,GACjB69E,GAAkB79E,EAAKW,MAAWm9E,GAA+B99E,EAAKW,EACjF,CAEA,SAASs9E,GAAc9oC,EAAW+oC,EAAYC,GAC1C,GAAIhpC,IAAcunC,EAASvnC,IAAcsnC,EAAWtnC,IAChD,IAAK,IAAIx0C,KAAQw0C,EACb,GAAI4oC,GAAU5oC,EAAWx0C,KACkD,IAAnEu9E,EAAW/C,GAAMgD,GAAWhpC,EAAWx0C,EAAMw0C,EAAUx0C,IACvD,KAKpB,CAEA,SAASy9E,GAAWC,EAAUH,EAAYC,GACtC,GAAIE,EAEA,IADA,IAAIx7B,EAAMw7B,EAASpD,KAAY,EACtB7qE,EAAM,EAAGA,EAAMyyC,MAChBzyC,KAAOiuE,KACsE,IAAzEH,EAAW/C,GAAMgD,GAAWE,EAAUA,EAASjuE,GAAMA,EAAKiuE,IAFzCjuE,KAQrC,CAEA,IAAIkuE,GAAkB,GAEtB,SAASC,GAAwB/pC,EAAUgqC,EAAUC,GACjD,IAAIC,EAAQF,EAAWA,EAAShqC,GAAYimC,EAC5C,OAAO,SAAU0D,GACb,IAAI7pC,GAAW6pC,EAAUA,EAAQ3pC,GAAYimC,IAAeiE,EAC5D,GAAIpqC,GAAWmqC,EAAU,CACrB,IAAI/9E,EAAUD,UACd,OAAQ6zC,GAAWmqC,GAAUt3D,MAAMg3D,EAAS7pC,EAAUqnC,EAASR,GAAMz6E,EAAS,GAAKA,EACvF,CACA+8E,EAAe,IAAON,EAAS3oC,GAAY,qBAAwB4oC,EAAQe,GAC/E,CACJ,CAEA,SAASQ,GAAYC,GACjB,OAAO,SAAUT,GACb,OAAOA,EAAQS,EACnB,CACJ,CAmBA,IAEIC,GAAgD1E,EAA2BG,EAASzyB,EAAUwzB,GAA+B4B,GAE7H6B,GAAU,CACV7hF,EAAG,aACH8zB,EAAG,eACHvR,EAAG,QACHwR,EAAG,WACHrC,EAAG,MACHC,EAAG,OAqBP,IAAImwD,GAA+BzE,EAASzyB,EAAU,kBAClDm3B,GAAqC1E,EAASzyB,EAAU,oBAuB5D,SAASo3B,GAAU3zE,EAAQM,EAAK4hB,GAC5B,OAAOuxD,GAAczzE,EAAQM,EA3CjC,SAAqBhN,GACjB,IAAI+B,EAAO,CAAC,EAGZ,GAFAA,EAAKm+E,GAAW,IAAK,EACrBn+E,EAAKm+E,GAAW,IAAK,EACjBlgF,EAAMm8B,EAAG,CACTp6B,EAAK8sB,IAAM,WAAc,OAAO7uB,EAAMm8B,EAAEvb,CAAG,EAC3C,IAAI6N,EAAOwxD,GAA+BjgF,EAAMm8B,EAAG,KAC/C1N,GAAQA,EAAK5c,MACb9P,EAAK8P,IAAM,SAAU7D,GACjBhO,EAAMm8B,EAAEvb,EAAI5S,CAChB,EAER,CAIA,OAHAqxE,GAAcr/E,EAAO,SAAUgN,EAAKhN,GAChC+B,EAAKm+E,GAAQlzE,IAA0BhN,IA7O5B47E,EA6OqC75E,EAAKm+E,GAAQlzE,IAAQhN,CACzE,GACO+B,CACX,CA0BsCu+E,CAAY1xD,GAClD,CAeA,SAAS2xD,GAAmB52E,EAAQ62E,EAASC,EAAWC,EAAYC,GAChE,IAAIC,EAAS,CAAC,EAKd,OAJAvB,GAAc11E,EAAQ,SAAUqD,EAAKhN,GACjC6gF,GAAgBD,EAAQ5zE,EAAKwzE,EAAUxgF,EAAQgN,GAC/C6zE,GAAgBD,EAAQ5gF,EAAOygF,EAAYzgF,EAAQgN,EACvD,GACO0zE,EAAaA,EAAWE,GAAUA,CAC7C,CACA,SAASC,GAAgBD,EAAQ5zE,EAAKhN,EAAO2gF,GACzCR,GAAcS,EAAQ5zE,EAAK,CACvBhN,MAAOA,EACP8gF,YAAY,EACZH,UAAU,GAElB,CAoCA,IAAII,GAA6BxF,EAA2BG,EAASzyB,EAAU,YAAcq1B,GAGzF0C,GAA4BtF,EAASzyB,EAAU,UACnD,SAASg4B,GAAWjhF,GAChB,OAAOA,CACX,CAEA,SAASkhF,GAAUlhF,GAEf,OADA++E,GAAwB/+E,GACjBA,EAAMi8E,IAAcJ,CAC/B,CACA,IAAIsF,GAA2BzF,EAASzyB,EAAU,UAC9Cm4B,GAAyB1F,EAASzyB,EAAU,QAChD,SAASo4B,GAAY5vE,EAAK6jE,GACtB,IAAKvP,EAAQt0D,IAAQqsE,EAASrsE,IAAQosE,EAAWpsE,MAAUsvE,GAAYtvE,GAAM,CACzE,IAAK,IAAIvJ,EAAK,EAAGA,EAAKotE,EAAQ1zE,OAAQsG,IAClC,GAAIotE,EAAQptE,KAAQuJ,EAChB,OAAOA,EAGf6jE,EAAQ1nE,KAAK6D,GACb4tE,GAAc5tE,EAAK,SAAU6vE,EAAMC,GAC/BF,GAAYE,EAAWjM,EAC3B,GACAkM,GAAU/vE,EACd,CACA,OAAOA,CACX,CACA,SAASgwE,GAAczhF,GACnB,OAAOghF,GAAaK,GAAYrhF,EAAO,IAAMA,CACjD,CACA,IAAIwhF,GAA2BjG,EAAYyF,GAAYC,IAEnDS,GAAmCnG,EAA2BG,EAASzyB,EAAU,kBAAoBi4B,IAMzG,SAASS,GAAWh4E,GAChB,OAAO42E,GAAmB52E,EAAQ,EAAI,EAAI63E,GAC9C,CAEA,SAASI,GAAiBj4E,GACtB,OAAO42E,GAAmB52E,EAAQ,EAAI,EAAI63E,GAC9C,CAeA,SAASK,GAAcl4E,GACnB,OAVJ,SAAyBA,GACrB,IAAIm4E,EAAW,CAAC,EAKhB,OAJAzC,GAAc11E,EAAQ,SAAUqD,EAAKhN,GACjC6gF,GAAgBiB,EAAU90E,EAAKhN,EAAM,IACrC6gF,GAAgBiB,EAAU9hF,EAAM,GAAIA,EAAM,GAC9C,GACOwhF,GAAUM,EACrB,CAGWC,CAAgBp4E,EAC3B,CAEA,IAiBIq4E,GAjBAC,GAAqCL,GAAiB,CACtDM,cAAe,EACfC,YAAa,EACbC,mBAAoB,EACpBC,SAAU,EACVxtC,MAAO,EACPytC,SAAU,EACVlzC,QAAS,EACT2F,OAAQ,EACRwtC,QAAS,EACT/0E,MAAO,EACPg1E,YAAa,GACbC,YAAa,GACbC,YAAa,KAGbC,GAAoB,mBAGxB,SAASC,KACL,IAAIh5E,EAaJ,cAZWi5E,aAAe3G,IACtBtyE,EAASi5E,YAERj5E,UAAiBupB,OAAS+oD,IAC3BtyE,EAASupB,MAERvpB,UAAiBk5E,SAAW5G,IAC7BtyE,EAASk5E,QAERl5E,UAAiBm5E,SAAW7G,IAC7BtyE,EAASm5E,QAENn5E,CACX,CAEA,SAASo5E,KACL,IAAKhB,GAAY,CACb,IAAIhI,EAAMkD,EAAK0F,IAAiBhiE,GAAK,CAAC,EACtCohE,GAAahI,EAAI2I,IAAqB3I,EAAI2I,KAAsB,CAAC,CACrE,CACA,OAAOX,EACX,CAEA,IAAIiB,GAAyBvH,EAASkB,EAAS,OAC3CsG,GAAyBxH,EAASkB,EAAS,OAE3CuG,GAA0BzD,GAAgB,QAAS/C,GAEnDyG,GAA8B1D,GAAgB,YAAa/C,GAC3D0G,GAA2B1D,GAAwB,SAAUhD,EAAU2G,IAE3E,SAASA,GAActjF,EAAOy6C,EAAO74C,GAEjC,OADAm9E,GAAwB/+E,GACpB4B,EAAS,EAxhBL,KA2hBR64C,EAAQA,GAAS,GACL,IACRA,EAAQyoC,GAAQzoC,EAAQz6C,EAAMq8E,GAAS,IAEvCmB,EAAY57E,GACLuhF,GAASnjF,EAAOy6C,GAEpB0oC,GAASnjF,EAAOy6C,EAAOA,EAAQ74C,GAC1C,CAEA,SAAS2hF,GAAQvjF,EAAO40D,GACpB,OAAOwuB,GAAapjF,EAAO,EAAG40D,EAClC,CA0BA,IA4CI4uB,GA5CAC,GAA4BlI,EAA4BG,EAASzyB,EAAU,UAAYy6B,IAE3F,SAASA,GAActiF,EAAK0pC,GACxB,IAAI64C,EAAS,KACb,SAASC,IAAa,CACtB,GAAKlG,EAAwBt8E,GAYzBuiF,EAAS,CAAC,MAZqB,CAC/B,IAAI5iF,SAAcK,EACdL,IAASg7E,GAAUh7E,IAAS+6E,GAC5B+C,EAAe,4CAA8CL,EAAQp9E,IAEzEwiF,EAAS5H,GAAa56E,EACtB87E,EAAK,WACD0G,EAAS3H,GAAa76E,CAC1B,GACAuiF,EAAS,IAAIC,CACjB,CAOA,OAHI94C,GACAoyC,EAAKkD,GAAqB,CAACuD,EAAQ74C,IAEhC64C,CACX,CAGA,SAASE,KACL,OAAQ1rD,KAAK+P,KAAO47C,KACxB,CAEA,SAASA,KACL,OAAO,IAAI3rD,MAAOj2B,SACtB,CAEA,SAAS6hF,GAAQ10D,EAAIkwD,EAASpC,GAC1B,OAAO9tD,EAAG9G,MAAMg3D,EAASpC,EAC7B,CASA,SAAS6G,KACLR,GAAuBR,IAC3B,CAEA,SAASiB,GAAQjnE,EAAImgE,GACjB,IAAI+G,EAAY,CAAC,EAgBjB,OAfCV,IAAwBQ,KACzBE,EAAU16B,EAAIg6B,GAAqBW,IACnChE,GAAc+D,EAAW,IAAK,CAC1BE,cAAc,EACdv1D,IAAK,WACD,IAAIjlB,EAASm6E,GAAQ/mE,EAAI,KAAMmgE,GAO/B,OANKqG,GAAqBW,KACtBhE,GAAc+D,EAAW,IAAK,CAC1BlkF,MAAO4J,IAGfs6E,EAAU16B,EAAIg6B,GAAqBW,IAC5Bv6E,CACX,IAEGs6E,CACX,CAmCA,IAaIG,GAUAC,GAvBAC,GAA4B7I,EAASkB,EAAS,UAE9C4H,GAAmCP,GAAQ,WAE3C,IADA,IAAIjkF,EAAS6jF,KAAShjF,SAAS,IAAI6M,MAAM,GAClC1N,EAAM4B,OAAS,IAClB5B,GAASukF,KAAa1jF,SAAS,IAAI6M,MAAM,GAG7C,OADQ1N,EAAM24C,UAAU,EAAG,GAE/B,GAEI8rC,GAAqB,QAGrBC,GAAU,EAWd,SAASC,GAAcC,GACnB,IAAIC,EAAW,IAAMH,KAAY,IAAMF,GAAkB5jE,EACrDkkE,EAAY1I,EAAS,IAAMwI,EAAc,IAC7C,SAASG,EAASzkF,EAAMN,GACpBqgF,GAAU2E,EAAW1kF,EAAM,CACvBsgB,EAAG5gB,EACH3B,GAAG,EACH+zB,GAAG,GAEX,CACA,IA7JoB1lB,EAAQu4E,EA6JxBD,EAAYvB,GAAU,MAM1B,OALAsB,EAAS,cAAexG,EAASqG,IACjCG,EAASvI,EAAW,WAAc,OAAOsI,EAzB9B,WAyBqDD,CAAU,GAC1EE,EAAS,UAAW,WAAc,OAAOC,CAAW,GACpDD,EAAS,IAAKD,GACdC,EAAS,OAAQF,GAlKWI,EAmKK,UAnKbv4E,EAmKEs4E,KAjKlB9H,EAAK,WACDxwE,EAAOswE,IAAgB,EACvBtwE,EAAOuwE,GAAsBgI,CACjC,GACA/H,EAAKmD,GAAW,CAAC3zE,EAAQswE,EAAc,CAC/Bp8D,GAAG,EACHwR,GAAG,EACH/zB,GAAG,KAEX6+E,EAAKmD,GAAW,CAAC3zE,EAAQuwE,EAAoB,CACrCr8D,EAAGqkE,EACH7yD,GAAG,EACH/zB,GAAG,MAGRqO,CAmJX,CAEA,SAASw4E,GAAcl4E,GACnB,IAAIm4E,EA7BR,WACI,IAAKd,GAAc,CACf,IAAIe,EAASpC,KACbqB,GAAee,EAAOC,OAASD,EAAOC,QAAU,CAAEC,EAAG,CAAC,EAAGt1D,EAAG,CAAC,EACjE,CACA,OAAOq0D,EACX,CAuBmBkB,GACf,IAAKpG,GAAUgG,EAASG,EAAGt4E,GAAM,CAC7B,IAAIw4E,EAAcb,GAAc33E,GAC5By4E,EAAUrE,GAAQ+D,EAASn1D,GAAGpuB,OAClC4jF,EAAYf,IAAsB,WAAc,OAAOgB,EAAU,IAAMD,EAAYhJ,IAAc,EACjG2I,EAASG,EAAEt4E,GAAOw4E,EAClBL,EAASn1D,EAAEw1D,EAAYf,OAAyBlG,EAASvxE,EAC7D,CACA,OAAOm4E,EAASG,EAAEt4E,EACtB,CAqBA,SAAS04E,GAAkB1lF,GACvB,OAAOmgF,GAAc,CACjBwF,OAAQ,WAAc,OAAO3lF,CAAO,GACrC,IAAK,CAAEA,MAAOA,GACrB,CAwCA,IACI4lF,GADAC,GAAS,SAEb,SAASC,GAAiBC,EAAOjkF,GAC7B,IAAIkkF,EACJ,OAAO,WAKH,OAJCxC,IAAwBQ,KACpBgC,IAAexC,GAAqBW,MACrC6B,EAAcN,GAAkBxI,EAAK6I,EAAOjkF,GAAS8e,IAElDolE,EAAYplE,CACvB,CACJ,CAKA,SAASqlE,GAAUz3C,GAKf,OAJCg1C,IAAwBQ,KACpB4B,KAA+B,IAAdp3C,IAAuBg1C,GAAqBW,MAC9DyB,GAAgBF,GAAkBxI,EAAK0F,IAAiBhiE,GAAKi7D,IAE1D+J,GAAchlE,CACzB,CAEA,SAASslE,GAAQ5lF,EAAMkuC,GACnB,IAAIwrC,EAOJ,IAFIA,EAJC4L,KAA+B,IAAdp3C,EAIZo3C,GAAchlE,EAHdqlE,GAAUz3C,KAKTwrC,EAAI15E,GACX,OAAO05E,EAAI15E,GAEf,GAAIA,IAASulF,GACT,IACI,OAAO/C,MACX,CACA,MAAOzkF,GACP,CAEJ,OAAOw9E,CACX,CAEA,SAASsK,KACL,QAAwBC,IAC5B,CACA,IAAIA,GAA6BN,GAAiBI,GAAS,CAAC,aAE5D,SAASG,KACL,QAAwBC,IAC5B,CACA,IAAIA,GAA2BR,GAAiBI,GAAS,CAACL,KAE1D,SAASU,KACL,QAAwBC,IAC5B,CACA,IAaIC,GACAC,GAwDAC,GAtEAH,GAA8BV,GAAiBI,GAAS,CAAC,cAMzDU,GAAwBd,GAAiB,WACzC,QAAwB5I,EAAK,WAAc,OAAQpD,UAAYA,QAAQ+M,UAAY,CAAC,GAAGC,IAAO,GAAI,CACtG,GASA,SAASC,KAEL,OADAN,GAAyBf,GAAkBxI,EAAK,GAAW,CAACd,IAASx7D,EAEzE,CACA,SAASomE,GAAch6E,GACnB,IAAIq4E,GAAY7B,GAAqBW,IAAgB,EAAVsC,KAAgBM,KAC3D,OAAQ1B,EAAOzkE,EAAIykE,EAAOzkE,EAAE5T,GAAO4uE,CACvC,CAGA,SAASqL,KACL,QAAwBC,IAC5B,CAEA,SAASA,KAEL,OADC1D,IAAwBQ,OACfR,GAAqBW,IAAgB,EAAVsC,KAAgBM,MAAenmE,CACxE,CAEA,SAASumE,GAAe7mF,EAAM8mF,GAC1B,IAAIC,EAAYpF,GAAoB3hF,IACnCkjF,IAAwBQ,KACzB,IAAIsD,GAAS9D,GAAqBW,IAAgB,EAAVsC,KAAgBM,KACxD,OAAOO,EAAI1mE,EAAI0mE,EAAI1mE,EAAEymE,GAAa/mF,GAAU8mF,EAAoCxL,EAzJpF,SAA4Bt7E,GAExB,IAAIsJ,GADH06E,KAA0BA,GAAwB,CAAC,GAEpD,IAAI+C,EAAYpF,GAAoB3hF,GAIpC,OAHI+mF,IACAz9E,EAAS06E,GAAsB+C,GAAa/C,GAAsB+C,IAAc1C,GAAcvI,EAAS,IAAMiL,IAE1Gz9E,CACX,CAiJyD29E,CAAmBjnF,EAC5E,CAEA,SAASknF,GAAU5C,EAAawC,IAC3B5D,IAAwBQ,KACzB,IAAIsD,GAAS9D,GAAqBW,IAAgB,EAAVsC,KAAgBM,KACxD,OAAOO,EAAI1mE,EAAI0mE,EAAI1mE,EAAEgkE,GAAiBwC,EAAsCvL,EAA7B8I,GAAcC,EACjE,CAEA,SAAS6C,GAAUz6E,GAGf,OAFCw2E,IAAwBQ,OACzB0C,IAAgBlD,GAAqBW,IAAmB,EAAbuC,KAAkChB,GAAkBxI,EAAK,GAAiB,CAAC,QAAQt8D,IAC3GA,GAAKskE,IAAel4E,EAC3C,CASA,SAAS06E,GAAW1nF,GAChB,QAASA,GAAS69E,EAAW79E,EAAMsnC,KACvC,CAEA,SAASqgD,GAAW3nF,GAChB,OAAQ09E,EAAwB19E,IAAU69E,EAAW79E,EAAMmnF,GAAe,IAC9E,CAGA,SAASS,GAAUC,EAAMvI,EAAYC,GACjC,GAAIsI,IACKH,GAAWG,MACXlB,KAAkBA,GAAgBjB,GAAkByB,GAAe,KACpEU,EAAOA,EAAKlB,GAAc/lE,GAAKinE,EAAKlB,GAAc/lE,KAAOi7D,GAEzD6L,GAAWG,IAAO,CAClB,IAAIxQ,EAAMuE,EACNkM,EAAalM,EACjB,IAEI,IADA,IAAIhnB,EAAQ,IACHkzB,EAAaD,EAAKvgD,QAAQrB,OAC2C,IAAtEq5C,EAAW/C,GAAMgD,GAAWsI,EAAMC,EAAW9nF,MAAO40D,EAAOizB,IAG/DjzB,GAER,CACA,MAAOgc,GACHyG,EAAM,CAAEh5E,EAAGuyE,GACPiX,EAAKE,QACLD,EAAajM,EACbgM,EAAKE,MAAM1Q,GAEnB,CACA,QACI,IACQyQ,IAAeA,EAAW7hD,MAC1B4hD,EAAKG,QAAUH,EAAKG,OAAOF,EAEnC,CACA,QACI,GAAIzQ,EAEA,MAAMA,EAAIh5E,CAElB,CACJ,CACJ,CAER,CAEA,SAAS4pF,GAAUv7E,EAAQw7E,GAcvB,OAbK1K,EAAY0K,IAASx7E,IAClBq5D,EAAQmiB,GACRnE,GAAQr3E,EAAOkB,KAAMlB,EAAQw7E,GAExBR,GAAWQ,IAASP,GAAWO,GACpCN,GAAUM,EAAM,SAAUC,GACtBz7E,EAAOkB,KAAKu6E,EAChB,GAGAz7E,EAAOkB,KAAKs6E,IAGbx7E,CACX,CAEA,IAGI07E,GAA4B1I,GAAgB,UAAW5C,GAGvDuL,GAAwB3I,GAAgB,MAAO5C,GAEnD,SAASwL,GAAS7I,EAAUhlC,EAAO8tC,GAC/B,QAAS9I,EAAWA,EAAgB,MAAI5D,IAAekB,GAAUx0D,MAAMk3D,EAAU1C,EAASR,GAAM16E,UAAW,GAC/G,CAwDA,IAoEI2mF,GA1DAC,GAA2B/I,GAAgB,SAAU5C,GA2DrD4L,GAAmCnN,EAA2BG,EAASzyB,EAAU,kBAAoB0/B,IACzG,SAASA,GAAuBvnF,EAAK+rC,GACjC,IAAIztC,EAGJ,OAFC8oF,KAAkBA,GAAgB9C,KAAmBhmF,EAAK,CAAC,GAAMu8E,GAAa,GAAIv8E,aAAegqD,SAClG8+B,GAAc5nE,EAAIxf,EAAI66E,GAAa9uC,EAAQkyC,GAAclyC,EAAO,SAAUngC,EAAKhN,GAAS,OAAOoB,EAAI4L,GAAOhN,CAAO,GAC1GoB,CACX,CAaA,SAASwnF,GAASC,EAAWvoF,GACzBA,IAASuoF,EAAUvM,GAAQh8E,EAC/B,CAEA,SAASwoF,GAAkBxoF,EAAMyoF,EAAaC,GAC1C,IAAIC,EAAeD,GAAapK,MAC5BsK,EAAUD,EAAajN,GAAWM,GAClC6M,EAAYvK,MAAMwK,kBACtB,OAlBJ,SAA4B9oF,EAAMipD,EAAGC,GAGjC,SAASI,IACL/rD,KAAKs+E,GAAe5yB,EACpB2zB,EAAKmD,GAAW,CAACxiF,KAAMy+E,EAAM,CAAE17D,EAAGtgB,EAAM6xB,GAAG,EAAM9zB,GAAG,IACxD,CAEA,OAPA6+E,EAAKmD,GAAW,CAAC92B,EAAG+yB,EAAM,CAAE17D,EAAGtgB,EAAM6xB,GAAG,EAAM9zB,GAAG,MACjDkrD,EAAIm/B,GAAkBn/B,EAAGC,IAKvBwyB,GAAaxyB,IAAMqyB,EAAa4H,GAAUj6B,IAAMI,EAAGoyB,GAAaxyB,EAAEwyB,GAAY,IAAIpyB,GAC7EL,CACX,CASW8/B,CAAmB/oF,EAAM,WAC5B,IAAI3C,EAAQE,KACRiE,EAAUD,UACd,IACIq7E,EAAK0L,GAAU,CAACK,EAAc3oF,IAC9B,IAAIxC,EAAQimF,GAAQkF,EAActrF,EAAOo/E,EAASR,GAAMz6E,KAAanE,EACrE,GAAIG,IAAUH,EAAO,CACjB,IAAI2rF,EAAW5H,GAAkB/jF,GAC7B2rF,IAAa5H,GAAkB5jF,IAC/B4qF,GAAkB5qF,EAAOwrF,EAEjC,CAGA,OAFAH,GAAaA,EAAUrrF,EAAOH,EAAMw+E,IACpC4M,GAAeA,EAAYjrF,EAAOgE,GAC3BhE,CACX,CACA,QACIo/E,EAAK0L,GAAU,CAACK,EAAcC,GAClC,CACJ,EAAGD,EACP,CAmCA,SAASM,GAAcC,GACnB,OAAO,SAAiBxpF,GAKpB,OAJA++E,GAAwB/+E,GACpBA,GAASA,EAAMovC,UACfpvC,EAAQA,EAAMovC,QAAQo6C,EAvrCtB,KAyrCGxpF,CACX,CACJ,CACA,IAuJIypF,GACAC,GACAC,GArJAC,GAAyBjK,GAAwB,OAAQhD,EAJ5B4M,GAAc,qBA2C3CM,GAA2BnO,EAASkB,EAAS,SAC7CkN,GAA0BpO,EAASkB,EAAS,QA+GhD,SAASmN,GAAc/pF,GACnB,IAAKA,UAAgBA,IAAU+7E,EAC3B,OAAO,EAEN4N,KACDA,IAAatD,MAAcC,MAE/B,IAAI18E,GAAS,EACb,GAAI5J,IAAU2pF,GAAY,CACjBD,KACDD,GAAcvV,SAAS8H,GAAWQ,GAClCkN,GAAkBD,GAAYlN,GAAMtzB,IAExC,IACI,IAAI9b,EAAQu0C,GAAkB1hF,IAC9B4J,GAAUujC,KAEF8xC,GAAkB9xC,EAAOgvC,KACzBhvC,EAAQA,EAAMgvC,IAElBvyE,KAAYujC,UAAgBA,IAAU2uC,GAAY2N,GAAYlN,GAAMpvC,KAAWu8C,IAEvF,CACA,MAAO3/E,GACP,CACJ,CACA,OAAOH,CACX,CAGA,SAASogF,GAAwB92E,GAE7B,OADAA,EAAQlT,OAASiqF,GAAwB/2E,IAClC,CACX,CACA,IAAIg3E,GAA0B,CAsG9B,SAA8Bh3E,GAC1B,IAAIlT,EAAQkT,EAAQlT,MACpB,GAAI+lE,EAAQ/lE,GAAQ,CAChB,IAAI0M,EAASwG,EAAQtJ,OAAS,GAG9B,OAFA8C,EAAO9K,OAAS5B,EAAM4B,OACtBsR,EAAQi3E,OAAOz9E,EAAQ1M,IAChB,CACX,CACA,OAAO,CACX,EA7GIiqF,GAsHJ,SAAiC/2E,GAC7B,OAAIA,EAAQnS,OAAS+6E,CAIzB,EAbA,SAA6B5oE,GACzB,IAAIlT,EAAQkT,EAAQlT,MACpB,QAAI+9E,EAAO/9E,KACPkT,EAAQtJ,OAAS,IAAIuuB,KAAKn4B,EAAMkC,YACzB,EAGf,GAjGA,SAASkoF,GAAUC,EAAUrqF,EAAO6oB,EAAK7b,GACrC,IAAIs9E,EAAczhE,EAAIuG,QAClBnhB,EAAU4a,EAAI3b,KAAQF,EAAM6b,EAAI3b,KAAKwhB,OAAO1hB,GAAO6b,EAAI3b,KAAQ,GAC/Dq9E,EAAS,CACTn7D,QAASvG,EAAIuG,QACb0mB,IAAKjtB,EAAIitB,IACT5oC,KAAMe,GAEN1L,SAAiBvC,EACjBwqF,GAAU,EACVC,EAASzqF,IAAU67E,EAClB4O,IACGzqF,GAASuC,IAAYw5E,EACrByO,EAAUT,GAAc/pF,GAGxByqF,EAvzCZ,SAAyBloF,GAErB,OADCo5E,IAAoBA,EAAkB,CAAC,SAAU,SAAU,UAAWO,EAAW,SAAU,aAClF35E,IAAYw5E,IAAgD,IAAtCJ,EAAgBh8D,QAAQpd,GAC5D,CAozCqBmoF,CAAgBnoF,IAGjC,IAAI2Q,EAAU,CACVnS,KAAMwB,EACNkoF,OAAQA,EACRD,QAASA,EACTxqF,MAAOA,EACP4J,OAAQ5J,EACRkN,KAAMe,EACN08E,OAAQ9hE,EAAIitB,IACZ80C,KAAM,SAAU58D,EAAQ68D,GACpB,OAAOT,GAAUC,EAAUr8D,EAAQ68D,EAASN,EAAS1hE,EAAKgiE,EAC9D,EACAV,OAAQ,SAAUz9E,EAAQshB,GACtB,OAAO88D,GAAWT,EAAU39E,EAAQshB,EAAQu8D,EAChD,GAEJ,OAAKr3E,EAAQu3E,OAiBTH,GAAeA,EAAY/N,GAAM1zD,EAAK3V,GAC/BA,EAAQtJ,OAEZ5J,EArEX,SAAwBqqF,EAAUr8D,GAC9B,IAAI+8D,EAYJ,OAXAvL,GAAW6K,EAAU,SAAU15B,GAC3B,GAAIA,EAAM20B,IAAMt3D,EAEZ,OADA+8D,EAAWp6B,GACH,CAEhB,GACKo6B,IACDA,EAAW,CAAEzF,EAAGt3D,EAAQpN,EAAGoN,GAC3Bq8D,EAASz8E,KAAKm9E,GAwCkC,SAAUC,GACtD3K,GAAUntE,EAAS,SAAU,CACzB6c,EAAG,WACC,OAAOi7D,EAASpqE,CACpB,EACAoP,EAAG,SAAUhiB,GACTg9E,EAASpqE,EAAI5S,CACjB,IAIJ,IAFA,IAAIwD,EAAM,EACN4d,EAAUk7D,IACLl7D,IAAY5d,EAAM04E,GAAwBtoF,OAASsoF,GAAwB14E,KAASw4E,KAA0BzN,GAAM1zD,EAAK3V,IAC9Hkc,EAAUysD,CAElB,CArDA7+D,CAAG+tE,IAEAA,EAASnqE,CACpB,CAoCeqqE,CAAeZ,EAAUrqF,EAoBxC,CACA,SAAS8qF,GAAWT,EAAU39E,EAAQshB,EAAQnF,GAC1C,IAAK40D,EAAkBzvD,GACnB,IAAK,IAAIhhB,KAAOghB,EACZthB,EAAOM,GAAOo9E,GAAUC,EAAUr8D,EAAOhhB,GAAM6b,EAAK7b,GAG5D,OAAON,CACX,CAyCA,SAASu9E,GAAwB/2E,GAC7B,IAAIlT,EAAQkT,EAAQlT,MACpB,GAAIA,GAASkT,EAAQs3E,QAAS,CAC1B,IAAI99E,EAASwG,EAAQtJ,OAAS,CAAC,EAE/B,OADAsJ,EAAQi3E,OAAOz9E,EAAQ1M,IAChB,CACX,CACA,OAAO,CACX,CAQA,SAASkrF,GAAWx+E,EAAQ+pC,EAAMp1C,EAAMC,EAAMC,EAAMC,EAAMk1C,GACtD,OAPJ,SAAmBhqC,EAAQ5K,GAIvB,OAHA09E,GAAW19E,EAAS,SAAUqpF,IAnDlC,SAAsBz+E,EAAQshB,GAMnB88D,GAAW,GAAIp+E,EAAQshB,EALpB,CACNoB,aAkDAg8D,EAjDAt1C,IAAK9nB,EACL9gB,KAAM,IAGd,CA6CQk+E,CAAa1+E,EAAQy+E,EACzB,GACOz+E,CACX,CAEW2+E,CA3CAjB,GAAU,GALAp8D,EAgDYthB,EA/CnB,CACN0iB,aAFqBA,EAGrB0mB,IAAK9nB,KA6C+B,CAAC,EAAG+uD,EAASR,GAAM16E,YAhD/D,IAAqBmsB,CAiDrB,CAoEA,IAyBIs9D,GAzBAC,GAA2BxL,GAAY1D,GAuC3C,SAASmP,KACL,IAAIC,IARHjI,IAAwBQ,KACpBsH,KAAS9H,GAAqBW,MAC/BmH,GAAQ5F,GAAkBxI,EAAK,GAAW,CAAC,gBAAgBt8D,IAExD0qE,GAAM1qE,GAKb,OAAI6qE,GAAQA,EAAKvjD,IACNujD,EAAKvjD,MAET27C,IACX,CAsOA,IAaI6H,GAA2BhQ,EAASkB,EAAS,SAyD7C+O,GAA6CpQ,EAA2BG,EAASzyB,EAAUwzB,GAA+B4B,GA0B1HuN,GAA6BjM,GAAwB,WAAYhD,EAAUkP,IAE/E,SAASA,GAAgB7rF,EAAO8rF,EAAclqF,GAC1Co9E,GAAkBh/E,GAClB,IAAI+rF,EAAcnO,EAASkO,GAAgBA,EAAevN,EAASuN,GAC/DvD,GAAQ/K,EAAY57E,IAAWA,EAAS5B,EAAMq8E,GAAWz6E,EAAS5B,EAAMq8E,GAC5E,OAAO+G,GAAapjF,EAAOuoF,EAAMwD,EAAY1P,GAASkM,KAASwD,CACnE,CAEA,IAAIC,GAA4BtM,GAAgB,UAAW/C,GA4BvDsP,GAA+BtM,GAAwB,aAAchD,EAAUuP,IAEnF,SAASA,GAAkBlsF,EAAO8rF,EAAcK,GAC5CnN,GAAkBh/E,GAClB,IAAI+rF,EAAcnO,EAASkO,GAAgBA,EAAevN,EAASuN,GAC/DM,EAAMD,EAAW,EAAIA,EAAW,EACpC,OAAO/I,GAAapjF,EAAOosF,EAAKA,EAAML,EAAY1P,MAAa0P,CACnE,CAEA,IAAIM,GAAM,MACNC,GAAQ,QACRC,GAAU,SA6Ed,SAASC,GAAmBC,EAAYC,EAAY5qF,GAChD,IAAI6qF,EAAQ5mB,EAAQ2mB,GAChBzoC,EAAM0oC,EAAQD,EAAW9qF,OAAS,EAClCorB,EAvBR,SAA2B4/D,GACvB,IAAIhjF,EAASi0E,EAAW+O,GAAaA,OAHrCC,EAIA,IAAKjjF,EAAQ,CACT,IAAIkjF,EAAkB9J,KAAmB+J,OAAS,GAC9ChnB,EAAQ+mB,IAAoBA,EAAgBlrF,OAAS,GAAKi8E,EAAWiP,EAAgB,MACrFljF,EAASkjF,EAAgB,GAEjC,CACA,OAAOljF,GAAUojF,UACrB,CAcgBC,CAAkBhpC,EAAM,EAAIyoC,EAAW,GAAOC,EAAqB/Q,EAAb8Q,GAC9DQ,EAdR,SAAgCN,GAC5B,IAAIhjF,EAASi0E,EAAW+O,GAAaA,OAZrCO,EAaA,IAAKvjF,EAAQ,CACT,IAAIkjF,EAAkB9J,KAAmB+J,OAAS,GAC9ChnB,EAAQ+mB,IAAoBA,EAAgBlrF,OAAS,GAAKi8E,EAAWiP,EAAgB,MACrFljF,EAASkjF,EAAgB,GAEjC,CACA,OAAOljF,GAAUwjF,YACrB,CAKkBC,CAAuBppC,EAAM,EAAIyoC,EAAW,GAAK9Q,GAC3D0R,EAAUxrF,EAAQ,GACtBA,EAAQ,GAAK,WACTstB,EAAQm+D,KACRxJ,GAAQuJ,EAAS1R,EAAamB,EAASR,GAAM16E,WACjD,EACA,IAAIutB,EApFR,SAA6Bq9D,EAAYe,EAAWC,GAChD,IAEIC,EAFAngE,GAAM,EACNogE,EAAUlB,EAAae,EAAU3R,GAAcA,EAEnD,SAAS+R,IAGL,OAFArgE,GAAM,EACNogE,GAAWA,EAAQrB,KAAUqB,EAAQrB,MAC9BoB,CACX,CACA,SAASG,IACLF,GAAWF,EAASE,GACpBA,EAAU9R,CACd,CACA,SAASiS,IAKL,OAJAH,EAAUH,EAAUG,GACfpgE,GACDqgE,IAEGF,CACX,CAyBA,OApBAA,EAAkB,CACdtmE,OAAQymE,EACRE,QAASD,IAEGvB,IAAW,WACvB,OAAIoB,GAAWA,EAAQpB,IACZoB,EAAQpB,MAEZh/D,CACX,EACAmgE,EAAgBrB,IAAO,WAGnB,OAFA9+D,GAAM,EACNogE,GAAWA,EAAQtB,KAAQsB,EAAQtB,MAC5BqB,CACX,EACAA,EAAgBpB,IAASsB,EAKlB,CACH1+D,EALJw+D,EAAkBvN,GAAcuN,EA1CtB,UA0CgD,CACtD7+D,IAAK,WAAc,QAAS8+D,CAAS,EACrC97E,IAtBJ,SAAqB7R,IAChBA,GAAS2tF,GAAWE,IACrB7tF,IAAU2tF,GAAWG,GACzB,IAuBIP,GAAI,WACAI,EAAU9R,CACd,EAER,CAkCkBmS,CAAoBvB,EAAY,SAAUkB,GACpD,GAAIA,EAAS,CACT,GAAIA,EAAQI,QAER,OADAJ,EAAQI,UACDJ,EAEX5J,GAAQmJ,EAAStR,EAAa,CAAC+R,GACnC,CACA,OAAO5J,GAAQ/2D,EAAO4uD,EAAa95E,EACvC,EAAG,SAAU6rF,GACT5J,GAAQmJ,EAAStR,EAAa,CAAC+R,GACnC,GACA,OAAOv+D,EAAQF,CACnB,CAqBA,SAAS++D,GAAgBn8E,EAAUwJ,GAC/B,OAAOkxE,IAAmB,EAAM5Q,EAAamB,EAASR,GAAM16E,WAChE,CACA,SAASqsF,GAAoBxB,EAAY56E,EAAUwJ,GAC/C,OAAOkxE,IAAmB,EAAME,EAAY3P,EAASR,GAAM16E,UAAW,GAC1E,CACA,SAASssF,GAAcr8E,EAAUwJ,GAC7B,OAAOkxE,IAAmB,EAAO5Q,EAAamB,EAASR,GAAM16E,WACjE,C,mECjoEA,MAAM,EAA+BusF,QAAQ,S,2BCGzCC,E,UCAG,MAAMC,EACT,wBAAOC,CAAkBl9E,EAAMm9E,GAC3B,IAAK,MAAMxhF,KAAO4qC,OAAO7kC,KAAK1B,GAC1B,IAAK,MAAMo9E,KAAUD,EACbC,EAAOC,OAAOphF,KAAKN,UACc9C,IAA7BukF,EAAOE,kBACPt9E,EAAKrE,GAAOyhF,EAAOE,yBAGZt9E,EAAKrE,GAKhC,CAKA,gCAAO4hF,CAA0B5hF,GAE7B,OAAuB,KAAfA,EAAIpL,QACI,MAAZoL,EAAI,KACQ,MAAZA,EAAI,KACQ,MAAZA,EAAI,KACQ,MAAZA,EAAI,KACQ,MAAZA,EAAI,KACQ,MAAZA,EAAI,GACZ,CAgBA,oCAAO6hF,CAA8BC,GACjC,MAAO,CACH,YAAaA,EAAOC,SACpB,kBAAmBD,EAAOE,aAC1B,0BAA2BF,EAAOG,SAAW,IAAI7/C,QAAQ,6BAA8B,UAEvF,gCAAiC,QAEzC,CAEA,kBAAO8/C,GAIH,OAHKZ,EAAca,YACfb,EAAca,UAAY,IAAIb,GAE3BA,EAAca,SACzB,EC3DG,MAAMC,EACT,WAAAvlC,CAAYwlC,EAAiBC,EAAWC,GACpC1xF,KAAKwxF,gBAAkBA,EACvBxxF,KAAKyxF,UAAYA,EACjBzxF,KAAK2xF,WAAY,EACjB3xF,KAAK4xF,YAAa,EAClB5xF,KAAK6xF,YAAc,GACnB7xF,KAAK8xF,2BAA6B,IAAI9xF,KAAKyxF,UAAUM,aACrD/xF,KAAKgyF,0BAA4BhyF,KAAK8xF,2BAA2BvtF,MACjEvE,KAAKiyF,gBAAkBjyF,KAAKyxF,UAAU/nD,IAAIwoD,sBAAsBlyF,KAAKwxF,gBAAiBE,GAEtF1xF,KAAKmyF,kBACLnyF,KAAKiyF,gBAAgBG,wBAAwB,KACzCpyF,KAAKmyF,mBAEb,CAIA,eAAAA,GACInyF,KAAK4xF,WAAa5xF,KAAKiyF,gBAAgBI,gBACvCryF,KAAK2xF,UAAY3xF,KAAKiyF,gBAAgBK,gBAElCtyF,KAAKiyF,gBAAgBI,iBAAmBryF,KAAKiyF,gBAAgBK,iBAC7DtyF,KAAKwxF,gBAAgBe,oBAEzBvyF,KAAK8xF,2BAA2B10C,KAAKp9C,KAAKwyF,eAC9C,CACA,kBAAIA,GACA,OAAIxyF,KAAK4xF,YAAc5xF,KAAK2xF,UACjB,MAEF3xF,KAAK4xF,WACH,QAGA,KAEf,CASA,0BAAAa,CAA2BlxF,EAAW0rC,EAAY+hB,EAAc0jC,GAExDA,EACA1yF,KAAKwxF,gBAAgBmB,cAAcpxF,EAAW,CAAE0rC,aAAY+hB,iBAG5DhvD,KAAKiyF,gBAAgBW,SAASrxF,EAAW,CAAE0rC,aAAY+hB,gBAE/D,CAQA,kBAAA6jC,CAAmBtxF,EAAW0rC,EAAY+hB,GACtChvD,KAAKyyF,2BAA2BlxF,EAAW0rC,EAAY+hB,GAAc,EACzE,CAQA,qBAAA8jC,CAAsBvxF,EAAW0rC,EAAY+hB,GACzC,MAAM+jC,EAAqB,IAAK9lD,GAChC,IAAK,MAAM+lD,KAAej5C,OAAO7kC,KAAK69E,GAAsB,CAAC,GAAI,CAC7D,MAAMlgF,EAAgBkgF,EAAmBC,GACd,iBAAhBA,QAA8C3mF,IAAlBwG,IAEnCkgF,EAAmBC,GAAe,IAAIhzF,KAAKyxF,UAAUwB,sBAA+C,iBAAlBpgF,EAA6BA,EAAgBA,EAAc1Q,OAErJ,CACAnC,KAAK6yF,mBAAmBtxF,EAAWwxF,EAAoB/jC,EAC3D,CASA,2BAAAkkC,CAA4B3xF,EAAW0rC,EAAY+hB,GAE/ChvD,KAAKwxF,gBAAgBe,oBACrBvyF,KAAKyyF,2BAA2BlxF,EAAW0rC,EAAY+hB,GAAc,EACzE,CASA,+BAAAmkC,CAAgC5xF,EAAW0rC,EAAY+hB,EAAc0jC,GAC7DA,EACA1yF,KAAKwxF,gBAAgBmB,cAAcpxF,EAAW,CAAE0rC,aAAY+hB,iBAG5DhvD,KAAKiyF,gBAAgBmB,SAAS7xF,EAAW,CAAE0rC,aAAY+hB,gBAE/D,CAOA,uBAAAqkC,CAAwB9xF,EAAW0rC,EAAY+hB,GAC3ChvD,KAAKmzF,gCAAgC5xF,EAAW0rC,EAAY+hB,GAAc,EAC9E,CASA,gCAAAskC,CAAiC/xF,EAAW0rC,EAAY+hB,GAEpDhvD,KAAKwxF,gBAAgBe,oBACrBvyF,KAAKmzF,gCAAgC5xF,EAAW0rC,EAAY+hB,GAAc,EAC9E,CAIA,aAAMukC,GAGF,aAFMvzF,KAAKwxF,gBAAgB+B,UAC3BvzF,KAAKiyF,gBAAgBsB,UACdC,QAAQC,IAAIzzF,KAAK6xF,YAAY5jC,IAAIvC,GAAKA,EAAE6nC,WACnD,GF7IJ,SAAW/C,GACPA,EAAoBA,EAAsC,iBAAI,GAAK,mBACnEA,EAAoBA,EAAmC,cAAI,GAAK,gBAChEA,EAAoBA,EAAkC,aAAI,GAAK,cAClE,CAJD,CAIGA,IAAwBA,EAAsB,CAAC,IAC3C,MAAMkD,EACT,WAAA1nC,CAAY78C,EAAKwkF,GAEb3zF,KAAK4zF,qBAAuBpD,EAAoBqD,iBAEhD7zF,KAAKw+B,YAAc,GACnBx+B,KAAK8zF,gBAAkB,GACvB9zF,KAAK+zF,eAAiBJ,EACtB3zF,KAAKyjF,KAAOt0E,CAChB,CAOA,aAAAwjF,CAAcpxF,EAAWiS,GAChBxT,KAAKg0F,iBAMVh0F,KAAKg0F,iBAAiBC,SAAS1yF,EAAWiS,GALlCxT,KAAK4zF,uBAAyBpD,EAAoB0D,cAClDl0F,KAAKw+B,YAAYzuB,KAAK,CAAExO,YAAWiS,QAK/C,CAOA,aAAA2gF,CAAcl5D,EAAWznB,GACrB,IAAKxT,KAAKg0F,iBAIN,YAHIh0F,KAAK4zF,uBAAyBpD,EAAoB0D,cAClDl0F,KAAK8zF,gBAAgB/jF,KAAK,CAAEkrB,YAAWznB,UAI/C,MAAM4gF,EAAY,CAAExhC,MAAO33B,EAAU23B,MAAOlyD,QAASu6B,EAAUv6B,QAAS+B,KAAMw4B,EAAUx4B,MACxF,GAAI+Q,EAAM,CACN,MAAM6gF,EAAkB7gF,EAAKy5B,YAAcz5B,EAC3CA,EAAKy5B,WAAa,IAAKonD,KAAoBD,EAC/C,MAEI5gF,EAAO,CAAEy5B,WAAYmnD,GAEzBp0F,KAAKg0F,iBAAiBC,SAAS,iBAAkBzgF,EACrD,CAIA,WAAMoW,GACF,OAAO5pB,KAAKg0F,kBAAkBpqE,OAClC,CACA,aAAM2pE,GACEvzF,KAAKg0F,yBACCh0F,KAAKg0F,iBAAiBT,UAC5BvzF,KAAKg0F,sBAAmB3nF,EAGhC,CAIA,YAAAioF,GACIt0F,KAAKw+B,YAAY+1D,QAAQ,EAAGhzF,YAAWiS,UAAWxT,KAAK2yF,cAAcpxF,EAAWiS,IAChFxT,KAAKw+B,YAAc,GACnBx+B,KAAK8zF,gBAAgBS,QAAQ,EAAGt5D,YAAWznB,UAAWxT,KAAKm0F,cAAcl5D,EAAWznB,IACpFxT,KAAK8zF,gBAAkB,EAC3B,CAIA,iBAAAvB,GACQvyF,KAAK4zF,uBAAyBpD,EAAoBqD,mBAGtD7zF,KAAK4zF,qBAAuBpD,EAAoBgE,cAEhDx0F,KAAK+zF,eAAe/zF,KAAKyjF,MAAMlK,KAAKkb,IAChCz0F,KAAKg0F,iBAAmBS,EACxBz0F,KAAK4zF,qBAAuBpD,EAAoB0D,aAChDl0F,KAAKs0F,iBACNI,MAAMlb,IACL7pC,QAAQ4Q,MAAMi5B,GAGdx5E,KAAK4zF,qBAAuBpD,EAAoB0D,eAExD,EGpBG,MAAMS,UAA0BpD,EACnC,WAAAvlC,CAAYunB,EAAkBod,EAAoBe,EAAuBkD,GACrE,MAAMC,EAAcD,GAvBUE,EAuBmCF,EAtBjD,CAChB51E,SAAU,CAAC5N,EAASmI,KAChB,MAAMw7E,EAAqC,iBAAjB3jF,EAAQoC,KAAoBpC,EAAQoC,KAAOwhF,OAAO5oC,KAAKh7C,EAAQoC,MAAMxQ,WAC/F8xF,EAAQ1jF,EAAQiJ,UAAW,CAAE6Y,OAAQ,OAAQne,QAAS3D,EAAQ2D,QAASouC,KAAM4xC,IACxExb,KAAK0b,MAAOz7E,IACb,MAAM07E,EAAkB,CAAC,EACzB,IAAK,MAAO/lF,EAAKhN,KAAUqX,EAASzE,QAChCmgF,EAAgB/lF,GAAOhN,EAE3B,MAAMghD,QAAa3pC,EAASkzB,OAC5BnzB,EAAWC,EAASM,OAAQo7E,EAAiB/xC,KAE5CuxC,MAAM,KAEPn7E,EAAW,EAAG,CAAC,QAvDG,CAC1ByF,SAAU,CAAC5N,EAASmI,KAChB,MAAM2+D,EAAU,CACZhlD,OAAQ,OACRne,QAAS,IACF3D,EAAQ2D,QACX,eAAgB,mBAChB,iBAAkBigF,OAAOG,WAAW/jF,EAAQoC,QAGpD,IACI,MAAM4hF,EAAM,UAAchkF,EAAQiJ,UAAW69D,EAAS10B,IAClDA,EAAI6xC,GAAG,OAAQ,SAAUC,GACrB/7E,EAAWiqC,EAAIC,YAAc,IAAKD,EAAIzuC,QAASugF,EAAatyF,WAChE,GAEAwgD,EAAI6xC,GAAG,QAAS,WACZ97E,EAAW,EAAG,CAAC,EACnB,KAEJ67E,EAAIG,MAAMnkF,EAAQoC,KAAOgmE,IACjBA,GACAjgE,EAAW,EAAG,CAAC,KAGvB67E,EAAI1K,KACR,CACA,MAEInxE,EAAW,EAAG,CAAC,EACnB,IAUZ,IAAsCu7E,EAwB9B,IAAInB,EAAiBpgB,GC3EW0hB,OAAO1hB,EAAkBiiB,EAAW33B,EAAWg3B,EAAalE,KAChG,IAAI8E,EACJ,IACI,MAAMC,QAAmB,uCACnBr1E,EAAkB,CAAC,EACzB,GAAIw0E,EAAa,CAEb,MAAMz0E,EAAgB,CAClByD,sBAAsB,EACtBjD,gBAAiBi0E,GAErBx0E,EAAgB,MAA2BD,CAC/C,CACA,IAAIukB,EACC4uC,EAAiBoiB,WAAW,yBAC7BhxD,EAAqB4uC,GAEzB,MAAMqiB,EAAajxD,EAAqB,CAAEA,sBAAuB,CAAE4uC,oBACnEkiB,EAAoB,IAAIC,EAAWzhB,oBAAoB,IAChD2hB,EACHC,qBAAqB,EACrBC,0BAA0B,EAC1BC,sBAAsB,EACtBC,2BAA2B,EAC3BC,qBAAqB,EACrBC,wBAAwB,EACxBC,uBAAuB,EACvBtkB,qCAAqC,EACrCxxD,mBAER,CACA,MAAO7f,GACH,OAAOgzF,QAAQtxC,OAAO1hD,EAC1B,CA6BA,MA3BwB,CACpByzF,SAAU,CAAC1yF,EAAWiS,KAClB,MAAMy5B,EAAa,IAAKz5B,GAAMy5B,cAAez5B,GAAMw7C,cAC/C2hC,GAAoB5sF,QACpB0sF,EAAcC,kBAAkBzjD,EAAY0jD,GAEhD8E,GAAmB90F,MAAM,CACrB8B,KAAMlB,EACNiS,KAAMy5B,EACN35B,SAAU,YACVrS,IAAK,CAAEyhE,KAAM,CAAE9lC,GAAI44D,EAAW7yB,OAAQ6yB,GAAa1yB,IAAK,CAAEC,MAAOlF,IACjEz8D,SAAU,CAAEqB,KAAMlB,EAAW0rC,WAAYz5B,GAAMy5B,WAAY+hB,aAAcx7C,GAAMw7C,iBAGvFplC,MAAOqrE,UACHQ,GAAmB7rE,OAAM,IAE7B2pE,QAAS0B,SACiB,IAAIzB,QAASxmE,IAC/ByoE,GAAmB16D,QAAO,EAAM,KAC5B/N,IACAyoE,OAAoBppF,GACrB,SDkB+B+pF,CAAyB7iB,EAAkB,MAAWiiB,UAAW,MAAW33B,UAAWg3B,EAAalE,GAE1IF,EAAcM,0BAA0Bxd,KACxCogB,EAAiBxkF,GEzBa8lF,OAAO9lF,EAAKsiF,EAAWoD,KAC7D,IAAIwB,OAlDUpB,OAAO9lF,EAAKsiF,EAAWoD,KACrC,MAAMyB,QAAc,uCACdC,QAAmB,uCACnBF,EAAkB,IAAIC,EAAMz2F,gBAC5B22F,EAAyB,IAAID,EAAWvyE,YAExC7D,EAAa,CACfwkB,mBAAoBx1B,EACpB7P,YAAa,4DACb+sC,sBAAuB,EACvB/O,oBAAqB,EACrB24D,qBAAqB,EACrBxwD,eAAe,EACfosC,qCAAqC,EACrC5wC,SAAU,CAAC,CACHu1D,KAGZ,GAAI3B,EAAa,CACb10E,EAAWE,gBAAkB,CAAC,EAE9B,MAAMD,EAAgB,CAClByD,sBAAsB,EACtBjD,gBAAiBi0E,GAErB10E,EAAWE,gBAAgBm2E,EAAuBhyF,YAAc4b,CACpE,CACA,MACMq2E,EADShF,EAAUiF,UAAUC,iBAAiB,aACrB3lE,IAAI,mBAcnC,OAbAqlE,EAAgBxhB,WAAW10D,EAAY,IACvCk2E,EAAgB35D,wBAAyBylC,IACrCA,EAAc,IAAIA,EAAc,KAAK,CAAC,EACtCA,EAAc,IAAO,IAAIA,EAAc,IAAO,KAAK,CAAC,EACpDA,EAAc,IAAO,IAAkB,eAAI,iCAEtCs0B,IAGLt0B,EAAc,IAAO,IAAIA,EAAc,IAAO,KAAK,CAAC,EAEpDA,EAAc,IAAO,IAAS,MAAI,WAE/Bk0B,GAQqBO,CAAUznF,EAAKsiF,EAAWoD,GAkDtD,MA5BwB,CACpBZ,SAAU,CAAC1yF,EAAWiS,KAClB,IACI6iF,GAAiB11F,MAAM,CACnB8B,KAAMlB,EACNH,SAAU,CAAEqB,KAAMlB,EAAW0rC,WAAYz5B,GAAMy5B,WAAY+hB,aAAcx7C,GAAMw7C,eAEvF,CACA,MAAOxuD,GACH,MAAM,IAAIugF,MAAM,yCAA2CvgF,EAAEE,QACjE,GAEJkpB,MAjCeqrE,UACf,IAaI,OAZqB,IAAIzB,QAAQ,CAACxmE,EAASk1B,KAClCm0C,EAILA,EAAgBzsE,OAAM,EAAOitE,IACpBA,GACD30C,EAAO,8BALXl1B,KAWZ,CACA,MAAOxsB,GACH,MAAM,IAAIugF,MAAM,yBAA2BvgF,EAAEE,QACjD,GAgBA6yF,QAAS0B,SACkB,IAAIzB,QAASxmE,IAC3BqpE,EAILA,EAAgBt7D,QAAO,EAAO,KAC1B/N,IACAqpE,OAAkBhqF,GAEnB,KAPC2gB,QFdiB8pE,CAA2B3nF,EAAK,EAAQ0lF,IAErE,MAAM5D,EAAS,CACXG,QAAS,YACTF,SAAU,aACVC,aAAc,UAEZxzE,EAAS,IAAI+1E,EAAoBngB,EAAkBogB,GACzD,GAAIpgB,GAAyD,IAArCA,EAAiBzxD,QAAQ,QAC7C,MAAM,IAAIi/D,MAAM,wFAEpB,MAAMgW,EAAqB,IACpBrF,EACHsF,2BAA4BtF,GAAuBsF,2BAC/C,IAAKtF,EAAsBsF,8BAA+BvG,EAAcO,8BAA8BC,IACpGR,EAAcO,8BAA8BC,IAEtDgG,MAAMt5E,EAAQ,EAAQo5E,EAC1B,E,cGtGJ,M,WACE,WAGD,IAQIG,GAL0CC,GAC7CA,EAAOC,QAI0B,iBAAVlS,QAAsBA,QAC1CgS,EAAWhS,SAAWgS,GAAcA,EAAWjS,OAMnD,IAAIoS,EAAwB,SAAS32F,GACpCV,KAAKU,QAAUA,CAChB,GACA22F,EAAsB5iC,UAAY,IAAIssB,OACNt+E,KAAO,wBAEvC,IAAI89C,EAAQ,SAAS7/C,GAGpB,MAAM,IAAI22F,EAAsB32F,EACjC,EAEI42F,EAAQ,mEAERC,EAAyB,eAsGzBC,EAAS,CACZ,OA3DY,SAASrmD,GACrBA,EAAQ8a,OAAO9a,GACX,aAAa1hC,KAAK0hC,IAGrBoP,EACC,6EAcF,IAVA,IAGIk3C,EACA9rC,EACAr3B,EACA8wC,EANAsyB,EAAUvmD,EAAMptC,OAAS,EACzB6jE,EAAS,GACT0mB,GAAY,EAMZvqF,EAASotC,EAAMptC,OAAS2zF,IAEnBpJ,EAAWvqF,GAEnB0zF,EAAItmD,EAAM03B,WAAWylB,IAAa,GAClC3iC,EAAIxa,EAAM03B,aAAaylB,IAAa,EACpCh6D,EAAI6c,EAAM03B,aAAaylB,GAIvB1mB,GACC0vB,EAAMtsD,QAJPo6B,EAASqyB,EAAI9rC,EAAIr3B,IAIO,GAAK,IAC5BgjE,EAAMtsD,OAAOo6B,GAAU,GAAK,IAC5BkyB,EAAMtsD,OAAOo6B,GAAU,EAAI,IAC3BkyB,EAAMtsD,OAAgB,GAATo6B,GAuBf,OAnBe,GAAXsyB,GACHD,EAAItmD,EAAM03B,WAAWylB,IAAa,EAClC3iC,EAAIxa,EAAM03B,aAAaylB,GAEvB1mB,GACC0vB,EAAMtsD,QAFPo6B,EAASqyB,EAAI9rC,IAEW,IACvB2rC,EAAMtsD,OAAQo6B,GAAU,EAAK,IAC7BkyB,EAAMtsD,OAAQo6B,GAAU,EAAK,IAC7B,KAEoB,GAAXsyB,IACVtyB,EAASj0B,EAAM03B,WAAWylB,GAC1B1mB,GACC0vB,EAAMtsD,OAAOo6B,GAAU,GACvBkyB,EAAMtsD,OAAQo6B,GAAU,EAAK,IAC7B,MAIKwC,CACR,EAIC,OAlGY,SAASz2B,GAGrB,IAAIptC,GAFJotC,EAAQ8a,OAAO9a,GACbI,QAAQgmD,EAAwB,KACfxzF,OACfA,EAAS,GAAK,IAEjBA,GADAotC,EAAQA,EAAMI,QAAQ,OAAQ,KACfxtC,SAGfA,EAAS,GAAK,GAEd,iBAAiB0L,KAAK0hC,KAEtBoP,EACC,yEAQF,IALA,IACIo3C,EACAvyB,EAFAwyB,EAAa,EAGbhwB,EAAS,GACT0mB,GAAY,IACPA,EAAWvqF,GACnBqhE,EAASkyB,EAAMx1E,QAAQqvB,EAAMnG,OAAOsjD,IACpCqJ,EAAaC,EAAa,EAAiB,GAAbD,EAAkBvyB,EAASA,EAErDwyB,IAAe,IAElBhwB,GAAU3b,OAAO4rC,aAChB,IAAOF,KAAgB,EAAIC,EAAa,KAI3C,OAAOhwB,CACR,EAiEC,QAAW,cAYV,KAFD,aACC,OAAO4vB,CACP,+BAaH,CAlKC,E,cCCD,IAAKxS,WAAW8S,aACd,IACE,MAAM,eAAEC,GAAmB,EAAQ,MACnCrgC,GAAO,IAAIqgC,GAAiBC,MAC5BC,EAAK,IAAIC,YACTxgC,EAAKygC,YAAYF,EAAI,CAACA,EAAIA,GAC5B,CAAE,MAAOze,GACkB,iBAAzBA,EAAIxtB,YAAYvpD,OACduiF,WAAW8S,aAAete,EAAIxtB,YAElC,CAGFmrC,EAAOC,QAAUpS,WAAW8S,Y,cCJ5B,MAAMM,EAAK,EAAQ,MACbr0B,EAAK,EAAQ,KACb10D,EAAO,EAAQ,MACfgpF,EAAS,EAAQ,MACjBC,EAAK,CAAEF,GAAIA,EAAGG,UAAWx0B,GAAIA,EAAGw0B,WAOpCC,EAAmB,SAEnBC,GAAgBH,EAAGI,SAAWJ,EAAGF,GAAGM,UAAYJ,EAAGK,QAAUL,EAAGF,GAAGO,SAAWL,EAAGM,QAAUN,EAAGF,GAAGQ,QAEjGC,EAA6B,UAAlB90B,EAAGmtB,WACd4H,EAAQR,EAAGQ,OAASR,EAAGv0B,GAAGg1B,MAAMD,MAChCE,EAASV,EAAGU,QAAUV,EAAGv0B,GAAGg1B,MAAMC,OAKlCC,EAAiB,GAEjBC,EAAgBd,EAAGe,UAAUlkE,KAAKmjE,GAEpC,IAAIgB,GAAmB,EASvB,SAASC,EAAOC,EAASrlF,GACvB,OAAOmkF,EAAGx2E,GAAG03E,EAAS,CAAEC,WAAW,GAAQtlF,EAC7C,CAQA,SAASulF,EAAeF,GACtB,OAAOlB,EAAGqB,OAAOH,EAAS,CAAEC,WAAW,GACzC,CAQA,SAASG,EAAQxhB,EAASjkE,GACxB,MAAME,EAAOwlF,EAAgBzhB,EAASjkE,GACpC2lF,EAAOzlF,EAAK,GACZgL,EAAKhL,EAAK,IA+hBd,SAAmC+jE,EAAS/4D,IAyG5C,SAAoB+4D,EAAS/4D,GACpBi5E,EAAGyB,SAAU3hB,GAAWA,EAAQ4hB,QAAW/1B,EAAG+1B,SAAU36E,EACjE,CA1GE46E,CAAW7hB,EAAS,SAAUsB,EAAKwgB,GACjC,GAAIxgB,EAAK,OAAOr6D,EAAGq6D,GAEnBtB,EAAQ4hB,OAASE,EAEjB,IACEC,EAAmB/hB,EACrB,CAAE,MAAOsB,GACP,OAAOr6D,EAAGq6D,EACZ,CAGA0gB,EAAiB,MAAOhiB,EAAQiiB,IAAKH,EAAQ,SAAUxgB,EAAK2gB,GAC1D,GAAI3gB,EAAK,OAAOr6D,EAAGq6D,GAEnBtB,EAAQiiB,IAAMC,EAAaD,GAAO,GAAKA,EAGvCD,EAAiB,WAAYhiB,EAAQmiB,SAAUL,EAAQ,SAAUxgB,EAAK6gB,GACpE,GAAI7gB,EAAK,OAAOr6D,EAAGq6D,GAEnBtB,EAAQmiB,SAAWA,EAEnBl7E,EAAG,KAAM+4D,EACX,EACF,EACF,EACF,CAzjBEoiB,CAA0BV,EAAM,SAAUpgB,EAAK+gB,GAC7C,GAAI/gB,EAAK,OAAOr6D,EAAGq6D,GAEnB,IAAIghB,EAAQD,EAAiBC,OAC7B,SAAUC,IACR,IACE,MAAMh4F,EAAOi4F,EAAiBH,GAG9BnC,EAAGuC,KAAKl4F,EAAM,SAAU+2E,GAEtB,IAAKA,EAEH,OAAIghB,KAAU,EAAUC,IAEjBt7E,EAAG,IAAI4hE,MAAM,0DAA4Dt+E,IAGlF0c,EAAG,KAAM1c,EACX,EACF,CAAE,MAAO+2E,GACPr6D,EAAGq6D,EACL,CACD,CAnBD,EAoBF,EACF,CASA,SAASohB,EAAY1iB,GACnB,MAGMqiB,EA2hBR,SAAuCriB,GACrC,MAAM8hB,EAAU9hB,EAAQ4hB,OAASe,EAAe3iB,GAEhD+hB,EAAmB/hB,GAEnB,MAAMiiB,EAAMW,EAAqB,MAAO5iB,EAAQiiB,IAAKH,GAKrD,OAJA9hB,EAAQiiB,IAAMC,EAAaD,GAAO,GAAKA,EAEvCjiB,EAAQmiB,SAAWS,EAAqB,WAAY5iB,EAAQmiB,SAAUL,GAE/D9hB,CACT,CAtiB2B6iB,CAHZpB,EAAgBzhB,GACf,IAId,IAAIsiB,EAAQD,EAAiBC,MAC7B,EAAG,CACD,MAAM/3F,EAAOi4F,EAAiBH,GAC9B,IACEnC,EAAG4C,SAASv4F,EACd,CAAE,MAAOjC,GACP,OAAOiC,CACT,CACF,OAAS+3F,KAAU,GAEnB,MAAM,IAAIzZ,MAAM,yDAClB,CAsHA,SAASka,EAAiBC,EAAQzxD,GAChC,MAAM0xD,EAAW,SAAU3hB,GACzB,GAAIA,IAAQ4hB,EAAU5hB,GAEpB,OAAO/vC,EAAK+vC,GAEd/vC,GACF,EAEI,GAAKyxD,EAAO,GACd9C,EAAG/yC,MAAM61C,EAAO,GAAI,WAClB9C,EAAGiD,OAAOH,EAAO,GAAIC,EACvB,GACG/C,EAAGiD,OAAOH,EAAO,GAAIC,EAC5B,CAQA,SAASG,EAAgBJ,GACvB,IAAIK,EAAoB,KACxB,IACM,GAAKL,EAAO,IAAI9C,EAAGoD,UAAUN,EAAO,GAC1C,CAAE,MAAO16F,GAEP,IA+YKi7F,EA/YSj7F,GA+YgBs4F,EAAO,WA/YhBsC,EAAU56F,GAAI,MAAMA,CAC3C,CAAE,QACA,IACE43F,EAAGsD,WAAWR,EAAO,GACvB,CAAE,MAAO16F,GAEF46F,EAAU56F,KAAI+6F,EAAoB/6F,EACzC,CACF,CACA,GAA0B,OAAtB+6F,EACF,MAAMA,CAEV,CAeA,SAASI,EAA8Bl5F,EAAMm5F,EAAIhC,EAAM/vE,GACrD,MAAMgyE,EAAqBC,EAAuBR,EAAiB,CAACM,EAAIn5F,GAAOonB,GACzEkyE,EAAiBD,EAAuBb,EAAkB,CAACW,EAAIn5F,GAAOonB,EAAMgyE,GAIlF,OAFKjC,EAAKoC,MAAM/C,EAAegD,QAAQJ,GAEhChyE,EAAOgyE,EAAqBE,CACrC,CAcA,SAASG,EAA6Bz5F,EAAMm3F,EAAM/vE,GAChD,MAAMsyE,EAAiBvC,EAAKwC,cAAgB/C,EAASjB,EAAGiE,MAAMpnE,KAAKmjE,GAE7DyD,EAAqBC,EADAlC,EAAKwC,cAAgB5C,EAAiBN,EACKz2F,EAAMonB,GACtEkyE,EAAiBD,EAAuBK,EAAgB15F,EAAMonB,EAAMgyE,GAG1E,OAFKjC,EAAKoC,MAAM/C,EAAegD,QAAQJ,GAEhChyE,EAAOgyE,EAAqBE,CACrC,CAeA,SAASD,EAAuBK,EAAgBG,EAAezyE,EAAM0yE,GACnE,IAAIC,GAAS,EAGb,OAAO,SAASC,EAAiBhzD,GAE/B,IAAK+yD,EAAQ,CAEX,MAAME,EAAWH,GAAuBE,EAClC56E,EAAQo3E,EAAen3E,QAAQ46E,GAKrC,OAHI76E,GAAS,GAAGo3E,EAAejuF,OAAO6W,EAAO,GAE7C26E,GAAS,EACL3yE,GAAQsyE,IAAmBjD,GAAiBiD,IAAmB3C,EAC1D2C,EAAeG,GAEfH,EAAeG,EAAe7yD,GAAQ,WAAa,EAE9D,CACF,CACF,CA8BA,SAASkzD,EAAarmC,GACpB,IAAIn0D,EAAQ,GACVy6F,EAAM,KAGR,IACEA,EAAMvE,EAAOwE,YAAYvmC,EAC3B,CAAE,MAAO91D,GACPo8F,EAAMvE,EAAOyE,kBAAkBxmC,EACjC,CAEA,IAAK,IAAIxyD,EAAI,EAAGA,EAAIwyD,EAASxyD,IAC3B3B,EAAM4N,KA7XO,iEA6XW6sF,EAAI94F,GAAKi5F,KAGnC,OAAO56F,EAAMg/B,KAAK,GACpB,CASA,SAASi5D,EAAa72F,GACpB,YAAsB,IAARA,CAChB,CAYA,SAASo2F,EAAgBzhB,EAASjkE,GAEhC,GAAuB,mBAAZikE,EACT,MAAO,CAAC,CAAC,EAAGA,GAId,GAAIkiB,EAAaliB,GACf,MAAO,CAAC,CAAC,EAAGjkE,GAId,MAAM+oF,EAAgB,CAAC,EACvB,IAAK,MAAM7tF,KAAO4qC,OAAOkjD,oBAAoB/kB,GAC3C8kB,EAAc7tF,GAAO+oE,EAAQ/oE,GAG/B,MAAO,CAAC6tF,EAAe/oF,EACzB,CAsDA,SAASymF,EAAiBd,GACxB,MAAMI,EAASJ,EAAKE,OAGpB,IAAKM,EAAaR,EAAKn3F,MACrB,OAAO4M,EAAK8xB,KAAK64D,EAAQJ,EAAKO,IAAKP,EAAKn3F,MAI1C,IAAK23F,EAAaR,EAAKS,UACrB,OAAOhrF,EAAK8xB,KAAK64D,EAAQJ,EAAKO,IAAKP,EAAKS,UAAU9oD,QAAQinD,EAAkBmE,EAAa,IAI3F,MAAMl6F,EAAO,CACXm3F,EAAKsD,OAAStD,EAAKsD,OAAS,MAC5B,IACAjhB,QAAQkhB,IACR,IACAR,EAAa,IACb/C,EAAKwD,QAAU,IAAMxD,EAAKwD,QAAU,IACpCj8D,KAAK,IAEP,OAAO9xB,EAAK8xB,KAAK64D,EAAQJ,EAAKO,IAAK13F,EACrC,CAOA,SAASw3F,EAAmB/hB,GAC1B,IAAKkiB,EAAaliB,EAAQz1E,MAAO,CAC/B,MAAMA,EAAOy1E,EAAQz1E,KAGrB,GAAI4M,EAAKguF,WAAW56F,GAAO,MAAM,IAAIs+E,MAAM,yDAAyDt+E,OAGpG,MAAM66F,EAAWjuF,EAAKiuF,SAAS76F,GAC/B,GAAiB,OAAb66F,GAAkC,MAAbA,GAAoBA,IAAa76F,EACxD,MAAM,IAAIs+E,MAAM,+CAA+Ct+E,MACnE,CAGA,IAAK23F,EAAaliB,EAAQmiB,YAAcniB,EAAQmiB,SAASrjD,MAAMwhD,GAC7D,MAAM,IAAIzX,MAAM,4BAA4B7I,EAAQmiB,cAItD,IAAMD,EAAaliB,EAAQsiB,QAAU3qC,MAAMqoB,EAAQsiB,QAAWtiB,EAAQsiB,MAAQ,EAC5E,MAAM,IAAIzZ,MAAM,yBAAyB7I,EAAQsiB,WAInDtiB,EAAQsiB,MAAQJ,EAAaliB,EAAQz1E,MAAQy1E,EAAQsiB,OArhBrC,EAqhB8D,EAC9EtiB,EAAQ8jB,OAAS9jB,EAAQ8jB,KACzB9jB,EAAQqlB,mBAAqBrlB,EAAQqlB,iBACrCrlB,EAAQslB,oBAAsBtlB,EAAQslB,kBACtCtlB,EAAQkkB,gBAAkBlkB,EAAQkkB,cAGlClkB,EAAQglB,OAAS9C,EAAaliB,EAAQglB,QAAU,GAAKhlB,EAAQglB,OAC7DhlB,EAAQklB,QAAUhD,EAAaliB,EAAQklB,SAAW,GAAKllB,EAAQklB,OACjE,CAOA,SAASlD,EAAiBtJ,EAAQnuF,EAAMu3F,EAAQ76E,GAC9C,GAAIi7E,EAAa33F,GAAO,OAAO0c,EAAG,OApHpC,SAAsB1c,EAAMu3F,EAAQ76E,GAClC,MAAMs+E,EAAgBpuF,EAAKguF,WAAW56F,GAAQA,EAAO4M,EAAK8xB,KAAK64D,EAAQv3F,GAEvE21F,EAAGuC,KAAK8C,EAAe,SAAUjkB,GAC3BA,EACF4e,EAAGyB,SAASxqF,EAAKquF,QAAQD,GAAgB,SAAUjkB,EAAKmkB,GACtD,GAAInkB,EAAK,OAAOr6D,EAAGq6D,GAEnBr6D,EAAG,KAAM9P,EAAK8xB,KAAKw8D,EAAWtuF,EAAKiuF,SAASG,IAC9C,GAEArF,EAAGyB,SAAS4D,EAAet+E,EAE/B,EACF,CAwGEy+E,CAAan7F,EAAMu3F,EAAQ,SAAUxgB,EAAKqkB,GACxC,GAAIrkB,EAAK,OAAOr6D,EAAGq6D,GAEnB,MAAMskB,EAAezuF,EAAK0uF,SAAS/D,EAAQ6D,GAE3C,IAAKA,EAAalI,WAAWqE,GAC3B,OAAO76E,EAAG,IAAI4hE,MAAM,GAAG6P,iCAAsCoJ,cAAmB8D,QAGlF3+E,EAAG,KAAM2+E,EACX,EACF,CAOA,SAAShD,EAAqBlK,EAAQnuF,EAAMu3F,GAC1C,GAAII,EAAa33F,GAAO,OAExB,MAAMo7F,EAnHR,SAA0Bp7F,EAAMu3F,GAC9B,MAAMyD,EAAgBpuF,EAAKguF,WAAW56F,GAAQA,EAAO4M,EAAK8xB,KAAK64D,EAAQv3F,GAEvE,IAEE,OADA21F,EAAG4C,SAASyC,GACLrF,EAAG4F,aAAaP,EACzB,CAAE,MAAOQ,GACP,MAAMN,EAAYvF,EAAG4F,aAAa3uF,EAAKquF,QAAQD,IAE/C,OAAOpuF,EAAK8xB,KAAKw8D,EAAWtuF,EAAKiuF,SAASG,GAC5C,CACF,CAwGuBS,CAAiBz7F,EAAMu3F,GACtC8D,EAAezuF,EAAK0uF,SAAS/D,EAAQ6D,GAE3C,IAAKA,EAAalI,WAAWqE,GAC3B,MAAM,IAAIjZ,MAAM,GAAG6P,iCAAsCoJ,cAAmB8D,OAG9E,OAAOA,CACT,CAuEA,SAAS1C,EAAU76C,GACjB,OAAOk7C,EAAiBl7C,GAAQy4C,EAAQ,SAC1C,CAoBA,SAASyC,EAAiBl7C,EAAOw4C,EAAOoF,GACtC,OAAOtF,EAAWt4C,EAAM49C,OAASA,EAAO59C,EAAM49C,OAASA,GAAQ59C,EAAMw4C,QAAUA,CACjF,CA2BA,SAAS8B,EAAe3iB,GACtB,OAAOkgB,EAAG4F,aAAc9lB,GAAWA,EAAQ4hB,QAAW/1B,EAAG+1B,SAC3D,CAGA7d,QAAQ/K,YA5rBC,OAgVT,WAEE,GAAKkoB,EAIL,KAAOH,EAAel1F,QACpB,IACEk1F,EAAe,IACjB,CAAE,MAAOz4F,GAET,CAEJ,GA4bAu5C,OAAOqkD,eAAejH,EAAOC,QAAS,SAAtC,CACEnU,YAAY,EACZsD,cAAc,EACdv1D,IAAK,WACH,OAAO6pE,GACT,IAGF1D,EAAOC,QAAQ+C,IA/nBf,SAAajiB,EAASjkE,GACpB,MAAME,EAAOwlF,EAAgBzhB,EAASjkE,GACpC2lF,EAAOzlF,EAAK,GACZgL,EAAKhL,EAAK,GAGZulF,EAAQE,EAAM,SAAyBpgB,EAAK/2E,GAE1C,GAAI+2E,EAAK,OAAOr6D,EAAGq6D,GAGnB4e,EAAGiG,MAAM57F,EAAMm3F,EAAKpgD,MA/KX,IA+K6B,SAAqBggC,GAEzD,GAAIA,EAAK,OAAOr6D,EAAGq6D,GAEnBr6D,EAAG,KAAM1c,EAAMy5F,EAA6Bz5F,EAAMm3F,GAAM,GAC1D,EACF,EACF,EA8mBAzC,EAAOC,QAAQkH,QArmBf,SAAiBpmB,GACf,MACE0hB,EADWD,EAAgBzhB,GACf,GAERz1E,EAAOm4F,EAAYhB,GAGzB,OAFAxB,EAAGmG,UAAU97F,EAAMm3F,EAAKpgD,MApMb,KAsMJ,CACL/2C,KAAMA,EACNs5F,eAAgBG,EAA6Bz5F,EAAMm3F,GAAM,GAE7D,EA4lBAzC,EAAOC,QAAQoH,KAjsBf,SAActmB,EAASjkE,GACrB,MAAME,EAAOwlF,EAAgBzhB,EAASjkE,GACpC2lF,EAAOzlF,EAAK,GACZgL,EAAKhL,EAAK,GAGZulF,EAAQE,EAAM,SAAyBpgB,EAAK/2E,GAE1C,GAAI+2E,EAAK,OAAOr6D,EAAGq6D,GAGnB4e,EAAG99C,KAAK73C,EAAMg2F,EAAcmB,EAAKpgD,MA/GvB,IA+G0C,SAAsBggC,EAAKoiB,GAE7E,GAAIpiB,EAAK,OAAOr6D,EAAGq6D,GAEnB,GAAIogB,EAAK4D,kBACP,OAAOpF,EAAG/yC,MAAMu2C,EAAI,SAA0B6C,GAE5C,OAAOt/E,EAAGs/E,EAAah8F,OAAM4J,EAAWsvF,EAA8Bl5F,GAAO,EAAGm3F,GAAM,GACxF,GACK,CAGL,MAAM8E,EAA4B9E,EAAK4D,mBAAqB5D,EAAK2D,iBACjEp+E,EAAG,KAAM1c,EAAMm5F,EAAID,EAA8Bl5F,EAAMi8F,GAA6B,EAAI9C,EAAIhC,GAAM,GACpG,CACF,EACF,EACF,EAsqBAzC,EAAOC,QAAQuH,SA7pBf,SAAkBzmB,GAChB,MACE0hB,EADWD,EAAgBzhB,GACf,GAERwmB,EAA4B9E,EAAK4D,mBAAqB5D,EAAK2D,iBAC3D96F,EAAOm4F,EAAYhB,GACzB,IAAIgC,EAAKxD,EAAGwG,SAASn8F,EAAMg2F,EAAcmB,EAAKpgD,MA/IlC,KAsJZ,OALIogD,EAAK4D,oBACPpF,EAAGoD,UAAUI,GACbA,OAAKvvF,GAGA,CACL5J,KAAMA,EACNm5F,GAAIA,EACJG,eAAgBJ,EAA8Bl5F,EAAMi8F,GAA6B,EAAI9C,EAAIhC,GAAM,GAEnG,EA6oBAzC,EAAOC,QAAQsC,QAAUA,EACzBvC,EAAOC,QAAQwD,YAAcA,EAE7BzD,EAAOC,QAAQyH,mBArIf,WACEzF,GAAmB,CACrB,C,mGCtsBA,gBAEA,MAAa0F,UAAsBC,EAAOC,SACxC,WAAAhzC,CACkBizC,EACAC,EACAC,EACAC,GAEhBnI,MAAMgI,EAAOC,GALG,KAAAD,MAAAA,EACA,KAAAC,iBAAAA,EACA,KAAAC,QAAAA,EACA,KAAAC,SAAAA,EAGhBp/F,KAAKm/F,QAAUA,EACfn/F,KAAKo/F,SAAWA,CAClB,EAVF,iB,mGCFA,gBACA,UACA,UAEA,sBAIE,WAAApzC,GAHQ,KAAAqzC,qBAAqF,IAAIN,EAAOhN,aAC/F,KAAAuN,oBAA6Et/F,KAAKq/F,qBAAqB96F,MAG9G,EAAAg7F,UAAUC,QAAQj3E,KAAK,2BACzB,CAEA,OAAA2nE,GACElwF,KAAKq/F,qBAAqBjiD,MAC5B,CAEA,WAAAqiD,CAAYC,GACV,OAAOA,CACT,CAEA,WAAAC,CAAYD,GACV,OAAKA,EAiEElM,QAAQxmE,QAAQ,IA/DdwmE,QAAQxmE,QAAQ,CACrB,IAAI,EAAA8xE,cACF,YACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,4BACTW,MAAO,iBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,oBAEvB,IAAI,EAAAjB,cACF,cACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,8BACTW,MAAO,mBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,SAEvB,IAAI,EAAAjB,cACF,YACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,4BACTW,MAAO,iBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,YAEvB,IAAI,EAAAjB,cACF,UACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,0BACTW,MAAO,eACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,kBAEvB,IAAI,EAAAjB,cACF,UACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,0BACTW,MAAO,eACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,eAEvB,IAAI,EAAAjB,cACF,gBACAC,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,+BACTW,MAAO,qBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,WAK7B,E,iGCtFF,gBACA,UACA,UACA,UAEA,MAAaC,EAMT,YAAoBC,GAHZ,KAAAC,aAAoC,GAIxCC,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,oCACnB,CAEO,cAAMK,GACTN,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAEvB,MAAMxc,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI/hD,YACrC7yC,EAAO60F,eACP5gG,KAAK6gG,WAAa90F,EAAOA,cAEvB/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,mCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BAEnBy3E,EAAYR,QACZQ,EAAYR,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACpDrB,EAAYR,QAAQiB,eACjB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,cAAe,UAAWvC,EAAOqC,WAAWC,IAAK,CAC5FE,eAAe,IAGnBvB,EAAYR,QAAU,IAAIQ,EAAYC,EAC1C,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,8BAEvBy3E,EAAYR,aAAUnzF,EAEtBrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,0CACf,EAAAb,UAAUC,QAAQj3E,KAAK,yCAEvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAK6gG,YAAc7gG,KAAK6gG,WAAWkB,SACnC,IAAK,MAAMC,KAAWhiG,KAAK6gG,WAAWkB,SAAU,CAC5C,MAAME,EAAcD,EAAQv/F,MAAQ,MAEpC,GAAIu/F,EAAQ9pB,SAAWrsB,MAAMqc,QAAQ85B,EAAQ9pB,SACzC,IAAK,MAAM0Y,KAAUoR,EAAQ9pB,QAAS,CAClC,MAAM/oE,EAAMyhF,EAAOzhF,KAAO,MACpBhN,EAAQyuF,EAAOzuF,OAAS,MAE9B2/F,GAAa,qFAEH9hG,KAAKkiG,YAAYD,4CACjBjiG,KAAKkiG,YAAY/yF,kDACXnP,KAAKkiG,YAAYj2C,OAAO9pD,gDAE5C,CAER,CA8GJ,MA3GwB,gNAMKu/F,qDACAE,uDACEC,u2FA4FzBC,6EAQV,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOvhB,EAAK6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GAC7C,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,kDACf,EAAAb,UAAUC,QAAQj3E,KAAK,iDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,2DAA6D1/F,EAAQy+F,SAE3E,oBADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EAlPJ,e,qGCLA,gBACA,UACA,UACA,UAEA,MAAakC,EAMT,YAAoBnC,GAHZ,KAAAC,aAAoC,GAIxCC,EAAGC,YAAY,uCACf,EAAAb,UAAUC,QAAQj3E,KAAK,sCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,wCACnB,CAEO,cAAMK,GACTN,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEvB,MAAMxc,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI0B,iBACrCt2F,EAAO60F,eACP5gG,KAAKsiG,gBAAkBv2F,EAAOA,cAE5B/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,sCACf,EAAAb,UAAUC,QAAQj3E,KAAK,qCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,uCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAEnB65E,EAAgB5C,QAChB4C,EAAgB5C,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACxDe,EAAgB5C,QAAQiB,eACrB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,kBAAmB,cAAevC,EAAOqC,WAAWC,IAAK,CACpGE,eAAe,IAGnBa,EAAgB5C,QAAU,IAAI4C,EAAgBnC,EAClD,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEvB65E,EAAgB5C,aAAUnzF,EAE1BrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,8CACf,EAAAb,UAAUC,QAAQj3E,KAAK,6CAEvB,MAAMg6E,EAAapC,EAAGwB,OAAOnB,EAASiB,EAAc,CAChD,eACA,UACA,qBACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAE5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAKsiG,iBAAmBtiG,KAAKsiG,gBAAgBE,aAAe32C,MAAMqc,QAAQloE,KAAKsiG,gBAAgBE,aAC/F,IAAK,MAAMC,KAAQziG,KAAKsiG,gBAAgBE,YAAa,CACjD,MAAME,EAASD,EAAKE,SAAW,MACzBC,EAAWH,EAAKI,WAAa,MAC7BngE,EAAO+/D,EAAK//D,MAAQ,GACpBg1B,EAAO+qC,EAAK/qC,MAAQ,GACpBorC,EAASL,EAAKK,QAAU,GAE9BhB,GAAa,qEAEH9hG,KAAKkiG,YAAYQ,sDACC1iG,KAAKkiG,YAAYU,2CACnC5iG,KAAKkiG,YAAYx/D,oCACjB1iC,KAAKkiG,YAAYj2C,OAAOyL,qCACxB13D,KAAKkiG,YAAYY,gCAE/B,MACO9iG,KAAKsiG,kBAEXR,EAAY,4BAA4Bj/F,KAAKC,UAAU9C,KAAKsiG,gBAAiB,KAAM,sBAgHxF,MA7GwB,gNAMKC,qDACAX,uDACEC,o9FA8FrBC,GAAa,wLAQ3B,CAEQ,WAAAI,CAAYx1D,GAChB,IAAKA,EAAM,MAAO,GAClB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOhC,OAAOvf,GAAM6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GACrD,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,sDACf,EAAAb,UAAUC,QAAQj3E,KAAK,qDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,+DAAiE1/F,EAAQy+F,SAE/E,wBADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EAtPJ,mB,iGCLA,gBACA,UACA,UACA,UAEA,MAAa6C,EAMT,YAAoB9C,GAHZ,KAAAC,aAAoC,GAIxCC,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,oCACnB,CAEO,cAAMK,GACTN,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAEvB,MAAMxc,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqC,aACrCj3F,EAAO60F,eACP5gG,KAAKijG,YAAcl3F,EAAOA,cAExB/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,mCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BAEnBw6E,EAAYvD,QACZuD,EAAYvD,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACpD0B,EAAYvD,QAAQiB,eACjB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,cAAe,UAAWvC,EAAOqC,WAAWC,IAAK,CAC5FE,eAAe,IAGnBwB,EAAYvD,QAAU,IAAIuD,EAAY9C,EAC1C,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,8BAEvBw6E,EAAYvD,aAAUnzF,EAEtBrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,0CACf,EAAAb,UAAUC,QAAQj3E,KAAK,yCAEvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAKijG,aAAejjG,KAAKijG,YAAYplE,QACrC,IAAK,MAAME,KAAU/9B,KAAKijG,YAAYplE,QAAS,CAC3C,MAAMp7B,EAAOs7B,EAAOt7B,MAAQ,MACtB2hC,EAAQrG,EAAOqG,OAASrG,EAAOqG,MAAMrgC,OAAS,EAAIg6B,EAAOqG,MAAMjD,KAAK,MAAQ,OAC5E+hE,EAAYnlE,EAAOmlE,WAAanlE,EAAOmlE,UAAUn/F,OAAS,EAAIg6B,EAAOmlE,UAAU/hE,KAAK,MAAQ,OAC5FgiE,EAASplE,EAAOolE,QAAUplE,EAAOolE,OAAOp/F,OAAS,EAAIg6B,EAAOolE,OAAOl1C,IAAKuD,GAAWA,EAAE/uD,MAAM0+B,KAAK,MAAQ,OAE9G2gE,GAAa,qEAEH9hG,KAAKkiG,YAAYz/F,oCACjBzC,KAAKkiG,YAAY99D,oCACjBpkC,KAAKkiG,YAAYgB,oCACjBljG,KAAKkiG,YAAYiB,gCAE/B,CAsGJ,MAnGwB,gNAMKzB,qDACAE,uDACEC,4kFAoFzBC,GAAa,oLAQvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOvhB,EAAK6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GAC7C,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,kDACf,EAAAb,UAAUC,QAAQj3E,KAAK,iDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,2DAA6D1/F,EAAQy+F,SAE3E,oBADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EAvOJ,e,mGCLA,gBACA,UACA,UACA,UAEA,MAAakD,EAOT,YAAoBnD,GAJZ,KAAAC,aAAoC,GAKxCC,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,sCACnB,CAEO,cAAMK,GACTN,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAEvB,MAAMxc,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI0C,eACrCt3F,EAAO60F,eACP5gG,KAAKsjG,cAAgBv3F,EAAOA,cAE1B/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,qCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAEnB66E,EAAc5D,QACd4D,EAAc5D,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACtD+B,EAAc5D,QAAQiB,eACnB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,gBAAiB,YAAavC,EAAOqC,WAAWC,IAAK,CAChGE,eAAe,IAGnB6B,EAAc5D,QAAU,IAAI4D,EAAcnD,EAC9C,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAEvB66E,EAAc5D,aAAUnzF,EAExBrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,4CACf,EAAAb,UAAUC,QAAQj3E,KAAK,2CAEvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAKsjG,eAAiBtjG,KAAKsjG,cAAcC,UACzC,IAAK,MAAMC,KAAYxjG,KAAKsjG,cAAcC,UAAW,CACjD,MAAME,EAAcD,EAASE,cAAgB,MACvCv/E,EAAUq/E,EAASr/E,SAAW,MAC9B4iE,EAAcyc,EAASzc,aAAe,MAC5C+a,GAAa,qEAEH9hG,KAAKkiG,YAAYuB,oCACjBzjG,KAAKkiG,YAAY/9E,oCACjBnkB,KAAKkiG,YAAYnb,gCAE/B,CAqGJ,MAlGwB,gNAMK2a,qDACAE,uDACEC,yjFAmFzBC,GAAa,sLAQvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOvhB,EAAK6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GAC7C,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,oDACf,EAAAb,UAAUC,QAAQj3E,KAAK,mDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,6DAA+D1/F,EAAQy+F,SAE7E,sBADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EApOJ,iB,qGCLA,gBACA,UACA,UACA,UAEA,MAAayD,EAMT,YAAoB1D,GAHZ,KAAAC,aAAoC,GAIxCC,EAAGC,YAAY,wCACf,EAAAb,UAAUC,QAAQj3E,KAAK,uCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,yCACnB,CAEO,cAAMK,GAIT,GAHAN,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,qCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIiD,YACrC73F,EAAO60F,eACP5gG,KAAK6jG,WAAa93F,EAAOA,cAEvB/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,uCACf,EAAAb,UAAUC,QAAQj3E,KAAK,sCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,wCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEnBo7E,EAAiBnE,QACjBmE,EAAiBnE,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACzDsC,EAAiBnE,QAAQiB,eACtB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,mBAAoB,gBAAiBvC,EAAOqC,WAAWC,IAAK,CACvGE,eAAe,IAGnBoC,EAAiBnE,QAAU,IAAImE,EAAiB1D,EACpD,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEvBo7E,EAAiBnE,aAAUnzF,EAE3BrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,+CACf,EAAAb,UAAUC,QAAQj3E,KAAK,8CAEvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAK6jG,WAAY,CAEjB,GAAI7jG,KAAK6jG,WAAWC,aAAc,CAC9B,MAAMhqF,EAAS9Z,KAAK6jG,WAAWC,aAAahqF,QAAU,MAEtDgoF,GAAa,gHADC9hG,KAAK+jG,gBAAgBjqF,MAIhB9Z,KAAKkiG,YAAYpoF,gCAExC,CAGA,GAAI9Z,KAAK6jG,WAAWG,UAAW,CAC3B,MAAMlqF,EAAS9Z,KAAK6jG,WAAWG,UAAUlqF,QAAU,MAC7CmqF,EAAkB9D,EAAG+D,oBAAoB,IAAI5pE,KAAKt6B,KAAK6jG,WAAWG,UAAUG,8BAAgC,MAElHrC,GAAa,6GADC9hG,KAAK+jG,gBAAgBjqF,MAIhB9Z,KAAKkiG,YAAYpoF,iCAEZ,QAApBmqF,IACAnC,GAAa,0IAGH9hG,KAAKkiG,YAAY+B,qCAGnC,CAGA,GAAIjkG,KAAK6jG,WAAWO,UAAW,CAC3B,MAAMtqF,EAAS9Z,KAAK6jG,WAAWO,UAAUtqF,QAAU,MAC7CmqF,EAAkB9D,EAAG+D,oBAAoB,IAAI5pE,KAAKt6B,KAAK6jG,WAAWO,UAAUC,8BAAgC,MAElHvC,GAAa,6GADC9hG,KAAK+jG,gBAAgBjqF,MAIhB9Z,KAAKkiG,YAAYpoF,iCAEZ,QAApBmqF,IACAnC,GAAa,0IAGH9hG,KAAKkiG,YAAY+B,qCAGnC,CAGA,GAAIjkG,KAAK6jG,WAAWS,cAAe,CAC/B,MAAMxqF,EAAS9Z,KAAK6jG,WAAWS,cAAcxqF,QAAU,MACjDmqF,EAAkB9D,EAAG+D,oBAAoB,IAAI5pE,KAAKt6B,KAAK6jG,WAAWS,cAAcC,kCAAoC,MAE1HzC,GAAa,iHADC9hG,KAAK+jG,gBAAgBjqF,MAIhB9Z,KAAKkiG,YAAYpoF,iCAEZ,QAApBmqF,IACAnC,GAAa,8IAGH9hG,KAAKkiG,YAAY+B,qCAGnC,CACJ,CAoHA,MAlHwB,gNAMKvC,qDACAE,uDACEC,k7EA8EzB,EAAAnB,QAAQlB,QAAQgF,QAAQC,6XAaxB3C,GAAa,kcAgBvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOhC,OAAOvf,GAAM6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GACrD,CAEQ,eAAAuyC,CAAgBjqF,GACpB,MAAM4qF,EAAc5qF,EAAOygE,cAC3B,MAAoB,YAAhBmqB,EACO,IACgB,cAAhBA,EACA,IAEJ,IACX,CAEQ,0BAAAnE,CAA2BC,GAC/BL,EAAGC,YAAY,uDACf,EAAAb,UAAUC,QAAQj3E,KAAK,sDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,gEAAkE1/F,EAAQy+F,SAEhF,YADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EAvTJ,oB,mGCLA,gBACA,UACA,UACA,UAEA,MAAayE,EAMT,YAAoB1E,GAHZ,KAAAC,aAAoC,GAIxCC,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,sCACnB,CAEO,cAAMK,GAIT,GAHAN,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIiE,eACrC74F,EAAO60F,eACP5gG,KAAK6kG,cAAgB94F,EAAOA,cAE1B/L,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,qCACnB,CAEO,aAAOc,GAIV,GAHAf,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAEnBo8E,EAAcnF,QACdmF,EAAcnF,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACtDsD,EAAcnF,QAAQiB,eACnB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,gBAAiB,YAAavC,EAAOqC,WAAWC,IAAK,CAChGE,eAAe,IAGnBoD,EAAcnF,QAAU,IAAImF,EAAc1E,EAC9C,CACJ,CAEO,OAAA1M,GAQH,IAPA4M,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAEvBo8E,EAAcnF,aAAUnzF,EAExBrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,4CACf,EAAAb,UAAUC,QAAQj3E,KAAK,2CAEvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIK,EAAY,GAChB,GAAI9hG,KAAK6kG,eAAiB7kG,KAAK6kG,cAAcC,UACzC,IAAK,MAAMC,KAAY/kG,KAAK6kG,cAAcC,UAAW,CACjD,MAAM31F,EAAM41F,EAAS51F,KAAO,MACtBhN,EAAQ4iG,EAASnxF,KAAO,MACxBmzE,EAAcge,EAAShe,aAAe,GAC5C+a,GAAa,qEAEH9hG,KAAKkiG,YAAY/yF,0CACXnP,KAAKkiG,YAAY//F,2CACvBnC,KAAKkiG,YAAYnb,gCAE/B,CA8GJ,MA3GwB,gNAMK2a,qDACAE,uDACEC,22FA4FzBC,GAAa,sLAQvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOvhB,EAAK6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GAC7C,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,oDACf,EAAAb,UAAUC,QAAQj3E,KAAK,mDAEvBi4E,EAAQ2B,oBACHzhG,IACGy/F,EAAGC,YAAY,6DAA+D1/F,EAAQy+F,SAE7E,sBADDz+F,EAAQy+F,SAERn/F,KAAKygG,iBAIjBp0F,EACArM,KAAKkgG,aAEb,EA9OJ,iB,+FCLA,gBACA,UACA,SAEA,UAGMt8C,EAAQqxC,MAAO1/E,EAAa2tC,WACT,QAAN,qBAAa,QACd8hD,QAAQzvF,EAAK2tC,GAG/B,mBAGI,WAAA8I,CAAmB7rD,GAAA,KAAAA,OAAAA,CAAuB,CAE1C,WAAYgkB,GACR,OAAInkB,KAAKG,OAAOskG,OAAOQ,SAAS,MAAgB,KAC5CjlG,KAAKG,OAAOskG,OAAOQ,SAAS,MAAgB,KACzC,SACX,CAEQ,iBAAMC,GACV,GAAIllG,KAAKmlG,SAAY,OAAOnlG,KAAKmlG,SAGjC,IACI,MAAM3rF,QAAiBoqC,EAAM5jD,KAAKG,OAAOskG,OAAOlzD,QAAQ,UAAW,IAAM,cAAe,CACpFre,OAAQ,OACRne,QAAS,CAAE,eAAgB,oBAC3BouC,KAAMtgD,KAAKC,UAAU,CAAEsiG,SAAUplG,KAAKG,OAAOklG,YAAaC,SAAUtlG,KAAKG,OAAOolG,gBAG9Ex5F,QAAeyN,EAAS7G,OAC9B,GAAwB,MAApB6G,EAASM,QAAsC,MAApBN,EAASM,OAEpC,OADA9Z,KAAKmlG,SAAWp5F,EAAqB,aAC9B/L,KAAKmlG,SAEZhF,EAAGC,YAAY,uBAAuB5mF,EAASM,YAAYjX,KAAKC,UAAUiJ,KAElF,CAAE,MAAOw0C,GACL4/C,EAAGC,YAAY,oBAAqB7/C,GACpC,EAAAg/C,UAAUC,QAAQj3E,KAAK,+BAAgC,CAAEg4B,MAAQA,EAAgB7/C,SACrF,CAEJ,CAEQ,gBAAM8kG,GACV,MAAMzwF,EAAkC,CACpC,eAAgB,oBAGpB,GAAqB,OAAjB/U,KAAKmkB,QACLpP,EAAuB,cAAI,UAAW,IAAAqwC,QAAO,GAAGplD,KAAKG,OAAOklG,eAAerlG,KAAKG,OAAOolG,oBACpF,GAAqB,OAAjBvlG,KAAKmkB,QAAkB,CAC9B,MAAMkJ,QAAcrtB,KAAKklG,cACrB73E,EACAtY,EAAuB,cAAI,UAAYsY,EAEvC8yE,EAAGsF,mBAAmB,iDAE9B,CACA,OAAO1wF,CACX,CAEO,qBAAM2wF,GACT,IACI,MAAM3wF,QAAgB/U,KAAKwlG,aAE3B,OAA2B,aADJ5hD,EAAM,GAAG5jD,KAAKG,OAAOskG,sBAAuB,CAAEvxE,OAAQ,MAAOne,aACpE+E,MACpB,CAAE,MAAOtZ,GAEL,OADA,EAAA++F,UAAUC,QAAQj3E,KAAK,mCAAoC,CAAEg4B,MAAQ//C,EAAYE,WAC1E,CACX,CACJ,CAEO,gBAAMilG,GACT,MAAM55F,EAAS,IAAI,EAAA65F,aACbC,EAAiB,GACvB,IAAI9/C,EAAS,EAGb,IACI,OAAa,CACT,MAAMhxC,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,gCAAqC1+C,IAAU,CAAE7yB,OAAQ,MAAOne,YACtGvB,QAAagG,EAAS7G,OAE5B,GAAwB,MAApB6G,EAASM,OAST,OAFAqmF,EAAG2F,oBAAoB,iBAAkBtyF,GACzCzH,EAAO60F,cAAe,EACf70F,EAPP,GADA85F,EAAQ91F,QAAQyD,EAAW,MACvBA,EAAW,KAAEzP,OAVf,IAWE,MAEJgiD,GAbE,GAmBV,CACAh6C,EAAOA,OAAS85F,EAChB95F,EAAO60F,cAAe,CAC1B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,6BAA8BxlD,GAClD,EAAAg/C,UAAUC,QAAQj3E,KAAK,8BAA+B,CAAEg4B,MAAQA,EAAgB7/C,UAChFqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,gBAAMi6F,CAAWC,EAAe9lG,EAAiB,KAAMi3C,GAC1D,MAAMrrC,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aAC3B,IAAIriD,EAAY,CAAE+iD,KAAMrjG,KAAKyc,MAAMnf,IAEd,OAAjBH,KAAKmkB,SAAoBizB,EACzB+L,EAAKgjD,aAAe/uD,EAAO,aACH,OAAjBp3C,KAAKmkB,UACZg/B,EAAKgjD,aAAe/uD,EAAQA,EAAO,cAAgB,IAAI9c,MAAO6c,eAGlE,MAAM39B,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,YAAiB,CACxE/yE,OAAQ,OACRne,UACAouC,KAAMtgD,KAAKC,UAAUqgD,KAGnB3vC,QAAagG,EAAS7G,OACJ,MAApB6G,EAASM,QAAsC,MAApBN,EAASM,QAEpC/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,IAEtBT,EAAG2F,oBAAoB,GAAGG,kBAAuBzyF,GACjDzH,EAAO60F,cAAe,EAE9B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,kBAAuB1lD,GAC9C,EAAAg/C,UAAUC,QAAQj3E,KAAK,8BAA+B,CAAE09E,QAAO1lD,MAAQA,EAAgB7/C,UACvFqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,eAAMq6F,CAAUH,EAAeI,GAClC,MAAMt6F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,aAAiBI,IAAY,CAAEnzE,OAAQ,MAAOne,YACnGvB,QAAagG,EAAS7G,OAEJ,MAApB6G,EAASM,QACT/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,GAEtB70F,EAAO60F,cAAe,CAE9B,CAAE,MAAOrgD,GACL,EAAAg/C,UAAUC,QAAQj3E,KAAK,6BAA8B,CAAE09E,QAAOI,WAAU9lD,MAAQA,EAAgB7/C,UAChGqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,mBAAMu6F,CAAcL,GACvB,MAAMM,QAAgBvmG,KAAKwmG,iBAAiBP,GAC5C,GAAIM,EAAQ3F,cAAgB2F,EAAQx6F,QAAUw6F,EAAQx6F,OAAO06F,UAAYF,EAAQx6F,OAAO06F,SAAS1iG,OAAS,EACtG,OAAO/D,KAAKomG,UAAUH,EAAOM,EAAQx6F,OAAO06F,SAAS,GAAGC,YAE5D,MAAMljD,EAAM,IAAI,EAAAoiD,aAEhB,OADApiD,EAAIo9C,cAAe,EACZp9C,CACX,CAEO,sBAAMgjD,CAAiBP,EAAe7uD,GACzC,MAAMrrC,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aAC3B,IAAIjwF,EAAM,GAAGvV,KAAKG,OAAOskG,eAAewB,iCAGxC,GAAI7uD,EAAM,CACN,MAAMuvD,EAAY,GAAGvvD,cACfwvD,EAAU,GAAGxvD,cACnB7hC,GAAO,mBAAmBmH,mBAAmBiqF,qBAA6BjqF,mBAAmBkqF,IACjG,CAEA,MAAMptF,QAAiBoqC,EAAMruC,EAAK,CAAE2d,OAAQ,MAAOne,YAC7CvB,QAAagG,EAAS7G,OAEJ,MAApB6G,EAASM,QACT/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,GAEtB70F,EAAO60F,cAAe,CAE9B,CAAE,MAAOrgD,GACL,EAAAg/C,UAAUC,QAAQj3E,KAAK,oCAAqC,CAAE09E,QAAO1lD,MAAQA,EAAgB7/C,UAC7FqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,cAAM86F,CAASZ,EAAea,GACjC,MAAM/6F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,IAAS,CAChE/yE,OAAQ,QACRne,UACAouC,KAAMtgD,KAAKC,UAAU,CAAEikG,UAAWD,MAEhCtzF,QAAagG,EAAS7G,OAEJ,MAApB6G,EAASM,QAET/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,IAEtBT,EAAG2F,oBAAoB,GAAGG,gBAAqBzyF,GAC/CzH,EAAO60F,cAAe,EAE9B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,gBAAqB1lD,GAC5C,EAAAg/C,UAAUC,QAAQj3E,KAAK,4BAA6B,CAAE09E,QAAO1lD,MAAQA,EAAgB7/C,UACrFqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,mBAAMi7F,CAAcf,EAAegB,GACtC,MAAMl7F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aAC3B,IAAIjwF,EAAM,GACV,GAAqB,OAAjBvV,KAAKmkB,SAAoB8iF,EACzB1xF,EAAM,GAAGvV,KAAKG,OAAOskG,qBAAqBwC,QACvC,IAAqB,OAAjBjnG,KAAKmkB,QAGZ,MAAM,IAAI48D,MAAM,iDAFhBxrE,EAAM,GAAGvV,KAAKG,OAAOskG,qBAAqBwB,GAG9C,CAEA,MAAMzsF,QAAiBoqC,EAAMruC,EAAK,CAAE2d,OAAQ,MAAOne,YAEnD,GAAwB,MAApByE,EAASM,OAAgB,CACzB,GAAqB,OAAjB9Z,KAAKmkB,QAAkB,CACvB,MAAMxR,QAAa6G,EAAS7G,OAC5B5G,EAAOA,OAAS4G,EAAKu0F,OACzB,MACIn7F,EAAOA,aAAeyN,EAASkzB,OAEnC3gC,EAAO60F,cAAe,CAC1B,KAAO,CACH,MAAMptF,QAAagG,EAAS7G,OAC5BwtF,EAAG2F,oBAAoB,GAAGG,sBAA2BzyF,GACrDzH,EAAO60F,cAAe,CAC1B,CACJ,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,sBAA2B1lD,GAClD,EAAAg/C,UAAUC,QAAQj3E,KAAK,iCAAkC,CAAE09E,QAAO1lD,MAAQA,EAAgB7/C,UAC1FqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,qBAAMo7F,GACT,MAAMp7F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,sBAAuB,CAAEvxE,OAAQ,MAAOne,YAC9EvB,QAAagG,EAAS7G,OAEJ,MAApB6G,EAASM,QACT/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,GAEtB70F,EAAO60F,cAAe,CAE9B,CAAE,MAAOrgD,GACL,EAAAg/C,UAAUC,QAAQj3E,KAAK,mCAAoC,CAAEg4B,MAAQA,EAAgB7/C,UACrFqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEM,wBAAMq7F,CAAmBnB,EAAeI,EAAkBgB,EAAgBC,GAC5E,MAAMv7F,EAAS,IAAI,EAAA65F,aACnB,IAEI,MAAM7wF,QAAgB/U,KAAKwlG,aAErB+B,QAAe3jD,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,aAAiBI,mBAA0BgB,UAAeC,IAAa,CAAEp0E,OAAQ,MAAOne,YAC3IyyF,QAAgBD,EAAO50F,OAE7B5G,EAAOA,OAASy7F,EAChBz7F,EAAO60F,cAAe,CAC1B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,cAAmB1lD,GAC1C,EAAAg/C,UAAUC,QAAQj3E,KAAK,sCAAuC,CAAE09E,QAAOI,WAAUgB,SAAQC,UAAWA,EAAUtkG,WAAYu9C,MAAQA,EAAgB7/C,UAClJqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEM,4BAAM07F,CAAuBxB,EAAeI,EAAkBgB,EAAgBC,GAChF,MAAMv7F,EAAS,IAAI,EAAA65F,aACnB,IAEI,QAAkBv5F,IAAdi7F,EAAyB,CAEzB,MAAMI,QAA4B1nG,KAAK2nG,iBAAiB1B,EAAOI,GAC/D,IAAKqB,EAAoB9G,aAGrB,OAFA70F,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQmnD,EAAoBnnD,MAC5Bx0C,EAGX,MAAM67F,EAAeF,EAAoB37F,OAAO87F,eAAeC,KAAMC,GAAYA,EAAGC,UAAYX,GAChG,IAAKO,EACD,MAAM,IAAI7mB,MAAM,uCAAuCsmB,KAE3DC,EAAYM,EAAaK,UAC7B,CAGA,MAAMC,QAAsBloG,KAAKonG,mBAAmBnB,EAAOI,EAAUgB,EAAQC,GAC7E,IAAKY,EAActH,aAGf,OAFA70F,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQ2nD,EAAc3nD,MACtBx0C,EAGX,MAAMy7F,EAAUU,EAAcn8F,OACxBo8F,EAAUtlG,KAAKC,UAAU0kG,EAAS,KAAM,GAE9C,IAAIY,EAAa,GACjBA,GAAa,iEACbA,GAAc,OAAOnC,aAAiBI,aAAoBgB,UAAeC,MACzEc,GAAc,mEACdA,GAAcD,EAEdp8F,EAAOA,OAASq8F,EAChBr8F,EAAO60F,cAAe,CAC1B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,cAAmB1lD,GAC1C,EAAAg/C,UAAUC,QAAQj3E,KAAK,0CAA2C,CAAE09E,QAAOI,WAAUgB,SAAQC,UAAWA,GAAWtkG,YAAc,YAAau9C,MAAQA,EAAgB7/C,UACtKqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,0BAAMs8F,CAAqBpC,GAC9B,MAAMl6F,EAAS,IAAI,EAAA65F,aACnB,IAEI,MAAMW,QAAgBvmG,KAAKwmG,iBAAiBP,GAC5C,IAAKM,EAAQ3F,eAAiB2F,EAAQx6F,OAAO06F,SAAS1iG,OAClD,MAAM,IAAIg9E,MAAM,qBAGpB,MAAMslB,EAAWE,EAAQx6F,OAAO06F,SAAS,GAAGC,WAC5C,IAAI0B,QAAmBpoG,KAAKsoG,iBAAiBrC,EAAOI,GACpD,IAAK+B,EAAWxH,aAGZ,OAFA70F,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQ6nD,EAAW7nD,MACnBx0C,EAEXA,EAAOA,OAASq8F,EAAWr8F,OAC3BA,EAAO60F,cAAe,CAC1B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,cAAmB1lD,GAC1C,EAAAg/C,UAAUC,QAAQj3E,KAAK,wCAAyC,CAAE09E,QAAO1lD,MAAQA,EAAgB7/C,UACjGqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,sBAAMu8F,CAAiBrC,EAAeI,GACzC,MAAMt6F,EAAS,IAAI,EAAA65F,aAEnB,IACI,MAAM8B,QAA4B1nG,KAAK2nG,iBAAiB1B,EAAOI,GAC/D,IAAKqB,EAAoB9G,aAGrB,OAFA70F,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQmnD,EAAoBnnD,MAC5Bx0C,EAGX,IAAIq8F,EAAa,GACjB,IAAK,MAAML,KAAML,EAAoB37F,OAAO87F,eAAgB,CACxD,MAAMR,EAASU,EAAGC,QACZV,EAAYS,EAAGE,WAEfM,QAAsBvoG,KAAKynG,uBAAuBxB,EAAOI,EAAUgB,EAAQC,GACjF,IAAKiB,EAAc3H,aAGf,OAFA70F,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQgoD,EAAchoD,MACtBx0C,EAEXq8F,GAAcG,EAAcx8F,OAAS,MACzC,CAGA,OAFAA,EAAOA,OAASq8F,EAChBr8F,EAAO60F,cAAe,EACf70F,CACX,CAAE,MAAOw0C,GACL4/C,EAAG4F,iBAAiB,GAAGE,cAAmB1lD,GAC1C,EAAAg/C,UAAUC,QAAQj3E,KAAK,oCAAqC,CAAE09E,QAAOI,WAAU9lD,MAAQA,EAAgB7/C,UACvGqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CAEJ,CAEO,gBAAMioD,CAAWvC,GACpB,OAAOjmG,KAAKyoG,WAAW,SAASxC,IACpC,CAEO,iBAAMyC,CAAYzC,GACrB,OAAOjmG,KAAKyoG,WAAW,SAASxC,UACpC,CAEO,sBAAM0B,CAAiB1B,EAAeI,GACzC,OAAOrmG,KAAKyoG,WAAW,SAASxC,aAAiBI,kBACrD,CAEO,kBAAMsC,CAAa1C,EAAeI,GACrC,MAAMt6F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,aAAiBI,IAAY,CACpFnzE,OAAQ,QACRne,UACAouC,KAAMtgD,KAAKC,UAAU,CAAEytB,MAAO,aAE5B/c,QAAagG,EAAS7G,OACJ,MAApB6G,EAASM,QACT/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,IAEtBT,EAAG2F,oBAAoB,GAAGG,iBAAsBzyF,GAChDzH,EAAO60F,cAAe,EAE9B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,GAAGE,iBAAsB1lD,GAC7C,EAAAg/C,UAAUC,QAAQj3E,KAAK,gCAAiC,CAAE09E,QAAOI,WAAU9lD,MAAQA,EAAgB7/C,UACnGqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,kBAAM68F,CAAa3C,EAAeI,EAAkBgB,GACvD,MAAMt7F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,aAAiBI,mBAA0BgB,gBAAsB,CAAEn0E,OAAQ,MAAOne,YAE7I,GAAwB,MAApByE,EAASM,OAAgB,CACzB,MAAMtG,QAAagG,EAAS7G,OAC5B5G,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,CAC1B,KAAO,CACH,MAAMptF,QAAagG,EAAS7G,OAC5BwtF,EAAG2F,oBAAoB,wBAAwBuB,IAAU7zF,GACzDzH,EAAO60F,cAAe,CAC1B,CACJ,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,wBAAwBsB,IAAU9mD,GACtD,EAAAg/C,UAAUC,QAAQj3E,KAAK,gCAAiC,CAAE09E,QAAOI,WAAUgB,SAAQ9mD,MAAQA,EAAgB7/C,UAC3GqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAEO,sBAAM88F,CAAiB5C,EAAeI,EAAkByC,GAC3D,MAAM/8F,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,eAAewB,aAAiBI,IAAY,CACpFnzE,OAAQ,QACRne,UACAouC,KAAMtgD,KAAKC,UAAU,CAAEgmG,KAAMA,MAE3Bt1F,QAAagG,EAAS7G,OAEJ,MAApB6G,EAASM,QAET/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,IAEtBT,EAAG2F,oBAAoB,wBAAyBtyF,GAChDzH,EAAO60F,cAAe,EAE9B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,wBAAyBxlD,GAC7C,EAAAg/C,UAAUC,QAAQj3E,KAAK,oCAAqC,CAAE09E,QAAOI,WAAU9lD,MAAQA,EAAgB7/C,UACvGqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,CAGO,oBAAMs2F,GACT,OAAOriG,KAAKyoG,WAAW,eAC3B,CAEO,kBAAM7D,GACT,OAAO5kG,KAAKyoG,WAAW,aAC3B,CAEO,kBAAMpF,GACT,OAAOrjG,KAAKyoG,WAAW,aAC3B,CAEO,eAAM7pD,GACT,OAAO5+C,KAAKyoG,WAAW,UAC3B,CAEO,gBAAMzF,GACT,OAAOhjG,KAAKyoG,WAAW,WAC3B,CAEO,eAAM7E,GACT,OAAO5jG,KAAKyoG,WAAW,kBAC3B,CAEQ,gBAAMA,CAAWnkD,GACrB,MAAMv4C,EAAS,IAAI,EAAA65F,aACnB,IACI,MAAM7wF,QAAgB/U,KAAKwlG,aACrBhsF,QAAiBoqC,EAAM,GAAG5jD,KAAKG,OAAOskG,SAASngD,IAAY,CAAEpxB,OAAQ,MAAOne,YAC5EvB,QAAagG,EAAS7G,OACJ,MAApB6G,EAASM,QACT/N,EAAOA,OAASyH,EAChBzH,EAAO60F,cAAe,IAEtBT,EAAG2F,oBAAoB,kBAAkBxhD,IAAY9wC,GACrDzH,EAAO60F,cAAe,EAE9B,CAAE,MAAOrgD,GACL4/C,EAAG4F,iBAAiB,kBAAkBzhD,IAAY/D,GAClD,EAAAg/C,UAAUC,QAAQj3E,KAAK,8BAA+B,CAAE+7B,WAAU/D,MAAQA,EAAgB7/C,UAC1FqL,EAAO60F,cAAe,EACtB70F,EAAOw0C,MAAQA,CACnB,CACA,OAAOx0C,CACX,E,4EC9iBJ,wBAA6BokB,EAAa81E,EAAeI,GAE/Cl2E,aAAkB,EAAA44E,UAAY,EAAAA,QAAQvJ,SAAW,EAAAuJ,QAAQvJ,QAAQyG,QAAUA,GAC7E,EAAA8C,QAAQvJ,QAAQwJ,WAAW/C,EAAOI,GAGhCl2E,aAAkB,EAAA84E,cAAgB,EAAAA,YAAYzJ,SAChD,EAAAyJ,YAAYzJ,SAAS0J,wBAAwBjD,EAAOI,EAAU,SAGtE,EAEA,2BAAgCl2E,EAAa81E,EAAeI,GAElDl2E,aAAkB,EAAA44E,UAAY,EAAAA,QAAQvJ,SAAW,EAAAuJ,QAAQvJ,QAAQyG,QAAUA,GAC7E,EAAA8C,QAAQvJ,QAAQwJ,WAAW/C,EAAOI,GAGhCl2E,aAAkB,EAAA84E,cAAgB,EAAAA,YAAYzJ,SAChD,EAAAyJ,YAAYzJ,SAAS0J,wBAAwBjD,EAAOI,EAAU,SAGtE,EAGA,qBAA0Bl2E,EAAa81E,GAE7B91E,aAAkB,EAAA44E,UAAY,EAAAA,QAAQvJ,SAAW,EAAAuJ,QAAQvJ,QAAQyG,QAAUA,GAC7E,EAAA8C,QAAQvJ,QAAQ2J,kBAGdh5E,aAAkB,EAAA84E,cAAgB,EAAAA,YAAYzJ,SAChD,EAAAyJ,YAAYzJ,SAAS4J,gBAAgBnD,EAG7C,EAEA,uBAA4B91E,EAAa81E,GAE/B91E,aAAkB,EAAA44E,UAAY,EAAAA,QAAQvJ,SAAW,EAAAuJ,QAAQvJ,QAAQyG,QAAUA,GAC7E,EAAA8C,QAAQvJ,QAAQ2J,kBAGdh5E,aAAkB,EAAA84E,cAAgB,EAAAA,YAAYzJ,SAChD,EAAAyJ,YAAYzJ,SAAS6J,kBAAkBpD,EAG/C,EAnDA,gBACA,M,+FCCA,qBAII,WAAAj6C,GACIhsD,KAAK+L,YAASM,EACdrM,KAAK4gG,cAAe,EACpB5gG,KAAKugD,WAAQl0C,CACjB,E,6FCVJ,eAEA,UACA,UAEA,MAAaq0F,EASZ,YAAmBniD,GAFT,KAAA+qD,WAA6B,GAGtC5I,EAAQlB,QAAUx/F,KACZA,KAAKupG,QAAUhrD,EACfv+C,KAAKihG,aAAe1iD,EAAQkjD,aAC5BzhG,KAAKwpG,WACZ,CAEU,SAAAC,GACHtJ,EAAGC,YAAY,mBAEfpgG,KAAKupG,QAAQG,YAAYxpD,OAAO,SAAUlgD,KAAKwkG,QAAQC,QACvDzkG,KAAKupG,QAAQG,YAAYxpD,OAAO,cAAelgD,KAAKwkG,QAAQa,aAC5DrlG,KAAKupG,QAAQG,YAAYxpD,OAAO,cAAelgD,KAAKwkG,QAAQe,aAC5DvlG,KAAKupG,QAAQG,YAAYxpD,OAAO,aAAclgD,KAAKspG,WACvD,CAEO,SAAAE,GACHrJ,EAAGC,YAAY,oBAEf,MAAMuJ,EAAqB3pG,KAAKupG,QAAQG,YAAY14E,IAAI,WAAa,GAC/D44E,EAA0B5pG,KAAKupG,QAAQG,YAAY14E,IAAI,gBAAkB,GACzE64E,EAA0B7pG,KAAKupG,QAAQG,YAAY14E,IAAI,gBAAkB,GAE3E24E,GAAcC,IACd5pG,KAAKwkG,OAAS,CAAEC,OAAQkF,EAAYtE,YAAauE,EAAiBrE,YAAasE,GAC/E7pG,KAAK2gG,IAAM,IAAI,EAAAmJ,WAAW9pG,KAAKwkG,SAGnCxkG,KAAKspG,WAAatpG,KAAKupG,QAAQG,YAAY14E,IAAI,eAAiB,EACpE,CAEO,SAAA+4E,CAAUC,GACbhqG,KAAKwkG,OAASwF,EACdhqG,KAAK2gG,IAAM,IAAI,EAAAmJ,WAAW9pG,KAAKwkG,QAC/BxkG,KAAKypG,WACT,CAEO,YAAAQ,CAAaxF,EAAgBY,GAChCrlG,KAAKwkG,OAASxkG,KAAKspG,WAAWxB,KAAMkC,GAAWA,EAAOvF,SAAWA,GAAUuF,EAAO3E,cAAgBA,GAC9FrlG,KAAKwkG,SACLxkG,KAAK2gG,IAAM,IAAI,EAAAmJ,WAAW9pG,KAAKwkG,QAC/BxkG,KAAKypG,YAEb,CAEO,YAAAS,CAAazF,EAAgBY,GAChCrlG,KAAKspG,WAAatpG,KAAKspG,WAAWh3B,OAAQ03B,KAAaA,EAAOvF,SAAWA,GAAUuF,EAAO3E,cAAgBA,IAC1GrlG,KAAKypG,WACT,CAEO,SAAAU,CAAUH,GACEhqG,KAAKspG,WAAWc,KAAMj4E,GAAMA,EAAEsyE,SAAWuF,EAAOvF,QAAUtyE,EAAEkzE,cAAgB2E,EAAO3E,eAE9FrlG,KAAKspG,WAAWv5F,KAAKi6F,GACrBhqG,KAAKypG,YAEb,CAEO,UAAAY,CAAWC,GAGd,OAFU,IAAI,EAAAR,WAAWQ,GACR5E,iBAErB,CAEO,YAAA6E,GACHvqG,KAAKspG,WAAa,GAClBtpG,KAAKwkG,YAASn4F,EACdrM,KAAK2gG,SAAMt0F,EACXrM,KAAKypG,WACT,CAEO,SAAAe,CAAU/F,EAAgBY,GAC7B,OAAOrlG,KAAKspG,WAAWxB,KAAMkC,GAAWA,EAAOvF,SAAWA,GAAUuF,EAAO3E,cAAgBA,EAC/F,CAEO,mBAAAoF,GACH,MAAO,IAAK1L,EAAOrI,UAAUgU,kBAAoB,GACrD,CAEO,kBAAAC,GACH,MAAMC,EAAU5qG,KAAKyqG,sBACrB,GAAIG,EAAQ7mG,OAAS,EACjB,OAAO6mG,EAAQ,EAGvB,CAEA,sBAAWC,GAEP,OADgB7qG,KAAKyqG,sBACN1mG,OAAS,CAC5B,CAEI,OAAAwvF,GACNmN,EAAQlB,aAAUnzF,CACnB,EAvGD,W,4ECDA,gBAAO4oF,iBAGH,MAAM6V,EAAW/L,EAAO9Z,OAAO8lB,eAAe,CAAEtoG,KAAM,mBACtDqoG,EAASE,MAAK,GACdF,EAASG,SAAS,qCAAqC,GAEvD9b,WAAW,KACP2b,EAASG,SAAS,4FAA4F,IAC/G,KAEHC,GACJ,EAIA,gCACI,QAAsB7+F,IAAlB8+F,EACA,OAAOA,EAGX,IAAK,EAAAzK,QAAQlB,QAAQqL,mBACjB,OAAO,EAGX,MACMO,EAAkBrM,EAAOsM,IAAIC,SAAS,EAAA5K,QAAQlB,QAAQmL,qBAAsBtgC,IADzD,0BAEzB,IAEI,OADA8gC,EAAgB/S,EAAGmT,WAAWH,EAAgBI,QACvCL,CACX,CAAE,MAAO5qD,GACL,OAAO,CACX,CACJ,EAEA,6BAvCA,gBACA,UACA,UAgBA,IAAI4qD,EAqBJ,SAAgBD,IAEZ/b,WAAW,KACPgc,OAAgB9+F,GACjB,IACP,C,+FC5CA,gBACA,UAEA,MAAakzF,EAOT,WAAAvzC,CAAYzN,GALJ,KAAAg1B,iBAAmB,iPAGnB,KAAAk4B,cAA0Cp/F,EAG9CkzF,EAAUC,QAAUx/F,KAChB++F,EAAOr1D,IAAIgiE,oBAAsB1rG,KAAKuzE,mBACtCvzE,KAAKyrG,SAAW,IAAI,EAAA9W,kBAAkB30F,KAAKuzE,kBAC3Ch1B,EAAQotD,cAAc57F,KAAK/P,KAAKyrG,UAExC,CAEO,IAAAljF,CAAKhnB,EAAmB0rC,EAAwC+hB,GAC9D+vC,EAAOr1D,IAAIgiE,oBACX1rG,KAAKyrG,UAEVzrG,KAAKyrG,SAAS5Y,mBAAmBtxF,EAAW0rC,EAAY+hB,EAC5D,CAEO,SAAA48C,CAAUrqG,EAAmBsqG,EAAkD78C,GAClF,GAAK+vC,EAAOr1D,IAAIgiE,oBACX1rG,KAAKyrG,SAGV,GAAII,aAAwB9qB,MACxB/gF,KAAKyrG,SAASpY,wBAAwB9xF,EAAW,CAC7Cb,QAASmrG,EAAanrG,QACtB+B,KAAMopG,EAAappG,KACnBmwD,MAAOi5C,EAAaj5C,OAAS,IAC9B5D,OACA,CACH,MAAMkb,EAAQ2hC,GAAgB,CAAC,EAC/B7rG,KAAKyrG,SAASpY,wBAAwB9xF,EAAW2oE,EAAOlb,EAC5D,CACJ,CAEO,OAAAukC,GACCvzF,KAAKyrG,UACLzrG,KAAKyrG,SAASlY,SAEtB,EA3CJ,a,4ECOA,2BAAgCn8C,GAC9B,OAAKA,EAGEA,EAAKD,cAAcxnC,MAAM,KAAK,GAF5B,EAGX,EAEA,+BAAoCynC,GAClC,OAAKA,EAGEA,EAAKD,cAAc5F,QAAQ,IAAK,KAAKuJ,UAAU,EAAG,IAFhD,EAGX,EAEA,kBAAuB0lD,EAAkBiB,EAAmBqK,GAC1D,OAAOtL,EAAQuL,aAAa,EAAAV,IAAIC,SAAS7J,KAAiBqK,GAC5D,EAEA,6BAAkCprG,EAAcsrG,EAAuB,qDAEhEC,IACHA,EAAgBlN,EAAO9Z,OAAOinB,oBAAoB,sBAGpDD,EAAcE,QAES,iBAAZzrG,EACTurG,EAAcG,WAAWvpG,KAAKC,UAAUpC,EAAS,KAAM,IAGvDurG,EAAcG,WAAW1rG,GAE3BurG,EAAcjB,OACdqB,EAAgBL,EAClB,EAEA,gBAuBA,oBAIA,8BAAmCtrG,GACjCq+F,EAAO9Z,OAAOwgB,mBAAmB/kG,EACnC,EAEA,4BAAiCA,EAAiB6/C,OAA2Bl0C,GACvEk0C,EACFw+C,EAAO9Z,OAAO8gB,iBAAiBrlG,EAvEV,OAuE+B6/C,EAAM99C,KAvErC,OAuEuD89C,EAAM7/C,SAGlFq+F,EAAO9Z,OAAO8gB,iBAAiBrlG,EAEnC,EAEA,+BAAoCA,EAAiB4rG,GACnD,IAAIC,EAAkB,GAClBD,EACwB,MAAtBA,EAAWxyF,QACbyyF,EAAU,wBACVxN,EAAO9Z,OAAO8gB,iBAAiBwG,IAEF,MAAtBD,EAAWxyF,QAClByyF,EAAU,kCACVxN,EAAO9Z,OAAO8gB,iBAAiBwG,IAEF,MAAtBD,EAAWxyF,QAClByyF,EAAU,yBACVxN,EAAO9Z,OAAO8gB,iBAAiBwG,IAG/BxN,EAAO9Z,OAAO8gB,iBAAiBwG,GAIjCxN,EAAO9Z,OAAO8gB,iBAAiBrlG,EAEnC,EAEA,iCACE,MAAQyjB,QAASqoF,GAAe3pG,KAAKyc,OACnC,IAAAmtF,eAAa,IAAAtrE,MAAKurE,UAAW,KAAM,gBAAiB,CAAEC,SAAU,UAElE,OAAOH,CACT,EAEA,oBAAyBhO,GAEvB,WACE,IACE,MAAMxjE,QAAY+jE,EAAOrI,UAAUkW,iBAAiB7N,EAAOsM,IAAI7M,KAAKA,UAC9DO,EAAO9Z,OAAO4nB,iBAAiB7xE,EAAK,CAAE8xE,WAAY/N,EAAOqC,WAAWC,IAAK0L,SAAS,GAC1F,CAAE,MAAOvzB,GACP4mB,EAAY,iBAAkB5mB,EAChC,CACD,EAPD,EAQF,EAMA,uBAA4BmtB,EAAiBC,GAC3C,OAAKD,KAIAC,GAAWA,EAAUD,KACxBC,EAAU,IAAItsE,MAIR0yE,EADSpG,EAAQqG,UAAYtG,EAAUsG,YAPtC,EASX,EAEA,oBAWA,wBAA6BC,GAC3B,IAEE,MAAwB,iBADXrqG,KAAKyc,MAAM4tF,EAE1B,CAAE,MAAO1sG,GACP,OAAO,CACT,CACF,EAEA,uBAA4B2sG,GAE1B,IAAKA,EAAWn2D,MADF,uBAEZ,OAAO,EAET,MAAM0U,EAAI,IAAIpxB,KAAK6yE,GACbC,EAAO1hD,EAAErnD,UACf,SAAK+oG,GAAiB,IAATA,IAGN1hD,EAAEvU,cAActnC,MAAM,EAAG,MAAQs9F,CAC1C,EAjLA,gBACA,UACA,UACA,UAEA,IAAIlB,EACAoB,EAwCJ,SAAgBjN,EAAY1/F,EAAc6/C,OAA2Bl0C,GACnE,MAAMg+B,GAAM,IAAI/P,MAAOgzE,iBAElBD,IACHA,EAAoBtO,EAAO9Z,OAAOinB,oBAAoB,gBAGjC,iBAAZxrG,EACT2sG,EAAkBjB,WAAW,IAAM/hE,EAAM,KAAOxnC,KAAKC,UAAUpC,EAAS,KAAM,IAG9E2sG,EAAkBjB,WAAW,IAAM/hE,EAAM,KAAO3pC,GAG9C6/C,IACF8sD,EAAkBjB,WAAW7rD,EAAM99C,MACnC4qG,EAAkBjB,WAAW7rD,EAAM7/C,SAC/B6/C,EAAMqS,OACRy6C,EAAkBjB,WAAW7rD,EAAMqS,OAGzC,CAEA,SAAgBy5C,EAAgB3rG,GAC9Bq+F,EAAO9Z,OAAOsoB,uBAAuB7sG,EACvC,CA0DA,SAAS8sG,EAAan+C,GACpB,OAAOA,EAAIrsD,WAAWyqG,SAAS,EAAG,IACpC,CAeA,SAAgBT,EAAgBU,GAC9B,IAAIC,EAAUjhG,KAAKkhG,MAAMF,EAAe,KACpCG,EAAUnhG,KAAKkhG,MAAMD,EAAU,IACnC,MAAMG,EAAQphG,KAAKkhG,MAAMC,EAAU,IAKnC,OAHAF,GAAoB,GACpBE,GAAoB,GAEb,GAAGL,EAAaM,MAAUN,EAAaK,MAAYL,EAAaG,IACzE,C,yGC1JA,gBACA,UACA,OAEA,0CAES,KAAAtO,qBAA4E,IAAIN,EAAOhN,aACtF,KAAAuN,oBAAoEt/F,KAAKq/F,qBAAqB96F,MAEvG,KAAAwpG,gBAAiC,GACjC,KAAAC,eAAgC,EAyCjC,CAvCC,OAAA9d,GACClwF,KAAKq/F,qBAAqBjiD,MAC3B,CAEA,+BAAA6wD,GAEC,GADAjuG,KAAK+tG,gBAAkB,GACnB/tG,KAAKkuG,QACR,IAAK,IAAIC,KAAOnuG,KAAKkuG,QACpB,GAAIC,EAAK,CACR,IAAIC,EAAW,IAAI,EAAAC,YAAYF,GAC/BnuG,KAAK+tG,gBAAgBh+F,KAAKq+F,EAC3B,CAGH,CAEA,WAAAzO,CAAYD,GACX,OAAKA,EAIElM,QAAQxmE,QAAQ,KAHtBhtB,KAAKguG,eAAiBhuG,KAAKsuG,oBACpB9a,QAAQxmE,QAAQhtB,KAAKguG,gBAG9B,CAEA,iBAAAM,GACC,IAAIviG,EAAwB,GAC5B,IAAK,IAAIk9E,KAAQjpF,KAAK+tG,gBACjB,EAAA9E,YAAYzJ,QAAQ+O,eAAiBtlB,EAAKulB,gBAAgB,EAAAvF,YAAYzJ,QAAQ+O,eAC9E,EAAAtF,YAAYzJ,QAAQiP,gBAAkBxlB,EAAKylB,UAC3C,EAAAzF,YAAYzJ,QAAQmP,mBAAqB1lB,EAAK2lB,OAElD7iG,EAAOgE,KAAKk5E,GAEb,OAAOl9E,CACR,CAEA,WAAA0zF,CAAYC,GACX,OAAOA,CACR,E,iGClDD,gBAEA,OAEA,MAAa2O,UAAoBtP,EAAOC,SAapC,WAAAhzC,CAAY6iD,GACR5X,MAAM4X,EAAYC,QANf,KAAAC,eAAyB,GACzB,KAAAC,eAAyB,GACxB,KAAAC,QAAkB,EACnB,KAAAC,YAAsB,EAIzBlvG,KAAKmvG,YAAcN,EACnB7uG,KAAKovG,MAAQP,EAAYC,OACzB9uG,KAAKqvG,SAAWR,EAAYS,UAC5BtvG,KAAK0uG,SAAWG,EAAY9H,UAC5B/mG,KAAKuvG,OAASV,EAAYW,OAC1BxvG,KAAKyvG,KAAOZ,EAAYvvC,KACxBt/D,KAAK0vG,UAAYb,EAAYc,WAC7B3vG,KAAKivG,OAAS,EAAAhG,YAAYzJ,QAAQoQ,aAAa3K,SAASjlG,KAAKovG,OAE7DpvG,KAAK6vG,kBACL7vG,KAAK8vG,WACT,CAEA,SAAWlB,CAAMzsG,GACbnC,KAAKivG,OAAS9sG,EACdnC,KAAK6vG,iBACT,CAEA,SAAWjB,GACP,OAAO5uG,KAAKivG,MAChB,CAEO,YAAAc,GACH,MAAgC,WAAxB/vG,KAAKgvG,gBAAuD,YAAxBhvG,KAAKgvG,cACrD,CAEO,eAAAa,GACH,IAAIG,EAAe,IACnBA,GAAgBhwG,KAAK4uG,MAAQ,SAAW,UACxCoB,GAAgBhwG,KAAK0uG,SAAW,YAAc,aAC9CsB,GAAgBhwG,KAAKqvG,SAAW,YAAc,aAC9CW,GAAgBhwG,KAAKkvG,WAAa,cAAgB,eAClDc,GAAgBhwG,KAAK+vG,eAAiB,aAAe,cAErD/vG,KAAKgwG,aAAeA,CACxB,CAEO,SAAAF,GAEC9vG,KAAK0uG,UACL1uG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,iBAAkB,IAAIhB,EAAOkR,WAAW,uBAC7EjwG,KAAKmvG,YAAYpI,WAAY,IAID,WAAxB/mG,KAAKgvG,eACLhvG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,eAAgB,IAAIhB,EAAOkR,WAAW,kBAE9C,YAAxBjwG,KAAKgvG,eACVhvG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,eAAgB,IAAIhB,EAAOkR,WAAW,gBAE9C,YAAxBjwG,KAAKgvG,eACVhvG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,QAAS,IAAIhB,EAAOkR,WAAW,uBAEvC,WAAxBjwG,KAAKgvG,eACVhvG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,QAAS,IAAIhB,EAAOkR,WAAW,uBAGpEjwG,KAAKo/F,SAAW,IAAIL,EAAOgB,UAAU,gBAAiB,IAAIhB,EAAOkR,WAAW,gBAEhFjwG,KAAKmvG,YAAYpI,WAAY,GAIjC/mG,KAAK6vG,iBACT,CAEO,eAAArB,CAAgB0B,GACnB,IAAIC,EAAkBD,EAAavgG,MAAM,KACzCwgG,EAAQA,EAAMliD,IAAImiD,GAAQA,EAAKC,QAE/BrwG,KAAKkvG,YAAa,EAClB,IAAK,MAAMkB,KAAQD,EAAO,CACtB,GAAInwG,KAAKovG,MAAMnK,SAASmL,GAAO,CAAEpwG,KAAKkvG,YAAa,EAAM,KAAO,CAChE,GAAIlvG,KAAKuvG,OAAOtK,SAASmL,GAAQ,CAAEpwG,KAAKkvG,YAAa,EAAM,KAAO,CAElE,IAAK,MAAMh8F,KAAKlT,KAAKyvG,KACjB,GAAIv8F,EAAEzQ,KAAKwiG,SAASmL,GAAO,CAAEpwG,KAAKkvG,YAAa,EAAM,KAAO,CAEpE,CAEA,OAAOlvG,KAAKkvG,UAChB,EAjGJ,e,8FCJA,gBACA,UACA,UAEA,UACA,UACA,UACA,UACA,UAEA,UACA,UACA,UACA,UAGA,MAAajG,EAaZ,cATO,KAAAsF,aAAuB,GACvB,KAAAE,gBAA0B,EAC1B,KAAAE,kBAA4B,EAC5B,KAAAiB,aAAyB,GAO/BzP,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEvBvoB,KAAKswG,iBAAmB,IAAI,EAAAC,oBAC5BvwG,KAAKwwG,KAAOzR,EAAO9Z,OAAOwrB,eAAe,cAAe,CAAEH,iBAAkBtwG,KAAKswG,iBAAkBI,iBAAiB,IACpH1wG,KAAK2wG,YAEL,EAAAjQ,QAAQlB,QAAQ+J,QAASoC,cAAc57F,KAAK/P,KAAKwwG,MACjD,EAAA9P,QAAQlB,QAAQ+J,QAASoC,cAAc57F,KAAK,CAAEwjF,QAAS,IAAMvzF,KAAKuzF,YAClE0V,EAAYzJ,QAAUx/F,KACtBA,KAAK4wG,mBACL5wG,KAAKkwF,SACN,CAEQ,OAAAqD,GACP4M,EAAGC,YAAY,+BACXpgG,KAAK6wG,mBACRC,cAAc9wG,KAAK6wG,kBAErB,CAEO,aAAM3gB,GAIZ,GAHAiQ,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAElB,EAAAm4E,QAAQlB,QAAQmB,IAGpB,OAFA3gG,KAAKswG,iBAAiBpC,QAAU,QAChCluG,KAAKswG,iBAAiBpgB,gBAIjB6O,EAAO9Z,OAAO8rB,aAAa,CAChCr2E,SAAUqkE,EAAOiS,iBAAiBC,OAClCnR,MAAO,uBACL7K,MAAOic,IACTA,EAASC,OAAO,CAAEC,UAAW,UACvBpxG,KAAKqxG,mBAGNrxG,KAAKmnG,iBACZ,CAEO,WAAAmK,CAAYroB,GAClBkX,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAElB,EAAAm4E,QAAQlB,QAAQmB,KAErB,EAAAoI,QAAQ7H,OAAOjY,EAAKmmB,MACrB,CAEO,iBAAMmC,CAAYtoB,GACxBkX,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEvB0gE,EAAK2lB,OAAQ,EACR5uG,KAAK4vG,aAAa3K,SAAShc,EAAKmmB,QACpCpvG,KAAK4vG,aAAa7/F,KAAKk5E,EAAKmmB,OAE7BpvG,KAAKswG,iBAAiBpgB,SACvB,CAEO,sBAAMshB,CAAiBvoB,GAC7BkX,EAAGC,YAAY,wCACf,EAAAb,UAAUC,QAAQj3E,KAAK,uCAEvB0gE,EAAK2lB,OAAQ,EACb5uG,KAAK4vG,aAAe5vG,KAAK4vG,aAAat9B,OAAO5mB,GAAKA,IAAMu9B,EAAKmmB,OAC7DpvG,KAAKswG,iBAAiBpgB,SACvB,CAEQ,qBAAAuhB,CAAsBvK,EAAiBhK,EAAgBwU,GAC9D,MAAMC,EAAUpiE,EAAIovD,SAAS,CAAEnlD,KAAM,IAAO0jD,SAAQE,QAASsU,IAC7DtZ,EAAGwZ,eAAeD,EAAQlvG,KAAMykG,GAChC/G,EAAG0R,SAASF,EAAQlvG,KACrB,CAEQ,sBAAAqvG,GACF9xG,KAAK6wG,oBACT7wG,KAAK6wG,kBAAoBkB,YAAY,KAC/B/xG,KAAKgyG,uBAAuBhyG,MAAM00F,MAAOlb,GAAa2mB,EAAGC,YAAY,+BAAgC5mB,KACxG,KAEL,CAEQ,oBAAAy4B,CAAqBhpB,EAAmBipB,GAC/CjpB,EAAK8lB,eAAiBmD,EAA4B,WAClDjpB,EAAK+lB,eAAiBkD,EAAuB,MAC7CjpB,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UACtBlwF,KAAK8xG,yBACLK,EAAWC,aAAapyG,KAAMipF,EAAKmmB,MAAOnmB,EAAK8lB,eAChD,CAEO,gBAAM/I,CAAW/c,GAIvB,GAHAkX,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,GAAI1X,EAAKylB,SAER,YADAvO,EAAGsF,mBAAmB,qBAIvB,GAAIxc,EAAK8mB,eAER,YADA5P,EAAGsF,mBAAmB,8BAIvB,MAAM15F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqF,WAAW/c,EAAKmmB,OAErDrjG,EAAO60F,cACV5gG,KAAKiyG,qBAAqBhpB,EAAMl9E,EAAOA,OAEzC,CAEQ,4BAAMimG,CAAuBK,GAEpC,GADAlS,EAAGC,YAAY,+CACV,EAAAM,QAAQlB,QAAQmB,IAAO,OAE5B,IAAI2R,GAA0B,EAC9B,IAAK,MAAMrpB,KAAQopB,EAAY/B,iBAAiBtC,eAAgB,CAC/D,GAAI/kB,EAAK8mB,eAAgB,CACxBuC,GAAiB,EAEjB,MAAMvmG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIyF,UAAUnd,EAAKmmB,MAAOnmB,EAAK8lB,gBAEhEhjG,EAAO60F,cACV3X,EAAK+lB,eAAiBjjG,EAAOA,OAAc,MAC3Ck9E,EAAK6mB,cAEL7mB,EAAK8lB,eAAiB,GACtB9lB,EAAK+lB,eAAiB,GAExB,CACAqD,EAAY/B,iBAAiBpgB,SAC9B,CACIoiB,GAAkBD,EAAYxB,oBACjCC,cAAcuB,EAAYxB,mBAC1BwB,EAAYxB,uBAAoBxkG,EAEhC8zF,EAAGC,YAAY,4BAEjB,CAEO,uBAAMmS,CAAkBtpB,GAI9B,GAHAkX,EAAGC,YAAY,yCACf,EAAAb,UAAUC,QAAQj3E,KAAK,yCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,IAAI6R,QAAyBzT,EAAO9Z,OAAOwtB,aAAa,CAAEC,YAAa,8EAMvE,GAJKF,IACJA,EAAmB,WAGKnmG,IAArBmmG,EAAgC,CACnC,MAAMzmG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqF,WAAW/c,EAAKmmB,MAAOoD,GAE5DzmG,EAAO60F,cACV5gG,KAAKiyG,qBAAqBhpB,EAAMl9E,EAAOA,OAEzC,CACD,CAEO,0BAAM4mG,GAIZ,GAHAxS,EAAGC,YAAY,4CACf,EAAAb,UAAUC,QAAQj3E,KAAK,2CAElBvoB,KAAKswG,iBACV,IAAK,MAAMrnB,KAAQjpF,KAAKswG,iBAAiBtC,eACnC/kB,EAAKylB,UACT1uG,KAAK4yG,iBAAiB3pB,EAGzB,CAEO,6BAAMigB,CAAwBjD,EAAeI,EAAmBwM,GAItE,GAHA1S,EAAGC,YAAY,+CACf,EAAAb,UAAUC,QAAQj3E,KAAK,8CAElBvoB,KAAKswG,iBACV,IAAK,MAAMrnB,KAAQjpF,KAAKswG,iBAAiBtC,eACpC/kB,EAAKmmB,QAAUnJ,IAElBhd,EAAK8lB,eAAiB1I,EACtBpd,EAAK+lB,eAAiB6D,EACtB5pB,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UAElBjH,EAAK8mB,gBACR/vG,KAAK8xG,yBAIT,CAEO,sBAAMc,CAAiB3pB,GAI7B,GAHAkX,EAAGC,YAAY,wCACf,EAAAb,UAAUC,QAAQj3E,KAAK,wCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAC5B,IAAK1X,EAAQ,OACb,GAAIA,EAAKylB,SAAiE,YAArDvO,EAAGsF,mBAAmBxc,EAAKmmB,MAAQ,iBAExD,MAAMrjG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI2F,cAAcrd,EAAKmmB,OACxDrjG,EAAO60F,eACV3X,EAAK8lB,eAAiBhjG,EAAOA,OAAO26F,WACpCzd,EAAK+lB,eAAiBjjG,EAAOA,OAAOwkB,MACpC04D,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UAElBjH,EAAK8mB,gBACR/vG,KAAK8xG,yBAGR,CAEO,cAAMgB,CAAS7pB,GACrBkX,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAElB,EAAAm4E,QAAQlB,QAAQmB,MACjB1X,EAAKylB,SAAYvO,EAAGsF,mBAAmBxc,EAAKmmB,MAAQ,gCAEnC,EAAA1O,QAAQlB,QAAQmB,IAAIkG,SAAS5d,EAAKmmB,OAAO,IACnDxO,eACV3X,EAAKylB,UAAW,EAChBzlB,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UACtBiiB,EAAWY,UAAU/yG,KAAMipF,EAAKmmB,QAElC,CAEO,qBAAMhG,CAAgBnD,GAC5B9F,EAAGC,YAAY,uCACfpgG,KAAKkwF,SACN,CAEO,uBAAMmZ,CAAkBpD,GAC9B9F,EAAGC,YAAY,yCACfpgG,KAAKkwF,SACN,CAEO,gBAAM8iB,CAAW/pB,GACvBkX,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAElB,EAAAm4E,QAAQlB,QAAQmB,MAChB1X,EAAKylB,gBAEW,EAAAhO,QAAQlB,QAAQmB,IAAIkG,SAAS5d,EAAKmmB,OAAO,IACnDxO,eACV3X,EAAKylB,UAAW,EAChBzlB,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UACtBiiB,EAAWc,YAAYjzG,KAAMipF,EAAKmmB,QAPbjP,EAAGkM,gBAAgBpjB,EAAKmmB,MAAQ,2BASvD,CAEO,kBAAMzG,CAAa1f,GACzBkX,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAElB,EAAAm4E,QAAQlB,QAAQmB,MAEhB1X,EAAK8mB,eAKL9mB,EAAK8lB,sBAKW,EAAArO,QAAQlB,QAAQmB,IAAIgI,aAAa1f,EAAKmmB,MAAOnmB,EAAK8lB,iBAC5DnO,eACV3X,EAAK+lB,eAAiB,SACtB/lB,EAAK6mB,YACL9vG,KAAKswG,iBAAiBpgB,UAGtBiiB,EAAWe,gBAAgBlzG,KAAMipF,EAAKmmB,MAAOnmB,EAAK8lB,iBAXlD5O,EAAGsF,mBAAmB,uBALtBtF,EAAGsF,mBAAmB,4BAkBxB,CAEO,mBAAM0N,CAAclqB,GAC1BkX,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAElB,EAAAm4E,QAAQlB,QAAQmB,KAOrB,EAAAyS,WAAWlS,OAAOjY,EAAKmmB,MAAOnmB,EAAK8lB,eACpC,CAEO,mBAAMsE,CAAcpqB,GAI1B,GAHAkX,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,qCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqG,cAAc/d,EAAKmmB,MAAOnmB,EAAKymB,WAEpE3jG,EAAO60F,aACV5gG,KAAKyxG,sBAAsB1lG,EAAOA,OAAQk9E,EAAKmmB,MAAO,QAEtDjP,EAAGC,YAAYr0F,EAAOA,QACtBo0F,EAAG4F,iBAAiBh6F,EAAOA,QAE7B,CAEO,iBAAMunG,CAAYrqB,GAIxB,GAHAkX,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6H,WAAWvf,EAAKmmB,OAErDrjG,EAAO60F,aACV5gG,KAAKyxG,sBAAsB5uG,KAAKC,UAAUiJ,EAAOA,OAAQ,KAAM,GAAIk9E,EAAKmmB,MAAQ,QAAS,UAEzFjP,EAAGC,YAAYr0F,EAAOA,QACtBo0F,EAAG4F,iBAAiB,4BAEtB,CAEO,YAAMzzB,GACZ6tB,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BAEvB,MAAMgrF,QAAyBxU,EAAO9Z,OAAOwtB,aAAa,CAAEtwG,MAAOnC,KAAKuuG,aAAcmE,YAAa,+CAE1ErmG,IAArBknG,IAEJvzG,KAAKuuG,aAAegF,EACpBvzG,KAAKswG,iBAAiBpgB,UACtBlwF,KAAK4wG,mBACL5wG,KAAKwzG,YACN,CAEO,oBAAMC,GACZtT,EAAGC,YAAY,sCACf,EAAAb,UAAUC,QAAQj3E,KAAK,qCAEvBvoB,KAAKyuG,gBAAkBzuG,KAAKyuG,eAC5BzuG,KAAKswG,iBAAiBpgB,UACtBlwF,KAAK4wG,mBACL5wG,KAAKwzG,WACN,CAEO,sBAAME,GACZvT,EAAGC,YAAY,wCACf,EAAAb,UAAUC,QAAQj3E,KAAK,uCAEvBvoB,KAAK2uG,kBAAoB3uG,KAAK2uG,iBAC9B3uG,KAAKswG,iBAAiBpgB,UACtBlwF,KAAK4wG,mBACL5wG,KAAKwzG,WACN,CAEO,eAAMG,GACZxT,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAGvB,MAAMohF,QAAmB5K,EAAO9Z,OAAOwtB,aAAa,CAAEtwG,MAAO,+BAAgCuwG,YAAa,oDAC1G,IAAK/I,EAAc,OAEnB,MAAMiK,QAAqB7U,EAAO9Z,OAAOwtB,aAAa,CAAEC,YAAa,cACrE,IAAKkB,EAAgB,OAErB,MAAMC,QAAqB9U,EAAO9Z,OAAOwtB,aAAa,CAAEC,YAAa,aACrE,IAAKmB,EAAgB,OAErB,MAAMC,EAA0B,CAAErP,OAAQkF,EAAYtE,YAAauO,EAAcrO,YAAasO,SAE3E,EAAAnT,QAAQlB,QAAQ6K,WAAWyJ,IAM9C,EAAApT,QAAQlB,QAAQ2K,UAAU2J,GAC1B,EAAApT,QAAQlB,QAAQuK,UAAU+J,GAE1B9zG,KAAKkwF,WAPJiQ,EAAG4F,iBAAiB,+BAQtB,CAEO,kBAAMgO,GAIZ,GAHA5T,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEmB,IAAtC,EAAAm4E,QAAQlB,QAAQ8J,WAAWvlG,OAAgB,OAE/C,MAAMyuD,EAAkB,EAAAkuC,QAAQlB,QAAQ8J,WAAWr7C,IAAI97B,GAAK,GAAGA,EAAEsyE,YAAYtyE,EAAEkzE,eAEzE2O,QAAiBjV,EAAO9Z,OAAOgvB,cAAczhD,EAAO,CAAE0hD,aAAa,EAAOxB,YAAa,qBAC7F,IAAKsB,EAAY,OAEjB,MAAMG,EAAgBH,EAASrkG,MAAM,OACjCwkG,EAAc,KACjB,EAAAzT,QAAQlB,QAAQ0K,aAAaiK,EAAc,GAAIA,EAAc,IAE7DhU,EAAGkM,gBAAgB,mBAErB,CAEO,mBAAM+H,GAIZ,GAHAjU,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAEmB,IAAtC,EAAAm4E,QAAQlB,QAAQ8J,WAAWvlG,OAE9B,YADA/D,KAAK2zG,YAIN,MAAMnhD,EAAkB,GACxB,IAAK,MAAMrgC,KAAK,EAAAuuE,QAAQlB,QAAQ8J,WAC/B92C,EAAMziD,KAAKoiB,EAAEsyE,OAAS,MAAQtyE,EAAEkzE,aAGjC,MAAM2O,QAAiBjV,EAAO9Z,OAAOgvB,cAAczhD,EAAO,CAAE0hD,aAAa,EAAOxB,YAAa,sBAC7F,IAAKsB,EAAY,OAEjB,MAAMG,EAAgBH,EAASrkG,MAAM,OAErC,GAAIwkG,EAAc,GAAI,CACrB,MAAMnK,EAAS,EAAAtJ,QAAQlB,QAAQgL,UAAU2J,EAAc,GAAIA,EAAc,IACrEnK,UACgB,EAAAtJ,QAAQlB,QAAQ6K,WAAWL,IAG7C,EAAAtJ,QAAQlB,QAAQuK,UAAUC,GAC1BhqG,KAAKkwF,WAILiQ,EAAG4F,iBAAiB,gCAGvB,CACD,CAEO,kBAAMsO,GACZlU,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,mCAEvB,EAAAm4E,QAAQlB,QAAQ+K,eAChBvqG,KAAKswG,iBAAiBpC,aAAU7hG,EAChCrM,KAAKswG,iBAAiBpgB,UACtBiQ,EAAGkM,gBAAgB,sBACpB,CAEO,cAAMgF,GAIZ,GAHAlR,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B3gG,KAAKswG,iBAAiBpC,aAAU7hG,EAEhC,MAAMN,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIgF,aACrC55F,EAAO60F,eACV5gG,KAAKswG,iBAAiBpC,QAAUniG,EAAOA,OACvC/L,KAAKswG,iBAAiBrC,mCAEvBjuG,KAAKswG,iBAAiBpgB,UACtBlwF,KAAKs0G,cACN,CAEO,mCAAMC,GAIZ,GAHApU,EAAGC,YAAY,qDACf,EAAAb,UAAUC,QAAQj3E,KAAK,qDAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAG5B,MAAM6T,EAAcx0G,KAAKswG,iBAAiBtC,eAAen+F,MAAM,EAAG,IAElE,IAAK,MAAM4kG,KAAWD,EACrB,IAAKC,EAAQ/F,SACZ,IACC,MAAMgG,QAAkB,EAAAhU,QAAQlB,QAAQmB,IAAI2F,cAAcmO,EAAQrF,OAC9DsF,EAAU9T,cAAgB8T,EAAU3oG,SACvC0oG,EAAQ1F,eAAiB2F,EAAU3oG,OAAO26F,WAC1C+N,EAAQzF,eAAiB0F,EAAU3oG,OAAOwkB,MAC1CkkF,EAAQ3E,YAEV,CAAE,MAAOvvD,GAER4/C,EAAGC,YAAY,gCAAgCqU,EAAQrF,QAAS7uD,EACjE,CAIFvgD,KAAKswG,iBAAiBpgB,SACvB,CAEO,kBAAMokB,GACR,EAAA5T,QAAQlB,QAAQgF,OACnBxkG,KAAKwwG,KAAK1Q,MAAQ,EAAAY,QAAQlB,QAAQgF,OAAOC,OAAS,MAAQ,EAAA/D,QAAQlB,QAAQgF,OAAOa,YAEjFrlG,KAAKwwG,KAAK1Q,MAAQ,SAEpB,CAEO,qBAAMqH,GAEZ,GADAhH,EAAGC,YAAY,wCACV,EAAAM,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIwG,kBACrCp7F,EAAO60F,cACW70F,EAAOA,OACX4oG,cAAgB,GAChCxU,EAAGyU,kBAAkB7oG,EAAOA,OAAQ,wCAGvC,CAEQ,SAAAynG,GACPrT,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAEvB,IACC,EAAAm4E,QAAQlB,QAAQ+J,QAASG,YAAYxpD,OAAO,eAAgBlgD,KAAKuuG,cACjE,EAAA7N,QAAQlB,QAAQ+J,QAASG,YAAYxpD,OAAO,iBAAkBlgD,KAAKyuG,gBACnE,EAAA/N,QAAQlB,QAAQ+J,QAASG,YAAYxpD,OAAO,mBAAoBlgD,KAAK2uG,kBACrE,EAAAjO,QAAQlB,QAAQ+J,QAASG,YAAYxpD,OAAO,eAAgBlgD,KAAK4vG,aAClE,CAAE,MAAOrvD,GACR4/C,EAAGC,YAAY,kCAAmC7/C,EACnD,CACD,CAEQ,gBAAAqwD,GACH,EAAAlQ,QAAQlB,QAAQgF,SACnBxkG,KAAKwwG,KAAK9vG,QAAUV,KAAK60G,cAAc70G,KAAK2uG,kBAAoB,QAAU3uG,KAAK60G,cAAc70G,KAAKyuG,gBAAkB,oBAAsBzuG,KAAKuuG,aAEjJ,CAEQ,aAAAsG,CAAc9P,GACrB,OAAOA,EAAW,IAAM,IACzB,CAEQ,SAAA4L,GACPxQ,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAEvB,IACC,MAAMgrF,EAA2B,EAAA7S,QAAQlB,QAAQ+J,QAASG,YAAY14E,IAAI,iBAAmB,GACzFuiF,IACHvzG,KAAKuuG,aAAegF,EACpBvzG,KAAK4wG,oBAGN,MAAMkE,EAA0C,EAAApU,QAAQlB,QAAQ+J,QAASG,YAAY14E,IAAI,uBAC9D3kB,IAAvByoG,IAAoC90G,KAAKyuG,eAAiBqG,GAE9D,MAAMC,EAA4C,EAAArU,QAAQlB,QAAQ+J,QAASG,YAAY14E,IAAI,yBAC9D3kB,IAAzB0oG,IAAsC/0G,KAAK2uG,iBAAmBoG,GAElE,MAAMC,EAAyC,EAAAtU,QAAQlB,QAAQ+J,QAASG,YAAY14E,IAAI,qBAC/D3kB,IAArB2oG,IAAkCh1G,KAAK4vG,aAAeoF,EAE3D,CAAE,MAAOz0D,GACR4/C,EAAGC,YAAY,kCAAmC7/C,EACnD,CACD,CAEO,qBAAM00D,GAIZ,GAHA9U,EAAGC,YAAY,uCACf,EAAAb,UAAUC,QAAQj3E,KAAK,sCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,gBAAEyB,SAA0B,QAAN,qBAAa,OACzCA,EAAgBlB,QACjB,CACD,CAEO,mBAAMgU,GAIZ,GAHA/U,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,cAAEgE,SAAwB,QAAN,qBAAa,OACvCA,EAAczD,QACf,CACD,CAEO,mBAAMiU,GAIZ,GAHAhV,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,cAAEyC,SAAwB,QAAN,qBAAa,OACvCA,EAAclC,QACf,CACD,CAEO,iBAAMkU,GAIZ,GAHAjV,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,YAAEX,SAAsB,QAAN,qBAAa,OACrCA,EAAYkB,QACb,CACD,CAEO,iBAAMmU,GAIZ,GAHAlV,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,YAAEoC,SAAsB,QAAN,qBAAa,OACrCA,EAAY7B,QACb,CACD,CAEO,iBAAMoU,GACZnV,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAEnB,EAAAm4E,QAAQlB,QAAQmB,KACnB,EAAA4U,gBAAgBrU,QAElB,CAEO,uBAAMsU,GACZrV,EAAGC,YAAY,yCACf,EAAAb,UAAUC,QAAQj3E,KAAK,wCAEnB,EAAAm4E,QAAQlB,QAAQmB,KACnB,EAAA8U,WAAWvU,QAEb,CAEO,sBAAMwU,GAIZ,GAHAvV,EAAGC,YAAY,wCACf,EAAAb,UAAUC,QAAQj3E,KAAK,uCAEnB,EAAAm4E,QAAQlB,QAAQmB,IAAK,CACxB,MAAM,iBAAEgD,SAA2B,QAAN,qBAAa,MAC1CA,EAAiBzC,QAClB,CACD,EA3pBD,e,6FChBA,gBACA,UACA,UACA,UACA,OACA,UACA,UACA,UACA,UACA,UAEA,MAAa6H,EAoBT,YAAoB9I,EAA4BgG,EAAeI,GAjBvD,KAAAnG,aAAoC,GAYpC,KAAAyV,uBAA6CxV,EAAGyV,gBAAgB,IAAIt7E,MAGpE,KAAAu7E,YAAsB,QAG1B1V,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,8BAEvBvoB,KAAKimG,MAAQA,EACbjmG,KAAKqmG,SAAWA,EAChBrmG,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAK81G,iBACL3V,EAAGC,YAAY,gCACnB,CAEQ,YAAA2V,GACJ/1G,KAAK61G,YAAc,QACnB71G,KAAKg2G,aAAU3pG,EACfrM,KAAKi2G,gBAAa5pG,EAClBrM,KAAKk2G,uBAAoB7pG,EACzBrM,KAAKm2G,0BAAuB9pG,EAC5BrM,KAAKo2G,kBAAe/pG,EACpBrM,KAAKq2G,0BACT,CAEQ,oBAAMP,GACV3V,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,uCAEjBvoB,KAAKwoG,aACPxoG,KAAKqmG,eACCrmG,KAAKomG,kBAGLpmG,KAAKs2G,mBAETt2G,KAAK0oG,oBAEL1oG,KAAKu2G,YACf,CAEO,qBAAMpN,GACThJ,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,wCAEjBvoB,KAAKwoG,mBACLxoG,KAAKu2G,YACf,CAEQ,gBAAMA,GACVpW,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BAEvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cAExFd,EAAGC,YAAY,+BACnB,CAEO,aAAOc,CAAO+E,EAAeI,GAIhC,GAHAlG,EAAGC,YAAY,0BACf,EAAAb,UAAUC,QAAQj3E,KAAK,yBAEnBwgF,EAAQvJ,QACRuJ,EAAQvJ,QAAQyG,MAAQA,EACxB8C,EAAQvJ,QAAQ6G,SAAWA,EAC3B0C,EAAQvJ,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWoV,KAChDzN,EAAQvJ,QAAQuW,eAChBhN,EAAQvJ,QAAQsW,qBACb,CACH,MAAM7V,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,UAAW,WAAYvC,EAAOqC,WAAWoV,IAAK,CACzFjV,eAAe,IAInBwH,EAAQvJ,QAAU,IAAIuJ,EAAQ9I,EAAOgG,EAAOI,EAChD,CACJ,CAKQ,qBAAAoL,CAAsBvK,EAAiBhK,EAAgBwU,GAC3D,MAAMC,EAAUpiE,EAAIovD,SAAS,CAAEnlD,KAAM,IAAO0jD,SAAQE,QAASsU,IAC7DtZ,EAAGwZ,eAAeD,EAAQlvG,KAAMykG,GAChC/G,EAAG0R,SAASF,EAAQlvG,KACxB,CAEQ,gBAAM6zG,GAIhB,GAHMnW,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,8BAExB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI2F,cAActmG,KAAKimG,OACxDl6F,EAAO60F,eACP5gG,KAAKi2G,WAAalqG,EAAOA,OACzB/L,KAAKqmG,SAAWrmG,KAAKi2G,WAAWvP,WAChC1mG,KAAK2nG,mBAEF3nG,KAAKi2G,YAAwC,YAA1Bj2G,KAAKi2G,WAAW1lF,OAElCvwB,KAAKy2G,4BAIjB,CAEO,UAAAzN,CAAW/C,EAAeI,GAC7BrmG,KAAKimG,MAAQA,EACbjmG,KAAKqmG,SAAWA,EAChBrmG,KAAKomG,WACT,CAEO,OAAAsQ,CAAQzQ,GACXjmG,KAAKimG,MAAQA,EACbjmG,KAAKqmG,cAAWh6F,EAChBrM,KAAKs2G,YACT,CACQ,eAAMlQ,GAIhB,GAHMjG,EAAGC,YAAY,6BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BAExB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIyF,UAAUpmG,KAAKimG,MAAOjmG,KAAKqmG,UAChEt6F,EAAO60F,eACP5gG,KAAKi2G,WAAalqG,EAAOA,OACzB/L,KAAKqmG,SAAWrmG,KAAKi2G,WAAWvP,WAChC1mG,KAAK2nG,0BAEH3nG,KAAKu2G,YACf,CAEQ,mBAAMI,CAAcv/D,GAI9B,GAHM+oD,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAExB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiBxmG,KAAKimG,MAAO7uD,GAClErrC,EAAO60F,eACP5gG,KAAKk2G,kBAAoBnqG,EAAOA,OAGxC,CAEQ,sBAAM47F,GAIV,GAHAxH,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIgH,iBAAiB3nG,KAAKimG,MAAOjmG,KAAKqmG,UAEvEt6F,EAAO60F,eACP5gG,KAAKm2G,qBAAuBpqG,EAAOA,OAG3C,CAEQ,gBAAMy8F,GAIV,GAHArI,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,8BAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6H,WAAWxoG,KAAKimG,OACrDl6F,EAAO60F,eACP5gG,KAAKg2G,QAAUjqG,EAAOA,OAE9B,CAEQ,iBAAM28F,GAIV,GAHAvI,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI+H,YAAY1oG,KAAKimG,OACtDl6F,EAAO60F,eACP5gG,KAAKo2G,aAAerqG,EAAOA,OAEnC,CAEQ,OAAAwnF,GAWJ,IAVA4M,EAAGC,YAAY,2BACf,EAAAb,UAAUC,QAAQj3E,KAAK,0BAEvBwgF,EAAQvJ,aAAUnzF,EAGlBrM,KAAKq2G,2BAELr2G,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,sCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAGvB,MAAMg6E,EAAapC,EAAGwB,OAAOnB,EAASiB,EAAc,CAChD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IACI0E,EACAyQ,EACAC,EAHAtmF,EAAe,GAIfumF,EAA6B,GAC7BC,EAA2B,GAC3B7mD,EAAkB,GAClB6/C,GAAuB,EACvBiH,GAAoB,EAErBh3G,KAAKi2G,aACJ1lF,EAAQvwB,KAAKi2G,WAAW1lF,MACxB41E,EAAenmG,KAAKi2G,WAAW9P,aAC/ByQ,EAAa52G,KAAKi2G,WAAWW,WAC7BC,EAAW72G,KAAKi2G,WAAWY,SAC3BC,EAAsB3Q,EAAehG,EAAG+D,oBAAoB,IAAI5pE,KAAK6rE,IAAiB,GACtF4Q,EAAoBH,EAAazW,EAAG+D,oBAAoB,IAAI5pE,KAAKs8E,IAAe,GAChF1mD,EAAW0mD,EAAazW,EAAG8W,YAAY,IAAI38E,KAAKs8E,GAAaC,EAAW,IAAIv8E,KAAKu8E,GAAY,IAAIv8E,MAAU,GAC3Gy1E,EAA0B,WAAVx/E,GAAgC,YAAVA,EACtCymF,GAAY,GAGhB,IAAIE,EAA+B,GACnC,GAAIl3G,KAAKm2G,qBACL,IAAK,MAAMjjG,KAAKlT,KAAKm2G,qBAAqC,eACvC,YAAZjjG,EAAEqd,OAAmC,WAAZrd,EAAEqd,OAAkC,iBAAZrd,EAAEqd,OAAwC,sBAAZrd,EAAEqd,OAA6C,aAAZrd,EAAEqd,QAEnH2mF,GAAwB,+BAA+BhkG,EAAEqd,UAAUrd,EAAE80F,mBAMjF,IAAIwH,EAAUxvG,KAAKg2G,SAAWnqD,MAAMqc,QAAQloE,KAAKg2G,QAAgB,QAAMh2G,KAAKg2G,QAAgB,OAAE70E,KAAK,MAAQ,GACvGm+B,EAAe,GACft/D,KAAKg2G,SAAWnqD,MAAMqc,QAAQloE,KAAKg2G,QAAc,OACjDh2G,KAAKg2G,QAAc,KAAEzhB,QAAS3zF,IAAgB0+D,GAAQ,qBAAqB1+D,EAAK6B,iBAEpF,IAAI00G,EAAYn3G,KAAKg2G,SAAWh2G,KAAKg2G,QAA+B,sBAAKh2G,KAAKg2G,QAA+B,sBAAI,MAAQh2G,KAAKg2G,QAA2B,kBAAG,GACxJoB,EAAYp3G,KAAKg2G,SAAWh2G,KAAKg2G,QAAyC,gCAAK7V,EAAG+D,oBAAoB,IAAI5pE,KAAKt6B,KAAKg2G,QAAyC,kCAAM,OACnKqB,EAAgBr3G,KAAY,QAAKA,KAAKg2G,QAAQjP,UAAY,OAAS,QAAW,UAC9ED,EAA4B,SAAjBuQ,EAGXC,EAAmB,GACvB,GAAIt3G,KAAKm2G,qBACL,IAAK,MAAMjjG,KAAKlT,KAAKm2G,qBAAqC,eAAEniE,KAAK,CAACyjD,EAAQ9rC,IAAY8rC,EAAEmf,WAAajrD,EAAEirD,WAAc,GAAK,GACtHU,GAAY,gNAIoCpkG,EAAEqd,iBAAiBrd,EAAEqd,uEAC/Brd,EAAE80F,4CAA4C90F,EAAE+0F,8OAKtB/0F,EAAE80F,qGACD90F,EAAE80F,uIAG5B7H,EAAG8W,YAAY,IAAI38E,KAAKpnB,EAAE0jG,YAAa,IAAIt8E,KAAKpnB,EAAE2jG,yEACzD3jG,EAAEqkG,yDAO1C,IAAIC,EAA6B,GAC7Bx3G,KAAKo2G,cAAgBp2G,KAAKo2G,aAAaqB,OAASz3G,KAAKo2G,aAAaqB,MAAM1zG,OAAS,IACjFyzG,EAAqBx3G,KAAK03G,wBAAwB13G,KAAKo2G,aAAaqB,QAIxE,IAAIE,EAAyB,GAC7B,GAAI33G,KAAKk2G,kBACL,IAAK,MAAMhjG,KAAKlT,KAAKk2G,kBAA4B,SAC7CyB,GAAkB,gNAI8BzkG,EAAEqd,iBAAiBrd,EAAEqd,uEAC9Brd,EAAEqd,4JAGyBrd,EAAEwzF,eAAevG,EAAG+D,oBAAoB,IAAI5pE,KAAKpnB,EAAE0jG,+EAC9EzW,EAAG8W,YAAY,IAAI38E,KAAKpnB,EAAE0jG,YAAa,IAAIt8E,KAAKpnB,EAAE2jG,2EACvD3jG,EAAE41F,MAAQ,0DAOpD,IAAI/8F,EAAkB,gNAMOw2F,qDACAX,uDACEC,suNAoNmBwV,8BACxCr3G,KAAKimG,mDACe8J,EAAe,UAAY,mOAKY,UAArB/vG,KAAK61G,YAA0B,EAAyB,UAArB71G,KAAK61G,YAA0B,EAAyB,UAArB71G,KAAK61G,YAA0B,EAAI,m2BAiBzFtlF,mBAAuBA,4RAO7D2mF,GAAwB,mQAKxBJ,mNAKAC,kNAKA7mD,iRAKmElwD,KAAKi2G,YAAYnN,MAAQ,+SAKpE9oG,KAAKi2G,YAAY/P,KAAOrjG,KAAKC,UAAU9C,KAAKi2G,WAAW/P,KAAM,KAAM,GAAK,8NAKjD8Q,EAAyB,GAAb,0HACVA,EAAyB,GAAb,yHACRlQ,EAAW,WAAa,2HAClBkQ,EAAyB,GAAb,kjCAsBtBlQ,EAAW,WAAa,iHACnBA,IAAaiJ,EAAe,WAAa,8ZAW7CjJ,EAAW,WAAa,iHACrBA,EAAwB,GAAb,y2BAgB5E0Q,EAAqB,8MAGjBA,8FAGF,8TASEF,oRAK8Dt3G,KAAKm2G,qBAAoC,GAAb,+YAYlF3G,8MAKAlwC,kNAKA63C,kNAKAC,i3BAeoCp3G,KAAK21G,unBAc7CgC,gMAWtB,OADAxX,EAAGC,YAAY,wCACRr0F,CACX,CAEQ,0BAAAw0F,CAA2BC,GAC/BL,EAAGC,YAAY,8CACf,EAAAb,UAAUC,QAAQj3E,KAAK,4CAEvBi4E,EAAQ2B,oBACHzhG,IACG,MAAMy+F,EAAUz+F,EAAQy+F,QACxB,IAAI0W,EAAcn1G,EAAQm1G,YAO1B,OALI,CAAC,QAAS,QAAS,QAAS,SAAS5Q,SAAS4Q,KAC9C71G,KAAK61G,YAAcn1G,EAAQm1G,aAG/B1V,EAAGC,YAAY,uDAAyD1/F,EAAQy+F,SACxEA,GACJ,IAAK,kBAED,YADAn/F,KAAKuyG,kBAAkB7xG,EAAQP,OAAQO,EAAQ02C,MAEnD,IAAK,eAED,YADAp3C,KAAK43G,gBAET,IAAK,yBAED,YADAzX,EAAGyU,kBAAkB50G,KAAKi2G,YAE9B,IAAK,mBAED,YADA9V,EAAGyU,kBAAkB50G,KAAKg2G,SAE9B,IAAK,oBAED,YADA7V,EAAGyU,kBAAkB50G,KAAKm2G,sBAE9B,IAAK,oBAED,YADAn2G,KAAK63G,2BAA2Bn3G,EAAQ02C,MAE5C,IAAK,mBAED,YADAp3C,KAAK83G,iBAET,IAAK,gBAED,YADA93G,KAAK8yG,UAAS,GAElB,IAAK,kBAED,YADA9yG,KAAK8yG,UAAS,GAGlB,IAAK,aAED,YADA9yG,KAAK+3G,QAGT,IAAK,oBAOD,OANA/3G,KAAKs2G,kBACFt2G,KAAKi2G,YAEJj2G,KAAKy2G,6BAKb,IAAK,qBAMD,YALGz2G,KAAKi2G,YAEJj2G,KAAK2oG,gBAKb,IAAK,kBAKD,YAJG3oG,KAAKi2G,YAEJj2G,KAAK6oG,oBAIb,IAAK,qBACD,IAAIxC,EAAkB3lG,EAAQk8B,GAK9B,OAJAypE,EAAWA,EAAS90D,QAAQ,sBAAuB,IACnDvxC,KAAK61G,YAAc,QACnB71G,KAAKqmG,SAAWA,OAChBrmG,KAAKomG,YAGT,IAAK,gBACD,IAAIiB,EAAgB3mG,EAAQk8B,GAG5B,OAFAyqE,EAASA,EAAO91D,QAAQ,iBAAkB,SAC1CvxC,KAAKg4G,oBAAoBh4G,KAAKimG,MAAOjmG,KAAKqmG,SAAUgB,GAGxD,IAAK,iBACD,IAAI4Q,EAAoBv3G,EAAQk8B,GAGhC,OAFAq7E,EAAaA,EAAW1mE,QAAQ,kBAAmB,SACnDvxC,KAAKk4G,cAAcl4G,KAAKimG,MAAOjmG,KAAKqmG,SAAU4R,GAGlD,IAAK,gBAED,YADAj4G,KAAKm4G,wBAGT,IAAK,oBAGD,OAFAn4G,KAAK61G,YAAcn1G,EAAQ03G,cAC3BjY,EAAGC,YAAY,kBAAoB1/F,EAAQ03G,iBAKvD/rG,EACArM,KAAKkgG,aAEb,CAEQ,2BAAMiY,SACJn4G,KAAK0oG,oBACL1oG,KAAKu2G,YACf,CAEQ,kBAAM5N,GACVxI,EAAGC,YAAY,gCACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAElB,EAAAm4E,QAAQlB,QAAQmB,YAEA,EAAAD,QAAQlB,QAAQmB,IAAIgI,aAAa3oG,KAAKimG,MAAOjmG,KAAKqmG,WAC5DzF,eAEPT,EAAGC,YAAY,OAAOpgG,KAAKimG,aAAajmG,KAAKqmG,0CACvCrmG,KAAKomG,YACX+L,EAAWe,gBAAgBlzG,KAAMA,KAAKimG,MAAOjmG,KAAKqmG,UAE1D,CAEQ,sBAAMwC,GAIV,GAHA1I,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAElB,EAAAm4E,QAAQlB,QAAQmB,MAAQ3gG,KAAKi2G,WAAc,OAGhD,MAAMoC,QAAgBtZ,EAAO9Z,OAAOwtB,aAAa,CAC7C6F,OAAQ,8BACRn2G,MAAOnC,KAAKi2G,WAAWnN,MAAQ,GAC/B4J,YAAa,qCAIDrmG,IAAZgsG,UAIiB,EAAA3X,QAAQlB,QAAQmB,IAAIkI,iBAAiB7oG,KAAKimG,MAAOjmG,KAAKqmG,SAAUgS,IAC1EzX,oBAED5gG,KAAKomG,WAEnB,CAEQ,cAAM0M,CAAS/L,GACnB5G,EAAGC,YAAY,4BACf,EAAAb,UAAUC,QAAQj3E,KAAK,2BAExB,EAAAm4E,QAAQlB,QAAQmB,MAEXoG,GAAa/mG,KAAKg2G,QAAQjP,UAAa5G,EAAGsF,mBAAmBzlG,KAAKimG,MAAQ,yBACzEc,GAAc/mG,KAAKg2G,QAAQjP,iBAEX,EAAArG,QAAQlB,QAAQmB,IAAIkG,SAAS7mG,KAAKimG,MAAOc,IACnDnG,eACP5gG,KAAKmpG,kBACLpC,EAAYoL,EAAWY,UAAU/yG,KAAMA,KAAKimG,OAASkM,EAAWc,YAAYjzG,KAAMA,KAAKimG,QAL9C9F,EAAGsF,mBAAmBzlG,KAAKimG,MAAQ,yBAQpF,CAEQ,WAAM8R,GAIV,GAHA5X,EAAGC,YAAY,yBACf,EAAAb,UAAUC,QAAQj3E,KAAK,yBAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,IAAK,EAAAsI,YAAYzJ,QAEb,YADAW,EAAG4F,iBAAiB,gCAIxB,IAAK/lG,KAAKg2G,QAEN,YADA7V,EAAG4F,iBAAiB,oCAIxB,MAAM5H,QAAa,EAAAuC,QAAQlB,QAAQmB,IAAIqG,cAAchnG,KAAKimG,MAAOjmG,KAAKg2G,QAAQrG,YAC9E,IAAKxR,EAAKyC,aAEN,YADAT,EAAG4F,iBAAiB,qDAIxB,MAAMwS,QAAa,EAAA7X,QAAQlB,QAAQmB,IAAI2H,iBAAiBtoG,KAAKimG,MAAOjmG,KAAKqmG,UACpEkS,EAAK3X,mBAMJ,EAAA4X,UAAUhZ,QAAQiZ,iBAAiB,CAAEta,KAAMA,EAAKpyF,OAAQwsG,KAAMA,EAAKxsG,OAAQoiG,IAAKnuG,KAAKg2G,QAAS0C,OAAQ14G,KAAKi2G,WAAYwB,MAAOz3G,KAAKo2G,aAAcuC,cAAe34G,KAAKm2G,uBALvKhW,EAAG4F,iBAAiB,6CAM5B,CAEQ,oBAAM+R,GAIV,GAHA3X,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqG,cAAchnG,KAAKimG,MAAOjmG,KAAKg2G,QAAQrG,YAE5E5jG,EAAO60F,aACP5gG,KAAKyxG,sBAAsB1lG,EAAOA,OAAQ/L,KAAKimG,MAAO,QAItD9F,EAAGC,YAAYr0F,EAAOA,QACtBo0F,EAAG4F,iBAAiBh6F,EAAOA,QAEnC,CAEQ,gCAAM8rG,CAA2BzgE,GACrC+oD,EAAGC,YAAY,8CACf,EAAAb,UAAUC,QAAQj3E,KAAK,6CAEvBvoB,KAAK21G,uBAAyBv+D,QACxBp3C,KAAK22G,cAAcv/D,SACnBp3C,KAAKu2G,YACf,CAEQ,mBAAMqB,GACVzX,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCAElB,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAyS,WAAWlS,OAAOlhG,KAAKimG,MAAOjmG,KAAKqmG,SACvC,CAEQ,yBAAM2R,CAAoB/R,EAAeI,EAAiBgB,GAC9DlH,EAAGC,YAAY,uCACf,EAAAb,UAAUC,QAAQj3E,KAAK,sCAElB,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAyS,WAAWlS,OAAO+E,EAAOI,EAAUgB,EACvC,CAEQ,mBAAM6Q,CAAcjS,EAAeI,EAAiBgB,GAI9D,GAHMlH,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAExB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAM50F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIiI,aAAa3C,EAAOI,EAAUgB,GACnEt7F,EAAO60F,aACP5gG,KAAKyxG,sBAAsB5uG,KAAKC,UAAUiJ,EAAOA,OAAQ,KAAM,GAAIk6F,EAAQ,IAAMoB,EAAS,QAAS,SAEnGlH,EAAGkM,gBAAgB,mCAAmChF,IAE9D,CAEQ,uBAAMkL,CAAkBpyG,EAAiB,GAAIi3C,EAAe,IAIhE,GAHA+oD,EAAGC,YAAY,qCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCAElB,EAAAm4E,QAAQlB,QAAQmB,IAErB,IAAIxgG,GAAWggG,EAAGyY,aAAaz4G,GAK/B,IAAIi3C,GAAS+oD,EAAG0Y,YAAYzhE,IAU5B,GALKj3C,IACDA,EAAS,WAIEkM,IAAXlM,EAAsB,CAEtB,MAAM4L,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqF,WAAWhmG,KAAKimG,MAAO9lG,EAAQi3C,GAEpErrC,EAAO60F,eACP5gG,KAAKqmG,SAAWt6F,EAAOA,OAAmB,WAC1C/L,KAAKy2G,4BACLtE,EAAWC,aAAapyG,KAAMA,KAAKimG,MAAOjmG,KAAKqmG,UAEvD,OAlBIlG,EAAGsF,mBAAmB,iCALtBtF,EAAGsF,mBAAmB,6BAwB9B,CAEQ,+BAAMgR,GACVtW,EAAGC,YAAY,6CACf,EAAAb,UAAUC,QAAQj3E,KAAK,kDAEjBvoB,KAAKgyG,uBAAuBhyG,MAC9BA,KAAK6wG,mBACLC,cAAc9wG,KAAK6wG,mBAEvB7wG,KAAK6wG,kBAAoBkB,YAAY,KAC5B/xG,KAAKgyG,uBAAuBhyG,MAAM00F,MAAOlb,GAAa2mB,EAAGC,YAAY,+BAAgC5mB,KAC3G,IACP,CAEQ,8BAAM68B,GACVlW,EAAGC,YAAY,4CACf,EAAAb,UAAUC,QAAQj3E,KAAK,2CAEnBvoB,KAAK6wG,mBACLC,cAAc9wG,KAAK6wG,kBAE3B,CAEQ,4BAAMmB,CAAuB8G,GAIjC,GAHA3Y,EAAGC,YAAY,0CACf,EAAAb,UAAUC,QAAQj3E,KAAK,0CAElB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAE5B,IAAKmY,EAAQ7S,QAAU6S,EAAQzS,SAG3B,YADAyS,EAAQzC,2BAIZ,MAAMtqG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIyF,UAAU0S,EAAQ7S,MAAO6S,EAAQzS,UAC1E,IAAIt6F,EAAO60F,aAUP,YADAkY,EAAQzC,2BATa,CACrByC,EAAQ7C,WAAalqG,EAAOA,OAE5B,MAAMgtG,QAAoB,EAAArY,QAAQlB,QAAQmB,IAAIgH,iBAAiBmR,EAAQ7S,MAAO6S,EAAQzS,UAClF0S,EAAYnY,eACZkY,EAAQ3C,qBAAuB4C,EAAYhtG,OAEnD,CAMA,IAAIwkB,EAASuoF,EAAkB,WAAIA,EAAQ7C,WAAW1lF,MAAQ,GAGhD,WAAVA,GAAgC,YAAVA,GAItBuoF,EAAQzC,2BAGZyC,EAAQvC,YACZ,CAEQ,uBAAAmB,CAAwBD,GAC5BtX,EAAGC,YAAY,2CACf,EAAAb,UAAUC,QAAQj3E,KAAK,0CAGvB,MAAMywF,EAAU,IAAIC,IACpBxB,EAAMljB,QAAQ2kB,IACVF,EAAQhlG,IAAIklG,EAAKlR,QAASkR,KAI9B,MAAMC,EAAY1B,EAAMnlC,OAAO4mC,IAC1BA,EAAKE,mBAAuD,IAAlCF,EAAKE,kBAAkBr1G,QAGtD,GAAyB,IAArBo1G,EAAUp1G,OACV,MAAO,gEAIX,MAAM0zE,EAAU,IAAI4hC,IACpB,IAAIC,EAAW,GAEf,MAAMC,EAAalS,IACf,GAAI5vB,EAAQ+hC,IAAInS,GACZ,MAAO,GAEX5vB,EAAQxlD,IAAIo1E,GAEZ,MAAM6R,EAAOF,EAAQhoF,IAAIq2E,GACzB,IAAK6R,EACD,MAAO,GAGX,IAAIO,EAAW,uBACfA,GAAY,GAAGP,EAAKlR,YAGpB,MAAM0R,EAAgBR,EAAKS,qBAAuB,GAUlD,OARID,EAAc31G,OAAS,GACvB21G,EAAcnlB,QAASqlB,IACnBH,GAAYF,EAAUK,KAI9BH,GAAY,wBAELA,GAQX,OAJAN,EAAU5kB,QAASslB,IACfP,GAAYC,EAAUM,EAAS7R,WAG5BsR,GAAY,sBACvB,EAzpCJ,W,+FCXA,gBACA,UACA,UACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,UAEA,MAAad,EAOT,WAAAxsD,GACIwsD,EAAUhZ,QAAUx/F,KACpB,EAAAu/F,UAAUC,QAAQj3E,KAAK,wBAC3B,CAEO,eAAMuxF,CAAW7/F,EAA6BskC,EAA6Bw7D,EAAmC1sF,GAEjH8yE,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAEvB,MAAMyxF,EAAYxB,EAAUhZ,SAASya,aAI/BC,EAAwC,CAC1C,CACIz3G,KAAM,mBACNskF,YAAa,8GACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,mBACNskF,YAAa,iGACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,mBACNskF,YAAa,yLACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,YACNskF,YAAa,kEACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,mDAE1CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,cACNskF,YAAa,gFACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,qDAE1CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,kBACNskF,YAAa,wGACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,cACtC8Z,WAAY,CAAE39F,KAAM,SAAU6jF,YAAa,mCAC3C3vC,KAAM,CAAEl0C,KAAM,SAAU6jF,YAAa,oCAEzCqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,kBACNskF,YAAa,mFACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRotE,eAAgB,CAAEn3G,KAAM,UACxBo3G,YAAa,CAAEp3G,KAAM,WAEzBk3G,SAAU,KAGlB,CACI33G,KAAM,eACNskF,YAAa,gHACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,cACtC3vC,KAAM,CAAEl0C,KAAM,SAAU6jF,YAAa,oCAEzCqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,kBACNskF,YAAa,6GACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,cACtC3vC,KAAM,CAAEl0C,KAAM,SAAU6jF,YAAa,oCAEzCqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,iBACNskF,YAAa,6EACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,eAE1CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,yBACNskF,YAAa,yGACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,eAE1CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,qBACNskF,YAAa,qJACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,cACtCsf,SAAU,CAAEnjG,KAAM,SAAU6jF,YAAa,8BAE7CqzB,SAAU,CAAC,QAAS,cAG5B,CACI33G,KAAM,YACNskF,YAAa,qKACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,sBACNskF,YAAa,2IACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,sCAE1CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,iBACNskF,YAAa,+IACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,sBACtCsf,SAAU,CAAEnjG,KAAM,SAAU6jF,YAAa,sDAE7CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,qBACNskF,YAAa,6IACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,cACtCsf,SAAU,CAAEnjG,KAAM,SAAU6jF,YAAa,4BACzCsgB,OAAQ,CAAEnkG,KAAM,SAAU6jF,YAAa,yBACvCugB,UAAW,CAAEpkG,KAAM,SAAU6jF,YAAa,6BAE9CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,wBACNskF,YAAa,oJACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CACRg5D,MAAO,CAAE/iG,KAAM,SAAU6jF,YAAa,kCACtC4f,UAAW,CAAEzjG,KAAM,SAAU6jF,YAAa,kDAC1C6f,QAAS,CAAE1jG,KAAM,SAAU6jF,YAAa,gDACxCjtE,OAAQ,CAAE5W,KAAM,SAAU6jF,YAAa,+EAE3CqzB,SAAU,CAAC,WAGnB,CACI33G,KAAM,uBACNskF,YAAa,6FACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,yBACNskF,YAAa,uFACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,uBACNskF,YAAa,mFACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,qBACNskF,YAAa,8FACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,qBACNskF,YAAa,yFACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,KAGlB,CACI33G,KAAM,2BACNskF,YAAa,kGACbozB,YAAa,CACTj3G,KAAM,SACN+pC,WAAY,CAAC,EACbmtE,SAAU,MAMhBG,EAA8C,CAChDxb,EAAOyb,yBAAyBC,KAAK,yIACrC1b,EAAOyb,yBAAyBC,KAAK,sGAInCC,EAAgBn8D,EAAQgoD,QAAQ12F,OAAO,GAC7C,IAAK,MAAM8qG,KAAQD,EACf,GAAIC,aAAgB5b,EAAO6b,gBACvBL,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAKE,EAAKrC,cAI5D,GAAIqC,aAAgB5b,EAAO8b,iBAAkB,CACzC,MAAMC,EAAkBH,EAAKnhG,SAC5B84D,OAAQyoC,GAAkDA,aAAgBhc,EAAOic,0BACjF/sD,IAAK8sD,GAA0CA,EAAK54G,MAAMA,OAC1Dg/B,KAAK,MAEF25E,GACJP,EAASxqG,KAAKgvF,EAAOyb,yBAAyBS,UAAUH,GAE5D,CAIAd,GACAO,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAK,kBAAkBT,EAAU7L,KAAO,gBAAgB6L,EAAUzB,MAAQ,gBAAgByB,EAAU7b,MAAQ,UAG1Jn+F,KAAKk7G,cACLX,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAK,4BAA4Bz6G,KAAKk7G,iBAGxFX,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAKxgG,EAAQq+F,SAG3D,MAAM6C,EAAkBlhG,EAAQq+F,OAAO/9B,cAAc0qB,SAAS,SAG9D,IAGI,IAAI7hC,EAAQnpD,EAAQmpD,MACpB,GAAInpD,EAAQmpD,MAAMxmC,GAAGqoE,SAAS,QAAS,CACnC,MAAMmW,QAAerc,EAAOsc,GAAGC,iBAAiB,CAAEC,OAAQn4C,EAAMm4C,OAAQC,OAAQp4C,EAAMo4C,SAClFJ,EAAOr3G,OAAS,GAEhBq/D,EAAQg4C,EAAO,GACfjb,EAAGC,YAAY,wBAAwBh9B,EAAM3gE,SAAS2gE,EAAMxmC,SAI5DujE,EAAGC,YAAY,+BAA+Bh9B,EAAMm4C,mBAAmBn4C,EAAMo4C,UAC7Ep4C,OAAQ/2D,EAEhB,CAIA,GAFA8zF,EAAGC,YAAY,uBAAuBh9B,GAAOo4C,QAAU,iBAAiBp4C,GAAO3gE,MAAQ,UACvF,EAAA88F,UAAUC,QAAQj3E,KAAK,oCAAqC,CAAEkzF,QAASr4C,GAAOxmC,IAAM,UAC/EwmC,EAED,YADA22C,EAAO2B,SAAS,+BAKpB,IAAIC,GAAY,EAChB,KAAOA,IAActuF,EAAMuuF,yBAAyB,CAChDD,GAAY,EAEZ,MAAME,QAAqBz4C,EAAMsP,YAAY6nC,EAAU,CAAEL,SAAS7sF,GAClE,IAAIyuF,EAAgD,GAEpD,UAAW,MAAMjqE,KAAYgqE,EAAanvE,KACtCqtE,EAAO2B,SAAS7pE,GAIpB,UAAW,MAAMkpE,KAAQc,EAAa9B,OAC9BgB,aAAgBhc,EAAOgd,2BACvBD,EAAU/rG,KAAKgrG,GAKvB,GAAIe,EAAU/3G,OAAS,EAAG,CACtB43G,GAAY,EAGZpB,EAASxqG,KAAKgvF,EAAOyb,yBAAyBS,UAAUa,IAExD,IAAK,MAAME,KAAYF,EAAW,CAC9B/B,EAAO7I,SAAS,YAAY8K,EAASv5G,QACrC09F,EAAGC,YAAY,sBAAsB4b,EAASv5G,oBAAoBI,KAAKC,UAAUk5G,EAAS7qE,UAC1F,EAAAouD,UAAUC,QAAQj3E,KAAK,iCAAkC,CAAE0zF,SAAUD,EAASv5G,KAAMy5G,UAAWr5G,KAAKC,UAAUk5G,EAAS7qE,SAEvH,IAEI,MAOMgrE,SAPepd,EAAOsc,GAAGe,WAC3BJ,EAASv5G,KACT,CAAE0uC,MAAO6qE,EAAS7qE,OAClB9jB,IAIsB65E,QACrB50B,OAAOyoC,GAAQA,aAAgBhc,EAAOsd,uBACtCpuD,IAAI8sD,GAASA,EAAsC54G,OACnDg/B,KAAK,MAGVo5E,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAK,CAC/C,IAAI1b,EAAOud,4BAA4BN,EAASO,OAAQ,CAAC,IAAIxd,EAAOsd,sBAAsBF,OAGlG,CAAE,MAAO3iC,GACL,EAAA+lB,UAAUC,QAAQj3E,KAAK,qCAAsC,CAAE0zF,SAAUD,EAASv5G,KAAM89C,MAAOi5B,aAAeuH,MAAQvH,EAAI94E,QAAUurD,OAAOutB,KAC3I,MAAM7mB,EAAe,0BAA0B6mB,aAAeuH,MAAQvH,EAAI94E,QAAUurD,OAAOutB,KAC3F+gC,EAASxqG,KAAKgvF,EAAOyb,yBAAyBC,KAAK,CAC/C,IAAI1b,EAAOud,4BAA4BN,EAASO,OAAQ,CAAC,IAAIxd,EAAOsd,sBAAsB1pD,OAElG,CACJ,CACJ,CACJ,CAEA,GAAG,EAAA+tC,QAAQlB,SAASqL,qBAAuB2R,EAAOC,qBAAsB,CACpE1C,EAAO2B,SAAS,UAChB,MAAMgB,EAAqB,IAAI3d,EAAO4d,eAClC,iGAEJD,EAAmBE,UAAY,CAC3BC,gBAAiB,CAAC,qCAEtB9C,EAAO2B,SAASgB,EACpB,CAGIvB,IACApB,EAAO2B,SAAS,UAChB3B,EAAO2B,SAAS,mFAChB3B,EAAO2B,SAAS,qGAChB3B,EAAO2B,SAAS,0FAGxB,CAAE,MAAOliC,GACL2mB,EAAGC,YAAY,8BAA8B5mB,aAAeuH,MAAQvH,EAAI94E,QAAUurD,OAAOutB,MACzF,EAAA+lB,UAAUC,QAAQj3E,KAAK,4BAA6B,CAAEg4B,MAAOi5B,aAAeuH,MAAQvH,EAAI94E,QAAUurD,OAAOutB,KACrGA,aAAeuH,MACfg5B,EAAO2B,SAAS,kDAAkDliC,EAAI94E,WAEtEq5G,EAAO2B,SAAS,kDAEpB3B,EAAO2B,SAAS,gGAEpB,CACJ,CAEO,4BAAMoB,GAET,aADuB/d,EAAOge,SAASC,aAAY,IACnC/X,SAAS,6BAC7B,CAEO,WAAM8S,CAAM9R,EAAegB,GAG9B,GAFA9G,EAAGC,YAAY,2BACf,EAAAb,UAAUC,QAAQj3E,KAAK,4BAClB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAC5B,UAAW3gG,KAAK88G,yBAEZ,YADA3c,EAAG4F,iBAAiB,wFAIxB,IAAIsN,EAAgB,GAChB4J,EAAgB,GAGpB,MAAMC,QAAqB,EAAAxc,QAAQlB,QAAQmB,IAAIqG,cAAcf,EAAOgB,GACpE,IAAIiW,EAAatc,aAIb,YADAT,EAAG4F,iBAAiB,oDAFpBsN,EAAgB6J,EAAanxG,OAOjC,MAAMoxG,QAAkB,EAAAzc,QAAQlB,QAAQmB,IAAI0H,qBAAqBpC,GAC7DkX,EAAUvc,cACVqc,EAAgBE,EAAUpxG,aAMxB/L,KAAKy4G,iBAAiB,CAAEta,KAAMkV,EAAekF,KAAM0E,EAAe9O,IAAKlI,EAAOyS,OAAQ,KAAMjB,MAAO,KAAMkB,cAAe,QAJ1HxY,EAAG4F,iBAAiB,uDAK5B,CAEO,sBAAM0S,CAAiBwB,GAC1Bj6G,KAAKi6G,aAAeA,EAEpB,MAAMmD,EAAUre,EAAOr1D,IAAI0zE,QAC3B,IAAIC,EAAY,GAKZA,EAJAD,EAAQnY,SAAS,eAIL,8BAELmY,EAAQnY,SAAS,eAAiBmY,EAAQnY,SAAS,sBAE9C,oCAOVlG,EAAOge,SAASO,eAAeD,EAAW,CAC5CE,MAAO,qCAEf,CAEO,uBAAAC,GACH,MAAMC,EAAc1e,EAAO2e,KAAKC,sBAAsB,0BAA2BnF,EAAUhZ,QAAQsa,UAAU7kF,KAAKujF,EAAUhZ,UAC5Hie,EAAYre,SAAWL,EAAOsM,IAAIC,SAAS,EAAA5K,QAAQlB,QAAQ+J,QAAQ9H,aAAc,QAAS,yBAC1F,EAAAf,QAAQlB,QAAQ+J,QAAQoC,cAAc57F,KAAK0tG,EAC/C,CAEO,eAAAG,GAEHzd,EAAGC,YAAY,uCAGf,MAAMyd,EAAgB,IAAI,EAAAC,qBACpBv/D,EAAU,EAAAmiD,QAAQlB,QAAQ+J,QAG1BwU,EAAoBhf,EAAOsc,GAAG2C,aAChC,kBACA,IAAI,EAAAC,kBAAkBJ,IAE1Bt/D,EAAQotD,cAAc57F,KAAKguG,GAC3B5d,EAAGC,YAAY,oCAGf,MAAM8d,EAAoBnf,EAAOsc,GAAG2C,aAChC,kBACA,IAAI,EAAAG,kBAAkBN,IAE1Bt/D,EAAQotD,cAAc57F,KAAKmuG,GAC3B/d,EAAGC,YAAY,oCAGf,MAAMge,EAAqBrf,EAAOsc,GAAG2C,aACjC,mBACA,IAAI,EAAAK,mBAAmBR,IAE3Bt/D,EAAQotD,cAAc57F,KAAKquG,GAC3Bje,EAAGC,YAAY,qCAGf,MAAMke,EAAqBvf,EAAOsc,GAAG2C,aACjC,mBACA,IAAI,EAAAO,mBAAmBV,IAE3Bt/D,EAAQotD,cAAc57F,KAAKuuG,GAC3Bne,EAAGC,YAAY,qCAGf,MAAMoe,EAAqBzf,EAAOsc,GAAG2C,aACjC,mBACA,IAAI,EAAAS,mBAAmBZ,IAE3Bt/D,EAAQotD,cAAc57F,KAAKyuG,GAC3Bre,EAAGC,YAAY,qCAGf,MAAMse,EAAe3f,EAAOsc,GAAG2C,aAC3B,YACA,IAAI,EAAAW,aAAad,IAErBt/D,EAAQotD,cAAc57F,KAAK2uG,GAC3Bve,EAAGC,YAAY,8BAGf,MAAMwe,EAAiB7f,EAAOsc,GAAG2C,aAC7B,cACA,IAAI,EAAAa,eAAehB,IAEvBt/D,EAAQotD,cAAc57F,KAAK6uG,GAC3Bze,EAAGC,YAAY,gCAGf,MAAM0e,EAAiB/f,EAAOsc,GAAG2C,aAC7B,eACA,IAAI,EAAAe,eAAelB,IAEvBt/D,EAAQotD,cAAc57F,KAAK+uG,GAC3B3e,EAAGC,YAAY,iCAGf,MAAM4e,EAAmBjgB,EAAOsc,GAAG2C,aAC/B,iBACA,IAAI,EAAAiB,iBAAiBpB,IAEzBt/D,EAAQotD,cAAc57F,KAAKivG,GAC3B7e,EAAGC,YAAY,mCAGf,MAAM8e,EAA0BngB,EAAOsc,GAAG2C,aACtC,yBACA,IAAI,EAAAmB,wBAAwBtB,IAEhCt/D,EAAQotD,cAAc57F,KAAKmvG,GAC3B/e,EAAGC,YAAY,2CAGf,MAAMgf,EAAoBrgB,EAAOsc,GAAG2C,aAChC,kBACA,IAAI,EAAAqB,kBAAkBxB,IAE1Bt/D,EAAQotD,cAAc57F,KAAKqvG,GAC3Bjf,EAAGC,YAAY,oCAGf,MAAMkf,EAAsBvgB,EAAOsc,GAAG2C,aAClC,qBACA,IAAI,EAAAuB,oBAAoB1B,IAE5Bt/D,EAAQotD,cAAc57F,KAAKuvG,GAC3Bnf,EAAGC,YAAY,uCAGf,MAAMof,EAAezgB,EAAOsc,GAAG2C,aAC3B,YACA,IAAI,EAAAyB,cAERlhE,EAAQotD,cAAc57F,KAAKyvG,GAC3Brf,EAAGC,YAAY,8BAGf,MAAMsf,EAAuB3gB,EAAOsc,GAAG2C,aACnC,sBACA,IAAI,EAAA2B,qBAAqB9B,IAE7Bt/D,EAAQotD,cAAc57F,KAAK2vG,GAC3Bvf,EAAGC,YAAY,wCAGf,MAAMwf,EAAkB7gB,EAAOsc,GAAG2C,aAC9B,iBACA,IAAI,EAAA6B,iBAERthE,EAAQotD,cAAc57F,KAAK6vG,GAC3Bzf,EAAGC,YAAY,mCAGf,MAAM0f,EAAqB/gB,EAAOsc,GAAG2C,aACjC,qBACA,IAAI,EAAA+B,oBAERxhE,EAAQotD,cAAc57F,KAAK+vG,GAC3B3f,EAAGC,YAAY,uCAGf,MAAM4f,EAAwBjhB,EAAOsc,GAAG2C,aACpC,wBACA,IAAI,EAAAiC,uBAER1hE,EAAQotD,cAAc57F,KAAKiwG,GAC3B7f,EAAGC,YAAY,0CAGf,MAAM8f,EAAwBnhB,EAAOsc,GAAG2C,aACpC,uBACA,IAAI,EAAAmC,uBAER5hE,EAAQotD,cAAc57F,KAAKmwG,GAC3B/f,EAAGC,YAAY,yCAGf,MAAMggB,EAA0BrhB,EAAOsc,GAAG2C,aACtC,yBACA,IAAI,EAAAqC,yBAER9hE,EAAQotD,cAAc57F,KAAKqwG,GAC3BjgB,EAAGC,YAAY,2CAGf,MAAMkgB,EAAwBvhB,EAAOsc,GAAG2C,aACpC,uBACA,IAAI,EAAAuC,uBAERhiE,EAAQotD,cAAc57F,KAAKuwG,GAC3BngB,EAAGC,YAAY,yCAGf,MAAMogB,EAAsBzhB,EAAOsc,GAAG2C,aAClC,qBACA,IAAI,EAAAyC,qBAERliE,EAAQotD,cAAc57F,KAAKywG,GAC3BrgB,EAAGC,YAAY,uCAGf,MAAMsgB,EAAsB3hB,EAAOsc,GAAG2C,aAClC,qBACA,IAAI,EAAA2C,qBAERpiE,EAAQotD,cAAc57F,KAAK2wG,GAC3BvgB,EAAGC,YAAY,uCAGf,MAAMwgB,EAA2B7hB,EAAOsc,GAAG2C,aACvC,2BACA,IAAI,EAAA6C,0BAERtiE,EAAQotD,cAAc57F,KAAK6wG,GAC3BzgB,EAAGC,YAAY,6CAEfD,EAAGC,YAAY,mDACnB,EAnrBJ,a,yGC9BA,gBACA,UAyDA,6BAUI,mBAAM0gB,CAAc7a,EAAepF,EAAqB,KAAMzpD,GAE1D,IACIv0C,KAAKyc,MAAMuhF,EACf,CAAE,MAAOtgD,GACL,MAAM,IAAIwgC,MAAM,0CAA0CxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KAC9G,CAEA,MAAMx0C,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqF,WAAWC,EAAOpF,EAAYzpD,GAEvE,IAAKrrC,EAAO60F,aACR,MAAM,IAAI7f,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,6BAG7CyxG,EAAWC,aAAapyG,KAAMimG,EAAOl6F,EAAOA,OAAO26F,YAGnD,MAAMmI,EAAc9iG,EAAOA,OAC3B,MAAO,CACH+iG,OAAQD,EAAYC,QAAU7I,EAC9BS,WAAYmI,EAAYnI,YAAcmI,EAAYkS,QAAU,GAC5DxwF,MAAOs+E,EAAYt+E,OAAS,SAC5BywF,eAAgBnS,EAAYmS,gBAAkBnS,EAAY1I,eAAgB,IAAI7rE,MAAO6c,cACrFgvD,aAAc0I,EAAY1I,cAAgB0I,EAAYmS,iBAAkB,IAAI1mF,MAAO6c,cACnFy/D,WAAY/H,EAAY+H,WACxBC,SAAUhI,EAAYgI,SACtB3Q,KAAM2I,EAAY3I,KAE1B,CASA,qBAAM+a,CAAgB5G,EAAyB,GAAIC,GAC/C,MAAM4G,EAAkC,GAExC,IAEI,GAAI5G,EAAa,CACb,MAAMvuG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiB8T,GACtDvuG,EAAO60F,cAAgB70F,EAAOA,QAAQ06F,UACtCya,EAAWnxG,QAAQ/P,KAAKmhH,iBAAiBp1G,EAAOA,OAAO06F,SAAU4T,GAEzE,KAAO,CAEH,MAAM+G,QAAsB,EAAA1gB,QAAQlB,QAAQmB,IAAIgF,aAChD,GAAIyb,EAAcxgB,cAAgBwgB,EAAcr1G,OAAQ,CAEpD,MAAMs1G,EAAaD,EAAcr1G,OAO3Bu1G,GANOz1D,MAAMqc,QAAQm5C,GAAcA,EAAcA,EAAWE,MAAQ,IAGjD1xG,MAAM,EAAG,IAGFo+C,IAAIgnC,MAAOkZ,IACvC,IACI,MAAMlI,EAAQkI,EAAIW,OACZ4F,QAAkB,EAAAhU,QAAQlB,QAAQmB,IAAI6F,iBAAiBP,GAC7D,GAAIyO,EAAU9T,cAAgB8T,EAAU3oG,QAAQ06F,SAC5C,OAAOzmG,KAAKmhH,iBAAiBzM,EAAU3oG,OAAO06F,SAAU4T,EAEhE,CAAE,MAAO95D,GAEL,MAAO,EACX,CACA,MAAO,YAGWizC,QAAQC,IAAI6tB,IAC1B/sB,QAAQitB,GAAQN,EAAWnxG,QAAQyxG,GAC/C,CACJ,CAEA,OAAON,CAEX,CAAE,MAAO3gE,GACL,MAAM,IAAIwgC,MAAM,gCAAgCxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACpG,CACJ,CAQA,aAAMkhE,CAAQ3a,GACV,IACI,MAAMsa,QAAsB,EAAA1gB,QAAQlB,QAAQmB,IAAIgF,aAChD,IAAKyb,EAAcxgB,eAAiBwgB,EAAcr1G,OAC9C,MAAM,IAAIg1E,MAAMqgC,EAAc7gE,OAAO7/C,SAAW,4BAIpD,MAAM2gH,EAAaD,EAAcr1G,OAGjC,OAFa8/C,MAAMqc,QAAQm5C,GAAcA,EAAcA,EAAWE,MAAQ,IAGrEjvC,OAAQ67B,GAAaA,EAAIpH,YAAcD,GACvC74C,IAAKkgD,IAAa,CACfW,OAAQX,EAAIW,OACZ/H,UAAWoH,EAAIpH,UACfuI,eAA6BjjG,IAAlB8hG,EAAImB,UAA0BnB,EAAImB,WAAanB,EAAIpH,UAC9DhgB,YAAaonB,EAAIpnB,YACjByoB,OAAQrB,EAAIqB,OACZlwC,KAAM6uC,EAAI7uC,OAGtB,CAAE,MAAO/e,GACL,MAAM,IAAIwgC,MAAM,2BAA2BxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KAC/F,CACJ,CAOA,oBAAMmhE,GACF,IACI,MAAMN,QAAsB,EAAA1gB,QAAQlB,QAAQmB,IAAIgF,aAChD,IAAKyb,EAAcxgB,eAAiBwgB,EAAcr1G,OAC9C,MAAM,IAAIg1E,MAAMqgC,EAAc7gE,OAAO7/C,SAAW,4BAGpD,MAAM2gH,EAAaD,EAAcr1G,OAC3Bw1G,EAAO11D,MAAMqc,QAAQm5C,GAAcA,EAAcA,EAAWE,MAAQ,GAGpEI,EAAwF,GAE9F,IAAK,MAAMxT,KAAOoT,EACd,IAAIpT,EAAIpH,UAIR,IACI,MAAM6a,QAAkB5hH,KAAK6hH,gBAAgB1T,EAAIW,SAC7C8S,GAAkC,YAApBA,EAAUrxF,OAA2C,WAApBqxF,EAAUrxF,OACzDoxF,EAAY5xG,KAAK,CACb++F,OAAQX,EAAIW,OACZ/H,UAAWoH,EAAIpH,UACfuI,eAA6BjjG,IAAlB8hG,EAAImB,UAA0BnB,EAAImB,WAAanB,EAAIpH,UAC9DhgB,YAAaonB,EAAIpnB,YACjByoB,OAAQrB,EAAIqB,OACZlwC,KAAM6uC,EAAI7uC,KACVwiD,iBAAkBF,EAAUrxF,MAC5BwxF,cAAeH,EAAUlb,YAGrC,CAAE,MAAOnmD,GAEL,QACJ,CAGJ,OAAOohE,CAEX,CAAE,MAAOphE,GACL,MAAM,IAAIwgC,MAAM,+BAA+BxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACnG,CACJ,CAQA,cAAMsmD,CAASZ,EAAea,GAC1B,IACI,MAAM/6F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIkG,SAASZ,EAAOa,GACzD,IAAK/6F,EAAO60F,aACR,MAAM,IAAI7f,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,aAAaomG,EAAW,QAAU,iBAE/EqL,EAAWY,UAAU/yG,KAAMimG,EAC/B,CAAE,MAAO1lD,GACL,MAAM,IAAIwgC,MAAM,+BAA+BxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACnG,CACJ,CAQA,qBAAMshE,CAAgB5b,GAClB,IACI,MAAMl6F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI2F,cAAcL,GACvD,IAAKl6F,EAAO60F,eAAiB70F,EAAOA,OAChC,OAGJ,MAAM8iG,EAAc9iG,EAAOA,OAC3B,MAAO,CACH+iG,OAAQD,EAAYC,QAAU7I,EAC9BS,WAAYmI,EAAYnI,YAAcmI,EAAYkS,QAAU,GAC5DxwF,MAAOs+E,EAAYt+E,OAAS,UAC5BywF,eAAgBnS,EAAYmS,gBAAkBnS,EAAY1I,eAAgB,IAAI7rE,MAAO6c,cACrFgvD,aAAc0I,EAAY1I,cAAgB0I,EAAYmS,iBAAkB,IAAI1mF,MAAO6c,cACnFy/D,WAAY/H,EAAY+H,WACxBC,SAAUhI,EAAYgI,SACtB3Q,KAAM2I,EAAY3I,KAE1B,CAAE,MAAO3lD,GAEL,MACJ,CACJ,CASA,sBAAMonD,CAAiB1B,EAAeI,GAClC,IACI,MAAMt6F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIgH,iBAAiB1B,EAAOI,GACjE,OAAKt6F,EAAO60F,cAAiB70F,EAAOA,QAK7BA,EAAOA,OAAO87F,gBAJV,EAKf,CAAE,MAAOtnD,GACL,MAAO,EACX,CACJ,CAWA,gBAAMyhE,CAAW/b,EAAeI,EAAkBgB,EAAgBC,GAC9D,IAEI,MAAMv7F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI8G,uBAAuBxB,EAAOI,EAAUgB,GAEjF,IAAKt7F,EAAO60F,aACR,MAAM,IAAI7f,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,+BAG7C,MAAM0nG,EAAar8F,EAAOA,QAAU,GAGpC,OAAIq8F,EAAWrkG,OAAS,IACb,MAAQqkG,EAAWv4F,OAAO,KAG9Bu4F,CAEX,CAAE,MAAO7nD,GACL,MAAM,IAAIwgC,MAAM,2BAA2BxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KAC/F,CACJ,CAKQ,gBAAA4gE,CAAiBc,EAAgB5H,GACrC,MAAM6H,EAAa,IAAI5nF,KACvB4nF,EAAWC,SAASD,EAAWE,WAAa/H,GAE5C,MAAMgI,EAAe,CAAC,SAAU,kBAAmB,WAEnD,OAAOJ,EACF3vC,OAAQ3rC,KAEA07E,EAAapd,SAASt+D,EAAIpW,QAKf,IAAI+J,KAAKqM,EAAIq6E,gBAAkBr6E,EAAIw/D,cAAgBx/D,EAAIiwE,aACrDsL,GAErBj0D,IAAKtnB,IAAa,CACfmoE,OAAQnoE,EAAImoE,OACZpI,WAAY//D,EAAI+/D,YAAc//D,EAAIo6E,OAClCxwF,MAAOoW,EAAIpW,MACXywF,eAAgBr6E,EAAIq6E,gBAAkBr6E,EAAIw/D,aAC1CA,aAAcx/D,EAAIw/D,cAAgBx/D,EAAIq6E,eACtCpK,WAAYjwE,EAAIiwE,WAChBC,SAAUlwE,EAAIkwE,SACdyL,cAAetiH,KAAKuiH,oBAAoB57E,KAEpD,CASA,sBAAM6/D,CAAiBP,EAAe7uD,GAClC,IACI,MAAMrrC,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiBP,EAAO7uD,GACjE,IAAKrrC,EAAO60F,eAAiB70F,EAAOA,OAChC,MAAM,IAAIg1E,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,mCAE7C,OAAOqL,EAAOA,MAClB,CAAE,MAAOw0C,GACL,MAAM,IAAIwgC,MAAM,kCAAkCxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACtG,CACJ,CAQA,kBAAMooD,CAAa1C,EAAeI,GAC9B,IACI,MAAMt6F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIgI,aAAa1C,EAAOI,GAC7D,IAAKt6F,EAAO60F,aACR,MAAM,IAAI7f,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,4BAE7CyxG,EAAWe,gBAAgBlzG,KAAMimG,EAAOI,EAC5C,CAAE,MAAO9lD,GACL,MAAM,IAAIwgC,MAAM,2BAA2BxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KAC/F,CACJ,CAQA,kBAAMiiE,CAAavc,GACf,IACI,MAAMl6F,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqG,cAAcf,GACvD,IAAKl6F,EAAO60F,eAAiB70F,EAAOA,OAChC,MAAM,IAAIg1E,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,mCAE7C,OAAOqL,EAAOA,MAClB,CAAE,MAAOw0C,GACL,MAAM,IAAIwgC,MAAM,kCAAkCxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACtG,CACJ,CASA,sBAAMkiE,CAAiBxc,GACnB,IAEI,MAAMyc,QAAsB,EAAAhiB,QAAQlB,QAAQmB,IAAI6H,WAAWvC,GAC3D,IAAIgB,EAEAyb,EAAc9hB,cAAgB8hB,EAAc32G,QAAQ4jG,aACpD1I,EAAYyb,EAAc32G,OAAO4jG,YAIrC,MAAM5jG,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAIqG,cAAcf,EAAOgB,GAC9D,IAAKl7F,EAAO60F,eAAiB70F,EAAOA,OAChC,MAAM,IAAIg1E,MAAMh1E,EAAOw0C,OAAO7/C,SAAW,mCAE7C,OAAOqL,EAAOA,MAClB,CAAE,MAAOw0C,GACL,MAAM,IAAIwgC,MAAM,kCAAkCxgC,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KACtG,CACJ,CAKQ,mBAAAgiE,CAAoB57E,GAExB,OAAIA,EAAImiE,KACGniE,EAAImiE,KAEG,WAAdniE,EAAIpW,MACG,iBAEO,oBAAdoW,EAAIpW,MACG,0BAEO,YAAdoW,EAAIpW,MACG,2BADX,CAIJ,E,6GC3cJ,gBAEA,UACA,UAYA,gCAGI,WAAAy7B,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAKA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAE1B,MAAO,CACHyxE,kBAAmB,iCAAiC3c,QAE5D,CAKA,YAAM4c,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAC1B,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,kCAEvB,IAEI,MAAMmwF,QAAe14G,KAAKy0F,OAAOotB,gBAAgB5b,GAEjD,IAAKyS,EACD,OAAO,IAAI3Z,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4BAA4BpW,SAKrE,MAAM0S,QAAsB34G,KAAKy0F,OAAOkT,iBAAiB1B,EAAOyS,EAAOhS,YAGvE,IAAI2M,EAAgB,MACpB,IACIA,QAAsBrzG,KAAKy0F,OAAO+tB,aAAavc,EACnD,CAAE,MAAO1lD,GACL8yD,EAAgB,mCAAmC9yD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,IACvG,CAGA,MAAMwiE,EAA8D,GAc9DC,EAXc,IAAIrK,GAAe3kE,KAAK,CAACyjD,EAAQ9rC,KACjD,MAAM02D,EAAe,CAAC,SAAU,mBAC1BY,EAAUZ,EAAapd,SAASxN,EAAElnE,OAClC2yF,EAAUb,EAAapd,SAASt5C,EAAEp7B,OAExC,OAAI0yF,IAAYC,GAAiB,GAC5BD,GAAWC,EAAgB,EACzB,IAIoBrzG,MAAM,EAAG,GACxC,IAAK,MAAMqpG,KAAQ8J,EACf,IACI,MAAMG,QAAYnjH,KAAKy0F,OAAOutB,WAC1B/b,EACAyS,EAAOhS,WACPwS,EAAKlR,QACLkR,EAAKjR,YAAYjlG,YAAc,KAEnC+/G,EAAShzG,KAAK,CACVi4F,QAASkR,EAAKlR,QACdz3E,MAAO2oF,EAAK3oF,MACZ4yF,IAAKA,GAEb,CAAE,MAAO5iE,GACLwiE,EAAShzG,KAAK,CACVi4F,QAASkR,EAAKlR,QACdz3E,MAAO2oF,EAAK3oF,MACZ4yF,IAAK,2BAA2B5iE,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,MAExF,CAIJ,IAAI4wD,EAASnxG,KAAKojH,oBAAoBnd,EAAOyS,EAAQC,EAAetF,EAAe0P,GAEnF,OAAO,IAAIhkB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBlL,IAGzC,CAAE,MAAO5wD,GACL,MAAMoS,EAAe,+CAGpBpS,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,uIAM/C8vD,OAKF,OAFA,EAAA9Q,UAAUC,QAAQoM,UAAU,0CAA2CrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAElH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,CAKQ,mBAAAywD,CACJnd,EACAyS,EACAC,EACAtF,EACA0P,GAEA,IAAI5R,EAAS,0CAcb,GAbAA,GAAU,WAAWlL,QACrBkL,GAAU,UAGVA,GAAU,6BACVA,GAAU,mBAAmBuH,EAAOhS,iBACpCyK,GAAU,gBAAgBnxG,KAAKqjH,eAAe3K,EAAOnoF,YAAYmoF,EAAOnoF,YACxE4gF,GAAU,yBAAyBuH,EAAOsI,mBAC1C7P,GAAU,uBAAuBuH,EAAOvS,iBAEpCuS,EAAO9B,aACPzF,GAAU,qBAAqBuH,EAAO9B,gBAEtC8B,EAAO7B,SAAU,CACjB1F,GAAU,mBAAmBuH,EAAO7B,aAGpC,MAAMj6D,EAAQ,IAAItiB,KAAKo+E,EAAO9B,YAExB5qG,EADM,IAAIsuB,KAAKo+E,EAAO7B,UACLxyG,UAAYu4C,EAAMv4C,UACnCi/G,EAAc52G,KAAKkhG,MAAM5hG,EAAa,KACtC6hG,EAAUnhG,KAAKkhG,MAAM0V,EAAc,IAEzCnS,GAAU,mBAAmBtD,MADbyV,EAAc,OAElC,CAEAnS,GAAU,YAGVA,GAAU,yBAAyBwH,EAAc50G,oBAGjD,MAAMw/G,EAA2C,CAAC,EAClD5K,EAAcpkB,QAAS2kB,IACnB,MAAM3oF,EAAQ2oF,EAAK3oF,OAAS,UACvBgzF,EAAahzF,KACdgzF,EAAahzF,GAAS,IAE1BgzF,EAAahzF,GAAOxgB,KAAKmpG,KAI7B,IAAK,MAAO3oF,EAAOknF,KAAU19D,OAAOypE,QAAQD,GACxCpS,GAAU,OAAOnxG,KAAKqjH,eAAe9yF,MAAUA,MAAUknF,EAAM1zG,YAC/D0zG,EAAMljB,QAAS2kB,IACX/H,GAAU,OAAO+H,EAAKlR,YAClBkR,EAAKhpD,WACLihD,GAAU,gBAAgBzkG,KAAK+2G,MAAMvK,EAAKhpD,cAE1CgpD,EAAKtC,aACLzF,GAAU,eAAe+H,EAAKtC,cAElCzF,GAAU,OAEdA,GAAU,KAqCd,OAlCAA,GAAU,UAGN4R,EAASh/G,OAAS,IAClBotG,GAAU,wBAAwB4R,EAASh/G,oBAE3Cg/G,EAASxuB,QAAQ,CAACmvB,EAAS7hG,KACvBsvF,GAAU,OAAOtvF,EAAQ,YAAY6hG,EAAQ1b,YAAYhoG,KAAKqjH,eAAeK,EAAQnzF,UAAUmzF,EAAQnzF,aACvG4gF,GAAU,WAAWuS,EAAQP,oBAGjChS,GAAU,WAIdA,GAAU,4BACVA,GAAU,iBAAiBkC,gBAC3BlC,GAAU,UAGVA,GAAU,4BACVA,GAAU,4BAA4BtuG,KAAKC,UAAU41G,EAAQ,KAAM,iBACnEvH,GAAU,mCAAmCtuG,KAAKC,UAAU61G,EAAe,KAAM,iBAGjFxH,GAAU,UACVA,GAAU,6BACVA,GAAU,sDACVA,GAAU,oEACVA,GAAU,gEACVA,GAAU,iEACVA,GAAU,8DACVA,GAAU,wEAEHA,CACX,CAKQ,cAAAkS,CAAevpG,GAenB,MAd6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,aAAgB,KAChB,kBAAqB,KACrB,QAAW,MACX,UAAa,KACb,KAAQ,IACR,QAAW,KAEEA,GAAQygE,gBAAkB,GAC/C,E,sGCzQJ,gBAEA,UACA,UAYA,yBAGI,WAAAvuB,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAKA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAG1B,IAAIwyE,EAAU,GACd,IACI,MAAM/B,QAAkB5hH,KAAKy0F,OAAOotB,gBAAgB5b,IAChD2b,GAAkC,YAApBA,EAAUrxF,OAA2C,WAApBqxF,EAAUrxF,QACzDozF,EAAU,wBAAwB/B,EAAUlb,4BAA4Bkb,EAAUrxF,YAE1F,CAAE,MAAOgwB,GAET,CAEA,MAAMqjE,EAAsB,IAAI7kB,EAAO4d,eAWvC,OAVAiH,EAAoBhH,WAAY,EAChCgH,EAAoBC,eAAe,yCACnCD,EAAoBC,eAAe,4DACnCD,EAAoBC,eAAe,iBAAiB5d,SAChD0d,GACAC,EAAoBC,eAAeF,GAEvCC,EAAoBC,eAAe,+EACnCD,EAAoBC,eAAe,2BAE5B,CACHjB,kBAAmB,uBAAuB3c,IAC1C6d,qBAAsB,CAClBhkB,MAAO,yBACPp/F,QAASkjH,GAGrB,CAKA,YAAMf,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAC1B,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,2BAEvB,IAEI,MAAMq5F,QAAkB5hH,KAAKy0F,OAAOotB,gBAAgB5b,GAEpD,IAAK2b,EACD,OAAO,IAAI7iB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4BAA4BpW,SAKrE,GAAwB,YAApB2b,EAAUrxF,OAA2C,WAApBqxF,EAAUrxF,MAC3C,OAAO,IAAIwuE,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,WAAWpW,uDAA2D2b,EAAUrxF,sBAAsBqxF,EAAUlb,wBAKnJ1mG,KAAKy0F,OAAOkU,aAAa1C,EAAO2b,EAAUlb,YAEhD,MAAMhmG,EAAU,CACZ,oCACA,GACA,iBAAiBulG,IACjB,iBAAiB2b,EAAUlb,aAC3B,yBAAyBkb,EAAUrxF,QACnC,GACA,wDACF4Q,KAAK,MAEP,OAAO,IAAI49D,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB37G,IAGzC,CAAE,MAAO6/C,GAEL,OADA,EAAAg/C,UAAUC,QAAQoM,UAAU,mCAAoCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAC3G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,kCAAkCpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAErI,CACJ,E,uGCnHJ,gBAEA,UACA,UACA,UAaA,0BAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAKA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,KAAE7uD,GAAS8gC,EAAQ/mC,MAGhC,MAAO,CACHyxE,kBAAmB,+BAA+B3c,aAHtC7uD,GAAQ+oD,EAAGyV,gBAAgB,IAAIt7E,SAKnD,CAKA,YAAMuoF,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,KAAE7uD,GAAS8gC,EAAQ/mC,MAChC,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,4BAGvB,MAAMw7F,EAAY3sE,GAAS+oD,EAAGyV,gBAAgB,IAAIt7E,MAElD,IAEI,MAAMvuB,QAAe/L,KAAKy0F,OAAO+R,iBAAiBP,EAAO8d,GAEzD,IAAKh4G,IAAWA,EAAO06F,UAAuC,IAA3B16F,EAAO06F,SAAS1iG,OAC/C,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,oCAAoCpW,SAAa8d,QAI1F,MAAMvC,EAAOz1G,EAAO06F,SAGpB,IAAIud,EAAiB,8BAA8B/d,SAwEnD,OAvEA+d,GAAkB,oBAAoBD,MACtCC,GAAkB,mBAAmBxC,EAAKz9G,aAC1CigH,GAAkB,UAGlBA,GAAkB,iDAClBA,GAAkB,iDAElBxC,EAAKjtB,QAAQ,CAAC5tD,EAAU9kB,KACpB,MAAMoiG,EAAUt9E,EAAIq6E,gBAAkBr6E,EAAIw/D,cAAgB,MACpDrsF,EAAS9Z,KAAKqjH,eAAe18E,EAAIpW,OAAS,KAAOoW,EAAIpW,OAAS,WAEpE,IAAI2/B,EAAW,MACf,GAAIvpB,EAAIiwE,YAAcjwE,EAAIkwE,SAAU,CAChC,MAAMj6D,EAAQ,IAAItiB,KAAKqM,EAAIiwE,YAErB5qG,EADM,IAAIsuB,KAAKqM,EAAIkwE,UACFxyG,UAAYu4C,EAAMv4C,UACnCi/G,EAAc52G,KAAKkhG,MAAM5hG,EAAa,KAG5CkkD,EAAW,GAFKxjD,KAAKkhG,MAAM0V,EAAc,QACzBA,EAAc,KAElC,MAAW38E,EAAIiwE,aAAejwE,EAAIkwE,WAC9B3mD,EAAW,aAGf,MAAM44C,EAAOniE,EAAImiE,MAAQ,IAEzBkb,GAAkB,KAAKniG,EAAQ,OAAOoiG,OAAanqG,OAAYo2C,OAAc44C,UAGjFkb,GAAkB,YAGlBA,GAAkB,6BAElBxC,EAAKjtB,QAAQ,CAAC5tD,EAAU9kB,KASpB,GARAmiG,GAAkB,QAAQniG,EAAQ,cAAc8kB,EAAI+/D,YAAc//D,EAAIo6E,aACtEiD,GAAkB,iBAAiBhkH,KAAKqjH,eAAe18E,EAAIpW,UAAUoW,EAAIpW,OAAS,cAClFyzF,GAAkB,yBAAyBr9E,EAAIq6E,gBAAkBr6E,EAAIw/D,iBACrE6d,GAAkB,uBAAuBr9E,EAAIw/D,cAAgBx/D,EAAIq6E,mBAE7Dr6E,EAAIiwE,aACJoN,GAAkB,qBAAqBr9E,EAAIiwE,gBAE3CjwE,EAAIkwE,SAAU,CACdmN,GAAkB,mBAAmBr9E,EAAIkwE,aAEzC,MAAMj6D,EAAQ,IAAItiB,KAAKqM,EAAIiwE,YAErB5qG,EADM,IAAIsuB,KAAKqM,EAAIkwE,UACFxyG,UAAYu4C,EAAMv4C,UACnCi/G,EAAc52G,KAAKkhG,MAAM5hG,EAAa,KACtC6hG,EAAUnhG,KAAKkhG,MAAM0V,EAAc,IAEzCU,GAAkB,mBAAmBnW,MADrByV,EAAc,OAElC,CAEI38E,EAAImiE,OACJkb,GAAkB,eAAer9E,EAAImiE,UAGrCniE,EAAIu/D,MAAQnsD,OAAO7kC,KAAKyxB,EAAIu/D,MAAMniG,OAAS,IAC3CigH,GAAkB,0BAA0BnhH,KAAKC,UAAU6jC,EAAIu/D,aAGnE8d,GAAkB,OAItBA,GAAkB,kCAClBA,GAAkB,eAAenhH,KAAKC,UAAU0+G,EAAM,KAAM,eAErD,IAAIziB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB2H,IAGzC,CAAE,MAAOzjE,GACL,MAAMoS,EAAe,oDAGpBpS,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,wKAO/C8vD,OAKF,OAFA,EAAA9Q,UAAUC,QAAQoM,UAAU,oCAAqCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE5G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,CAKQ,cAAA0wD,CAAevpG,GAanB,MAZ6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,aAAgB,KAChB,kBAAqB,KACrB,QAAW,MACX,UAAa,MAEAA,GAAQygE,gBAAkB,GAC/C,E,yGClLJ,gBAEA,UACA,UAYA,4BAGI,WAAAvuB,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAKA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,GAAanuB,EAAQ/mC,MAEpC,MAAO,CACHyxE,kBAAmB,sBAAsBvc,eAAsBJ,QAEvE,CAKA,YAAM4c,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,GAAanuB,EAAQ/mC,MACpC,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,8BAEvB,IAEI,MAAMowF,QAAsB34G,KAAKy0F,OAAOkT,iBAAiB1B,EAAOI,GAEhE,IAAKsS,GAA0C,IAAzBA,EAAc50G,OAChC,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,2CAA2ChW,cAAqBJ,SAKzG,IAAIoN,EAAgB,MACpB,IACIA,QAAsBrzG,KAAKy0F,OAAO+tB,aAAavc,EACnD,CAAE,MAAO1lD,GACL8yD,EAAgB,mCAAmC9yD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,IACvG,CAGA,MAAMwiE,EAA8D,GAc9DC,EAXc,IAAIrK,GAAe3kE,KAAK,CAACyjD,EAAQ9rC,KACjD,MAAM02D,EAAe,CAAC,SAAU,mBAC1BY,EAAUZ,EAAapd,SAASxN,EAAElnE,OAClC2yF,EAAUb,EAAapd,SAASt5C,EAAEp7B,OAExC,OAAI0yF,IAAYC,GAAiB,GAC5BD,GAAWC,EAAgB,EACzB,IAIoBrzG,MAAM,EAAG,GACxC,IAAK,MAAMqpG,KAAQ8J,EACf,IACI,MAAMG,QAAYnjH,KAAKy0F,OAAOutB,WAC1B/b,EACAI,EACA6S,EAAKlR,QACLkR,EAAKjR,YAAYjlG,YAAc,KAEnC+/G,EAAShzG,KAAK,CACVi4F,QAASkR,EAAKlR,QACdz3E,MAAO2oF,EAAK3oF,MACZ4yF,IAAKA,GAEb,CAAE,MAAO5iE,GACLwiE,EAAShzG,KAAK,CACVi4F,QAASkR,EAAKlR,QACdz3E,MAAO2oF,EAAK3oF,MACZ4yF,IAAK,2BAA2B5iE,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,MAExF,CAIJ,MAAMm4D,EAAS,CACX5J,OAAQ7I,EACRS,WAAYL,EACZ91E,MAAOvwB,KAAKkkH,kBAAkBvL,GAC9BqI,eAAgBrI,EAAc,IAAIqI,gBAAkB,MACpD7a,aAAcwS,EAAc,IAAIqI,gBAAkB,MAClDpK,WAAY52G,KAAKmkH,qBAAqBxL,GACtC9B,SAAU72G,KAAKokH,iBAAiBzL,IAIpC,IAAIxH,EAASnxG,KAAKojH,oBAAoBnd,EAAOyS,EAAQC,EAAetF,EAAe0P,GAEnF,OAAO,IAAIhkB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBlL,IAGzC,CAAE,MAAO5wD,GACL,MAAMoS,EAAe,+CAGpBpS,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,oKAO/C8vD,OAKF,OAFA,EAAA9Q,UAAUC,QAAQoM,UAAU,sCAAuCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE9G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,CAKQ,iBAAAuxD,CAAkBvL,GACtB,OAAIA,EAAcvO,KAAMl3F,GAAuB,WAAZA,EAAEqd,OAA4B,SAC7DooF,EAAcvO,KAAMl3F,GAAuB,YAAZA,EAAEqd,OAA6B,UAC9DooF,EAAcvO,KAAMl3F,GAAuB,WAAZA,EAAEqd,OAA4B,SAC7DooF,EAAc0L,MAAOnxG,GAAuB,YAAZA,EAAEqd,OAA6B,UAC5D,SACX,CAKQ,oBAAA4zF,CAAqBxL,GACzB,MAAM2L,EAAa3L,EACdrmC,OAAQp/D,GAAWA,EAAE0jG,YACrB3oD,IAAK/6C,GAAW,IAAIonB,KAAKpnB,EAAE0jG,YAAYvyG,WAE5C,GAA0B,IAAtBigH,EAAWvgH,OAAc,OAE7B,MAAMwgH,EAAW73G,KAAKgC,OAAO41G,GAC7B,OAAO,IAAIhqF,KAAKiqF,GAAUptE,aAC9B,CAKQ,gBAAAitE,CAAiBzL,GACrB,MAAM6L,EAAW7L,EACZrmC,OAAQp/D,GAAWA,EAAE2jG,UACrB5oD,IAAK/6C,GAAW,IAAIonB,KAAKpnB,EAAE2jG,UAAUxyG,WAE1C,GAAwB,IAApBmgH,EAASzgH,OAAc,OAE3B,MAAM0gH,EAAS/3G,KAAKyF,OAAOqyG,GAC3B,OAAO,IAAIlqF,KAAKmqF,GAAQttE,aAC5B,CAKQ,mBAAAisE,CACJnd,EACAyS,EACAC,EACAtF,EACA0P,GAEA,IAAI5R,EAAS,0CAcb,GAbAA,GAAU,WAAWlL,QACrBkL,GAAU,UAGVA,GAAU,6BACVA,GAAU,mBAAmBuH,EAAOhS,iBACpCyK,GAAU,gBAAgBnxG,KAAKqjH,eAAe3K,EAAOnoF,YAAYmoF,EAAOnoF,YACxE4gF,GAAU,yBAAyBuH,EAAOsI,mBAC1C7P,GAAU,uBAAuBuH,EAAOvS,iBAEpCuS,EAAO9B,aACPzF,GAAU,qBAAqBuH,EAAO9B,gBAEtC8B,EAAO7B,SAAU,CACjB1F,GAAU,mBAAmBuH,EAAO7B,aAGpC,MAAMj6D,EAAQ,IAAItiB,KAAKo+E,EAAO9B,YAExB5qG,EADM,IAAIsuB,KAAKo+E,EAAO7B,UACLxyG,UAAYu4C,EAAMv4C,UACnCi/G,EAAc52G,KAAKkhG,MAAM5hG,EAAa,KACtC6hG,EAAUnhG,KAAKkhG,MAAM0V,EAAc,IAEzCnS,GAAU,mBAAmBtD,MADbyV,EAAc,OAElC,CAEAnS,GAAU,YAGVA,GAAU,yBAAyBwH,EAAc50G,oBAGjD,MAAMw/G,EAA2C,CAAC,EAClD5K,EAAcpkB,QAAS2kB,IACnB,MAAM3oF,EAAQ2oF,EAAK3oF,OAAS,UACvBgzF,EAAahzF,KACdgzF,EAAahzF,GAAS,IAE1BgzF,EAAahzF,GAAOxgB,KAAKmpG,KAI7B,IAAK,MAAO3oF,EAAOknF,KAAU19D,OAAOypE,QAAQD,GACxCpS,GAAU,OAAOnxG,KAAKqjH,eAAe9yF,MAAUA,MAAUknF,EAAM1zG,YAC/D0zG,EAAMljB,QAAS2kB,IACX/H,GAAU,OAAO+H,EAAKlR,YAClBkR,EAAKhpD,WACLihD,GAAU,gBAAgBzkG,KAAK+2G,MAAMvK,EAAKhpD,cAE1CgpD,EAAKtC,aACLzF,GAAU,eAAe+H,EAAKtC,cAElCzF,GAAU,OAEdA,GAAU,KAqCd,OAlCAA,GAAU,UAGN4R,EAASh/G,OAAS,IAClBotG,GAAU,wBAAwB4R,EAASh/G,oBAE3Cg/G,EAASxuB,QAAQ,CAACmvB,EAAS7hG,KACvBsvF,GAAU,OAAOtvF,EAAQ,YAAY6hG,EAAQ1b,YAAYhoG,KAAKqjH,eAAeK,EAAQnzF,UAAUmzF,EAAQnzF,aACvG4gF,GAAU,WAAWuS,EAAQP,oBAGjChS,GAAU,WAIdA,GAAU,4BACVA,GAAU,iBAAiBkC,gBAC3BlC,GAAU,UAGVA,GAAU,4BACVA,GAAU,4BAA4BtuG,KAAKC,UAAU41G,EAAQ,KAAM,iBACnEvH,GAAU,mCAAmCtuG,KAAKC,UAAU61G,EAAe,KAAM,iBAGjFxH,GAAU,UACVA,GAAU,6BACVA,GAAU,sDACVA,GAAU,oEACVA,GAAU,gEACVA,GAAU,iEACVA,GAAU,8DACVA,GAAU,wEAEHA,CACX,CAKQ,cAAAkS,CAAevpG,GAenB,MAd6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,aAAgB,KAChB,kBAAqB,KACrB,QAAW,MACX,UAAa,KACb,KAAQ,IACR,QAAW,KAEEA,GAAQygE,gBAAkB,GAC/C,E,oGCzTJ,gBAEA,UACA,UACA,UAaA,uBAGI,WAAAvuB,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAKA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,KAAE7uD,GAAS8gC,EAAQ/mC,MAGhC,MAAO,CACHyxE,kBAAmB,4BAA4B3c,aAHnC7uD,GAAS+oD,EAAGyV,gBAAgB,IAAIt7E,SAKpD,CAKA,YAAMuoF,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,KAAE7uD,GAAS8gC,EAAQ/mC,MAChC,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,yBAEvB,IAEI,MAAMxc,QAAe/L,KAAKy0F,OAAO+R,iBAAiBP,GAElD,IAAKl6F,IAAWA,EAAO06F,UAAuC,IAA3B16F,EAAO06F,SAAS1iG,OAC/C,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6BAA6BpW,SAItE,IAAIub,EAAOz1G,EAAO06F,SAGlB,GAAIrvD,EAAM,CACN,MAAMstE,EAAa,IAAIpqF,KAAK8c,GAM5B,GALAoqE,EAAOA,EAAKlvC,OAAQ3rC,IAChB,MAAMs9E,EAAU,IAAI3pF,KAAKqM,EAAIq6E,gBAAkBr6E,EAAIw/D,cACnD,OAAQhG,EAAGyV,gBAAgBqO,KAAa9jB,EAAGyV,gBAAgB8O,KAG3C,IAAhBlD,EAAKz9G,OACL,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6BAA6BpW,SAAa7uD,OAGvF,CAGA,IAAI4sE,EAAiB,uBAAuB/d,SA2C5C,OAzCI+d,GADA5sE,EACkB,oBAAoBA,MAEpB,2BAA2B+oD,EAAGyV,gBAAgB,IAAIt7E,WAExE0pF,GAAkB,mBAAmBxC,EAAKz9G,aAC1CigH,GAAkB,UAGlBxC,EAAKjtB,QAAQ,CAAC5tD,EAAU9kB,KACpB,MAAMugD,EAAYz7B,EAAIiwE,YAAcjwE,EAAIq6E,gBAAkB,MACpD2D,EAAUh+E,EAAIkwE,UAAY,MAChC,IAAI3mD,EAAW,MAEf,GAAIvpB,EAAIiwE,YAAcjwE,EAAIkwE,SAAU,CAChC,MAAMj6D,EAAQ,IAAItiB,KAAKqM,EAAIiwE,YAErB5qG,EADM,IAAIsuB,KAAKqM,EAAIkwE,UACFxyG,UAAYu4C,EAAMv4C,UACnCi/G,EAAc52G,KAAKkhG,MAAM5hG,EAAa,KAG5CkkD,EAAW,GAFKxjD,KAAKkhG,MAAM0V,EAAc,QACzBA,EAAc,KAElC,CAEA,MAAMxpG,EAAS6sB,EAAIpW,OAAS,UACtBq0F,EAAc5kH,KAAKqjH,eAAevpG,GAExCkqG,GAAkB,OAAOniG,EAAQ,WAAW8kB,EAAI+/D,YAAc//D,EAAIo6E,aAClEiD,GAAkB,iBAAiBY,KAAe9qG,MAClDkqG,GAAkB,qBAAqB5hD,MACvB,QAAZuiD,IACAX,GAAkB,mBAAmBW,OAEzCX,GAAkB,mBAAmB9zD,MACrC8zD,GAAkB,yBAAyBr9E,EAAIq6E,gBAAkBr6E,EAAIw/D,iBACrE6d,GAAkB,OAItBA,GAAkB,oCAClBA,GAAkB,eAAenhH,KAAKC,UAAU0+G,EAAM,KAAM,eAErD,IAAIziB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB2H,IAGzC,CAAE,MAAOzjE,GACL,MAAMoS,EAAe,iDAGpBpS,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,uIAM/C8vD,OAKF,OAFA,EAAA9Q,UAAUC,QAAQoM,UAAU,iCAAkCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEzG,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,CAKQ,cAAA0wD,CAAevpG,GAanB,MAZ6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,aAAgB,KAChB,kBAAqB,KACrB,QAAW,MACX,UAAa,MAEAA,EAAOygE,gBAAkB,GAC9C,E,0GC5KJ,gBAEA,UACA,UAMA,6BACI,WAAAvuB,CAAoB6xD,GAAA,KAAAA,cAAAA,CAAsC,CAE1D,YAAMgF,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAC1B,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,+BAEvB,IACI,MAAMs8F,QAAmB7kH,KAAK69G,cAAc4E,iBAAiBxc,GAEvDl6F,EAAS,uBAAuBk6F,sBAGhD4e,iCAGiBA,EAAWl1G,MAAM,MAAM5L,2PAU9B,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBtwG,IAEzC,CAAE,MAAOw0C,GACL,MAAMoS,EAAe,2CAA2CszC,OAAW1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,KAK3H,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,uCAAwCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE/G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,CAEA,uBAAMgwD,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,mCAAmC1qC,EAAQ/mC,MAAM80D,YAE5E,E,uGCvDJ,gBAEA,UAaA,0BAGI,WAAAj6C,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAYA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAMy3F,EAAY5sC,EAAQ/mC,MAAMkpE,gBAAkB,GAC5C0K,EAAY7sC,EAAQ/mC,MAAMmpE,YAMhC,MAAO,CACHsI,kBALYmC,EACV,iCAAiCA,YAAoBD,WACrD,kCAAkCA,WAK5C,CASA,YAAMjC,CACF3qC,EACA7qD,GAEA,MAAMy3F,EAAY5sC,EAAQ/mC,MAAMkpE,gBAAkB,GAC5C0K,EAAY7sC,EAAQ/mC,MAAMmpE,YAGhC,EAAA/a,UAAUC,QAAQj3E,KAAK,4BAEvB,IAEI,MAAM24F,QAAmBlhH,KAAKy0F,OAAOwsB,gBAAgB6D,EAAWC,GAGhE,GAA0B,IAAtB7D,EAAWn9G,OAAc,CACzB,MAAMihH,EAAoBD,EACpB,mCAAmCA,kBAA0BD,WAC7D,sCAAsCA,iCAE5C,OAAO,IAAI/lB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB2I,IAEzC,CAGA,IAAIhB,EAAiB,mCA+BrB,OA9BAA,GAAkB,wBAAwBc,YACtCC,IACAf,GAAkB,mBAAmBe,OAEzCf,GAAkB,0BAA0B9C,EAAWn9G,aACvDigH,GAAkB,UAGlB9C,EAAW3sB,QAAQ,CAAC5tD,EAAwB9kB,KACxCmiG,GAAkB,OAAOniG,EAAQ,MAAM8kB,EAAImoE,aAC3CkV,GAAkB,mBAAmBr9E,EAAI+/D,iBACzCsd,GAAkB,gBAAgBr9E,EAAIpW,UACtCyzF,GAAkB,yBAAyBr9E,EAAIq6E,mBAC/CgD,GAAkB,uBAAuBr9E,EAAIw/D,iBACzCx/D,EAAIiwE,aACJoN,GAAkB,kBAAkBr9E,EAAIiwE,gBAExCjwE,EAAIkwE,WACJmN,GAAkB,gBAAgBr9E,EAAIkwE,cAEtClwE,EAAI27E,gBACJ0B,GAAkB,gBAAgBr9E,EAAI27E,mBAE1C0B,GAAkB,OAItBA,GAAkB,oCAClBA,GAAkB,eAAenhH,KAAKC,UAAUo+G,EAAY,KAAM,eAE3D,IAAIniB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB2H,IAGzC,CAAE,MAAOzjE,GAEL,MAAMoS,EAAe,8CAGpBpS,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,sJAM/C8vD,OAKF,OAFA,EAAA9Q,UAAUC,QAAQoM,UAAU,oCAAqCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE5G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB1pD,IAEzC,CACJ,E,wGC5IJ,gBAEA,UAEA,2BAGI,WAAA3G,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAEA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,+BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,6BAEvB,IACI,MAAMo5F,QAAoB3hH,KAAKy0F,OAAOitB,iBAEtC,GAA2B,IAAvBC,EAAY59G,OACZ,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,sCAIzC,IAAI37G,EAAU,uBAAuBihH,EAAY59G,cAejD,OAdA49G,EAAYptB,QAAQ4Z,IAChB,MAAM8W,EAAsC,YAAzB9W,EAAI2T,iBAAiC,KAAO,IAC/DphH,GAAW,KAAKukH,OAAgB9W,EAAIW,qBAAqBX,EAAI2T,+BAA+B3T,EAAI4T,kBAC5F5T,EAAIpnB,cACJrmF,GAAW,oBAAoBytG,EAAIpnB,eAEnConB,EAAIqB,QAAUrB,EAAIqB,OAAOzrG,OAAS,IAClCrD,GAAW,eAAeytG,EAAIqB,OAAOruE,KAAK,SAE9CzgC,GAAW,OAGfA,GAAW,qCAAqCmC,KAAKC,UAAU6+G,EAAa,KAAM,aAE3E,IAAI5iB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB37G,IAGzC,CAAE,MAAO6/C,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,qCAAsCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE7G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,iCAAiC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE1H,CACJ,E,kGCnEJ,gBACA,UAEA,qBACI,YAAMsiE,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,uBAEvB,MAAM28F,EAAQ,IAAI5qF,KAGZ6qF,EAAgBD,EAAM/tE,cAAcxnC,MAAM,KAAK,GAG/Cy1G,EAAYF,EAAMG,mBAAmB,QAAS,CAAEC,QAAS,SAQzDv5G,EAAS,sCAELo5G,qBATOD,EAAMG,mBAAmB,QAAS,CAC/CC,QAAS,OACTC,KAAM,UACNC,MAAO,OACPC,IAAK,iCAOEL,6BAEID,2DAEf,OAAO,IAAIpmB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBtwG,IAEzC,CAEA,uBAAM42G,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,iCAE3B,E,yGCzCJ,gBACA,UACA,UACA,UAKA,4BAEI,WAAA52D,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,0BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,8BAEvB,IAEI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAX,YAAYkB,SAEL,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,mFAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,sCAAuCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE9G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,kCAAkC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE3H,CACJ,E,6GClDJ,gBACA,UACA,UACA,UAKA,gCAEI,WAAAyL,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,8BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,kCAEvB,IACI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAyB,gBAAgBlB,SAET,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,sGAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,0CAA2CrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAElH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,sCAAsC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE/H,CACJ,E,wGC9CJ,gBACA,UACA,UACA,UACA,UAiBA,2BAEI,WAAAyL,GACA,CAEA,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,EAAQ,OAAEgB,EAAM,UAAEC,GAAcpvB,EAAQ/mC,MAEvD,IAAIzwC,EAAU,+BAA+BulG,MAW7C,OAVII,IACA3lG,GAAW,mBAAmB2lG,OAE9BgB,IACA3mG,GAAW,gBAAgB2mG,OAE3BC,IACA5mG,GAAW,mBAAmB4mG,OAG3B,CACHsb,kBAAmBliH,EAE3B,CAEA,YAAMmiH,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,EAAQ,OAAEgB,EAAM,UAAEC,GAAcpvB,EAAQ/mC,MACvD,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,6BAEvB,IAGI,IAAK,EAAAm4E,QAAQlB,QAAQmB,IACjB,OAAO,IAAI5B,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6EAKzC,EAAAjJ,WAAWlS,OAAO+E,EAAOI,EAAUgB,EAAQC,GAE3C,IAAIoe,EAAiB,gCAAgCzf,MAKrD,OAJII,IAAUqf,GAAkB,YAAYrf,OACxCgB,IAAQqe,GAAkB,aAAare,OACvCC,IAAWoe,GAAkB,YAAYpe,OAEtC,IAAIvI,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBqJ,IAGzC,CAAE,MAAOnlE,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,qCAAsCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE7G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,qCAAqCpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAExI,CACJ,E,2GCvFJ,gBACA,UACA,UACA,UACA,UAeA,8BAEI,WAAAyL,GAEA,CAEA,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,UAAEU,EAAS,QAAEC,EAAO,OAAE9sF,GAAWo+D,EAAQ/mC,MAEtD,IAAIzwC,EAAU,kCAAkCulG,MAWhD,OAVIU,IACAjmG,GAAW,mBAAmBimG,OAE9BC,IACAlmG,GAAW,iBAAiBkmG,OAE5B9sF,IACApZ,GAAW,sBAAsBoZ,OAG9B,CACH8oG,kBAAmBliH,EAE3B,CAEA,YAAMmiH,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,UAAEU,EAAS,QAAEC,EAAO,OAAE9sF,GAAWo+D,EAAQ/mC,MACtD,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,gCAEvB,IAEI,IAAK,EAAAm4E,QAAQlB,QAAQmB,IACjB,OAAO,IAAI5B,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6EAKzC,MAAMsJ,EAAY,sBAClB,GAAIhf,IAAcgf,EAAUl2G,KAAKk3F,GAC7B,OAAO,IAAI5H,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,gCAAgC1V,qCAGzE,GAAIC,IAAY+e,EAAUl2G,KAAKm3F,GAC3B,OAAO,IAAI7H,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,8BAA8BzV,qCAKvE,MAAMgf,EAAgB,CAAC,UAAW,SAAU,UAAW,SAAU,kBAAmB,UAAW,YAC/F,GAAI9rG,IAAW8rG,EAAc3gB,SAASnrF,EAAOygE,eACzC,OAAO,IAAIwkB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,sBAAsBviG,qBAA0B8rG,EAAczkF,KAAK,WAK5G,EAAAs0E,WAAWvU,OAAO+E,EAAOU,EAAWC,EAAS9sF,GAAQygE,eAErD,IAAImrC,EAAiB,mCAAmCzf,MACxD,MAAM4f,EAAoB,GAc1B,OAbIlf,GACAkf,EAAQ91G,KAAK,eAAe42F,KAE5BC,GACAif,EAAQ91G,KAAK,aAAa62F,KAE1B9sF,GACA+rG,EAAQ91G,KAAK,WAAW+J,KAExB+rG,EAAQ9hH,OAAS,IACjB2hH,GAAkB,yBAAyBG,EAAQ1kF,KAAK,SAGrD,IAAI49D,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBqJ,IAGzC,CAAE,MAAOnlE,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,wCAAyCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEhH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,wCAAwCpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE3I,CACJ,E,qGCpHJ,gBACA,UACA,UACA,UACA,UAiBA,wBAEI,WAAAyL,GAEA,CAEA,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,GAAanuB,EAAQ/mC,MAEpC,IAAIzwC,EAAU,2BAA2BulG,MAKzC,OAJII,IACA3lG,GAAW,mBAAmB2lG,OAG3B,CACHuc,kBAAmBliH,EAE3B,CAEA,YAAMmiH,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,SAAEI,GAAanuB,EAAQ/mC,MACpC,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,0BAEvB,IAGI,IAAK,EAAAm4E,QAAQlB,QAAQmB,IACjB,OAAO,IAAI5B,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6EAKzC,EAAAtT,QAAQ7H,OAAO+E,EAAOI,GAEtB,IAAIqf,EAAiB,4BAA4Bzf,MAOjD,OALIyf,GADArf,EACkB,2BAA2BA,MAE3B,8BAGf,IAAItH,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsBqJ,IAGzC,CAAE,MAAOnlE,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,kCAAmCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE1G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,iCAAiCpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAEpI,CACJ,E,yGCvFJ,gBACA,UACA,UACA,UAKA,4BAEI,WAAAyL,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,0BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,8BAEvB,IACI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAoC,YAAY7B,SAEL,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,gEAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,sCAAuCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE9G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,kCAAkC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE3H,CACJ,E,0GCjDJ,gBACA,UACA,UACA,UAKA,8BAEI,WAAAyL,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,4BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,gCAEvB,IACI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAyC,cAAclC,SAEP,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,wFAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,wCAAyCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEhH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,oCAAoC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE7H,CACJ,E,8GCjDJ,gBACA,UACA,SACA,UAKA,iCAEI,WAAAyL,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,gCAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,mCAEvB,IACI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAgD,iBAAiBzC,SAEV,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,yHAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,2CAA4CrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEnH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,wCAAwC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAEjI,CACJ,E,2GCjDJ,gBACA,UACA,UACA,UAKA,8BAEI,WAAAyL,GAAe,CAEf,uBAAM22D,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,4BAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,gCAEvB,IACI,OAAK,EAAAm4E,QAAQlB,QAAQmB,KAMrB,EAAAgE,cAAczD,SAEP,IAAInC,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6FAR1B,IAAItd,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,4EAU7C,CAAE,MAAO97D,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,wCAAyCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEhH,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,oCAAoC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE7H,CACJ,E,wGCjDJ,gBAEA,UAEA,2BAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAEA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,yBAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,6BAEvB,IACI,MAAMg5F,QAAavhH,KAAKy0F,OAAOgtB,SAAQ,GAEvC,GAAoB,IAAhBF,EAAKx9G,OACL,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6BAIzC,IAAI37G,EAAU,sBAAsB6gH,EAAKx9G,cAWzC,OAVAw9G,EAAKhtB,QAAQ4Z,IACTztG,GAAW,OAAOytG,EAAIW,WAClBX,EAAIpnB,cACJrmF,GAAW,KAAKytG,EAAIpnB,eAExBrmF,GAAW,OAGfA,GAAW,qCAAqCmC,KAAKC,UAAUy+G,EAAM,KAAM,aAEpE,IAAIxiB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB37G,IAGzC,CAAE,MAAO6/C,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,qCAAsCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE7G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,iCAAiC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE1H,CACJ,E,wGC3DJ,gBAEA,UAEA,2BAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAEA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAO,CACHu1F,kBAAmB,yBAE3B,CAEA,YAAMC,CACF3qC,EACA7qD,GAGA,EAAAkyE,UAAUC,QAAQj3E,KAAK,6BAEvB,IACI,MAAMg5F,QAAavhH,KAAKy0F,OAAOgtB,SAAQ,GAEvC,GAAoB,IAAhBF,EAAKx9G,OACL,OAAO,IAAIg7F,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,6BAIzC,IAAI37G,EAAU,sBAAsB6gH,EAAKx9G,cAWzC,OAVAw9G,EAAKhtB,QAAQ4Z,IACTztG,GAAW,OAAOytG,EAAIW,WAClBX,EAAIpnB,cACJrmF,GAAW,KAAKytG,EAAIpnB,eAExBrmF,GAAW,OAGfA,GAAW,qCAAqCmC,KAAKC,UAAUy+G,EAAM,KAAM,aAEpE,IAAIxiB,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB37G,IAGzC,CAAE,MAAO6/C,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,qCAAsCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE7G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,iCAAiC97D,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE1H,CACJ,E,kGC3DJ,gBAEA,UACA,UAMA,qBAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAEA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAEpByyE,EAAsB,IAAI7kB,EAAO4d,eAQvC,OAPAiH,EAAoBhH,WAAY,EAChCgH,EAAoBC,eAAe,oCACnCD,EAAoBC,eAAe,qDACnCD,EAAoBC,eAAe,iBAAiB5d,WACpD2d,EAAoBC,eAAe,+DACnCD,EAAoBC,eAAe,2BAE5B,CACHjB,kBAAmB,gBAAgB3c,IACnC6d,qBAAsB,CAClBhkB,MAAO,oBACPp/F,QAASkjH,GAGrB,CAEA,YAAMf,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAC1B,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,uBAEvB,IAGI,aAFMvoB,KAAKy0F,OAAOoS,SAASZ,GAAO,GAE3B,IAAIlH,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,gCAAgCpW,QAGzE,CAAE,MAAO1lD,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,+BAAgCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEvG,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,yBAAyBpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE5H,CACJ,E,uGC5DJ,gBACA,UAEA,UACA,UAcA,0BAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAYA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,WAAEpF,EAAU,KAAEzpD,GAAS8gC,EAAQ/mC,MAG5C,IAAI20E,EAAcjlB,GAAc,KAC5BklB,EAAe,SAEnB,GAAIllB,IAAeA,EAAWwP,OAAO1a,WAAW,KAE5C,IAEI,MAAMqwB,EAAWnlB,EAAWtvD,QAAQ,eAAgB,IAChD6mD,EAAGmT,WAAWya,KACdF,EAAc1tB,EAAGqU,aAAauZ,EAAU,QACxCD,EAAe,SAASC,IAEhC,CAAE,MAAOzlE,GAEL5Q,QAAQs2E,KAAK,+BAA+B1lE,IAChD,CAIJ,IACI19C,KAAKyc,MAAMwmG,EACf,CAAE,MAAOtlH,GACL,MAAM,IAAIugF,MAAM,+BAA+BvgF,aAAaugF,MAAQvgF,EAAEE,QAAUurD,OAAOzrD,KAC3F,CAEA,MAAMojH,EAAsB,IAAI7kB,EAAO4d,eAavC,OAZAiH,EAAoBhH,WAAY,EAChCgH,EAAoBC,eAAe,sCACnCD,EAAoBC,eAAe,mDACnCD,EAAoBC,eAAe,iBAAiB5d,SAChD7uD,GACAwsE,EAAoBC,eAAe,uBAAuBzsE,SAE9DwsE,EAAoBC,eAAe,sBAAsBkC,SACzDnC,EAAoBC,eAAe,gCACnCD,EAAoBsC,gBAAgBJ,EAAa,QACjDlC,EAAoBC,eAAe,6BAE5B,CACHjB,kBAAmB,mBAAmB3c,IACtC6d,qBAAsB,CAClBhkB,MAAO,sBACPp/F,QAASkjH,GAGrB,CASA,YAAMf,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,EAAK,WAAEpF,EAAU,KAAEzpD,GAAS8gC,EAAQ/mC,MAC5C,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,4BAEvB,IAEI,IAAIu9F,EAAcjlB,GAAc,KAChC,GAAIA,IAAeA,EAAWwP,OAAO1a,WAAW,KAC5C,IACI,MAAMqwB,EAAWnlB,EAAWtvD,QAAQ,eAAgB,IAChD6mD,EAAGmT,WAAWya,KACdF,EAAc1tB,EAAGqU,aAAauZ,EAAU,QAEhD,CAAE,MAAOzlE,GAET,CAGJ,MAAMx0C,QAAe/L,KAAKy0F,OAAOqsB,cAAc7a,EAAO6f,EAAa1uE,GAE7D12C,EAAU,CACZ,oCACA,GACA,iBAAiBqL,EAAO+iG,SACxB,iBAAiB/iG,EAAO26F,aACxB,gBAAgB36F,EAAOwkB,QACvB,uBAAuBxkB,EAAOo6F,eAC9B/uD,EAAO,yBAAyBA,IAAS,IAC3Ck7B,OAAOziC,SAAS1O,KAAK,MAEvB,OAAO,IAAI49D,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB37G,IAGzC,CAAE,MAAO6/C,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,oCAAqCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAE5G,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,2BAA2BpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE9H,CACJ,E,oGCpJJ,gBAEA,UACA,UAMA,uBAGI,WAAAyL,CAAYyoC,GACRz0F,KAAKy0F,OAASA,CAClB,CAEA,uBAAMkuB,CACFzqC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAEpByyE,EAAsB,IAAI7kB,EAAO4d,eAQvC,OAPAiH,EAAoBhH,WAAY,EAChCgH,EAAoBC,eAAe,sCACnCD,EAAoBC,eAAe,kEACnCD,EAAoBC,eAAe,iBAAiB5d,WACpD2d,EAAoBC,eAAe,4DACnCD,EAAoBC,eAAe,2BAE5B,CACHjB,kBAAmB,kBAAkB3c,IACrC6d,qBAAsB,CAClBhkB,MAAO,sBACPp/F,QAASkjH,GAGrB,CAEA,YAAMf,CACF3qC,EACA7qD,GAEA,MAAM,MAAE44E,GAAU/tB,EAAQ/mC,MAC1B,EAAAqnE,UAAUhZ,QAAQ0b,aAAejV,EAGjC,EAAA1G,UAAUC,QAAQj3E,KAAK,yBAEvB,IAGI,aAFMvoB,KAAKy0F,OAAOoS,SAASZ,GAAO,GAE3B,IAAIlH,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,kCAAkCpW,QAG3E,CAAE,MAAO1lD,GAIL,OAFA,EAAAg/C,UAAUC,QAAQoM,UAAU,iCAAkCrrD,aAAiBwgC,MAAQxgC,EAAQ,IAAIwgC,MAAM90B,OAAO1L,KAEzG,IAAIw+C,EAAO+jB,wBAAwB,CACtC,IAAI/jB,EAAOsd,sBAAsB,2BAA2BpW,MAAU1lD,aAAiBwgC,MAAQxgC,EAAM7/C,QAAUurD,OAAO1L,OAE9H,CACJ,E,gGCnEJ,gBACA,UACA,UACA,UAEA,MAAa6yD,EAcT,YAAoBnT,EAA4BgG,EAAeI,EAAmBgB,EAAiBC,GAX3F,KAAApH,aAAoC,GASpC,KAAAqY,KAAyB,IAAIU,IAGjC9Y,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCAEvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKimG,MAAQA,EACbjmG,KAAKqmG,SAAWA,EAChBrmG,KAAKqnG,OAASA,EACdrnG,KAAKsnG,UAAYA,EAEjBtnG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,mCACnB,CAEO,aAAOc,CAAO+E,EAAeI,EAAmBgB,EAAiBC,GAGpE,GAFAnH,EAAGC,YAAY,6BACf,EAAAb,UAAUC,QAAQj3E,KAAK,4BACnB6qF,EAAW5T,QACX4T,EAAW5T,QAAQyG,MAAQA,EAC3BmN,EAAW5T,QAAQ6G,SAAWA,EAC9B+M,EAAW5T,QAAQ6H,OAASA,EAC5B+L,EAAW5T,QAAQ8H,UAAYA,EAC/B8L,EAAW5T,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACnD+R,EAAW5T,QAAQiB,eAChB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,aAAc,WAAYvC,EAAOqC,WAAWC,IAAK,CAC5FE,eAAe,EACf4kB,yBAAyB,IAG7B/S,EAAW5T,QAAU,IAAI4T,EAAWnT,EAAOgG,EAAOI,EAAUgB,EAAQC,EACxE,CACJ,CAEO,cAAM7G,GAGT,GAFAN,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BAClB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAG5B,GAAK3gG,KAAKqmG,SASH,CAEH,MAAMqO,QAAkB,EAAAhU,QAAQlB,QAAQmB,IAAIyF,UAAUpmG,KAAKimG,MAAOjmG,KAAKqmG,UACnEqO,EAAU9T,eACV5gG,KAAKi2G,WAAavB,EAAU3oG,OAEpC,KAfoB,CAChB,MAAMq6G,QAAsB,EAAA1lB,QAAQlB,QAAQmB,IAAI2F,cAActmG,KAAKimG,OACnE,IAAImgB,EAAcxlB,eAAgBwlB,EAAcr6G,OAK5C,YADAo0F,EAAG4F,iBAAiB,mCAHpB/lG,KAAKi2G,WAAamQ,EAAcr6G,OAChC/L,KAAKqmG,SAAWrmG,KAAKi2G,WAAWvP,UAKxC,CASA,GAAI1mG,KAAKqmG,SAAU,CACf,MAAMggB,QAAoB,EAAA3lB,QAAQlB,QAAQmB,IAAIgH,iBAAiB3nG,KAAKimG,MAAOjmG,KAAKqmG,UAC5EggB,EAAYzlB,cAAgBylB,EAAYt6G,SACxC/L,KAAKsmH,kBAAoBD,EAAYt6G,OAE7C,CAGA/L,KAAKu4G,KAAKpM,QAGV,MAAMsL,EAAQz3G,KAAKumH,kBAGb/yB,QAAQC,IAAIgkB,EAAMxpD,IAAI/6C,IACxB,IAAIszG,EAAStzG,EAAE+0F,WAKf,OAHIjoG,KAAKqnG,QAAUn0F,EAAE80F,UAAYhoG,KAAKqnG,aAA6Bh7F,IAAnBrM,KAAKsnG,YACjDkf,EAASxmH,KAAKsnG,WAEXtnG,KAAKymH,gBAAgBvzG,EAAE80F,QAASwe,YAGrCxmH,KAAK8gG,YACf,CAEQ,SAAAylB,GACJ,IAAKvmH,KAAKsmH,oBAAsBtmH,KAAKsmH,kBAAkBze,eACnD,MAAO,GAEX,IAAI4P,EAAQ,IAAIz3G,KAAKsmH,kBAAkBze,gBAOvC,OAJI7nG,KAAKqnG,SACLoQ,EAAQA,EAAMnlC,OAAQp/D,GAAWA,EAAE80F,UAAYhoG,KAAKqnG,SAGjDoQ,EAAMzjE,KAAK,CAACyjD,EAAQ9rC,KACR8rC,EAAEmf,WAAa,IAAIt8E,KAAKm9D,EAAEmf,YAAYvyG,UAAY,IAClDsnD,EAAEirD,WAAa,IAAIt8E,KAAKqxB,EAAEirD,YAAYvyG,UAAY,GAGzE,CAEQ,qBAAMoiH,CAAgBpf,EAAgBmf,GAC1C,IAAKxmH,KAAKqmG,SAAY,OAEtB,IAAIqgB,EAAkBF,EACtB,QAAwBn6G,IAApBq6G,EAA+B,CAC9B,MAAMxN,EAAOl5G,KAAKsmH,kBAAkBze,eAAeC,KAAM50F,GAAWA,EAAE80F,UAAYX,GAE9Eqf,EADAxN,EACkBA,EAAKjR,WAEL,CAE3B,CAEA,GAAIjoG,KAAKu4G,KAAKiB,IAAInS,GAAW,OAE7B,MAAMt7F,QAAe,EAAA20F,QAAQlB,QAAQmB,KAAKyG,mBAAmBpnG,KAAKimG,MAAOjmG,KAAKqmG,SAAUgB,EAAQqf,IAC5F36G,GAAQ60F,cACR5gG,KAAKu4G,KAAKvkG,IAAIqzF,EAAQt7F,EAAOA,OAErC,CAEO,gBAAM+0F,GACTX,EAAGC,YAAY,iCACfpgG,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,aAC5F,CAEO,OAAA1N,GAGH,IAFA6f,EAAW5T,aAAUnzF,EACrBrM,KAAKqgG,OAAO9M,UACLvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,yCACf,EAAAb,UAAUC,QAAQj3E,KAAK,wCACvB,MAAMm5E,EAAcvB,EAAGwB,OAAOnB,EAASiB,EAAc,CACjD,eACA,mBACA,WACA,OACA,eAGEG,EAAUzB,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,YACrDI,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAEtDgW,EAAQz3G,KAAKumH,YAGb7N,EAAS14G,KAAKi2G,YAAc,CAAC,EAC7BtP,EAAY+R,EAAO9B,WAAazW,EAAG+D,oBAAoB,IAAI5pE,KAAKo+E,EAAO9B,aAAe,MACtFhQ,EAAU8R,EAAO7B,SAAW1W,EAAG+D,oBAAoB,IAAI5pE,KAAKo+E,EAAO7B,WAAa,UAChF3mD,EAAWwoD,EAAO9B,WAAazW,EAAG8W,YAAY,IAAI38E,KAAKo+E,EAAO9B,YAAa8B,EAAO7B,SAAW,IAAIv8E,KAAKo+E,EAAO7B,UAAY,IAAIv8E,MAAU,MACvIxgB,EAAS4+F,EAAOnoF,OAAS,MAEzBo2F,EAAelP,EAAMxpD,IAAI/6C,IAC3B,MAAM0zG,EAAU5mH,KAAKu4G,KAAKvnF,IAAI9d,EAAE80F,SAChC,IAAI6e,EAAc,GAIdC,EAAc,eAFY,YAAZ5zG,EAAEqd,QAGLu2F,EAAc,kBAFb,CAAC,SAAU,kBAAmB,WAAY,WAAW7hB,SAAS/xF,EAAEqd,SAGnEu2F,EAAc,gBAE3B,IAAIC,EAAa7zG,EAAE+0F,WAiCnB,OAhCIjoG,KAAKqnG,QAAUn0F,EAAE80F,UAAYhoG,KAAKqnG,aAA6Bh7F,IAAnBrM,KAAKsnG,YACjDyf,EAAa/mH,KAAKsnG,WAKduf,EAFJD,EACIA,EAAQ1f,SAAWr7C,MAAMqc,QAAQ0+C,EAAQ1f,SAC3B0f,EAAQ1f,QAAQj5C,IAAK6E,IAC9B,MAAMk0D,EAAKl0D,EAAMm0D,UAAY,IAAIn0D,EAAMm0D,aAAe,GAChDC,EAAMp0D,EAAMoB,MAAQ,IAAIpB,EAAMoB,SAAW,GACzC7zD,EAASyyD,EAAMzyD,OAAS,IAAIyyD,EAAMzyD,UAAY,GAC9CoE,EAAMquD,EAAMvuD,OAAS,GAC3B,IAAI4iH,EAAQ,GAERr0D,EAAMs0D,eACND,EAAQ,6BAA6BtkH,KAAKC,UAAUgwD,EAAMs0D,aAAc,KAAM,YAGlF,IAAIC,EAAY,WAIhB,OAHIH,EAAI3sC,cAAc0qB,SAAS,WAAYoiB,GAAa,cACpDH,EAAI3sC,cAAc0qB,SAAS,UAAWoiB,GAAa,aAEhD,eAAeA,2BAAmCL,kCAAmCE,qCAAuC7mH,kCAAuCL,KAAKkiG,YAAYz9F,YAAc0iH,YAC3MhmF,KAAK,IACDylF,EAAQz1F,OACA,0BAA0BnxB,KAAKkiG,YAAY0kB,EAAQz1F,gBAEnD,QAAQnxB,KAAKkiG,YAAYr/F,KAAKC,UAAU8jH,EAAS,KAAM,YAG5D,kDAGX,0CACoBE,mNAIY9mH,KAAKkiG,YAAYhvF,EAAE80F,sEAClBhoG,KAAKkiG,YAAYhvF,EAAEqd,kJAGjBw2F,oHAGD7zG,EAAE80F,kCACjC6e,kDAGX1lF,KAAK,MAGR,MAAO,oLAKkBugE,iDACAE,mDACEC,8kKAyIyB7hG,KAAKimG,iFACLjmG,KAAKqmG,oFACLvsF,gIAGD6sF,0EACFC,+EACK12C,2FAKpDy2D,0MASN,CAEQ,WAAAzkB,CAAYx1D,GAChB,IAAKA,EAAM,MAAO,GAClB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOhC,OAAOvf,GAAM6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GACrD,CAEQ,0BAAA+uC,CAA2BC,GAC/BL,EAAGC,YAAY,iDACf,EAAAb,UAAUC,QAAQj3E,KAAK,gDACvBi4E,EAAQ2B,oBACJlN,MAAOv0F,WAGP2L,EACArM,KAAKkgG,aAEb,EA7aJ,c,gGCLA,gBACA,UACA,UACA,UACA,UACA,UAEA,MAAauV,EAcT,YAAoBxV,GAXZ,KAAAC,aAAoC,GAKpC,KAAAonB,cAAwB,GACxB,KAAAC,kBAA4BpnB,EAAGyV,gBAAgB,IAAIt7E,KAAKA,KAAK+P,MAAQ,SACrE,KAAAm9E,gBAA0BrnB,EAAGyV,gBAAgB,IAAIt7E,MACjD,KAAAmtF,eAAyB,GACzB,KAAAC,UAAsB,GAG1BvnB,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCACvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,mCACnB,CAEO,cAAMK,GAGf,GAFMN,EAAGC,YAAY,+BACf,EAAAb,UAAUC,QAAQj3E,KAAK,+BACxB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAMgnB,QAAmB,EAAAjnB,QAAQlB,QAAQmB,IAAIgF,aAW7C,GAVIgiB,EAAW/mB,cAAgB/0C,MAAMqc,QAAQy/C,EAAW57G,UACpD/L,KAAK0nH,UAAYC,EAAW57G,OAAOkiD,IAAKkgD,GAAaA,EAAIW,QAAQ96D,QAG5Dh0C,KAAKsnH,eAAiBtnH,KAAK0nH,UAAU3jH,OAAS,IAC/C/D,KAAKsnH,cAAgBtnH,KAAK0nH,UAAU,KAKxC1nH,KAAKsnH,cAAe,CACpB,MAAMv7G,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiBxmG,KAAKsnH,eAC/D,GAAIv7G,EAAO60F,cAAgB70F,EAAOA,QAAUA,EAAOA,OAAO06F,SAAU,CAEhE,MAAMmhB,EAAgB,IAAIttF,KAAKt6B,KAAKunH,kBAAoB,cAAcljH,UAChEwjH,EAAc,IAAIvtF,KAAKt6B,KAAKwnH,gBAAkB,cAAcnjH,UAElErE,KAAK8nH,YAAc/7G,EAAOA,OAAO06F,SAASn0B,OAAQ3rC,IAC9C,GAAIA,EAAIiwE,WAAY,CAChB,MAAMmR,EAAU,IAAIztF,KAAKqM,EAAIiwE,YAAYvyG,UACzC,OAAO0jH,GAAWH,GAAiBG,GAAWF,CAClD,CACA,OAAO,GAEf,CACJ,MACI7nH,KAAK8nH,YAAc,SAGjB9nH,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,iCACf,EAAAb,UAAUC,QAAQj3E,KAAK,gCACvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,kCACnB,CAEO,aAAOc,CAAO+E,EAAgBU,EAAoBC,EAAkB9sF,GAGvE,GAFAqmF,EAAGC,YAAY,6BACf,EAAAb,UAAUC,QAAQj3E,KAAK,4BACnBktF,EAAWjW,QAEPyG,IAASwP,EAAWjW,QAAQ8nB,cAAgBrhB,GAC5CU,IAAa8O,EAAWjW,QAAQ+nB,kBAAoB5gB,GACpDC,IAAW6O,EAAWjW,QAAQgoB,gBAAkB5gB,GAChD9sF,IAAU27F,EAAWjW,QAAQioB,eAAiB3tG,GAClD27F,EAAWjW,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACnDoU,EAAWjW,QAAQiB,eAChB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,aAAc,kBAAmBvC,EAAOqC,WAAWC,IAAK,CACnGE,eAAe,IAGnBkU,EAAWjW,QAAU,IAAIiW,EAAWxV,GAEhCgG,IAASwP,EAAWjW,QAAQ8nB,cAAgBrhB,GAC5CU,IAAa8O,EAAWjW,QAAQ+nB,kBAAoB5gB,GACpDC,IAAW6O,EAAWjW,QAAQgoB,gBAAkB5gB,GAChD9sF,IAAU27F,EAAWjW,QAAQioB,eAAiB3tG,IAE9CmsF,GAASU,GAAaC,GAAW9sF,IACjC27F,EAAWjW,QAAQiB,UAE3B,CACJ,CAEO,OAAAlN,GAOH,IANA4M,EAAGC,YAAY,8BACf,EAAAb,UAAUC,QAAQj3E,KAAK,6BACvBktF,EAAWjW,aAAUnzF,EAErBrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,yCACf,EAAAb,UAAUC,QAAQj3E,KAAK,wCAEvB,MAAMs5E,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIumB,EAAsB,GACtBhoH,KAAK8nH,aAAej8D,MAAMqc,QAAQloE,KAAK8nH,eACvCE,EAAehoH,KAAK8nH,YAAYx1C,OAAQ3rC,IAEhC3mC,KAAKynH,gBAAkB9gF,EAAIpW,QAAUvwB,KAAKynH,iBAQtD,IAAI3lB,EAAY,GAuRhB,OAtRAkmB,EAAazzB,QAAS5tD,IAClB,MAAMs/D,EAAQt/D,EAAImoE,QAAU,MACtBh1F,EAAS6sB,EAAIpW,OAAS,MACtBo2E,EAAYhgE,EAAIiwE,WAAazW,EAAG+D,oBAAoB,IAAI5pE,KAAKqM,EAAIiwE,aAAe,MAChF1mD,EAAWvpB,EAAIiwE,YAAcjwE,EAAIkwE,SAAW1W,EAAG8W,YAAY,IAAI38E,KAAKqM,EAAIiwE,YAAa,IAAIt8E,KAAKqM,EAAIkwE,WAAa,UAC/G12G,EAASwmC,EAAIu/D,KAAOrjG,KAAKC,UAAU6jC,EAAIu/D,MAAQ,KAC/C4C,EAAOniE,EAAImiE,MAAQ,GACnBzC,EAAW1/D,EAAI+/D,YAAc,GAEnC5E,GAAa,sFAEsB9hG,KAAKkiG,YAAY+D,wBAA4BjmG,KAAKkiG,YAAYmE,wBAA+BrmG,KAAKkiG,YAAY+D,uKAGjGnsF,aAAkB9Z,KAAKkiG,YAAYpoF,6CAC/D9Z,KAAKkiG,YAAYpoF,wLAKE9Z,KAAKkiG,YAAY+D,wBAA4BjmG,KAAKkiG,YAAYmE,yHAG3FrmG,KAAKkiG,YAAYyE,6DACY3mG,KAAKkiG,YAAYhyC,4HACuClwD,KAAKkiG,YAAY/hG,sCACtGH,KAAKkiG,YAAY4G,+BASP,kNAMOjH,29KAVV7hG,KAAK0nH,UAAUz5D,IAAIrxB,GACpC,kBAAkB58B,KAAKkiG,YAAYtlE,OAAQA,IAAO58B,KAAKsnH,cAAgB,WAAa,MAAMtnH,KAAKkiG,YAAYtlE,eAC7GuE,KAAK,2MAmKoDnhC,KAAKunH,4LAIPvnH,KAAKwnH,qQAMA,YAAxBxnH,KAAKynH,eAA+B,WAAa,mEAC1B,WAAxBznH,KAAKynH,eAA8B,WAAa,mEACvB,YAAxBznH,KAAKynH,eAA+B,WAAa,mEAC1B,WAAxBznH,KAAKynH,eAA8B,WAAa,2EACf,oBAAxBznH,KAAKynH,eAAuC,WAAa,2fAkBjG3lB,GAAa,8uEAmDvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOhC,OAAOvf,GAAM6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GACrD,CAEQ,eAAAy2D,CAAgBnuG,GAUpB,MAT6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,SAAY,MAECA,EAAOygE,gBAAkB,IAC9C,CAEQ,0BAAAgmB,CAA2BC,GAC/BL,EAAGC,YAAY,iDACf,EAAAb,UAAUC,QAAQj3E,KAAK,gDACvBi4E,EAAQ2B,oBACHzhG,IAEG,OADAy/F,EAAGC,YAAY,0DAA4D1/F,EAAQy+F,SAC3Ez+F,EAAQy+F,SACZ,IAAK,gBAGD,OAFAn/F,KAAKsnH,cAAgB5mH,EAAQulG,WAC7BjmG,KAAKygG,WAET,IAAK,oBAGD,OAFAzgG,KAAKunH,kBAAoB7mH,EAAQimG,eACjC3mG,KAAKygG,WAET,IAAK,kBAGD,OAFAzgG,KAAKwnH,gBAAkB9mH,EAAQkmG,aAC/B5mG,KAAKygG,WAET,IAAK,gBAGD,OAFAzgG,KAAKynH,eAAiB/mH,EAAQoZ,YAC9B9Z,KAAK8gG,aAET,IAAK,gBAED,IAAK,EAAAJ,QAAQlB,QAAQmB,IAAO,OAI5B,YAHI,EAAAD,QAAQlB,QAAQmB,KAAOjgG,EAAQulG,OAC/B,EAAA8C,QAAQ7H,OAAOxgG,EAAQulG,MAAOvlG,EAAQ2lG,WAG9C,IAAK,eAID,YAHI3lG,EAAQulG,OACR,EAAAmN,WAAWlS,OAAOxgG,EAAQulG,MAAOvlG,EAAQ2lG,kBAKzDh6F,EACArM,KAAKkgG,aAEb,EA9dJ,c,qGCPA,gBACA,UACA,UACA,UACA,UACA,UAEA,MAAaqV,EAaT,YAAoBtV,GAVZ,KAAAC,aAAoC,GAKpC,KAAAgoB,aAAuB/nB,EAAGyV,gBAAgB,IAAIt7E,MAC9C,KAAAmtF,eAAyB,GACzB,KAAAH,cAAwB,GACxB,KAAAI,UAAsB,GAG1BvnB,EAAGC,YAAY,uCACf,EAAAb,UAAUC,QAAQj3E,KAAK,sCACvBvoB,KAAKqgG,OAASJ,EACdjgG,KAAKqgG,OAAOC,aAAa,IAAMtgG,KAAKuzF,UAAW,KAAMvzF,KAAKkgG,cAC1DlgG,KAAKugG,2BAA2BvgG,KAAKqgG,OAAOG,SAC5CxgG,KAAKygG,WACLN,EAAGC,YAAY,wCACnB,CAEO,cAAMK,GAGf,GAFMN,EAAGC,YAAY,oCACf,EAAAb,UAAUC,QAAQj3E,KAAK,oCACxB,EAAAm4E,QAAQlB,QAAQmB,IAAO,OAEtB,MAAMgnB,QAAmB,EAAAjnB,QAAQlB,QAAQmB,IAAIgF,aAO7C,GANIgiB,EAAW/mB,cAAgB/0C,MAAMqc,QAAQy/C,EAAW57G,UACpD/L,KAAK0nH,UAAYC,EAAW57G,OAAOkiD,IAAKkgD,GAAaA,EAAIW,QAAQ96D,QAKjEh0C,KAAKsnH,cAAe,CACpB,MAAMv7G,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiBxmG,KAAKsnH,cAAetnH,KAAKkoH,cAC/En8G,EAAO60F,cAAgB70F,EAAOA,QAAUA,EAAOA,OAAO06F,WACtDzmG,KAAK8nH,YAAc/7G,EAAOA,OAAO06F,SAEzC,KAAO,CAEH,MAAM0hB,EAAiB,GACvB,IAAK,MAAMliB,KAASjmG,KAAK0nH,UAAW,CAChC,MAAM37G,QAAe,EAAA20F,QAAQlB,QAAQmB,IAAI6F,iBAAiBP,EAAOjmG,KAAKkoH,cAClEn8G,EAAO60F,cAAgB70F,EAAOA,QAAUA,EAAOA,OAAO06F,UACtD0hB,EAAQp4G,QAAQhE,EAAOA,OAAO06F,SAEtC,CACAzmG,KAAK8nH,YAAcK,CACvB,OAEMnoH,KAAK8gG,YACf,CAEO,gBAAMA,GACTX,EAAGC,YAAY,sCACf,EAAAb,UAAUC,QAAQj3E,KAAK,qCACvBvoB,KAAKqgG,OAAOG,QAAQO,KAAO/gG,KAAKghG,mBAAmBhhG,KAAKqgG,OAAOG,QAAS,EAAAE,QAAQlB,QAAQyB,cACxFd,EAAGC,YAAY,uCACnB,CAEO,aAAOc,GAGV,GAFAf,EAAGC,YAAY,kCACf,EAAAb,UAAUC,QAAQj3E,KAAK,iCACnBgtF,EAAgB/V,QAChB+V,EAAgB/V,QAAQa,OAAOc,OAAOpC,EAAOqC,WAAWC,KACxDkU,EAAgB/V,QAAQiB,eACrB,CACH,MAAMR,EAAQlB,EAAO9Z,OAAOqc,mBAAmB,kBAAmB,iBAAkBvC,EAAOqC,WAAWC,IAAK,CACvGE,eAAe,IAGnBgU,EAAgB/V,QAAU,IAAI+V,EAAgBtV,EAClD,CACJ,CAEO,OAAA1M,GAOH,IANA4M,EAAGC,YAAY,mCACf,EAAAb,UAAUC,QAAQj3E,KAAK,kCACvBgtF,EAAgB/V,aAAUnzF,EAE1BrM,KAAKqgG,OAAO9M,UAELvzF,KAAKkgG,aAAan8F,QAAQ,CAC7B,MAAMy9F,EAAaxhG,KAAKkgG,aAAavkB,MACjC6lB,GACAA,EAAWjO,SAEnB,CACJ,CAEQ,kBAAAyN,CAAmBR,EAAyBiB,GAChDtB,EAAGC,YAAY,8CACf,EAAAb,UAAUC,QAAQj3E,KAAK,6CAEvB,MAAMs5E,EAAW1B,EAAGwB,OAAOnB,EAASiB,EAAc,CAAC,QAAS,cAG5D,IAAIumB,EAAsB,GACtBhoH,KAAK8nH,aAAej8D,MAAMqc,QAAQloE,KAAK8nH,eACvCE,EAAehoH,KAAK8nH,YAAYx1C,OAAQ3rC,IAEhC3mC,KAAKynH,gBAAkB9gF,EAAIpW,QAAUvwB,KAAKynH,iBAStD,IAAI3lB,EAAY,GAChBkmB,EAAazzB,QAAS5tD,IAClB,MAAMs/D,EAAQt/D,EAAImoE,QAAU,MACtBh1F,EAAS6sB,EAAIpW,OAAS,MACtBo2E,EAAYhgE,EAAIiwE,WAAazW,EAAG+D,oBAAoB,IAAI5pE,KAAKqM,EAAIiwE,aAAe,MAChF1mD,EAAWvpB,EAAIiwE,YAAcjwE,EAAIkwE,SAAW1W,EAAG8W,YAAY,IAAI38E,KAAKqM,EAAIiwE,YAAa,IAAIt8E,KAAKqM,EAAIkwE,WAAa,UAC/G12G,EAASwmC,EAAIu/D,KAAOrjG,KAAKC,UAAU6jC,EAAIu/D,MAAQ,KAC/C4C,EAAOniE,EAAImiE,MAAQ,GACnBzC,EAAW1/D,EAAI+/D,YAAc,GAEnC5E,GAAa,sFAEsB9hG,KAAKkiG,YAAY+D,wBAA4BjmG,KAAKkiG,YAAYmE,wBAA+BrmG,KAAKkiG,YAAY+D,uKAGjGnsF,aAAkB9Z,KAAKkiG,YAAYpoF,6CAC/D9Z,KAAKkiG,YAAYpoF,wLAKE9Z,KAAKkiG,YAAY+D,wBAA4BjmG,KAAKkiG,YAAYmE,yHAG3FrmG,KAAKkiG,YAAYyE,6DACY3mG,KAAKkiG,YAAYhyC,4HACuClwD,KAAKkiG,YAAY/hG,sCACtGH,KAAKkiG,YAAY4G,+BAK/B,MAAMsf,EAAepoH,KAAK0nH,UAAUz5D,IAAIrxB,GAAM,kBAAkB58B,KAAKkiG,YAAYtlE,OAAQ58B,KAAKkiG,YAAYtlE,eAAgBuE,KAAK,IAyO/H,MAvOwB,kNAMO0gE,q/JAgJsB7hG,KAAKkoH,+wBAiB5CE,ieAkBRtmB,GAAa,ghEA+CvB,CAEQ,WAAAI,CAAYx1D,GAChB,MAAMuhB,EAAiC,CACnC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAET,OAAOhC,OAAOvf,GAAM6E,QAAQ,WAAYigB,GAAKvD,EAAIuD,GACrD,CAEQ,eAAAy2D,CAAgBnuG,GAUpB,MAT6C,CACzC,QAAW,IACX,OAAU,IACV,QAAW,KACX,OAAU,IACV,gBAAmB,KACnB,QAAW,KACX,SAAY,MAECA,EAAOygE,gBAAkB,IAC9C,CAEQ,0BAAAgmB,CAA2BC,GAC/BL,EAAGC,YAAY,sDACf,EAAAb,UAAUC,QAAQj3E,KAAK,qDACvBi4E,EAAQ2B,oBACHzhG,IAEG,OADAy/F,EAAGC,YAAY,+DAAiE1/F,EAAQy+F,SAChFz+F,EAAQy+F,SACZ,IAAK,cAGD,OAFAn/F,KAAKkoH,aAAexnH,EAAQ02C,UAC5Bp3C,KAAKygG,WAET,IAAK,gBAGD,OAFAzgG,KAAKynH,eAAiB/mH,EAAQoZ,YAC9B9Z,KAAK8gG,aAET,IAAK,gBAGD,OAFA9gG,KAAKsnH,cAAgB5mH,EAAQulG,WAC7BjmG,KAAKygG,WAET,IAAK,gBAKD,YAHI,EAAAC,QAAQlB,QAAQmB,KAAOjgG,EAAQulG,OAC/B,EAAA8C,QAAQ7H,OAAOxgG,EAAQulG,MAAOvlG,EAAQ2lG,WAG9C,IAAK,eAID,YAHI3lG,EAAQulG,OACR,EAAAmN,WAAWlS,OAAOxgG,EAAQulG,MAAOvlG,EAAQ2lG,kBAKzDh6F,EACArM,KAAKkgG,aAEb,EAvbJ,mB,oGCRA,gBAEA,MAAamoB,UAAuBtpB,EAAOC,SACzC,WAAAhzC,CACkBizC,EACAC,EACAC,EACAC,GAEhBnI,MAAMgI,EAAOC,GALG,KAAAD,MAAAA,EACA,KAAAC,iBAAAA,EACA,KAAAC,QAAAA,EACA,KAAAC,SAAAA,EAGhBp/F,KAAKm/F,QAAUA,EACfn/F,KAAKo/F,SAAWA,CAClB,EAVF,kB,oGCFA,gBACA,UACA,UAEA,uBAIE,WAAApzC,GAHQ,KAAAqzC,qBAAsF,IAAIN,EAAOhN,aAChG,KAAAuN,oBAA8Et/F,KAAKq/F,qBAAqB96F,MAG/G,EAAAg7F,UAAUC,QAAQj3E,KAAK,oCACzB,CAEA,OAAA2nE,GACE,EAAAqP,UAAUC,QAAQj3E,KAAK,iCACvBvoB,KAAKq/F,qBAAqBjiD,MAC5B,CAEA,WAAAqiD,CAAYC,GACV,OAAOA,CACT,CAEA,WAAAC,CAAYD,GACV,OAAKA,EAyBElM,QAAQxmE,QAAQ,IAvBdwmE,QAAQxmE,QAAQ,CACrB,IAAI,EAAAq7F,eACF,iBACAtpB,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,0BACTW,MAAO,sBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,mBAEvB,IAAI,EAAAsoB,eACF,kBACAtpB,EAAOa,yBAAyBC,KAChC,CACEV,QAAS,gCACTW,MAAO,uBACP97F,UAAW,IAEb,IAAI+6F,EAAOgB,UAAU,aAK7B,E,YC7CD,IAAkBuoB,IAIX,SAAWlxB,GAAW,aAG1B,MAAMmxB,EAAmC,mBAAXC,QAAoD,iBAApBA,OAAOhkC,SACjEgkC,OACAzhC,GAAe,UAAUA,KAG7B,SAAS0hC,IAET,CAaA,MAAMC,EAXkB,oBAATpzF,KACAA,KAEgB,oBAAX2vD,OACLA,OAEgB,oBAAXC,OACLA,YADN,EAOT,SAASyjC,EAAaC,GAClB,MAAqB,iBAANA,GAAwB,OAANA,GAA4B,mBAANA,CAC3D,CACA,MAAMC,EAAiCJ,EAEjCK,EAAkBt1B,QAClBu1B,EAAsBv1B,QAAQ/+B,UAAU8kB,KACxCyvC,EAAyBx1B,QAAQxmE,QAAQiI,KAAK6zF,GAC9CG,EAAwBz1B,QAAQtxC,OAAOjtB,KAAK6zF,GAClD,SAASluC,EAAWE,GAChB,OAAO,IAAIguC,EAAgBhuC,EAC/B,CACA,SAASouC,EAAoB/mH,GACzB,OAAO6mH,EAAuB7mH,EAClC,CACA,SAASgnH,EAAoBtrG,GACzB,OAAOorG,EAAsBprG,EACjC,CACA,SAASurG,EAAmBC,EAASC,EAAa7tC,GAG9C,OAAOstC,EAAoBhpH,KAAKspH,EAASC,EAAa7tC,EAC1D,CACA,SAAS8tC,EAAYF,EAASC,EAAa7tC,GACvC2tC,EAAmBA,EAAmBC,EAASC,EAAa7tC,QAAapvE,EAAWw8G,EACxF,CACA,SAASW,EAAgBH,EAASC,GAC9BC,EAAYF,EAASC,EACzB,CACA,SAASG,EAAcJ,EAAS5tC,GAC5B8tC,EAAYF,OAASh9G,EAAWovE,EACpC,CACA,SAASiuC,EAAqBL,EAASM,EAAoBC,GACvD,OAAOR,EAAmBC,EAASM,EAAoBC,EAC3D,CACA,SAASC,EAA0BR,GAC/BD,EAAmBC,OAASh9G,EAAWw8G,EAC3C,CACA,MAAMiB,EAAiB,MACnB,MAAMC,EAAuBrB,GAAWA,EAAQoB,eAChD,GAAoC,mBAAzBC,EACP,OAAOA,EAEX,MAAMC,EAAkBd,OAAoB78G,GAC5C,OAAQmlB,GAAO43F,EAAmBY,EAAiBx4F,EACtD,EAPsB,GAQvB,SAASy4F,EAAYC,EAAGC,EAAGh2G,GACvB,GAAiB,mBAAN+1G,EACP,MAAM,IAAIjpC,UAAU,8BAExB,OAAO5K,SAAS5hB,UAAU/pC,MAAM3qB,KAAKmqH,EAAGC,EAAGh2G,EAC/C,CACA,SAASi2G,EAAYF,EAAGC,EAAGh2G,GACvB,IACI,OAAO+0G,EAAoBe,EAAYC,EAAGC,EAAGh2G,GACjD,CACA,MAAOhS,GACH,OAAOgnH,EAAoBhnH,EAC/B,CACJ,CAWA,MAAMkoH,EACF,WAAAr+D,GACIhsD,KAAKsqH,QAAU,EACftqH,KAAKuqH,MAAQ,EAEbvqH,KAAKwqH,OAAS,CACVC,UAAW,GACXjsE,WAAOnyC,GAEXrM,KAAK0qH,MAAQ1qH,KAAKwqH,OAIlBxqH,KAAKsqH,QAAU,EAEftqH,KAAKuqH,MAAQ,CACjB,CACA,UAAIxmH,GACA,OAAO/D,KAAKuqH,KAChB,CAKA,IAAAx6G,CAAK2vF,GACD,MAAMirB,EAAU3qH,KAAK0qH,MACrB,IAAIE,EAAUD,EACmBE,QAA7BF,EAAQF,UAAU1mH,SAClB6mH,EAAU,CACNH,UAAW,GACXjsE,WAAOnyC,IAKfs+G,EAAQF,UAAU16G,KAAK2vF,GACnBkrB,IAAYD,IACZ3qH,KAAK0qH,MAAQE,EACbD,EAAQnsE,MAAQosE,KAElB5qH,KAAKuqH,KACX,CAGA,KAAAvuG,GACI,MAAM8uG,EAAW9qH,KAAKwqH,OACtB,IAAIO,EAAWD,EACf,MAAME,EAAYhrH,KAAKsqH,QACvB,IAAIW,EAAYD,EAAY,EAC5B,MAAME,EAAWJ,EAASL,UACpB/qB,EAAUwrB,EAASF,GAazB,OAtEqB,QA0DjBC,IACAF,EAAWD,EAAStsE,MACpBysE,EAAY,KAGdjrH,KAAKuqH,MACPvqH,KAAKsqH,QAAUW,EACXH,IAAaC,IACb/qH,KAAKwqH,OAASO,GAGlBG,EAASF,QAAa3+G,EACfqzF,CACX,CASA,OAAAnL,CAAQtgF,GACJ,IAAInQ,EAAI9D,KAAKsqH,QACTrhC,EAAOjpF,KAAKwqH,OACZU,EAAWjiC,EAAKwhC,UACpB,OAAO3mH,IAAMonH,EAASnnH,aAAyBsI,IAAf48E,EAAKzqC,OAC7B16C,IAAMonH,EAASnnH,SACfklF,EAAOA,EAAKzqC,MACZ0sE,EAAWjiC,EAAKwhC,UAChB3mH,EAAI,EACoB,IAApBonH,EAASnnH,UAIjBkQ,EAASi3G,EAASpnH,MAChBA,CAEV,CAGA,IAAAqnH,GACI,MAAMC,EAAQprH,KAAKwqH,OACba,EAASrrH,KAAKsqH,QACpB,OAAOc,EAAMX,UAAUY,EAC3B,EAGJ,SAASC,EAAsCC,EAAQxR,GACnDwR,EAAOC,qBAAuBzR,EAC9BA,EAAO0R,QAAUF,EACK,aAAlBxR,EAAO7+B,OACPwwC,EAAqCH,GAEd,WAAlBxR,EAAO7+B,OAsCpB,SAAwDqwC,GACpDG,EAAqCH,GACrCI,EAAkCJ,EACtC,CAxCQK,CAA+CL,GAG/CM,EAA+CN,EAAQxR,EAAO+R,aAEtE,CAGA,SAASC,EAAkCR,EAAQ1tG,GAE/C,OAAOmuG,GADQT,EAAOC,qBACc3tG,EACxC,CACA,SAASouG,EAAmCV,GACG,aAAvCA,EAAOC,qBAAqBtwC,OAC5BgxC,EAAiCX,EAAQ,IAAItqC,UAAU,qFAoC/D,SAAmDsqC,GAC/CM,EAA+CN,EAlCO,IAAItqC,UAAU,oFAmCxE,CAnCQkrC,CAA0CZ,GAE9CA,EAAOC,qBAAqBC,aAAUp/G,EACtCk/G,EAAOC,0BAAuBn/G,CAClC,CAEA,SAAS+/G,EAAoB3pH,GACzB,OAAO,IAAIw+E,UAAU,UAAYx+E,EAAO,oCAC5C,CAEA,SAASipH,EAAqCH,GAC1CA,EAAOc,eAAiBzxC,EAAW,CAAC5tD,EAASk1B,KACzCqpE,EAAOe,uBAAyBt/F,EAChCu+F,EAAOgB,sBAAwBrqE,GAEvC,CACA,SAAS2pE,EAA+CN,EAAQ1tG,GAC5D6tG,EAAqCH,GACrCW,EAAiCX,EAAQ1tG,EAC7C,CAKA,SAASquG,EAAiCX,EAAQ1tG,QACTxR,IAAjCk/G,EAAOgB,wBAGX1C,EAA0B0B,EAAOc,gBACjCd,EAAOgB,sBAAsB1uG,GAC7B0tG,EAAOe,4BAAyBjgH,EAChCk/G,EAAOgB,2BAAwBlgH,EACnC,CAIA,SAASs/G,EAAkCJ,QACDl/G,IAAlCk/G,EAAOe,yBAGXf,EAAOe,4BAAuBjgH,GAC9Bk/G,EAAOe,4BAAyBjgH,EAChCk/G,EAAOgB,2BAAwBlgH,EACnC,CAEA,MAAMmgH,EAAajE,EAAe,kBAC5BkE,EAAalE,EAAe,kBAC5BmE,EAAcnE,EAAe,mBAC7BoE,EAAYpE,EAAe,iBAI3BqE,EAAiBC,OAAOC,UAAY,SAAUlE,GAChD,MAAoB,iBAANA,GAAkBkE,SAASlE,EAC7C,EAIMmE,EAAYrgH,KAAKsgH,OAAS,SAAUjqG,GACtC,OAAOA,EAAI,EAAIrW,KAAKugH,KAAKlqG,GAAKrW,KAAKkhG,MAAM7qF,EAC7C,EAMA,SAASmqG,EAAiB3pH,EAAKg7C,GAC3B,QAAYlyC,IAAR9I,GAHgB,iBADFqlH,EAIqBrlH,IAHM,mBAANqlH,EAInC,MAAM,IAAI3nC,UAAU,GAAG1iC,uBAL/B,IAAsBqqE,CAOtB,CAEA,SAASuE,EAAevE,EAAGrqE,GACvB,GAAiB,mBAANqqE,EACP,MAAM,IAAI3nC,UAAU,GAAG1iC,uBAE/B,CAKA,SAAS6uE,EAAaxE,EAAGrqE,GACrB,IAJJ,SAAkBqqE,GACd,MAAqB,iBAANA,GAAwB,OAANA,GAA4B,mBAANA,CAC3D,CAES3oC,CAAS2oC,GACV,MAAM,IAAI3nC,UAAU,GAAG1iC,sBAE/B,CACA,SAAS8uE,EAAuBzE,EAAGt6B,EAAU/vC,GACzC,QAAUlyC,IAANu8G,EACA,MAAM,IAAI3nC,UAAU,aAAaqN,qBAA4B/vC,MAErE,CACA,SAAS+uE,EAAoB1E,EAAGpxE,EAAO+G,GACnC,QAAUlyC,IAANu8G,EACA,MAAM,IAAI3nC,UAAU,GAAGzpC,qBAAyB+G,MAExD,CAEA,SAASgvE,EAA0BprH,GAC/B,OAAO0qH,OAAO1qH,EAClB,CACA,SAASqrH,EAAmB5E,GACxB,OAAa,IAANA,EAAU,EAAIA,CACzB,CAKA,SAAS6E,EAAwCtrH,EAAOo8C,GACpD,MACMmvE,EAAab,OAAOc,iBAC1B,IAAI/E,EAAIiE,OAAO1qH,GAEf,GADAymH,EAAI4E,EAAmB5E,IAClBgE,EAAehE,GAChB,MAAM,IAAI3nC,UAAU,GAAG1iC,4BAG3B,GADAqqE,EAZJ,SAAqBA,GACjB,OAAO4E,EAAmBT,EAAUnE,GACxC,CAUQgF,CAAYhF,GACZA,EARe,GAQGA,EAAI8E,EACtB,MAAM,IAAIzsC,UAAU,GAAG1iC,2CAA6DmvE,gBAExF,OAAKd,EAAehE,IAAY,IAANA,EAOnBA,EANI,CAOf,CAEA,SAASiF,EAAqBjF,EAAGrqE,GAC7B,IAAKuvE,GAAiBlF,GAClB,MAAM,IAAI3nC,UAAU,GAAG1iC,6BAE/B,CAGA,SAASwvE,EAAmChU,GACxC,OAAO,IAAIiU,EAA4BjU,EAC3C,CAEA,SAASkU,EAA6BlU,EAAQmU,GAC1CnU,EAAO0R,QAAQ0C,cAAcp+G,KAAKm+G,EACtC,CACA,SAASE,EAAiCrU,EAAQ9zD,EAAO7d,GACrD,MACM8lF,EADSnU,EAAO0R,QACK0C,cAAcnyG,QACrCosB,EACA8lF,EAAYG,cAGZH,EAAYI,YAAYroE,EAEhC,CACA,SAASsoE,EAAiCxU,GACtC,OAAOA,EAAO0R,QAAQ0C,cAAcpqH,MACxC,CACA,SAASyqH,EAA+BzU,GACpC,MAAMwR,EAASxR,EAAO0R,QACtB,YAAep/G,IAAXk/G,KAGCkD,EAA8BlD,EAIvC,CAMA,MAAMyC,EACF,WAAAhiE,CAAY+tD,GAGR,GAFAsT,EAAuBtT,EAAQ,EAAG,+BAClC8T,EAAqB9T,EAAQ,mBACzB2U,GAAuB3U,GACvB,MAAM,IAAI94B,UAAU,+EAExBqqC,EAAsCtrH,KAAM+5G,GAC5C/5G,KAAKmuH,cAAgB,IAAI9D,CAC7B,CAKA,UAAIsE,GACA,OAAKF,EAA8BzuH,MAG5BA,KAAKqsH,eAFDlD,EAAoByF,GAAiC,UAGpE,CAIA,MAAArlG,CAAO1L,OAASxR,GACZ,OAAKoiH,EAA8BzuH,WAGDqM,IAA9BrM,KAAKwrH,qBACErC,EAAoBiD,EAAoB,WAE5CL,EAAkC/rH,KAAM6d,GALpCsrG,EAAoByF,GAAiC,UAMpE,CAMA,IAAAjpE,GACI,IAAK8oE,EAA8BzuH,MAC/B,OAAOmpH,EAAoByF,GAAiC,SAEhE,QAAkCviH,IAA9BrM,KAAKwrH,qBACL,OAAOrC,EAAoBiD,EAAoB,cAEnD,IAAIyC,EACAC,EACJ,MAAMzF,EAAUzuC,EAAW,CAAC5tD,EAASk1B,KACjC2sE,EAAiB7hG,EACjB8hG,EAAgB5sE,IAQpB,OADA6sE,EAAgC/uH,KALZ,CAChBsuH,YAAaroE,GAAS4oE,EAAe,CAAE1sH,MAAO8jD,EAAO7d,MAAM,IAC3DimF,YAAa,IAAMQ,EAAe,CAAE1sH,WAAOkK,EAAW+7B,MAAM,IAC5D4mF,YAAaxuH,GAAKsuH,EAActuH,KAG7B6oH,CACX,CAUA,WAAA4F,GACI,IAAKR,EAA8BzuH,MAC/B,MAAM4uH,GAAiC,eAE3C,QAAkCviH,IAA9BrM,KAAKwrH,qBAAT,CAGA,GAAIxrH,KAAKmuH,cAAcpqH,OAAS,EAC5B,MAAM,IAAIk9E,UAAU,uFAExBgrC,EAAmCjsH,KAJnC,CAKJ,EAeJ,SAASyuH,EAA8B7F,GACnC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,kBAGtCA,aAAaoF,CACxB,CACA,SAASe,EAAgCxD,EAAQ2C,GAC7C,MAAMnU,EAASwR,EAAOC,qBACtBzR,EAAOmV,YAAa,EACE,WAAlBnV,EAAO7+B,OACPgzC,EAAYG,cAEW,YAAlBtU,EAAO7+B,OACZgzC,EAAYc,YAAYjV,EAAO+R,cAG/B/R,EAAOoV,0BAA0BxC,GAAWuB,EAEpD,CAEA,SAASU,GAAiCnsH,GACtC,OAAO,IAAIw+E,UAAU,yCAAyCx+E,sDAClE,CAtCAs3C,OAAOq1E,iBAAiBpB,EAA4Bv5D,UAAW,CAC3DlrC,OAAQ,CAAE05D,YAAY,GACtBt9B,KAAM,CAAEs9B,YAAY,GACpBgsC,YAAa,CAAEhsC,YAAY,GAC3B0rC,OAAQ,CAAE1rC,YAAY,KAEgB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe4vB,EAA4Bv5D,UAAW8zD,EAAe3jC,YAAa,CACrFziF,MAAO,8BACPokF,cAAc,IAiCtB,MAAM8oC,GAAyBt1E,OAAOu1E,eAAev1E,OAAOu1E,eAAer6B,kBAAqB,GAAGxgC,WAGnG,MAAM86D,GACF,WAAAvjE,CAAYu/D,EAAQiE,GAChBxvH,KAAKyvH,qBAAkBpjH,EACvBrM,KAAK0vH,aAAc,EACnB1vH,KAAKyrH,QAAUF,EACfvrH,KAAK2vH,eAAiBH,CAC1B,CACA,IAAA/lF,GACI,MAAMmmF,EAAY,IAAM5vH,KAAK6vH,aAI7B,OAHA7vH,KAAKyvH,gBAAkBzvH,KAAKyvH,gBACxB/F,EAAqB1pH,KAAKyvH,gBAAiBG,EAAWA,GACtDA,IACG5vH,KAAKyvH,eAChB,CACA,OAAOttH,GACH,MAAM2tH,EAAc,IAAM9vH,KAAK+vH,aAAa5tH,GAC5C,OAAOnC,KAAKyvH,gBACR/F,EAAqB1pH,KAAKyvH,gBAAiBK,EAAaA,GACxDA,GACR,CACA,UAAAD,GACI,GAAI7vH,KAAK0vH,YACL,OAAOl8B,QAAQxmE,QAAQ,CAAE7qB,WAAOkK,EAAW+7B,MAAM,IAErD,MAAMmjF,EAASvrH,KAAKyrH,QACpB,QAAoCp/G,IAAhCk/G,EAAOC,qBACP,OAAOrC,EAAoBiD,EAAoB,YAEnD,IAAIyC,EACAC,EACJ,MAAMzF,EAAUzuC,EAAW,CAAC5tD,EAASk1B,KACjC2sE,EAAiB7hG,EACjB8hG,EAAgB5sE,IAuBpB,OADA6sE,EAAgCxD,EApBZ,CAChB+C,YAAaroE,IACTjmD,KAAKyvH,qBAAkBpjH,EAGvBy9G,EAAe,IAAM+E,EAAe,CAAE1sH,MAAO8jD,EAAO7d,MAAM,MAE9DimF,YAAa,KACTruH,KAAKyvH,qBAAkBpjH,EACvBrM,KAAK0vH,aAAc,EACnBzD,EAAmCV,GACnCsD,EAAe,CAAE1sH,WAAOkK,EAAW+7B,MAAM,KAE7C4mF,YAAanxG,IACT7d,KAAKyvH,qBAAkBpjH,EACvBrM,KAAK0vH,aAAc,EACnBzD,EAAmCV,GACnCuD,EAAcjxG,MAIfwrG,CACX,CACA,YAAA0G,CAAa5tH,GACT,GAAInC,KAAK0vH,YACL,OAAOl8B,QAAQxmE,QAAQ,CAAE7qB,QAAOimC,MAAM,IAE1CpoC,KAAK0vH,aAAc,EACnB,MAAMnE,EAASvrH,KAAKyrH,QACpB,QAAoCp/G,IAAhCk/G,EAAOC,qBACP,OAAOrC,EAAoBiD,EAAoB,qBAEnD,IAAKpsH,KAAK2vH,eAAgB,CACtB,MAAM5jH,EAASggH,EAAkCR,EAAQppH,GAEzD,OADA8pH,EAAmCV,GAC5B7B,EAAqB39G,EAAQ,KAAM,CAAG5J,QAAOimC,MAAM,IAC9D,CAEA,OADA6jF,EAAmCV,GAC5BrC,EAAoB,CAAE/mH,QAAOimC,MAAM,GAC9C,EAEJ,MAAM4nF,GAAuC,CACzC,IAAAvmF,GACI,OAAKwmF,GAA8BjwH,MAG5BA,KAAKkwH,mBAAmBzmF,OAFpB0/E,EAAoBgH,GAAuC,QAG1E,EACA,OAAOhuH,GACH,OAAK8tH,GAA8BjwH,MAG5BA,KAAKkwH,mBAAmB/lC,OAAOhoF,GAF3BgnH,EAAoBgH,GAAuC,UAG1E,GAaJ,SAASF,GAA8BrH,GACnC,IAAKD,EAAaC,GACd,OAAO,EAEX,IAAK7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,sBACzC,OAAO,EAEX,IAEI,OAAOA,EAAEsH,8BACLX,EACR,CACA,MAAO1tH,GACH,OAAO,CACX,CACJ,CAEA,SAASsuH,GAAuC1tH,GAC5C,OAAO,IAAIw+E,UAAU,+BAA+Bx+E,qDACxD,MA9B+B4J,IAA3BgjH,IACAt1E,OAAOq2E,eAAeJ,GAAsCX,IAiChE,MAAMgB,GAAcxD,OAAOh9D,OAAS,SAAU+4D,GAE1C,OAAOA,GAAMA,CACjB,EAEA,SAAS0H,GAAoBpF,GAGzB,OAAOA,EAASr7G,OACpB,CACA,SAAS0gH,GAAmBC,EAAMC,EAAYx4E,EAAKy4E,EAAWt/F,GAC1D,IAAI00B,WAAW0qE,GAAMx8G,IAAI,IAAI8xC,WAAW7N,EAAKy4E,EAAWt/F,GAAIq/F,EAChE,CAUA,SAASE,GAAiBvrD,EAAQwrD,EAAOlmC,GAGrC,GAAItlB,EAAOv1D,MACP,OAAOu1D,EAAOv1D,MAAM+gH,EAAOlmC,GAE/B,MAAM3mF,EAAS2mF,EAAMkmC,EACf/gH,EAAQ,IAAIqoF,YAAYn0F,GAE9B,OADAwsH,GAAmB1gH,EAAO,EAAGu1D,EAAQwrD,EAAO7sH,GACrC8L,CACX,CAcA,SAASghH,GAAkBC,GACvB,MAAM1rD,EAASurD,GAAiBG,EAAE1rD,OAAQ0rD,EAAEC,WAAYD,EAAEC,WAAaD,EAAE37B,YACzE,OAAO,IAAIrvC,WAAWsf,EAC1B,CAEA,SAAS4rD,GAAaC,GAClB,MAAM7+E,EAAO6+E,EAAU71C,OAAOp/D,QAK9B,OAJAi1G,EAAUC,iBAAmB9+E,EAAK+jB,KAC9B86D,EAAUC,gBAAkB,IAC5BD,EAAUC,gBAAkB,GAEzB9+E,EAAKjwC,KAChB,CACA,SAASgvH,GAAqBF,EAAW9uH,EAAOg0D,GAC5C,GAzBiB,iBADQpzC,EA0BAozC,IAtBrBk6D,GAAYttG,IAGZA,EAAI,GAmB0BozC,IAASi7D,IACvC,MAAM,IAAIC,WAAW,wDA3B7B,IAA6BtuG,EA6BzBkuG,EAAU71C,OAAOrrE,KAAK,CAAE5N,QAAOg0D,SAC/B86D,EAAUC,iBAAmB/6D,CACjC,CAKA,SAASm7D,GAAWL,GAChBA,EAAU71C,OAAS,IAAIivC,EACvB4G,EAAUC,gBAAkB,CAChC,CAOA,MAAMK,GACF,WAAAvlE,GACI,MAAM,IAAIi1B,UAAU,sBACxB,CAIA,QAAIuvB,GACA,IAAKghB,GAA4BxxH,MAC7B,MAAMyxH,GAA+B,QAEzC,OAAOzxH,KAAK0xH,KAChB,CACA,OAAAC,CAAQC,GACJ,IAAKJ,GAA4BxxH,MAC7B,MAAMyxH,GAA+B,WAIzC,GAFApE,EAAuBuE,EAAc,EAAG,WACxCA,EAAenE,EAAwCmE,EAAc,wBAChBvlH,IAAjDrM,KAAK6xH,wCACL,MAAM,IAAI5wC,UAAU,0CAEHjhF,KAAK0xH,MAAMtsD,OAChC0sD,GAAoC9xH,KAAK6xH,wCAAyCD,EACtF,CACA,kBAAAG,CAAmBvhB,GACf,IAAKghB,GAA4BxxH,MAC7B,MAAMyxH,GAA+B,sBAGzC,GADApE,EAAuB7c,EAAM,EAAG,uBAC3BtY,YAAY85B,OAAOxhB,GACpB,MAAM,IAAIvvB,UAAU,gDAExB,QAAqD50E,IAAjDrM,KAAK6xH,wCACL,MAAM,IAAI5wC,UAAU,0CAEHuvB,EAAKprC,OAC1B6sD,GAA+CjyH,KAAK6xH,wCAAyCrhB,EACjG,EAEJz2D,OAAOq1E,iBAAiBmC,GAA0B98D,UAAW,CACzDk9D,QAAS,CAAE1uC,YAAY,GACvB8uC,mBAAoB,CAAE9uC,YAAY,GAClCutB,KAAM,CAAEvtB,YAAY,KAEkB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAemzB,GAA0B98D,UAAW8zD,EAAe3jC,YAAa,CACnFziF,MAAO,4BACPokF,cAAc,IAQtB,MAAM2rC,GACF,WAAAlmE,GACI,MAAM,IAAIi1B,UAAU,sBACxB,CAIA,eAAIkxC,GACA,IAAKC,GAA+BpyH,MAChC,MAAMqyH,GAAwC,eAElD,OAAOC,GAA2CtyH,KACtD,CAKA,eAAIuyH,GACA,IAAKH,GAA+BpyH,MAChC,MAAMqyH,GAAwC,eAElD,OAAOG,GAA2CxyH,KACtD,CAKA,KAAAqlD,GACI,IAAK+sE,GAA+BpyH,MAChC,MAAMqyH,GAAwC,SAElD,GAAIryH,KAAKyyH,gBACL,MAAM,IAAIxxC,UAAU,8DAExB,MAAM1wD,EAAQvwB,KAAK0yH,8BAA8Bx3C,OACjD,GAAc,aAAV3qD,EACA,MAAM,IAAI0wD,UAAU,kBAAkB1wD,8DAE1CoiG,GAAkC3yH,KACtC,CACA,OAAAklD,CAAQe,GACJ,IAAKmsE,GAA+BpyH,MAChC,MAAMqyH,GAAwC,WAGlD,GADAhF,EAAuBpnE,EAAO,EAAG,YAC5BiyC,YAAY85B,OAAO/rE,GACpB,MAAM,IAAIg7B,UAAU,sCAExB,GAAyB,IAArBh7B,EAAMkvC,WACN,MAAM,IAAIlU,UAAU,uCAExB,GAAgC,IAA5Bh7B,EAAMmf,OAAO+vB,WACb,MAAM,IAAIlU,UAAU,gDAExB,GAAIjhF,KAAKyyH,gBACL,MAAM,IAAIxxC,UAAU,gCAExB,MAAM1wD,EAAQvwB,KAAK0yH,8BAA8Bx3C,OACjD,GAAc,aAAV3qD,EACA,MAAM,IAAI0wD,UAAU,kBAAkB1wD,mEAE1CqiG,GAAoC5yH,KAAMimD,EAC9C,CAIA,KAAA1F,CAAM//C,OAAI6L,GACN,IAAK+lH,GAA+BpyH,MAChC,MAAMqyH,GAAwC,SAElDQ,GAAkC7yH,KAAMQ,EAC5C,CAEA,CAACksH,GAAa7uG,GACVi1G,GAAkD9yH,MAClDsxH,GAAWtxH,MACX,MAAM+L,EAAS/L,KAAK+yH,iBAAiBl1G,GAErC,OADAm1G,GAA4ChzH,MACrC+L,CACX,CAEA,CAAC4gH,GAAWuB,GACR,MAAMnU,EAAS/5G,KAAK0yH,8BACpB,GAAI1yH,KAAKkxH,gBAAkB,EAAG,CAC1B,MAAMp+D,EAAQ9yD,KAAKo7E,OAAOp/D,QAC1Bhc,KAAKkxH,iBAAmBp+D,EAAMqiC,WAC9B89B,GAA6CjzH,MAC7C,MAAMwwG,EAAO,IAAI1qD,WAAWgN,EAAMsS,OAAQtS,EAAMi+D,WAAYj+D,EAAMqiC,YAElE,YADA+4B,EAAYI,YAAY9d,EAE5B,CACA,MAAM0iB,EAAwBlzH,KAAKmzH,uBACnC,QAA8B9mH,IAA1B6mH,EAAqC,CACrC,IAAI9tD,EACJ,IACIA,EAAS,IAAI8yB,YAAYg7B,EAC7B,CACA,MAAOE,GAEH,YADAlF,EAAYc,YAAYoE,EAE5B,CACA,MAAMC,EAAqB,CACvBjuD,SACAkuD,iBAAkBJ,EAClBnC,WAAY,EACZ57B,WAAY+9B,EACZK,YAAa,EACbC,YAAa,EACbC,gBAAiB3tE,WACjB4tE,WAAY,WAEhB1zH,KAAK2zH,kBAAkB5jH,KAAKsjH,EAChC,CACApF,EAA6BlU,EAAQmU,GACrC0F,GAA6C5zH,KACjD,EAgBJ,SAASoyH,GAA+BxJ,GACpC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,kCAGtCA,aAAasJ,EACxB,CACA,SAASV,GAA4B5I,GACjC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,4CAGtCA,aAAa2I,EACxB,CACA,SAASqC,GAA6C3uE,GAClD,MAAM4uE,EA6MV,SAAoD5uE,GAChD,MAAM80D,EAAS90D,EAAWytE,8BAC1B,GAAsB,aAAlB3Y,EAAO7+B,OACP,OAAO,EAEX,GAAIj2B,EAAWwtE,gBACX,OAAO,EAEX,IAAKxtE,EAAW6uE,SACZ,OAAO,EAEX,GAAItF,EAA+BzU,IAAWwU,EAAiCxU,GAAU,EACrF,OAAO,EAEX,GAAIga,GAA4Bha,IAAWia,GAAqCja,GAAU,EACtF,OAAO,EAGX,OADoByY,GAA2CvtE,GAC7C,CAItB,CAnOuBgvE,CAA2ChvE,GACzD4uE,IAGD5uE,EAAWivE,SACXjvE,EAAWkvE,YAAa,GAG5BlvE,EAAWivE,UAAW,EAGtB3K,EADoBtkE,EAAWmvE,iBACN,KACrBnvE,EAAWivE,UAAW,EAClBjvE,EAAWkvE,aACXlvE,EAAWkvE,YAAa,EACxBP,GAA6C3uE,KAElDzkD,IACCqyH,GAAkC5tE,EAAYzkD,MAEtD,CACA,SAASsyH,GAAkD7tE,GACvDovE,GAAkDpvE,GAClDA,EAAW0uE,kBAAoB,IAAItJ,CACvC,CACA,SAASiK,GAAqDva,EAAQsZ,GAClE,IAAIjrF,GAAO,EACW,WAAlB2xE,EAAO7+B,SACP9yC,GAAO,GAEX,MAAMmsF,EAAaC,GAAsDnB,GACnC,YAAlCA,EAAmBK,WACnBtF,EAAiCrU,EAAQwa,EAAYnsF,GA8Y7D,SAA8C2xE,EAAQ9zD,EAAO7d,GACzD,MACMqsF,EADS1a,EAAO0R,QACSiJ,kBAAkB14G,QAC7CosB,EACAqsF,EAAgBpG,YAAYpoE,GAG5BwuE,EAAgBnG,YAAYroE,EAEpC,CApZQ0uE,CAAqC5a,EAAQwa,EAAYnsF,EAEjE,CACA,SAASosF,GAAsDnB,GAC3D,MAAME,EAAcF,EAAmBE,YACjCC,EAAcH,EAAmBG,YACvC,OAAO,IAAIH,EAAmBI,gBAAgBJ,EAAmBjuD,OAAQiuD,EAAmBtC,WAAYwC,EAAcC,EAC1H,CACA,SAASoB,GAAgD3vE,EAAYmgB,EAAQ2rD,EAAY57B,GACrFlwC,EAAWm2B,OAAOrrE,KAAK,CAAEq1D,SAAQ2rD,aAAY57B,eAC7ClwC,EAAWisE,iBAAmB/7B,CAClC,CACA,SAAS0/B,GAA4D5vE,EAAYouE,GAC7E,MAAMG,EAAcH,EAAmBG,YACjCsB,EAAsBzB,EAAmBE,YAAcF,EAAmBE,YAAcC,EACxFuB,EAAiBroH,KAAKgC,IAAIu2C,EAAWisE,gBAAiBmC,EAAmBl+B,WAAak+B,EAAmBE,aACzGyB,EAAiB3B,EAAmBE,YAAcwB,EAClDE,EAAkBD,EAAiBA,EAAiBxB,EAC1D,IAAI0B,EAA4BH,EAC5BI,GAAQ,EACRF,EAAkBH,IAClBI,EAA4BD,EAAkB5B,EAAmBE,YACjE4B,GAAQ,GAEZ,MAAM10F,EAAQwkB,EAAWm2B,OACzB,KAAO85C,EAA4B,GAAG,CAClC,MAAME,EAAc30F,EAAM0qF,OACpBkK,EAAc3oH,KAAKgC,IAAIwmH,EAA2BE,EAAYjgC,YAC9DmgC,EAAYjC,EAAmBtC,WAAasC,EAAmBE,YACrEhD,GAAmB8C,EAAmBjuD,OAAQkwD,EAAWF,EAAYhwD,OAAQgwD,EAAYrE,WAAYsE,GACjGD,EAAYjgC,aAAekgC,EAC3B50F,EAAMzkB,SAGNo5G,EAAYrE,YAAcsE,EAC1BD,EAAYjgC,YAAckgC,GAE9BpwE,EAAWisE,iBAAmBmE,EAC9BE,GAAuDtwE,EAAYowE,EAAahC,GAChF6B,GAA6BG,CACjC,CACA,OAAOF,CACX,CACA,SAASI,GAAuDtwE,EAAYkR,EAAMk9D,GAC9EA,EAAmBE,aAAep9D,CACtC,CACA,SAAS88D,GAA6ChuE,GACf,IAA/BA,EAAWisE,iBAAyBjsE,EAAWwtE,iBAC/CO,GAA4C/tE,GAC5CuwE,GAAoBvwE,EAAWytE,gCAG/BkB,GAA6C3uE,EAErD,CACA,SAASovE,GAAkDpvE,GACvB,OAA5BA,EAAWwwE,eAGfxwE,EAAWwwE,aAAa5D,6CAA0CxlH,EAClE44C,EAAWwwE,aAAa/D,MAAQ,KAChCzsE,EAAWwwE,aAAe,KAC9B,CACA,SAASC,GAAiEzwE,GACtE,KAAOA,EAAW0uE,kBAAkB5vH,OAAS,GAAG,CAC5C,GAAmC,IAA/BkhD,EAAWisE,gBACX,OAEJ,MAAMmC,EAAqBpuE,EAAW0uE,kBAAkBxI,OACpD0J,GAA4D5vE,EAAYouE,KACxEsC,GAAiD1wE,GACjDqvE,GAAqDrvE,EAAWytE,8BAA+BW,GAEvG,CACJ,CAgFA,SAASuC,GAA4C3wE,EAAY2sE,GAC7D,MAAMiE,EAAkB5wE,EAAW0uE,kBAAkBxI,OACrDkJ,GAAkDpvE,GAEpC,WADAA,EAAWytE,8BAA8Bx3C,OA5B3D,SAA0Dj2B,GACtD,MAAM80D,EAAS90D,EAAWytE,8BAC1B,GAAIqB,GAA4Bha,GAC5B,KAAOia,GAAqCja,GAAU,GAElDua,GAAqDva,EAD1B4b,GAAiD1wE,GAIxF,CAsBQ6wE,CAAiD7wE,GArBzD,SAA4DA,EAAY2sE,EAAcyB,GAElF,GADAkC,GAAuDtwE,EAAY2sE,EAAcyB,GAC7EA,EAAmBE,YAAcF,EAAmBG,YACpD,OAEJmC,GAAiD1wE,GACjD,MAAM8wE,EAAgB1C,EAAmBE,YAAcF,EAAmBG,YAC1E,GAAIuC,EAAgB,EAAG,CACnB,MAAMrrC,EAAM2oC,EAAmBtC,WAAasC,EAAmBE,YACzDyC,EAAYrF,GAAiB0C,EAAmBjuD,OAAQslB,EAAMqrC,EAAerrC,GACnFkqC,GAAgD3vE,EAAY+wE,EAAW,EAAGA,EAAU7gC,WACxF,CACAk+B,EAAmBE,aAAewC,EAClCzB,GAAqDrvE,EAAWytE,8BAA+BW,GAC/FqC,GAAiEzwE,EACrE,CASQgxE,CAAmDhxE,EAAY2sE,EAAciE,GAEjFjC,GAA6C3uE,EACjD,CACA,SAAS0wE,GAAiD1wE,GAEtD,OADmBA,EAAW0uE,kBAAkB33G,OAEpD,CAwBA,SAASg3G,GAA4C/tE,GACjDA,EAAWmvE,oBAAiB/nH,EAC5B44C,EAAW8tE,sBAAmB1mH,CAClC,CAEA,SAASsmH,GAAkC1tE,GACvC,MAAM80D,EAAS90D,EAAWytE,8BAC1B,IAAIztE,EAAWwtE,iBAAqC,aAAlB1Y,EAAO7+B,OAGzC,GAAIj2B,EAAWisE,gBAAkB,EAC7BjsE,EAAWwtE,iBAAkB,MADjC,CAIA,GAAIxtE,EAAW0uE,kBAAkB5vH,OAAS,GACTkhD,EAAW0uE,kBAAkBxI,OACjCoI,YAAc,EAAG,CACtC,MAAM/yH,EAAI,IAAIygF,UAAU,2DAExB,MADA4xC,GAAkC5tE,EAAYzkD,GACxCA,CACV,CAEJwyH,GAA4C/tE,GAC5CuwE,GAAoBzb,EAVpB,CAWJ,CACA,SAAS6Y,GAAoC3tE,EAAYgB,GACrD,MAAM8zD,EAAS90D,EAAWytE,8BAC1B,GAAIztE,EAAWwtE,iBAAqC,aAAlB1Y,EAAO7+B,OACrC,OAEJ,MAAM9V,EAASnf,EAAMmf,OACf2rD,EAAa9qE,EAAM8qE,WACnB57B,EAAalvC,EAAMkvC,WACnB+gC,EAAwC9wD,EAC9C,GAAIngB,EAAW0uE,kBAAkB5vH,OAAS,EAAG,CACzC,MAAMoyH,EAAuBlxE,EAAW0uE,kBAAkBxI,OACrCgL,EAAqB/wD,OAC1C+wD,EAAqB/wD,OAA6B+wD,EAAqB/wD,MAC3E,CACAivD,GAAkDpvE,GAC9CupE,EAA+BzU,GACkB,IAA7CwU,EAAiCxU,GACjC6a,GAAgD3vE,EAAYixE,EAAmBnF,EAAY57B,IAGvFlwC,EAAW0uE,kBAAkB5vH,OAAS,GACtC4xH,GAAiD1wE,GAGrDmpE,EAAiCrU,EADT,IAAIj0D,WAAWowE,EAAmBnF,EAAY57B,IACZ,IAGzD4+B,GAA4Bha,IAEjC6a,GAAgD3vE,EAAYixE,EAAmBnF,EAAY57B,GAC3FugC,GAAiEzwE,IAGjE2vE,GAAgD3vE,EAAYixE,EAAmBnF,EAAY57B,GAE/Fy+B,GAA6C3uE,EACjD,CACA,SAAS4tE,GAAkC5tE,EAAYzkD,GACnD,MAAMu5G,EAAS90D,EAAWytE,8BACJ,aAAlB3Y,EAAO7+B,SAGX43C,GAAkD7tE,GAClDqsE,GAAWrsE,GACX+tE,GAA4C/tE,GAC5CmxE,GAAoBrc,EAAQv5G,GAChC,CACA,SAAS8xH,GAA2CrtE,GAChD,GAAgC,OAA5BA,EAAWwwE,cAAyBxwE,EAAW0uE,kBAAkB5vH,OAAS,EAAG,CAC7E,MAAM8xH,EAAkB5wE,EAAW0uE,kBAAkBxI,OAC/C3a,EAAO,IAAI1qD,WAAW+vE,EAAgBzwD,OAAQywD,EAAgB9E,WAAa8E,EAAgBtC,YAAasC,EAAgB1gC,WAAa0gC,EAAgBtC,aACrJpB,EAAcp4E,OAAO9uC,OAAOsmH,GAA0B98D,YAyGpE,SAAwCx6C,EAASgrC,EAAYurD,GACzDv2F,EAAQ43G,wCAA0C5sE,EAClDhrC,EAAQy3G,MAAQlhB,CACpB,CA3GQ6lB,CAA+BlE,EAAaltE,EAAYurD,GACxDvrD,EAAWwwE,aAAetD,CAC9B,CACA,OAAOltE,EAAWwwE,YACtB,CACA,SAASjD,GAA2CvtE,GAChD,MAAM10B,EAAQ00B,EAAWytE,8BAA8Bx3C,OACvD,MAAc,YAAV3qD,EACO,KAEG,WAAVA,EACO,EAEJ00B,EAAWqxE,aAAerxE,EAAWisE,eAChD,CACA,SAASY,GAAoC7sE,EAAY2sE,GACrD,MAAMiE,EAAkB5wE,EAAW0uE,kBAAkBxI,OAErD,GAAc,WADAlmE,EAAWytE,8BAA8Bx3C,QAEnD,GAAqB,IAAjB02C,EACA,MAAM,IAAI3wC,UAAU,wEAGvB,CACD,GAAqB,IAAjB2wC,EACA,MAAM,IAAI3wC,UAAU,mFAExB,GAAI40C,EAAgBtC,YAAc3B,EAAeiE,EAAgB1gC,WAC7D,MAAM,IAAIk8B,WAAW,4BAE7B,CACAwE,EAAgBzwD,OAA6BywD,EAAgBzwD,OAC7DwwD,GAA4C3wE,EAAY2sE,EAC5D,CACA,SAASK,GAA+ChtE,EAAYurD,GAChE,MAAMqlB,EAAkB5wE,EAAW0uE,kBAAkBxI,OAErD,GAAc,WADAlmE,EAAWytE,8BAA8Bx3C,QAEnD,GAAwB,IAApBs1B,EAAKrb,WACL,MAAM,IAAIlU,UAAU,yFAIxB,GAAwB,IAApBuvB,EAAKrb,WACL,MAAM,IAAIlU,UAAU,mGAG5B,GAAI40C,EAAgB9E,WAAa8E,EAAgBtC,cAAgB/iB,EAAKugB,WAClE,MAAM,IAAIM,WAAW,2DAEzB,GAAIwE,EAAgBvC,mBAAqB9iB,EAAKprC,OAAO+vB,WACjD,MAAM,IAAIk8B,WAAW,8DAEzB,GAAIwE,EAAgBtC,YAAc/iB,EAAKrb,WAAa0gC,EAAgB1gC,WAChE,MAAM,IAAIk8B,WAAW,2DAEzB,MAAMkF,EAAiB/lB,EAAKrb,WAC5B0gC,EAAgBzwD,OAA6BorC,EAAKprC,OAClDwwD,GAA4C3wE,EAAYsxE,EAC5D,CACA,SAASC,GAAkCzc,EAAQ90D,EAAYwxE,EAAgBC,EAAeC,EAAiBC,EAAe1D,GAC1HjuE,EAAWytE,8BAAgC3Y,EAC3C90D,EAAWkvE,YAAa,EACxBlvE,EAAWivE,UAAW,EACtBjvE,EAAWwwE,aAAe,KAE1BxwE,EAAWm2B,OAASn2B,EAAWisE,qBAAkB7kH,EACjDilH,GAAWrsE,GACXA,EAAWwtE,iBAAkB,EAC7BxtE,EAAW6uE,UAAW,EACtB7uE,EAAWqxE,aAAeM,EAC1B3xE,EAAWmvE,eAAiBsC,EAC5BzxE,EAAW8tE,iBAAmB4D,EAC9B1xE,EAAWkuE,uBAAyBD,EACpCjuE,EAAW0uE,kBAAoB,IAAItJ,EACnCtQ,EAAOoV,0BAA4BlqE,EAEnCskE,EAAYL,EADQuN,KAC0B,KAC1CxxE,EAAW6uE,UAAW,EACtBF,GAA6C3uE,IAC9C4xE,IACChE,GAAkC5tE,EAAY4xE,IAEtD,CA0BA,SAASpF,GAA+BhvH,GACpC,OAAO,IAAIw+E,UAAU,uCAAuCx+E,oDAChE,CAEA,SAAS4vH,GAAwC5vH,GAC7C,OAAO,IAAIw+E,UAAU,0CAA0Cx+E,uDACnE,CAGA,SAASq0H,GAAgC/c,GACrC,OAAO,IAAIgd,GAAyBhd,EACxC,CAEA,SAASid,GAAiCjd,EAAQ0a,GAC9C1a,EAAO0R,QAAQiJ,kBAAkB3kH,KAAK0kH,EAC1C,CAWA,SAAST,GAAqCja,GAC1C,OAAOA,EAAO0R,QAAQiJ,kBAAkB3wH,MAC5C,CACA,SAASgwH,GAA4Bha,GACjC,MAAMwR,EAASxR,EAAO0R,QACtB,YAAep/G,IAAXk/G,KAGC0L,GAA2B1L,EAIpC,CAreAxxE,OAAOq1E,iBAAiB8C,GAA6Bz9D,UAAW,CAC5DpP,MAAO,CAAE49B,YAAY,GACrB/9B,QAAS,CAAE+9B,YAAY,GACvB1iC,MAAO,CAAE0iC,YAAY,GACrBkvC,YAAa,CAAElvC,YAAY,GAC3BsvC,YAAa,CAAEtvC,YAAY,KAEW,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe8zB,GAA6Bz9D,UAAW8zD,EAAe3jC,YAAa,CACtFziF,MAAO,+BACPokF,cAAc,IAietB,MAAMwwC,GACF,WAAA/qE,CAAY+tD,GAGR,GAFAsT,EAAuBtT,EAAQ,EAAG,4BAClC8T,EAAqB9T,EAAQ,mBACzB2U,GAAuB3U,GACvB,MAAM,IAAI94B,UAAU,+EAExB,IAAKmxC,GAA+BrY,EAAOoV,2BACvC,MAAM,IAAIluC,UAAU,+FAGxBqqC,EAAsCtrH,KAAM+5G,GAC5C/5G,KAAK00H,kBAAoB,IAAIrK,CACjC,CAKA,UAAIsE,GACA,OAAKsI,GAA2Bj3H,MAGzBA,KAAKqsH,eAFDlD,EAAoB+N,GAA8B,UAGjE,CAIA,MAAA3tG,CAAO1L,OAASxR,GACZ,OAAK4qH,GAA2Bj3H,WAGEqM,IAA9BrM,KAAKwrH,qBACErC,EAAoBiD,EAAoB,WAE5CL,EAAkC/rH,KAAM6d,GALpCsrG,EAAoB+N,GAA8B,UAMjE,CAMA,IAAAvxE,CAAK6qD,GACD,IAAKymB,GAA2Bj3H,MAC5B,OAAOmpH,EAAoB+N,GAA8B,SAE7D,IAAKh/B,YAAY85B,OAAOxhB,GACpB,OAAO2Y,EAAoB,IAAIloC,UAAU,sCAE7C,GAAwB,IAApBuvB,EAAKrb,WACL,OAAOg0B,EAAoB,IAAIloC,UAAU,uCAE7C,GAA+B,IAA3BuvB,EAAKprC,OAAO+vB,WACZ,OAAOg0B,EAAoB,IAAIloC,UAAU,gDAG7C,GADqBuvB,EAAKprC,YACQ/4D,IAA9BrM,KAAKwrH,qBACL,OAAOrC,EAAoBiD,EAAoB,cAEnD,IAAIyC,EACAC,EACJ,MAAMzF,EAAUzuC,EAAW,CAAC5tD,EAASk1B,KACjC2sE,EAAiB7hG,EACjB8hG,EAAgB5sE,IAQpB,OADAi1E,GAA6Bn3H,KAAMwwG,EALX,CACpB8d,YAAaroE,GAAS4oE,EAAe,CAAE1sH,MAAO8jD,EAAO7d,MAAM,IAC3DimF,YAAapoE,GAAS4oE,EAAe,CAAE1sH,MAAO8jD,EAAO7d,MAAM,IAC3D4mF,YAAaxuH,GAAKsuH,EAActuH,KAG7B6oH,CACX,CAUA,WAAA4F,GACI,IAAKgI,GAA2Bj3H,MAC5B,MAAMk3H,GAA8B,eAExC,QAAkC7qH,IAA9BrM,KAAKwrH,qBAAT,CAGA,GAAIxrH,KAAK00H,kBAAkB3wH,OAAS,EAChC,MAAM,IAAIk9E,UAAU,uFAExBgrC,EAAmCjsH,KAJnC,CAKJ,EAeJ,SAASi3H,GAA2BrO,GAChC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,sBAGtCA,aAAamO,EACxB,CACA,SAASI,GAA6B5L,EAAQ/a,EAAMikB,GAChD,MAAM1a,EAASwR,EAAOC,qBACtBzR,EAAOmV,YAAa,EACE,YAAlBnV,EAAO7+B,OACPu5C,EAAgBzF,YAAYjV,EAAO+R,cApd3C,SAA8C7mE,EAAYurD,EAAMikB,GAC5D,MAAM1a,EAAS90D,EAAWytE,8BAC1B,IAAIc,EAAc,EACdhjB,EAAKxkD,cAAgBorE,WACrB5D,EAAchjB,EAAKxkD,YAAYqrE,mBAEnC,MAAMC,EAAO9mB,EAAKxkD,YAEZoZ,EAA6BorC,EAAKprC,OAKlCiuD,EAAqB,CACvBjuD,SACAkuD,iBAAkBluD,EAAO+vB,WACzB47B,WAAYvgB,EAAKugB,WACjB57B,WAAYqb,EAAKrb,WACjBo+B,YAAa,EACbC,cACAC,gBAAiB6D,EACjB5D,WAAY,QAEhB,GAAIzuE,EAAW0uE,kBAAkB5vH,OAAS,EAMtC,OALAkhD,EAAW0uE,kBAAkB5jH,KAAKsjH,QAIlC2D,GAAiCjd,EAAQ0a,GAG7C,GAAsB,WAAlB1a,EAAO7+B,OAAqB,CAC5B,MAAMq8C,EAAY,IAAID,EAAKjE,EAAmBjuD,OAAQiuD,EAAmBtC,WAAY,GAErF,YADA0D,EAAgBpG,YAAYkJ,EAEhC,CACA,GAAItyE,EAAWisE,gBAAkB,EAAG,CAChC,GAAI2D,GAA4D5vE,EAAYouE,GAAqB,CAC7F,MAAMkB,EAAaC,GAAsDnB,GAGzE,OAFAJ,GAA6ChuE,QAC7CwvE,EAAgBnG,YAAYiG,EAEhC,CACA,GAAItvE,EAAWwtE,gBAAiB,CAC5B,MAAMjyH,EAAI,IAAIygF,UAAU,2DAGxB,OAFA4xC,GAAkC5tE,EAAYzkD,QAC9Ci0H,EAAgBzF,YAAYxuH,EAEhC,CACJ,CACAykD,EAAW0uE,kBAAkB5jH,KAAKsjH,GAClC2D,GAAiCjd,EAAQ0a,GACzCb,GAA6C3uE,EACjD,CAkaQuyE,CAAqCzd,EAAOoV,0BAA2B3e,EAAMikB,EAErF,CAEA,SAASyC,GAA8Bz0H,GACnC,OAAO,IAAIw+E,UAAU,sCAAsCx+E,mDAC/D,CAEA,SAASg1H,GAAqBC,EAAUC,GACpC,MAAM,cAAEf,GAAkBc,EAC1B,QAAsBrrH,IAAlBuqH,EACA,OAAOe,EAEX,GAAItH,GAAYuG,IAAkBA,EAAgB,EAC9C,MAAM,IAAIvF,WAAW,yBAEzB,OAAOuF,CACX,CACA,SAASgB,GAAqBF,GAC1B,MAAM,KAAEvhE,GAASuhE,EACjB,OAAKvhE,GACM,KAAM,EAGrB,CAEA,SAAS0hE,GAAuB30E,EAAM3E,GAClC2uE,EAAiBhqE,EAAM3E,GACvB,MAAMq4E,EAAgB1zE,aAAwC,EAAIA,EAAK0zE,cACjEzgE,EAAOjT,aAAwC,EAAIA,EAAKiT,KAC9D,MAAO,CACHygE,mBAAiCvqH,IAAlBuqH,OAA8BvqH,EAAYkhH,EAA0BqJ,GACnFzgE,UAAe9pD,IAAT8pD,OAAqB9pD,EAAYyrH,GAA2B3hE,EAAM,GAAG5X,4BAEnF,CACA,SAASu5E,GAA2BtmG,EAAI+sB,GAEpC,OADA4uE,EAAe37F,EAAI+sB,GACZ0H,GAASsnE,EAA0B/7F,EAAGy0B,GACjD,CAyBA,SAAS8xE,GAAmCvmG,EAAIwmG,EAAUz5E,GAEtD,OADA4uE,EAAe37F,EAAI+sB,GACX1gC,GAAWusG,EAAY54F,EAAIwmG,EAAU,CAACn6G,GAClD,CACA,SAASo6G,GAAmCzmG,EAAIwmG,EAAUz5E,GAEtD,OADA4uE,EAAe37F,EAAI+sB,GACZ,IAAM6rE,EAAY54F,EAAIwmG,EAAU,GAC3C,CACA,SAASE,GAAmC1mG,EAAIwmG,EAAUz5E,GAEtD,OADA4uE,EAAe37F,EAAI+sB,GACX0G,GAAeglE,EAAYz4F,EAAIwmG,EAAU,CAAC/yE,GACtD,CACA,SAASkzE,GAAmC3mG,EAAIwmG,EAAUz5E,GAEtD,OADA4uE,EAAe37F,EAAI+sB,GACZ,CAAC0H,EAAOhB,IAAemlE,EAAY54F,EAAIwmG,EAAU,CAAC/xE,EAAOhB,GACpE,CAEA,SAASmzE,GAAqBxP,EAAGrqE,GAC7B,IAAK85E,GAAiBzP,GAClB,MAAM,IAAI3nC,UAAU,GAAG1iC,6BAE/B,CAjHAxE,OAAOq1E,iBAAiB2H,GAAyBtiE,UAAW,CACxDlrC,OAAQ,CAAE05D,YAAY,GACtBt9B,KAAM,CAAEs9B,YAAY,GACpBgsC,YAAa,CAAEhsC,YAAY,GAC3B0rC,OAAQ,CAAE1rC,YAAY,KAEgB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe24B,GAAyBtiE,UAAW8zD,EAAe3jC,YAAa,CAClFziF,MAAO,2BACPokF,cAAc,IAsHtB,MAAM+xC,GAAqD,mBAApBC,gBAkBvC,MAAMC,GACF,WAAAxsE,CAAYysE,EAAoB,CAAC,EAAGC,EAAc,CAAC,QACrBrsH,IAAtBosH,EACAA,EAAoB,KAGpBrL,EAAaqL,EAAmB,mBAEpC,MAAMf,EAAWG,GAAuBa,EAAa,oBAC/CC,EArFd,SAA+BX,EAAUz5E,GACrC2uE,EAAiB8K,EAAUz5E,GAC3B,MAAMq6E,EAAQZ,aAAgD,EAAIA,EAASY,MACrEvzE,EAAQ2yE,aAAgD,EAAIA,EAAS3yE,MACrEzI,EAAQo7E,aAAgD,EAAIA,EAASp7E,MACrE15C,EAAO80H,aAAgD,EAAIA,EAAS90H,KACpEqyF,EAAQyiC,aAAgD,EAAIA,EAASziC,MAC3E,MAAO,CACHqjC,WAAiBvsH,IAAVusH,OACHvsH,EACA0rH,GAAmCa,EAAOZ,EAAU,GAAGz5E,6BAC3D8G,WAAiBh5C,IAAVg5C,OACHh5C,EACA4rH,GAAmC5yE,EAAO2yE,EAAU,GAAGz5E,6BAC3D3B,WAAiBvwC,IAAVuwC,OACHvwC,EACA6rH,GAAmCt7E,EAAOo7E,EAAU,GAAGz5E,6BAC3Dg3C,WAAiBlpF,IAAVkpF,OACHlpF,EACA8rH,GAAmC5iC,EAAOyiC,EAAU,GAAGz5E,6BAC3Dr7C,OAER,CA+D+B21H,CAAsBJ,EAAmB,mBAGhE,GAFAK,GAAyB94H,WAEZqM,IADAssH,EAAez1H,KAExB,MAAM,IAAImuH,WAAW,6BAEzB,MAAM0H,EAAgBnB,GAAqBF,IA0qBnD,SAAgE3d,EAAQ4e,EAAgB/B,EAAemC,GACnG,MAAM9zE,EAAalL,OAAO9uC,OAAO+tH,GAAgCvkE,WACjE,IAAIgiE,EAAiB,OACjBwC,EAAiB,IAAM/P,OAAoB78G,GAC3C6sH,EAAiB,IAAMhQ,OAAoB78G,GAC3C8sH,EAAiB,IAAMjQ,OAAoB78G,QAClBA,IAAzBssH,EAAe/7E,QACf65E,EAAiB,IAAMkC,EAAe/7E,MAAMqI,SAEnB54C,IAAzBssH,EAAepjC,QACf0jC,EAAiBhzE,GAAS0yE,EAAepjC,MAAMtvC,EAAOhB,SAE7B54C,IAAzBssH,EAAetzE,QACf6zE,EAAiB,IAAMP,EAAetzE,cAEbh5C,IAAzBssH,EAAeC,QACfO,EAAiBt7G,GAAU86G,EAAeC,MAAM/6G,IAEpDu7G,GAAqCrf,EAAQ90D,EAAYwxE,EAAgBwC,EAAgBC,EAAgBC,EAAgBvC,EAAemC,EAC5I,CA3rBQM,CAAuDr5H,KAAM24H,EADvClB,GAAqBC,EAAU,GACuCqB,EAChG,CAIA,UAAIO,GACA,IAAKjB,GAAiBr4H,MAClB,MAAMu5H,GAA4B,UAEtC,OAAOC,GAAuBx5H,KAClC,CAUA,KAAA44H,CAAM/6G,OAASxR,GACX,OAAKgsH,GAAiBr4H,MAGlBw5H,GAAuBx5H,MAChBmpH,EAAoB,IAAIloC,UAAU,oDAEtCw4C,GAAoBz5H,KAAM6d,GALtBsrG,EAAoBoQ,GAA4B,SAM/D,CASA,KAAAl0E,GACI,OAAKgzE,GAAiBr4H,MAGlBw5H,GAAuBx5H,MAChBmpH,EAAoB,IAAIloC,UAAU,oDAEzCy4C,GAAoC15H,MAC7BmpH,EAAoB,IAAIloC,UAAU,2CAEtC04C,GAAoB35H,MARhBmpH,EAAoBoQ,GAA4B,SAS/D,CASA,SAAAK,GACI,IAAKvB,GAAiBr4H,MAClB,MAAMu5H,GAA4B,aAEtC,OAAOM,GAAmC75H,KAC9C,EAeJ,SAAS65H,GAAmC9f,GACxC,OAAO,IAAI+f,GAA4B/f,EAC3C,CASA,SAAS+e,GAAyB/e,GAC9BA,EAAO7+B,OAAS,WAGhB6+B,EAAO+R,kBAAez/G,EACtB0tG,EAAOggB,aAAU1tH,EAGjB0tG,EAAOigB,+BAA4B3tH,EAGnC0tG,EAAOkgB,eAAiB,IAAI5P,EAG5BtQ,EAAOmgB,2BAAwB7tH,EAG/B0tG,EAAOogB,mBAAgB9tH,EAGvB0tG,EAAOqgB,2BAAwB/tH,EAE/B0tG,EAAOsgB,0BAAuBhuH,EAE9B0tG,EAAOugB,eAAgB,CAC3B,CACA,SAASjC,GAAiBzP,GACtB,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,8BAGtCA,aAAa4P,EACxB,CACA,SAASgB,GAAuBzf,GAC5B,YAAuB1tG,IAAnB0tG,EAAOggB,OAIf,CACA,SAASN,GAAoB1f,EAAQl8F,GACjC,IAAIhc,EACJ,GAAsB,WAAlBk4G,EAAO7+B,QAAyC,YAAlB6+B,EAAO7+B,OACrC,OAAOguC,OAAoB78G,GAE/B0tG,EAAOigB,0BAA0BO,aAAe18G,EACa,QAA5Dhc,EAAKk4G,EAAOigB,0BAA0BQ,wBAA0C,IAAZ34H,GAAyBA,EAAG+2H,QAIjG,MAAMroG,EAAQwpF,EAAO7+B,OACrB,GAAc,WAAV3qD,GAAgC,YAAVA,EACtB,OAAO24F,OAAoB78G,GAE/B,QAAoCA,IAAhC0tG,EAAOsgB,qBACP,OAAOtgB,EAAOsgB,qBAAqBI,SAEvC,IAAIC,GAAqB,EACX,aAAVnqG,IACAmqG,GAAqB,EAErB78G,OAASxR,GAEb,MAAMg9G,EAAUzuC,EAAW,CAAC5tD,EAASk1B,KACjC63D,EAAOsgB,qBAAuB,CAC1BI,cAAUpuH,EACVsuH,SAAU3tG,EACV4tG,QAAS14E,EACT24E,QAASh9G,EACTi9G,oBAAqBJ,KAO7B,OAJA3gB,EAAOsgB,qBAAqBI,SAAWpR,EAClCqR,GACDK,GAA4BhhB,EAAQl8F,GAEjCwrG,CACX,CACA,SAASsQ,GAAoB5f,GACzB,MAAMxpF,EAAQwpF,EAAO7+B,OACrB,GAAc,WAAV3qD,GAAgC,YAAVA,EACtB,OAAO44F,EAAoB,IAAIloC,UAAU,kBAAkB1wD,+DAE/D,MAAM84F,EAAUzuC,EAAW,CAAC5tD,EAASk1B,KACjC,MAAM84E,EAAe,CACjBL,SAAU3tG,EACV4tG,QAAS14E,GAEb63D,EAAOogB,cAAgBa,IAErBC,EAASlhB,EAAOggB,QAghB1B,IAA8C90E,EA3gB1C,YAJe54C,IAAX4uH,GAAwBlhB,EAAOugB,eAA2B,aAAV/pG,GAChD2qG,GAAiCD,GA+gBrC9J,GAD0ClsE,EA5gBL80D,EAAOigB,0BA6gBXmB,GAAe,GAChDC,GAAoDn2E,GA7gB7CokE,CACX,CAYA,SAASgS,GAAgCthB,EAAQx5D,GAE/B,aADAw5D,EAAO7+B,OAKrBogD,GAA6BvhB,GAHzBghB,GAA4BhhB,EAAQx5D,EAI5C,CACA,SAASw6E,GAA4BhhB,EAAQl8F,GACzC,MAAMonC,EAAa80D,EAAOigB,0BAC1BjgB,EAAO7+B,OAAS,WAChB6+B,EAAO+R,aAAejuG,EACtB,MAAMo9G,EAASlhB,EAAOggB,aACP1tH,IAAX4uH,GACAM,GAAsDN,EAAQp9G,IA8EtE,SAAkDk8F,GAC9C,YAAqC1tG,IAAjC0tG,EAAOmgB,4BAAwE7tH,IAAjC0tG,EAAOqgB,qBAI7D,CAjFSoB,CAAyCzhB,IAAW90D,EAAW6uE,UAChEwH,GAA6BvhB,EAErC,CACA,SAASuhB,GAA6BvhB,GAClCA,EAAO7+B,OAAS,UAChB6+B,EAAOigB,0BAA0BvN,KACjC,MAAMgP,EAAc1hB,EAAO+R,aAK3B,GAJA/R,EAAOkgB,eAAe1lC,QAAQmnC,IAC1BA,EAAad,QAAQa,KAEzB1hB,EAAOkgB,eAAiB,IAAI5P,OACQh+G,IAAhC0tG,EAAOsgB,qBAEP,YADAsB,GAAkD5hB,GAGtD,MAAM6hB,EAAe7hB,EAAOsgB,qBAE5B,GADAtgB,EAAOsgB,0BAAuBhuH,EAC1BuvH,EAAad,oBAGb,OAFAc,EAAahB,QAAQa,QACrBE,GAAkD5hB,GAItDwP,EADgBxP,EAAOigB,0BAA0BxN,GAAYoP,EAAaf,SACrD,KACjBe,EAAajB,WACbgB,GAAkD5hB,IAClDl8F,IACA+9G,EAAahB,QAAQ/8G,GACrB89G,GAAkD5hB,IAE1D,CAuCA,SAAS2f,GAAoC3f,GACzC,YAA6B1tG,IAAzB0tG,EAAOogB,oBAAgE9tH,IAAjC0tG,EAAOqgB,qBAIrD,CAcA,SAASuB,GAAkD5hB,QAC1B1tG,IAAzB0tG,EAAOogB,gBACPpgB,EAAOogB,cAAcS,QAAQ7gB,EAAO+R,cACpC/R,EAAOogB,mBAAgB9tH,GAE3B,MAAM4uH,EAASlhB,EAAOggB,aACP1tH,IAAX4uH,GACAY,GAAiCZ,EAAQlhB,EAAO+R,aAExD,CACA,SAASgQ,GAAiC/hB,EAAQgiB,GAC9C,MAAMd,EAASlhB,EAAOggB,aACP1tH,IAAX4uH,GAAwBc,IAAiBhiB,EAAOugB,gBAC5CyB,EA4jBZ,SAAwCd,GACpCe,GAAoCf,EACxC,CA7jBYgB,CAA+BhB,GAG/BC,GAAiCD,IAGzClhB,EAAOugB,cAAgByB,CAC3B,CAnQAhiF,OAAOq1E,iBAAiBoJ,GAAe/jE,UAAW,CAC9CmkE,MAAO,CAAE31C,YAAY,GACrB59B,MAAO,CAAE49B,YAAY,GACrB22C,UAAW,CAAE32C,YAAY,GACzBq2C,OAAQ,CAAEr2C,YAAY,KAEgB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAeo6B,GAAe/jE,UAAW8zD,EAAe3jC,YAAa,CACxEziF,MAAO,iBACPokF,cAAc,IAgQtB,MAAMuzC,GACF,WAAA9tE,CAAY+tD,GAGR,GAFAsT,EAAuBtT,EAAQ,EAAG,+BAClCqe,GAAqBre,EAAQ,mBACzByf,GAAuBzf,GACvB,MAAM,IAAI94B,UAAU,+EAExBjhF,KAAKk8H,qBAAuBniB,EAC5BA,EAAOggB,QAAU/5H,KACjB,MAAMuwB,EAAQwpF,EAAO7+B,OACrB,GAAc,aAAV3qD,GACKmpG,GAAoC3f,IAAWA,EAAOugB,cACvD0B,GAAoCh8H,MAGpCm8H,GAA8Cn8H,MAElDo8H,GAAqCp8H,WAEpC,GAAc,aAAVuwB,EACL8rG,GAA8Cr8H,KAAM+5G,EAAO+R,cAC3DsQ,GAAqCp8H,WAEpC,GAAc,WAAVuwB,EACL4rG,GAA8Cn8H,MAoetDo8H,GAneuDp8H,MAoevDs8H,GApeuDt8H,UAE9C,CACD,MAAMy7H,EAAc1hB,EAAO+R,aAC3BuQ,GAA8Cr8H,KAAMy7H,GACpDc,GAA+Cv8H,KAAMy7H,EACzD,CACJ,CAKA,UAAI9M,GACA,OAAK6N,GAA8Bx8H,MAG5BA,KAAKqsH,eAFDlD,EAAoBsT,GAAiC,UAGpE,CASA,eAAIlK,GACA,IAAKiK,GAA8Bx8H,MAC/B,MAAMy8H,GAAiC,eAE3C,QAAkCpwH,IAA9BrM,KAAKk8H,qBACL,MAAMQ,GAA2B,eAErC,OAuIR,SAAmDzB,GAC/C,MAAMlhB,EAASkhB,EAAOiB,qBAChB3rG,EAAQwpF,EAAO7+B,OACrB,MAAc,YAAV3qD,GAAiC,aAAVA,EAChB,KAEG,WAAVA,EACO,EAEJosG,GAA8C5iB,EAAOigB,0BAChE,CAjJe4C,CAA0C58H,KACrD,CASA,SAAIm1H,GACA,OAAKqH,GAA8Bx8H,MAG5BA,KAAK68H,cAFD1T,EAAoBsT,GAAiC,SAGpE,CAIA,KAAA7D,CAAM/6G,OAASxR,GACX,OAAKmwH,GAA8Bx8H,WAGDqM,IAA9BrM,KAAKk8H,qBACE/S,EAAoBuT,GAA2B,UA4ElE,SAA0CzB,EAAQp9G,GAE9C,OAAO47G,GADQwB,EAAOiB,qBACar+G,EACvC,CA7Eei/G,CAAiC98H,KAAM6d,GALnCsrG,EAAoBsT,GAAiC,SAMpE,CAIA,KAAAp3E,GACI,IAAKm3E,GAA8Bx8H,MAC/B,OAAOmpH,EAAoBsT,GAAiC,UAEhE,MAAM1iB,EAAS/5G,KAAKk8H,qBACpB,YAAe7vH,IAAX0tG,EACOoP,EAAoBuT,GAA2B,UAEtDhD,GAAoC3f,GAC7BoP,EAAoB,IAAIloC,UAAU,2CAEtC87C,GAAiC/8H,KAC5C,CAWA,WAAAivH,GACI,IAAKuN,GAA8Bx8H,MAC/B,MAAMy8H,GAAiC,oBAG5BpwH,IADArM,KAAKk8H,sBAIpBc,GAAmCh9H,KACvC,CACA,KAAAu1F,CAAMtvC,OAAQ55C,GACV,OAAKmwH,GAA8Bx8H,WAGDqM,IAA9BrM,KAAKk8H,qBACE/S,EAAoBuT,GAA2B,aAEnDO,GAAiCj9H,KAAMimD,GALnCkjE,EAAoBsT,GAAiC,SAMpE,EAkBJ,SAASD,GAA8B5T,GACnC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,yBAGtCA,aAAakR,EACxB,CAMA,SAASiD,GAAiC9B,GAEtC,OAAOtB,GADQsB,EAAOiB,qBAE1B,CAoBA,SAASX,GAAsDN,EAAQ16E,GACjC,YAA9B06E,EAAOiC,mBACPC,GAAgClC,EAAQ16E,GAsXhD,SAAkD06E,EAAQp9G,GACtDw+G,GAA8CpB,EAAQp9G,EAC1D,CArXQu/G,CAAyCnC,EAAQ16E,EAEzD,CAYA,SAASy8E,GAAmC/B,GACxC,MAAMlhB,EAASkhB,EAAOiB,qBAChBmB,EAAgB,IAAIp8C,UAAU,oFACpCs6C,GAAsDN,EAAQoC,GA9BlE,SAAgEpC,EAAQ16E,GACjC,YAA/B06E,EAAOqC,oBACPzB,GAAiCZ,EAAQ16E,GAsVjD,SAAmD06E,EAAQp9G,GACvD0+G,GAA+CtB,EAAQp9G,EAC3D,CArVQ0/G,CAA0CtC,EAAQ16E,EAE1D,CA0BIi9E,CAAuDvC,EAAQoC,GAC/DtjB,EAAOggB,aAAU1tH,EACjB4uH,EAAOiB,0BAAuB7vH,CAClC,CACA,SAAS4wH,GAAiChC,EAAQh1E,GAC9C,MAAM8zD,EAASkhB,EAAOiB,qBAChBj3E,EAAa80D,EAAOigB,0BACpByD,EAqKV,SAAqDx4E,EAAYgB,GAC7D,IACI,OAAOhB,EAAWy4E,uBAAuBz3E,EAC7C,CACA,MAAO03E,GAEH,OADAC,GAA6C34E,EAAY04E,GAClD,CACX,CACJ,CA7KsBE,CAA4C54E,EAAYgB,GAC1E,GAAI8zD,IAAWkhB,EAAOiB,qBAClB,OAAO/S,EAAoBuT,GAA2B,aAE1D,MAAMnsG,EAAQwpF,EAAO7+B,OACrB,GAAc,YAAV3qD,EACA,OAAO44F,EAAoBpP,EAAO+R,cAEtC,GAAI4N,GAAoC3f,IAAqB,WAAVxpF,EAC/C,OAAO44F,EAAoB,IAAIloC,UAAU,6DAE7C,GAAc,aAAV1wD,EACA,OAAO44F,EAAoBpP,EAAO+R,cAEtC,MAAMzC,EArXV,SAAuCtP,GAQnC,OAPgBn/B,EAAW,CAAC5tD,EAASk1B,KACjC,MAAMw5E,EAAe,CACjBf,SAAU3tG,EACV4tG,QAAS14E,GAEb63D,EAAOkgB,eAAelqH,KAAK2rH,IAGnC,CA4WoBoC,CAA8B/jB,GAE9C,OAiKJ,SAA8C90D,EAAYgB,EAAOw3E,GAC7D,IACItM,GAAqBlsE,EAAYgB,EAAOw3E,EAC5C,CACA,MAAOM,GAEH,YADAH,GAA6C34E,EAAY84E,EAE7D,CACA,MAAMhkB,EAAS90D,EAAW+4E,0BACrBtE,GAAoC3f,IAA6B,aAAlBA,EAAO7+B,QAEvD4gD,GAAiC/hB,EADZkkB,GAA+Ch5E,IAGxEm2E,GAAoDn2E,EACxD,CAhLIi5E,CAAqCj5E,EAAYgB,EAAOw3E,GACjDpU,CACX,CAtGAtvE,OAAOq1E,iBAAiB0K,GAA4BrlE,UAAW,CAC3DmkE,MAAO,CAAE31C,YAAY,GACrB59B,MAAO,CAAE49B,YAAY,GACrBgsC,YAAa,CAAEhsC,YAAY,GAC3BsS,MAAO,CAAEtS,YAAY,GACrB0rC,OAAQ,CAAE1rC,YAAY,GACtBsvC,YAAa,CAAEtvC,YAAY,GAC3BkyC,MAAO,CAAElyC,YAAY,KAEiB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe07B,GAA4BrlE,UAAW8zD,EAAe3jC,YAAa,CACrFziF,MAAO,8BACPokF,cAAc,IA2FtB,MAAM40C,GAAgB,CAAC,EAMvB,MAAMnC,GACF,WAAAhtE,GACI,MAAM,IAAIi1B,UAAU,sBACxB,CAQA,eAAIk9C,GACA,IAAKC,GAAkCp+H,MACnC,MAAMq+H,GAAuC,eAEjD,OAAOr+H,KAAKu6H,YAChB,CAIA,UAAI+D,GACA,IAAKF,GAAkCp+H,MACnC,MAAMq+H,GAAuC,UAEjD,QAA8BhyH,IAA1BrM,KAAKw6H,iBAIL,MAAM,IAAIv5C,UAAU,qEAExB,OAAOjhF,KAAKw6H,iBAAiB8D,MACjC,CAQA,KAAA/9E,CAAM//C,OAAI6L,GACN,IAAK+xH,GAAkCp+H,MACnC,MAAMq+H,GAAuC,SAGnC,aADAr+H,KAAKg+H,0BAA0B9iD,QAM7CqjD,GAAqCv+H,KAAMQ,EAC/C,CAEA,CAACgsH,GAAY3uG,GACT,MAAM9R,EAAS/L,KAAKw+H,gBAAgB3gH,GAEpC,OADA4gH,GAA+Cz+H,MACxC+L,CACX,CAEA,CAAC0gH,KACG6E,GAAWtxH,KACf,EAcJ,SAASo+H,GAAkCxV,GACvC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,8BAGtCA,aAAaoQ,EACxB,CACA,SAASI,GAAqCrf,EAAQ90D,EAAYwxE,EAAgBwC,EAAgBC,EAAgBC,EAAgBvC,EAAemC,GAC7I9zE,EAAW+4E,0BAA4BjkB,EACvCA,EAAOigB,0BAA4B/0E,EAEnCA,EAAWm2B,YAAS/uE,EACpB44C,EAAWisE,qBAAkB7kH,EAC7BilH,GAAWrsE,GACXA,EAAWs1E,kBAAeluH,EAC1B44C,EAAWu1E,iBAlrBf,WACI,GAAIlC,GACA,OAAO,IAAIC,eAGnB,CA6qBkCmG,GAC9Bz5E,EAAW6uE,UAAW,EACtB7uE,EAAWy4E,uBAAyB3E,EACpC9zE,EAAWqxE,aAAeM,EAC1B3xE,EAAW05E,gBAAkB1F,EAC7Bh0E,EAAW25E,gBAAkB1F,EAC7Bj0E,EAAWu5E,gBAAkBrF,EAC7B,MAAM4C,EAAekC,GAA+Ch5E,GACpE62E,GAAiC/hB,EAAQgiB,GAGzCxS,EADqBL,EADDuN,KAEM,KACtBxxE,EAAW6uE,UAAW,EACtBsH,GAAoDn2E,IACrD4xE,IACC5xE,EAAW6uE,UAAW,EACtBuH,GAAgCthB,EAAQ8c,IAEhD,CAsBA,SAAS4H,GAA+Cx5E,GACpDA,EAAW05E,qBAAkBtyH,EAC7B44C,EAAW25E,qBAAkBvyH,EAC7B44C,EAAWu5E,qBAAkBnyH,EAC7B44C,EAAWy4E,4BAAyBrxH,CACxC,CAcA,SAASswH,GAA8C13E,GACnD,OAAOA,EAAWqxE,aAAerxE,EAAWisE,eAChD,CAiBA,SAASkK,GAAoDn2E,GACzD,MAAM80D,EAAS90D,EAAW+4E,0BAC1B,IAAK/4E,EAAW6uE,SACZ,OAEJ,QAAqCznH,IAAjC0tG,EAAOmgB,sBACP,OAGJ,GAAc,aADAngB,EAAO7+B,OAGjB,YADAogD,GAA6BvhB,GAGjC,GAAiC,IAA7B90D,EAAWm2B,OAAOr3E,OAClB,OAEJ,MAAM5B,EAAuB8iD,EAxpDNm2B,OAAO+vC,OAClBhpH,MAwpDRA,IAAUg5H,GAYlB,SAAqDl2E,GACjD,MAAM80D,EAAS90D,EAAW+4E,2BA1d9B,SAAgDjkB,GAC5CA,EAAOqgB,sBAAwBrgB,EAAOogB,cACtCpgB,EAAOogB,mBAAgB9tH,CAC3B,EAwdIwyH,CAAuC9kB,GACvCiX,GAAa/rE,GACb,MAAM65E,EAAmB75E,EAAW25E,kBACpCH,GAA+Cx5E,GAC/CskE,EAAYuV,EAAkB,MAxgBlC,SAA2C/kB,GACvCA,EAAOqgB,sBAAsBO,cAAStuH,GACtC0tG,EAAOqgB,2BAAwB/tH,EAEjB,aADA0tG,EAAO7+B,SAGjB6+B,EAAO+R,kBAAez/G,OACcA,IAAhC0tG,EAAOsgB,uBACPtgB,EAAOsgB,qBAAqBM,WAC5B5gB,EAAOsgB,0BAAuBhuH,IAGtC0tG,EAAO7+B,OAAS,SAChB,MAAM+/C,EAASlhB,EAAOggB,aACP1tH,IAAX4uH,GACAqB,GAAkCrB,EAE1C,CAwfQ8D,CAAkChlB,IACnCl8F,KAxfP,SAAoDk8F,EAAQx5D,GACxDw5D,EAAOqgB,sBAAsBQ,QAAQr6E,GACrCw5D,EAAOqgB,2BAAwB/tH,OAEKA,IAAhC0tG,EAAOsgB,uBACPtgB,EAAOsgB,qBAAqBO,QAAQr6E,GACpCw5D,EAAOsgB,0BAAuBhuH,GAElCgvH,GAAgCthB,EAAQx5D,EAC5C,CAgfQy+E,CAA2CjlB,EAAQl8F,IAE3D,CAtBQohH,CAA4Ch6E,GAuBpD,SAAqDA,EAAYgB,GAC7D,MAAM8zD,EAAS90D,EAAW+4E,2BAle9B,SAAqDjkB,GACjDA,EAAOmgB,sBAAwBngB,EAAOkgB,eAAej+G,OACzD,CAieIkjH,CAA4CnlB,GAE5CwP,EADyBtkE,EAAW05E,gBAAgB14E,GACtB,MA3hBlC,SAA2C8zD,GACvCA,EAAOmgB,sBAAsBS,cAAStuH,GACtC0tG,EAAOmgB,2BAAwB7tH,CACnC,CAyhBQ8yH,CAAkCplB,GAClC,MAAMxpF,EAAQwpF,EAAO7+B,OAErB,GADA81C,GAAa/rE,IACRy0E,GAAoC3f,IAAqB,aAAVxpF,EAAsB,CACtE,MAAMwrG,EAAekC,GAA+Ch5E,GACpE62E,GAAiC/hB,EAAQgiB,EAC7C,CACAX,GAAoDn2E,IACrDpnC,IACuB,aAAlBk8F,EAAO7+B,QACPujD,GAA+Cx5E,GAliB3D,SAAoD80D,EAAQx5D,GACxDw5D,EAAOmgB,sBAAsBU,QAAQr6E,GACrCw5D,EAAOmgB,2BAAwB7tH,EAC/BgvH,GAAgCthB,EAAQx5D,EAC5C,CAgiBQ6+E,CAA2CrlB,EAAQl8F,IAE3D,CAvCQwhH,CAA4Cp6E,EAAY9iD,EAEhE,CACA,SAASy7H,GAA6C34E,EAAY1E,GACV,aAAhD0E,EAAW+4E,0BAA0B9iD,QACrCqjD,GAAqCt5E,EAAY1E,EAEzD,CAiCA,SAAS09E,GAA+Ch5E,GAEpD,OADoB03E,GAA8C13E,IAC5C,CAC1B,CAEA,SAASs5E,GAAqCt5E,EAAY1E,GACtD,MAAMw5D,EAAS90D,EAAW+4E,0BAC1BS,GAA+Cx5E,GAC/C81E,GAA4BhhB,EAAQx5D,EACxC,CAEA,SAASg5E,GAA4B92H,GACjC,OAAO,IAAIw+E,UAAU,4BAA4Bx+E,yCACrD,CAEA,SAAS47H,GAAuC57H,GAC5C,OAAO,IAAIw+E,UAAU,6CAA6Cx+E,0DACtE,CAEA,SAASg6H,GAAiCh6H,GACtC,OAAO,IAAIw+E,UAAU,yCAAyCx+E,sDAClE,CACA,SAASi6H,GAA2Bj6H,GAChC,OAAO,IAAIw+E,UAAU,UAAYx+E,EAAO,oCAC5C,CACA,SAAS25H,GAAqCnB,GAC1CA,EAAO5O,eAAiBzxC,EAAW,CAAC5tD,EAASk1B,KACzC+4E,EAAO3O,uBAAyBt/F,EAChCiuG,EAAO1O,sBAAwBrqE,EAC/B+4E,EAAOqC,oBAAsB,WAErC,CACA,SAASf,GAA+CtB,EAAQp9G,GAC5Du+G,GAAqCnB,GACrCY,GAAiCZ,EAAQp9G,EAC7C,CAKA,SAASg+G,GAAiCZ,EAAQp9G,QACTxR,IAAjC4uH,EAAO1O,wBAGX1C,EAA0BoR,EAAO5O,gBACjC4O,EAAO1O,sBAAsB1uG,GAC7Bo9G,EAAO3O,4BAAyBjgH,EAChC4uH,EAAO1O,2BAAwBlgH,EAC/B4uH,EAAOqC,oBAAsB,WACjC,CAIA,SAAShB,GAAkCrB,QACD5uH,IAAlC4uH,EAAO3O,yBAGX2O,EAAO3O,4BAAuBjgH,GAC9B4uH,EAAO3O,4BAAyBjgH,EAChC4uH,EAAO1O,2BAAwBlgH,EAC/B4uH,EAAOqC,oBAAsB,WACjC,CACA,SAAStB,GAAoCf,GACzCA,EAAO4B,cAAgBjiD,EAAW,CAAC5tD,EAASk1B,KACxC+4E,EAAOqE,sBAAwBtyG,EAC/BiuG,EAAOsE,qBAAuBr9E,IAElC+4E,EAAOiC,mBAAqB,SAChC,CACA,SAASb,GAA8CpB,EAAQp9G,GAC3Dm+G,GAAoCf,GACpCkC,GAAgClC,EAAQp9G,EAC5C,CACA,SAASs+G,GAA8ClB,GACnDe,GAAoCf,GACpCC,GAAiCD,EACrC,CACA,SAASkC,GAAgClC,EAAQp9G,QACTxR,IAAhC4uH,EAAOsE,uBAGX1V,EAA0BoR,EAAO4B,eACjC5B,EAAOsE,qBAAqB1hH,GAC5Bo9G,EAAOqE,2BAAwBjzH,EAC/B4uH,EAAOsE,0BAAuBlzH,EAC9B4uH,EAAOiC,mBAAqB,WAChC,CAOA,SAAShC,GAAiCD,QACD5uH,IAAjC4uH,EAAOqE,wBAGXrE,EAAOqE,2BAAsBjzH,GAC7B4uH,EAAOqE,2BAAwBjzH,EAC/B4uH,EAAOsE,0BAAuBlzH,EAC9B4uH,EAAOiC,mBAAqB,YAChC,CA7QAnjF,OAAOq1E,iBAAiB4J,GAAgCvkE,UAAW,CAC/D0pE,YAAa,CAAEl7C,YAAY,GAC3Bq7C,OAAQ,CAAEr7C,YAAY,GACtB1iC,MAAO,CAAE0iC,YAAY,KAEiB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe46B,GAAgCvkE,UAAW8zD,EAAe3jC,YAAa,CACzFziF,MAAO,kCACPokF,cAAc,IAwQtB,MAAMi5C,GAA6C,oBAAjB1nC,aAA+BA,kBAAezrF,EA6B1EozH,GA1BN,SAAmCnI,GAC/B,GAAsB,mBAATA,GAAuC,iBAATA,EACvC,OAAO,EAEX,IAEI,OADA,IAAIA,GACG,CACX,CACA,MAAOz1H,GACH,OAAO,CACX,CACJ,CAeuB69H,CAA0BF,IAAsBA,GAdvE,WAEI,MAAMlI,EAAO,SAAsB52H,EAAS+B,GACxCzC,KAAKU,QAAUA,GAAW,GAC1BV,KAAKyC,KAAOA,GAAQ,QAChBs+E,MAAMwK,mBACNxK,MAAMwK,kBAAkBvrF,KAAMA,KAAKgsD,YAE3C,EAGA,OAFAsrE,EAAK7iE,UAAY1a,OAAO9uC,OAAO81E,MAAMtsB,WACrC1a,OAAOqkD,eAAek5B,EAAK7iE,UAAW,cAAe,CAAEtyD,MAAOm1H,EAAMx0C,UAAU,EAAMyD,cAAc,IAC3F+wC,CACX,CAE4FqI,GAE5F,SAASC,GAAqBzvG,EAAQqgG,EAAMqP,EAAcC,EAActQ,EAAe8O,GACnF,MAAM/S,EAASwC,EAAmC59F,GAC5C8qG,EAASpB,GAAmCrJ,GAClDrgG,EAAO++F,YAAa,EACpB,IAAI6Q,GAAe,EAEfC,EAAe9W,OAAoB78G,GACvC,OAAOuuE,EAAW,CAAC5tD,EAASk1B,KACxB,IAAIi3E,EACJ,QAAe9sH,IAAXiyH,EAAsB,CAsBtB,GArBAnF,EAAiB,KACb,MAAM54E,EAAQ,IAAIk/E,GAAe,UAAW,cACtC9pH,EAAU,GACXmqH,GACDnqH,EAAQ5F,KAAK,IACW,aAAhBygH,EAAKt1C,OACEu+C,GAAoBjJ,EAAMjwE,GAE9B2oE,OAAoB78G,IAG9BmjH,GACD75G,EAAQ5F,KAAK,IACa,aAAlBogB,EAAO+qD,OACA8wC,GAAqB77F,EAAQowB,GAEjC2oE,OAAoB78G,IAGnC4zH,EAAmB,IAAMzsC,QAAQC,IAAI99E,EAAQs4C,IAAIvuC,GAAUA,OAAY,EAAM6gC,IAE7E+9E,EAAO4B,QAEP,YADA/G,IAGJmF,EAAO6B,iBAAiB,QAAShH,EACrC,CAwFA,IAA2Bpf,EAAQsP,EAAS3pG,EAxB5C,GA3BA0gH,EAAmBjwG,EAAQo7F,EAAOc,eAAgBoP,IACzCqE,EAIDO,GAAS,EAAM5E,GAHfwE,EAAmB,IAAMxG,GAAoBjJ,EAAMiL,IAAc,EAAMA,KAO/E2E,EAAmB5P,EAAMyK,EAAO5O,eAAgBoP,IACvCjM,EAID6Q,GAAS,EAAM5E,GAHfwE,EAAmB,IAAMjU,GAAqB77F,EAAQsrG,IAAc,EAAMA,KAwCvD1hB,EAjCT5pF,EAiCiBk5F,EAjCTkC,EAAOc,eAiCW3sG,EAjCK,KACxCmgH,EAIDQ,IAHAJ,EAAmB,IArhBnC,SAA8DhF,GAC1D,MAAMlhB,EAASkhB,EAAOiB,qBAChB3rG,EAAQwpF,EAAO7+B,OACrB,OAAIw+C,GAAoC3f,IAAqB,WAAVxpF,EACxC24F,OAAoB78G,GAEjB,YAAVkkB,EACO44F,EAAoBpP,EAAO+R,cAE/BiR,GAAiC9B,EAC5C,CA2gByCqF,CAAqDrF,KAgC5D,WAAlBlhB,EAAO7+B,OACPx7D,IAGA8pG,EAAgBH,EAAS3pG,GA7B7Bg6G,GAAoClJ,IAAyB,WAAhBA,EAAKt1C,OAAqB,CACvE,MAAMqlD,EAAa,IAAIt/C,UAAU,+EAC5BuuC,EAID6Q,GAAS,EAAME,GAHfN,EAAmB,IAAMjU,GAAqB77F,EAAQowG,IAAa,EAAMA,EAKjF,CAEA,SAASC,IAGL,MAAMC,EAAkBT,EACxB,OAAO5W,EAAmB4W,EAAc,IAAMS,IAAoBT,EAAeQ,SAA0Bn0H,EAC/G,CACA,SAAS+zH,EAAmBrmB,EAAQsP,EAAS3pG,GACnB,YAAlBq6F,EAAO7+B,OACPx7D,EAAOq6F,EAAO+R,cAGdrC,EAAcJ,EAAS3pG,EAE/B,CASA,SAASugH,EAAmBvgH,EAAQghH,EAAiBC,GAWjD,SAASC,IACLrX,EAAY7pG,IAAU,IAAMmhH,EAASH,EAAiBC,GAAgBG,GAAYD,GAAS,EAAMC,GACrG,CAZIf,IAGJA,GAAe,EACK,aAAhBvP,EAAKt1C,QAA0Bw+C,GAAoClJ,GAInEoQ,IAHApX,EAAgBgX,IAAyBI,GAQjD,CACA,SAASP,EAAShgD,EAAS9/B,GACnBw/E,IAGJA,GAAe,EACK,aAAhBvP,EAAKt1C,QAA0Bw+C,GAAoClJ,GAInEqQ,EAASxgD,EAAS9/B,GAHlBipE,EAAgBgX,IAAyB,IAAMK,EAASxgD,EAAS9/B,IAKzE,CACA,SAASsgF,EAASxgD,EAAS9/B,GACvBy8E,GAAmC/B,GACnChP,EAAmCV,QACpBl/G,IAAXiyH,GACAA,EAAOyC,oBAAoB,QAAS5H,GAEpC94C,EACAn+B,EAAO3B,GAGPvzB,OAAQ3gB,EAEhB,CA9DAw9G,EApEWjvC,EAAW,CAAComD,EAAaC,MAC5B,SAASx3F,EAAKrB,GACNA,EACA44F,IAKA5X,EAOR2W,EACO7W,GAAoB,GAExBE,EAAmB6R,EAAO4B,cAAe,IACrCjiD,EAAW,CAACsmD,EAAaC,KAC5BpS,EAAgCxD,EAAQ,CACpC+C,YAAaroE,IACT+5E,EAAe5W,EAAmB6T,GAAiChC,EAAQh1E,QAAQ55C,EAAWo8G,GAC9FyY,GAAY,IAEhB7S,YAAa,IAAM6S,GAAY,GAC/BlS,YAAamS,OAlBkB13F,EAAMw3F,EAE7C,CACAx3F,EAAK,OAyHrB,CAOA,MAAM23F,GACF,WAAAp1E,GACI,MAAM,IAAIi1B,UAAU,sBACxB,CAKA,eAAIsxC,GACA,IAAK8O,GAAkCrhI,MACnC,MAAMshI,GAAuC,eAEjD,OAAOC,GAA8CvhI,KACzD,CAKA,KAAAqlD,GACI,IAAKg8E,GAAkCrhI,MACnC,MAAMshI,GAAuC,SAEjD,IAAKE,GAAiDxhI,MAClD,MAAM,IAAIihF,UAAU,mDAExBwgD,GAAqCzhI,KACzC,CACA,OAAAklD,CAAQe,OAAQ55C,GACZ,IAAKg1H,GAAkCrhI,MACnC,MAAMshI,GAAuC,WAEjD,IAAKE,GAAiDxhI,MAClD,MAAM,IAAIihF,UAAU,qDAExB,OAAOygD,GAAuC1hI,KAAMimD,EACxD,CAIA,KAAA1F,CAAM//C,OAAI6L,GACN,IAAKg1H,GAAkCrhI,MACnC,MAAMshI,GAAuC,SAEjDK,GAAqC3hI,KAAMQ,EAC/C,CAEA,CAACksH,GAAa7uG,GACVyzG,GAAWtxH,MACX,MAAM+L,EAAS/L,KAAK+yH,iBAAiBl1G,GAErC,OADA+jH,GAA+C5hI,MACxC+L,CACX,CAEA,CAAC4gH,GAAWuB,GACR,MAAMnU,EAAS/5G,KAAK6hI,0BACpB,GAAI7hI,KAAKo7E,OAAOr3E,OAAS,EAAG,CACxB,MAAMkiD,EAAQ+qE,GAAahxH,MACvBA,KAAKyyH,iBAA0C,IAAvBzyH,KAAKo7E,OAAOr3E,QACpC69H,GAA+C5hI,MAC/Cw1H,GAAoBzb,IAGpB+nB,GAAgD9hI,MAEpDkuH,EAAYI,YAAYroE,EAC5B,MAEIgoE,EAA6BlU,EAAQmU,GACrC4T,GAAgD9hI,KAExD,EAeJ,SAASqhI,GAAkCzY,GACvC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,8BAGtCA,aAAawY,EACxB,CACA,SAASU,GAAgD78E,GAClC88E,GAA8C98E,KAI7DA,EAAWivE,SACXjvE,EAAWkvE,YAAa,GAG5BlvE,EAAWivE,UAAW,EAEtB3K,EADoBtkE,EAAWmvE,iBACN,KACrBnvE,EAAWivE,UAAW,EAClBjvE,EAAWkvE,aACXlvE,EAAWkvE,YAAa,EACxB2N,GAAgD78E,KAErDzkD,IACCmhI,GAAqC18E,EAAYzkD,MAEzD,CACA,SAASuhI,GAA8C98E,GACnD,MAAM80D,EAAS90D,EAAW48E,0BAC1B,QAAKL,GAAiDv8E,MAGjDA,EAAW6uE,cAGZpF,GAAuB3U,IAAWwU,EAAiCxU,GAAU,IAG7DwnB,GAA8Ct8E,GAChD,EAItB,CACA,SAAS28E,GAA+C38E,GACpDA,EAAWmvE,oBAAiB/nH,EAC5B44C,EAAW8tE,sBAAmB1mH,EAC9B44C,EAAWy4E,4BAAyBrxH,CACxC,CAEA,SAASo1H,GAAqCx8E,GAC1C,IAAKu8E,GAAiDv8E,GAClD,OAEJ,MAAM80D,EAAS90D,EAAW48E,0BAC1B58E,EAAWwtE,iBAAkB,EACI,IAA7BxtE,EAAWm2B,OAAOr3E,SAClB69H,GAA+C38E,GAC/CuwE,GAAoBzb,GAE5B,CACA,SAAS2nB,GAAuCz8E,EAAYgB,GACxD,IAAKu7E,GAAiDv8E,GAClD,OAEJ,MAAM80D,EAAS90D,EAAW48E,0BAC1B,GAAInT,GAAuB3U,IAAWwU,EAAiCxU,GAAU,EAC7EqU,EAAiCrU,EAAQ9zD,GAAO,OAE/C,CACD,IAAIw3E,EACJ,IACIA,EAAYx4E,EAAWy4E,uBAAuBz3E,EAClD,CACA,MAAO03E,GAEH,MADAgE,GAAqC18E,EAAY04E,GAC3CA,CACV,CACA,IACIxM,GAAqBlsE,EAAYgB,EAAOw3E,EAC5C,CACA,MAAOM,GAEH,MADA4D,GAAqC18E,EAAY84E,GAC3CA,CACV,CACJ,CACA+D,GAAgD78E,EACpD,CACA,SAAS08E,GAAqC18E,EAAYzkD,GACtD,MAAMu5G,EAAS90D,EAAW48E,0BACJ,aAAlB9nB,EAAO7+B,SAGXo2C,GAAWrsE,GACX28E,GAA+C38E,GAC/CmxE,GAAoBrc,EAAQv5G,GAChC,CACA,SAAS+gI,GAA8Ct8E,GACnD,MAAM10B,EAAQ00B,EAAW48E,0BAA0B3mD,OACnD,MAAc,YAAV3qD,EACO,KAEG,WAAVA,EACO,EAEJ00B,EAAWqxE,aAAerxE,EAAWisE,eAChD,CAQA,SAASsQ,GAAiDv8E,GACtD,MAAM10B,EAAQ00B,EAAW48E,0BAA0B3mD,OACnD,OAAKj2B,EAAWwtE,iBAA6B,aAAVliG,CAIvC,CACA,SAASyxG,GAAqCjoB,EAAQ90D,EAAYwxE,EAAgBC,EAAeC,EAAiBC,EAAemC,GAC7H9zE,EAAW48E,0BAA4B9nB,EACvC90D,EAAWm2B,YAAS/uE,EACpB44C,EAAWisE,qBAAkB7kH,EAC7BilH,GAAWrsE,GACXA,EAAW6uE,UAAW,EACtB7uE,EAAWwtE,iBAAkB,EAC7BxtE,EAAWkvE,YAAa,EACxBlvE,EAAWivE,UAAW,EACtBjvE,EAAWy4E,uBAAyB3E,EACpC9zE,EAAWqxE,aAAeM,EAC1B3xE,EAAWmvE,eAAiBsC,EAC5BzxE,EAAW8tE,iBAAmB4D,EAC9B5c,EAAOoV,0BAA4BlqE,EAEnCskE,EAAYL,EADQuN,KAC0B,KAC1CxxE,EAAW6uE,UAAW,EACtBgO,GAAgD78E,IACjD4xE,IACC8K,GAAqC18E,EAAY4xE,IAEzD,CAkBA,SAASyK,GAAuC7+H,GAC5C,OAAO,IAAIw+E,UAAU,6CAA6Cx+E,0DACtE,CAqWA,SAASw/H,GAAsCzwG,EAAIwmG,EAAUz5E,GAEzD,OADA4uE,EAAe37F,EAAI+sB,GACX1gC,GAAWusG,EAAY54F,EAAIwmG,EAAU,CAACn6G,GAClD,CACA,SAASqkH,GAAoC1wG,EAAIwmG,EAAUz5E,GAEvD,OADA4uE,EAAe37F,EAAI+sB,GACX0G,GAAemlE,EAAY54F,EAAIwmG,EAAU,CAAC/yE,GACtD,CACA,SAASk9E,GAAqC3wG,EAAIwmG,EAAUz5E,GAExD,OADA4uE,EAAe37F,EAAI+sB,GACX0G,GAAeglE,EAAYz4F,EAAIwmG,EAAU,CAAC/yE,GACtD,CACA,SAASm9E,GAA0Bl/H,EAAMq7C,GAErC,GAAa,UADbr7C,EAAO,GAAGA,KAEN,MAAM,IAAI+9E,UAAU,GAAG1iC,MAAYr7C,8DAEvC,OAAOA,CACX,CASA,SAASm/H,GAAgC7oF,EAAM+E,GAE3C,GAAa,SADb/E,EAAO,GAAGA,KAEN,MAAM,IAAIynC,UAAU,GAAG1iC,MAAY/E,oEAEvC,OAAOA,CACX,CAQA,SAAS8oF,GAAmBpqD,EAAS35B,GACjC2uE,EAAiBh1C,EAAS35B,GAC1B,MAAMuhF,EAAe5nD,aAA8C,EAAIA,EAAQ4nD,aACzEtQ,EAAgBt3C,aAA8C,EAAIA,EAAQs3C,cAC1EqQ,EAAe3nD,aAA8C,EAAIA,EAAQ2nD,aACzEvB,EAASpmD,aAA8C,EAAIA,EAAQomD,OAIzE,YAHejyH,IAAXiyH,GAUR,SAA2BA,EAAQ//E,GAC/B,IAnyDJ,SAAuBp8C,GACnB,GAAqB,iBAAVA,GAAgC,OAAVA,EAC7B,OAAO,EAEX,IACI,MAAgC,kBAAlBA,EAAM+9H,OACxB,CACA,MAAOr+H,GAEH,OAAO,CACX,CACJ,CAwxDS0gI,CAAcjE,GACf,MAAM,IAAIr9C,UAAU,GAAG1iC,2BAE/B,CAbQikF,CAAkBlE,EAAQ,GAAG//E,8BAE1B,CACHuhF,aAAcjwF,QAAQiwF,GACtBtQ,cAAe3/E,QAAQ2/E,GACvBqQ,aAAchwF,QAAQgwF,GACtBvB,SAER,CA/kBAvkF,OAAOq1E,iBAAiBgS,GAAgC3sE,UAAW,CAC/DpP,MAAO,CAAE49B,YAAY,GACrB/9B,QAAS,CAAE+9B,YAAY,GACvB1iC,MAAO,CAAE0iC,YAAY,GACrBsvC,YAAa,CAAEtvC,YAAY,KAEW,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAegjC,GAAgC3sE,UAAW8zD,EAAe3jC,YAAa,CACzFziF,MAAO,kCACPokF,cAAc,IA6lBtB,MAAMvhC,GACF,WAAAgH,CAAYy2E,EAAsB,CAAC,EAAG/J,EAAc,CAAC,QACrBrsH,IAAxBo2H,EACAA,EAAsB,KAGtBrV,EAAaqV,EAAqB,mBAEtC,MAAM/K,EAAWG,GAAuBa,EAAa,oBAC/CgK,EAhHd,SAA8CvyG,EAAQouB,GAClD2uE,EAAiB/8F,EAAQouB,GACzB,MAAMy5E,EAAW7nG,EACX+iG,EAAwB8E,aAAgD,EAAIA,EAAS9E,sBACrF3pG,EAASyuG,aAAgD,EAAIA,EAASzuG,OACtEo5G,EAAO3K,aAAgD,EAAIA,EAAS2K,KACpE/lF,EAAQo7E,aAAgD,EAAIA,EAASp7E,MACrE15C,EAAO80H,aAAgD,EAAIA,EAAS90H,KAC1E,MAAO,CACHgwH,2BAAiD7mH,IAA1B6mH,OACnB7mH,EACAohH,EAAwCyF,EAAuB,GAAG30E,6CACtEh1B,YAAmBld,IAAXkd,OACJld,EACA41H,GAAsC14G,EAAQyuG,EAAU,GAAGz5E,8BAC/DokF,UAAet2H,IAATs2H,OACFt2H,EACA61H,GAAoCS,EAAM3K,EAAU,GAAGz5E,4BAC3D3B,WAAiBvwC,IAAVuwC,OACHvwC,EACA81H,GAAqCvlF,EAAOo7E,EAAU,GAAGz5E,6BAC7Dr7C,UAAemJ,IAATnJ,OAAqBmJ,EAAY+1H,GAA0Bl/H,EAAM,GAAGq7C,4BAElF,CAyFiCqkF,CAAqCH,EAAqB,mBAEnF,GADAI,GAAyB7iI,MACK,UAA1B0iI,EAAiBx/H,KAAkB,CACnC,QAAsBmJ,IAAlBqrH,EAASvhE,KACT,MAAM,IAAIk7D,WAAW,+DA3lErC,SAA+DtX,EAAQ+oB,EAAsBlM,GACzF,MAAM3xE,EAAalL,OAAO9uC,OAAOinH,GAA6Bz9D,WAC9D,IAAIgiE,EAAiB,OACjBC,EAAgB,IAAMxN,OAAoB78G,GAC1CsqH,EAAkB,IAAMzN,OAAoB78G,QACbA,IAA/By2H,EAAqBlmF,QACrB65E,EAAiB,IAAMqM,EAAqBlmF,MAAMqI,SAEpB54C,IAA9By2H,EAAqBH,OACrBjM,EAAgB,IAAMoM,EAAqBH,KAAK19E,SAEhB54C,IAAhCy2H,EAAqBv5G,SACrBotG,EAAkB94G,GAAUilH,EAAqBv5G,OAAO1L,IAE5D,MAAMq1G,EAAwB4P,EAAqB5P,sBACnD,GAA8B,IAA1BA,EACA,MAAM,IAAIjyC,UAAU,gDAExBu1C,GAAkCzc,EAAQ90D,EAAYwxE,EAAgBC,EAAeC,EAAiBC,EAAe1D,EACzH,CA2kEY6P,CAAsD/iI,KAAM0iI,EADtCjL,GAAqBC,EAAU,GAEzD,KACK,CACD,MAAMqB,EAAgBnB,GAAqBF,IA1dvD,SAAkE3d,EAAQ2oB,EAAkB9L,EAAemC,GACvG,MAAM9zE,EAAalL,OAAO9uC,OAAOm2H,GAAgC3sE,WACjE,IAAIgiE,EAAiB,OACjBC,EAAgB,IAAMxN,OAAoB78G,GAC1CsqH,EAAkB,IAAMzN,OAAoB78G,QACjBA,IAA3Bq2H,EAAiB9lF,QACjB65E,EAAiB,IAAMiM,EAAiB9lF,MAAMqI,SAEpB54C,IAA1Bq2H,EAAiBC,OACjBjM,EAAgB,IAAMgM,EAAiBC,KAAK19E,SAEhB54C,IAA5Bq2H,EAAiBn5G,SACjBotG,EAAkB94G,GAAU6kH,EAAiBn5G,OAAO1L,IAExDmkH,GAAqCjoB,EAAQ90D,EAAYwxE,EAAgBC,EAAeC,EAAiBC,EAAemC,EAC5H,CA6cYiK,CAAyDhjI,KAAM0iI,EADzCjL,GAAqBC,EAAU,GAC2CqB,EACpG,CACJ,CAIA,UAAIO,GACA,IAAKxL,GAAiB9tH,MAClB,MAAMijI,GAA4B,UAEtC,OAAOvU,GAAuB1uH,KAClC,CAOA,MAAAupB,CAAO1L,OAASxR,GACZ,OAAKyhH,GAAiB9tH,MAGlB0uH,GAAuB1uH,MAChBmpH,EAAoB,IAAIloC,UAAU,qDAEtC+qC,GAAqBhsH,KAAM6d,GALvBsrG,EAAoB8Z,GAA4B,UAM/D,CACA,SAAA19E,CAAU29E,OAAa72H,GACnB,IAAKyhH,GAAiB9tH,MAClB,MAAMijI,GAA4B,aAGtC,YAAqB52H,IAhH7B,SAA8B6rE,EAAS35B,GACnC2uE,EAAiBh1C,EAAS35B,GAC1B,MAAM/E,EAAO0+B,aAA8C,EAAIA,EAAQ1+B,KACvE,MAAO,CACHA,UAAentC,IAATmtC,OAAqBntC,EAAYg2H,GAAgC7oF,EAAM,GAAG+E,4BAExF,CAyGwB4kF,CAAqBD,EAAY,mBACrC1pF,KACDu0E,EAAmC/tH,MAEvC82H,GAAgC92H,KAC3C,CACA,WAAAslD,CAAY89E,EAAcF,EAAa,CAAC,GACpC,IAAKpV,GAAiB9tH,MAClB,MAAMijI,GAA4B,eAEtC5V,EAAuB+V,EAAc,EAAG,eACxC,MAAMC,EA/Ed,SAAqCjxF,EAAMmM,GACvC2uE,EAAiB96E,EAAMmM,GACvB,MAAM+kF,EAAWlxF,aAAwC,EAAIA,EAAKkxF,SAClEhW,EAAoBgW,EAAU,WAAY,wBAC1CzV,EAAqByV,EAAU,GAAG/kF,gCAClC,MAAMukC,EAAW1wC,aAAwC,EAAIA,EAAK0wC,SAGlE,OAFAwqC,EAAoBxqC,EAAU,WAAY,wBAC1Cs1C,GAAqBt1C,EAAU,GAAGvkC,gCAC3B,CAAE+kF,WAAUxgD,WACvB,CAsE0BygD,CAA4BH,EAAc,mBACtDlrD,EAAUoqD,GAAmBY,EAAY,oBAC/C,GAAIxU,GAAuB1uH,MACvB,MAAM,IAAIihF,UAAU,kFAExB,GAAIu4C,GAAuB6J,EAAUvgD,UACjC,MAAM,IAAI7B,UAAU,kFAIxB,OADA4oC,EADgB+V,GAAqB5/H,KAAMqjI,EAAUvgD,SAAU5K,EAAQ2nD,aAAc3nD,EAAQ4nD,aAAc5nD,EAAQs3C,cAAet3C,EAAQomD,SAEnI+E,EAAUC,QACrB,CACA,MAAAE,CAAOC,EAAaP,EAAa,CAAC,GAC9B,IAAKpV,GAAiB9tH,MAClB,OAAOmpH,EAAoB8Z,GAA4B,WAE3D,QAAoB52H,IAAhBo3H,EACA,OAAOta,EAAoB,wCAE/B,IAAKkP,GAAiBoL,GAClB,OAAOta,EAAoB,IAAIloC,UAAU,8EAE7C,IAAI/I,EACJ,IACIA,EAAUoqD,GAAmBY,EAAY,mBAC7C,CACA,MAAO1iI,GACH,OAAO2oH,EAAoB3oH,EAC/B,CACA,OAAIkuH,GAAuB1uH,MAChBmpH,EAAoB,IAAIloC,UAAU,8EAEzCu4C,GAAuBiK,GAChBta,EAAoB,IAAIloC,UAAU,8EAEtC2+C,GAAqB5/H,KAAMyjI,EAAavrD,EAAQ2nD,aAAc3nD,EAAQ4nD,aAAc5nD,EAAQs3C,cAAet3C,EAAQomD,OAC9H,CAYA,GAAAoF,GACI,IAAK5V,GAAiB9tH,MAClB,MAAMijI,GAA4B,OAGtC,OAAO3S,GAriBP8B,IADmBrY,EAqiBgB/5G,MApiBGmvH,2BAwG9C,SAA+BpV,GAC3B,IAMI4pB,EACAC,EACAC,EACAC,EACAC,EAVAxY,EAASwC,EAAmChU,GAC5CiqB,GAAU,EACVC,GAAsB,EACtBC,GAAsB,EACtBC,GAAY,EACZC,GAAY,EAMhB,MAAMC,EAAgBzpD,EAAW5tD,IAC7B+2G,EAAuB/2G,IAE3B,SAASs3G,EAAmBC,GACxB9a,EAAc8a,EAAWlY,eAAgBwK,IACjC0N,IAAehZ,IAGnBsH,GAAkCgR,EAAQ1U,0BAA2B0H,GACrEhE,GAAkCiR,EAAQ3U,0BAA2B0H,GAChEsN,GAAcC,GACfL,OAAqB13H,KAGjC,CACA,SAASm4H,IACDvN,GAA2B1L,KAC3BU,EAAmCV,GACnCA,EAASwC,EAAmChU,GAC5CuqB,EAAmB/Y,IA4DvBwD,EAAgCxD,EA1DZ,CAChB+C,YAAaroE,IAIT6jE,EAAe,KACXma,GAAsB,EACtBC,GAAsB,EACtB,MAAMO,EAASx+E,EACf,IAAIy+E,EAASz+E,EACb,IAAKk+E,IAAcC,EACf,IACIM,EAAS7T,GAAkB5qE,EAC/B,CACA,MAAO0+E,GAIH,OAHA9R,GAAkCgR,EAAQ1U,0BAA2BwV,GACrE9R,GAAkCiR,EAAQ3U,0BAA2BwV,QACrEZ,EAAqB/X,GAAqBjS,EAAQ4qB,GAEtD,CAECR,GACDvR,GAAoCiR,EAAQ1U,0BAA2BsV,GAEtEL,GACDxR,GAAoCkR,EAAQ3U,0BAA2BuV,GAE3EV,GAAU,EACNC,EACAW,IAEKV,GACLW,OAIZxW,YAAa,KACT2V,GAAU,EACLG,GACDxR,GAAkCkR,EAAQ1U,2BAEzCiV,GACDzR,GAAkCmR,EAAQ3U,2BAE1C0U,EAAQ1U,0BAA0BwE,kBAAkB5vH,OAAS,GAC7D+tH,GAAoC+R,EAAQ1U,0BAA2B,GAEvE2U,EAAQ3U,0BAA0BwE,kBAAkB5vH,OAAS,GAC7D+tH,GAAoCgS,EAAQ3U,0BAA2B,GAEtEgV,GAAcC,GACfL,OAAqB13H,IAG7B2iH,YAAa,KACTgV,GAAU,IAItB,CACA,SAASc,EAAmBt0B,EAAMu0B,GAC1BtW,EAA8BlD,KAC9BU,EAAmCV,GACnCA,EAASuL,GAAgC/c,GACzCuqB,EAAmB/Y,IAEvB,MAAMyZ,EAAaD,EAAajB,EAAUD,EACpCoB,EAAcF,EAAalB,EAAUC,EAiE3C3M,GAA6B5L,EAAQ/a,EAhEb,CACpB8d,YAAaroE,IAIT6jE,EAAe,KACXma,GAAsB,EACtBC,GAAsB,EACtB,MAAMgB,EAAeH,EAAaX,EAAYD,EAE9C,GADsBY,EAAaZ,EAAYC,EAiBrCc,GACNjT,GAA+C+S,EAAW7V,0BAA2BlpE,OAjBrE,CAChB,IAAIk/E,EACJ,IACIA,EAActU,GAAkB5qE,EACpC,CACA,MAAO0+E,GAIH,OAHA9R,GAAkCmS,EAAW7V,0BAA2BwV,GACxE9R,GAAkCoS,EAAY9V,0BAA2BwV,QACzEZ,EAAqB/X,GAAqBjS,EAAQ4qB,GAEtD,CACKO,GACDjT,GAA+C+S,EAAW7V,0BAA2BlpE,GAEzF2sE,GAAoCqS,EAAY9V,0BAA2BgW,EAC/E,CAIAnB,GAAU,EACNC,EACAW,IAEKV,GACLW,OAIZxW,YAAapoE,IACT+9E,GAAU,EACV,MAAMkB,EAAeH,EAAaX,EAAYD,EACxCiB,EAAgBL,EAAaZ,EAAYC,EAC1Cc,GACDvS,GAAkCqS,EAAW7V,2BAE5CiW,GACDzS,GAAkCsS,EAAY9V,gCAEpC9iH,IAAV45C,IACKi/E,GACDjT,GAA+C+S,EAAW7V,0BAA2BlpE,IAEpFm/E,GAAiBH,EAAY9V,0BAA0BwE,kBAAkB5vH,OAAS,GACnF+tH,GAAoCmT,EAAY9V,0BAA2B,IAG9E+V,GAAiBE,GAClBrB,OAAqB13H,IAG7B2iH,YAAa,KACTgV,GAAU,IAItB,CACA,SAASY,IACL,GAAIZ,EAEA,OADAC,GAAsB,EACf/a,OAAoB78G,GAE/B23H,GAAU,EACV,MAAM7R,EAAcG,GAA2CuR,EAAQ1U,2BAOvE,OANoB,OAAhBgD,EACAqS,IAGAM,EAAmB3S,EAAYT,OAAO,GAEnCxI,OAAoB78G,EAC/B,CACA,SAASw4H,IACL,GAAIb,EAEA,OADAE,GAAsB,EACfhb,OAAoB78G,GAE/B23H,GAAU,EACV,MAAM7R,EAAcG,GAA2CwR,EAAQ3U,2BAOvE,OANoB,OAAhBgD,EACAqS,IAGAM,EAAmB3S,EAAYT,OAAO,GAEnCxI,OAAoB78G,EAC/B,CAqBA,SAASoqH,IAET,CAIA,OAHAoN,EAAUwB,GAAyB5O,EAAgBmO,EAvBnD,SAA0B/mH,GAGtB,GAFAsmH,GAAY,EACZR,EAAU9lH,EACNumH,EAAW,CACX,MAAMkB,EAAkBhV,GAAoB,CAACqT,EAASC,IAChD2B,EAAevZ,GAAqBjS,EAAQurB,GAClDvB,EAAqBwB,EACzB,CACA,OAAOlB,CACX,GAeAP,EAAUuB,GAAyB5O,EAAgBoO,EAdnD,SAA0BhnH,GAGtB,GAFAumH,GAAY,EACZR,EAAU/lH,EACNsmH,EAAW,CACX,MAAMmB,EAAkBhV,GAAoB,CAACqT,EAASC,IAChD2B,EAAevZ,GAAqBjS,EAAQurB,GAClDvB,EAAqBwB,EACzB,CACA,OAAOlB,CACX,GAMAC,EAAmB/Y,GACZ,CAACsY,EAASC,EACrB,CAvUe0B,CAAsBzrB,GAIrC,SAAkCA,GAC9B,MAAMwR,EAASwC,EAAmChU,GAClD,IAII4pB,EACAC,EACAC,EACAC,EACAC,EARAC,GAAU,EACVyB,GAAY,EACZtB,GAAY,EACZC,GAAY,EAMhB,MAAMC,EAAgBzpD,EAAW5tD,IAC7B+2G,EAAuB/2G,IAE3B,SAAS0pG,IACL,OAAIsN,GACAyB,GAAY,EACLvc,OAAoB78G,KAE/B23H,GAAU,EA2CVjV,EAAgCxD,EA1CZ,CAChB+C,YAAaroE,IAIT6jE,EAAe,KACX2b,GAAY,EACZ,MAAMhB,EAASx+E,EACTy+E,EAASz+E,EAMVk+E,GACDzC,GAAuCmC,EAAQ1U,0BAA2BsV,GAEzEL,GACD1C,GAAuCoC,EAAQ3U,0BAA2BuV,GAE9EV,GAAU,EACNyB,GACA/O,OAIZrI,YAAa,KACT2V,GAAU,EACLG,GACD1C,GAAqCoC,EAAQ1U,2BAE5CiV,GACD3C,GAAqCqC,EAAQ3U,2BAE5CgV,GAAcC,GACfL,OAAqB13H,IAG7B2iH,YAAa,KACTgV,GAAU,KAIX9a,OAAoB78G,GAC/B,CAqBA,SAASoqH,IAET,CAUA,OATAoN,EAAU6B,GAAqBjP,EAAgBC,EAvB/C,SAA0B74G,GAGtB,GAFAsmH,GAAY,EACZR,EAAU9lH,EACNumH,EAAW,CACX,MAAMkB,EAAkBhV,GAAoB,CAACqT,EAASC,IAChD2B,EAAevZ,GAAqBjS,EAAQurB,GAClDvB,EAAqBwB,EACzB,CACA,OAAOlB,CACX,GAeAP,EAAU4B,GAAqBjP,EAAgBC,EAd/C,SAA0B74G,GAGtB,GAFAumH,GAAY,EACZR,EAAU/lH,EACNsmH,EAAW,CACX,MAAMmB,EAAkBhV,GAAoB,CAACqT,EAASC,IAChD2B,EAAevZ,GAAqBjS,EAAQurB,GAClDvB,EAAqBwB,EACzB,CACA,OAAOlB,CACX,GAMA5a,EAAc8B,EAAOc,eAAiBwK,IAClC8K,GAAqCkC,EAAQ1U,0BAA2B0H,GACxE8K,GAAqCmC,EAAQ3U,0BAA2B0H,GACnEsN,GAAcC,GACfL,OAAqB13H,KAGtB,CAACw3H,EAASC,EACrB,CApGW6B,CAAyB5rB,IAJpC,IAA2BA,CAuiBvB,CACA,MAAAjuG,CAAOo3H,OAAa72H,GAChB,IAAKyhH,GAAiB9tH,MAClB,MAAMijI,GAA4B,UAGtC,OA14FR,SAA4ClpB,EAAQyV,GAChD,MAAMjE,EAASwC,EAAmChU,GAC5C6rB,EAAO,IAAIrW,GAAgChE,EAAQiE,GACnDhrC,EAAWzqC,OAAO9uC,OAAO+kH,IAE/B,OADAxrC,EAAS0rC,mBAAqB0V,EACvBphD,CACX,CAo4FeqhD,CAAmC7lI,KAvKlD,SAAgCk4E,GAC5Bg1C,EAAiBh1C,EAqKsC,mBApKvD,MAAMs3C,EAAgBt3C,aAA8C,EAAIA,EAAQs3C,cAChF,MAAO,CAAEA,cAAe3/E,QAAQ2/E,GACpC,CAkKwBsW,CAAuB5C,GACiB1T,cAC5D,EA0BJ,SAASkW,GAAqBjP,EAAgBC,EAAeC,EAAiBC,EAAgB,EAAGmC,EAAgB,IAAM,GACnH,MAAMhf,EAAShgE,OAAO9uC,OAAO+5C,GAAeyP,WAI5C,OAHAouE,GAAyB9oB,GAEzBioB,GAAqCjoB,EADlBhgE,OAAO9uC,OAAOm2H,GAAgC3sE,WACRgiE,EAAgBC,EAAeC,EAAiBC,EAAemC,GACjHhf,CACX,CAEA,SAASsrB,GAAyB5O,EAAgBC,EAAeC,GAC7D,MAAM5c,EAAShgE,OAAO9uC,OAAO+5C,GAAeyP,WAI5C,OAHAouE,GAAyB9oB,GAEzByc,GAAkCzc,EADfhgE,OAAO9uC,OAAOinH,GAA6Bz9D,WACRgiE,EAAgBC,EAAeC,EAAiB,OAAGtqH,GAClG0tG,CACX,CACA,SAAS8oB,GAAyB9oB,GAC9BA,EAAO7+B,OAAS,WAChB6+B,EAAO0R,aAAUp/G,EACjB0tG,EAAO+R,kBAAez/G,EACtB0tG,EAAOmV,YAAa,CACxB,CACA,SAASpB,GAAiBlF,GACtB,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,8BAGtCA,aAAa5jE,EACxB,CACA,SAAS0pE,GAAuB3U,GAC5B,YAAuB1tG,IAAnB0tG,EAAO0R,OAIf,CAEA,SAASO,GAAqBjS,EAAQl8F,GAElC,GADAk8F,EAAOmV,YAAa,EACE,WAAlBnV,EAAO7+B,OACP,OAAOguC,OAAoB78G,GAE/B,GAAsB,YAAlB0tG,EAAO7+B,OACP,OAAOiuC,EAAoBpP,EAAO+R,cAEtC0J,GAAoBzb,GACpB,MAAMwR,EAASxR,EAAO0R,QAQtB,YAPep/G,IAAXk/G,GAAwB0L,GAA2B1L,KACnDA,EAAOmJ,kBAAkBngC,QAAQkgC,IAC7BA,EAAgBpG,iBAAYhiH,KAEhCk/G,EAAOmJ,kBAAoB,IAAIrK,GAG5BX,EADqB3P,EAAOoV,0BAA0BzC,GAAa7uG,GACzB4qG,EACrD,CACA,SAAS+M,GAAoBzb,GACzBA,EAAO7+B,OAAS,SAChB,MAAMqwC,EAASxR,EAAO0R,aACPp/G,IAAXk/G,IAGJI,EAAkCJ,GAC9BkD,EAA8BlD,KAC9BA,EAAO4C,cAAc55B,QAAQ25B,IACzBA,EAAYG,gBAEhB9C,EAAO4C,cAAgB,IAAI9D,GAEnC,CACA,SAAS+L,GAAoBrc,EAAQv5G,GACjCu5G,EAAO7+B,OAAS,UAChB6+B,EAAO+R,aAAetrH,EACtB,MAAM+qH,EAASxR,EAAO0R,aACPp/G,IAAXk/G,IAGJW,EAAiCX,EAAQ/qH,GACrCiuH,EAA8BlD,IAC9BA,EAAO4C,cAAc55B,QAAQ25B,IACzBA,EAAYc,YAAYxuH,KAE5B+qH,EAAO4C,cAAgB,IAAI9D,IAG3BkB,EAAOmJ,kBAAkBngC,QAAQkgC,IAC7BA,EAAgBzF,YAAYxuH,KAEhC+qH,EAAOmJ,kBAAoB,IAAIrK,GAEvC,CAEA,SAAS4Y,GAA4BxgI,GACjC,OAAO,IAAIw+E,UAAU,4BAA4Bx+E,yCACrD,CAEA,SAASsjI,GAA2B7iF,EAAM3E,GACtC2uE,EAAiBhqE,EAAM3E,GACvB,MAAMq4E,EAAgB1zE,aAAwC,EAAIA,EAAK0zE,cAEvE,OADAtJ,EAAoBsJ,EAAe,gBAAiB,uBAC7C,CACHA,cAAerJ,EAA0BqJ,GAEjD,CA/HA78E,OAAOq1E,iBAAiBpqE,GAAeyP,UAAW,CAC9ClrC,OAAQ,CAAE05D,YAAY,GACtB19B,UAAW,CAAE09B,YAAY,GACzB39B,YAAa,CAAE29B,YAAY,GAC3BugD,OAAQ,CAAEvgD,YAAY,GACtBygD,IAAK,CAAEzgD,YAAY,GACnBn3E,OAAQ,CAAEm3E,YAAY,GACtBq2C,OAAQ,CAAEr2C,YAAY,KAEgB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAep5C,GAAeyP,UAAW8zD,EAAe3jC,YAAa,CACxEziF,MAAO,iBACPokF,cAAc,IAGsB,iBAAjCgiC,EAAelkC,eACtBtqC,OAAOqkD,eAAep5C,GAAeyP,UAAW8zD,EAAelkC,cAAe,CAC1EliF,MAAO6iD,GAAeyP,UAAU3oD,OAChCg3E,UAAU,EACVyD,cAAc,IA+GtB,MAAMy/C,GAA0B//E,GACrBA,EAAMkvC,WAEjB,IACIp7C,OAAOqkD,eAAe4nC,GAAwB,OAAQ,CAClD7jI,MAAO,OACPokF,cAAc,GAEtB,CACA,MAAO1kF,GAGP,CAMA,MAAMokI,GACF,WAAAj6E,CAAYksB,GACRm1C,EAAuBn1C,EAAS,EAAG,6BACnCA,EAAU6tD,GAA2B7tD,EAAS,mBAC9Cl4E,KAAKkmI,wCAA0ChuD,EAAQ0+C,aAC3D,CAIA,iBAAIA,GACA,IAAKuP,GAA4BnmI,MAC7B,MAAMomI,GAA8B,iBAExC,OAAOpmI,KAAKkmI,uCAChB,CAIA,QAAI/vE,GACA,IAAKgwE,GAA4BnmI,MAC7B,MAAMomI,GAA8B,QAExC,OAAOJ,EACX,EAaJ,SAASI,GAA8B3jI,GACnC,OAAO,IAAIw+E,UAAU,uCAAuCx+E,oDAChE,CACA,SAAS0jI,GAA4Bvd,GACjC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,4CAGtCA,aAAaqd,EACxB,CAtBAlsF,OAAOq1E,iBAAiB6W,GAA0BxxE,UAAW,CACzDmiE,cAAe,CAAE3zC,YAAY,GAC7B9sB,KAAM,CAAE8sB,YAAY,KAEkB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe6nC,GAA0BxxE,UAAW8zD,EAAe3jC,YAAa,CACnFziF,MAAO,4BACPokF,cAAc,IAkBtB,MAAM8/C,GAAoB,IACf,EAEX,IACItsF,OAAOqkD,eAAeioC,GAAmB,OAAQ,CAC7ClkI,MAAO,OACPokF,cAAc,GAEtB,CACA,MAAO1kF,GAGP,CAMA,MAAMykI,GACF,WAAAt6E,CAAYksB,GACRm1C,EAAuBn1C,EAAS,EAAG,wBACnCA,EAAU6tD,GAA2B7tD,EAAS,mBAC9Cl4E,KAAKumI,mCAAqCruD,EAAQ0+C,aACtD,CAIA,iBAAIA,GACA,IAAK4P,GAAuBxmI,MACxB,MAAMymI,GAAyB,iBAEnC,OAAOzmI,KAAKumI,kCAChB,CAKA,QAAIpwE,GACA,IAAKqwE,GAAuBxmI,MACxB,MAAMymI,GAAyB,QAEnC,OAAOJ,EACX,EAaJ,SAASI,GAAyBhkI,GAC9B,OAAO,IAAIw+E,UAAU,kCAAkCx+E,+CAC3D,CACA,SAAS+jI,GAAuB5d,GAC5B,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,uCAGtCA,aAAa0d,EACxB,CAuBA,SAASI,GAAgCl1G,EAAIwmG,EAAUz5E,GAEnD,OADA4uE,EAAe37F,EAAI+sB,GACX0G,GAAemlE,EAAY54F,EAAIwmG,EAAU,CAAC/yE,GACtD,CACA,SAAS0hF,GAAgCn1G,EAAIwmG,EAAUz5E,GAEnD,OADA4uE,EAAe37F,EAAI+sB,GACX0G,GAAeglE,EAAYz4F,EAAIwmG,EAAU,CAAC/yE,GACtD,CACA,SAAS2hF,GAAoCp1G,EAAIwmG,EAAUz5E,GAEvD,OADA4uE,EAAe37F,EAAI+sB,GACZ,CAAC0H,EAAOhB,IAAemlE,EAAY54F,EAAIwmG,EAAU,CAAC/xE,EAAOhB,GACpE,CAxDAlL,OAAOq1E,iBAAiBkX,GAAqB7xE,UAAW,CACpDmiE,cAAe,CAAE3zC,YAAY,GAC7B9sB,KAAM,CAAE8sB,YAAY,KAEkB,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAekoC,GAAqB7xE,UAAW8zD,EAAe3jC,YAAa,CAC9EziF,MAAO,uBACPokF,cAAc,IA4DtB,MAAMsgD,GACF,WAAA76E,CAAY86E,EAAiB,CAAC,EAAGC,EAAsB,CAAC,EAAGC,EAAsB,CAAC,QACvD36H,IAAnBy6H,IACAA,EAAiB,MAErB,MAAMG,EAAmBpP,GAAuBkP,EAAqB,oBAC/DG,EAAmBrP,GAAuBmP,EAAqB,mBAC/DG,EAlDd,SAA4BnP,EAAUz5E,GAClC2uE,EAAiB8K,EAAUz5E,GAC3B,MAAM30B,EAAQouG,aAAgD,EAAIA,EAASpuG,MACrEw9G,EAAepP,aAAgD,EAAIA,EAASoP,aAC5ExqF,EAAQo7E,aAAgD,EAAIA,EAASp7E,MACrEymF,EAAYrL,aAAgD,EAAIA,EAASqL,UACzEgE,EAAerP,aAAgD,EAAIA,EAASqP,aAClF,MAAO,CACHz9G,WAAiBvd,IAAVud,OACHvd,EACAq6H,GAAgC98G,EAAOouG,EAAU,GAAGz5E,6BACxD6oF,eACAxqF,WAAiBvwC,IAAVuwC,OACHvwC,EACAs6H,GAAgC/pF,EAAOo7E,EAAU,GAAGz5E,6BACxD8kF,eAAyBh3H,IAAdg3H,OACPh3H,EACAu6H,GAAoCvD,EAAWrL,EAAU,GAAGz5E,iCAChE8oF,eAER,CA8B4BC,CAAmBR,EAAgB,mBACvD,QAAiCz6H,IAA7B86H,EAAYC,aACZ,MAAM,IAAI/V,WAAW,kCAEzB,QAAiChlH,IAA7B86H,EAAYE,aACZ,MAAM,IAAIhW,WAAW,kCAEzB,MAAMkW,EAAwB9P,GAAqByP,EAAkB,GAC/DM,EAAwB5P,GAAqBsP,GAC7CO,EAAwBhQ,GAAqBwP,EAAkB,GAC/DS,EAAwB9P,GAAqBqP,GACnD,IAAIU,GA0CZ,SAAmC5tB,EAAQ6tB,EAAcH,EAAuBC,EAAuBH,EAAuBC,GAC1H,SAAS/Q,IACL,OAAOmR,CACX,CAUA7tB,EAAO8tB,UAprEX,SAA8BpR,EAAgBwC,EAAgBC,EAAgBC,EAAgBvC,EAAgB,EAAGmC,EAAgB,IAAM,GACnI,MAAMhf,EAAShgE,OAAO9uC,OAAOutH,GAAe/jE,WAI5C,OAHAqkE,GAAyB/e,GAEzBqf,GAAqCrf,EADlBhgE,OAAO9uC,OAAO+tH,GAAgCvkE,WACRgiE,EAAgBwC,EAAgBC,EAAgBC,EAAgBvC,EAAemC,GACjIhf,CACX,CA8qEuB+tB,CAAqBrR,EATxC,SAAwBxwE,GACpB,OAoMR,SAAkD8zD,EAAQ9zD,GACtD,MAAMhB,EAAa80D,EAAOguB,2BAC1B,OAAIhuB,EAAOugB,cAEA5Q,EAD2B3P,EAAOiuB,2BACc,KACnD,MAAMllD,EAAWi3B,EAAO8tB,UAExB,GAAc,aADA/kD,EAAS5H,OAEnB,MAAM4H,EAASgpC,aAEnB,OAAOmc,GAAiDhjF,EAAYgB,KAGrEgiF,GAAiDhjF,EAAYgB,EACxE,CAlNeiiF,CAAyCnuB,EAAQ9zD,EAC5D,EAIA,WACI,OAmNR,SAAkD8zD,GAE9C,MAAMupB,EAAWvpB,EAAOouB,UAClBljF,EAAa80D,EAAOguB,2BACpBK,EAAenjF,EAAWojF,kBAGhC,OAFAC,GAAgDrjF,GAEzCykE,EAAqB0e,EAAc,KACtC,GAAwB,YAApB9E,EAASpoD,OACT,MAAMooD,EAASxX,aAEnB2V,GAAqC6B,EAASnU,4BAC/C0H,IAEC,MADA0R,GAAqBxuB,EAAQ8c,GACvByM,EAASxX,cAEvB,CAnOe0c,CAAyCzuB,EACpD,EALA,SAAwBl8F,GACpB,OAgNR,SAAkDk8F,EAAQl8F,GAItD,OADA0qH,GAAqBxuB,EAAQl8F,GACtBqrG,OAAoB78G,EAC/B,CArNeo8H,CAAyC1uB,EAAQl8F,EAC5D,EAIwG4pH,EAAuBC,GAQ/H3tB,EAAOouB,UAAYzC,GAAqBjP,EAPxC,WACI,OAiOR,SAAmD1c,GAI/C,OAFA2uB,GAA+B3uB,GAAQ,GAEhCA,EAAOiuB,0BAClB,CAtOeW,CAA0C5uB,EACrD,EACA,SAAyBl8F,GAErB,OADA+qH,GAA4C7uB,EAAQl8F,GAC7CqrG,OAAoB78G,EAC/B,EACwFk7H,EAAuBC,GAE/GztB,EAAOugB,mBAAgBjuH,EACvB0tG,EAAOiuB,gCAA6B37H,EACpC0tG,EAAO8uB,wCAAqCx8H,EAC5Cq8H,GAA+B3uB,GAAQ,GACvCA,EAAOguB,gCAA6B17H,CACxC,CAlEQy8H,CAA0B9oI,KAHL46E,EAAW5tD,IAC5B26G,EAAuB36G,IAEmBy6G,EAAuBC,EAAuBH,EAAuBC,GAgL3H,SAA8DztB,EAAQotB,GAClE,MAAMliF,EAAalL,OAAO9uC,OAAO89H,GAAiCt0E,WAClE,IAAIu0E,EAAsB/iF,IACtB,IAEI,OADAgjF,GAAwChkF,EAAYgB,GAC7CijE,OAAoB78G,EAC/B,CACA,MAAO68H,GACH,OAAO/f,EAAoB+f,EAC/B,GAEAC,EAAiB,IAAMjgB,OAAoB78G,QACjBA,IAA1B86H,EAAY9D,YACZ2F,EAAqB/iF,GAASkhF,EAAY9D,UAAUp9E,EAAOhB,SAErC54C,IAAtB86H,EAAYv9G,QACZu/G,EAAiB,IAAMhC,EAAYv9G,MAAMq7B,IAtBjD,SAA+C80D,EAAQ90D,EAAY+jF,EAAoBG,GACnFlkF,EAAWmkF,2BAA6BrvB,EACxCA,EAAOguB,2BAA6B9iF,EACpCA,EAAWokF,oBAAsBL,EACjC/jF,EAAWojF,gBAAkBc,CACjC,CAmBIG,CAAsCvvB,EAAQ90D,EAAY+jF,EAAoBG,EAClF,CAlMQI,CAAqDvpI,KAAMmnI,QACjC96H,IAAtB86H,EAAYvqF,MACZ+qF,EAAqBR,EAAYvqF,MAAM58C,KAAK+nI,6BAG5CJ,OAAqBt7H,EAE7B,CAIA,YAAIi3H,GACA,IAAKkG,GAAkBxpI,MACnB,MAAMypI,GAA0B,YAEpC,OAAOzpI,KAAKmoI,SAChB,CAIA,YAAIrlD,GACA,IAAK0mD,GAAkBxpI,MACnB,MAAMypI,GAA0B,YAEpC,OAAOzpI,KAAK6nI,SAChB,EAyCJ,SAAS2B,GAAkB5gB,GACvB,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,+BAGtCA,aAAaie,EACxB,CAEA,SAAS0B,GAAqBxuB,EAAQv5G,GAClCmhI,GAAqC5nB,EAAOouB,UAAUhZ,0BAA2B3uH,GACjFooI,GAA4C7uB,EAAQv5G,EACxD,CACA,SAASooI,GAA4C7uB,EAAQv5G,GACzD8nI,GAAgDvuB,EAAOguB,4BACvDnK,GAA6C7jB,EAAO8tB,UAAU7N,0BAA2Bx5H,GACrFu5G,EAAOugB,eAIPoO,GAA+B3uB,GAAQ,EAE/C,CACA,SAAS2uB,GAA+B3uB,EAAQgiB,QAEF1vH,IAAtC0tG,EAAOiuB,4BACPjuB,EAAO8uB,qCAEX9uB,EAAOiuB,2BAA6BptD,EAAW5tD,IAC3C+sF,EAAO8uB,mCAAqC77G,IAEhD+sF,EAAOugB,cAAgByB,CAC3B,CAxEAhiF,OAAOq1E,iBAAiByX,GAAgBpyE,UAAW,CAC/C6uE,SAAU,CAAErgD,YAAY,GACxBH,SAAU,CAAEG,YAAY,KAEc,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAeyoC,GAAgBpyE,UAAW8zD,EAAe3jC,YAAa,CACzEziF,MAAO,kBACPokF,cAAc,IAwEtB,MAAMwiD,GACF,WAAA/8E,GACI,MAAM,IAAIi1B,UAAU,sBACxB,CAIA,eAAIsxC,GACA,IAAKmX,GAAmC1pI,MACpC,MAAM2pI,GAAqC,eAG/C,OAAOpI,GADoBvhI,KAAKopI,2BAA2BjB,UAAUhZ,0BAEzE,CACA,OAAAjqE,CAAQe,OAAQ55C,GACZ,IAAKq9H,GAAmC1pI,MACpC,MAAM2pI,GAAqC,WAE/CV,GAAwCjpI,KAAMimD,EAClD,CAKA,KAAA1F,CAAM1iC,OAASxR,GACX,IAAKq9H,GAAmC1pI,MACpC,MAAM2pI,GAAqC,SAwFvD,IAA2DnpI,IAtFPqd,EAuFhD0qH,GAvF0CvoI,KAuFVopI,2BAA4B5oI,EAtF5D,CAKA,SAAAopI,GACI,IAAKF,GAAmC1pI,MACpC,MAAM2pI,GAAqC,cAwFvD,SAAmD1kF,GAC/C,MAAM80D,EAAS90D,EAAWmkF,2BAE1B3H,GAD2B1nB,EAAOouB,UAAUhZ,2BAG5CyZ,GAA4C7uB,EAD9B,IAAI94B,UAAU,8BAEhC,CA5FQ4oD,CAA0C7pI,KAC9C,EAeJ,SAAS0pI,GAAmC9gB,GACxC,QAAKD,EAAaC,MAGb7uE,OAAO0a,UAAUzyD,eAAejC,KAAK6oH,EAAG,+BAGtCA,aAAamgB,EACxB,CA2BA,SAAST,GAAgDrjF,GACrDA,EAAWokF,yBAAsBh9H,EACjC44C,EAAWojF,qBAAkBh8H,CACjC,CACA,SAAS48H,GAAwChkF,EAAYgB,GACzD,MAAM8zD,EAAS90D,EAAWmkF,2BACpBU,EAAqB/vB,EAAOouB,UAAUhZ,0BAC5C,IAAKqS,GAAiDsI,GAClD,MAAM,IAAI7oD,UAAU,wDAIxB,IACIygD,GAAuCoI,EAAoB7jF,EAC/D,CACA,MAAOzlD,GAGH,MADAooI,GAA4C7uB,EAAQv5G,GAC9Cu5G,EAAOouB,UAAUrc,YAC3B,CACA,MAAMiQ,EA3oCV,SAAwD92E,GACpD,OAAI88E,GAA8C98E,EAItD,CAsoCyB8kF,CAA+CD,GAChE/N,IAAiBhiB,EAAOugB,eACxBoO,GAA+B3uB,GAAQ,EAE/C,CAIA,SAASkuB,GAAiDhjF,EAAYgB,GAElE,OAAOyjE,EADkBzkE,EAAWokF,oBAAoBpjF,QACV55C,EAAWwqH,IAErD,MADA0R,GAAqBtjF,EAAWmkF,2BAA4BvS,GACtDA,GAEd,CAuDA,SAAS8S,GAAqClnI,GAC1C,OAAO,IAAIw+E,UAAU,8CAA8Cx+E,2DACvE,CAEA,SAASgnI,GAA0BhnI,GAC/B,OAAO,IAAIw+E,UAAU,6BAA6Bx+E,0CACtD,CA/IAs3C,OAAOq1E,iBAAiB2Z,GAAiCt0E,UAAW,CAChEvP,QAAS,CAAE+9B,YAAY,GACvB1iC,MAAO,CAAE0iC,YAAY,GACrB2mD,UAAW,CAAE3mD,YAAY,GACzBsvC,YAAa,CAAEtvC,YAAY,KAEW,iBAA/BslC,EAAe3jC,aACtB7qC,OAAOqkD,eAAe2qC,GAAiCt0E,UAAW8zD,EAAe3jC,YAAa,CAC1FziF,MAAO,mCACPokF,cAAc,IAwItB6Q,EAAQ6uC,0BAA4BA,GACpC7uC,EAAQkvC,qBAAuBA,GAC/BlvC,EAAQ86B,6BAA+BA,GACvC96B,EAAQpyC,eAAiBA,GACzBoyC,EAAQ2/B,yBAA2BA,GACnC3/B,EAAQm6B,0BAA4BA,GACpCn6B,EAAQgqC,gCAAkCA,GAC1ChqC,EAAQ42B,4BAA8BA,EACtC52B,EAAQyvC,gBAAkBA,GAC1BzvC,EAAQ2xC,iCAAmCA,GAC3C3xC,EAAQohC,eAAiBA,GACzBphC,EAAQ4hC,gCAAkCA,GAC1C5hC,EAAQ0iC,4BAA8BA,GAEtC//E,OAAOqkD,eAAehH,EAAS,aAAc,CAAEj1F,OAAO,GAEzD,EA/mIkEmmH,EAAQlxB,E,uBCJ3ED,EAAOC,QAAU7G,QAAQ,S,sBCAzB4G,EAAOC,QAAU7G,QAAQ,S,uBCAzB4G,EAAOC,QAAU7G,QAAQ,S,uBCAzB4G,EAAOC,QAAU7G,QAAQ,K,uBCAzB4G,EAAOC,QAAU7G,QAAQ,e,uBCAzB4G,EAAOC,QAAU7G,QAAQ,kB,sBCAzB4G,EAAOC,QAAU7G,QAAQ,K,uBCAzB4G,EAAOC,QAAU7G,QAAQ,O,uBCAzB4G,EAAOC,QAAU7G,QAAQ,iB,cCIzB,IAAKvL,WAAWhgC,eAId,IACE,MAAMi3B,EAAU,EAAQ,OAClB,YAAE+tD,GAAgB/tD,EACxB,IACEA,EAAQ+tD,YAAc,OACtBjwF,OAAOkwF,OAAOjlD,WAAY,EAAQ,OAClC/I,EAAQ+tD,YAAcA,CACxB,CAAE,MAAOzpF,GAEP,MADA07B,EAAQ+tD,YAAcA,EAChBzpF,CACR,CACF,CAAE,MAAOA,GAEPxG,OAAOkwF,OAAOjlD,WAAY,EAAQ,MACpC,CAGF,IAGE,MAAM,KAAErjC,GAAS,EAAQ,KACrBA,IAASA,EAAK8S,UAAUslD,SAC1Bp4D,EAAK8S,UAAUslD,OAAS,SAAemwB,GACrC,IAAI57C,EAAW,EACf,MAAM67C,EAAOnqI,KAEb,OAAO,IAAIglD,eAAe,CACxB9hD,KAAM,QACN,UAAMy/H,CAAMyH,GACV,MAAMnkF,EAAQkkF,EAAKt6H,MAAMy+E,EAAU5hF,KAAKgC,IAAIy7H,EAAKh0E,KAAMm4B,EAnC/C,QAoCFlpB,QAAenf,EAAMokF,cAC3B/7C,GAAYlpB,EAAO+vB,WACnBi1C,EAAKllF,QAAQ,IAAIY,WAAWsf,IAExBkpB,IAAa67C,EAAKh0E,MACpBi0E,EAAK/kF,OAET,GAEJ,EAEJ,CAAE,MAAO9E,GAAQ,C,0DC/CjB,MAAM+pF,EAAQ,cAAmB,IAC/B,GAAgB,EAChB,GAAQ,GAOR,WAAAt+E,CAAau+E,EAAUn2E,EAAU8jB,EAAU,CAAC,GAC1C,GAAIl0E,UAAUD,OAAS,EACrB,MAAM,IAAIk9E,UAAU,8DAA8Dj9E,UAAUD,mBAE9FkzF,MAAMszC,EAAUryD,GAEA,OAAZA,IAAkBA,EAAU,CAAC,GAGjC,MAAMsyD,OAAwCn+H,IAAzB6rE,EAAQsyD,aAA6BlwG,KAAK+P,MAAQwiF,OAAO30C,EAAQsyD,cACjF3d,OAAOh9D,MAAM26E,KAChBxqI,MAAK,EAAgBwqI,GAGvBxqI,MAAK,EAAQisD,OAAOmI,EACtB,CAEA,QAAI3xD,GACF,OAAOzC,MAAK,CACd,CAEA,gBAAIwqI,GACF,OAAOxqI,MAAK,CACd,CAEA,IAAKwoH,OAAO5jC,eACV,MAAO,MACT,CAEA,OAAQ4jC,OAAOlkC,aAAchtC,GAC3B,QAASA,GAAUA,aAAkB,KACnC,WAAW7nC,KAAK6nC,EAAOkxE,OAAO5jC,aAClC,GAKF,EADoB0lD,C,8FC/CpB,MAAM,EAA+B/5C,QAAQ,WCAvC,EAA+BA,QAAQ,a,kCCO7C,MAAM,KAAEoK,GAAS,WAMX8vC,EAAe,CAACp7H,EAAMnM,IAASwnI,GAAS,IAAA1vC,UAAS3rF,GAAOA,EAAMnM,GAO9DynI,EAAW,CAACt7H,EAAMnM,IAASy3F,EAAKtrF,GAAMkqE,KAAKohB,GAAQ+vC,EAAS/vC,EAAMtrF,EAAMnM,IAOxE0nI,EAAW,CAACv7H,EAAMnM,IAASy3F,EAAKtrF,GAAMkqE,KAAKohB,GAAQkwC,EAASlwC,EAAMtrF,EAAMnM,IAMxE4nI,EAAe,CAACz7H,EAAMnM,IAAS2nI,GAAS,IAAA7vC,UAAS3rF,GAAOA,EAAMnM,GAG9DwnI,EAAW,CAAC/vC,EAAMtrF,EAAMnM,EAAO,KAAO,IAAI,IAAK,CAAC,IAAI6nI,EAAa,CACrE17H,OACA8mD,KAAMwkC,EAAKxkC,KACXq0E,aAAc7vC,EAAKqwC,QACnBpuF,MAAO,KACJ,CAAE15C,SAGD2nI,EAAW,CAAClwC,EAAMtrF,EAAMnM,EAAO,KAAO,IAAI,IAAK,CAAC,IAAI6nI,EAAa,CACrE17H,OACA8mD,KAAMwkC,EAAKxkC,KACXq0E,aAAc7vC,EAAKqwC,QACnBpuF,MAAO,MACJ,IAAA0gD,UAASjuF,GAAO,CAAEnM,OAAMsnI,aAAc7vC,EAAKqwC,UAShD,MAAMD,EACJ,GACA,GAEA,WAAA/+E,CAAaksB,GACXl4E,MAAK,EAAQk4E,EAAQ7oE,KACrBrP,MAAK,EAASk4E,EAAQt7B,MACtB58C,KAAKm2D,KAAO+hB,EAAQ/hB,KACpBn2D,KAAKwqI,aAAetyD,EAAQsyD,YAC9B,CAMA,KAAA36H,CAAO+sC,EAAO8tC,GACZ,OAAO,IAAIqgD,EAAa,CACtB17H,KAAMrP,MAAK,EACXwqI,aAAcxqI,KAAKwqI,aACnBr0E,KAAMu0B,EAAM9tC,EACZA,MAAO58C,MAAK,EAAS48C,GAEzB,CAEA,YAAQm9D,GACN,MAAM,QAAEixB,SAAkBrwC,EAAK36F,MAAK,GACpC,GAAIgrI,EAAUhrI,KAAKwqI,aACjB,MAAM,IAAI,EAAa,0IAA2I,2BAE5J,IAAAS,kBAAiBjrI,MAAK,EAAO,CACnC48C,MAAO58C,MAAK,EACZ0qF,IAAK1qF,MAAK,EAASA,KAAKm2D,KAAO,GAEnC,CAEA,IAAKqyD,OAAO5jC,eACV,MAAO,MACT,E,2BCpFFqQ,eAAiBi2C,EAAYhwG,EAAOge,GAAQ,GAC1C,IAAK,MAAM6hE,KAAQ7/E,EACjB,GAAI,WAAY6/E,QAC6CA,EAAKhB,cAC3D,GAAI7hB,YAAY85B,OAAOjX,GAC5B,GAAI7hE,EAAO,CACT,IAAIo1C,EAAWysB,EAAKgW,WACpB,MAAMrmC,EAAMqwB,EAAKgW,WAAahW,EAAK5lB,WACnC,KAAO7G,IAAa5D,GAAK,CACvB,MAAMv0B,EAAOzpD,KAAKgC,IAAIg8E,EAAM4D,EAZpB,OAaFroC,EAAQ80D,EAAK31C,OAAOv1D,MAAMy+E,EAAUA,EAAWn4B,GACrDm4B,GAAYroC,EAAMkvC,iBACZ,IAAIrvC,WAAWG,EACvB,CACF,YACQ80D,MAGH,CAEL,IAAIzsB,EAAW,EAAG3iC,EAAI,EACtB,KAAO2iC,IAAa3iC,EAAEwK,MAAM,CAC1B,MAAMlQ,EAAQ0F,EAAE97C,MAAMy+E,EAAU5hF,KAAKgC,IAAIi9C,EAAEwK,KAAMm4B,EAzBvC,QA0BJlpB,QAAenf,EAAMokF,cAC3B/7C,GAAYlpB,EAAO+vB,iBACb,IAAIrvC,WAAWsf,EACvB,CACF,CAEJ,C,yBAEA,MAAM+lE,EAAQ,MAAMxpF,EAElB,GAAS,GACT,GAAQ,GACR,GAAQ,EACR,GAAW,cAUX,WAAAqK,CAAao/E,EAAY,GAAIlzD,EAAU,CAAC,GACtC,GAAyB,iBAAdkzD,GAAwC,OAAdA,EACnC,MAAM,IAAInqD,UAAU,qFAGtB,GAA0C,mBAA/BmqD,EAAU5iB,OAAOhkC,UAC1B,MAAM,IAAIvD,UAAU,oFAGtB,GAAuB,iBAAZ/I,GAA2C,mBAAZA,EACxC,MAAM,IAAI+I,UAAU,yEAGN,OAAZ/I,IAAkBA,EAAU,CAAC,GAEjC,MAAMmzD,EAAU,IAAIlmF,YACpB,IAAK,MAAMu6C,KAAW0rC,EAAW,CAC/B,IAAIrwB,EAEFA,EADE7iB,YAAY85B,OAAOtyB,GACd,IAAI55C,WAAW45C,EAAQt6B,OAAOv1D,MAAM6vF,EAAQqxB,WAAYrxB,EAAQqxB,WAAarxB,EAAQvK,aACnFuK,aAAmBxH,YACrB,IAAIpyC,WAAW45C,EAAQ7vF,MAAM,IAC3B6vF,aAAmB/9C,EACrB+9C,EAEA2rC,EAAQjmF,OAAO,GAAGs6C,KAG3B1/F,MAAK,GAASk4F,YAAY85B,OAAOjX,GAAQA,EAAK5lB,WAAa4lB,EAAK5kD,KAChEn2D,MAAK,EAAO+P,KAAKgrG,EACnB,CAEA/6G,MAAK,EAAW,QAAuBqM,IAApB6rE,EAAQozD,QAAwB,cAAgBpzD,EAAQozD,UAC3E,MAAMpoI,OAAwBmJ,IAAjB6rE,EAAQh1E,KAAqB,GAAK+oD,OAAOisB,EAAQh1E,MAC9DlD,MAAK,EAAQ,iBAAiByP,KAAKvM,GAAQA,EAAO,EACpD,CAMA,QAAIizD,GACF,OAAOn2D,MAAK,CACd,CAKA,QAAIkD,GACF,OAAOlD,MAAK,CACd,CASA,UAAM0sC,GAGJ,MAAM6+F,EAAU,IAAIC,YACpB,IAAIC,EAAM,GACV,UAAW,MAAM1wB,KAAQmwB,EAAWlrI,MAAK,GAAQ,GAC/CyrI,GAAOF,EAAQG,OAAO3wB,EAAM,CAAEhB,QAAQ,IAIxC,OADA0xB,GAAOF,EAAQG,SACRD,CACT,CASA,iBAAMpB,GAMJ,MAAM72H,EAAO,IAAIsyC,WAAW9lD,KAAKm2D,MACjC,IAAIpQ,EAAS,EACb,UAAW,MAAME,KAASilF,EAAWlrI,MAAK,GAAQ,GAChDwT,EAAKQ,IAAIiyC,EAAOF,GAChBA,GAAUE,EAAMliD,OAGlB,OAAOyP,EAAK4xD,MACd,CAEA,MAAA20C,GACE,MAAM4xB,EAAKT,EAAWlrI,MAAK,GAAQ,GAEnC,OAAO,IAAIglF,WAAWhgC,eAAe,CAEnC9hD,KAAM,QACN,UAAMy/H,CAAMyH,GACV,MAAMnkF,QAAc0lF,EAAGliG,OACvBwc,EAAM7d,KAAOgiG,EAAK/kF,QAAU+kF,EAAKllF,QAAQe,EAAM9jD,MACjD,EAEA,YAAMonB,SACEoiH,EAAGxhD,QACX,GAEJ,CAWA,KAAAt6E,CAAO+sC,EAAQ,EAAG8tC,EAAM1qF,KAAKm2D,KAAMjzD,EAAO,IACxC,MAAM,KAAEizD,GAASn2D,KAEjB,IAAI4rI,EAAgBhvF,EAAQ,EAAIlwC,KAAKyF,IAAIgkD,EAAOvZ,EAAO,GAAKlwC,KAAKgC,IAAIkuC,EAAOuZ,GACxE01E,EAAcnhD,EAAM,EAAIh+E,KAAKyF,IAAIgkD,EAAOu0B,EAAK,GAAKh+E,KAAKgC,IAAIg8E,EAAKv0B,GAEpE,MAAM21E,EAAOp/H,KAAKyF,IAAI05H,EAAcD,EAAe,GAC7C1wG,EAAQl7B,MAAK,EACborI,EAAY,GAClB,IAAInkG,EAAQ,EAEZ,IAAK,MAAM8zE,KAAQ7/E,EAAO,CAExB,GAAI+L,GAAS6kG,EACX,MAGF,MAAM31E,EAAO+hC,YAAY85B,OAAOjX,GAAQA,EAAK5lB,WAAa4lB,EAAK5kD,KAC/D,GAAIy1E,GAAiBz1E,GAAQy1E,EAG3BA,GAAiBz1E,EACjB01E,GAAe11E,MACV,CACL,IAAIlQ,EACAiyC,YAAY85B,OAAOjX,IACrB90D,EAAQ80D,EAAKgxB,SAASH,EAAel/H,KAAKgC,IAAIynD,EAAM01E,IACpD5kG,GAASgf,EAAMkvC,aAEflvC,EAAQ80D,EAAKlrG,MAAM+7H,EAAel/H,KAAKgC,IAAIynD,EAAM01E,IACjD5kG,GAASgf,EAAMkQ,MAEjB01E,GAAe11E,EACfi1E,EAAUr7H,KAAKk2C,GACf2lF,EAAgB,CAClB,CACF,CAEA,MAAMzB,EAAO,IAAIxoF,EAAK,GAAI,CAAEz+C,KAAM+oD,OAAO/oD,GAAMq3E,gBAI/C,OAHA4vD,GAAK,EAAQ2B,EACb3B,GAAK,EAASiB,EAEPjB,CACT,CAEA,IAAK3hB,OAAO5jC,eACV,MAAO,MACT,CAEA,OAAQ4jC,OAAOlkC,aAAchtC,GAC3B,OACEA,GACkB,iBAAXA,GACuB,mBAAvBA,EAAO0U,cAEa,mBAAlB1U,EAAOyiE,QACgB,mBAAvBziE,EAAO+yF,cAEhB,gBAAgB56H,KAAK6nC,EAAOkxE,OAAO5jC,aAEvC,GAGF7qC,OAAOq1E,iBAAiB+b,EAAM12E,UAAW,CACvC0B,KAAM,CAAE8sB,YAAY,GACpB//E,KAAM,CAAE+/E,YAAY,GACpBpzE,MAAO,CAAEozE,YAAY,KAIhB,MACP,EADoBkoD,C,+ECnPfvmD,YAAY1xE,EAAEsxE,SAAS1gF,EAAEwgF,YAAYjzD,GAAGm3F,OAC7CqO,EAAEnqH,KAAKC,OACP6kD,EAAE,uEAAuE7hD,MAAM,KAC/E1C,EAAE,CAACwqF,EAAE9rC,EAAEr3B,KAAKmjE,GAAG,GAAG,gBAAgBhoF,KAAKk8C,GAAKA,EAAEz4C,IAAI,EAAEohB,OAAW,IAATA,EAAWA,EAAE,GAAS,QAANq3B,EAAEz4C,GAAWy4C,EAAElpD,KAAK,OAAOg1F,GAAG9rC,EAAElpD,OAAO6xB,GAAS,QAANq3B,EAAEz4C,GAAW,IAAI,IAAE,CAACy4C,GAAGr3B,EAAEq3B,GAAGA,GAAG,CAAC8rC,EAAE9rC,EAAE,KACpJnrD,EAAE,CAAC8zB,EAAErnB,KAAKA,EAAEqnB,EAAEA,EAAEid,QAAQ,YAAY,SAASA,QAAQ,MAAM,OAAOA,QAAQ,MAAM,OAAOA,QAAQ,KAAK,OACpGq3E,EAAE,CAACx3F,EAAGqmE,EAAGj3F,KAAK,GAAGi3F,EAAE1zF,OAAOvD,EAAG,MAAM,IAAIygF,UAAU,sBAAsB7vD,qBAAqB5wB,kCAAkCi3F,EAAE1zF,oBAEzH,MAGMioI,EAAW,MACxB,GAAG,GACH,WAAAhgF,IAAeyrC,GAAG,GAAGA,EAAE1zF,OAAO,MAAM,IAAIk9E,UAAU,gFAAgF,CAClI,IAAK/tE,KAAM,MAAO,UAAU,CAC5B,CAACpP,KAAK,OAAO9D,KAAKwjH,SAAS,CAC3B,OAAQnyF,GAAGuI,GAAI,OAAOA,GAAc,iBAAJA,GAAqB,aAAPA,EAAE1mB,KAAkBs+C,EAAE44C,KAAK54C,GAAgB,mBAAN53B,EAAE43B,GAAe,CACpG,MAAA5qC,IAAU6wE,GAAGmxB,EAAE,SAAS5kH,UAAU,GAAGhE,MAAK,EAAG+P,KAAK9C,KAAKwqF,GAAG,CAC1D,OAAOA,GAAGmxB,EAAE,SAAS5kH,UAAU,GAAGyzF,GAAG,GAAGz3F,MAAK,EAAGA,MAAK,EAAGsyE,OAAO,EAAE3mB,KAAKA,IAAI8rC,EAAE,CAC5E,GAAAzmE,CAAIymE,GAAGmxB,EAAE,MAAM5kH,UAAU,GAAGyzF,GAAG,GAAG,IAAI,IAAI9rC,EAAE3rD,MAAK,EAAGs+B,EAAEqtB,EAAE5nD,OAAOuwB,EAAE,EAAEA,EAAEgK,EAAEhK,IAAI,GAAGq3B,EAAEr3B,GAAG,KAAKmjE,EAAE,OAAO9rC,EAAEr3B,GAAG,GAAG,OAAO,IAAI,CACpH,MAAA23G,CAAOx0C,EAAE9rC,GAAiF,OAA9Ei9D,EAAE,SAAS5kH,UAAU,GAAG2nD,EAAE,GAAG8rC,GAAG,GAAGz3F,MAAK,EAAGu0F,QAAQjgE,GAAGA,EAAE,KAAKmjE,GAAG9rC,EAAE57C,KAAKukB,EAAE,KAAYq3B,CAAC,CAClG,GAAA6tD,CAAI/hB,GAA8B,OAA3BmxB,EAAE,MAAM5kH,UAAU,GAAGyzF,GAAG,GAAUz3F,MAAK,EAAGoqG,KAAKz+C,GAAGA,EAAE,KAAK8rC,EAAE,CAClE,OAAAlD,CAAQkD,EAAE9rC,GAA4B,IAAI,IAAKr3B,EAAEo3B,KAApCk9D,EAAE,UAAU5kH,UAAU,GAAmBhE,MAAKy3F,EAAE13F,KAAK4rD,EAAED,EAAEp3B,EAAEt0B,KAAK,CAC7E,GAAAgU,IAAOyjF,GAAGmxB,EAAE,MAAM5kH,UAAU,GAAG,IAAI2nD,EAAE,GAAGr3B,GAAE,EAAGmjE,EAAExqF,KAAKwqF,GAAGz3F,MAAK,EAAGu0F,QAAQ7oC,IAAIA,EAAE,KAAK+rC,EAAE,GAAGnjE,IAAIA,GAAGq3B,EAAE57C,KAAK0nF,IAAI9rC,EAAE57C,KAAK27C,KAAKp3B,GAAGq3B,EAAE57C,KAAK0nF,GAAGz3F,MAAK,EAAG2rD,CAAC,CAC3I,QAAC63D,SAAgBxjH,MAAK,CAAE,CACxB,KAACkV,GAAO,IAAI,IAAIuiF,KAAKz3F,WAAWy3F,CAAC,CACjC,OAAC3rF,GAAS,IAAI,IAAI,CAAC2rF,KAAKz3F,WAAWy3F,CAAC,GAG7B,SAASy0C,EAAgBhiB,EAAEiiB,EAAE,KACpC,IAAIxgF,EAAE,GAAGkrE,MAAMA,MAAMtlF,QAAQ,MAAO,IAAI1hC,OAAO,IAAI49F,SAAS,GAAI,KAAKn5E,EAAE,GAAGk3B,EAAE,KAAKG,8CAKjF,OAJAu+D,EAAE31B,QAAQ,CAACxxE,EAAEqO,IAAc,iBAAHrO,EACvBuR,EAAEvkB,KAAKy7C,EAAEhrD,EAAE4wB,GAAG,YAAYrO,EAAEwuB,QAAQ,sBAAuB,eAC3Djd,EAAEvkB,KAAKy7C,EAAEhrD,EAAE4wB,GAAG,gBAAgB5wB,EAAEuiB,EAAEtgB,KAAM,wBAAwBsgB,EAAE7f,MAAM,qCAAsC6f,EAAG,SAClHuR,EAAEvkB,KAAK,KAAK47C,OACL,IAAIwgF,EAAE73G,EAAE,CAACpxB,KAAK,iCAAiCyoD,GAAG,C,qRCvCzD,MAAM,EAA+B4kC,QAAQ,aCAvC,EAA+BA,QAAQ,cCAvC,EAA+BA,QAAQ,aCAvC,EAA+BA,QAAQ,eCAvC,EAA+BA,QAAQ,eCAvC,EAA+BA,QAAQ,a,wBCAtC,MAAM67C,UAAuBrrD,MACnC,WAAA/0B,CAAYtrD,EAASwC,GACpB+zF,MAAMv2F,GAENqgF,MAAMwK,kBAAkBvrF,KAAMA,KAAKgsD,aAEnChsD,KAAKkD,KAAOA,CACb,CAEA,QAAIT,GACH,OAAOzC,KAAKgsD,YAAYvpD,IACzB,CAEA,IAAK+lH,OAAO5jC,eACX,OAAO5kF,KAAKgsD,YAAYvpD,IACzB,ECLM,MAAM4pI,UAAmBD,EAM/B,WAAApgF,CAAYtrD,EAASwC,EAAMopI,GAC1Br1C,MAAMv2F,EAASwC,GAEXopI,IAEHtsI,KAAKm+F,KAAOn+F,KAAK+4F,MAAQuzC,EAAYnuC,KACrCn+F,KAAKusI,eAAiBD,EAAYE,QAEpC,EClBD,MAAM/tD,EAAO+pC,OAAO5jC,YAQP6nD,EAAwBn1F,GAEjB,iBAAXA,GACkB,mBAAlBA,EAAO1wB,QACW,mBAAlB0wB,EAAOo1F,QACQ,mBAAfp1F,EAAOtmB,KACW,mBAAlBsmB,EAAO20F,QACQ,mBAAf30F,EAAOkiE,KACQ,mBAAfliE,EAAOtjC,KACS,mBAAhBsjC,EAAOtD,MACG,oBAAjBsD,EAAOmnC,GASIkuD,EAASr1F,GAEpBA,GACkB,iBAAXA,GACuB,mBAAvBA,EAAO+yF,aACS,iBAAhB/yF,EAAOp0C,MACW,mBAAlBo0C,EAAOyiE,QACgB,mBAAvBziE,EAAO0U,aACd,gBAAgBv8C,KAAK6nC,EAAOmnC,ICvBxBmuD,GAAW,IAAAC,WAAU,YACrBC,EAAYtkB,OAAO,kBAWV,MAAMukB,EACpB,WAAA/gF,CAAY7I,GAAM,KACjBgT,EAAO,GACJ,CAAC,GACJ,IAAI62E,EAAW,KAEF,OAAT7pF,EAEHA,EAAO,KACGspF,EAAsBtpF,GAEhCA,EAAO,EAAA6xC,OAAO5oC,KAAKjJ,EAAKngD,YACd2pI,EAAOxpF,IAEP,EAAA6xC,OAAOi4C,SAAS9pF,KAEhB,EAAA+pF,MAAMC,iBAAiBhqF,GAEjCA,EAAO,EAAA6xC,OAAO5oC,KAAKjJ,GACT+0C,YAAY85B,OAAO7uE,GAE7BA,EAAO,EAAA6xC,OAAO5oC,KAAKjJ,EAAKiiB,OAAQjiB,EAAK4tE,WAAY5tE,EAAKgyC,YAC5ChyC,aAAgB,IAEhBA,aAAgB,KAG1B6pF,GADA7pF,GAAO,QAAeA,IACNjgD,KAAKyM,MAAM,KAAK,GAIhCwzC,EAAO,EAAA6xC,OAAO5oC,KAAKH,OAAO9I,MAG3B,IAAI42D,EAAS52D,EAET,EAAA6xC,OAAOi4C,SAAS9pF,GACnB42D,EAAS,WAAgB3tD,KAAKjJ,GACpBwpF,EAAOxpF,KACjB42D,EAAS,WAAgB3tD,KAAKjJ,EAAK42D,WAGpC/5G,KAAK8sI,GAAa,CACjB3pF,OACA42D,SACAizB,WACAI,WAAW,EACX7sF,MAAO,MAERvgD,KAAKm2D,KAAOA,EAERhT,aAAgB,GACnBA,EAAKkyC,GAAG,QAASg4C,IAChB,MAAM9sF,EAAQ8sF,aAAkBjB,EAC/BiB,EACA,IAAIhB,EAAW,+CAA+CrsI,KAAKuV,QAAQ83H,EAAO3sI,UAAW,SAAU2sI,GACxGrtI,KAAK8sI,GAAWvsF,MAAQA,GAG3B,CAEA,QAAI4C,GACH,OAAOnjD,KAAK8sI,GAAW/yB,MACxB,CAEA,YAAIuzB,GACH,OAAOttI,KAAK8sI,GAAWM,SACxB,CAOA,iBAAM/C,GACL,MAAM,OAACjlE,EAAM,WAAE2rD,EAAU,WAAE57B,SAAoBo4C,EAAYvtI,MAC3D,OAAOolE,EAAOv1D,MAAMkhH,EAAYA,EAAa57B,EAC9C,CAEA,cAAMq4C,GACL,MAAMC,EAAKztI,KAAK+U,QAAQic,IAAI,gBAE5B,GAAIy8G,EAAG93C,WAAW,qCAAsC,CACvD,MAAM63C,EAAW,IAAI,KACfE,EAAa,IAAIC,sBAAsB3tI,KAAK0sC,QAElD,IAAK,MAAOjqC,EAAMN,KAAUurI,EAC3BF,EAAS5mH,OAAOnkB,EAAMN,GAGvB,OAAOqrI,CACR,CAEA,MAAM,WAACI,SAAoB,8BAC3B,OAAOA,EAAW5tI,KAAKmjD,KAAMsqF,EAC9B,CAOA,UAAMtD,GACL,MAAMsD,EAAMztI,KAAK+U,SAAW/U,KAAK+U,QAAQic,IAAI,iBAAqBhxB,KAAK8sI,GAAW3pF,MAAQnjD,KAAK8sI,GAAW3pF,KAAKjgD,MAAS,GAClH2qI,QAAY7tI,KAAKqqI,cAEvB,OAAO,IAAI,IAAK,CAACwD,GAAM,CACtB3qI,KAAMuqI,GAER,CAOA,UAAM96H,GACL,MAAM+5B,QAAa1sC,KAAK0sC,OACxB,OAAO7pC,KAAKyc,MAAMotB,EACnB,CAOA,UAAMA,GACL,MAAM04B,QAAemoE,EAAYvtI,MACjC,OAAO,IAAIwrI,aAAcE,OAAOtmE,EACjC,CAOA,MAAAA,GACC,OAAOmoE,EAAYvtI,KACpB,EAyBDi1F,eAAes4C,EAAY/5H,GAC1B,GAAIA,EAAKs5H,GAAWM,UACnB,MAAM,IAAInsD,UAAU,0BAA0BztE,EAAK+B,OAKpD,GAFA/B,EAAKs5H,GAAWM,WAAY,EAExB55H,EAAKs5H,GAAWvsF,MACnB,MAAM/sC,EAAKs5H,GAAWvsF,MAGvB,MAAM,KAAC4C,GAAQ3vC,EAGf,GAAa,OAAT2vC,EACH,OAAO,EAAA6xC,OAAO84C,MAAM,GAIrB,KAAM3qF,aAAgB,GACrB,OAAO,EAAA6xC,OAAO84C,MAAM,GAKrB,MAAMC,EAAQ,GACd,IAAIC,EAAa,EAEjB,IACC,UAAW,MAAM/nF,KAAS9C,EAAM,CAC/B,GAAI3vC,EAAK2iD,KAAO,GAAK63E,EAAa/nF,EAAMliD,OAASyP,EAAK2iD,KAAM,CAC3D,MAAM5V,EAAQ,IAAI8rF,EAAW,mBAAmB74H,EAAK+B,mBAAmB/B,EAAK2iD,OAAQ,YAErF,MADAhT,EAAK8qF,QAAQ1tF,GACPA,CACP,CAEAytF,GAAc/nF,EAAMliD,OACpBgqI,EAAMh+H,KAAKk2C,EACZ,CACD,CAAE,MAAO1F,GAER,MADeA,aAAiB6rF,EAAiB7rF,EAAQ,IAAI8rF,EAAW,+CAA+C74H,EAAK+B,QAAQgrC,EAAM7/C,UAAW,SAAU6/C,EAEhK,CAEA,IAA2B,IAAvB4C,EAAK+qF,gBAAwD,IAA9B/qF,EAAKgrF,eAAeC,MAWtD,MAAM,IAAI/B,EAAW,4DAA4D74H,EAAK+B,OAVtF,IACC,OAAIw4H,EAAM1pB,MAAM/vF,GAAkB,iBAANA,GACpB,EAAA0gE,OAAO5oC,KAAK2hF,EAAM5sG,KAAK,KAGxB,EAAA6zD,OAAOnkE,OAAOk9G,EAAOC,EAC7B,CAAE,MAAOztF,GACR,MAAM,IAAI8rF,EAAW,kDAAkD74H,EAAK+B,QAAQgrC,EAAM7/C,UAAW,SAAU6/C,EAChH,CAIF,CA/EAwsF,EAAKt4E,UAAU2Q,QAAS,IAAAipE,WAAUtB,EAAKt4E,UAAU2Q,OAAQ,qEAA0E,qBAGnIrrB,OAAOq1E,iBAAiB2d,EAAKt4E,UAAW,CACvCtR,KAAM,CAAC8/B,YAAY,GACnBqqD,SAAU,CAACrqD,YAAY,GACvBonD,YAAa,CAACpnD,YAAY,GAC1BknD,KAAM,CAAClnD,YAAY,GACnBtwE,KAAM,CAACswE,YAAY,GACnBv2C,KAAM,CAACu2C,YAAY,GACnBzvE,KAAM,CAACwd,KAAK,IAAAq9G,WAAU,OACrB,yEACA,sEA4EK,MAAMn1F,EAAQ,CAACo1F,EAAU1X,KAC/B,IAAI2X,EACAC,GACA,KAACrrF,GAAQmrF,EAASxB,GAGtB,GAAIwB,EAAShB,SACZ,MAAM,IAAIvsD,MAAM,sCAgBjB,OAXK59B,aAAgB,GAAwC,mBAArBA,EAAKsrF,cAE5CF,EAAK,IAAI,EAAAG,YAAY,CAAC9X,kBACtB4X,EAAK,IAAI,EAAAE,YAAY,CAAC9X,kBACtBzzE,EAAKwrF,KAAKJ,GACVprF,EAAKwrF,KAAKH,GAEVF,EAASxB,GAAW/yB,OAASw0B,EAC7BprF,EAAOqrF,GAGDrrF,GAGFyrF,GAA6B,IAAAP,WAClClrF,GAAQA,EAAKsrF,cACb,4FACA,wDAaYI,EAAqB,CAAC1rF,EAAMlpC,IAE3B,OAATkpC,EACI,KAIY,iBAATA,EACH,2BAIJspF,EAAsBtpF,GAClB,kDAIJwpF,EAAOxpF,GACHA,EAAKjgD,MAAQ,KAIjB,EAAA8xF,OAAOi4C,SAAS9pF,IAAS,EAAA+pF,MAAMC,iBAAiBhqF,IAAS+0C,YAAY85B,OAAO7uE,GACxE,KAGJA,aAAgB,KACZ,iCAAiClpC,EAAQ6yH,GAAWE,WAIxD7pF,GAAoC,mBAArBA,EAAKsrF,YAChB,gCAAgCG,EAA2BzrF,KAI/DA,aAAgB,EACZ,KAID,2BC5UF2rF,EAAwD,mBAA5B,qBACjC,qBACArsI,IACC,IAAK,0BAA0BgN,KAAKhN,GAAO,CAC1C,MAAM89C,EAAQ,IAAI0gC,UAAU,2CAA2Cx+E,MAEvE,MADAs3C,OAAOqkD,eAAe79C,EAAO,OAAQ,CAACp+C,MAAO,2BACvCo+C,CACP,GAIIwuF,EAA0D,mBAA7B,sBAClC,sBACA,CAACtsI,EAAMN,KACN,GAAI,kCAAkCsN,KAAKtN,GAAQ,CAClD,MAAMo+C,EAAQ,IAAI0gC,UAAU,yCAAyCx+E,OAErE,MADAs3C,OAAOqkD,eAAe79C,EAAO,OAAQ,CAACp+C,MAAO,qBACvCo+C,CACP,GAea,MAAMuC,UAAgB6qF,gBAOpC,WAAA3hF,CAAY9I,GAGX,IAAIn3C,EAAS,GACb,GAAIm3C,aAAgBJ,EAAS,CAC5B,MAAMksF,EAAM9rF,EAAK8rF,MACjB,IAAK,MAAOvsI,EAAMqJ,KAAWiuC,OAAOypE,QAAQwrB,GAC3CjjI,EAAOgE,QAAQjE,EAAOmiD,IAAI9rD,GAAS,CAACM,EAAMN,IAE5C,MAAO,GAAY,MAAR+gD,OAEJ,IAAoB,iBAATA,GAAsB,EAAAgqF,MAAM+B,iBAAiB/rF,GA+B9D,MAAM,IAAI+9B,UAAU,wIA/BiD,CACrE,MAAM/tD,EAASgwB,EAAKslE,OAAOhkC,UAE3B,GAAc,MAAVtxD,EAEHnnB,EAAOgE,QAAQgqC,OAAOypE,QAAQtgE,QACxB,CACN,GAAsB,mBAAXhwB,EACV,MAAM,IAAI+tD,UAAU,iCAKrBl1E,EAAS,IAAIm3C,GACX+K,IAAI7b,IACJ,GACiB,iBAATA,GAAqB,EAAA86F,MAAM+B,iBAAiB78F,GAEnD,MAAM,IAAI6uC,UAAU,+CAGrB,MAAO,IAAI7uC,KACT6b,IAAI7b,IACN,GAAoB,IAAhBA,EAAKruC,OACR,MAAM,IAAIk9E,UAAU,+CAGrB,MAAO,IAAI7uC,IAEd,CACD,CAEA,CAgBA,OAbArmC,EACCA,EAAOhI,OAAS,EACfgI,EAAOkiD,IAAI,EAAExrD,EAAMN,MAClB2sI,EAAmBrsI,GACnBssI,EAAoBtsI,EAAMwpD,OAAO9pD,IAC1B,CAAC8pD,OAAOxpD,GAAM83E,cAAetuB,OAAO9pD,WAE5CkK,EAEF4qF,MAAMlrF,GAIC,IAAImjI,MAAMlvI,KAAM,CACtB,GAAAgxB,CAAIniB,EAAQ28C,EAAG2jF,GACd,OAAQ3jF,GACP,IAAK,SACL,IAAK,MACJ,MAAO,CAAC/oD,EAAMN,KACb2sI,EAAmBrsI,GACnBssI,EAAoBtsI,EAAMwpD,OAAO9pD,IAC1BwrI,gBAAgBl5E,UAAUjJ,GAAGzrD,KACnC8O,EACAo9C,OAAOxpD,GAAM83E,cACbtuB,OAAO9pD,KAIV,IAAK,SACL,IAAK,MACL,IAAK,SACJ,OAAOM,IACNqsI,EAAmBrsI,GACZkrI,gBAAgBl5E,UAAUjJ,GAAGzrD,KACnC8O,EACAo9C,OAAOxpD,GAAM83E,gBAIhB,IAAK,OACJ,MAAO,KACN1rE,EAAOmlC,OACA,IAAIqlE,IAAIs0B,gBAAgBl5E,UAAUv/C,KAAKnV,KAAK8O,IAASqG,QAG9D,QACC,OAAOk6H,QAAQp+G,IAAIniB,EAAQ28C,EAAG2jF,GAEjC,GAGF,CAEA,IAAK3mB,OAAO5jC,eACX,OAAO5kF,KAAKgsD,YAAYvpD,IACzB,CAEA,QAAAO,GACC,OAAO+2C,OAAO0a,UAAUzxD,SAASjD,KAAKC,KACvC,CAEA,GAAAgxB,CAAIvuB,GACH,MAAMqJ,EAAS9L,KAAKisI,OAAOxpI,GAC3B,GAAsB,IAAlBqJ,EAAO/H,OACV,OAAO,KAGR,IAAI5B,EAAQ2J,EAAOq1B,KAAK,MAKxB,MAJI,sBAAsB1xB,KAAKhN,KAC9BN,EAAQA,EAAMo4E,eAGRp4E,CACR,CAEA,OAAAoyF,CAAQtgF,EAAUytE,OAAUr1E,GAC3B,IAAK,MAAM5J,KAAQzC,KAAKkV,OACvBk6H,QAAQ1kH,MAAMzW,EAAUytE,EAAS,CAAC1hF,KAAKgxB,IAAIvuB,GAAOA,EAAMzC,MAE1D,CAEA,OAAE8L,GACD,IAAK,MAAMrJ,KAAQzC,KAAKkV,aACjBlV,KAAKgxB,IAAIvuB,EAEjB,CAKA,QAAE+gH,GACD,IAAK,MAAM/gH,KAAQzC,KAAKkV,YACjB,CAACzS,EAAMzC,KAAKgxB,IAAIvuB,GAExB,CAEA,CAAC+lH,OAAOhkC,YACP,OAAOxkF,KAAKwjH,SACb,CAOA,GAAAwrB,GACC,MAAO,IAAIhvI,KAAKkV,QAAQm6H,OAAO,CAACtjI,EAAQoD,KACvCpD,EAAOoD,GAAOnP,KAAKisI,OAAO98H,GACnBpD,GACL,CAAC,EACL,CAKA,CAACy8G,OAAO8mB,IAAI,iCACX,MAAO,IAAItvI,KAAKkV,QAAQm6H,OAAO,CAACtjI,EAAQoD,KACvC,MAAMrD,EAAS9L,KAAKisI,OAAO98H,GAS3B,OALCpD,EAAOoD,GADI,SAARA,EACWrD,EAAO,GAEPA,EAAO/H,OAAS,EAAI+H,EAASA,EAAO,GAG5CC,GACL,CAAC,EACL,EAODguC,OAAOq1E,iBACNtsE,EAAQ2R,UACR,CAAC,MAAO,UAAW,UAAW,UAAU46E,OAAO,CAACtjI,EAAQrJ,KACvDqJ,EAAOrJ,GAAY,CAACugF,YAAY,GACzBl3E,GACL,CAAC,IC5OL,MAAMwjI,EAAiB,IAAIl2B,IAAI,CAAC,IAAK,IAAK,IAAK,IAAK,MAQvCm2B,EAAarxC,GAClBoxC,EAAe/1B,IAAIrb,GCCrB,EAAYqqB,OAAO,sBAWV,MAAMinB,UAAiB1C,EACrC,WAAA/gF,CAAY7I,EAAO,KAAM+0B,EAAU,CAAC,GACnC+e,MAAM9zC,EAAM+0B,GAGZ,MAAMp+D,EAA2B,MAAlBo+D,EAAQp+D,OAAiBo+D,EAAQp+D,OAAS,IAEnD/E,EAAU,IAAI+tC,EAAQo1B,EAAQnjE,SAEpC,GAAa,OAATouC,IAAkBpuC,EAAQykG,IAAI,gBAAiB,CAClD,MAAMk2B,EAAcb,EAAmB1rF,EAAMnjD,MACzC0vI,GACH36H,EAAQ6R,OAAO,eAAgB8oH,EAEjC,CAEA1vI,KAAK,GAAa,CACjBkD,KAAM,UACNqS,IAAK2iE,EAAQ3iE,IACbuE,SACAkqC,WAAYk0B,EAAQl0B,YAAc,GAClCjvC,UACA46H,QAASz3D,EAAQy3D,QACjB/Y,cAAe1+C,EAAQ0+C,cAEzB,CAEA,QAAI1zH,GACH,OAAOlD,KAAK,GAAWkD,IACxB,CAEA,OAAIqS,GACH,OAAOvV,KAAK,GAAWuV,KAAO,EAC/B,CAEA,UAAIuE,GACH,OAAO9Z,KAAK,GAAW8Z,MACxB,CAKA,MAAIgqC,GACH,OAAO9jD,KAAK,GAAW8Z,QAAU,KAAO9Z,KAAK,GAAW8Z,OAAS,GAClE,CAEA,cAAI81H,GACH,OAAO5vI,KAAK,GAAW2vI,QAAU,CAClC,CAEA,cAAI3rF,GACH,OAAOhkD,KAAK,GAAWgkD,UACxB,CAEA,WAAIjvC,GACH,OAAO/U,KAAK,GAAW+U,OACxB,CAEA,iBAAI6hH,GACH,OAAO52H,KAAK,GAAW42H,aACxB,CAOA,KAAA19E,GACC,OAAO,IAAIu2F,EAASv2F,EAAMl5C,KAAMA,KAAK42H,eAAgB,CACpD1zH,KAAMlD,KAAKkD,KACXqS,IAAKvV,KAAKuV,IACVuE,OAAQ9Z,KAAK8Z,OACbkqC,WAAYhkD,KAAKgkD,WACjBjvC,QAAS/U,KAAK+U,QACd+uC,GAAI9jD,KAAK8jD,GACT8rF,WAAY5vI,KAAK4vI,WACjBz5E,KAAMn2D,KAAKm2D,KACXygE,cAAe52H,KAAK42H,eAEtB,CAOA,eAAOiZ,CAASt6H,EAAKuE,EAAS,KAC7B,IAAK01H,EAAW11H,GACf,MAAM,IAAIu3G,WAAW,mEAGtB,OAAO,IAAIoe,EAAS,KAAM,CACzB16H,QAAS,CACR2lB,SAAU,IAAIo1G,IAAIv6H,GAAKvS,YAExB8W,UAEF,CAEA,YAAOymC,GACN,MAAM/mC,EAAW,IAAIi2H,EAAS,KAAM,CAAC31H,OAAQ,EAAGkqC,WAAY,KAE5D,OADAxqC,EAAS,GAAWtW,KAAO,QACpBsW,CACR,CAEA,WAAO7G,CAAKa,OAAOnH,EAAW62C,EAAO,CAAC,GACrC,MAAMC,EAAOtgD,KAAKC,UAAU0Q,GAE5B,QAAanH,IAAT82C,EACH,MAAM,IAAI89B,UAAU,iCAGrB,MAAMlsE,EAAU,IAAI+tC,EAAQI,GAAQA,EAAKnuC,SAMzC,OAJKA,EAAQykG,IAAI,iBAChBzkG,EAAQf,IAAI,eAAgB,oBAGtB,IAAIy7H,EAAStsF,EAAM,IACtBD,EACHnuC,WAEF,CAEA,IAAKyzG,OAAO5jC,eACX,MAAO,UACR,EAGD7qC,OAAOq1E,iBAAiBqgB,EAASh7E,UAAW,CAC3CvxD,KAAM,CAAC+/E,YAAY,GACnB1tE,IAAK,CAAC0tE,YAAY,GAClBnpE,OAAQ,CAACmpE,YAAY,GACrBn/B,GAAI,CAACm/B,YAAY,GACjB2sD,WAAY,CAAC3sD,YAAY,GACzBj/B,WAAY,CAACi/B,YAAY,GACzBluE,QAAS,CAACkuE,YAAY,GACtB/pC,MAAO,CAAC+pC,YAAY,KC9JrB,MAAM,EAA+BsN,QAAQ,YCAvC,EAA+BA,QAAQ,YCiBtC,SAASw/C,EAA0Bx6H,EAAKy6H,GAAa,GAE3D,OAAW,MAAPz6H,EACI,eAGRA,EAAM,IAAIu6H,IAAIv6H,GAGV,uBAAuB9F,KAAK8F,EAAIolB,UAC5B,eAIRplB,EAAI6vF,SAAW,GAIf7vF,EAAI+vF,SAAW,GAIf/vF,EAAIqzD,KAAO,GAGPonE,IAGHz6H,EAAIyjD,SAAW,GAIfzjD,EAAI2hC,OAAS,IAIP3hC,GACR,CAKO,MAAM06H,EAAiB,IAAI52B,IAAI,CACrC,GACA,cACA,6BACA,cACA,SACA,gBACA,2BACA,kCACA,eA6EM,SAAS62B,EAA4B36H,GAE3C,QAAI,yBAAyB9F,KAAK8F,IAKb,UAAjBA,EAAIolB,YAOJ,uBAAuBlrB,KAAK8F,EAAIolB,WAjE9B,SAAwCplB,GAQ9C,GAAI,gBAAgB9F,KAAK8F,EAAIolB,UAC5B,OAAO,EAIR,MAAMw1G,EAAS56H,EAAImtB,KAAK6O,QAAQ,cAAe,IACzC6+F,GAAgB,IAAAC,MAAKF,GAE3B,QAAsB,IAAlBC,IAAuB,SAAS3gI,KAAK0gI,OAInB,IAAlBC,IAAuB,mCAAmC3gI,KAAK0gI,KAOlD,cAAb56H,EAAImtB,OAAwBntB,EAAImtB,KAAK4tG,SAAS,eAK7B,UAAjB/6H,EAAIolB,QAYT,CA0BQ41G,CAA+Bh7H,EACvC,CCnJA,MAAM,EAAYizG,OAAO,qBAQnBgoB,EAAYl5F,GAEE,iBAAXA,GACsB,iBAAtBA,EAAO,GAIVm5F,GAAgB,IAAApC,WAAU,OAC/B,+DACA,kEAWc,MAAM/qF,UAAgBypF,EACpC,WAAA/gF,CAAY7a,EAAO+R,EAAO,CAAC,GAC1B,IAAIwtF,EAUJ,GAPIF,EAAUr/F,GACbu/F,EAAY,IAAIZ,IAAI3+F,EAAM57B,MAE1Bm7H,EAAY,IAAIZ,IAAI3+F,GACpBA,EAAQ,CAAC,GAGiB,KAAvBu/F,EAAUtrC,UAA0C,KAAvBsrC,EAAUprC,SAC1C,MAAM,IAAIrkB,UAAU,GAAGyvD,0CAGxB,IAAIx9G,EAASgwB,EAAKhwB,QAAUie,EAAMje,QAAU,MAU5C,GATI,wCAAwCzjB,KAAKyjB,KAChDA,EAASA,EAAO6jB,gBAGZy5F,EAAUttF,IAAS,SAAUA,GACjCutF,KAIiB,MAAbvtF,EAAKC,MAAiBqtF,EAAUr/F,IAAyB,OAAfA,EAAMgS,QACxC,QAAXjwB,GAA+B,SAAXA,GACrB,MAAM,IAAI+tD,UAAU,iDAGrB,MAAM0vD,EAAYztF,EAAKC,KACtBD,EAAKC,KACJqtF,EAAUr/F,IAAyB,OAAfA,EAAMgS,KAC1BjK,EAAM/H,GACN,KAEF8lD,MAAM05C,EAAW,CAChBx6E,KAAMjT,EAAKiT,MAAQhlB,EAAMglB,MAAQ,IAGlC,MAAMphD,EAAU,IAAI+tC,EAAQI,EAAKnuC,SAAWo8B,EAAMp8B,SAAW,CAAC,GAE9D,GAAkB,OAAd47H,IAAuB57H,EAAQykG,IAAI,gBAAiB,CACvD,MAAMk2B,EAAcb,EAAmB8B,EAAW3wI,MAC9C0vI,GACH36H,EAAQf,IAAI,eAAgB07H,EAE9B,CAEA,IAAIpR,EAASkS,EAAUr/F,GACtBA,EAAMmtF,OACN,KAMD,GALI,WAAYp7E,IACfo7E,EAASp7E,EAAKo7E,QAID,MAAVA,IRpDc,iBAFShnF,EQsDUgnF,IRnDnB,gBAAjBhnF,EAAOmnC,IACU,gBAAjBnnC,EAAOmnC,IQmDP,MAAM,IAAIwC,UAAU,kERvDM3pC,MQ4D3B,IAAIs5F,EAA4B,MAAjB1tF,EAAK0tF,SAAmBz/F,EAAMy/F,SAAW1tF,EAAK0tF,SAC7D,GAAiB,KAAbA,EAEHA,EAAW,mBACL,GAAIA,EAAU,CAEpB,MAAMC,EAAiB,IAAIf,IAAIc,GAE/BA,EAAW,wBAAwBnhI,KAAKohI,GAAkB,SAAWA,CACtE,MACCD,OAAWvkI,EAGZrM,KAAK,GAAa,CACjBkzB,SACA28G,SAAU3sF,EAAK2sF,UAAY1+F,EAAM0+F,UAAY,SAC7C96H,UACA27H,YACApS,SACAsS,YAID5wI,KAAK8wI,YAAyBzkI,IAAhB62C,EAAK4tF,YAAyCzkI,IAAjB8kC,EAAM2/F,OAAuB,GAAK3/F,EAAM2/F,OAAU5tF,EAAK4tF,OAClG9wI,KAAK+wI,cAA6B1kI,IAAlB62C,EAAK6tF,cAA6C1kI,IAAnB8kC,EAAM4/F,UAAgC5/F,EAAM4/F,SAAY7tF,EAAK6tF,SAC5G/wI,KAAK2vI,QAAUzsF,EAAKysF,SAAWx+F,EAAMw+F,SAAW,EAChD3vI,KAAKgxI,MAAQ9tF,EAAK8tF,OAAS7/F,EAAM6/F,MACjChxI,KAAK42H,cAAgB1zE,EAAK0zE,eAAiBzlF,EAAMylF,eAAiB,MAClE52H,KAAKixI,mBAAqB/tF,EAAK+tF,oBAAsB9/F,EAAM8/F,qBAAsB,EAIjFjxI,KAAKkxI,eAAiBhuF,EAAKguF,gBAAkB//F,EAAM+/F,gBAAkB,EACtE,CAGA,UAAIh+G,GACH,OAAOlzB,KAAK,GAAWkzB,MACxB,CAGA,OAAI3d,GACH,OAAO,IAAAqrE,QAAU5gF,KAAK,GAAW0wI,UAClC,CAGA,WAAI37H,GACH,OAAO/U,KAAK,GAAW+U,OACxB,CAEA,YAAI86H,GACH,OAAO7vI,KAAK,GAAW6vI,QACxB,CAGA,UAAIvR,GACH,OAAOt+H,KAAK,GAAWs+H,MACxB,CAGA,YAAIsS,GACH,MAAiC,gBAA7B5wI,KAAK,GAAW4wI,SACZ,GAGyB,WAA7B5wI,KAAK,GAAW4wI,SACZ,eAGJ5wI,KAAK,GAAW4wI,SACZ5wI,KAAK,GAAW4wI,SAAS5tI,gBADjC,CAKD,CAEA,kBAAIkuI,GACH,OAAOlxI,KAAK,GAAWkxI,cACxB,CAEA,kBAAIA,CAAeA,GAClBlxI,KAAK,GAAWkxI,eD9GX,SAAgCA,GACtC,IAAKjB,EAAez2B,IAAI03B,GACvB,MAAM,IAAIjwD,UAAU,2BAA2BiwD,KAGhD,OAAOA,CACR,CCwGmCC,CAAuBD,EACzD,CAOA,KAAAh4F,GACC,OAAO,IAAIoK,EAAQtjD,KACpB,CAEA,IAAKwoH,OAAO5jC,eACX,MAAO,SACR,EAGD7qC,OAAOq1E,iBAAiB9rE,EAAQmR,UAAW,CAC1CvhC,OAAQ,CAAC+vD,YAAY,GACrB1tE,IAAK,CAAC0tE,YAAY,GAClBluE,QAAS,CAACkuE,YAAY,GACtB4sD,SAAU,CAAC5sD,YAAY,GACvB/pC,MAAO,CAAC+pC,YAAY,GACpBq7C,OAAQ,CAACr7C,YAAY,GACrB2tD,SAAU,CAAC3tD,YAAY,GACvBiuD,eAAgB,CAACjuD,YAAY,KCnNvB,MAAMmuD,UAAmBhF,EAC/B,WAAApgF,CAAYtrD,EAASwC,EAAO,WAC3B+zF,MAAMv2F,EAASwC,EAChB,E,cC8BD,MAAMmuI,EAAmB,IAAIh4B,IAAI,CAAC,QAAS,QAAS,WASrCpkB,eAAerxC,EAAMruC,EAAK+7H,GACxC,OAAO,IAAI99C,QAAQ,CAACxmE,EAASk1B,KAE5B,MAAMjoC,EAAU,IAAIqpC,EAAQ/tC,EAAK+7H,IAC3B,UAACZ,EAAS,QAAEx4D,GF8KiBj+D,KACpC,MAAM,UAACy2H,GAAaz2H,EAAQ,GACtBlF,EAAU,IAAI+tC,EAAQ7oC,EAAQ,GAAWlF,SAG1CA,EAAQykG,IAAI,WAChBzkG,EAAQf,IAAI,SAAU,OAIvB,IAAIu9H,EAAqB,KAKzB,GAJqB,OAAjBt3H,EAAQkpC,MAAiB,gBAAgB1zC,KAAKwK,EAAQiZ,UACzDq+G,EAAqB,KAGD,OAAjBt3H,EAAQkpC,KAAe,CAC1B,MAAMquF,EPiHqBv3H,KAC5B,MAAM,KAACkpC,GAAQlpC,EAAQ6yH,GAGvB,OAAa,OAAT3pF,EACI,EAIJwpF,EAAOxpF,GACHA,EAAKgT,KAIT,EAAA6+B,OAAOi4C,SAAS9pF,GACZA,EAAKp/C,OAITo/C,GAAsC,mBAAvBA,EAAKsuF,eAChBtuF,EAAKuuF,gBAAkBvuF,EAAKuuF,iBAAmBvuF,EAAKsuF,gBAIrD,MOzIaE,CAAc13H,GAEP,iBAAfu3H,GAA4B3kB,OAAOh9D,MAAM2hF,KACnDD,EAAqBtlF,OAAOulF,GAE9B,CAEID,GACHx8H,EAAQf,IAAI,iBAAkBu9H,GAMA,KAA3Bt3H,EAAQi3H,iBACXj3H,EAAQi3H,eDtL6B,mCC4LlCj3H,EAAQ22H,UAAiC,gBAArB32H,EAAQ22H,SAC/B32H,EAAQ,GAAW22H,SDxEd,SAAmC32H,GAAS,oBAAC23H,EAAmB,uBAAEC,GAA0B,CAAC,GAMnG,GAAyB,gBAArB53H,EAAQ22H,UAAyD,KAA3B32H,EAAQi3H,eACjD,OAAO,KAIR,MAAMY,EAAS73H,EAAQi3H,eAMvB,GAAyB,iBAArBj3H,EAAQ22H,SACX,MAAO,cAIR,MAAMmB,EAAiB93H,EAAQ22H,SAG/B,IAAIoB,EAAcjC,EAA0BgC,GAIxCE,EAAiBlC,EAA0BgC,GAAgB,GAI3DC,EAAYhvI,WAAWe,OAAS,OACnCiuI,EAAcC,GAOXL,IACHI,EAAcJ,EAAoBI,IAG/BH,IACHI,EAAiBJ,EAAuBI,IAIzC,MAAMC,EAAa,IAAIpC,IAAI71H,EAAQ1E,KAEnC,OAAQu8H,GACP,IAAK,cACJ,MAAO,cAER,IAAK,SACJ,OAAOG,EAER,IAAK,aACJ,OAAOD,EAER,IAAK,gBAGJ,OAAI9B,EAA4B8B,KAAiB9B,EAA4BgC,GACrE,cAIDD,EAAejvI,WAEvB,IAAK,kCAGJ,OAAIgvI,EAAYllD,SAAWolD,EAAWplD,OAC9BklD,EAKJ9B,EAA4B8B,KAAiB9B,EAA4BgC,GACrE,cAIDD,EAER,IAAK,cAGJ,OAAID,EAAYllD,SAAWolD,EAAWplD,OAC9BklD,EAID,cAER,IAAK,2BAGJ,OAAIA,EAAYllD,SAAWolD,EAAWplD,OAC9BklD,EAIDC,EAER,IAAK,6BAGJ,OAAI/B,EAA4B8B,KAAiB9B,EAA4BgC,GACrE,cAIDF,EAER,QACC,MAAM,IAAI/wD,UAAU,2BAA2B6wD,KAElD,CCjDgCK,CAA0Bl4H,GAExDA,EAAQ,GAAW22H,SAAW,cAM3B32H,EAAQ,GAAW22H,oBAAoBd,KAC1C/6H,EAAQf,IAAI,UAAWiG,EAAQ22H,UAI3B77H,EAAQykG,IAAI,eAChBzkG,EAAQf,IAAI,aAAc,cAIvBiG,EAAQ82H,WAAah8H,EAAQykG,IAAI,oBACpCzkG,EAAQf,IAAI,kBAAmB,qBAGhC,IAAI,MAACg9H,GAAS/2H,EACO,mBAAV+2H,IACVA,EAAQA,EAAMN,IAMf,MAAMx5F,EGrSkBw5F,KACxB,GAAIA,EAAUx5F,OACb,OAAOw5F,EAAUx5F,OAGlB,MAAMk7F,EAAa1B,EAAU53E,KAAK/0D,OAAS,EACrC6kE,EAAO8nE,EAAU9nE,OAAwC,MAA/B8nE,EAAU53E,KAAKs5E,GAAsB,IAAM,IAC3E,MAAoD,MAA7C1B,EAAU53E,KAAKs5E,EAAaxpE,EAAK7kE,QAAkB,IAAM,IH8RjDsuI,CAAU3B,GAczB,MAAO,CAENA,YACAx4D,QAbe,CAEf7oE,KAAMqhI,EAAU13E,SAAW9hB,EAE3BhkB,OAAQjZ,EAAQiZ,OAChBne,QAASA,EAAQyzG,OAAO8mB,IAAI,iCAC5B2B,mBAAoBh3H,EAAQg3H,mBAC5BD,WE7P6BsB,CAAsBr4H,GACnD,IAAKo3H,EAAiB73B,IAAIk3B,EAAU/1G,UACnC,MAAM,IAAIsmD,UAAU,0BAA0B1rE,kBAAoBm7H,EAAU/1G,SAAS4W,QAAQ,KAAM,0BAGpG,GAA2B,UAAvBm/F,EAAU/1G,SAAsB,CACnC,MAAMnnB,EElDF,SAAyB62D,GAC5B,IAAK,UAAU56D,KAAK46D,GAChB,MAAM,IAAI4W,UAAU,oEAKxB,MAAMsxD,GAFNloE,EAAMA,EAAI94B,QAAQ,SAAU,KAELzvB,QAAQ,KAC/B,IAAoB,IAAhBywH,GAAqBA,GAAc,EACnC,MAAM,IAAItxD,UAAU,uBAGxB,MAAMuxD,EAAOnoE,EAAIvvB,UAAU,EAAGy3F,GAAY5iI,MAAM,KAChD,IAAI8iI,EAAU,GACVj7C,GAAS,EACb,MAAMt0F,EAAOsvI,EAAK,IAAM,aACxB,IAAIE,EAAWxvI,EACf,IAAK,IAAIY,EAAI,EAAGA,EAAI0uI,EAAKzuI,OAAQD,IACb,WAAZ0uI,EAAK1uI,GACL0zF,GAAS,GAGTk7C,GAAY,IAAIF,EAAK1uI,KACe,IAAhC0uI,EAAK1uI,GAAGge,QAAQ,cAChB2wH,EAAUD,EAAK1uI,GAAGg3C,UAAU,KAKnC03F,EAAK,IAAOC,EAAQ1uI,SACrB2uI,GAAY,oBACZD,EAAU,YAGd,MAAM9lC,EAAWnV,EAAS,SAAW,QAC/BhkF,EAAOm/H,SAAStoE,EAAIvvB,UAAUy3F,EAAa,IAC3CntE,EAAS4vB,OAAO5oC,KAAK54C,EAAMm5F,GAMjC,OAJAvnC,EAAOliE,KAAOA,EACdkiE,EAAOstE,SAAWA,EAElBttE,EAAOqtE,QAAUA,EACVrtE,CACX,CFOgB,CAAgBnrD,EAAQ1E,KAC/BiE,EAAW,IAAIi2H,EAASj8H,EAAM,CAACuB,QAAS,CAAC,eAAgBvB,EAAKk/H,YAEpE,YADA1lH,EAAQxT,EAET,CAGA,MAAM+O,GAA+B,WAAvBmoH,EAAU/1G,SAAwB,EAAQ,GAAM1gB,SACxD,OAACqkH,GAAUrkH,EACjB,IAAIT,EAAW,KAEf,MAAMo/G,EAAQ,KACb,MAAMr4E,EAAQ,IAAI6wF,EAAW,8BAC7BlvF,EAAO3B,GACHtmC,EAAQkpC,MAAQlpC,EAAQkpC,gBAAgB,YAC3ClpC,EAAQkpC,KAAK8qF,QAAQ1tF,GAGjB/mC,GAAaA,EAAS2pC,MAI3B3pC,EAAS2pC,KAAK+4B,KAAK,QAAS37B,IAG7B,GAAI+9E,GAAUA,EAAO4B,QAEpB,YADAtH,IAID,MAAMga,EAAmB,KACxBha,IACAiI,KAIKgS,EAAWtqH,EAAKmoH,EAAU1tI,WAAYk1E,GAExComD,GACHA,EAAO6B,iBAAiB,QAASyS,GAGlC,MAAM/R,EAAW,KAChBgS,EAASja,QACL0F,GACHA,EAAOyC,oBAAoB,QAAS6R,IAItCC,EAASx9C,GAAG,QAAS90C,IACpB2B,EAAO,IAAImqF,EAAW,cAAcpyH,EAAQ1E,uBAAuBgrC,EAAM7/C,UAAW,SAAU6/C,IAC9FsgF,MAyQH,SAA6C5mH,GAC5C,MAAM64H,EAAa,EAAA99C,OAAO5oC,KAAK,aAE/B,IAEI2mF,EAFAC,GAAoB,EACpBC,GAA0B,EAG9Bh5H,EAAQo7E,GAAG,WAAY77E,IACtB,MAAM,QAACzE,GAAWyE,EAClBw5H,EAAqD,YAAjCj+H,EAAQ,uBAAuCA,EAAQ,oBAG5EkF,EAAQo7E,GAAG,SAAU69C,IACpB,MAAMC,EAAgB,KACrB,GAAIH,IAAsBC,EAAyB,CAClD,MAAM1yF,EAAQ,IAAIwgC,MAAM,mBACxBxgC,EAAM49C,KAAO,6BAtR+B59C,KACzC/mC,GAAYA,EAAS2pC,MACxB3pC,EAAS2pC,KAAK8qF,QAAQ1tF,IAqRtB6yF,CAAc7yF,EACf,GAGK8yF,EAASxF,IACdoF,EAAwE,IAA9C,EAAAj+C,OAAOs+C,QAAQzF,EAAIh+H,OAAO,GAAIijI,IAGnDG,GAA2BF,IAC/BE,EACqE,IAApE,EAAAj+C,OAAOs+C,QAAQP,EAAcljI,OAAO,GAAIijI,EAAWjjI,MAAM,EAAG,KACL,IAAvD,EAAAmlF,OAAOs+C,QAAQzF,EAAIh+H,OAAO,GAAIijI,EAAWjjI,MAAM,KAIjDkjI,EAAgBlF,GAGjBqF,EAAOK,gBAAgB,QAASJ,GAChCD,EAAO79C,GAAG,OAAQg+C,GAElBp5H,EAAQo7E,GAAG,QAAS,KACnB69C,EAAOM,eAAe,QAASL,GAC/BD,EAAOM,eAAe,OAAQH,MAGjC,CAjTEI,CAAoCZ,GAOhC52D,QAAQ93D,QAAU,OAGrB0uH,EAASx9C,GAAG,SAAUljE,IACrB,IAAIuhH,EACJvhH,EAAEohH,gBAAgB,MAAO,KACxBG,EAAuBvhH,EAAEwhH,eAE1BxhH,EAAEohH,gBAAgB,QAASK,IAE1B,GAAIp6H,GAAYk6H,EAAuBvhH,EAAEwhH,eAAiBC,EAAU,CACnE,MAAMrzF,EAAQ,IAAIwgC,MAAM,mBACxBxgC,EAAM49C,KAAO,6BACb3kF,EAAS2pC,KAAK+4B,KAAK,QAAS37B,EAC7B,MAKHsyF,EAASx9C,GAAG,WAAYw+C,IACvBhB,EAAS1jD,WAAW,GACpB,MAAMp6E,ERyGF,SAAwBA,EAAU,IACxC,OAAO,IAAI+tC,EACV/tC,EAEEs6H,OAAO,CAACtjI,EAAQ5J,EAAO0f,EAAOiyH,KAC1BjyH,EAAQ,GAAM,GACjB9V,EAAOgE,KAAK+jI,EAAMjkI,MAAMgS,EAAOA,EAAQ,IAGjC9V,GACL,IACFumE,OAAO,EAAE7vE,EAAMN,MACf,IAGC,OAFA2sI,EAAmBrsI,GACnBssI,EAAoBtsI,EAAMwpD,OAAO9pD,KAC1B,CACR,CAAE,MACD,OAAO,CACR,IAIJ,CQ/HmB4xI,CAAeF,EAAUG,YAGzC,GAAIxE,EAAWqE,EAAUpwF,YAAa,CAErC,MAAM/oB,EAAW3lB,EAAQic,IAAI,YAG7B,IAAIijH,EAAc,KAClB,IACCA,EAA2B,OAAbv5G,EAAoB,KAAO,IAAIo1G,IAAIp1G,EAAUzgB,EAAQ1E,IACpE,CAAE,MAID,GAAyB,WAArB0E,EAAQ41H,SAGX,OAFA3tF,EAAO,IAAImqF,EAAW,wDAAwD3xG,IAAY,0BAC1FmmG,GAGF,CAGA,OAAQ5mH,EAAQ41H,UACf,IAAK,QAGJ,OAFA3tF,EAAO,IAAImqF,EAAW,0EAA0EpyH,EAAQ1E,MAAO,qBAC/GsrH,IAED,IAAK,SAEJ,MACD,IAAK,SAAU,CAEd,GAAoB,OAAhBoT,EACH,MAID,GAAIh6H,EAAQ01H,SAAW11H,EAAQ62H,OAG9B,OAFA5uF,EAAO,IAAImqF,EAAW,gCAAgCpyH,EAAQ1E,MAAO,sBACrEsrH,IAMD,MAAMqT,EAAiB,CACtBn/H,QAAS,IAAI+tC,EAAQ7oC,EAAQlF,SAC7B+7H,OAAQ72H,EAAQ62H,OAChBnB,QAAS11H,EAAQ01H,QAAU,EAC3BqB,MAAO/2H,EAAQ+2H,MACfD,SAAU92H,EAAQ82H,SAClB79G,OAAQjZ,EAAQiZ,OAChBiwB,KAAMjK,EAAMj/B,GACZqkH,OAAQrkH,EAAQqkH,OAChBnoE,KAAMl8C,EAAQk8C,KACdy6E,SAAU32H,EAAQ22H,SAClBM,eAAgBj3H,EAAQi3H,gBAYzB,IV7I6B,EAACzN,EAAazL,KAChD,MAAM3kD,EAAO,IAAIy8D,IAAI9X,GAAUmc,SACzB3jB,EAAO,IAAIsf,IAAIrM,GAAa0Q,SAElC,OAAO9gE,IAASm9C,GAAQn9C,EAAKi9D,SAAS,IAAI9f,MUyIhC4jB,CAAoBn6H,EAAQ1E,IAAK0+H,KV/HbxQ,EU+H6CxpH,EAAQ1E,IV9HtE,IAAIu6H,IU8HuEmE,GV9HzDt5G,WAClB,IAAIm1G,IAAIrM,GAAa9oG,UU8H5B,IAAK,MAAMl4B,IAAQ,CAAC,gBAAiB,mBAAoB,SAAU,WAClEyxI,EAAen/H,QAAQ23H,OAAOjqI,GAKhC,GAA6B,MAAzBoxI,EAAUpwF,YAAsBxpC,EAAQkpC,MAAQmuF,EAASnuF,gBAAgB,WAG5E,OAFAjB,EAAO,IAAImqF,EAAW,2DAA4D,8BAClFxL,IAK4B,MAAzBgT,EAAUpwF,aAAiD,MAAzBowF,EAAUpwF,YAA+C,MAAzBowF,EAAUpwF,YAA0C,SAAnBxpC,EAAQiZ,UAC9GghH,EAAehhH,OAAS,MACxBghH,EAAe/wF,UAAO92C,EACtB6nI,EAAen/H,QAAQ23H,OAAO,mBAI/B,MAAM2H,EH0FL,SAAuCt/H,GAG7C,MAAMu/H,GAAgBv/H,EAAQic,IAAI,oBAAsB,IAAIrhB,MAAM,UAGlE,IAAImiI,EAAS,GAMb,IAAK,MAAMzkH,KAASinH,EACfjnH,GAAS4iH,EAAez2B,IAAInsF,KAC/BykH,EAASzkH,GAKX,OAAOykH,CACR,CG9GqCyC,CAA8Bx/H,GAQ7D,OAPIs/H,IACHH,EAAehD,eAAiBmD,GAIjCrnH,EAAQ42B,EAAM,IAAIN,EAAQ2wF,EAAaC,UACvCrT,GAED,CAEA,QACC,OAAO3+E,EAAO,IAAI++B,UAAU,oBAAoBhnE,EAAQ41H,sDAE3D,CVlK2B,IAACpM,EUqKxBnF,GACHuV,EAAUW,KAAK,MAAO,KACrBlW,EAAOyC,oBAAoB,QAAS6R,KAItC,IAAIzvF,GAAO,cAAK0wF,EAAW,IAAI,EAAAnF,YAAenuF,IACzCA,GACH2B,EAAO3B,KAKL07B,QAAQ93D,QAAU,UACrB0vH,EAAUx+C,GAAG,UAAWu9C,GAGzB,MAAM6B,EAAkB,CACvBl/H,IAAK0E,EAAQ1E,IACbuE,OAAQ+5H,EAAUpwF,WAClBO,WAAY6vF,EAAUa,cACtB3/H,UACAohD,KAAMl8C,EAAQk8C,KACdw5E,QAAS11H,EAAQ01H,QACjB/Y,cAAe38G,EAAQ28G,eAIlB+d,EAAU5/H,EAAQic,IAAI,oBAU5B,IAAK/W,EAAQ82H,UAA+B,SAAnB92H,EAAQiZ,QAAiC,OAAZyhH,GAA6C,MAAzBd,EAAUpwF,YAA+C,MAAzBowF,EAAUpwF,WAGnH,OAFAjqC,EAAW,IAAIi2H,EAAStsF,EAAMsxF,QAC9BznH,EAAQxT,GAST,MAAMo7H,EAAc,CACnBhrH,MAAO,eACPirH,YAAa,gBAId,GAAgB,SAAZF,GAAkC,WAAZA,EAQzB,OAPAxxF,GAAO,cAAKA,EAAM,eAAkByxF,GAAcr0F,IAC7CA,GACH2B,EAAO3B,KAGT/mC,EAAW,IAAIi2H,EAAStsF,EAAMsxF,QAC9BznH,EAAQxT,GAKT,GAAgB,YAAZm7H,GAAqC,cAAZA,EAAyB,CAGrD,MAAM3F,GAAM,cAAK6E,EAAW,IAAI,EAAAnF,YAAenuF,IAC1CA,GACH2B,EAAO3B,KA8BT,OA3BAyuF,EAAIwF,KAAK,OAAQvuF,IAGf9C,EADyB,IAAV,GAAX8C,EAAM,KACH,cAAK9C,EAAM,kBAAsB5C,IACnCA,GACH2B,EAAO3B,MAIF,cAAK4C,EAAM,qBAAyB5C,IACtCA,GACH2B,EAAO3B,KAKV/mC,EAAW,IAAIi2H,EAAStsF,EAAMsxF,GAC9BznH,EAAQxT,UAETw1H,EAAIwF,KAAK,MAAO,KAGVh7H,IACJA,EAAW,IAAIi2H,EAAStsF,EAAMsxF,GAC9BznH,EAAQxT,KAIX,CAGA,GAAgB,OAAZm7H,EAQH,OAPAxxF,GAAO,cAAKA,EAAM,2BAA+B5C,IAC5CA,GACH2B,EAAO3B,KAGT/mC,EAAW,IAAIi2H,EAAStsF,EAAMsxF,QAC9BznH,EAAQxT,GAKTA,EAAW,IAAIi2H,EAAStsF,EAAMsxF,GAC9BznH,EAAQxT,KTuBkBy7E,OAAOu7B,GAAOrtE,WAC7B,OAATA,EAEHqtE,EAAK9lC,YAGCkiD,EAASzpF,EAAMqtE,ISzBrBskB,CAAcjC,EAAU54H,GAASy6E,MAAMxyC,IAEzC,C,GGlXI6yF,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB5oI,IAAjB6oI,EACH,OAAOA,EAAa99C,QAGrB,IAAID,EAAS49C,EAAyBE,GAAY,CACjDr4G,GAAIq4G,EACJE,QAAQ,EACR/9C,QAAS,CAAC,GAUX,OANAg+C,EAAoBH,GAAUl1I,KAAKo3F,EAAOC,QAASD,EAAQA,EAAOC,QAAS49C,GAG3E79C,EAAOg+C,QAAS,EAGTh+C,EAAOC,OACf,CAGA49C,EAAoBxjF,EAAI4jF,EC3BxBJ,EAAoBtpF,EAAI,CAAC0rC,EAASi+C,KACjC,IAAI,IAAIlmI,KAAOkmI,EACXL,EAAoBp7G,EAAEy7G,EAAYlmI,KAAS6lI,EAAoBp7G,EAAEw9D,EAASjoF,IAC5E4qC,OAAOqkD,eAAehH,EAASjoF,EAAK,CAAE8zE,YAAY,EAAMjyD,IAAKqkH,EAAWlmI,MCJ3E6lI,EAAoB/nI,EAAI,CAAC,EAGzB+nI,EAAoBx0I,EAAK80I,GACjB9hD,QAAQC,IAAI15C,OAAO7kC,KAAK8/H,EAAoB/nI,GAAGoiI,OAAO,CAACxqG,EAAU11B,KACvE6lI,EAAoB/nI,EAAEkC,GAAKmmI,EAASzwG,GAC7BA,GACL,KCNJmwG,EAAoBO,EAAKD,GAEZA,EAAU,gBCHvBN,EAAoBp7G,EAAI,CAACr2B,EAAKW,IAAU61C,OAAO0a,UAAUzyD,eAAejC,KAAKwD,EAAKW,GCClF8wI,EAAoBne,EAAKz/B,IACH,oBAAXoxB,QAA0BA,OAAO5jC,aAC1C7qC,OAAOqkD,eAAehH,EAASoxB,OAAO5jC,YAAa,CAAEziF,MAAO,WAE7D43C,OAAOqkD,eAAehH,EAAS,aAAc,CAAEj1F,OAAO,KCLvD6yI,EAAoBQ,IAAOr+C,IAC1BA,EAAOs+C,MAAQ,GACVt+C,EAAOz5C,WAAUy5C,EAAOz5C,SAAW,IACjCy5C,GjMCJ/3F,EAAkB,CACrB,IAAK,GAmBN41I,EAAoB/nI,EAAEsjF,QAAU,CAAC+kD,EAASzwG,KAEzC,IAAIzlC,EAAgBk2I,GAAU,CAE5B,IAAII,EAAiBnlD,QAAQ,KAAOykD,EAAoBO,EAAED,IACrDl2I,EAAgBk2I,IAnBL,CAACrvF,IACnB,IAAI0vF,EAAc1vF,EAAM2vF,QAASC,EAAW5vF,EAAM6vF,IAAKC,EAAU9vF,EAAM8vF,QACvE,IAAI,IAAId,KAAYU,EAChBX,EAAoBp7G,EAAE+7G,EAAaV,KACrCD,EAAoBxjF,EAAEyjF,GAAYU,EAAYV,IAG7Cc,GAASA,EAAQf,GACpB,IAAI,IAAIlxI,EAAI,EAAGA,EAAI+xI,EAAS9xI,OAAQD,IACnC1E,EAAgBy2I,EAAS/xI,IAAM,GAW7BkyI,CAAaN,EAGhB,G,qFkMhBD,oBAAyBn3F,GACxB4hD,EAAGC,YAAY,gCAEf,IAAI,EAAAb,UAAUhhD,GACd,MAAMtR,EAAa,CAClBgpG,iBAAkB13F,EAAQmzD,UAAUwkC,YAAY/xH,QAChDgyH,cAAep3C,EAAO56E,QACtBiyH,WAAW,IAAAjyH,WACX+sE,SAAUjV,QAAQiV,SAClBksB,QAASre,EAAOr1D,IAAI0zE,QACpBi5B,QAASt3C,EAAOr1D,IAAI2sG,QACpBC,SAAUv3C,EAAOr1D,IAAI4sG,UAEtB,EAAA/2C,UAAUC,QAAQj3E,KAAK,4BAA6B0kB,GAEpD,IAAI,EAAAyzD,QAAQniD,GACZ,IAAI,EAAAi6D,UAEJ,IAAInG,EAA0B,IAAI,EAAApJ,YAC9BstC,EAA8B,IAAI,EAAAC,cAClCC,EAAgC,IAAI,EAAAC,eAGxC33C,EAAO9Z,OAAO0xD,yBAAyB,gBAAiBJ,GACxDp2C,EAAGC,YAAY,8BAGfrB,EAAO9Z,OAAO0xD,yBAAyB,iBAAkBF,GACzDt2C,EAAGC,YAAY,+BAGf,MAAM2c,EAAgC,GAEtCA,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA6B,KAAQvkC,EAAYniB,aAC/F6sB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,wBAAyB,KAAQvkC,EAAYsB,eAC3FoJ,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,2BAA4B,KAAQvkC,EAAY0B,kBAC9FgJ,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA6B,KAAQvkC,EAAY+B,mBAC/F2I,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,2BAA4B,KAAQvkC,EAAYgC,kBAC9F0I,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,qBAAsB,KAAQvkC,EAAY//B,YACxFyqC,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,6BAA8B,KAAQvkC,EAAYoB,oBAChGsJ,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,+BAAgC,KAAQvkC,EAAYqB,sBAClGqJ,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA4B3tD,IAAwBopB,EAAYf,YAAYroB,MAC1H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,yBAA2B3tD,IAAwBopB,EAAYrM,WAAW/c,MACxH8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,mCAAqC3tD,IAAwBopB,EAAYE,kBAAkBtpB,MACzI8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,+BAAiC3tD,IAAwBopB,EAAYO,iBAAiB3pB,MACpI8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,mCAAoC,KAAQvkC,EAAYM,0BACtGoK,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,uBAAyB3tD,IAAwBopB,EAAYS,SAAS7pB,MACpH8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,yBAA2B3tD,IAAwBopB,EAAYW,WAAW/pB,MACxH8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,2BAA6B3tD,IAAwBopB,EAAY1J,aAAa1f,MAC5H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA8B3tD,IAAwBopB,EAAYc,cAAclqB,MAC9H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA8B3tD,IAAwBopB,EAAYgB,cAAcpqB,MAC9H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA4B3tD,IAAwBopB,EAAYiB,YAAYrqB,MAC1H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA4B3tD,IAAwBopB,EAAYd,YAAYtoB,MAC1H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,+BAAiC3tD,IAAwBopB,EAAYb,iBAAiBvoB,MACpI8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA4B3tD,IAAwBopB,EAAYf,YAAYroB,MAC1H8zB,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,8BAA+B,KAAQvkC,EAAY4C,qBACjG8H,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA6B,KAAQvkC,EAAY6C,mBAC/F6H,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,4BAA6B,KAAQvkC,EAAY8C,mBAC/F4H,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA2B,KAAQvkC,EAAY+C,iBAC7F2H,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA2B,KAAQvkC,EAAYgD,iBAC7F0H,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,+BAAgC,KAAQvkC,EAAYqD,sBAClGqH,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,0BAA2B,KAAQvkC,EAAYiD,iBAC7FyH,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,gCAAiC,KAAQvkC,EAAYmD,uBACnGuH,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,oBAAsB3tD,IAAwB,EAAAuvB,UAAUhZ,QAAQuY,MAAM9uB,EAAKmmB,MAAOnmB,EAAKymB,cACrIqN,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,mCAAoC,KAAQp6B,EAAOq6B,mBACjG95B,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,qBAAsB,KAAQ73C,EAAOr1D,IAAIotG,aAAa/3C,EAAOsM,IAAI/rF,MAAM,gDACrHy9F,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,gCAAiC,KAAQ73C,EAAOr1D,IAAIotG,aAAa/3C,EAAOsM,IAAI/rF,MAAM,+CAChIy9F,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,6BAA8B,KAAQ73C,EAAOr1D,IAAIotG,aAAa/3C,EAAOsM,IAAI/rF,MAAM,8HAC7Hy9F,EAAShtG,KAAKgvF,EAAOge,SAAS65B,gBAAgB,wBAAyB,KAAQ73C,EAAOr1D,IAAIotG,aAAa/3C,EAAOsM,IAAI/rF,MAAM,6GAExH,IAAK,MAAMgV,KAAKyoF,EAAYx+D,EAAQotD,cAAc57F,KAAKukB,GAGvD,EAAAkkF,UAAUhZ,QAAQge,0BAClB,EAAAhF,UAAUhZ,QAAQoe,kBAElB,EAAAre,UAAUC,SAASj3E,KAAK,uBACxB43E,EAAGC,YAAY,iCAChB,EAGA,wBACCD,EAAGC,YAAY,6BAChB,EAlGA,gBACA,UACA,UACA,OAEA,UACA,UACA,UACA,UACA,SACA,S","sources":["webpack://airflow-vscode-extension/webpack/runtime/require chunk loading","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/AppInsightsCore.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/Utils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-core-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EventsDiscardedReason.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/DataModels.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/EventBatch.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/ClockSkewManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/KillSwitch.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/RetryPolicy.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/Serializer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/HttpManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/TimeoutOverrideWrapper.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/1ds-post-js/dist-es5/PostChannel.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/applicationinsights-common.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaultHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/ConfigDefaults.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicSupport.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicProperty.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AggregationError.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicState.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/Config/DynamicConfig.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/EnumHelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK.Enums/InitActiveStatusEnum.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/CookieMgr.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/NotificationManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AppInsightsCore.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryInitializerPlugin.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/AsyncUtils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/BaseTelemetryPlugin.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/Constants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/RandomHelper.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DataCacheHelper.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DbgExtensionUtils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/DiagnosticLogger.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EnvUtils.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/EventHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/HelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/PerfManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ProcessTelemetryContext.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/SenderPostManager.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/W3cTraceParent.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/TelemetryHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHandlerContainer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/UnloadHookContainer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-shims/dist-es5/TsLibShims.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Constants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataSanitizer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Event.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Trace.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/HelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageView.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/PageViewPerformance.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Exception.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/DataPoint.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Metric.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/UrlHelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Util.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/RemoteDependencyData.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Offline.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Enums.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/StorageHelperFuncs.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/RequestResponseHeaders.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-core-js/dist-es5/JavaScriptSDK/ResponseHelpers.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/Contracts/ContextTagKeys.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Interfaces/PartAExtensions.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Envelope.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/Telemetry/Common/Data.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/InternalConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/EnvelopeCreator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/SendBuffer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Sender.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/Serializer.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/HashCodeScoreGenerator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/SamplingScoreGenerators/SamplingScoreGenerator.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-channel-js/dist-es5/TelemetryProcessors/Sample.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-common/dist-es5/ConnectionStringParser.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/index.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/applicationinsights-web-basic/dist-es5/__DynamicConstants.js","webpack://airflow-vscode-extension/./node_modules/@microsoft/dynamicproto-js/dist-es5/DynamicProto.js","webpack://airflow-vscode-extension/./node_modules/@nevware21/ts-async/dist/es5/mod/ts-async.js","webpack://airflow-vscode-extension/./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js","webpack://airflow-vscode-extension/external node-commonjs \"https\"","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/baseTelemetrySender.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/util.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/baseTelemetryReporter.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/node/telemetryReporter.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/appInsightsClientFactory.js","webpack://airflow-vscode-extension/./node_modules/@vscode/extension-telemetry/dist/node-esm/common/1dsClientFactory.js","webpack://airflow-vscode-extension/./node_modules/base-64/base64.js","webpack://airflow-vscode-extension/./node_modules/node-domexception/index.js","webpack://airflow-vscode-extension/./node_modules/tmp/lib/tmp.js","webpack://airflow-vscode-extension/./src/admin/AdminTreeItem.ts","webpack://airflow-vscode-extension/./src/admin/AdminTreeView.ts","webpack://airflow-vscode-extension/./src/admin/ConfigsView.ts","webpack://airflow-vscode-extension/./src/admin/ConnectionsView.ts","webpack://airflow-vscode-extension/./src/admin/PluginsView.ts","webpack://airflow-vscode-extension/./src/admin/ProvidersView.ts","webpack://airflow-vscode-extension/./src/admin/ServerHealthView.ts","webpack://airflow-vscode-extension/./src/admin/VariablesView.ts","webpack://airflow-vscode-extension/./src/common/Api.ts","webpack://airflow-vscode-extension/./src/common/MessageHub.ts","webpack://airflow-vscode-extension/./src/common/MethodResult.ts","webpack://airflow-vscode-extension/./src/common/Session.ts","webpack://airflow-vscode-extension/./src/common/Skills.ts","webpack://airflow-vscode-extension/./src/common/Telemetry.ts","webpack://airflow-vscode-extension/./src/common/UI.ts","webpack://airflow-vscode-extension/./src/dag/DagTreeDataProvider.ts","webpack://airflow-vscode-extension/./src/dag/DagTreeItem.ts","webpack://airflow-vscode-extension/./src/dag/DagTreeView.ts","webpack://airflow-vscode-extension/./src/dag/DagView.ts","webpack://airflow-vscode-extension/./src/language_tools/AIHandler.ts","webpack://airflow-vscode-extension/./src/language_tools/AirflowClientAdapter.ts","webpack://airflow-vscode-extension/./src/language_tools/AnalyseDagLatestRunTool.ts","webpack://airflow-vscode-extension/./src/language_tools/CancelDagRunTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetDagHistoryTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetDagRunDetailTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetDagRunsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetDagSourceCodeTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetFailedRunsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetRunningDagsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GetTodayTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToConfigsViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToConnectionsViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToDagLogViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToDagRunHistoryTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToDagViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToPluginsViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToProvidersViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToServerHealthViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/GoToVariablesViewTool.ts","webpack://airflow-vscode-extension/./src/language_tools/ListActiveDagsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/ListPausedDagsTool.ts","webpack://airflow-vscode-extension/./src/language_tools/PauseDagTool.ts","webpack://airflow-vscode-extension/./src/language_tools/TriggerDagRunTool.ts","webpack://airflow-vscode-extension/./src/language_tools/UnpauseDagTool.ts","webpack://airflow-vscode-extension/./src/report/DagLogView.ts","webpack://airflow-vscode-extension/./src/report/DagRunView.ts","webpack://airflow-vscode-extension/./src/report/DailyDagRunView.ts","webpack://airflow-vscode-extension/./src/report/ReportTreeItem.ts","webpack://airflow-vscode-extension/./src/report/ReportTreeView.ts","webpack://airflow-vscode-extension/./node_modules/web-streams-polyfill/dist/ponyfill.es2018.js","webpack://airflow-vscode-extension/external commonjs \"vscode\"","webpack://airflow-vscode-extension/external node-commonjs \"buffer\"","webpack://airflow-vscode-extension/external node-commonjs \"crypto\"","webpack://airflow-vscode-extension/external node-commonjs \"fs\"","webpack://airflow-vscode-extension/external node-commonjs \"node:process\"","webpack://airflow-vscode-extension/external node-commonjs \"node:stream/web\"","webpack://airflow-vscode-extension/external node-commonjs \"os\"","webpack://airflow-vscode-extension/external node-commonjs \"path\"","webpack://airflow-vscode-extension/external node-commonjs \"worker_threads\"","webpack://airflow-vscode-extension/./node_modules/fetch-blob/streams.cjs","webpack://airflow-vscode-extension/./node_modules/fetch-blob/file.js","webpack://airflow-vscode-extension/external node-commonjs \"node:fs\"","webpack://airflow-vscode-extension/external node-commonjs \"node:path\"","webpack://airflow-vscode-extension/./node_modules/fetch-blob/from.js","webpack://airflow-vscode-extension/./node_modules/fetch-blob/index.js","webpack://airflow-vscode-extension/./node_modules/formdata-polyfill/esm.min.js","webpack://airflow-vscode-extension/external node-commonjs \"node:http\"","webpack://airflow-vscode-extension/external node-commonjs \"node:https\"","webpack://airflow-vscode-extension/external node-commonjs \"node:zlib\"","webpack://airflow-vscode-extension/external node-commonjs \"node:stream\"","webpack://airflow-vscode-extension/external node-commonjs \"node:buffer\"","webpack://airflow-vscode-extension/external node-commonjs \"node:util\"","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/base.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/fetch-error.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/is.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/body.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/headers.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/is-redirect.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/response.js","webpack://airflow-vscode-extension/external node-commonjs \"node:url\"","webpack://airflow-vscode-extension/external node-commonjs \"node:net\"","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/referrer.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/request.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/errors/abort-error.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/index.js","webpack://airflow-vscode-extension/./node_modules/node-fetch/src/utils/get-search.js","webpack://airflow-vscode-extension/./node_modules/data-uri-to-buffer/dist/index.js","webpack://airflow-vscode-extension/webpack/bootstrap","webpack://airflow-vscode-extension/webpack/runtime/define property getters","webpack://airflow-vscode-extension/webpack/runtime/ensure chunk","webpack://airflow-vscode-extension/webpack/runtime/get javascript chunk filename","webpack://airflow-vscode-extension/webpack/runtime/hasOwnProperty shorthand","webpack://airflow-vscode-extension/webpack/runtime/make namespace object","webpack://airflow-vscode-extension/webpack/runtime/node module decorator","webpack://airflow-vscode-extension/./src/extension.ts"],"sourcesContent":["// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"loaded\", otherwise not loaded yet\nvar installedChunks = {\n\t792: 1\n};\n\n// no on chunks loaded\n\nvar installChunk = (chunk) => {\n\tvar moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(var i = 0; i < chunkIds.length; i++)\n\t\tinstalledChunks[chunkIds[i]] = 1;\n\n};\n\n// require() chunk loading for javascript\n__webpack_require__.f.require = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\tvar installedChunk = require(\"./\" + __webpack_require__.u(chunkId));\n\t\t\tif (!installedChunks[chunkId]) {\n\t\t\t\tinstallChunk(installedChunk);\n\t\t\t}\n\t\t} else installedChunks[chunkId] = 1;\n\t}\n};\n\n// no external install chunk\n\n// no HMR\n\n// no HMR manifest","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* AppInsightsCore.ts\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { AppInsightsCore as InternalCore, _throwInternal, createDynamicConfig, doPerf, dumpObj, throwError } from \"@microsoft/applicationinsights-core-js\";\r\nimport { objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { STR_DEFAULT_ENDPOINT_URL, STR_EMPTY, STR_PROPERTIES, STR_VERSION } from \"./InternalConstants\";\r\nimport { FullVersionString, getTime, isLatency } from \"./Utils\";\r\nimport { _DYN_INDEX_OF, _DYN_INITIALIZE, _DYN_POLL_INTERNAL_LOGS, _DYN_TIMINGS } from \"./__DynamicConstants\";\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze({\r\n    endpointUrl: STR_DEFAULT_ENDPOINT_URL,\r\n    propertyStorageOverride: { isVal: _chkPropOverride }\r\n});\r\nfunction _chkPropOverride(propertyStorageOverride) {\r\n    // Validate property storage override\r\n    if (propertyStorageOverride && (!propertyStorageOverride.getProperty || !propertyStorageOverride.setProperty)) {\r\n        throwError(\"Invalid property storage override passed.\");\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.initialize\"; }, function () {\r\n                    try {\r\n                        _base[_DYN_INITIALIZE /* @min:%2einitialize */](createDynamicConfig(config, defaultConfig, logger || _self.logger, false).cfg, extensions, logger, notificationManager);\r\n                    }\r\n                    catch (e) {\r\n                        var logger_1 = _self.logger;\r\n                        var message = dumpObj(e);\r\n                        if (message[_DYN_INDEX_OF /* @min:%2eindexOf */](\"channels\") !== -1) {\r\n                            // Add some additional context to the underlying reported error\r\n                            message += \"\\n - Channels must be provided through config.channels only!\";\r\n                        }\r\n                        _throwInternal(logger_1, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"SDK Initialization Failed - no telemetry will be sent: \" + message);\r\n                    }\r\n                }, function () { return ({ config: config, extensions: extensions, logger: logger, notificationManager: notificationManager }); });\r\n            };\r\n            _self.track = function (item) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.track\"; }, function () {\r\n                    var telemetryItem = item;\r\n                    if (telemetryItem) {\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        telemetryItem[_DYN_TIMINGS /* @min:%2etimings */].trackStart = getTime();\r\n                        if (!isLatency(telemetryItem.latency)) {\r\n                            telemetryItem.latency = 1 /* EventLatencyValue.Normal */;\r\n                        }\r\n                        var itemExt = telemetryItem.ext = telemetryItem.ext || {};\r\n                        itemExt.sdk = itemExt.sdk || {};\r\n                        itemExt.sdk.ver = FullVersionString;\r\n                        var baseData = telemetryItem.baseData = telemetryItem.baseData || {};\r\n                        baseData[STR_PROPERTIES /* @min:%2eproperties */] = baseData[STR_PROPERTIES /* @min:%2eproperties */] || {};\r\n                        var itemProperties = baseData[STR_PROPERTIES /* @min:%2eproperties */];\r\n                        itemProperties[STR_VERSION] = itemProperties[STR_VERSION] || _self.pluginVersionString || STR_EMPTY;\r\n                    }\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: item }); }, !(item.sync));\r\n            };\r\n            _self[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */] = function (eventName) {\r\n                return _base[_DYN_POLL_INTERNAL_LOGS /* @min:%2epollInternalLogs */](eventName || \"InternalLog\");\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(InternalCore));\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_DEFAULT_ENDPOINT_URL = \"https://browser.events.data.microsoft.com/OneCollector/1.0/\";\r\nexport var STR_VERSION = \"version\";\r\nexport var STR_PROPERTIES = \"properties\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* Utils.ts\r\n* @author  Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n* File containing utility functions.\r\n*/\r\nimport { arrForEach, getGlobalInst, getNavigator, hasDocument, hasWindow, isArray, isBoolean, isNullOrUndefined, isNumber, isObject, isReactNative, isString, isUndefined, newGuid, objForEachKey, perfNow } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ObjProto, strShimObject } from \"@microsoft/applicationinsights-shims\";\r\nimport { strIndexOf, strLeft } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { _DYN_INDEX_OF, _DYN_LENGTH, _DYN_PROCESS_TELEMETRY_ST0, _DYN_TIMINGS, _DYN_VALUE } from \"./__DynamicConstants\";\r\nexport var Version = '4.3.11';\r\nexport var FullVersionString = \"1DS-Web-JS-\" + Version;\r\nvar ObjHasOwnProperty = ObjProto.hasOwnProperty;\r\n// Defining here so we don't need to take (import) the ApplicationInsights Common module\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n// If value is array just get the type for the first element\r\nvar _fieldTypeEventPropMap = (_a = {},\r\n    _a[0 /* FieldValueSanitizerType.NotSet */] = 0 /* eEventPropertyType.Unspecified */,\r\n    _a[2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a);\r\n/**\r\n * @ignore\r\n */\r\n// let _uaDisallowsSameSiteNone = null;\r\nvar uInt8ArraySupported = null;\r\n// var _areCookiesAvailable: boolean | undefined;\r\n/**\r\n * Checks if document object is available\r\n */\r\nexport var isDocumentObjectAvailable = hasDocument();\r\n/**\r\n * Checks if window object is available\r\n */\r\nexport var isWindowObjectAvailable = hasWindow();\r\n/**\r\n * Checks if value is assigned to the given param.\r\n * @param value - The token from which the tenant id is to be extracted.\r\n * @returns True/false denoting if value is assigned to the param.\r\n */\r\nexport function isValueAssigned(value) {\r\n    /// <summary> takes a value and checks for undefined, null and empty string </summary>\r\n    /// <param type=\"any\"> value to be tested </param>\r\n    /// <returns> true if value is null undefined or emptyString </returns>\r\n    return !(value === STR_EMPTY || isNullOrUndefined(value));\r\n}\r\n/**\r\n * Gets the tenant id from the tenant token.\r\n * @param apiKey - The token from which the tenant id is to be extracted.\r\n * @returns The tenant id.\r\n */\r\nexport function getTenantId(apiKey) {\r\n    if (apiKey) {\r\n        var indexTenantId = strIndexOf(apiKey, \"-\");\r\n        if (indexTenantId > -1) {\r\n            return strLeft(apiKey, indexTenantId);\r\n        }\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Checks if Uint8Array are available in the current environment. Safari and Firefox along with\r\n * ReactNative are known to not support Uint8Array properly.\r\n * @returns True if available, false otherwise.\r\n */\r\nexport function isUint8ArrayAvailable() {\r\n    if (uInt8ArraySupported === null) {\r\n        uInt8ArraySupported = !isUndefined(Uint8Array) && !isSafariOrFirefox() && !isReactNative();\r\n    }\r\n    return uInt8ArraySupported;\r\n}\r\n/**\r\n * Checks if the value is a valid EventLatency.\r\n * @param value - The value that needs to be checked.\r\n * @returns True if the value is in AWTEventLatency, false otherwise.\r\n */\r\nexport function isLatency(value) {\r\n    if (value && isNumber(value) && value >= 1 /* EventLatencyValue.Normal */ && value <= 4 /* EventLatencyValue.Immediate */) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Sanitizes the Property. It checks the that the property name and value are valid. It also\r\n * checks/populates the correct type and pii of the property value.\r\n * @param name - property name                          - The property name.\r\n * @param property - The property value or an IEventProperty containing value,\r\n * type ,pii and customer content.\r\n * @returns IEventProperty containing valid name, value, pii and type or null if invalid.\r\n */\r\nexport function sanitizeProperty(name, property, stringifyObjects) {\r\n    // Check that property is valid\r\n    if ((!property && !isValueAssigned(property)) || typeof name !== \"string\") {\r\n        return null;\r\n    }\r\n    // Perf optimization -- only need to get the type once not multiple times\r\n    var propType = typeof property;\r\n    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n    if (propType === \"string\" || propType === \"number\" || propType === \"boolean\" || isArray(property)) {\r\n        property = { value: property };\r\n    }\r\n    else if (propType === \"object\" && !ObjHasOwnProperty.call(property, \"value\")) {\r\n        property = { value: stringifyObjects ? JSON.stringify(property) : property };\r\n    }\r\n    else if (isNullOrUndefined(property[_DYN_VALUE /* @min:%2evalue */])\r\n        || property[_DYN_VALUE /* @min:%2evalue */] === STR_EMPTY || (!isString(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isNumber(property[_DYN_VALUE /* @min:%2evalue */]) && !isBoolean(property[_DYN_VALUE /* @min:%2evalue */])\r\n        && !isArray(property[_DYN_VALUE /* @min:%2evalue */]))) {\r\n        // Since property is IEventProperty, we need to validate its value\r\n        return null;\r\n    }\r\n    // We need to check that if the property value is an array, it is valid\r\n    if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) &&\r\n        !isArrayValid(property[_DYN_VALUE /* @min:%2evalue */])) {\r\n        return null;\r\n    }\r\n    // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n    // If the value is a complex type like an array that can't be converted to string we will drop\r\n    // the property.\r\n    if (!isNullOrUndefined(property.kind)) {\r\n        if (isArray(property[_DYN_VALUE /* @min:%2evalue */]) || !isValueKind(property.kind)) {\r\n            return null;\r\n        }\r\n        property[_DYN_VALUE /* @min:%2evalue */] = property[_DYN_VALUE /* @min:%2evalue */].toString();\r\n    }\r\n    return property;\r\n}\r\nexport function getCommonSchemaMetaData(value, kind, type) {\r\n    var encodedTypeValue = -1;\r\n    if (!isUndefined(value)) {\r\n        if (kind > 0) {\r\n            if (kind === 32 /* eValueKind.CustomerContent_GenericContent */) {\r\n                // encode customer content. Value can only be string. bit 13-16 are for cc\r\n                encodedTypeValue = (1 << 13);\r\n            }\r\n            else if (kind <= 13) {\r\n                // encode PII. Value can only be string. bits 5-12 are for Pii\r\n                encodedTypeValue = (kind << 5);\r\n            }\r\n        }\r\n        // isDataType checks that the \"type\" is a number so we don't need to check for undefined\r\n        if (isDataType(type)) {\r\n            // Data Type is provided and valid, so use that\r\n            if (encodedTypeValue === -1) {\r\n                // Don't return -1\r\n                encodedTypeValue = 0;\r\n            }\r\n            encodedTypeValue |= type;\r\n        }\r\n        else {\r\n            var propType = _fieldTypeEventPropMap[getFieldValueType(value)] || -1;\r\n            if (encodedTypeValue !== -1 && propType !== -1) {\r\n                // pii exists so we must return correct type\r\n                encodedTypeValue |= propType;\r\n            }\r\n            else if (propType === 6 /* eEventPropertyType.Double */) {\r\n                encodedTypeValue = propType;\r\n            }\r\n        }\r\n    }\r\n    return encodedTypeValue;\r\n}\r\n/**\r\n * Helper to get and decode the cookie value using decodeURIComponent, this is for historical\r\n * backward compatibility where the document.cookie value was decoded before parsing.\r\n * @param cookieMgr - The cookie manager to use\r\n * @param name - The name of the cookie to get\r\n * @param decode - A flag to indicate whether the cookie value should be decoded\r\n * @returns The decoded cookie value (if available) otherwise an empty string.\r\n */\r\nexport function getCookieValue(cookieMgr, name, decode) {\r\n    if (decode === void 0) { decode = true; }\r\n    var cookieValue;\r\n    if (cookieMgr) {\r\n        cookieValue = cookieMgr.get(name);\r\n        if (decode && cookieValue && decodeURIComponent) {\r\n            cookieValue = decodeURIComponent(cookieValue);\r\n        }\r\n    }\r\n    return cookieValue || STR_EMPTY;\r\n}\r\n/**\r\n * Create a new guid.\r\n * @param style - The style of guid to generated, defaults to Digits\r\n * Digits (Default) : 32 digits separated by hyphens: 00000000-0000-0000-0000-000000000000\r\n * Braces - 32 digits separated by hyphens, enclosed in braces: \\{00000000-0000-0000-0000-000000000000\\}\r\n * Parentheses - 32 digits separated by hyphens, enclosed in parentheses: (00000000-0000-0000-0000-000000000000)\r\n * Numeric - 32 digits: 00000000000000000000000000000000\r\n */\r\nexport function createGuid(style) {\r\n    if (style === void 0) { style = \"D\" /* GuidStyle.Digits */; }\r\n    var theGuid = newGuid();\r\n    if (style === \"B\" /* GuidStyle.Braces */) {\r\n        theGuid = \"{\" + theGuid + \"}\";\r\n    }\r\n    else if (style === \"P\" /* GuidStyle.Parentheses */) {\r\n        theGuid = \"(\" + theGuid + \")\";\r\n    }\r\n    else if (style === \"N\" /* GuidStyle.Numeric */) {\r\n        theGuid = theGuid.replace(/-/g, STR_EMPTY);\r\n    }\r\n    return theGuid;\r\n}\r\n/**\r\n * Pass in the objects to merge as arguments.\r\n * @param obj1 - object to merge.  Set this argument to 'true' for a deep extend.\r\n * @param obj2 - object to merge.\r\n * @param obj3 - object to merge.\r\n * @param obj4 - object to merge.\r\n * @param obj5 - object to merge.\r\n * @returns The extended object.\r\n */\r\nexport function extend(obj, obj2, obj3, obj4, obj5) {\r\n    // Variables\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments[_DYN_LENGTH /* @min:%2elength */];\r\n    var theArgs = arguments;\r\n    // Check if a deep merge\r\n    if (isBoolean(theArgs[0])) {\r\n        deep = theArgs[0];\r\n        i++;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = theArgs[i];\r\n        objForEachKey(obj, function (prop, value) {\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && value && isObject(value)) {\r\n                if (isArray(value)) {\r\n                    extended[prop] = extended[prop] || [];\r\n                    arrForEach(value, function (arrayValue, arrayIndex) {\r\n                        if (arrayValue && isObject(arrayValue)) {\r\n                            extended[prop][arrayIndex] = extend(true, extended[prop][arrayIndex], arrayValue);\r\n                        }\r\n                        else {\r\n                            extended[prop][arrayIndex] = arrayValue;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    extended[prop] = extend(true, extended[prop], value);\r\n                }\r\n            }\r\n            else {\r\n                extended[prop] = value;\r\n            }\r\n        });\r\n    }\r\n    return extended;\r\n}\r\nexport var getTime = perfNow;\r\nexport function isValueKind(value) {\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value === 0 /* eValueKind.NotSet */ || ((value > 0 /* eValueKind.NotSet */ && value <= 13 /* eValueKind.Pii_IPV4AddressLegacy */) || value === 32 /* eValueKind.CustomerContent_GenericContent */)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isDataType(value) {\r\n    // Remark: 0 returns false, but it doesn't affect encoding anyways\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value >= 0 && value <= 9) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSafariOrFirefox() {\r\n    var nav = getNavigator();\r\n    // If non-browser navigator will be undefined\r\n    if (!isUndefined(nav) && nav.userAgent) {\r\n        var ua = nav.userAgent.toLowerCase();\r\n        if ((ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"safari\") >= 0 || ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"firefox\") >= 0) && ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"chrome\") < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isArrayValid(value) {\r\n    return value[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\nexport function setProcessTelemetryTimings(event, identifier) {\r\n    var evt = event;\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */] = evt[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] = evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */] || {};\r\n    evt[_DYN_TIMINGS /* @min:%2etimings */][_DYN_PROCESS_TELEMETRY_ST0 /* @min:%2eprocessTelemetryStart */][identifier] = getTime();\r\n}\r\n/**\r\n * Returns a bitwise value for the FieldValueSanitizerType enum representing the decoded type of the passed value\r\n * @param value - The value to determine the type\r\n */\r\nexport function getFieldValueType(value) {\r\n    var theType = 0 /* FieldValueSanitizerType.NotSet */;\r\n    if (value !== null && value !== undefined) {\r\n        var objType = typeof value;\r\n        if (objType === \"string\") {\r\n            theType = 1 /* FieldValueSanitizerType.String */;\r\n        }\r\n        else if (objType === \"number\") {\r\n            theType = 2 /* FieldValueSanitizerType.Number */;\r\n        }\r\n        else if (objType === \"boolean\") {\r\n            theType = 3 /* FieldValueSanitizerType.Boolean */;\r\n        }\r\n        else if (objType === strShimObject) {\r\n            theType = 4 /* FieldValueSanitizerType.Object */;\r\n            if (isArray(value)) {\r\n                theType = 4096 /* FieldValueSanitizerType.Array */;\r\n                if (value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Empty arrays are not supported and are considered to be the same as null\r\n                    theType |= getFieldValueType(value[0]);\r\n                }\r\n            }\r\n            else if (ObjHasOwnProperty.call(value, \"value\")) {\r\n                // Looks like an IEventProperty\r\n                theType = 8192 /* FieldValueSanitizerType.EventProperty */ | getFieldValueType(value[_DYN_VALUE /* @min:%2evalue */]);\r\n            }\r\n        }\r\n    }\r\n    return theType;\r\n}\r\n/**\r\n * Helper to identify whether we are running in a chromium based browser environment\r\n */\r\nexport function isChromium() {\r\n    return !!getGlobalInst(\"chrome\");\r\n}\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n * Check to see if the value is \\> 0\r\n * @param value - The value to check\r\n * @returns true if \\> 0 otherwise false\r\n */\r\nexport function isGreaterThanZero(value) {\r\n    return value > 0;\r\n}\r\n//# sourceMappingURL=Utils.js.map","/*\n * 1DS JS SDK Core, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 4\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_POLL_INTERNAL_LOGS = \"pollInternalLogs\"; // Count: 4\r\nexport var _DYN_VALUE = \"value\"; // Count: 20\r\nexport var _DYN_LENGTH = \"length\"; // Count: 7\r\nexport var _DYN_PROCESS_TELEMETRY_ST0 = \"processTelemetryStart\"; // Count: 3\r\nexport var _DYN_HANDLE_FIELD = \"handleField\"; // Count: 3\r\nexport var _DYN_RM_SANITIZER = \"rmSanitizer\"; // Count: 3\r\nexport var _DYN_RM_FIELD_SANITIZER = \"rmFieldSanitizer\"; // Count: 3\r\nexport var _DYN_CAN_HANDLE = \"canHandle\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\n/**\r\n * The EventsDiscardedReason enumeration contains a set of values that specify the reason for discarding an event.\r\n */\r\nexport var EventsDiscardedReason = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eEventsDiscardedReason.Unknown */,\r\n    /**\r\n     * Status set to non-retryable.\r\n     */\r\n    NonRetryableStatus: 1 /* eEventsDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * The event is invalid.\r\n     */\r\n    InvalidEvent: 2 /* eEventsDiscardedReason.InvalidEvent */,\r\n    /**\r\n     * The size of the event is too large.\r\n     */\r\n    SizeLimitExceeded: 3 /* eEventsDiscardedReason.SizeLimitExceeded */,\r\n    /**\r\n     * The server is not accepting events from this instrumentation key.\r\n     */\r\n    KillSwitch: 4 /* eEventsDiscardedReason.KillSwitch */,\r\n    /**\r\n     * The event queue is full.\r\n     */\r\n    QueueFull: 5 /* eEventsDiscardedReason.QueueFull */,\r\n    /**\r\n     * The sendBeacon API call failed for reasons other than size limits.\r\n     */\r\n    BeaconSendFailure: 6 /* eEventsDiscardedReason.BeaconSendFailure */\r\n}));\r\n/**\r\n *  The eBatchDiscardedReason enumeration contains a set of values that specify the reason for discarding offline batches.\r\n */\r\nexport var BatchDiscardedReason = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eBatchDiscardedReason.Unknown */,\r\n    /**\r\n      * Status set to non-retryable after sending\r\n      */\r\n    NonRetryableStatus: 1 /* eBatchDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * Batches with lower number of critical events are dropped to free up storage space\r\n     */\r\n    CleanStorage: 2 /* eBatchDiscardedReason.CleanStorage */,\r\n    /**\r\n     * The batches in storage exceed max allowed time\r\n     */\r\n    MaxInStorageTimeExceeded: 3 /* eBatchDiscardedReason.MaxInStorageTimeExceeded */\r\n}));\r\n//# sourceMappingURL=EventsDiscardedReason.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n * Real Time profile (default profile). RealTime Latency events are sent every 1 sec and\r\n * Normal Latency events are sent every 2 sec.\r\n */\r\nexport var RT_PROFILE = \"REAL_TIME\";\r\n/**\r\n * Near Real Time profile. RealTime Latency events are sent every 3 sec and\r\n * Normal Latency events are sent every 6 sec.\r\n */\r\nexport var NRT_PROFILE = \"NEAR_REAL_TIME\";\r\n/**\r\n * Best Effort. RealTime Latency events are sent every 9 sec and\r\n * Normal Latency events are sent every 18 sec.\r\n */\r\nexport var BE_PROFILE = \"BEST_EFFORT\";\r\n//# sourceMappingURL=DataModels.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_POST_METHOD = \"POST\";\r\nexport var STR_DISABLED_PROPERTY_NAME = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var STR_DROPPED = \"drop\";\r\nexport var STR_SENDING = \"send\";\r\nexport var STR_REQUEUE = \"requeue\";\r\nexport var STR_RESPONSE_FAIL = \"rspFail\";\r\nexport var STR_OTHER = \"oth\";\r\nexport var DEFAULT_CACHE_CONTROL = \"no-cache, no-store\";\r\nexport var DEFAULT_CONTENT_TYPE = \"application/x-json-stream\";\r\nexport var STR_CACHE_CONTROL = \"cache-control\";\r\nexport var STR_CONTENT_TYPE_HEADER = \"content-type\";\r\nexport var STR_KILL_TOKENS_HEADER = \"kill-tokens\";\r\nexport var STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nexport var STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nexport var STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\nexport var STR_CLIENT_VERSION = \"client-version\";\r\nexport var STR_CLIENT_ID = \"client-id\";\r\nexport var STR_TIME_DELTA_TO_APPLY = \"time-delta-to-apply-millis\";\r\nexport var STR_UPLOAD_TIME = \"upload-time\";\r\nexport var STR_API_KEY = \"apikey\";\r\nexport var STR_MSA_DEVICE_TICKET = \"AuthMsaDeviceTicket\";\r\nexport var STR_AUTH_WEB_TOKEN = \"WebAuthToken\";\r\nexport var STR_AUTH_XTOKEN = \"AuthXToken\";\r\nexport var STR_SDK_VERSION = \"sdk-version\";\r\nexport var STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nexport var STR_MSFPC = \"msfpc\";\r\nexport var STR_TRACE = \"trace\";\r\nexport var STR_USER = \"user\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_ALLOW_REQUEST_SENDIN0 = \"allowRequestSending\"; // Count: 3\r\nexport var _DYN_SHOULD_ADD_CLOCK_SKE1 = \"shouldAddClockSkewHeaders\"; // Count: 2\r\nexport var _DYN_GET_CLOCK_SKEW_HEADE2 = \"getClockSkewHeaderValue\"; // Count: 2\r\nexport var _DYN_SET_CLOCK_SKEW = \"setClockSkew\"; // Count: 3\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 7\r\nexport var _DYN_I_KEY = \"iKey\"; // Count: 10\r\nexport var _DYN_COUNT = \"count\"; // Count: 19\r\nexport var _DYN_EVENTS = \"events\"; // Count: 8\r\nexport var _DYN_PUSH = \"push\"; // Count: 15\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 3\r\nexport var _DYN_HDRS = \"hdrs\"; // Count: 7\r\nexport var _DYN_USE_HDRS = \"useHdrs\"; // Count: 4\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_SET_TIMEOUT_OVERRIDE = \"setTimeoutOverride\"; // Count: 3\r\nexport var _DYN_CLEAR_TIMEOUT_OVERRI3 = \"clearTimeoutOverride\"; // Count: 3\r\nexport var _DYN_PAYLOAD_PREPROCESSOR = \"payloadPreprocessor\"; // Count: 2\r\nexport var _DYN_OVERRIDE_ENDPOINT_UR4 = \"overrideEndpointUrl\"; // Count: 3\r\nexport var _DYN_AVOID_OPTIONS = \"avoidOptions\"; // Count: 3\r\nexport var _DYN_DISABLE_EVENT_TIMING5 = \"disableEventTimings\"; // Count: 2\r\nexport var _DYN_ENABLE_COMPOUND_KEY = \"enableCompoundKey\"; // Count: 4\r\nexport var _DYN_DISABLE_XHR_SYNC = \"disableXhrSync\"; // Count: 6\r\nexport var _DYN_DISABLE_FETCH_KEEP_A6 = \"disableFetchKeepAlive\"; // Count: 7\r\nexport var _DYN_ADD_NO_RESPONSE = \"addNoResponse\"; // Count: 3\r\nexport var _DYN_USE_SEND_BEACON = \"useSendBeacon\"; // Count: 3\r\nexport var _DYN_FETCH_CREDENTIALS = \"fetchCredentials\"; // Count: 4\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR7 = \"alwaysUseXhrOverride\"; // Count: 3\r\nexport var _DYN_SERIALIZE_OFFLINE_EV8 = \"serializeOfflineEvt\"; // Count: 2\r\nexport var _DYN_GET_OFFLINE_REQUEST_9 = \"getOfflineRequestDetails\"; // Count: 2\r\nexport var _DYN_CREATE_PAYLOAD = \"createPayload\"; // Count: 4\r\nexport var _DYN_CREATE_ONE_DSPAYLOAD = \"createOneDSPayload\"; // Count: 4\r\nexport var _DYN_PAYLOAD_BLOB = \"payloadBlob\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 10\r\nexport var _DYN__THE_PAYLOAD = \"_thePayload\"; // Count: 5\r\nexport var _DYN_BATCHES = \"batches\"; // Count: 15\r\nexport var _DYN_SEND_TYPE = \"sendType\"; // Count: 13\r\nexport var _DYN_CAN_SEND_REQUEST = \"canSendRequest\"; // Count: 3\r\nexport var _DYN_SEND_QUEUED_REQUESTS = \"sendQueuedRequests\"; // Count: 5\r\nexport var _DYN_SET_UNLOADING = \"setUnloading\"; // Count: 3\r\nexport var _DYN_IS_TENANT_KILLED = \"isTenantKilled\"; // Count: 3\r\nexport var _DYN_SEND_SYNCHRONOUS_BAT10 = \"sendSynchronousBatch\"; // Count: 2\r\nexport var _DYN__TRANSPORT = \"_transport\"; // Count: 3\r\nexport var _DYN_GET_WPARAM = \"getWParam\"; // Count: 4\r\nexport var _DYN_IS_BEACON = \"isBeacon\"; // Count: 4\r\nexport var _DYN_TIMINGS = \"timings\"; // Count: 4\r\nexport var _DYN_IS_TEARDOWN = \"isTeardown\"; // Count: 3\r\nexport var _DYN__SEND_REASON = \"_sendReason\"; // Count: 3\r\nexport var _DYN_SET_KILL_SWITCH_TENA11 = \"setKillSwitchTenants\"; // Count: 2\r\nexport var _DYN__BACK_OFF_TRANSMISSI12 = \"_backOffTransmission\"; // Count: 2\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 4\r\nexport var _DYN_IGNORE_MC1_MS0_COOKI13 = \"ignoreMc1Ms0CookieProcessing\"; // Count: 2\r\nexport var _DYN_AUTO_FLUSH_EVENTS_LI14 = \"autoFlushEventsLimit\"; // Count: 2\r\nexport var _DYN_DISABLE_AUTO_BATCH_F15 = \"disableAutoBatchFlushLimit\"; // Count: 2\r\nexport var _DYN_OVERRIDE_INSTRUMENTA16 = \"overrideInstrumentationKey\"; // Count: 2\r\nexport var _DYN_SEND_ATTEMPT = \"sendAttempt\"; // Count: 4\r\nexport var _DYN_LATENCY = \"latency\"; // Count: 7\r\nexport var _DYN_SYNC = \"sync\"; // Count: 7\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* EventBatch.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2020\r\n*/\r\nimport { isNullOrUndefined, isValueAssigned } from \"@microsoft/1ds-core-js\";\r\nimport { STR_EMPTY, STR_MSFPC } from \"./InternalConstants\";\r\nimport { _DYN_CONCAT, _DYN_COUNT, _DYN_EVENTS, _DYN_I_KEY, _DYN_LENGTH, _DYN_PUSH, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nfunction _getEventMsfpc(theEvent) {\r\n    var intWeb = ((theEvent.ext || {})[\"intweb\"]);\r\n    if (intWeb && isValueAssigned(intWeb[STR_MSFPC])) {\r\n        return intWeb[STR_MSFPC];\r\n    }\r\n    return null;\r\n}\r\nfunction _getMsfpc(theEvents) {\r\n    var msfpc = null;\r\n    for (var lp = 0; msfpc === null && lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        msfpc = _getEventMsfpc(theEvents[lp]);\r\n    }\r\n    return msfpc;\r\n}\r\n/**\r\n* This class defines a \"batch\" events related to a specific iKey, it is used by the PostChannel and HttpManager\r\n* to collect and transfer ownership of events without duplicating them in-memory. This reduces the previous\r\n* array duplication and shared ownership issues that occurred due to race conditions caused by the async nature\r\n* of sending requests.\r\n*/\r\nvar EventBatch = /** @class */ (function () {\r\n    /**\r\n     * Private constructor so that caller is forced to use the static create method.\r\n     * @param iKey - The iKey to associate with the events (not validated)\r\n     * @param addEvents - The optional collection of events to assign to this batch - defaults to an empty array.\r\n     */\r\n    function EventBatch(iKey, addEvents) {\r\n        var events = addEvents ? [][_DYN_CONCAT /* @min:%2econcat */](addEvents) : [];\r\n        var _self = this;\r\n        var _msfpc = _getMsfpc(events);\r\n        _self[_DYN_I_KEY /* @min:%2eiKey */] = function () {\r\n            return iKey;\r\n        };\r\n        _self.Msfpc = function () {\r\n            // return the cached value unless it's undefined -- used to avoid cpu\r\n            return _msfpc || STR_EMPTY;\r\n        };\r\n        _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n            return events[_DYN_LENGTH /* @min:%2elength */];\r\n        };\r\n        _self[_DYN_EVENTS /* @min:%2eevents */] = function () {\r\n            return events;\r\n        };\r\n        _self.addEvent = function (theEvent) {\r\n            if (theEvent) {\r\n                events[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                if (!_msfpc) {\r\n                    // Not found so try and find one\r\n                    _msfpc = _getEventMsfpc(theEvent);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        _self[_DYN_SPLIT /* @min:%2esplit */] = function (fromEvent, numEvents) {\r\n            // Create a new batch with the same iKey\r\n            var theEvents;\r\n            if (fromEvent < events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                var cnt = events[_DYN_LENGTH /* @min:%2elength */] - fromEvent;\r\n                if (!isNullOrUndefined(numEvents)) {\r\n                    cnt = numEvents < cnt ? numEvents : cnt;\r\n                }\r\n                theEvents = events.splice(fromEvent, cnt);\r\n                // reset the fetched msfpc value\r\n                _msfpc = _getMsfpc(events);\r\n            }\r\n            return new EventBatch(iKey, theEvents);\r\n        };\r\n    }\r\n    /**\r\n     * Creates a new Event Batch object\r\n     * @param iKey - The iKey associated with this batch of events\r\n     */\r\n    EventBatch.create = function (iKey, theEvents) {\r\n        return new EventBatch(iKey, theEvents);\r\n    };\r\n    return EventBatch;\r\n}());\r\nexport { EventBatch };\r\n//# sourceMappingURL=EventBatch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ClockSkewManager.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_ALLOW_REQUEST_SENDIN0, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_SET_CLOCK_SKEW, _DYN_SHOULD_ADD_CLOCK_SKE1 } from \"./__DynamicConstants\";\r\n/**\r\n* Class to manage clock skew correction.\r\n*/\r\nvar ClockSkewManager = /** @class */ (function () {\r\n    function ClockSkewManager() {\r\n        var _allowRequestSending = true;\r\n        var _shouldAddClockSkewHeaders = true;\r\n        var _isFirstRequest = true;\r\n        var _clockSkewHeaderValue = \"use-collector-delta\";\r\n        var _clockSkewSet = false;\r\n        dynamicProto(ClockSkewManager, this, function (_self) {\r\n            /**\r\n             * Determine if requests can be sent.\r\n             * @returns True if requests can be sent, false otherwise.\r\n             */\r\n            _self[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */] = function () {\r\n                return _allowRequestSending;\r\n            };\r\n            /**\r\n             * Tells the ClockSkewManager that it should assume that the first request has now been sent,\r\n             * If this method had not yet been called AND the clock Skew had not been set this will set\r\n             * allowRequestSending to false until setClockSet() is called.\r\n             */\r\n            _self.firstRequestSent = function () {\r\n                if (_isFirstRequest) {\r\n                    _isFirstRequest = false;\r\n                    if (!_clockSkewSet) {\r\n                        // Block sending until we get the first clock Skew\r\n                        _allowRequestSending = false;\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * Determine if clock skew headers should be added to the request.\r\n             * @returns True if clock skew headers should be added, false otherwise.\r\n             */\r\n            _self[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */] = function () {\r\n                return _shouldAddClockSkewHeaders;\r\n            };\r\n            /**\r\n             * Gets the clock skew header value.\r\n             * @returns The clock skew header value.\r\n             */\r\n            _self[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */] = function () {\r\n                return _clockSkewHeaderValue;\r\n            };\r\n            /**\r\n             * Sets the clock skew header value. Once clock skew is set this method\r\n             * is no-op.\r\n             * @param timeDeltaInMillis - Time delta to be saved as the clock skew header value.\r\n             */\r\n            _self[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */] = function (timeDeltaInMillis) {\r\n                if (!_clockSkewSet) {\r\n                    if (timeDeltaInMillis) {\r\n                        _clockSkewHeaderValue = timeDeltaInMillis;\r\n                        _shouldAddClockSkewHeaders = true;\r\n                        _clockSkewSet = true;\r\n                    }\r\n                    else {\r\n                        _shouldAddClockSkewHeaders = false;\r\n                    }\r\n                    // Unblock sending\r\n                    _allowRequestSending = true;\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for ClockSkewManager.prototype.allowRequestSending.\r\n// Removed Stub for ClockSkewManager.prototype.firstRequestSent.\r\n// Removed Stub for ClockSkewManager.prototype.shouldAddClockSkewHeaders.\r\n// Removed Stub for ClockSkewManager.prototype.getClockSkewHeaderValue.\r\n// Removed Stub for ClockSkewManager.prototype.setClockSkew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ClockSkewManager.__ieDyn=1;\n\n    return ClockSkewManager;\r\n}());\r\nexport { ClockSkewManager };\r\n//# sourceMappingURL=ClockSkewManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* KillSwitch.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrForEach, dateNow, strTrim } from \"@microsoft/1ds-core-js\";\r\nimport { _DYN_IS_TENANT_KILLED, _DYN_LENGTH, _DYN_PUSH, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SPLIT } from \"./__DynamicConstants\";\r\nvar SecToMsMultiplier = 1000;\r\n/**\r\n* Class to stop certain tenants sending events.\r\n*/\r\nvar KillSwitch = /** @class */ (function () {\r\n    function KillSwitch() {\r\n        var _killedTokenDictionary = {};\r\n        function _normalizeTenants(values) {\r\n            var result = [];\r\n            if (values) {\r\n                arrForEach(values, function (value) {\r\n                    result[_DYN_PUSH /* @min:%2epush */](strTrim(value));\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n        dynamicProto(KillSwitch, this, function (_self) {\r\n            _self[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */] = function (killTokens, killDuration) {\r\n                if (killTokens && killDuration) {\r\n                    try {\r\n                        var killedTokens = _normalizeTenants(killTokens[_DYN_SPLIT /* @min:%2esplit */](\",\"));\r\n                        if (killDuration === \"this-request-only\") {\r\n                            return killedTokens;\r\n                        }\r\n                        var durationMs = parseInt(killDuration, 10) * SecToMsMultiplier;\r\n                        for (var i = 0; i < killedTokens[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n                            _killedTokenDictionary[killedTokens[i]] = dateNow() + durationMs;\r\n                        }\r\n                    }\r\n                    catch (ex) {\r\n                        return [];\r\n                    }\r\n                }\r\n                return [];\r\n            };\r\n            _self[_DYN_IS_TENANT_KILLED /* @min:%2eisTenantKilled */] = function (tenantToken) {\r\n                var killDictionary = _killedTokenDictionary;\r\n                var name = strTrim(tenantToken);\r\n                if (killDictionary[name] !== undefined && killDictionary[name] > dateNow()) {\r\n                    return true;\r\n                }\r\n                delete killDictionary[name];\r\n                return false;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for KillSwitch.prototype.setKillSwitchTenants.\r\n// Removed Stub for KillSwitch.prototype.isTenantKilled.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    KillSwitch.__ieDyn=1;\n\n    return KillSwitch;\r\n}());\r\nexport { KillSwitch };\r\n//# sourceMappingURL=KillSwitch.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { mathFloor, mathMin } from \"@nevware21/ts-utils\";\r\n/**\r\n* RetryPolicy.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nvar RandomizationLowerThreshold = 0.8;\r\nvar RandomizationUpperThreshold = 1.2;\r\nvar BaseBackoff = 3000;\r\nvar MaxBackoff = 600000;\r\n/**\r\n * Determine if the request should be retried for the given status code.\r\n * The below expression reads that we should only retry for:\r\n *      - HttpStatusCodes that are smaller than 300.\r\n *      - HttpStatusCodes greater or equal to 500 (except for 501-NotImplement\r\n *        and 505-HttpVersionNotSupport).\r\n *      - HttpStatusCode 408-RequestTimeout.\r\n *      - HttpStatusCode 429.\r\n * This is based on Microsoft.WindowsAzure.Storage.RetryPolicies.ExponentialRetry class\r\n * @param httpStatusCode - The status code returned for the request.\r\n * @returns True if request should be retried, false otherwise.\r\n */\r\nexport function retryPolicyShouldRetryForStatus(httpStatusCode) {\r\n    /* tslint:disable:triple-equals */\r\n    // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n    return !((httpStatusCode >= 300 && httpStatusCode < 500 && httpStatusCode != 429)\r\n        || (httpStatusCode == 501)\r\n        || (httpStatusCode == 505));\r\n    /* tslint:enable:triple-equals */\r\n}\r\n/**\r\n * Gets the number of milliseconds to back off before retrying the request. The\r\n * back off duration is exponentially scaled based on the number of retries already\r\n * done for the request.\r\n * @param retriesSoFar - The number of times the request has already been retried.\r\n * @returns The back off duration for the request before it can be retried.\r\n */\r\nexport function retryPolicyGetMillisToBackoffForRetry(retriesSoFar) {\r\n    var waitDuration = 0;\r\n    var minBackoff = BaseBackoff * RandomizationLowerThreshold;\r\n    var maxBackoff = BaseBackoff * RandomizationUpperThreshold;\r\n    var randomBackoff = mathFloor(Math.random() * (maxBackoff - minBackoff)) + minBackoff;\r\n    waitDuration = Math.pow(2, retriesSoFar) * randomBackoff;\r\n    return mathMin(waitDuration, MaxBackoff);\r\n}\r\n//# sourceMappingURL=RetryPolicy.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Serializer.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\n// @skip-file-minify\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrIndexOf, doPerf, getCommonSchemaMetaData, getTenantId, isArray, isValueAssigned, objForEachKey, sanitizeProperty, strStartsWith } from \"@microsoft/1ds-core-js\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { mathMin, strSubstr } from \"@nevware21/ts-utils\";\r\n/**\r\n * Note: This is an optimization for V8-based browsers. When V8 concatenates a string,\r\n * the strings are only joined logically using a \"cons string\" or \"constructed/concatenated\r\n * string\". These containers keep references to one another and can result in very large\r\n * memory usage. For example, if a 2MB string is constructed by concatenating 4 bytes\r\n * together at a time, the memory usage will be ~44MB; so ~22x increase. The strings are\r\n * only joined together when an operation requiring their joining takes place, such as\r\n * substr(). This function is called when adding data to this buffer to ensure these\r\n * types of strings are periodically joined to reduce the memory footprint.\r\n * Setting to every 20 events as the JSON.stringify() may have joined many strings\r\n * and calling this too much causes a minor delay while processing.\r\n */\r\nvar _MAX_STRING_JOINS = 20;\r\n// Max Size set by One Collector: https://msazure.visualstudio.com/OneDsCollector/_git/Collector?path=/Services/Azure/CollectorWorkerRoleAzure/ServiceConfiguration.Cloud.cscfg\r\nvar RequestSizeLimitBytes = 3145728; // approx 3.15 Mb\r\nvar BeaconRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nvar MaxRecordSize = 2000000; // approx 2 Mb\r\nvar MaxBeaconRecordSize = mathMin(MaxRecordSize, BeaconRequestSizeLimitBytes);\r\nvar metadata = \"metadata\";\r\nvar f = \"f\";\r\nvar rCheckDot = /\\./;\r\n/**\r\n* Class to handle serialization of event and request.\r\n* Currently uses Bond for serialization. Please note that this may be subject to change.\r\n*/\r\nvar Serializer = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the Serializer class\r\n     * @param perfManager - The performance manager to use for tracking performance\r\n     * @param valueSanitizer - The value sanitizer to use for sanitizing field values\r\n     * @param stringifyObjects - Should objects be stringified before being sent\r\n     * @param enableCompoundKey - Should compound keys be enabled (defaults to false)\r\n     * @param getEncodedTypeOverride - The callback to get the encoded type for a property defaults to ({@link getCommonSchemaMetaData }(...))\r\n     * @param excludeCsMetaData - (!DANGER!) Should metadata be populated when encoding the event blob (defaults to false) - PII data will NOT be tagged as PII for backend processing\r\n     * @param cfg channel cfg for setting request and record size limit\r\n     */\r\n    function Serializer(perfManager, valueSanitizer, stringifyObjects, enableCompoundKey, getEncodedTypeOverride, excludeCsMetaData, cfg) {\r\n        var strData = \"data\";\r\n        var strBaseData = \"baseData\";\r\n        var strExt = \"ext\";\r\n        var _checkForCompoundkey = !!enableCompoundKey;\r\n        var _processSubKeys = true;\r\n        var _theSanitizer = valueSanitizer;\r\n        var _isReservedCache = {};\r\n        var _excludeCsMetaData = !!excludeCsMetaData;\r\n        var _getEncodedType = getEncodedTypeOverride || getCommonSchemaMetaData;\r\n        var _sizeCfg = _getSizeLimtCfg(cfg);\r\n        var _requestSizeLimitBytes = _validateSizeLimit(_sizeCfg.requestLimit, RequestSizeLimitBytes, 0);\r\n        var _beaconRequestSizeLimitBytes = _validateSizeLimit(_sizeCfg.requestLimit, BeaconRequestSizeLimitBytes, 1);\r\n        var _maxRecordSize = _validateSizeLimit(_sizeCfg.recordLimit, MaxRecordSize, 0);\r\n        var _maxBeaconRecordSize = Math.min(_validateSizeLimit(_sizeCfg.recordLimit, MaxBeaconRecordSize, 1), _beaconRequestSizeLimitBytes);\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            _self.createPayload = function (retryCnt, isTeardown, isSync, isReducedPayload, sendReason, sendType) {\r\n                return {\r\n                    apiKeys: [],\r\n                    payloadBlob: STR_EMPTY,\r\n                    overflow: null,\r\n                    sizeExceed: [],\r\n                    failedEvts: [],\r\n                    batches: [],\r\n                    numEvents: 0,\r\n                    retryCnt: retryCnt,\r\n                    isTeardown: isTeardown,\r\n                    isSync: isSync,\r\n                    isBeacon: isReducedPayload,\r\n                    sendType: sendType,\r\n                    sendReason: sendReason\r\n                };\r\n            };\r\n            _self.appendPayload = function (payload, theBatch, maxEventsPerBatch) {\r\n                var canAddEvents = payload && theBatch && !payload.overflow;\r\n                if (canAddEvents) {\r\n                    doPerf(perfManager, function () { return \"Serializer:appendPayload\"; }, function () {\r\n                        var theEvents = theBatch.events();\r\n                        var payloadBlob = payload.payloadBlob;\r\n                        var payloadEvents = payload.numEvents;\r\n                        var eventsAdded = false;\r\n                        var sizeExceeded = [];\r\n                        var failedEvts = [];\r\n                        var isBeaconPayload = payload.isBeacon;\r\n                        var requestMaxSize = isBeaconPayload ? _beaconRequestSizeLimitBytes : _requestSizeLimitBytes;\r\n                        var recordMaxSize = isBeaconPayload ? _maxBeaconRecordSize : _maxRecordSize;\r\n                        var lp = 0;\r\n                        var joinCount = 0;\r\n                        while (lp < theEvents.length) {\r\n                            var theEvent = theEvents[lp];\r\n                            if (theEvent) {\r\n                                if (payloadEvents >= maxEventsPerBatch) {\r\n                                    // Maximum events per payload reached, so don't add any more\r\n                                    payload.overflow = theBatch.split(lp);\r\n                                    break;\r\n                                }\r\n                                var eventBlob = _self.getEventBlob(theEvent);\r\n                                if (eventBlob && eventBlob.length <= recordMaxSize) {\r\n                                    // This event will fit into the payload\r\n                                    var blobLength = eventBlob.length;\r\n                                    var currentSize = payloadBlob.length;\r\n                                    if (currentSize + blobLength > requestMaxSize) {\r\n                                        // Request or batch size exceeded, so don't add any more to the payload\r\n                                        payload.overflow = theBatch.split(lp);\r\n                                        break;\r\n                                    }\r\n                                    if (payloadBlob) {\r\n                                        payloadBlob += \"\\n\";\r\n                                    }\r\n                                    payloadBlob += eventBlob;\r\n                                    joinCount++;\r\n                                    // v8 memory optimization only\r\n                                    if (joinCount > _MAX_STRING_JOINS) {\r\n                                        // this substr() should cause the constructed string to join\r\n                                        strSubstr(payloadBlob, 0, 1);\r\n                                        joinCount = 0;\r\n                                    }\r\n                                    eventsAdded = true;\r\n                                    payloadEvents++;\r\n                                }\r\n                                else {\r\n                                    if (eventBlob) {\r\n                                        // Single event size exceeded so remove from the batch\r\n                                        sizeExceeded.push(theEvent);\r\n                                    }\r\n                                    else {\r\n                                        failedEvts.push(theEvent);\r\n                                    }\r\n                                    // We also need to remove this event from the existing array, otherwise a notification will be sent\r\n                                    // indicating that it was successfully sent\r\n                                    theEvents.splice(lp, 1);\r\n                                    lp--;\r\n                                }\r\n                            }\r\n                            lp++;\r\n                        }\r\n                        if (sizeExceeded.length > 0) {\r\n                            payload.sizeExceed.push(EventBatch.create(theBatch.iKey(), sizeExceeded));\r\n                            // Remove the exceeded events from the batch\r\n                        }\r\n                        if (failedEvts.length > 0) {\r\n                            payload.failedEvts.push(EventBatch.create(theBatch.iKey(), failedEvts));\r\n                            // Remove the failed events from the batch\r\n                        }\r\n                        if (eventsAdded) {\r\n                            payload.batches.push(theBatch);\r\n                            payload.payloadBlob = payloadBlob;\r\n                            payload.numEvents = payloadEvents;\r\n                            var apiKey = theBatch.iKey();\r\n                            if (arrIndexOf(payload.apiKeys, apiKey) === -1) {\r\n                                payload.apiKeys.push(apiKey);\r\n                            }\r\n                        }\r\n                    }, function () { return ({ payload: payload, theBatch: { iKey: theBatch.iKey(), evts: theBatch.events() }, max: maxEventsPerBatch }); });\r\n                }\r\n                return canAddEvents;\r\n            };\r\n            _self.getEventBlob = function (eventData) {\r\n                try {\r\n                    return doPerf(perfManager, function () { return \"Serializer.getEventBlob\"; }, function () {\r\n                        var serializedEvent = {};\r\n                        // Adding as dynamic keys for v8 performance\r\n                        serializedEvent.name = eventData.name;\r\n                        serializedEvent.time = eventData.time;\r\n                        serializedEvent.ver = eventData.ver;\r\n                        serializedEvent.iKey = \"o:\" + getTenantId(eventData.iKey);\r\n                        // Assigning local var so usage in part b/c don't throw if there is no ext\r\n                        var serializedExt = {};\r\n                        var _addMetadataCallback;\r\n                        if (!_excludeCsMetaData) {\r\n                            _addMetadataCallback = function (pathKeys, key, value) {\r\n                                _addJSONPropertyMetaData(_getEncodedType, serializedExt, pathKeys, key, value);\r\n                            };\r\n                        }\r\n                        // Part A\r\n                        var eventExt = eventData[strExt];\r\n                        if (eventExt) {\r\n                            // Only assign ext if the event had one (There are tests covering this use case)\r\n                            serializedEvent[strExt] = serializedExt;\r\n                            objForEachKey(eventExt, function (key, value) {\r\n                                var data = serializedExt[key] = {};\r\n                                // Don't include a metadata callback as we don't currently set metadata Part A fields\r\n                                _processPathKeys(value, data, \"ext.\" + key, true, null, null, true);\r\n                            });\r\n                        }\r\n                        var serializedData = serializedEvent[strData] = {};\r\n                        serializedData.baseType = eventData.baseType;\r\n                        var serializedBaseData = serializedData[strBaseData] = {};\r\n                        // Part B\r\n                        _processPathKeys(eventData.baseData, serializedBaseData, strBaseData, false, [strBaseData], _addMetadataCallback, _processSubKeys);\r\n                        // Part C\r\n                        _processPathKeys(eventData.data, serializedData, strData, false, [], _addMetadataCallback, _processSubKeys);\r\n                        return JSON.stringify(serializedEvent);\r\n                    }, function () { return ({ item: eventData }); });\r\n                }\r\n                catch (e) {\r\n                    return null;\r\n                }\r\n            };\r\n            function _isReservedField(path, name) {\r\n                var result = _isReservedCache[path];\r\n                if (result === undefined) {\r\n                    if (path.length >= 7) {\r\n                        // Do not allow the changing of fields located in the ext.metadata or ext.web extension\r\n                        result = strStartsWith(path, \"ext.metadata\") || strStartsWith(path, \"ext.web\");\r\n                    }\r\n                    _isReservedCache[path] = result;\r\n                }\r\n                return result;\r\n            }\r\n            function _processPathKeys(srcObj, target, thePath, checkReserved, metadataPathKeys, metadataCallback, processSubKeys) {\r\n                objForEachKey(srcObj, function (key, srcValue) {\r\n                    var prop = null;\r\n                    if (srcValue || isValueAssigned(srcValue)) {\r\n                        var path = thePath;\r\n                        var name_1 = key;\r\n                        var theMetaPathKeys = metadataPathKeys;\r\n                        var destObj = target;\r\n                        // Handle keys with embedded '.', like \"TestObject.testProperty\"\r\n                        if (_checkForCompoundkey && !checkReserved && rCheckDot.test(key)) {\r\n                            var subKeys = key.split(\".\");\r\n                            var keyLen = subKeys.length;\r\n                            if (keyLen > 1) {\r\n                                if (theMetaPathKeys) {\r\n                                    // Create a copy of the meta path keys so we can add the extra ones\r\n                                    theMetaPathKeys = theMetaPathKeys.slice();\r\n                                }\r\n                                for (var lp = 0; lp < keyLen - 1; lp++) {\r\n                                    var subKey = subKeys[lp];\r\n                                    // Add/reuse the sub key object\r\n                                    destObj = destObj[subKey] = destObj[subKey] || {};\r\n                                    path += \".\" + subKey;\r\n                                    if (theMetaPathKeys) {\r\n                                        theMetaPathKeys.push(subKey);\r\n                                    }\r\n                                }\r\n                                name_1 = subKeys[keyLen - 1];\r\n                            }\r\n                        }\r\n                        var isReserved = checkReserved && _isReservedField(path, name_1);\r\n                        if (!isReserved && _theSanitizer && _theSanitizer.handleField(path, name_1)) {\r\n                            prop = _theSanitizer.value(path, name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        else {\r\n                            prop = sanitizeProperty(name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        if (prop) {\r\n                            // Set the value\r\n                            var newValue = prop.value;\r\n                            destObj[name_1] = newValue;\r\n                            if (metadataCallback) {\r\n                                metadataCallback(theMetaPathKeys, name_1, prop);\r\n                            }\r\n                            if (processSubKeys && typeof newValue === \"object\" && !isArray(newValue)) {\r\n                                var newPath = theMetaPathKeys;\r\n                                if (newPath) {\r\n                                    newPath = newPath.slice();\r\n                                    newPath.push(name_1);\r\n                                }\r\n                                // Make sure we process sub objects as well (for value sanitization and metadata)\r\n                                _processPathKeys(srcValue, newValue, path + \".\" + name_1, checkReserved, newPath, metadataCallback, processSubKeys);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.createPayload.\r\n// Removed Stub for Serializer.prototype.appendPayload.\r\n// Removed Stub for Serializer.prototype.getEventBlob.\r\n// Removed Stub for Serializer.prototype.handleField.\r\n// Removed Stub for Serializer.prototype.getSanitizer.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\nfunction _validateSizeLimit(cfgVal, defaultVal, idx) {\r\n    if (isArray(cfgVal)) {\r\n        var val = cfgVal[idx];\r\n        if (val > 0 && val <= defaultVal) {\r\n            return val;\r\n        }\r\n    }\r\n    return defaultVal;\r\n}\r\nfunction _getSizeLimtCfg(cfg) {\r\n    var defaultCfg = {};\r\n    if (cfg && cfg.requestLimit) {\r\n        return cfg.requestLimit;\r\n    }\r\n    return defaultCfg;\r\n}\r\n/**\r\n * @ignore\r\n * @param getEncodedType - The function to get the encoded type for the property\r\n * @param json - The json object to add the metadata to\r\n * @param propKeys - The property keys to add to the metadata\r\n * @param name - The name of the property\r\n * @param propertyValue - The property value\r\n */\r\nfunction _addJSONPropertyMetaData(getEncodedType, json, propKeys, name, propertyValue) {\r\n    if (propertyValue && json) {\r\n        var encodedTypeValue = getEncodedType(propertyValue.value, propertyValue.kind, propertyValue.propertyType);\r\n        if (encodedTypeValue > -1) {\r\n            // Add the root metadata\r\n            var metaData = json[metadata];\r\n            if (!metaData) {\r\n                // Sets the root 'f'\r\n                metaData = json[metadata] = { f: {} };\r\n            }\r\n            var metaTarget = metaData[f];\r\n            if (!metaTarget) {\r\n                // This can occur if someone has manually added an ext.metadata object\r\n                // Such as ext.metadata.privLevel and ext.metadata.privTags\r\n                metaTarget = metaData[f] = {};\r\n            }\r\n            // Traverse the metadata path and build each object (contains an 'f' key) -- if required\r\n            if (propKeys) {\r\n                for (var lp = 0; lp < propKeys.length; lp++) {\r\n                    var key = propKeys[lp];\r\n                    if (!metaTarget[key]) {\r\n                        metaTarget[key] = { f: {} };\r\n                    }\r\n                    var newTarget = metaTarget[key][f];\r\n                    if (!newTarget) {\r\n                        // Not expected, but can occur if the metadata context was pre-created as part of the event\r\n                        newTarget = metaTarget[key][f] = {};\r\n                    }\r\n                    metaTarget = newTarget;\r\n                }\r\n            }\r\n            metaTarget = metaTarget[name] = {};\r\n            if (isArray(propertyValue.value)) {\r\n                metaTarget[\"a\"] = {\r\n                    t: encodedTypeValue\r\n                };\r\n            }\r\n            else {\r\n                metaTarget[\"t\"] = encodedTypeValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* HttpManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { FullVersionString, SenderPostManager, _getAllResponseHeaders, _throwInternal, _warnToConsole, arrForEach, dateNow, doPerf, dumpObj, extend, getCommonSchemaMetaData, getNavigator, getResponseText, getTime, hasOwnProperty, isBeaconsSupported, isFeatureEnabled, isFetchSupported, isNullOrUndefined, isReactNative, isUndefined, isValueAssigned, objForEachKey, objKeys, onConfigChange, optimizeObject, prependTransports, strUndefined } from \"@microsoft/1ds-core-js\";\r\nimport { arrAppend, getInst, isFunction } from \"@nevware21/ts-utils\";\r\nimport { ClockSkewManager } from \"./ClockSkewManager\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { DEFAULT_CACHE_CONTROL, DEFAULT_CONTENT_TYPE, STR_API_KEY, STR_AUTH_XTOKEN, STR_CACHE_CONTROL, STR_CLIENT_ID, STR_CLIENT_VERSION, STR_CONTENT_TYPE_HEADER, STR_DROPPED, STR_EMPTY, STR_KILL_DURATION_HEADER, STR_KILL_TOKENS_HEADER, STR_MSA_DEVICE_TICKET, STR_MSFPC, STR_NO_RESPONSE_BODY, STR_OTHER, STR_REQUEUE, STR_RESPONSE_FAIL, STR_SENDING, STR_TIME_DELTA_HEADER, STR_TIME_DELTA_TO_APPLY, STR_UPLOAD_TIME } from \"./InternalConstants\";\r\nimport { KillSwitch } from \"./KillSwitch\";\r\nimport { retryPolicyGetMillisToBackoffForRetry, retryPolicyShouldRetryForStatus } from \"./RetryPolicy\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_ADD_NO_RESPONSE, _DYN_ALLOW_REQUEST_SENDIN0, _DYN_ALWAYS_USE_XHR_OVERR7, _DYN_AVOID_OPTIONS, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_CREATE_PAYLOAD, _DYN_DISABLE_EVENT_TIMING5, _DYN_DISABLE_FETCH_KEEP_A6, _DYN_DISABLE_XHR_SYNC, _DYN_ENABLE_COMPOUND_KEY, _DYN_EVENTS, _DYN_FETCH_CREDENTIALS, _DYN_GET_CLOCK_SKEW_HEADE2, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_HDRS, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_IS_BEACON, _DYN_IS_TEARDOWN, _DYN_I_KEY, _DYN_LENGTH, _DYN_OVERRIDE_ENDPOINT_UR4, _DYN_PAYLOAD_BLOB, _DYN_PAYLOAD_PREPROCESSOR, _DYN_PUSH, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SEND_TYPE, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_CLOCK_SKEW, _DYN_SET_KILL_SWITCH_TENA11, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SHOULD_ADD_CLOCK_SKE1, _DYN_SPLIT, _DYN_TIMINGS, _DYN_TO_LOWER_CASE, _DYN_USE_HDRS, _DYN_USE_SEND_BEACON, _DYN__BACK_OFF_TRANSMISSI12, _DYN__SEND_REASON, _DYN__THE_PAYLOAD, _DYN__TRANSPORT } from \"./__DynamicConstants\";\r\nvar strSendAttempt = \"sendAttempt\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar UrlQueryString = \"?cors=true&\" + STR_CONTENT_TYPE_HEADER[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() + \"=\" + DEFAULT_CONTENT_TYPE;\r\n/**\r\n * Identifies the default notification reason to the action names\r\n */\r\nvar _eventActionMap = (_a = {},\r\n    _a[1 /* EventBatchNotificationReason.Paused */] = STR_REQUEUE,\r\n    _a[100 /* EventBatchNotificationReason.RequeueEvents */] = STR_REQUEUE,\r\n    _a[200 /* EventBatchNotificationReason.Complete */] = \"sent\",\r\n    _a[8004 /* EventBatchNotificationReason.KillSwitch */] = STR_DROPPED,\r\n    _a[8003 /* EventBatchNotificationReason.SizeLimitExceeded */] = STR_DROPPED,\r\n    _a[8006 /* EventBatchNotificationReason.BeaconSendFailure */] = STR_DROPPED,\r\n    _a);\r\nvar _collectorQsHeaders = {};\r\nvar _collectorHeaderToQs = {};\r\nfunction _addCollectorHeaderQsMapping(qsName, headerName, allowQs) {\r\n    _collectorQsHeaders[qsName] = headerName;\r\n    if (allowQs !== false) {\r\n        _collectorHeaderToQs[headerName] = qsName;\r\n    }\r\n}\r\n_addCollectorHeaderQsMapping(STR_MSA_DEVICE_TICKET, STR_MSA_DEVICE_TICKET, false);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_VERSION, STR_CLIENT_VERSION);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_ID, \"Client-Id\");\r\n_addCollectorHeaderQsMapping(STR_API_KEY, STR_API_KEY);\r\n_addCollectorHeaderQsMapping(STR_TIME_DELTA_TO_APPLY, STR_TIME_DELTA_TO_APPLY);\r\n_addCollectorHeaderQsMapping(STR_UPLOAD_TIME, STR_UPLOAD_TIME);\r\n_addCollectorHeaderQsMapping(STR_AUTH_XTOKEN, STR_AUTH_XTOKEN);\r\nfunction _hasHeader(headers, header) {\r\n    var hasHeader = false;\r\n    if (headers && header) {\r\n        var keys = objKeys(headers);\r\n        if (keys && keys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            var lowerHeader = header[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            for (var lp = 0; lp < keys[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                var value = keys[lp];\r\n                if (value && hasOwnProperty(header, value) &&\r\n                    value[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === lowerHeader) {\r\n                    hasHeader = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasHeader;\r\n}\r\nfunction _addRequestDetails(details, name, value, useHeaders) {\r\n    if (name && value && value[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        if (useHeaders && _collectorQsHeaders[name]) {\r\n            details[_DYN_HDRS /* @min:%2ehdrs */][_collectorQsHeaders[name]] = value;\r\n            details[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n        }\r\n        else {\r\n            details.url += \"&\" + name + \"=\" + value;\r\n        }\r\n    }\r\n}\r\nfunction _addQueryStringParameter(qsParams, name, value) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams[i].value = value;\r\n            return;\r\n        }\r\n    }\r\n    qsParams[_DYN_PUSH /* @min:%2epush */]({ name: name, value: value });\r\n}\r\nfunction _removeQueryStringParameter(qsParams, name) {\r\n    for (var i = 0; i < qsParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        if (qsParams[i].name === name) {\r\n            qsParams.splice(i, 1);\r\n            return;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Class managing the sending of requests.\r\n */\r\nvar HttpManager = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param requestQueue   - The queue that contains the requests to be sent.\r\n     */\r\n    function HttpManager(maxEventsPerBatch, maxConnections, maxRequestRetriesBeforeBackoff, actions) {\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        // Only set \"Default\" values in the _initDefaults() method, unless value are not \"reset\" during unloading\r\n        // ------------------------------------------------------------------------------------------------------------------------\r\n        var _urlString;\r\n        var _killSwitch;\r\n        var _paused;\r\n        var _clockSkewManager;\r\n        var _useBeacons = false;\r\n        var _outstandingRequests; // Holds the number of outstanding async requests that have not returned a response yet\r\n        var _postManager;\r\n        var _logger;\r\n        var _sendInterfaces;\r\n        var _core;\r\n        var _customHttpInterface;\r\n        var _queryStringParameters;\r\n        var _headers;\r\n        var _batchQueue;\r\n        var _serializer;\r\n        var _enableEventTimings;\r\n        var _cookieMgr;\r\n        var _isUnloading;\r\n        var _useHeaders;\r\n        var _xhrTimeout;\r\n        var _zipPayload;\r\n        var _disableXhrSync;\r\n        var _disableFetchKeepAlive;\r\n        var _canHaveReducedPayload;\r\n        var _addNoResponse;\r\n        var _unloadHooks;\r\n        var _sendHook;\r\n        var _sendListener;\r\n        var _responseHandlers;\r\n        var _isInitialized;\r\n        var _timeoutWrapper;\r\n        var _excludeCsMetaData;\r\n        var _sendPostMgr;\r\n        var _fetchCredentials;\r\n        var _maxEvtPerBatch = maxEventsPerBatch; // Sets default value in case the value is null\r\n        dynamicProto(HttpManager, this, function (_self) {\r\n            _initDefaults();\r\n            var _sendCredentials = true;\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, postChannel) {\r\n                if (!_isInitialized) {\r\n                    _core = core;\r\n                    _cookieMgr = core.getCookieMgr();\r\n                    _postManager = postChannel;\r\n                    _logger = _postManager.diagLog();\r\n                    arrAppend(_unloadHooks, onConfigChange(theConfig, function (details) {\r\n                        var _a;\r\n                        var coreConfig = details.cfg;\r\n                        var channelConfig = details.cfg.extensionConfig[postChannel.identifier];\r\n                        _timeoutWrapper = createTimeoutWrapper(channelConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], channelConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                        if (isValueAssigned(coreConfig.anonCookieName)) {\r\n                            _addQueryStringParameter(_queryStringParameters, \"anoncknm\", coreConfig.anonCookieName);\r\n                        }\r\n                        else {\r\n                            _removeQueryStringParameter(_queryStringParameters, \"anoncknm\");\r\n                        }\r\n                        _sendHook = channelConfig[_DYN_PAYLOAD_PREPROCESSOR /* @min:%2epayloadPreprocessor */];\r\n                        _sendListener = channelConfig.payloadListener;\r\n                        var httpInterface = channelConfig.httpXHROverride;\r\n                        // Override endpointUrl if provided in Post config\r\n                        var endpointUrl = channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] ? channelConfig[_DYN_OVERRIDE_ENDPOINT_UR4 /* @min:%2eoverrideEndpointUrl */] : coreConfig.endpointUrl;\r\n                        _urlString = endpointUrl + UrlQueryString;\r\n                        _useHeaders = !isUndefined(channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */]) ? !channelConfig[_DYN_AVOID_OPTIONS /* @min:%2eavoidOptions */] : true;\r\n                        _enableEventTimings = !channelConfig[_DYN_DISABLE_EVENT_TIMING5 /* @min:%2edisableEventTimings */];\r\n                        var maxEvtCfg = channelConfig.maxEvtPerBatch;\r\n                        _maxEvtPerBatch = maxEvtCfg && maxEvtCfg <= maxEventsPerBatch ? maxEvtCfg : maxEventsPerBatch;\r\n                        var valueSanitizer = channelConfig.valueSanitizer;\r\n                        var stringifyObjects = channelConfig.stringifyObjects;\r\n                        var enableCompoundKey = !!coreConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        if (!isUndefined(channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */])) {\r\n                            enableCompoundKey = !!channelConfig[_DYN_ENABLE_COMPOUND_KEY /* @min:%2eenableCompoundKey */];\r\n                        }\r\n                        _xhrTimeout = channelConfig.xhrTimeout;\r\n                        var csStream = getInst(\"CompressionStream\");\r\n                        // Controls whether payload compression (gzip) is enabled.\r\n                        _zipPayload = isFeatureEnabled(\"zipPayload\", coreConfig, false);\r\n                        // if user has payload processor (_sendHook), they may compress the payload themselves\r\n                        // to avoid double compression, we should disable the zipPayload\r\n                        if (!isFunction(csStream) || _sendHook) {\r\n                            _zipPayload = false;\r\n                        }\r\n                        _disableXhrSync = !!channelConfig[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */];\r\n                        _disableFetchKeepAlive = !!channelConfig[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */];\r\n                        _addNoResponse = channelConfig[_DYN_ADD_NO_RESPONSE /* @min:%2eaddNoResponse */] !== false;\r\n                        _excludeCsMetaData = !!channelConfig.excludeCsMetaData;\r\n                        if (!!core.getPlugin(\"LocalStorage\")) {\r\n                            // Always disable fetch keep alive when persisten storage is available\r\n                            _disableFetchKeepAlive = true;\r\n                        }\r\n                        _useBeacons = !isReactNative(); // Only use beacons if not running in React Native\r\n                        _serializer = new Serializer(_core, valueSanitizer, stringifyObjects, enableCompoundKey, getCommonSchemaMetaData, _excludeCsMetaData, channelConfig);\r\n                        if (!isNullOrUndefined(channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */])) {\r\n                            _useBeacons = !!channelConfig[_DYN_USE_SEND_BEACON /* @min:%2euseSendBeacon */];\r\n                        }\r\n                        if (channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */]) {\r\n                            _fetchCredentials = channelConfig[_DYN_FETCH_CREDENTIALS /* @min:%2efetchCredentials */];\r\n                        }\r\n                        var sendPostConfig = _getSendPostMgrConfig();\r\n                        // only init it once\r\n                        if (!_sendPostMgr) {\r\n                            _sendPostMgr = new SenderPostManager();\r\n                            _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, _logger);\r\n                        }\r\n                        else {\r\n                            _sendPostMgr.SetConfig(sendPostConfig);\r\n                        }\r\n                        var syncHttpInterface = httpInterface;\r\n                        var beaconHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var fetchSyncHttpInterface = channelConfig[_DYN_ALWAYS_USE_XHR_OVERR7 /* @min:%2ealwaysUseXhrOverride */] ? httpInterface : null;\r\n                        var beaconUnloadTransports = [3 /* TransportType.Beacon */, 2 /* TransportType.Fetch */];\r\n                        if (!httpInterface) {\r\n                            _customHttpInterface = false;\r\n                            // this is handled in SendPostManager now\r\n                            // let location = getLocation();\r\n                            // if (location && location.protocol && location.protocol.toLowerCase() === \"file:\") {\r\n                            //     // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            //     _sendCredentials = false;\r\n                            // }\r\n                            var theTransports = [];\r\n                            if (isReactNative()) {\r\n                                // Use Fetch or XDR/XHR\r\n                                theTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */];\r\n                                beaconUnloadTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            else {\r\n                                // Use XDR/XHR, Fetch or beacons\r\n                                theTransports = [1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */];\r\n                            }\r\n                            // Prefix any user requested transport(s) values\r\n                            theTransports = prependTransports(theTransports, channelConfig.transports);\r\n                            httpInterface = _getSenderInterface(theTransports, false);\r\n                            if (!httpInterface) {\r\n                                _warnToConsole(_logger, \"No available transport to send events\");\r\n                            }\r\n                            syncHttpInterface = _getSenderInterface(theTransports, true);\r\n                        }\r\n                        if (!beaconHttpInterface) {\r\n                            // Allow overriding the usage of sendBeacon\r\n                            beaconUnloadTransports = prependTransports(beaconUnloadTransports, channelConfig.unloadTransports);\r\n                            beaconHttpInterface = _getSenderInterface(beaconUnloadTransports, true);\r\n                        }\r\n                        _canHaveReducedPayload = !_customHttpInterface && ((_useBeacons && isBeaconsSupported()) || (!_disableFetchKeepAlive && isFetchSupported(true)));\r\n                        _sendInterfaces = (_a = {},\r\n                            _a[0 /* EventSendType.Batched */] = httpInterface,\r\n                            _a[1 /* EventSendType.Synchronous */] = syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true),\r\n                            _a[2 /* EventSendType.SendBeacon */] = beaconHttpInterface || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a[3 /* EventSendType.SyncFetch */] = fetchSyncHttpInterface || _getSenderInterface([2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true) || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                            _a);\r\n                    }));\r\n                    _isInitialized = true;\r\n                }\r\n            };\r\n            _self.addResponseHandler = function (responseHandler) {\r\n                _responseHandlers[_DYN_PUSH /* @min:%2epush */](responseHandler);\r\n                return {\r\n                    rm: function () {\r\n                        var index = _responseHandlers.indexOf(responseHandler);\r\n                        if (index >= 0) {\r\n                            _responseHandlers.splice(index, 1);\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n            _self[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */] = function (evt) {\r\n                try {\r\n                    if (_serializer) {\r\n                        return _serializer.getEventBlob(evt);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return STR_EMPTY;\r\n            };\r\n            _self[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */] = function () {\r\n                try {\r\n                    // get current url without paramter\r\n                    var payload = _serializer && _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                    return _buildRequestDetails(payload, _useHeaders);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */] = function (evts, optimize) {\r\n                try {\r\n                    // TODO: optimize\r\n                    var theBatches_1 = [];\r\n                    // create a eventBatch for each event\r\n                    arrForEach(evts, function (evt) {\r\n                        if (optimize) {\r\n                            evt = optimizeObject(evt);\r\n                        }\r\n                        var batch = EventBatch.create(evt[_DYN_I_KEY /* @min:%2eiKey */], [evt]);\r\n                        theBatches_1[_DYN_PUSH /* @min:%2epush */](batch);\r\n                    });\r\n                    var thePayload = null;\r\n                    while (theBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0 && _serializer) {\r\n                        var theBatch = theBatches_1.shift();\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](0, false, false, false, 1 /* SendRequestReason.NormalSchedule */, 0 /* EventSendType.Batched */);\r\n                            _serializer.appendPayload(thePayload, theBatch, _maxEvtPerBatch);\r\n                        }\r\n                    }\r\n                    var requestDetails = _buildRequestDetails(thePayload, _useHeaders);\r\n                    var payloadData = {\r\n                        data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                        urlString: requestDetails.url,\r\n                        headers: requestDetails[_DYN_HDRS /* @min:%2ehdrs */],\r\n                        timeout: _xhrTimeout,\r\n                        disableXhrSync: _disableXhrSync,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive\r\n                    };\r\n                    // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                    if (_useHeaders) {\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                        }\r\n                        if (!_hasHeader(payloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                            payloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                        }\r\n                    }\r\n                    return payloadData;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                try {\r\n                    return _sendPostMgr && _sendPostMgr.getSenderInst(transports, syncSupport);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_sendInterfaces[0 /* EventSendType.Batched */], _killSwitch, _serializer, _sendInterfaces, _getSendPostMgrConfig(), _urlString, _maxEvtPerBatch];\r\n            };\r\n            function _getSendPostMgrConfig() {\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: _xdrOncomplete,\r\n                        fetchOnComplete: _fetchOnComplete,\r\n                        xhrOnComplete: _xhrOnComplete,\r\n                        beaconOnRetry: _onBeaconRetry\r\n                    };\r\n                    var config = {\r\n                        enableSendPromise: false,\r\n                        isOneDs: true,\r\n                        disableCredentials: !_sendCredentials,\r\n                        fetchCredentials: _fetchCredentials,\r\n                        disableXhr: false,\r\n                        disableBeacon: !_useBeacons,\r\n                        disableBeaconSync: !_useBeacons,\r\n                        disableFetchKeepAlive: _disableFetchKeepAlive,\r\n                        timeWrapper: _timeoutWrapper,\r\n                        addNoResponse: _addNoResponse,\r\n                        senderOnCompleteCallBack: onCompleteFuncs\r\n                    };\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _xdrOncomplete(xdr, oncomplete, payload) {\r\n                var response = getResponseText(xdr);\r\n                _doOnComplete(oncomplete, 200, {}, response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _initDefaults() {\r\n                var undefValue;\r\n                _urlString = null;\r\n                _killSwitch = new KillSwitch();\r\n                _paused = false;\r\n                _clockSkewManager = new ClockSkewManager();\r\n                _useBeacons = false;\r\n                _outstandingRequests = 0; // Holds the number of outstanding async requests that have not returned a response yet\r\n                _postManager = null;\r\n                _logger = null;\r\n                _sendInterfaces = null;\r\n                _core = null;\r\n                _customHttpInterface = true;\r\n                _queryStringParameters = [];\r\n                _headers = {};\r\n                _batchQueue = [];\r\n                _serializer = null;\r\n                _enableEventTimings = false;\r\n                _cookieMgr = null;\r\n                _isUnloading = false;\r\n                _useHeaders = false;\r\n                _xhrTimeout = undefValue;\r\n                _disableXhrSync = undefValue;\r\n                _disableFetchKeepAlive = undefValue;\r\n                _canHaveReducedPayload = undefValue;\r\n                _addNoResponse = undefValue;\r\n                _unloadHooks = [];\r\n                _sendHook = undefValue;\r\n                _sendListener = undefValue;\r\n                _responseHandlers = [];\r\n                _isInitialized = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _excludeCsMetaData = false;\r\n                _sendPostMgr = null;\r\n                _maxEvtPerBatch = null;\r\n            }\r\n            function _fetchOnComplete(response, onComplete, resValue, payload) {\r\n                var handleResponse = function (status, headerMap, responseText) {\r\n                    _doOnComplete(onComplete, status, headerMap, responseText);\r\n                    _handleCollectorResponse(responseText);\r\n                };\r\n                var headerMap = {};\r\n                var headers = response[_DYN_HEADERS /* @min:%2eheaders */];\r\n                if (headers) {\r\n                    headers[\"forEach\"](function (value, name) {\r\n                        headerMap[name] = value;\r\n                    });\r\n                }\r\n                handleResponse(response.status, headerMap, resValue || STR_EMPTY);\r\n            }\r\n            function _xhrOnComplete(request, oncomplete, payload) {\r\n                var response = getResponseText(request);\r\n                _doOnComplete(oncomplete, request.status, _getAllResponseHeaders(request, true), response);\r\n                _handleCollectorResponse(response);\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */, dumpObj(e));\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                // Custom headers not supported in sendBeacon payload.headers would be ignored\r\n                var internalPayloadData = payload;\r\n                var status = 200;\r\n                var thePayload = internalPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                var theUrl = payload.urlString + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                try {\r\n                    var nav_1 = getNavigator();\r\n                    if (thePayload) {\r\n                        var persistStorage = !!_core.getPlugin(\"LocalStorage\");\r\n                        // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                        var droppedBatches_1 = [];\r\n                        var sentBatches_1 = [];\r\n                        arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (droppedBatches_1 && theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                                for (var lp = 0; lp < theEvents[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                                    if (!nav_1.sendBeacon(theUrl, _serializer.getEventBlob(theEvents[lp]))) {\r\n                                        // Can't send anymore, so split the batch and drop the rest\r\n                                        droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](lp));\r\n                                        break;\r\n                                    }\r\n                                    else {\r\n                                        sentBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[lp]);\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Remove all of the events from the existing batch in the payload as the copy includes the original\r\n                                droppedBatches_1[_DYN_PUSH /* @min:%2epush */](theBatch[_DYN_SPLIT /* @min:%2esplit */](0));\r\n                            }\r\n                        });\r\n                        if (sentBatches_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Update the payload with the sent batches\r\n                            thePayload.sentEvts = sentBatches_1;\r\n                        }\r\n                        if (!persistStorage) {\r\n                            // Events passed Serializer size validation, log BeaconSendFailure\r\n                            // because it could still be size related but we did not exceed the\r\n                            // configured limit, and sendBeacon could fail for other reasons\r\n                            _sendBatchesNotification(droppedBatches_1, 8006 /* EventBatchNotificationReason.BeaconSendFailure */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        }\r\n                    }\r\n                    else {\r\n                        status = 0;\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    _warnToConsole(_logger, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(ex));\r\n                    status = 0;\r\n                }\r\n                finally {\r\n                    _doOnComplete(onComplete, status, {}, STR_EMPTY);\r\n                }\r\n            }\r\n            function _isBeaconPayload(sendType) {\r\n                // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit, so treat both as a beacon send\r\n                return sendType === 2 /* EventSendType.SendBeacon */ || sendType === 3 /* EventSendType.SyncFetch */;\r\n            }\r\n            function _adjustSendType(sendType) {\r\n                if (_isUnloading && _isBeaconPayload(sendType)) {\r\n                    sendType = 2 /* EventSendType.SendBeacon */;\r\n                }\r\n                return sendType;\r\n            }\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self.removeHeader = function (name) {\r\n                delete _headers[name];\r\n            };\r\n            _self[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */] = function () {\r\n                return _hasIdleConnection() && _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]();\r\n            };\r\n            _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */] = function (sendType, sendReason) {\r\n                if (isUndefined(sendType)) {\r\n                    sendType = 0 /* EventSendType.Batched */;\r\n                }\r\n                if (_isUnloading) {\r\n                    sendType = _adjustSendType(sendType);\r\n                    sendReason = 2 /* SendRequestReason.Unload */;\r\n                }\r\n                if (_canSendPayload(_batchQueue, sendType, 0)) {\r\n                    _sendBatches(_clearQueue(), 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _outstandingRequests === 0 && _batchQueue[_DYN_LENGTH /* @min:%2elength */] === 0;\r\n            };\r\n            _self[_DYN_SET_UNLOADING /* @min:%2esetUnloading */] = function (value) {\r\n                _isUnloading = value;\r\n            };\r\n            _self.addBatch = function (theBatch) {\r\n                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    // Try and kill the event faster\r\n                    if (_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                        return false;\r\n                    }\r\n                    _batchQueue[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                }\r\n                return true;\r\n            };\r\n            /**\r\n             * Queue all the remaining requests to be sent. The requests will be\r\n             * sent using HTML5 Beacons if they are available.\r\n             */\r\n            _self.teardown = function () {\r\n                if (_batchQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _sendBatches(_clearQueue(), 0, true, 2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n                arrForEach(_unloadHooks, function (hook) {\r\n                    hook && hook.rm && hook.rm();\r\n                });\r\n                _unloadHooks = [];\r\n            };\r\n            /**\r\n             * Pause the sending of requests. No new requests will be sent.\r\n             */\r\n            _self.pause = function () {\r\n                _paused = true;\r\n            };\r\n            /**\r\n             * Resume the sending of requests.\r\n             */\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _self[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, 4 /* SendRequestReason.Resumed */);\r\n            };\r\n            /**\r\n             * Sends a request synchronously to the Aria collector. This api is used to send\r\n             * a request containing a single immediate event.\r\n             *\r\n             * @param batch - The request to be sent.\r\n             * @param sendReason   - The token used to send the request.\r\n             */\r\n            _self[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */] = function (batch, sendType, sendReason) {\r\n                // This will not take into account the max connections restriction. Since this is sync, we can\r\n                // only send one of this request at a time and thus should not worry about multiple connections\r\n                // being used to send synchronous events.\r\n                // Increment active connection since we are still going to use a connection to send the request.\r\n                if (batch && batch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                    if (isNullOrUndefined(sendType)) {\r\n                        sendType = 1 /* EventSendType.Synchronous */;\r\n                    }\r\n                    if (_isUnloading) {\r\n                        sendType = _adjustSendType(sendType);\r\n                        sendReason = 2 /* SendRequestReason.Unload */;\r\n                    }\r\n                    // For sync requests we will not wait for the clock skew.\r\n                    _sendBatches([batch], 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            function _hasIdleConnection() {\r\n                return !_paused && _outstandingRequests < maxConnections;\r\n            }\r\n            function _clearQueue() {\r\n                var theQueue = _batchQueue;\r\n                _batchQueue = [];\r\n                return theQueue;\r\n            }\r\n            function _canSendPayload(theBatches, sendType, retryCnt) {\r\n                var result = false;\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && !_paused && _sendInterfaces[sendType] && _serializer) {\r\n                    // Always attempt to send synchronous events don't wait for idle or clockSkew\r\n                    // and don't block retry requests if clockSkew is not yet set\r\n                    result = (sendType !== 0 /* EventSendType.Batched */) || (_hasIdleConnection() && (retryCnt > 0 || _clockSkewManager[_DYN_ALLOW_REQUEST_SENDIN0 /* @min:%2eallowRequestSending */]()));\r\n                }\r\n                return result;\r\n            }\r\n            function _createDebugBatches(theBatches) {\r\n                var values = {};\r\n                if (theBatches) {\r\n                    arrForEach(theBatches, function (theBatch, idx) {\r\n                        values[idx] = {\r\n                            iKey: theBatch[_DYN_I_KEY /* @min:%2eiKey */](),\r\n                            evts: theBatch[_DYN_EVENTS /* @min:%2eevents */]()\r\n                        };\r\n                    });\r\n                }\r\n                return values;\r\n            }\r\n            function _sendBatches(theBatches, retryCount, isTeardown, sendType, sendReason) {\r\n                if (!theBatches || theBatches[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    // Nothing to do\r\n                    return;\r\n                }\r\n                if (_paused) {\r\n                    _sendBatchesNotification(theBatches, 1 /* EventBatchNotificationReason.Paused */, sendType);\r\n                    return;\r\n                }\r\n                // Make sure that if we are unloading the sendType is a supported version\r\n                sendType = _adjustSendType(sendType);\r\n                try {\r\n                    var orgBatches_1 = theBatches;\r\n                    var isSynchronous_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                    doPerf(_core, function () { return \"HttpManager:_sendBatches\"; }, function (perfEvt) {\r\n                        if (perfEvt) {\r\n                            // Perf Monitoring is enabled, so create a \"Quick\" copy of the original batches so we still report\r\n                            // the original values as part of the perfEvent. This is because theBatches uses .shift() to remove each\r\n                            // batch as they are processed - removing from the original array, so by the time the _createDebugBatches()\r\n                            // function is called the passed in value has changed and therefore the reported value for the perfEvent is incorrect\r\n                            theBatches = theBatches.slice(0);\r\n                        }\r\n                        var droppedBatches = [];\r\n                        var thePayload = null;\r\n                        var serializationStart = getTime();\r\n                        var sendInterface = _sendInterfaces[sendType] || (isSynchronous_1 ? _sendInterfaces[1 /* EventSendType.Synchronous */] : _sendInterfaces[0 /* EventSendType.Batched */]);\r\n                        var sendTransport = sendInterface && sendInterface[_DYN__TRANSPORT /* @min:%2e_transport */];\r\n                        // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit\r\n                        var isReducedPayload = _canHaveReducedPayload && (_isUnloading || _isBeaconPayload(sendType) || (sendTransport === 3 /* TransportType.Beacon */ || (sendInterface._isSync && sendTransport === 2 /* TransportType.Fetch */)));\r\n                        while (_canSendPayload(theBatches, sendType, retryCount)) {\r\n                            var theBatch = theBatches.shift();\r\n                            if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                if (!_killSwitch.isTenantKilled(theBatch[_DYN_I_KEY /* @min:%2eiKey */]())) {\r\n                                    // Make sure we have a payload object\r\n                                    thePayload = thePayload || _serializer[_DYN_CREATE_PAYLOAD /* @min:%2ecreatePayload */](retryCount, isTeardown, isSynchronous_1, isReducedPayload, sendReason, sendType);\r\n                                    // Add the batch to the current payload\r\n                                    if (!_serializer.appendPayload(thePayload, theBatch, _maxEvtPerBatch)) {\r\n                                        // Entire batch was not added so send the payload and retry adding this batch\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        theBatches = [theBatch][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload = null;\r\n                                    }\r\n                                    else if (thePayload.overflow !== null) {\r\n                                        // Total Payload size was exceeded so send the payload and add the unsent as the next batch to send\r\n                                        theBatches = [thePayload.overflow][_DYN_CONCAT /* @min:%2econcat */](theBatches);\r\n                                        thePayload.overflow = null;\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        thePayload = null;\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    droppedBatches[_DYN_PUSH /* @min:%2epush */](theBatch);\r\n                                }\r\n                            }\r\n                        }\r\n                        // Make sure to flush any remaining payload\r\n                        if (thePayload) {\r\n                            _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                        }\r\n                        if (theBatches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            // Add any unsent batches back to the head of the queue\r\n                            _batchQueue = theBatches[_DYN_CONCAT /* @min:%2econcat */](_batchQueue);\r\n                        }\r\n                        // Now send notification about any dropped events\r\n                        _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, sendType);\r\n                    }, function () { return ({ batches: _createDebugBatches(orgBatches_1), retryCount: retryCount, isTeardown: isTeardown, isSynchronous: isSynchronous_1, sendReason: sendReason, useSendBeacon: _isBeaconPayload(sendType), sendType: sendType }); }, !isSynchronous_1);\r\n                }\r\n                catch (ex) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"Unexpected Exception sending batch: \" + dumpObj(ex));\r\n                }\r\n            }\r\n            function _buildRequestDetails(thePayload, useHeaders) {\r\n                var requestDetails = {\r\n                    url: _urlString,\r\n                    hdrs: {},\r\n                    useHdrs: false // Assume no headers\r\n                };\r\n                if (!useHeaders) {\r\n                    // Attempt to map headers to a query string if possible\r\n                    objForEachKey(_headers, function (name, value) {\r\n                        if (_collectorHeaderToQs[name]) {\r\n                            _addRequestDetails(requestDetails, _collectorHeaderToQs[name], value, false);\r\n                        }\r\n                        else {\r\n                            // No mapping, so just include in the headers anyway (may not get sent if using sendBeacon())\r\n                            requestDetails[_DYN_HDRS /* @min:%2ehdrs */][name] = value;\r\n                            requestDetails[_DYN_USE_HDRS /* @min:%2euseHdrs */] = true;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    // Copy the pre-defined headers into the payload headers\r\n                    requestDetails[_DYN_HDRS /* @min:%2ehdrs */] = extend(requestDetails[_DYN_HDRS /* @min:%2ehdrs */], _headers);\r\n                    requestDetails.useHdrs = (objKeys(requestDetails.hdrs)[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                }\r\n                _addRequestDetails(requestDetails, STR_CLIENT_ID, \"NO_AUTH\", useHeaders);\r\n                _addRequestDetails(requestDetails, STR_CLIENT_VERSION, FullVersionString, useHeaders);\r\n                var apiQsKeys = STR_EMPTY;\r\n                arrForEach(thePayload.apiKeys, function (apiKey) {\r\n                    if (apiQsKeys[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        apiQsKeys += \",\";\r\n                    }\r\n                    apiQsKeys += apiKey;\r\n                });\r\n                _addRequestDetails(requestDetails, STR_API_KEY, apiQsKeys, useHeaders);\r\n                _addRequestDetails(requestDetails, STR_UPLOAD_TIME, dateNow().toString(), useHeaders);\r\n                var msfpc = _getMsfpc(thePayload);\r\n                if (isValueAssigned(msfpc)) {\r\n                    requestDetails.url += \"&ext.intweb.msfpc=\" + msfpc;\r\n                }\r\n                if (_clockSkewManager[_DYN_SHOULD_ADD_CLOCK_SKE1 /* @min:%2eshouldAddClockSkewHeaders */]()) {\r\n                    _addRequestDetails(requestDetails, STR_TIME_DELTA_TO_APPLY, _clockSkewManager[_DYN_GET_CLOCK_SKEW_HEADE2 /* @min:%2egetClockSkewHeaderValue */](), useHeaders);\r\n                }\r\n                if (_core[_DYN_GET_WPARAM /* @min:%2egetWParam */]) {\r\n                    var wParam = _core[_DYN_GET_WPARAM /* @min:%2egetWParam */]();\r\n                    if (wParam >= 0) {\r\n                        requestDetails.url += \"&w=\" + wParam;\r\n                    }\r\n                }\r\n                for (var i = 0; i < _queryStringParameters[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                    requestDetails.url += \"&\" + _queryStringParameters[i].name + \"=\" + _queryStringParameters[i].value;\r\n                }\r\n                return requestDetails;\r\n            }\r\n            function _setTimingValue(timings, name, value) {\r\n                timings[name] = timings[name] || {};\r\n                timings[name][_postManager.identifier] = value;\r\n            }\r\n            function _doPayloadSend(thePayload, serializationStart, serializationCompleted, sendReason) {\r\n                if (thePayload && thePayload.payloadBlob && thePayload.payloadBlob[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var useSendHook_1 = !!_sendHook;\r\n                    var sendInterface_1 = _sendInterfaces[thePayload.sendType];\r\n                    // Send all data using a beacon style transport if closing mode is on or channel was teared down\r\n                    if (!_isBeaconPayload(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]) && thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */] && thePayload.sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        sendInterface_1 = _sendInterfaces[2 /* EventSendType.SendBeacon */] || _sendInterfaces[3 /* EventSendType.SyncFetch */] || sendInterface_1;\r\n                    }\r\n                    var useHeaders_1 = _useHeaders;\r\n                    // Disable header usage if we know we are using sendBeacon as additional headers are not supported\r\n                    if (thePayload.isBeacon || sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] === 3 /* TransportType.Beacon */) {\r\n                        useHeaders_1 = false;\r\n                    }\r\n                    var requestDetails_1 = _buildRequestDetails(thePayload, useHeaders_1);\r\n                    useHeaders_1 = useHeaders_1 || requestDetails_1[_DYN_USE_HDRS /* @min:%2euseHdrs */];\r\n                    var sendEventStart_1 = getTime();\r\n                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend\"; }, function () {\r\n                        // Increment the send attempt count and add timings after packaging (So it's not serialized in the 1st attempt)\r\n                        for (var batchLp = 0; batchLp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; batchLp++) {\r\n                            var theBatch = thePayload[_DYN_BATCHES /* @min:%2ebatches */][batchLp];\r\n                            var theEvents = theBatch[_DYN_EVENTS /* @min:%2eevents */]();\r\n                            for (var evtLp = 0; evtLp < theEvents[_DYN_LENGTH /* @min:%2elength */]; evtLp++) {\r\n                                var telemetryItem = theEvents[evtLp];\r\n                                if (_enableEventTimings) {\r\n                                    var timings = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] = telemetryItem[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                                    _setTimingValue(timings, \"sendEventStart\", sendEventStart_1);\r\n                                    _setTimingValue(timings, \"serializationStart\", serializationStart);\r\n                                    _setTimingValue(timings, \"serializationCompleted\", serializationCompleted);\r\n                                }\r\n                                telemetryItem[strSendAttempt] > 0 ? telemetryItem[strSendAttempt]++ : telemetryItem[strSendAttempt] = 1;\r\n                            }\r\n                        }\r\n                        // Note: always sending this notification in a synchronous manner.\r\n                        _sendBatchesNotification(thePayload[_DYN_BATCHES /* @min:%2ebatches */], (1000 /* EventBatchNotificationReason.SendingUndefined */ + (sendReason || 0 /* SendRequestReason.Undefined */)), thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                        // Disabling the use of const because of Issue:\r\n                        // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                        // eslint-disable-next-line prefer-const\r\n                        var orgPayloadData = {\r\n                            data: thePayload[_DYN_PAYLOAD_BLOB /* @min:%2epayloadBlob */],\r\n                            urlString: requestDetails_1.url,\r\n                            headers: requestDetails_1[_DYN_HDRS /* @min:%2ehdrs */],\r\n                            _thePayload: thePayload,\r\n                            _sendReason: sendReason,\r\n                            timeout: _xhrTimeout,\r\n                            disableXhrSync: _disableXhrSync,\r\n                            disableFetchKeepAlive: _disableFetchKeepAlive\r\n                        };\r\n                        // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                        if (useHeaders_1) {\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CACHE_CONTROL)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                            }\r\n                            if (!_hasHeader(orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */], STR_CONTENT_TYPE_HEADER)) {\r\n                                orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */][STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                            }\r\n                        }\r\n                        var sender = null;\r\n                        if (sendInterface_1) {\r\n                            // Send sync requests if the request is immediate or we are tearing down telemetry.\r\n                            sender = function (payload) {\r\n                                // Notify the clock skew manager that we are sending the first request (Potentially blocking all further requests)\r\n                                _clockSkewManager.firstRequestSent();\r\n                                var onComplete = function (status, headers) {\r\n                                    _retryRequestIfNeeded(status, headers, thePayload, sendReason);\r\n                                };\r\n                                var isSync = thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */] || thePayload.isSync;\r\n                                _sendPostMgr.preparePayload(function (processedPayload) {\r\n                                    try {\r\n                                        sendInterface_1.sendPOST(processedPayload, onComplete, isSync);\r\n                                        if (_sendListener) {\r\n                                            // Send the original payload to the listener\r\n                                            _sendListener(orgPayloadData, processedPayload, isSync, thePayload[_DYN_IS_BEACON /* @min:%2eisBeacon */]);\r\n                                        }\r\n                                    }\r\n                                    catch (ex) {\r\n                                        _doOnComplete(onComplete, 0, {});\r\n                                        _warnToConsole(_logger, \"Unexpected exception sending payload. Ex:\" + dumpObj(ex));\r\n                                    }\r\n                                }, _zipPayload, payload, isSync);\r\n                            };\r\n                        }\r\n                        doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sender\"; }, function () {\r\n                            if (sender) {\r\n                                if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                    _outstandingRequests++;\r\n                                }\r\n                                // Only call the hook if it's defined and we are not using sendBeacon as additional headers are not supported\r\n                                if (useSendHook_1 && !thePayload.isBeacon && sendInterface_1[_DYN__TRANSPORT /* @min:%2e_transport */] !== 3 /* TransportType.Beacon */) {\r\n                                    // Create a new IPayloadData that is sent into the hook method, so that the hook method\r\n                                    // can't change the object references to the orgPayloadData (it can still change the content -- mainly the headers)\r\n                                    // Disabling the use of const because of Issue:\r\n                                    // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                                    // eslint-disable-next-line prefer-const\r\n                                    var hookData_1 = {\r\n                                        data: orgPayloadData.data,\r\n                                        urlString: orgPayloadData.urlString,\r\n                                        headers: extend({}, orgPayloadData[_DYN_HEADERS /* @min:%2eheaders */]),\r\n                                        timeout: orgPayloadData.timeout,\r\n                                        disableXhrSync: orgPayloadData[_DYN_DISABLE_XHR_SYNC /* @min:%2edisableXhrSync */],\r\n                                        disableFetchKeepAlive: orgPayloadData[_DYN_DISABLE_FETCH_KEEP_A6 /* @min:%2edisableFetchKeepAlive */]\r\n                                    };\r\n                                    var senderCalled_1 = false;\r\n                                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sendHook\"; }, function () {\r\n                                        try {\r\n                                            _sendHook(hookData_1, function (payload) {\r\n                                                senderCalled_1 = true;\r\n                                                // Add back the internal properties\r\n                                                if (!_customHttpInterface && !payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */]) {\r\n                                                    payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] = payload[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */] || orgPayloadData[_DYN__THE_PAYLOAD /* @min:%2e_thePayload */];\r\n                                                    payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] = payload[_DYN__SEND_REASON /* @min:%2e_sendReason */] || orgPayloadData[_DYN__SEND_REASON /* @min:%2e_sendReason */];\r\n                                                }\r\n                                                sender(payload);\r\n                                            }, thePayload.isSync || thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */]);\r\n                                        }\r\n                                        catch (ex) {\r\n                                            if (!senderCalled_1) {\r\n                                                // The hook never called the sender -- assume that it never will\r\n                                                sender(orgPayloadData);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    sender(orgPayloadData);\r\n                                }\r\n                            }\r\n                        });\r\n                    }, function () { return ({ thePayload: thePayload, serializationStart: serializationStart, serializationCompleted: serializationCompleted, sendReason: sendReason }); }, thePayload.isSync);\r\n                }\r\n                if (thePayload.sizeExceed && thePayload.sizeExceed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for oversize events even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.sizeExceed, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n                if (thePayload.failedEvts && thePayload.failedEvts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    // Ensure that we send any discard events for events that could not be serialized even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.failedEvts, 8002 /* EventBatchNotificationReason.InvalidEvent */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _addEventCompletedTimings(theEvents, sendEventCompleted) {\r\n                if (_enableEventTimings) {\r\n                    arrForEach(theEvents, function (theEvent) {\r\n                        var timings = theEvent[_DYN_TIMINGS /* @min:%2etimings */] = theEvent[_DYN_TIMINGS /* @min:%2etimings */] || {};\r\n                        _setTimingValue(timings, \"sendEventCompleted\", sendEventCompleted);\r\n                    });\r\n                }\r\n            }\r\n            function _retryRequestIfNeeded(status, headers, thePayload, sendReason) {\r\n                var reason = 9000 /* EventBatchNotificationReason.ResponseFailure */;\r\n                var droppedBatches = null;\r\n                var isRetrying = false;\r\n                var backOffTrans = false;\r\n                try {\r\n                    var shouldRetry = true;\r\n                    if (typeof status !== strUndefined) {\r\n                        if (headers) {\r\n                            _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */](headers[STR_TIME_DELTA_HEADER]);\r\n                            var killDuration = headers[STR_KILL_DURATION_HEADER] || headers[\"kill-duration-seconds\"];\r\n                            arrForEach(_killSwitch[_DYN_SET_KILL_SWITCH_TENA11 /* @min:%2esetKillSwitchTenants */](headers[STR_KILL_TOKENS_HEADER], killDuration), function (killToken) {\r\n                                arrForEach(thePayload[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    if (theBatch[_DYN_I_KEY /* @min:%2eiKey */]() === killToken) {\r\n                                        // Make sure we have initialized the array\r\n                                        droppedBatches = droppedBatches || [];\r\n                                        // Create a copy of the batch with all of the events (and more importantly the action functions)\r\n                                        var removedEvents = theBatch[_DYN_SPLIT /* @min:%2esplit */](0);\r\n                                        // And then remove the events for the payload batch and reduce the actual number of processed\r\n                                        thePayload.numEvents -= removedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                                        droppedBatches[_DYN_PUSH /* @min:%2epush */](removedEvents);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n                        // tslint:disable-next-line:triple-equals\r\n                        if (status == 200 || status == 204) {\r\n                            // Response was successfully sent\r\n                            reason = 200 /* EventBatchNotificationReason.Complete */;\r\n                            return;\r\n                        }\r\n                        if (!retryPolicyShouldRetryForStatus(status) || thePayload.numEvents <= 0) {\r\n                            // Only retry for specific response codes and if there is still events after kill switch processing\r\n                            shouldRetry = false;\r\n                        }\r\n                        // Derive the notification response from the HttpStatus Code\r\n                        reason = 9000 /* EventBatchNotificationReason.ResponseFailure */ + (status % 1000);\r\n                    }\r\n                    if (shouldRetry) {\r\n                        // The events should be retried -- so change notification to requeue them\r\n                        reason = 100 /* EventBatchNotificationReason.RequeueEvents */;\r\n                        var retryCount_1 = thePayload.retryCnt;\r\n                        if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                            // attempt to resend the entire batch\r\n                            if (retryCount_1 < maxRequestRetriesBeforeBackoff) {\r\n                                isRetrying = true;\r\n                                _doAction(function () {\r\n                                    // try to resend the same batches\r\n                                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                                        // Reduce the outstanding request count (if this was an async request) as we didn't reduce the count\r\n                                        // previously and we are about to reschedule our retry attempt and we want an attempt to send\r\n                                        // to occur, it's also required to ensure that a follow up handleRequestFinished() call occurs\r\n                                        _outstandingRequests--;\r\n                                    }\r\n                                    _sendBatches(thePayload[_DYN_BATCHES /* @min:%2ebatches */], retryCount_1 + 1, thePayload[_DYN_IS_TEARDOWN /* @min:%2eisTeardown */], _isUnloading ? 2 /* EventSendType.SendBeacon */ : thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], 5 /* SendRequestReason.Retry */);\r\n                                }, _isUnloading, retryPolicyGetMillisToBackoffForRetry(retryCount_1));\r\n                            }\r\n                            else {\r\n                                backOffTrans = true;\r\n                                if (_isUnloading) {\r\n                                    // we are unloading so don't try and requeue the events otherwise let the events get requeued and resent during the backoff sending\r\n                                    // This will also cause the events to be purged based on the priority (if necessary)\r\n                                    reason = 8001 /* EventBatchNotificationReason.NonRetryableStatus */;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!isRetrying) {\r\n                        // Make sure the clockSkewManager doesn't blocking further sending of requests once we have a proper response\r\n                        // This won't override any previously sent clock Skew value\r\n                        _clockSkewManager[_DYN_SET_CLOCK_SKEW /* @min:%2esetClockSkew */]();\r\n                        _handleRequestFinished(thePayload, reason, sendReason, backOffTrans);\r\n                    }\r\n                    _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */]);\r\n                }\r\n            }\r\n            function _handleRequestFinished(thePayload, batchReason, sendReason, backOffTrans) {\r\n                try {\r\n                    if (backOffTrans) {\r\n                        // Slow down the transmission requests\r\n                        _postManager[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */]();\r\n                    }\r\n                    var theBatches = thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                    if (batchReason === 200 /* EventBatchNotificationReason.Complete */) {\r\n                        theBatches = thePayload.sentEvts || thePayload[_DYN_BATCHES /* @min:%2ebatches */];\r\n                        if (!backOffTrans && !thePayload.isSync) {\r\n                            // We have a successful async response, so the lets open the floodgates\r\n                            // The reason for checking isSync is to avoid unblocking if beacon send occurred as it\r\n                            // doesn't wait for a response.\r\n                            _postManager._clearBackOff();\r\n                        }\r\n                        _addCompleteTimings(theBatches);\r\n                    }\r\n                    // Send the notifications synchronously\r\n                    _sendBatchesNotification(theBatches, batchReason, thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], true);\r\n                }\r\n                finally {\r\n                    if (thePayload[_DYN_SEND_TYPE /* @min:%2esendType */] === 0 /* EventSendType.Batched */) {\r\n                        // we always need to decrement this value otherwise the httpmanager locks up and won't send any more events\r\n                        _outstandingRequests--;\r\n                        // Don't try to send additional queued events if this is a retry operation as the retried\r\n                        // response will eventually call _handleRequestFinished for the retried event\r\n                        if (sendReason !== 5 /* SendRequestReason.Retry */) {\r\n                            // Try and send any other queued batched events\r\n                            _self.sendQueuedRequests(thePayload[_DYN_SEND_TYPE /* @min:%2esendType */], sendReason);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _addCompleteTimings(theBatches) {\r\n                if (_enableEventTimings) {\r\n                    var sendEventCompleted_1 = getTime();\r\n                    arrForEach(theBatches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _addEventCompletedTimings(theBatch[_DYN_EVENTS /* @min:%2eevents */](), sendEventCompleted_1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function _doAction(cb, isSync, interval) {\r\n                if (isSync) {\r\n                    cb();\r\n                }\r\n                else {\r\n                    _timeoutWrapper.set(cb, interval);\r\n                }\r\n            }\r\n            function _getMsfpc(thePayload) {\r\n                for (var lp = 0; lp < thePayload.batches[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var msfpc = thePayload[_DYN_BATCHES /* @min:%2ebatches */][lp].Msfpc();\r\n                    if (msfpc) {\r\n                        return encodeURIComponent(msfpc);\r\n                    }\r\n                }\r\n                return STR_EMPTY;\r\n            }\r\n            function _handleCollectorResponse(responseText) {\r\n                var responseHandlers = _responseHandlers;\r\n                try {\r\n                    for (var i = 0; i < responseHandlers[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                        try {\r\n                            responseHandlers[i](responseText);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 519 /* _eExtendedInternalMessageId.PostResponseHandler */, \"Response handler failed: \" + e);\r\n                        }\r\n                    }\r\n                    if (responseText) {\r\n                        var response = JSON.parse(responseText);\r\n                        if (isValueAssigned(response.webResult) && isValueAssigned(response.webResult[STR_MSFPC])) {\r\n                            // Set cookie\r\n                            _cookieMgr.set(\"MSFPC\", response.webResult[STR_MSFPC], 365 * 86400);\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Doing nothing\r\n                }\r\n            }\r\n            function _sendBatchesNotification(theBatches, batchReason, sendType, sendSync) {\r\n                if (theBatches && theBatches[_DYN_LENGTH /* @min:%2elength */] > 0 && actions) {\r\n                    var theAction_1 = actions[_getNotificationAction(batchReason)];\r\n                    if (theAction_1) {\r\n                        var isSyncRequest_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                        doPerf(_core, function () { return \"HttpManager:_sendBatchesNotification\"; }, function () {\r\n                            _doAction(function () {\r\n                                try {\r\n                                    theAction_1.call(actions, theBatches, batchReason, isSyncRequest_1, sendType);\r\n                                }\r\n                                catch (e) {\r\n                                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + e);\r\n                                }\r\n                            }, sendSync || isSyncRequest_1, 0);\r\n                        }, function () { return ({ batches: _createDebugBatches(theBatches), reason: batchReason, isSync: isSyncRequest_1, sendSync: sendSync, sendType: sendType }); }, !isSyncRequest_1);\r\n                    }\r\n                }\r\n            }\r\n            function _getNotificationAction(reason) {\r\n                var action = _eventActionMap[reason];\r\n                if (!isValueAssigned(action)) {\r\n                    action = STR_OTHER;\r\n                    if (reason >= 9000 /* EventBatchNotificationReason.ResponseFailure */ && reason <= 9999 /* EventBatchNotificationReason.ResponseFailureMax */) {\r\n                        action = STR_RESPONSE_FAIL;\r\n                    }\r\n                    else if (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */) {\r\n                        action = STR_DROPPED;\r\n                    }\r\n                    else if (reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */) {\r\n                        action = STR_SENDING;\r\n                    }\r\n                }\r\n                return action;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for HttpManager.prototype.initialize.\r\n// Removed Stub for HttpManager.prototype.addHeader.\r\n// Removed Stub for HttpManager.prototype.removeHeader.\r\n// Removed Stub for HttpManager.prototype.addResponseHandler.\r\n// Removed Stub for HttpManager.prototype.addBatch.\r\n// Removed Stub for HttpManager.prototype.canSendRequest.\r\n// Removed Stub for HttpManager.prototype.sendQueuedRequests.\r\n// Removed Stub for HttpManager.prototype.isCompletelyIdle.\r\n// Removed Stub for HttpManager.prototype.setUnloading.\r\n// Removed Stub for HttpManager.prototype.teardown.\r\n// Removed Stub for HttpManager.prototype.pause.\r\n// Removed Stub for HttpManager.prototype.resume.\r\n// Removed Stub for HttpManager.prototype.sendSynchronousBatch.\r\n// Removed Stub for HttpManager.prototype.serializeOfflineEvt.\r\n// Removed Stub for HttpManager.prototype.getOfflineRequestDetails.\r\n// Removed Stub for HttpManager.prototype.createOneDSPayload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    HttpManager.__ieDyn=1;\n\n    return HttpManager;\r\n}());\r\nexport { HttpManager };\r\n//# sourceMappingURL=HttpManager.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* TimeoutOverrideWrapper.ts\r\n* @author  Nev Wylie (newylie)\r\n* @copyright Microsoft 2022\r\n* Simple internal timeout wrapper\r\n*/\r\nimport { scheduleTimeoutWith } from \"@nevware21/ts-utils\";\r\nexport function createTimeoutWrapper(argSetTimeout, argClearTimeout) {\r\n    return {\r\n        set: function (callback, ms) {\r\n            var args = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                args[_i - 2] = arguments[_i];\r\n            }\r\n            return scheduleTimeoutWith([argSetTimeout, argClearTimeout], callback, ms, args);\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TimeoutOverrideWrapper.js.map","/*\n * 1DS JS SDK POST plugin, 4.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* PostManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseTelemetryPlugin, EventsDiscardedReason, _throwInternal, addPageHideEventListener, addPageShowEventListener, addPageUnloadEventListener, arrForEach, createProcessTelemetryContext, createUniqueNamespace, doPerf, getWindow, isChromium, isGreaterThanZero, isNumber, mergeEvtNamespace, objForEachKey, onConfigChange, optimizeObject, proxyFunctions, removePageHideEventListener, removePageShowEventListener, removePageUnloadEventListener, setProcessTelemetryTimings } from \"@microsoft/1ds-core-js\";\r\nimport { createPromise } from \"@nevware21/ts-async\";\r\nimport { isPromiseLike, mathCeil, mathMax, mathMin, objDeepFreeze } from \"@nevware21/ts-utils\";\r\nimport { BE_PROFILE, NRT_PROFILE, RT_PROFILE } from \"./DataModels\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { HttpManager } from \"./HttpManager\";\r\nimport { STR_AUTH_WEB_TOKEN, STR_MSA_DEVICE_TICKET, STR_TRACE, STR_USER } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry } from \"./RetryPolicy\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nimport { _DYN_AUTO_FLUSH_EVENTS_LI14, _DYN_BATCHES, _DYN_CAN_SEND_REQUEST, _DYN_CLEAR_TIMEOUT_OVERRI3, _DYN_CONCAT, _DYN_COUNT, _DYN_CREATE_ONE_DSPAYLOAD, _DYN_DISABLE_AUTO_BATCH_F15, _DYN_EVENTS, _DYN_GET_OFFLINE_REQUEST_9, _DYN_GET_WPARAM, _DYN_IDENTIFIER, _DYN_IGNORE_MC1_MS0_COOKI13, _DYN_INITIALIZE, _DYN_I_KEY, _DYN_LATENCY, _DYN_LENGTH, _DYN_OVERRIDE_INSTRUMENTA16, _DYN_PUSH, _DYN_SEND_ATTEMPT, _DYN_SEND_QUEUED_REQUESTS, _DYN_SEND_SYNCHRONOUS_BAT10, _DYN_SERIALIZE_OFFLINE_EV8, _DYN_SET_TIMEOUT_OVERRIDE, _DYN_SET_UNLOADING, _DYN_SPLIT, _DYN_SYNC, _DYN__BACK_OFF_TRANSMISSI12 } from \"./__DynamicConstants\";\r\nvar FlushCheckTimer = 0.250; // This needs to be in seconds, so this is 250ms\r\nvar MaxNumberEventPerBatch = 500;\r\nvar EventsDroppedAtOneTime = 20;\r\nvar MaxSendAttempts = 6;\r\nvar MaxSyncUnloadSendAttempts = 2; // Assuming 2 based on beforeunload and unload\r\nvar MaxBackoffCount = 4;\r\nvar MaxConnections = 2;\r\nvar MaxRequestRetriesBeforeBackoff = 1;\r\nvar MaxEventsLimitInMem = 10000;\r\nvar strEventsDiscarded = \"eventsDiscarded\";\r\nvar EMPTY_STR = \"\";\r\nvar undefValue = undefined;\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultPostChannelConfig = objDeepFreeze({\r\n    eventsLimitInMem: { isVal: isGreaterThanZero, v: MaxEventsLimitInMem },\r\n    immediateEventLimit: { isVal: isGreaterThanZero, v: 500 },\r\n    autoFlushEventsLimit: { isVal: isGreaterThanZero, v: 0 },\r\n    disableAutoBatchFlushLimit: false,\r\n    httpXHROverride: { isVal: isOverrideFn, v: undefValue },\r\n    overrideInstrumentationKey: undefValue,\r\n    overrideEndpointUrl: undefValue,\r\n    disableTelemetry: false,\r\n    ignoreMc1Ms0CookieProcessing: false,\r\n    setTimeoutOverride: undefValue,\r\n    clearTimeoutOverride: undefValue,\r\n    payloadPreprocessor: undefValue,\r\n    payloadListener: undefValue,\r\n    disableEventTimings: undefValue,\r\n    valueSanitizer: undefValue,\r\n    stringifyObjects: undefValue,\r\n    enableCompoundKey: undefValue,\r\n    disableOptimizeObj: false,\r\n    fetchCredentials: undefValue,\r\n    // disableCacheHeader: undefValue, // See Task #7178858 - Collector requires a change to support this\r\n    transports: undefValue,\r\n    unloadTransports: undefValue,\r\n    useSendBeacon: undefValue,\r\n    disableFetchKeepAlive: undefValue,\r\n    avoidOptions: false,\r\n    xhrTimeout: undefValue,\r\n    disableXhrSync: undefValue,\r\n    alwaysUseXhrOverride: false,\r\n    maxEventRetryAttempts: { isVal: isNumber, v: MaxSendAttempts },\r\n    maxUnloadEventRetryAttempts: { isVal: isNumber, v: MaxSyncUnloadSendAttempts },\r\n    addNoResponse: undefValue,\r\n    maxEvtPerBatch: { isVal: isNumber, v: MaxNumberEventPerBatch },\r\n    excludeCsMetaData: undefValue,\r\n    requestLimit: {}\r\n});\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\n/**\r\n * Class that manages adding events to inbound queues and batching of events\r\n * into requests.\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar PostChannel = /** @class */ (function (_super) {\r\n    __extends(PostChannel, _super);\r\n    function PostChannel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"PostChannel\";\r\n        _this.priority = 1011;\r\n        _this.version = '4.3.11';\r\n        var _postConfig;\r\n        var _isTeardownCalled = false;\r\n        var _flushCallbackQueue = [];\r\n        var _flushCallbackTimer;\r\n        var _paused = false;\r\n        var _immediateQueueSize = 0;\r\n        var _immediateQueueSizeLimit;\r\n        var _queueSize = 0;\r\n        var _queueSizeLimit;\r\n        var _profiles = {};\r\n        var _currentProfile = RT_PROFILE;\r\n        var _scheduledTimer;\r\n        var _immediateTimer;\r\n        var _currentBackoffCount;\r\n        var _timerCount;\r\n        var _httpManager;\r\n        var _batchQueues;\r\n        var _autoFlushEventsLimit;\r\n        // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n        var _autoFlushBatchLimit;\r\n        var _delayedBatchSendLatency;\r\n        var _delayedBatchReason;\r\n        var _optimizeObject;\r\n        var _isPageUnloadTriggered;\r\n        var _maxEventSendAttempts;\r\n        var _maxUnloadEventSendAttempts;\r\n        var _evtNamespace;\r\n        var _timeoutWrapper;\r\n        var _ignoreMc1Ms0CookieProcessing;\r\n        var _disableAutoBatchFlushLimit;\r\n        var _notificationManager;\r\n        var _unloadHandlersAdded;\r\n        var _overrideInstrumentationKey;\r\n        var _disableTelemetry;\r\n        var _maxEvtPerBatch;\r\n        dynamicProto(PostChannel, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_httpManager, _postConfig];\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (theConfig, core, extensions) {\r\n                doPerf(core, function () { return \"PostChannel:initialize\"; }, function () {\r\n                    _base[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, core, extensions);\r\n                    _notificationManager = core.getNotifyMgr();\r\n                    try {\r\n                        _evtNamespace = mergeEvtNamespace(createUniqueNamespace(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */]), core.evtNamespace && core.evtNamespace());\r\n                        _self._addHook(onConfigChange(theConfig, function (details) {\r\n                            var coreConfig = details.cfg;\r\n                            var ctx = createProcessTelemetryContext(null, coreConfig, core);\r\n                            _postConfig = ctx.getExtCfg(_self[_DYN_IDENTIFIER /* @min:%2eidentifier */], defaultPostChannelConfig);\r\n                            _timeoutWrapper = createTimeoutWrapper(_postConfig[_DYN_SET_TIMEOUT_OVERRIDE /* @min:%2esetTimeoutOverride */], _postConfig[_DYN_CLEAR_TIMEOUT_OVERRI3 /* @min:%2eclearTimeoutOverride */]);\r\n                            // Only try and use the optimizeObject() if this appears to be a chromium based browser and it has not been explicitly disabled\r\n                            _optimizeObject = !_postConfig.disableOptimizeObj && isChromium();\r\n                            _ignoreMc1Ms0CookieProcessing = _postConfig[_DYN_IGNORE_MC1_MS0_COOKI13 /* @min:%2eignoreMc1Ms0CookieProcessing */];\r\n                            _hookWParam(core); // _hookWParam uses _ignoreMc1Ms0CookieProcessing\r\n                            _queueSizeLimit = _postConfig.eventsLimitInMem;\r\n                            _immediateQueueSizeLimit = _postConfig.immediateEventLimit;\r\n                            _autoFlushEventsLimit = _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */];\r\n                            _maxEventSendAttempts = _postConfig.maxEventRetryAttempts;\r\n                            _maxUnloadEventSendAttempts = _postConfig.maxUnloadEventRetryAttempts;\r\n                            _disableAutoBatchFlushLimit = _postConfig[_DYN_DISABLE_AUTO_BATCH_F15 /* @min:%2edisableAutoBatchFlushLimit */];\r\n                            _maxEvtPerBatch = _postConfig.maxEvtPerBatch;\r\n                            if (isPromiseLike(coreConfig.endpointUrl)) {\r\n                                _self.pause();\r\n                            }\r\n                            else if (!!_paused) {\r\n                                // if previous url is promise, resume\r\n                                _self.resume();\r\n                            }\r\n                            _setAutoLimits();\r\n                            // Override iKey if provided in Post config if provided for during initialization\r\n                            _overrideInstrumentationKey = _postConfig[_DYN_OVERRIDE_INSTRUMENTA16 /* @min:%2eoverrideInstrumentationKey */];\r\n                            // DisableTelemetry was defined in the config provided during initialization\r\n                            _disableTelemetry = !!_postConfig.disableTelemetry;\r\n                            if (_unloadHandlersAdded) {\r\n                                _removeUnloadHandlers();\r\n                            }\r\n                            var excludePageUnloadEvents = coreConfig.disablePageUnloadEvents || [];\r\n                            // When running in Web browsers try to send all telemetry if page is unloaded\r\n                            _unloadHandlersAdded = addPageUnloadEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                            _unloadHandlersAdded = addPageHideEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                            _unloadHandlersAdded = addPageShowEventListener(_handleShowEvents, coreConfig.disablePageShowEvents, _evtNamespace) || _unloadHandlersAdded;\r\n                        }));\r\n                        // only initialize the manager once\r\n                        _httpManager[_DYN_INITIALIZE /* @min:%2einitialize */](theConfig, _self.core, _self);\r\n                    }\r\n                    catch (e) {\r\n                        // resetting the initialized state because of failure\r\n                        _self.setInitialized(false);\r\n                        throw e;\r\n                    }\r\n                }, function () { return ({ theConfig: theConfig, core: core, extensions: extensions }); });\r\n            };\r\n            _self.processTelemetry = function (ev, itemCtx) {\r\n                setProcessTelemetryTimings(ev, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                itemCtx = itemCtx || _self._getTelCtx(itemCtx);\r\n                var event = ev;\r\n                if (!_disableTelemetry && !_isTeardownCalled) {\r\n                    // Override iKey if provided in Post config if provided for during initialization\r\n                    if (_overrideInstrumentationKey) {\r\n                        event[_DYN_I_KEY /* @min:%2eiKey */] = _overrideInstrumentationKey;\r\n                    }\r\n                    _addEventToQueues(event, true);\r\n                    if (_isPageUnloadTriggered) {\r\n                        // Unload event has been received so we need to try and flush new events\r\n                        _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                    }\r\n                    else {\r\n                        _scheduleTimer();\r\n                    }\r\n                }\r\n                _self.processNext(event, itemCtx);\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                try {\r\n                    var details_1 = _httpManager && _httpManager[_DYN_GET_OFFLINE_REQUEST_9 /* @min:%2egetOfflineRequestDetails */]();\r\n                    if (_httpManager) {\r\n                        return {\r\n                            getUrl: function () {\r\n                                if (details_1) {\r\n                                    return details_1.url;\r\n                                }\r\n                                return null;\r\n                            },\r\n                            serialize: _serialize,\r\n                            batch: _batch,\r\n                            shouldProcess: function (evt) {\r\n                                return !_disableTelemetry;\r\n                            },\r\n                            createPayload: function (evt) {\r\n                                return null;\r\n                            },\r\n                            createOneDSPayload: function (evts) {\r\n                                if (_httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */]) {\r\n                                    return _httpManager[_DYN_CREATE_ONE_DSPAYLOAD /* @min:%2ecreateOneDSPayload */](evts, _optimizeObject);\r\n                                }\r\n                            }\r\n                        };\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                _isTeardownCalled = true;\r\n                _httpManager.teardown();\r\n                _removeUnloadHandlers();\r\n                // Just register to remove all events associated with this namespace\r\n                _initDefaults();\r\n            };\r\n            function _removeUnloadHandlers() {\r\n                removePageUnloadEventListener(null, _evtNamespace);\r\n                removePageHideEventListener(null, _evtNamespace);\r\n                removePageShowEventListener(null, _evtNamespace);\r\n            }\r\n            function _hookWParam(core) {\r\n                var existingGetWParamMethod = core[_DYN_GET_WPARAM /* @min:%2egetWParam */];\r\n                core[_DYN_GET_WPARAM /* @min:%2egetWParam */] = function () {\r\n                    var wparam = 0;\r\n                    if (_ignoreMc1Ms0CookieProcessing) {\r\n                        wparam = wparam | 2;\r\n                    }\r\n                    return wparam | existingGetWParamMethod.call(core);\r\n                };\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    arrForEach(arr, function (item) {\r\n                        if (rlt) {\r\n                            rlt += \"\\n\";\r\n                        }\r\n                        rlt += item;\r\n                    });\r\n                }\r\n                return rlt;\r\n            }\r\n            function _serialize(event) {\r\n                var rlt = EMPTY_STR;\r\n                try {\r\n                    _cleanEvent(event);\r\n                    rlt = _httpManager[_DYN_SERIALIZE_OFFLINE_EV8 /* @min:%2eserializeOfflineEvt */](event);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            // Moving event handlers out from the initialize closure so that any local variables can be garbage collected\r\n            function _handleUnloadEvents(evt) {\r\n                var theEvt = evt || getWindow().event; // IE 8 does not pass the event\r\n                if (theEvt.type !== \"beforeunload\") {\r\n                    // Only set the unload trigger if not beforeunload event as beforeunload can be cancelled while the other events can't\r\n                    _isPageUnloadTriggered = true;\r\n                    _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n                }\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n            }\r\n            function _handleShowEvents(evt) {\r\n                // Handle the page becoming visible again\r\n                _isPageUnloadTriggered = false;\r\n                _httpManager[_DYN_SET_UNLOADING /* @min:%2esetUnloading */](_isPageUnloadTriggered);\r\n            }\r\n            function _cleanEvent(event) {\r\n                if (event.ext && event.ext[STR_TRACE]) {\r\n                    delete (event.ext[STR_TRACE]);\r\n                }\r\n                if (event.ext && event.ext[STR_USER] && event.ext[STR_USER][\"id\"]) {\r\n                    delete (event.ext[STR_USER][\"id\"]);\r\n                }\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event.ext = optimizeObject(event.ext);\r\n                    if (event.baseData) {\r\n                        event.baseData = optimizeObject(event.baseData);\r\n                    }\r\n                    if (event.data) {\r\n                        event.data = optimizeObject(event.data);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToQueues(event, append) {\r\n                // If send attempt field is undefined we should set it to 0.\r\n                if (!event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */]) {\r\n                    event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] = 0;\r\n                }\r\n                // Add default latency\r\n                if (!event[_DYN_LATENCY /* @min:%2elatency */]) {\r\n                    event[_DYN_LATENCY /* @min:%2elatency */] = 1 /* EventLatencyValue.Normal */;\r\n                }\r\n                _cleanEvent(event);\r\n                if (event[_DYN_SYNC /* @min:%2esync */]) {\r\n                    // If the transmission is backed off then do not send synchronous events.\r\n                    // We will convert these events to Real time latency instead.\r\n                    if (_currentBackoffCount || _paused) {\r\n                        event[_DYN_LATENCY /* @min:%2elatency */] = 3 /* EventLatencyValue.RealTime */;\r\n                        event[_DYN_SYNC /* @min:%2esync */] = false;\r\n                    }\r\n                    else {\r\n                        // Log the event synchronously\r\n                        if (_httpManager) {\r\n                            // v8 performance optimization for iterating over the keys\r\n                            if (_optimizeObject) {\r\n                                event = optimizeObject(event);\r\n                            }\r\n                            _httpManager[_DYN_SEND_SYNCHRONOUS_BAT10 /* @min:%2esendSynchronousBatch */](EventBatch.create(event[_DYN_I_KEY /* @min:%2eiKey */], [event]), event[_DYN_SYNC /* @min:%2esync */] === true ? 1 /* EventSendType.Synchronous */ : event[_DYN_SYNC /* @min:%2esync */], 3 /* SendRequestReason.SyncEvent */);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var evtLatency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var queueSize = _queueSize;\r\n                var queueLimit = _queueSizeLimit;\r\n                if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                    queueSize = _immediateQueueSize;\r\n                    queueLimit = _immediateQueueSizeLimit;\r\n                }\r\n                var eventDropped = false;\r\n                // Only add the event if the queue isn't full or it's a direct event (which don't add to the queue sizes)\r\n                if (queueSize < queueLimit) {\r\n                    eventDropped = !_addEventToProperQueue(event, append);\r\n                }\r\n                else {\r\n                    var dropLatency = 1 /* EventLatencyValue.Normal */;\r\n                    var dropNumber = EventsDroppedAtOneTime;\r\n                    if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                        // Only drop other immediate events as they are not technically sharing the general queue\r\n                        dropLatency = 4 /* EventLatencyValue.Immediate */;\r\n                        dropNumber = 1;\r\n                    }\r\n                    // Drop old event from lower or equal latency\r\n                    eventDropped = true;\r\n                    if (_dropEventWithLatencyOrLess(event[_DYN_I_KEY /* @min:%2eiKey */], event[_DYN_LATENCY /* @min:%2elatency */], dropLatency, dropNumber)) {\r\n                        eventDropped = !_addEventToProperQueue(event, append);\r\n                    }\r\n                }\r\n                if (eventDropped) {\r\n                    // Can't drop events from current queues because the all the slots are taken by queues that are being flushed.\r\n                    _notifyEvents(strEventsDiscarded, [event], EventsDiscardedReason.QueueFull);\r\n                }\r\n            }\r\n            _self.setEventQueueLimits = function (eventLimit, autoFlushLimit) {\r\n                _postConfig.eventsLimitInMem = _queueSizeLimit = isGreaterThanZero(eventLimit) ? eventLimit : MaxEventsLimitInMem;\r\n                _postConfig[_DYN_AUTO_FLUSH_EVENTS_LI14 /* @min:%2eautoFlushEventsLimit */] = _autoFlushEventsLimit = isGreaterThanZero(autoFlushLimit) ? autoFlushLimit : 0;\r\n                _setAutoLimits();\r\n                // We only do this check here as during normal event addition if the queue is > then events start getting dropped\r\n                var doFlush = _queueSize > eventLimit;\r\n                if (!doFlush && _autoFlushBatchLimit > 0) {\r\n                    // Check the auto flush max batch size\r\n                    for (var latency = 1 /* EventLatencyValue.Normal */; !doFlush && latency <= 3 /* EventLatencyValue.RealTime */; latency++) {\r\n                        var batchQueue = _batchQueues[latency];\r\n                        if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                            arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit) {\r\n                                    // If any 1 batch is > than the limit then trigger an auto flush\r\n                                    doFlush = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                _performAutoFlush(true, doFlush);\r\n            };\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n                _httpManager && _httpManager.pause();\r\n            };\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _httpManager && _httpManager.resume();\r\n                _scheduleTimer();\r\n            };\r\n            _self._loadTransmitProfiles = function (profiles) {\r\n                _resetTransmitProfiles();\r\n                objForEachKey(profiles, function (profileName, profileValue) {\r\n                    var profLen = profileValue[_DYN_LENGTH /* @min:%2elength */];\r\n                    if (profLen >= 2) {\r\n                        var directValue = (profLen > 2 ? profileValue[2] : 0);\r\n                        profileValue.splice(0, profLen - 2);\r\n                        // Make sure if a higher latency is set to not send then don't send lower latency\r\n                        if (profileValue[1] < 0) {\r\n                            profileValue[0] = -1;\r\n                        }\r\n                        // Make sure each latency is multiple of the latency higher then it. If not a multiple\r\n                        // we round up so that it becomes a multiple.\r\n                        if (profileValue[1] > 0 && profileValue[0] > 0) {\r\n                            var timerMultiplier = profileValue[0] / profileValue[1];\r\n                            profileValue[0] = mathCeil(timerMultiplier) * profileValue[1];\r\n                        }\r\n                        // Add back the direct profile timeout\r\n                        if (directValue >= 0 && profileValue[1] >= 0 && directValue > profileValue[1]) {\r\n                            // Make sure if it's not disabled (< 0) then make sure it's not larger than RealTime\r\n                            directValue = profileValue[1];\r\n                        }\r\n                        profileValue[_DYN_PUSH /* @min:%2epush */](directValue);\r\n                        _profiles[profileName] = profileValue;\r\n                    }\r\n                });\r\n            };\r\n            _self.flush = function (isAsync, callback, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    sendReason = sendReason || 1 /* SendRequestReason.ManualFlush */;\r\n                    if (isAsync) {\r\n                        if (!callback) {\r\n                            result = createPromise(function (resolve) {\r\n                                // Set the callback to the promise resolve callback\r\n                                callback = resolve;\r\n                            });\r\n                        }\r\n                        if (_flushCallbackTimer == null) {\r\n                            // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                            _clearScheduledTimer();\r\n                            // Move all queued events to the HttpManager so that we don't discard new events (Auto flush scenario)\r\n                            _queueBatches(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                            _flushCallbackTimer = _createTimer(function () {\r\n                                _flushCallbackTimer = null;\r\n                                _flushImpl(callback, sendReason);\r\n                            }, 0);\r\n                        }\r\n                        else {\r\n                            // Even if null (no callback) this will ensure after the flushImpl finishes waiting\r\n                            // for a completely idle connection it will attempt to re-flush any queued events on the next cycle\r\n                            _flushCallbackQueue[_DYN_PUSH /* @min:%2epush */](callback);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                        var cleared = _clearScheduledTimer();\r\n                        // Now cause all queued events to be sent synchronously\r\n                        _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 1 /* EventSendType.Synchronous */, sendReason);\r\n                        callback && callback();\r\n                        if (cleared) {\r\n                            // restart the normal event timer if it was cleared\r\n                            _scheduleTimer();\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.setMsaAuthTicket = function (ticket) {\r\n                _httpManager.addHeader(STR_MSA_DEVICE_TICKET, ticket);\r\n            };\r\n            _self.setAuthPluginHeader = function (token) {\r\n                _httpManager.addHeader(STR_AUTH_WEB_TOKEN, token);\r\n            };\r\n            _self.removeAuthPluginHeader = function () {\r\n                _httpManager.removeHeader(STR_AUTH_WEB_TOKEN);\r\n            };\r\n            _self.hasEvents = _hasEvents;\r\n            _self._setTransmitProfile = function (profileName) {\r\n                if (_currentProfile !== profileName && _profiles[profileName] !== undefined) {\r\n                    _clearScheduledTimer();\r\n                    _currentProfile = profileName;\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            proxyFunctions(_self, function () { return _httpManager; }, [\"addResponseHandler\"]);\r\n            /**\r\n             * Batch and send events currently in the queue for the given latency.\r\n             * @param latency - Latency for which to send events.\r\n             */\r\n            function _sendEventsForLatencyAndAbove(latency, sendType, sendReason) {\r\n                var queued = _queueBatches(latency, sendType, sendReason);\r\n                // Always trigger the request as while the post channel may not have queued additional events, the httpManager may already have waiting events\r\n                _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](sendType, sendReason);\r\n                return queued;\r\n            }\r\n            function _hasEvents() {\r\n                return _queueSize > 0;\r\n            }\r\n            /**\r\n             * Try to schedule the timer after which events will be sent. If there are\r\n             * no events to be sent, or there is already a timer scheduled, or the\r\n             * http manager doesn't have any idle connections this method is no-op.\r\n             */\r\n            function _scheduleTimer() {\r\n                // If we had previously attempted to send requests, but the http manager didn't have any idle connections then the requests where delayed\r\n                // so try and requeue then again now\r\n                if (_delayedBatchSendLatency >= 0 && _queueBatches(_delayedBatchSendLatency, 0 /* EventSendType.Batched */, _delayedBatchReason)) {\r\n                    _httpManager[_DYN_SEND_QUEUED_REQUESTS /* @min:%2esendQueuedRequests */](0 /* EventSendType.Batched */, _delayedBatchReason);\r\n                }\r\n                if (_immediateQueueSize > 0 && !_immediateTimer && !_paused) {\r\n                    // During initialization _profiles enforce that the direct [2] is less than real time [1] timer value\r\n                    // If the immediateTimeout is disabled the immediate events will be sent with Real Time events\r\n                    var immediateTimeOut = _profiles[_currentProfile][2];\r\n                    if (immediateTimeOut >= 0) {\r\n                        _immediateTimer = _createTimer(function () {\r\n                            _immediateTimer = null;\r\n                            // Only try to send direct events\r\n                            _sendEventsForLatencyAndAbove(4 /* EventLatencyValue.Immediate */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            _scheduleTimer();\r\n                        }, immediateTimeOut);\r\n                    }\r\n                }\r\n                // During initialization the _profiles enforce that the normal [0] is a multiple of the real time [1] timer value\r\n                var timeOut = _profiles[_currentProfile][1];\r\n                if (!_scheduledTimer && !_flushCallbackTimer && timeOut >= 0 && !_paused) {\r\n                    if (_hasEvents()) {\r\n                        _scheduledTimer = _createTimer(function () {\r\n                            _scheduledTimer = null;\r\n                            _sendEventsForLatencyAndAbove(_timerCount === 0 ? 3 /* EventLatencyValue.RealTime */ : 1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            // Increment the count for next cycle\r\n                            _timerCount++;\r\n                            _timerCount %= 2;\r\n                            _scheduleTimer();\r\n                        }, timeOut);\r\n                    }\r\n                    else {\r\n                        _timerCount = 0;\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN__BACK_OFF_TRANSMISSI12 /* @min:%2e_backOffTransmission */] = function () {\r\n                if (_currentBackoffCount < MaxBackoffCount) {\r\n                    _currentBackoffCount++;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            _self._clearBackOff = function () {\r\n                if (_currentBackoffCount) {\r\n                    _currentBackoffCount = 0;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            function _initDefaults() {\r\n                _postConfig = null;\r\n                _isTeardownCalled = false;\r\n                _flushCallbackQueue = [];\r\n                _flushCallbackTimer = null;\r\n                _paused = false;\r\n                _immediateQueueSize = 0;\r\n                _immediateQueueSizeLimit = 500;\r\n                _queueSize = 0;\r\n                _queueSizeLimit = MaxEventsLimitInMem;\r\n                _profiles = {};\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduledTimer = null;\r\n                _immediateTimer = null;\r\n                _currentBackoffCount = 0;\r\n                _timerCount = 0;\r\n                _batchQueues = {};\r\n                _autoFlushEventsLimit = 0;\r\n                _unloadHandlersAdded = false;\r\n                // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n                _autoFlushBatchLimit = 0;\r\n                _delayedBatchSendLatency = -1;\r\n                _delayedBatchReason = null;\r\n                _optimizeObject = true;\r\n                _isPageUnloadTriggered = false;\r\n                _maxEventSendAttempts = MaxSendAttempts;\r\n                _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n                _evtNamespace = null;\r\n                _overrideInstrumentationKey = null;\r\n                _maxEvtPerBatch = null;\r\n                _disableTelemetry = false;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                // httpManager init should use the default value, because _maxEvtPerBatch is null currently\r\n                _httpManager = new HttpManager(MaxNumberEventPerBatch, MaxConnections, MaxRequestRetriesBeforeBackoff, {\r\n                    requeue: _requeueEvents,\r\n                    send: _sendingEvent,\r\n                    sent: _eventsSentEvent,\r\n                    drop: _eventsDropped,\r\n                    rspFail: _eventsResponseFail,\r\n                    oth: _otherEvent\r\n                });\r\n                _initializeProfiles();\r\n                _clearQueues();\r\n                _setAutoLimits();\r\n            }\r\n            function _createTimer(theTimerFunc, timeOut) {\r\n                // If the transmission is backed off make the timer at least 1 sec to allow for back off.\r\n                if (timeOut === 0 && _currentBackoffCount) {\r\n                    timeOut = 1;\r\n                }\r\n                var timerMultiplier = 1000;\r\n                if (_currentBackoffCount) {\r\n                    timerMultiplier = retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount - 1);\r\n                }\r\n                return _timeoutWrapper.set(theTimerFunc, timeOut * timerMultiplier);\r\n            }\r\n            function _clearScheduledTimer() {\r\n                if (_scheduledTimer !== null) {\r\n                    _scheduledTimer.cancel();\r\n                    _scheduledTimer = null;\r\n                    _timerCount = 0;\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            // Try to send all queued events using beacons if available\r\n            function _releaseAllQueues(sendType, sendReason) {\r\n                _clearScheduledTimer();\r\n                // Cancel all flush callbacks\r\n                if (_flushCallbackTimer) {\r\n                    _flushCallbackTimer.cancel();\r\n                    _flushCallbackTimer = null;\r\n                }\r\n                if (!_paused) {\r\n                    // Queue all the remaining requests to be sent. The requests will be sent using HTML5 Beacons if they are available.\r\n                    _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, sendType, sendReason);\r\n                }\r\n            }\r\n            /**\r\n             * Add empty queues for all latencies in the inbound queues map. This is called\r\n             * when Transmission Manager is being flushed. This ensures that new events added\r\n             * after flush are stored separately till we flush the current events.\r\n             */\r\n            function _clearQueues() {\r\n                _batchQueues[4 /* EventLatencyValue.Immediate */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[3 /* EventLatencyValue.RealTime */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[2 /* EventLatencyValue.CostDeferred */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[1 /* EventLatencyValue.Normal */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n            }\r\n            function _getEventBatch(iKey, latency, create) {\r\n                var batchQueue = _batchQueues[latency];\r\n                if (!batchQueue) {\r\n                    latency = 1 /* EventLatencyValue.Normal */;\r\n                    batchQueue = _batchQueues[latency];\r\n                }\r\n                var eventBatch = batchQueue.iKeyMap[iKey];\r\n                if (!eventBatch && create) {\r\n                    eventBatch = EventBatch.create(iKey);\r\n                    batchQueue.batches[_DYN_PUSH /* @min:%2epush */](eventBatch);\r\n                    batchQueue.iKeyMap[iKey] = eventBatch;\r\n                }\r\n                return eventBatch;\r\n            }\r\n            function _performAutoFlush(isAsync, doFlush) {\r\n                // Only perform the auto flush check if the httpManager has an idle connection and we are not in a backoff situation\r\n                if (_httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]() && !_currentBackoffCount) {\r\n                    if (_autoFlushEventsLimit > 0 && _queueSize > _autoFlushEventsLimit) {\r\n                        // Force flushing\r\n                        doFlush = true;\r\n                    }\r\n                    if (doFlush && _flushCallbackTimer == null) {\r\n                        // Auto flush the queue, adding a callback to avoid the creation of a promise\r\n                        _self.flush(isAsync, function () { }, 20 /* SendRequestReason.MaxQueuedEvents */);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToProperQueue(event, append) {\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event = optimizeObject(event);\r\n                }\r\n                var latency = event[_DYN_LATENCY /* @min:%2elatency */];\r\n                var eventBatch = _getEventBatch(event[_DYN_I_KEY /* @min:%2eiKey */], latency, true);\r\n                if (eventBatch.addEvent(event)) {\r\n                    if (latency !== 4 /* EventLatencyValue.Immediate */) {\r\n                        _queueSize++;\r\n                        // Check for auto flushing based on total events in the queue, but not for requeued or retry events\r\n                        if (append && event[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] === 0) {\r\n                            // Force the flushing of the batch if the batch (specific iKey / latency combination) reaches it's auto flush limit\r\n                            _performAutoFlush(!event.sync, _autoFlushBatchLimit > 0 && eventBatch[_DYN_COUNT /* @min:%2ecount */]() >= _autoFlushBatchLimit);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Direct events don't need auto flushing as they are scheduled (by default) for immediate delivery\r\n                        _immediateQueueSize++;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _dropEventWithLatencyOrLess(iKey, latency, currentLatency, dropNumber) {\r\n                while (currentLatency <= latency) {\r\n                    var eventBatch = _getEventBatch(iKey, latency, true);\r\n                    if (eventBatch && eventBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        // Dropped oldest events from lowest possible latency\r\n                        var droppedEvents = eventBatch[_DYN_SPLIT /* @min:%2esplit */](0, dropNumber);\r\n                        var droppedCount = droppedEvents[_DYN_COUNT /* @min:%2ecount */]();\r\n                        if (droppedCount > 0) {\r\n                            if (currentLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                                _immediateQueueSize -= droppedCount;\r\n                            }\r\n                            else {\r\n                                _queueSize -= droppedCount;\r\n                            }\r\n                            _notifyBatchEvents(strEventsDiscarded, [droppedEvents], EventsDiscardedReason.QueueFull, undefined);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    currentLatency++;\r\n                }\r\n                // Unable to drop any events -- lets just make sure the queue counts are correct to avoid exhaustion\r\n                _resetQueueCounts();\r\n                return false;\r\n            }\r\n            /**\r\n             * Internal helper to reset the queue counts, used as a backstop to avoid future queue exhaustion errors\r\n             * that might occur because of counting issues.\r\n             */\r\n            function _resetQueueCounts() {\r\n                var immediateQueue = 0;\r\n                var normalQueue = 0;\r\n                var _loop_1 = function (latency) {\r\n                    var batchQueue = _batchQueues[latency];\r\n                    if (batchQueue && batchQueue[_DYN_BATCHES /* @min:%2ebatches */]) {\r\n                        arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                            if (latency === 4 /* EventLatencyValue.Immediate */) {\r\n                                immediateQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                            else {\r\n                                normalQueue += theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                for (var latency = 1 /* EventLatencyValue.Normal */; latency <= 4 /* EventLatencyValue.Immediate */; latency++) {\r\n                    _loop_1(latency);\r\n                }\r\n                _queueSize = normalQueue;\r\n                _immediateQueueSize = immediateQueue;\r\n            }\r\n            function _queueBatches(latency, sendType, sendReason) {\r\n                var eventsQueued = false;\r\n                var isAsync = sendType === 0 /* EventSendType.Batched */;\r\n                // Only queue batches (to the HttpManager) if this is a sync request or the httpManager has an idle connection\r\n                // Thus keeping the events within the PostChannel until the HttpManager has a connection available\r\n                // This is so we can drop \"old\" events if the queue is getting full because we can't successfully send events\r\n                if (!isAsync || _httpManager[_DYN_CAN_SEND_REQUEST /* @min:%2ecanSendRequest */]()) {\r\n                    doPerf(_self.core, function () { return \"PostChannel._queueBatches\"; }, function () {\r\n                        var droppedEvents = [];\r\n                        var latencyToProcess = 4 /* EventLatencyValue.Immediate */;\r\n                        while (latencyToProcess >= latency) {\r\n                            var batchQueue = _batchQueues[latencyToProcess];\r\n                            if (batchQueue && batchQueue.batches && batchQueue.batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                                arrForEach(batchQueue[_DYN_BATCHES /* @min:%2ebatches */], function (theBatch) {\r\n                                    // Add the batch to the http manager to send the requests\r\n                                    if (!_httpManager.addBatch(theBatch)) {\r\n                                        // The events from this iKey are being dropped (killed)\r\n                                        droppedEvents = droppedEvents[_DYN_CONCAT /* @min:%2econcat */](theBatch[_DYN_EVENTS /* @min:%2eevents */]());\r\n                                    }\r\n                                    else {\r\n                                        eventsQueued = eventsQueued || (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0);\r\n                                    }\r\n                                    if (latencyToProcess === 4 /* EventLatencyValue.Immediate */) {\r\n                                        _immediateQueueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                    else {\r\n                                        _queueSize -= theBatch[_DYN_COUNT /* @min:%2ecount */]();\r\n                                    }\r\n                                });\r\n                                // Remove all batches from this Queue\r\n                                batchQueue[_DYN_BATCHES /* @min:%2ebatches */] = [];\r\n                                batchQueue.iKeyMap = {};\r\n                            }\r\n                            latencyToProcess--;\r\n                        }\r\n                        if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                            _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.KillSwitch);\r\n                        }\r\n                        if (eventsQueued && _delayedBatchSendLatency >= latency) {\r\n                            // We have queued events at the same level as the delayed values so clear the setting\r\n                            _delayedBatchSendLatency = -1;\r\n                            _delayedBatchReason = 0 /* SendRequestReason.Undefined */;\r\n                        }\r\n                    }, function () { return ({ latency: latency, sendType: sendType, sendReason: sendReason }); }, !isAsync);\r\n                }\r\n                else {\r\n                    // remember the min latency so that we can re-trigger later\r\n                    _delayedBatchSendLatency = _delayedBatchSendLatency >= 0 ? mathMin(_delayedBatchSendLatency, latency) : latency;\r\n                    _delayedBatchReason = mathMax(_delayedBatchReason, sendReason);\r\n                }\r\n                return eventsQueued;\r\n            }\r\n            /**\r\n             * This is the callback method is called as part of the manual flushing process.\r\n             * @param callback - The callback method to call after the flush is complete\r\n             * @param sendReason - The reason why the flush is being called\r\n             */\r\n            function _flushImpl(callback, sendReason) {\r\n                // Add any additional queued events and cause all queued events to be sent asynchronously\r\n                _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                // All events (should) have been queue -- lets just make sure the queue counts are correct to avoid queue exhaustion (previous bug #9685112)\r\n                _resetQueueCounts();\r\n                _waitForIdleManager(function () {\r\n                    // Only called AFTER the httpManager does not have any outstanding requests\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                    if (_flushCallbackQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _flushCallbackTimer = _createTimer(function () {\r\n                            _flushCallbackTimer = null;\r\n                            _flushImpl(_flushCallbackQueue.shift(), sendReason);\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        // No more flush requests\r\n                        _flushCallbackTimer = null;\r\n                        // Restart the normal timer schedule\r\n                        _scheduleTimer();\r\n                    }\r\n                });\r\n            }\r\n            function _waitForIdleManager(callback) {\r\n                if (_httpManager.isCompletelyIdle()) {\r\n                    callback();\r\n                }\r\n                else {\r\n                    _flushCallbackTimer = _createTimer(function () {\r\n                        _flushCallbackTimer = null;\r\n                        _waitForIdleManager(callback);\r\n                    }, FlushCheckTimer);\r\n                }\r\n            }\r\n            /**\r\n             * Resets the transmit profiles to the default profiles of Real Time, Near Real Time\r\n             * and Best Effort. This removes all the custom profiles that were loaded.\r\n             */\r\n            function _resetTransmitProfiles() {\r\n                _clearScheduledTimer();\r\n                _initializeProfiles();\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduleTimer();\r\n            }\r\n            function _initializeProfiles() {\r\n                _profiles = {};\r\n                _profiles[RT_PROFILE] = [2, 1, 0];\r\n                _profiles[NRT_PROFILE] = [6, 3, 0];\r\n                _profiles[BE_PROFILE] = [18, 9, 0];\r\n            }\r\n            /**\r\n             * The notification handler for requeue events\r\n             * @ignore\r\n             */\r\n            function _requeueEvents(batches, reason) {\r\n                var droppedEvents = [];\r\n                var maxSendAttempts = _maxEventSendAttempts;\r\n                if (_isPageUnloadTriggered) {\r\n                    // If a page unlaod has been triggered reduce the number of times we try to \"retry\"\r\n                    maxSendAttempts = _maxUnloadEventSendAttempts;\r\n                }\r\n                arrForEach(batches, function (theBatch) {\r\n                    if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                        arrForEach(theBatch[_DYN_EVENTS /* @min:%2eevents */](), function (theEvent) {\r\n                            if (theEvent) {\r\n                                // Check if the request being added back is for a sync event in which case mark it no longer a sync event\r\n                                if (theEvent[_DYN_SYNC /* @min:%2esync */]) {\r\n                                    theEvent[_DYN_LATENCY /* @min:%2elatency */] = 4 /* EventLatencyValue.Immediate */;\r\n                                    theEvent[_DYN_SYNC /* @min:%2esync */] = false;\r\n                                }\r\n                                if (theEvent[_DYN_SEND_ATTEMPT /* @min:%2esendAttempt */] < maxSendAttempts) {\r\n                                    // Reset the event timings\r\n                                    setProcessTelemetryTimings(theEvent, _self[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                                    _addEventToQueues(theEvent, false);\r\n                                }\r\n                                else {\r\n                                    droppedEvents[_DYN_PUSH /* @min:%2epush */](theEvent);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                if (droppedEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.NonRetryableStatus);\r\n                }\r\n                if (_isPageUnloadTriggered) {\r\n                    // Unload event has been received so we need to try and flush new events\r\n                    _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            }\r\n            function _callNotification(evtName, theArgs) {\r\n                var manager = (_notificationManager || {});\r\n                var notifyFunc = manager[evtName];\r\n                if (notifyFunc) {\r\n                    try {\r\n                        notifyFunc.apply(manager, theArgs);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self.diagLog(), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, evtName + \" notification failed: \" + e);\r\n                    }\r\n                }\r\n            }\r\n            function _notifyEvents(evtName, theEvents) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (theEvents && theEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(evtName, [theEvents][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                }\r\n            }\r\n            function _notifyBatchEvents(evtName, batches) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(batches, function (theBatch) {\r\n                        if (theBatch && theBatch[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                            _callNotification(evtName, [theBatch.events()][_DYN_CONCAT /* @min:%2econcat */](extraArgs));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /**\r\n             * The notification handler for when batches are about to be sent\r\n             * @ignore\r\n             */\r\n            function _sendingEvent(batches, reason, isSyncRequest) {\r\n                if (batches && batches[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _callNotification(\"eventsSendRequest\", [(reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */ ?\r\n                            reason - 1000 /* EventBatchNotificationReason.SendingUndefined */ :\r\n                            0 /* SendRequestReason.Undefined */), isSyncRequest !== true]);\r\n                }\r\n            }\r\n            /**\r\n             * This event represents that a batch of events have been successfully sent and a response received\r\n             * @param batches - The notification handler for when the batches have been successfully sent\r\n             * @param reason - For this event the reason will always be EventBatchNotificationReason.Complete\r\n             */\r\n            function _eventsSentEvent(batches, reason) {\r\n                _notifyBatchEvents(\"eventsSent\", batches, reason);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _eventsDropped(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */ ?\r\n                    reason - 8000 /* EventBatchNotificationReason.EventsDropped */ :\r\n                    EventsDiscardedReason.Unknown), sendType);\r\n            }\r\n            function _eventsResponseFail(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.NonRetryableStatus, sendType);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _otherEvent(batches, reason, isSyncRequest, sendType) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.Unknown, sendType);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _setAutoLimits() {\r\n                if (!_disableAutoBatchFlushLimit) {\r\n                    _autoFlushBatchLimit = mathMax(_maxEvtPerBatch * (MaxConnections + 1), _queueSizeLimit / 6);\r\n                }\r\n                else {\r\n                    _autoFlushBatchLimit = 0;\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for PostChannel.prototype.initialize.\r\n// Removed Stub for PostChannel.prototype.processTelemetry.\r\n// Removed Stub for PostChannel.prototype.setEventQueueLimits.\r\n// Removed Stub for PostChannel.prototype.pause.\r\n// Removed Stub for PostChannel.prototype.resume.\r\n// Removed Stub for PostChannel.prototype.addResponseHandler.\r\n// Removed Stub for PostChannel.prototype.flush.\r\n// Removed Stub for PostChannel.prototype.setMsaAuthTicket.\r\n// Removed Stub for PostChannel.prototype.setAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.removeAuthPluginHeader.\r\n// Removed Stub for PostChannel.prototype.hasEvents.\r\n// Removed Stub for PostChannel.prototype._loadTransmitProfiles.\r\n// Removed Stub for PostChannel.prototype._setTransmitProfile.\r\n// Removed Stub for PostChannel.prototype._backOffTransmission.\r\n// Removed Stub for PostChannel.prototype._clearBackOff.\r\n// Removed Stub for PostChannel.prototype.getOfflineSupport.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PostChannel.__ieDyn=1;\n\n    return PostChannel;\r\n}(BaseTelemetryPlugin));\r\nexport { PostChannel };\r\n//# sourceMappingURL=PostChannel.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n// Licensed under the\r\nexport { correlationIdSetPrefix, correlationIdGetPrefix, correlationIdCanIncludeCorrelationHeader, correlationIdGetCorrelationContext, correlationIdGetCorrelationContextValue, dateTimeUtilsNow, dateTimeUtilsDuration, isInternalApplicationInsightsEndpoint, createDistributedTraceContextFromTrace } from \"./Util\";\r\nexport { ThrottleMgr } from \"./ThrottleMgr\";\r\nexport { parseConnectionString, ConnectionStringParser } from \"./ConnectionStringParser\";\r\nexport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nexport { DisabledPropertyName, ProcessLegacy, SampleRate, HttpMethod, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, strNotSpecified } from \"./Constants\";\r\nexport { Envelope } from \"./Telemetry/Common/Envelope\";\r\nexport { Event } from \"./Telemetry/Event\";\r\nexport { Exception } from \"./Telemetry/Exception\";\r\nexport { Metric } from \"./Telemetry/Metric\";\r\nexport { PageView } from \"./Telemetry/PageView\";\r\nexport { RemoteDependencyData } from \"./Telemetry/RemoteDependencyData\";\r\nexport { Trace } from \"./Telemetry/Trace\";\r\nexport { PageViewPerformance } from \"./Telemetry/PageViewPerformance\";\r\nexport { Data } from \"./Telemetry/Common/Data\";\r\nexport { SeverityLevel } from \"./Interfaces/Contracts/SeverityLevel\";\r\nexport { ConfigurationManager } from \"./Interfaces/IConfig\";\r\nexport { ContextTagKeys } from \"./Interfaces/Contracts/ContextTagKeys\";\r\nexport { dataSanitizeKeyAndAddUniqueness, dataSanitizeKey, dataSanitizeString, dataSanitizeUrl, dataSanitizeMessage, dataSanitizeException, dataSanitizeProperties, dataSanitizeMeasurements, dataSanitizeId, dataSanitizeInput, dsPadNumber } from \"./Telemetry/Common/DataSanitizer\";\r\nexport { TelemetryItemCreator, createTelemetryItem } from \"./TelemetryItemCreator\";\r\nexport { CtxTagKeys, Extensions } from \"./Interfaces/PartAExtensions\";\r\nexport { DistributedTracingModes, EventPersistence } from \"./Enums\";\r\nexport { stringToBoolOrDefault, msToTimeSpan, getExtensionByName, isCrossOriginError } from \"./HelperFuncs\";\r\nexport { isBeaconsSupported as isBeaconApiSupported, createTraceParent, parseTraceParent, isValidTraceId, isValidSpanId, isValidTraceParent, isSampledFlag, formatTraceParent, findW3cTraceParent, findAllScripts } from \"@microsoft/applicationinsights-core-js\";\r\nexport { createDomEvent } from \"./DomHelperFuncs\";\r\nexport { utlDisableStorage, utlEnableStorage, utlCanUseLocalStorage, utlGetLocalStorage, utlSetLocalStorage, utlRemoveStorage, utlCanUseSessionStorage, utlGetSessionStorageKeys, utlGetSessionStorage, utlSetSessionStorage, utlRemoveSessionStorage, utlSetStoragePrefix } from \"./StorageHelperFuncs\";\r\nexport { urlParseUrl, urlGetAbsoluteUrl, urlGetPathName, urlGetCompleteUrl, urlParseHost, urlParseFullHost } from \"./UrlHelperFuncs\";\r\nexport { createOfflineListener } from \"./Offline\";\r\nexport var PropertiesPluginIdentifier = \"AppInsightsPropertiesPlugin\";\r\nexport var BreezeChannelIdentifier = \"AppInsightsChannelPlugin\";\r\nexport var AnalyticsPluginIdentifier = \"ApplicationInsightsAnalytics\";\r\n//# sourceMappingURL=applicationinsights-common.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isBoolean, isFunction, isNullOrUndefined, isString } from \"@nevware21/ts-utils\";\r\nimport { STR_EMPTY } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\n/**\r\n * @internal\r\n * @ignore\r\n * @param str\r\n * @param defaultValue\r\n * @returns\r\n */\r\nfunction _stringToBoolOrDefault(theValue, defaultValue, theConfig) {\r\n    if (!theValue && isNullOrUndefined(theValue)) {\r\n        return defaultValue;\r\n    }\r\n    if (isBoolean(theValue)) {\r\n        return theValue;\r\n    }\r\n    return asString(theValue)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the field defined as an object\r\n * that should be merged\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfMerge(defaultValue) {\r\n    return {\r\n        mrg: true,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field set function\r\n * @param setter - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfSet(setter, defaultValue) {\r\n    return {\r\n        set: setter,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance with the provided field validator\r\n * @param validator - The IConfigCheckFn function to validate the user provided value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfValidate(validator, defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        isVal: validator,\r\n        v: defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate and convert the user\r\n * provided value to a boolean from a string or boolean value\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @param fallBackName - The fallback configuration name if the current value is not available\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBoolean(defaultValue, fallBackName) {\r\n    return {\r\n        fb: fallBackName,\r\n        set: _stringToBoolOrDefault,\r\n        v: !!defaultValue\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfFunc(defaultValue) {\r\n    return {\r\n        isVal: isFunction,\r\n        v: defaultValue || null\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance that will validate that the user\r\n * provided value is a function.\r\n * @param defaultValue - The default string value to apply it not provided or it's not valid, defaults to an empty string\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfString(defaultValue) {\r\n    return {\r\n        isVal: isString,\r\n        v: asString(defaultValue || STR_EMPTY)\r\n    };\r\n}\r\n/**\r\n * Helper which returns an IConfigDefaultCheck instance identifying that value associated with this property\r\n * should not have it's properties converted into a dynamic config properties.\r\n * @param defaultValue - The default value to apply it not provided or it's not valid\r\n * @returns a new IConfigDefaultCheck structure\r\n */\r\nexport function cfgDfBlockPropValue(defaultValue) {\r\n    return {\r\n        blkVal: true,\r\n        v: defaultValue\r\n    };\r\n}\r\n//# sourceMappingURL=ConfigDefaultHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { asString, isArray, isDefined, isNullOrUndefined, isObject, isPlainObject, isUndefined, objForEachKey, objHasOwn } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nfunction _isConfigDefaults(value) {\r\n    return (value && isObject(value) && !isArray(value) && (value.isVal || value.fb || objHasOwn(value, \"v\") || objHasOwn(value, \"mrg\") || objHasOwn(value, \"ref\") || value.set));\r\n}\r\nfunction _getDefault(dynamicHandler, theConfig, cfgDefaults) {\r\n    var defValue;\r\n    var isDefaultValid = cfgDefaults.dfVal || isDefined;\r\n    // There is a fallback config key so try and grab that first\r\n    if (theConfig && cfgDefaults.fb) {\r\n        var fallbacks = cfgDefaults.fb;\r\n        if (!isArray(fallbacks)) {\r\n            fallbacks = [fallbacks];\r\n        }\r\n        for (var lp = 0; lp < fallbacks[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            var fallback = fallbacks[lp];\r\n            var fbValue = theConfig[fallback];\r\n            if (isDefaultValid(fbValue)) {\r\n                defValue = fbValue;\r\n            }\r\n            else if (dynamicHandler) {\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                fbValue = dynamicHandler.cfg[fallback];\r\n                if (isDefaultValid(fbValue)) {\r\n                    defValue = fbValue;\r\n                }\r\n                // Needed to ensure that the fallback value (and potentially) new field is also dynamic even if null/undefined\r\n                dynamicHandler.set(dynamicHandler.cfg, asString(fallback), fbValue);\r\n            }\r\n            if (isDefaultValid(defValue)) {\r\n                // We have a valid default so break out of the look\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // If the value is still not defined and we have a default value then use that\r\n    if (!isDefaultValid(defValue) && isDefaultValid(cfgDefaults.v)) {\r\n        defValue = cfgDefaults.v;\r\n    }\r\n    return defValue;\r\n}\r\n/**\r\n * Recursively resolve the default value\r\n * @param dynamicHandler\r\n * @param theConfig\r\n * @param cfgDefaults\r\n * @returns\r\n */\r\nfunction _resolveDefaultValue(dynamicHandler, theConfig, cfgDefaults) {\r\n    var theValue = cfgDefaults;\r\n    if (cfgDefaults && _isConfigDefaults(cfgDefaults)) {\r\n        theValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    if (theValue) {\r\n        if (_isConfigDefaults(theValue)) {\r\n            theValue = _resolveDefaultValue(dynamicHandler, theConfig, theValue);\r\n        }\r\n        var newValue_1;\r\n        if (isArray(theValue)) {\r\n            newValue_1 = [];\r\n            newValue_1[_DYN_LENGTH /* @min:%2elength */] = theValue[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(theValue)) {\r\n            newValue_1 = {};\r\n        }\r\n        if (newValue_1) {\r\n            objForEachKey(theValue, function (key, value) {\r\n                if (value && _isConfigDefaults(value)) {\r\n                    value = _resolveDefaultValue(dynamicHandler, theConfig, value);\r\n                }\r\n                newValue_1[key] = value;\r\n            });\r\n            theValue = newValue_1;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Applies the default value on the config property and makes sure that it's dynamic\r\n * @param theConfig\r\n * @param name\r\n * @param defaultValue\r\n */\r\nexport function _applyDefaultValue(dynamicHandler, theConfig, name, defaultValue) {\r\n    // Resolve the initial config value from the provided value or use the defined default\r\n    var isValid;\r\n    var setFn;\r\n    var defValue;\r\n    var cfgDefaults = defaultValue;\r\n    var mergeDf;\r\n    var reference;\r\n    var readOnly;\r\n    var blkDynamicValue;\r\n    if (_isConfigDefaults(cfgDefaults)) {\r\n        // looks like a IConfigDefault\r\n        isValid = cfgDefaults.isVal;\r\n        setFn = cfgDefaults.set;\r\n        readOnly = cfgDefaults.rdOnly;\r\n        blkDynamicValue = cfgDefaults.blkVal;\r\n        mergeDf = cfgDefaults.mrg;\r\n        reference = cfgDefaults.ref;\r\n        if (!reference && isUndefined(reference)) {\r\n            reference = !!mergeDf;\r\n        }\r\n        defValue = _getDefault(dynamicHandler, theConfig, cfgDefaults);\r\n    }\r\n    else {\r\n        defValue = defaultValue;\r\n    }\r\n    if (blkDynamicValue) {\r\n        // Mark the property so that any value assigned will be blocked from conversion, we need to do this\r\n        // before assigning or fetching the value to ensure it's not converted\r\n        dynamicHandler.blkVal(theConfig, name);\r\n    }\r\n    // Set the value to the default value;\r\n    var theValue;\r\n    var usingDefault = true;\r\n    var cfgValue = theConfig[name];\r\n    // try and get and user provided values\r\n    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n        // Use the defined theConfig[name] value\r\n        theValue = cfgValue;\r\n        usingDefault = false;\r\n        // The values are different and we have a special default value check, which is used to\r\n        // override config values like empty strings to continue using the default\r\n        if (isValid && theValue !== defValue && !isValid(theValue)) {\r\n            theValue = defValue;\r\n            usingDefault = true;\r\n        }\r\n        if (setFn) {\r\n            theValue = setFn(theValue, defValue, theConfig);\r\n            usingDefault = theValue === defValue;\r\n        }\r\n    }\r\n    if (!usingDefault) {\r\n        if (isPlainObject(theValue) || isArray(defValue)) {\r\n            // we are using the user supplied value and it's an object\r\n            if (mergeDf && defValue && (isPlainObject(defValue) || isArray(defValue))) {\r\n                // Resolve/apply the defaults\r\n                objForEachKey(defValue, function (dfName, dfValue) {\r\n                    // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                    _applyDefaultValue(dynamicHandler, theValue, dfName, dfValue);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    else if (defValue) {\r\n        // Just resolve the default\r\n        theValue = _resolveDefaultValue(dynamicHandler, theConfig, defValue);\r\n    }\r\n    else {\r\n        theValue = defValue;\r\n    }\r\n    // if (theValue && usingDefault && (isPlainObject(theValue) || isArray(theValue))) {\r\n    //     theValue = _cfgDeepCopy(theValue);\r\n    // }\r\n    // Needed to ensure that the (potentially) new field is dynamic even if null/undefined\r\n    dynamicHandler.set(theConfig, name, theValue);\r\n    if (reference) {\r\n        dynamicHandler.ref(theConfig, name);\r\n    }\r\n    if (readOnly) {\r\n        dynamicHandler.rdOnly(theConfig, name);\r\n    }\r\n}\r\n//# sourceMappingURL=ConfigDefaults.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { isArray, isPlainObject, objForEachKey, symbolFor, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\n// Using Symbol.for so that if the same symbol was already created it would be returned\r\n// To handle multiple instances using potentially different versions we are not using\r\n// createUniqueNamespace()\r\nexport var CFG_HANDLER_LINK = symbolFor(\"[[ai_dynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects / arrays with if they should not be converted\r\n */\r\nvar BLOCK_DYNAMIC = symbolFor(\"[[ai_blkDynCfg_1]]\");\r\n/**\r\n * @internal\r\n * @ignore\r\n * The symbol to tag objects to indicate that when included into the configuration that\r\n * they should be converted into a trackable dynamic object.\r\n */\r\nvar FORCE_DYNAMIC = symbolFor(\"[[ai_frcDynCfg_1]]\");\r\nexport function _cfgDeepCopy(source) {\r\n    if (source) {\r\n        var target_1;\r\n        if (isArray(source)) {\r\n            target_1 = [];\r\n            target_1[_DYN_LENGTH /* @min:%2elength */] = source[_DYN_LENGTH /* @min:%2elength */];\r\n        }\r\n        else if (isPlainObject(source)) {\r\n            target_1 = {};\r\n        }\r\n        if (target_1) {\r\n            // Copying index values by property name as the extensionConfig can be an array or object\r\n            objForEachKey(source, function (key, value) {\r\n                // Perform a deep copy of the object\r\n                target_1[key] = _cfgDeepCopy(value);\r\n            });\r\n            return target_1;\r\n        }\r\n    }\r\n    return source;\r\n}\r\n/**\r\n * @internal\r\n * Get the dynamic config handler if the value is already dynamic\r\n * @returns\r\n */\r\nexport function getDynamicConfigHandler(value) {\r\n    if (value) {\r\n        var handler = value[CFG_HANDLER_LINK] || value;\r\n        if (handler.cfg && (handler.cfg === value || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n            return handler;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Mark the provided value so that if it's included into the configuration it will NOT have\r\n * its properties converted into a dynamic (reactive) object. If the object is not a plain object\r\n * or an array (ie. a class) this function has not affect as only Objects and Arrays are converted\r\n * into dynamic objects in the dynamic configuration.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * You should only need to use this function, if you are creating dynamic \"classes\" from objects\r\n * which confirm to the require interface. A common case for this is during unit testing where it's\r\n * easier to create mock extensions.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed\r\n *\r\n * @example\r\n * ```ts\r\n * // This is a valid \"extension\", but it is technically an object\r\n * // So when included in the config.extensions it WILL be cloned and then\r\n * // converted into a dynamic object, where all of its properties will become\r\n * // get/set object properties and will be tracked. While this WILL still\r\n * // function, when attempt to use a mocking framework on top of this the\r\n * // functions are now technically get accessors which return a function\r\n * // and this can cause some mocking frameworks to fail.\r\n * let mockChannel = {\r\n *      pause: () => { },\r\n*      resume: () => { },\r\n*      teardown: () => { },\r\n*      flush: (async: any, callBack: any) => { },\r\n*      processTelemetry: (env: any) => { },\r\n*      setNextPlugin: (next: any) => { },\r\n*      initialize: (config: any, core: any, extensions: any) => { },\r\n*      identifier: \"testChannel\",\r\n*      priority: 1003\r\n* };\r\n * ```\r\n * @param value - The object that you want to block from being converted into a\r\n * trackable dynamic object\r\n * @returns The original value\r\n */\r\nexport function blockDynamicConversion(value) {\r\n    if (value && (isPlainObject(value) || isArray(value))) {\r\n        try {\r\n            value[BLOCK_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * This is the reverse case of {@link blockDynamicConversion} in that this will tag an\r\n * object to indicate that it should always be converted into a dynamic trackable object\r\n * even when not an object or array. So all properties of this object will become\r\n * get / set accessor functions.\r\n *\r\n * When you have tagged a value as both {@link forceDynamicConversion} and blocked force will take precedence.\r\n *\r\n * If `value` is falsy (null / undefined / 0 / empty string etc) it will not be tagged and\r\n * if there is an exception adding the property to the value (because its frozen etc) the\r\n * exception will be swallowed.\r\n * @param value - The object that should be tagged and converted if included into a dynamic\r\n * configuration.\r\n * @returns The original value\r\n */\r\nexport function forceDynamicConversion(value) {\r\n    if (value) {\r\n        try {\r\n            value[FORCE_DYNAMIC] = true;\r\n        }\r\n        catch (e) {\r\n            // Don't throw for this case as it's an ask only\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @internal\r\n * @ignore\r\n * Helper function to check whether an object can or should be converted into a dynamic\r\n * object.\r\n * @param value - The object to check whether it should be converted\r\n * @returns `true` if the value should be converted otherwise `false`.\r\n */\r\nexport function _canMakeDynamic(getFunc, state, value) {\r\n    var result = false;\r\n    // Object must exist and be truthy\r\n    if (value && !getFunc[state.blkVal]) {\r\n        // Tagged as always convert\r\n        result = value[FORCE_DYNAMIC];\r\n        // Check that it's not explicitly tagged as blocked\r\n        if (!result && !value[BLOCK_DYNAMIC]) {\r\n            // Only convert plain objects or arrays by default\r\n            result = isPlainObject(value) || isArray(value);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Throws an invalid access exception\r\n * @param message - The message to include in the exception\r\n */\r\nexport function throwInvalidAccess(message) {\r\n    throwTypeError(\"InvalidAccess:\" + message);\r\n}\r\n//# sourceMappingURL=DynamicSupport.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, isArray, objDefine, objDefineProp, objForEachKey, objGetOwnPropertyDescriptor } from \"@nevware21/ts-utils\";\r\nimport { UNDEFINED_VALUE } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_APPLY, _DYN_LOGGER, _DYN_PUSH, _DYN_SPLICE, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nimport { CFG_HANDLER_LINK, _canMakeDynamic, blockDynamicConversion, throwInvalidAccess } from \"./DynamicSupport\";\r\nvar arrayMethodsToPatch = [\r\n    \"push\",\r\n    \"pop\",\r\n    \"shift\",\r\n    \"unshift\",\r\n    \"splice\"\r\n];\r\nexport var _throwDynamicError = function (logger, name, desc, e) {\r\n    logger && logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](3 /* eLoggingSeverity.DEBUG */, 108 /* _eInternalMessageId.DynamicConfigException */, \"\".concat(desc, \" [\").concat(name, \"] failed - \") + dumpObj(e));\r\n};\r\nfunction _patchArray(state, target, name) {\r\n    if (isArray(target)) {\r\n        // Monkey Patch the methods that might change the array\r\n        arrForEach(arrayMethodsToPatch, function (method) {\r\n            var orgMethod = target[method];\r\n            target[method] = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var result = orgMethod[_DYN_APPLY /* @min:%2eapply */](this, args);\r\n                // items may be added, removed or moved so need to make some new dynamic properties\r\n                _makeDynamicObject(state, target, name, \"Patching\");\r\n                return result;\r\n            };\r\n        });\r\n    }\r\n}\r\nfunction _getOwnPropGetter(target, name) {\r\n    var propDesc = objGetOwnPropertyDescriptor(target, name);\r\n    return propDesc && propDesc.get;\r\n}\r\nfunction _createDynamicProperty(state, theConfig, name, value) {\r\n    // Does not appear to be dynamic so lets make it so\r\n    var detail = {\r\n        n: name,\r\n        h: [],\r\n        trk: function (handler) {\r\n            if (handler && handler.fn) {\r\n                if (arrIndexOf(detail.h, handler) === -1) {\r\n                    // Add this handler to the collection that should be notified when the value changes\r\n                    detail.h[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n                state.trk(handler, detail);\r\n            }\r\n        },\r\n        clr: function (handler) {\r\n            var idx = arrIndexOf(detail.h, handler);\r\n            if (idx !== -1) {\r\n                detail.h[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n            }\r\n        }\r\n    };\r\n    // Flag to optimize lookup response time by avoiding additional function calls\r\n    var checkDynamic = true;\r\n    var isObjectOrArray = false;\r\n    function _getProperty() {\r\n        if (checkDynamic) {\r\n            isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n            // Make sure that if it's an object that we make it dynamic\r\n            if (value && !value[CFG_HANDLER_LINK] && isObjectOrArray) {\r\n                // It doesn't look like it's already dynamic so lets make sure it's converted the object into a dynamic Config as well\r\n                value = _makeDynamicObject(state, value, name, \"Converting\");\r\n            }\r\n            // If it needed to be converted it now has been\r\n            checkDynamic = false;\r\n        }\r\n        // If there is an active handler then add it to the tracking set of handlers\r\n        var activeHandler = state.act;\r\n        if (activeHandler) {\r\n            detail.trk(activeHandler);\r\n        }\r\n        return value;\r\n    }\r\n    // Tag this getter as our dynamic property and provide shortcut for notifying a change\r\n    _getProperty[state.prop] = {\r\n        chng: function () {\r\n            state.add(detail);\r\n        }\r\n    };\r\n    function _setProperty(newValue) {\r\n        if (value !== newValue) {\r\n            if (!!_getProperty[state.ro] && !state.upd) {\r\n                // field is marked as readonly so return false\r\n                throwInvalidAccess(\"[\" + name + \"] is read-only:\" + dumpObj(theConfig));\r\n            }\r\n            if (checkDynamic) {\r\n                isObjectOrArray = isObjectOrArray || _canMakeDynamic(_getProperty, state, value);\r\n                checkDynamic = false;\r\n            }\r\n            // The value must be a plain object or an array to enforce the reference (in-place updates)\r\n            var isReferenced = isObjectOrArray && _getProperty[state.rf];\r\n            if (isObjectOrArray) {\r\n                // We are about to replace a plain object or an array\r\n                if (isReferenced) {\r\n                    // Reassign the properties from the current value to the same properties from the newValue\r\n                    // This will set properties not in the newValue to undefined\r\n                    objForEachKey(value, function (key) {\r\n                        value[key] = newValue ? newValue[key] : UNDEFINED_VALUE;\r\n                    });\r\n                    // Now assign / re-assign value with all of the keys from newValue\r\n                    try {\r\n                        objForEachKey(newValue, function (key, theValue) {\r\n                            _setDynamicProperty(state, value, key, theValue);\r\n                        });\r\n                        // Now drop newValue so when we assign value later it keeps the existing reference\r\n                        newValue = value;\r\n                    }\r\n                    catch (e) {\r\n                        // Unable to convert to dynamic property so just leave as non-dynamic\r\n                        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Assigning\", e);\r\n                        // Mark as not an object or array so we don't try and do this again\r\n                        isObjectOrArray = false;\r\n                    }\r\n                }\r\n                else if (value && value[CFG_HANDLER_LINK]) {\r\n                    // As we are replacing the value, if it's already dynamic then we need to notify the listeners\r\n                    // for every property it has already\r\n                    objForEachKey(value, function (key) {\r\n                        // Check if the value is dynamic\r\n                        var getter = _getOwnPropGetter(value, key);\r\n                        if (getter) {\r\n                            // And if it is tell it's listeners that the value has changed\r\n                            var valueState = getter[state.prop];\r\n                            valueState && valueState.chng();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (newValue !== value) {\r\n                var newIsObjectOrArray = newValue && _canMakeDynamic(_getProperty, state, newValue);\r\n                if (!isReferenced && newIsObjectOrArray) {\r\n                    // As the newValue is an object/array lets preemptively make it dynamic\r\n                    newValue = _makeDynamicObject(state, newValue, name, \"Converting\");\r\n                }\r\n                // Now assign the internal \"value\" to the newValue\r\n                value = newValue;\r\n                isObjectOrArray = newIsObjectOrArray;\r\n            }\r\n            // Cause any listeners to be scheduled for notification\r\n            state.add(detail);\r\n        }\r\n    }\r\n    objDefine(theConfig, detail.n, { g: _getProperty, s: _setProperty });\r\n}\r\nexport function _setDynamicProperty(state, target, name, value) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        if (!isDynamic) {\r\n            _createDynamicProperty(state, target, name, value);\r\n        }\r\n        else {\r\n            // Looks like it's already dynamic just assign the new value\r\n            target[name] = value;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _setDynamicPropertyState(state, target, name, flags) {\r\n    if (target) {\r\n        // To be a dynamic property it needs to have a get function\r\n        var getter = _getOwnPropGetter(target, name);\r\n        var isDynamic = getter && !!getter[state.prop];\r\n        var inPlace = flags && flags[0 /* _eSetDynamicPropertyFlags.inPlace */];\r\n        var rdOnly = flags && flags[1 /* _eSetDynamicPropertyFlags.readOnly */];\r\n        var blkProp = flags && flags[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */];\r\n        if (!isDynamic) {\r\n            if (blkProp) {\r\n                try {\r\n                    // Attempt to mark the target as blocked from conversion\r\n                    blockDynamicConversion(target);\r\n                }\r\n                catch (e) {\r\n                    _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"Blocking\", e);\r\n                }\r\n            }\r\n            try {\r\n                // Make sure it's dynamic so that we can tag the property as per the state\r\n                _setDynamicProperty(state, target, name, target[name]);\r\n                getter = _getOwnPropGetter(target, name);\r\n            }\r\n            catch (e) {\r\n                // Unable to convert to dynamic property so just leave as non-dynamic\r\n                _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, \"State\", e);\r\n            }\r\n        }\r\n        // Assign the optional flags if true\r\n        if (inPlace) {\r\n            getter[state.rf] = inPlace;\r\n        }\r\n        if (rdOnly) {\r\n            getter[state.ro] = rdOnly;\r\n        }\r\n        if (blkProp) {\r\n            getter[state.blkVal] = true;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nexport function _makeDynamicObject(state, target, name, desc) {\r\n    try {\r\n        // Assign target with new value properties (converting into dynamic properties in the process)\r\n        objForEachKey(target, function (key, value) {\r\n            // Assign and/or make the property dynamic\r\n            _setDynamicProperty(state, target, key, value);\r\n        });\r\n        if (!target[CFG_HANDLER_LINK]) {\r\n            // Link the config back to the dynamic config details\r\n            objDefineProp(target, CFG_HANDLER_LINK, {\r\n                get: function () {\r\n                    return state.hdlr;\r\n                }\r\n            });\r\n            _patchArray(state, target, name);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Unable to convert to dynamic property so just leave as non-dynamic\r\n        _throwDynamicError((state.hdlr || {})[_DYN_LOGGER /* @min:%2elogger */], name, desc, e);\r\n    }\r\n    return target;\r\n}\r\n//# sourceMappingURL=DynamicProperty.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, createCustomError, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nvar aggregationErrorType;\r\n/**\r\n * Throws an Aggregation Error which includes all of the errors that led to this error occurring\r\n * @param message - The message describing the aggregation error (the sourceError details are added to this)\r\n * @param sourceErrors - An array of the errors that caused this situation\r\n */\r\nexport function throwAggregationError(message, sourceErrors) {\r\n    if (!aggregationErrorType) {\r\n        aggregationErrorType = createCustomError(\"AggregationError\", function (self, args) {\r\n            if (args[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                // Save the provided errors\r\n                self.errors = args[1];\r\n            }\r\n        });\r\n    }\r\n    var theMessage = message || \"One or more errors occurred.\";\r\n    arrForEach(sourceErrors, function (srcError, idx) {\r\n        theMessage += \"\\n\".concat(idx, \" > \").concat(dumpObj(srcError));\r\n    });\r\n    throw new aggregationErrorType(theMessage, sourceErrors || []);\r\n}\r\n//# sourceMappingURL=AggregationError.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dumpObj, newSymbol, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { throwAggregationError } from \"../JavaScriptSDK/AggregationError\";\r\nimport { _DYN_CANCEL, _DYN_LENGTH, _DYN_LOGGER, _DYN_PUSH, _DYN_THROW_INTERNAL } from \"../__DynamicConstants\";\r\nvar symPrefix = \"[[ai_\";\r\nvar symPostfix = \"]]\";\r\nexport function _createState(cfgHandler) {\r\n    var dynamicPropertySymbol = newSymbol(symPrefix + \"get\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReadOnly = newSymbol(symPrefix + \"ro\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyReferenced = newSymbol(symPrefix + \"rf\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyBlockValue = newSymbol(symPrefix + \"blkVal\" + cfgHandler.uid + symPostfix);\r\n    var dynamicPropertyDetail = newSymbol(symPrefix + \"dtl\" + cfgHandler.uid + symPostfix);\r\n    var _waitingHandlers = null;\r\n    var _watcherTimer = null;\r\n    var theState;\r\n    function _useHandler(activeHandler, callback) {\r\n        var prevWatcher = theState.act;\r\n        try {\r\n            theState.act = activeHandler;\r\n            if (activeHandler && activeHandler[dynamicPropertyDetail]) {\r\n                // Clear out the previously tracked details for this handler, so that access are re-evaluated\r\n                arrForEach(activeHandler[dynamicPropertyDetail], function (detail) {\r\n                    detail.clr(activeHandler);\r\n                });\r\n                activeHandler[dynamicPropertyDetail] = [];\r\n            }\r\n            callback({\r\n                cfg: cfgHandler.cfg,\r\n                set: cfgHandler.set.bind(cfgHandler),\r\n                setDf: cfgHandler.setDf.bind(cfgHandler),\r\n                ref: cfgHandler.ref.bind(cfgHandler),\r\n                rdOnly: cfgHandler.rdOnly.bind(cfgHandler)\r\n            });\r\n        }\r\n        catch (e) {\r\n            var logger = cfgHandler[_DYN_LOGGER /* @min:%2elogger */];\r\n            if (logger) {\r\n                // Don't let one individual failure break everyone\r\n                logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](1 /* eLoggingSeverity.CRITICAL */, 107 /* _eInternalMessageId.ConfigWatcherException */, dumpObj(e));\r\n            }\r\n            // Re-throw the exception so that any true \"error\" is reported back to the called\r\n            throw e;\r\n        }\r\n        finally {\r\n            theState.act = prevWatcher || null;\r\n        }\r\n    }\r\n    function _notifyWatchers() {\r\n        if (_waitingHandlers) {\r\n            var notifyHandlers = _waitingHandlers;\r\n            _waitingHandlers = null;\r\n            // Stop any timer as we are running them now anyway\r\n            _watcherTimer && _watcherTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n            _watcherTimer = null;\r\n            var watcherFailures_1 = [];\r\n            // Now run the handlers\r\n            arrForEach(notifyHandlers, function (handler) {\r\n                if (handler) {\r\n                    if (handler[dynamicPropertyDetail]) {\r\n                        arrForEach(handler[dynamicPropertyDetail], function (detail) {\r\n                            // Clear out this handler from  previously tracked details, so that access are re-evaluated\r\n                            detail.clr(handler);\r\n                        });\r\n                        handler[dynamicPropertyDetail] = null;\r\n                    }\r\n                    // The handler may have self removed as part of another handler so re-check\r\n                    if (handler.fn) {\r\n                        try {\r\n                            _useHandler(handler, handler.fn);\r\n                        }\r\n                        catch (e) {\r\n                            // Don't let a single failing watcher cause other watches to fail\r\n                            watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            // During notification we may have had additional updates -- so notify those updates as well\r\n            if (_waitingHandlers) {\r\n                try {\r\n                    _notifyWatchers();\r\n                }\r\n                catch (e) {\r\n                    watcherFailures_1[_DYN_PUSH /* @min:%2epush */](e);\r\n                }\r\n            }\r\n            if (watcherFailures_1[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                throwAggregationError(\"Watcher error(s): \", watcherFailures_1);\r\n            }\r\n        }\r\n    }\r\n    function _addWatcher(detail) {\r\n        if (detail && detail.h[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            if (!_waitingHandlers) {\r\n                _waitingHandlers = [];\r\n            }\r\n            if (!_watcherTimer) {\r\n                _watcherTimer = scheduleTimeout(function () {\r\n                    _watcherTimer = null;\r\n                    _notifyWatchers();\r\n                }, 0);\r\n            }\r\n            // Add all of the handlers for this detail (if not already present) - using normal for-loop for performance\r\n            for (var idx = 0; idx < detail.h[_DYN_LENGTH /* @min:%2elength */]; idx++) {\r\n                var handler = detail.h[idx];\r\n                // Add this handler to the collection of handlers to re-execute\r\n                if (handler && arrIndexOf(_waitingHandlers, handler) === -1) {\r\n                    _waitingHandlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function _trackHandler(handler, detail) {\r\n        if (handler) {\r\n            var details = handler[dynamicPropertyDetail] = handler[dynamicPropertyDetail] || [];\r\n            if (arrIndexOf(details, detail) === -1) {\r\n                // If this detail is not already listed as tracked then add it so that we re-evaluate it's usage\r\n                details[_DYN_PUSH /* @min:%2epush */](detail);\r\n            }\r\n        }\r\n    }\r\n    theState = {\r\n        prop: dynamicPropertySymbol,\r\n        ro: dynamicPropertyReadOnly,\r\n        rf: dynamicPropertyReferenced,\r\n        blkVal: dynamicPropertyBlockValue,\r\n        hdlr: cfgHandler,\r\n        add: _addWatcher,\r\n        notify: _notifyWatchers,\r\n        use: _useHandler,\r\n        trk: _trackHandler\r\n    };\r\n    return theState;\r\n}\r\n//# sourceMappingURL=DynamicState.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj, isUndefined, objDefine, objForEachKey } from \"@nevware21/ts-utils\";\r\nimport { createUniqueNamespace } from \"../JavaScriptSDK/DataCacheHelper\";\r\nimport { STR_NOT_DYNAMIC_ERROR } from \"../JavaScriptSDK/InternalConstants\";\r\nimport { _DYN_THROW_INTERNAL, _DYN_WARN_TO_CONSOLE, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { _applyDefaultValue } from \"./ConfigDefaults\";\r\nimport { _makeDynamicObject, _setDynamicProperty, _setDynamicPropertyState, _throwDynamicError } from \"./DynamicProperty\";\r\nimport { _createState } from \"./DynamicState\";\r\nimport { CFG_HANDLER_LINK, _cfgDeepCopy, getDynamicConfigHandler, throwInvalidAccess } from \"./DynamicSupport\";\r\n/**\r\n * Identifies a function which will be re-called whenever any of it's accessed configuration values\r\n * change.\r\n * @param configHandler - The callback that will be called for the initial request and then whenever any\r\n * accessed configuration changes are identified.\r\n */\r\nfunction _createAndUseHandler(state, configHandler) {\r\n    var handler = {\r\n        fn: configHandler,\r\n        rm: function () {\r\n            // Clear all references to the handler so it can be garbage collected\r\n            // This will also cause this handler to never get called and eventually removed\r\n            handler.fn = null;\r\n            state = null;\r\n            configHandler = null;\r\n        }\r\n    };\r\n    objDefine(handler, \"toJSON\", { v: function () { return \"WatcherHandler\" + (handler.fn ? \"\" : \"[X]\"); } });\r\n    state.use(handler, configHandler);\r\n    return handler;\r\n}\r\n/**\r\n * Creates the dynamic config handler and associates with the target config as the root object\r\n * @param target - The config that you want to be root of the dynamic config\r\n * @param inPlace - Should the passed config be converted in-place or a new proxy returned\r\n * @returns The existing dynamic handler or a new instance with the provided config values\r\n */\r\nfunction _createDynamicHandler(logger, target, inPlace) {\r\n    var dynamicHandler = getDynamicConfigHandler(target);\r\n    if (dynamicHandler) {\r\n        // The passed config is already dynamic so return it's tracker\r\n        return dynamicHandler;\r\n    }\r\n    var uid = createUniqueNamespace(\"dyncfg\", true);\r\n    var newTarget = (target && inPlace !== false) ? target : _cfgDeepCopy(target);\r\n    var theState;\r\n    function _notifyWatchers() {\r\n        theState.notify();\r\n    }\r\n    function _setValue(target, name, value) {\r\n        try {\r\n            target = _setDynamicProperty(theState, target, name, value);\r\n        }\r\n        catch (e) {\r\n            // Unable to convert to dynamic property so just leave as non-dynamic\r\n            _throwDynamicError(logger, name, \"Setting value\", e);\r\n        }\r\n        return target[name];\r\n    }\r\n    function _watch(configHandler) {\r\n        return _createAndUseHandler(theState, configHandler);\r\n    }\r\n    function _block(configHandler, allowUpdate) {\r\n        theState.use(null, function (details) {\r\n            var prevUpd = theState.upd;\r\n            try {\r\n                if (!isUndefined(allowUpdate)) {\r\n                    theState.upd = allowUpdate;\r\n                }\r\n                configHandler(details);\r\n            }\r\n            finally {\r\n                theState.upd = prevUpd;\r\n            }\r\n        });\r\n    }\r\n    function _ref(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as referenced with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[0 /* _eSetDynamicPropertyFlags.inPlace */] = true, _a))[name];\r\n    }\r\n    function _rdOnly(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[1 /* _eSetDynamicPropertyFlags.readOnly */] = true, _a))[name];\r\n    }\r\n    function _blkPropValue(target, name) {\r\n        var _a;\r\n        // Make sure it's dynamic and mark as readonly with it's current value\r\n        return _setDynamicPropertyState(theState, target, name, (_a = {}, _a[2 /* _eSetDynamicPropertyFlags.blockDynamicProperty */] = true, _a))[name];\r\n    }\r\n    function _applyDefaults(theConfig, defaultValues) {\r\n        if (defaultValues) {\r\n            // Resolve/apply the defaults\r\n            objForEachKey(defaultValues, function (name, value) {\r\n                // Sets the value and makes it dynamic (if it doesn't already exist)\r\n                _applyDefaultValue(cfgHandler, theConfig, name, value);\r\n            });\r\n        }\r\n        return theConfig;\r\n    }\r\n    var cfgHandler = {\r\n        uid: null,\r\n        cfg: newTarget,\r\n        logger: logger,\r\n        notify: _notifyWatchers,\r\n        set: _setValue,\r\n        setDf: _applyDefaults,\r\n        watch: _watch,\r\n        ref: _ref,\r\n        rdOnly: _rdOnly,\r\n        blkVal: _blkPropValue,\r\n        _block: _block\r\n    };\r\n    objDefine(cfgHandler, \"uid\", {\r\n        c: false,\r\n        e: false,\r\n        w: false,\r\n        v: uid\r\n    });\r\n    theState = _createState(cfgHandler);\r\n    // Setup tracking for all defined default keys\r\n    _makeDynamicObject(theState, newTarget, \"config\", \"Creating\");\r\n    return cfgHandler;\r\n}\r\n/**\r\n * Log an invalid access message to the console\r\n */\r\nfunction _logInvalidAccess(logger, message) {\r\n    if (logger) {\r\n        logger[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n        logger[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](2 /* eLoggingSeverity.WARNING */, 108 /* _eInternalMessageId.DynamicConfigException */, message);\r\n    }\r\n    else {\r\n        // We don't have a logger so just throw an exception\r\n        throwInvalidAccess(message);\r\n    }\r\n}\r\n/**\r\n * Create or return a dynamic version of the passed config, if it is not already dynamic\r\n * @param config - The config to be converted into a dynamic config\r\n * @param defaultConfig - The default values to apply on the config if the properties don't already exist\r\n * @param inPlace - Should the config be converted in-place into a dynamic config or a new instance returned, defaults to true\r\n * @returns The dynamic config handler for the config (whether new or existing)\r\n */\r\nexport function createDynamicConfig(config, defaultConfig, logger, inPlace) {\r\n    var dynamicHandler = _createDynamicHandler(logger, config || {}, inPlace);\r\n    if (defaultConfig) {\r\n        dynamicHandler.setDf(dynamicHandler.cfg, defaultConfig);\r\n    }\r\n    return dynamicHandler;\r\n}\r\n/**\r\n * Watch and track changes for accesses to the current config, the provided config MUST already be\r\n * a dynamic config or a child accessed via the dynamic config\r\n * @param logger - The logger instance to use if there is no existing handler\r\n * @returns A watcher handler instance that can be used to remove itself when being unloaded\r\n * @throws TypeError if the provided config is not a dynamic config instance\r\n */\r\nexport function onConfigChange(config, configHandler, logger) {\r\n    var handler = config[CFG_HANDLER_LINK] || config;\r\n    if (handler.cfg && (handler.cfg === config || handler.cfg[CFG_HANDLER_LINK] === handler)) {\r\n        return handler[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n    }\r\n    _logInvalidAccess(logger, STR_NOT_DYNAMIC_ERROR + dumpObj(config));\r\n    return createDynamicConfig(config, null, logger)[_DYN_WATCH /* @min:%2ewatch */](configHandler);\r\n}\r\n//# sourceMappingURL=DynamicConfig.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnum, createTypeMap } from \"@nevware21/ts-utils\";\r\n/**\r\n * Create an enum style object which has both the key \\=\\> value and value \\=\\> key mappings\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createEnumStyle = createEnum;\r\n/**\r\n * Create a 2 index map that maps an enum's key and value to the defined map value, X[\"key\"] \\=\\> mapValue and X[0] \\=\\> mapValue.\r\n * Generic values\r\n * - E = the const enum type (typeof eRequestHeaders);\r\n * - V = Identifies the valid values for the keys, this should include both the enum numeric and string key of the type. The\r\n * resulting \"Value\" of each entry identifies the valid values withing the assignments.\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport var createValueMap = createTypeMap;\r\n//# sourceMappingURL=EnumHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { createEnumStyle } from \"./EnumHelperFuncs\";\r\nexport var ActiveStatus = ( /* @__PURE__ */createEnumStyle({\r\n    NONE: 0 /* eActiveStatus.NONE */,\r\n    PENDING: 3 /* eActiveStatus.PENDING */,\r\n    INACTIVE: 1 /* eActiveStatus.INACTIVE */,\r\n    ACTIVE: 2 /* eActiveStatus.ACTIVE */\r\n}));\r\n//# sourceMappingURL=InitActiveStatusEnum.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { arrForEach, arrIndexOf, dumpObj, getDocument, getLazy, getNavigator, isArray, isFunction, isNullOrUndefined, isString, isTruthy, isUndefined, objForEachKey, strEndsWith, strIndexOf, strLeft, strSubstring, strTrim, utcNow } from \"@nevware21/ts-utils\";\r\nimport { cfgDfMerge } from \"../Config/ConfigDefaultHelpers\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ENABLED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PUSH, _DYN_SPLICE, _DYN_SPLIT, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getLocation, isIE } from \"./EnvUtils\";\r\nimport { getExceptionName, isNotNullOrUndefined, setValue, strContains } from \"./HelperFuncs\";\r\nimport { STR_DOMAIN, STR_EMPTY, STR_PATH, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nvar strToGMTString = \"toGMTString\";\r\nvar strToUTCString = \"toUTCString\";\r\nvar strCookie = \"cookie\";\r\nvar strExpires = \"expires\";\r\nvar strIsCookieUseDisabled = \"isCookieUseDisabled\";\r\nvar strDisableCookiesUsage = \"disableCookiesUsage\";\r\nvar strConfigCookieMgr = \"_ckMgr\";\r\nvar _supportsCookies = null;\r\nvar _allowUaSameSite = null;\r\nvar _parsedCookieValue = null;\r\nvar _doc;\r\nvar _cookieCache = {};\r\nvar _globalCookieConfig = {};\r\n// // `isCookieUseDisabled` is deprecated, so explicitly casting as a key of IConfiguration to avoid typing error\r\n// // when both isCookieUseDisabled and disableCookiesUsage are used disableCookiesUsage will take precedent, which is\r\n// // why its listed first\r\n/**\r\n * Set the supported dynamic config values as undefined (or an empty object) so that\r\n * any listeners will be informed of any changes.\r\n * Explicitly NOT including the deprecated `isCookieUseDisabled` as we don't want to support\r\n * the v1 deprecated field as dynamic for updates\r\n */\r\nvar rootDefaultConfig = (_a = {\r\n        cookieCfg: cfgDfMerge((_b = {},\r\n            _b[STR_DOMAIN] = { fb: \"cookieDomain\", dfVal: isNotNullOrUndefined },\r\n            _b.path = { fb: \"cookiePath\", dfVal: isNotNullOrUndefined },\r\n            _b.enabled = UNDEFINED_VALUE,\r\n            _b.ignoreCookies = UNDEFINED_VALUE,\r\n            _b.blockedCookies = UNDEFINED_VALUE,\r\n            _b.disableCookieDefer = false,\r\n            _b)),\r\n        cookieDomain: UNDEFINED_VALUE,\r\n        cookiePath: UNDEFINED_VALUE\r\n    },\r\n    _a[strDisableCookiesUsage] = UNDEFINED_VALUE,\r\n    _a);\r\nfunction _getDoc() {\r\n    !_doc && (_doc = getLazy(function () { return getDocument(); }));\r\n}\r\n/**\r\n * @ignore\r\n * DO NOT USE or export from the module, this is exposed as public to support backward compatibility of previous static utility methods only.\r\n * If you want to manager cookies either use the ICookieMgr available from the core instance via getCookieMgr() or create\r\n * your own instance of the CookieMgr and use that.\r\n * Using this directly for enabling / disabling cookie handling will not only affect your usage but EVERY user of cookies.\r\n * Example, if you are using a shared component that is also using Application Insights you will affect their cookie handling.\r\n * @param logger - The DiagnosticLogger to use for reporting errors.\r\n */\r\nfunction _gblCookieMgr(config, logger) {\r\n    // Stash the global instance against the BaseCookieMgr class\r\n    var inst = createCookieMgr[strConfigCookieMgr] || _globalCookieConfig[strConfigCookieMgr];\r\n    if (!inst) {\r\n        // Note: not using the getSetValue() helper as that would require always creating a temporary cookieMgr\r\n        // that ultimately is never used\r\n        inst = createCookieMgr[strConfigCookieMgr] = createCookieMgr(config, logger);\r\n        _globalCookieConfig[strConfigCookieMgr] = inst;\r\n    }\r\n    return inst;\r\n}\r\nfunction _isMgrEnabled(cookieMgr) {\r\n    if (cookieMgr) {\r\n        return cookieMgr.isEnabled();\r\n    }\r\n    return true;\r\n}\r\nfunction _isIgnoredCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.ignoreCookies)) {\r\n        return arrIndexOf(cookieMgrCfg.ignoreCookies, name) !== -1;\r\n    }\r\n    return false;\r\n}\r\nfunction _isBlockedCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.blockedCookies)) {\r\n        if (arrIndexOf(cookieMgrCfg.blockedCookies, name) !== -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return _isIgnoredCookie(cookieMgrCfg, name);\r\n}\r\nfunction _isCfgEnabled(rootConfig, cookieMgrConfig) {\r\n    var isCfgEnabled = cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */];\r\n    if (isNullOrUndefined(isCfgEnabled)) {\r\n        // Set the enabled from the provided setting or the legacy root values\r\n        var cookieEnabled = void 0;\r\n        // This field is deprecated and dynamic updates will not be fully supported\r\n        if (!isUndefined(rootConfig[strIsCookieUseDisabled])) {\r\n            cookieEnabled = !rootConfig[strIsCookieUseDisabled];\r\n        }\r\n        // If this value is defined it takes precedent over the above\r\n        if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n            cookieEnabled = !rootConfig[strDisableCookiesUsage];\r\n        }\r\n        // Not setting the cookieMgrConfig.enabled as that will update (set) the global dynamic config\r\n        // So future \"updates\" then may not be as expected\r\n        isCfgEnabled = cookieEnabled;\r\n    }\r\n    return isCfgEnabled;\r\n}\r\n/**\r\n * Helper to return the ICookieMgr from the core (if not null/undefined) or a default implementation\r\n * associated with the configuration or a legacy default.\r\n * @param core - The AppInsightsCore instance to get the cookie manager from\r\n * @param config - The config to use if the core is not available\r\n * @returns\r\n */\r\nexport function safeGetCookieMgr(core, config) {\r\n    var cookieMgr;\r\n    if (core) {\r\n        // Always returns an instance\r\n        cookieMgr = core.getCookieMgr();\r\n    }\r\n    else if (config) {\r\n        var cookieCfg = config.cookieCfg;\r\n        if (cookieCfg && cookieCfg[strConfigCookieMgr]) {\r\n            cookieMgr = cookieCfg[strConfigCookieMgr];\r\n        }\r\n        else {\r\n            cookieMgr = createCookieMgr(config);\r\n        }\r\n    }\r\n    if (!cookieMgr) {\r\n        // Get or initialize the default global (legacy) cookie manager if we couldn't find one\r\n        cookieMgr = _gblCookieMgr(config, (core || {})[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    return cookieMgr;\r\n}\r\nexport function createCookieMgr(rootConfig, logger) {\r\n    var cookieMgrConfig;\r\n    var _path;\r\n    var _domain;\r\n    var unloadHandler;\r\n    // Explicitly checking against false, so that setting to undefined will === true\r\n    var _enabled;\r\n    var _getCookieFn;\r\n    var _setCookieFn;\r\n    var _delCookieFn;\r\n    // Buffer for storing cookie operations when cookies are disabled\r\n    // null = deferral disabled, array = deferral enabled with pending operations\r\n    var _pendingCookies = [];\r\n    // Helper function to format deletion cookie value\r\n    function _formatDeletionValue(path) {\r\n        var _a;\r\n        var values = (_a = {},\r\n            _a[STR_PATH] = path ? path : \"/\",\r\n            _a[strExpires] = \"Thu, 01 Jan 1970 00:00:01 GMT\",\r\n            _a);\r\n        if (!isIE()) {\r\n            // Set max age to expire now\r\n            values[\"max-age\"] = \"0\";\r\n        }\r\n        return _formatCookieValue(STR_EMPTY, values);\r\n    }\r\n    // Helper function to format a cookie value with all attributes\r\n    function _formatSetCookieValue(value, maxAgeSec, domain, path) {\r\n        var values = {};\r\n        var theValue = strTrim(value || STR_EMPTY);\r\n        var idx = strIndexOf(theValue, \";\");\r\n        if (idx !== -1) {\r\n            theValue = strTrim(strLeft(value, idx));\r\n            values = _extractParts(strSubstring(value, idx + 1));\r\n        }\r\n        // Only update domain if not already present (isUndefined) and the value is truthy (not null, undefined or empty string)\r\n        setValue(values, STR_DOMAIN, domain || _domain, isTruthy, isUndefined);\r\n        if (!isNullOrUndefined(maxAgeSec)) {\r\n            var _isIE = isIE();\r\n            if (isUndefined(values[strExpires])) {\r\n                var nowMs = utcNow();\r\n                // Only add expires if not already present\r\n                var expireMs = nowMs + (maxAgeSec * 1000);\r\n                // Sanity check, if zero or -ve then ignore\r\n                if (expireMs > 0) {\r\n                    var expiry = new Date();\r\n                    expiry.setTime(expireMs);\r\n                    setValue(values, strExpires, _formatDate(expiry, !_isIE ? strToUTCString : strToGMTString) || _formatDate(expiry, _isIE ? strToGMTString : strToUTCString) || STR_EMPTY, isTruthy);\r\n                }\r\n            }\r\n            if (!_isIE) {\r\n                // Only replace if not already present\r\n                setValue(values, \"max-age\", STR_EMPTY + maxAgeSec, null, isUndefined);\r\n            }\r\n        }\r\n        var location = getLocation();\r\n        if (location && location.protocol === \"https:\") {\r\n            setValue(values, \"secure\", null, null, isUndefined);\r\n            // Only set same site if not also secure\r\n            if (_allowUaSameSite === null) {\r\n                _allowUaSameSite = !uaDisallowsSameSiteNone((getNavigator() || {})[_DYN_USER_AGENT /* @min:%2euserAgent */]);\r\n            }\r\n            if (_allowUaSameSite) {\r\n                setValue(values, \"SameSite\", \"None\", null, isUndefined);\r\n            }\r\n        }\r\n        setValue(values, STR_PATH, path || _path, null, isUndefined);\r\n        return _formatCookieValue(theValue, values);\r\n    }\r\n    // Helper function to remove any existing pending operations for a cookie name\r\n    function _removePendingCookie(name) {\r\n        if (_pendingCookies) {\r\n            // Remove all existing entries for this cookie name (iterate backwards to handle multiple entries safely)\r\n            for (var i = _pendingCookies[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n                if (_pendingCookies[i].n === name) {\r\n                    _pendingCookies[_DYN_SPLICE /* @min:%2esplice */](i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Helper function to flush pending cookies when cookies become enabled\r\n    function _flushPendingCookies() {\r\n        if (areCookiesSupported(logger) && _pendingCookies) {\r\n            // Process all pending cookie operations in order\r\n            arrForEach(_pendingCookies, function (pendingData) {\r\n                if (!_isBlockedCookie(cookieMgrConfig, pendingData.n)) {\r\n                    if (pendingData.o === 0 /* ePendingOp.Set */) {\r\n                        // Apply the cached cookie value directly\r\n                        _setCookieFn(pendingData.n, pendingData.v);\r\n                    }\r\n                    else if (pendingData.o === 1 /* ePendingOp.Purge */) {\r\n                        // Apply the cached deletion\r\n                        _delCookieFn(pendingData.n, pendingData.v);\r\n                    }\r\n                }\r\n            });\r\n            // Clear the cache after flushing\r\n            _pendingCookies = [];\r\n        }\r\n    }\r\n    // Make sure the root config is dynamic as it may be the global config\r\n    rootConfig = createDynamicConfig(rootConfig || _globalCookieConfig, null, logger).cfg;\r\n    // Will get recalled if the referenced configuration is changed\r\n    unloadHandler = onConfigChange(rootConfig, function (details) {\r\n        // Make sure the root config has all of the the defaults to the root config to ensure they are dynamic\r\n        details.setDf(details.cfg, rootDefaultConfig);\r\n        // Create and apply the defaults to the cookieCfg element\r\n        cookieMgrConfig = details.ref(details.cfg, \"cookieCfg\"); // details.setDf(details.cfg.cookieCfg, defaultConfig);\r\n        _path = cookieMgrConfig[STR_PATH /* @min:%2epath */] || \"/\";\r\n        _domain = cookieMgrConfig[STR_DOMAIN /* @min:%2edomain */];\r\n        // Handle deferral state changes based on disableCookieDefer setting\r\n        if (cookieMgrConfig.disableCookieDefer) {\r\n            // When deferral is disabled, set to null to disable any deferral behavior\r\n            // All pending operations are dropped\r\n            _pendingCookies = null;\r\n        }\r\n        else if (_pendingCookies === null) {\r\n            // When deferral is enabled and was previously disabled, initialize empty buffer\r\n            _pendingCookies = [];\r\n        }\r\n        // Check if enabled state is changing\r\n        var wasEnabled = _enabled;\r\n        // Explicitly checking against false, so that setting to undefined will === true\r\n        _enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false;\r\n        _getCookieFn = cookieMgrConfig.getCookie || _getCookieValue;\r\n        _setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n        _delCookieFn = cookieMgrConfig.delCookie || _setCookieValue;\r\n        // If cookies were just enabled via config change and we have pending cookies, flush them\r\n        if (!wasEnabled && _enabled && _pendingCookies) {\r\n            _flushPendingCookies();\r\n        }\r\n    }, logger);\r\n    var cookieMgr = {\r\n        isEnabled: function () {\r\n            var enabled = _isCfgEnabled(rootConfig, cookieMgrConfig) !== false && _enabled && areCookiesSupported(logger);\r\n            // Using an indirect lookup for any global cookie manager to support tree shaking for SDK's\r\n            // that don't use the \"applicationinsights-core\" version of the default cookie function\r\n            var gblManager = _globalCookieConfig[strConfigCookieMgr];\r\n            if (enabled && gblManager && cookieMgr !== gblManager) {\r\n                // Make sure the GlobalCookie Manager instance (if not this instance) is also enabled.\r\n                // As the global (deprecated) functions may have been called (for backward compatibility)\r\n                enabled = _isMgrEnabled(gblManager);\r\n            }\r\n            return enabled;\r\n        },\r\n        setEnabled: function (value) {\r\n            // Change the default config and allow the asynchronous dynamic config logic\r\n            // to process all of the changes at once (like handling change to the enabled and\r\n            // disabling caching at the same time)\r\n            cookieMgrConfig[_DYN_ENABLED /* @min:%2eenabled */] = value;\r\n            // If this value is defined someone else might be listening to it so also update it,\r\n            // this also handles the edge case if the default above is not dynamic\r\n            if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n                rootConfig[strDisableCookiesUsage] = !value;\r\n            }\r\n        },\r\n        set: function (name, value, maxAgeSec, domain, path) {\r\n            var result = false;\r\n            var isBlocked = _isBlockedCookie(cookieMgrConfig, name);\r\n            if (!isBlocked) {\r\n                var cookieValue = _formatSetCookieValue(value, maxAgeSec, domain, path);\r\n                if (_isMgrEnabled(cookieMgr)) {\r\n                    _setCookieFn(name, cookieValue);\r\n                    result = true;\r\n                }\r\n                else if (_pendingCookies) {\r\n                    // Defer the fully formatted cookie value if cookies are disabled and deferral is enabled\r\n                    // Remove any previous operation for this cookie name (latest operation wins)\r\n                    _removePendingCookie(name);\r\n                    // Append new operation to the array\r\n                    _pendingCookies[_DYN_PUSH /* @min:%2epush */]({\r\n                        n: name,\r\n                        o: 0 /* ePendingOp.Set */,\r\n                        v: cookieValue\r\n                    });\r\n                    result = true; // Return true to indicate the operation was \"successful\" (deferred)\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n        get: function (name) {\r\n            var value = STR_EMPTY;\r\n            var isIgnored = _isIgnoredCookie(cookieMgrConfig, name);\r\n            if (!isIgnored) {\r\n                if (_isMgrEnabled(cookieMgr)) {\r\n                    value = _getCookieFn(name);\r\n                }\r\n                else if (_pendingCookies) {\r\n                    // Search for the most recent operation for this cookie (search backwards through array)\r\n                    for (var i = _pendingCookies[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n                        var pendingData = _pendingCookies[i];\r\n                        if (pendingData.n === name) {\r\n                            // Found the most recent operation for this cookie name\r\n                            if (pendingData.o === 0 /* ePendingOp.Set */) {\r\n                                // Return deferred value if it was a set operation\r\n                                // Extract the value part from the formatted cookie string (before first semicolon)\r\n                                var cookieValue = pendingData.v;\r\n                                var idx = strIndexOf(cookieValue, \";\");\r\n                                value = idx !== -1 ? strTrim(strLeft(cookieValue, idx)) : strTrim(cookieValue);\r\n                            }\r\n                            // If it was a Purge operation, value remains empty (STR_EMPTY)\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n        del: function (name, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr)) {\r\n                // Only remove the cookie if the manager and cookie support has not been disabled\r\n                result = cookieMgr.purge(name, path);\r\n            }\r\n            else if (_pendingCookies) {\r\n                // Defer the deletion operation when cookies are disabled and deferral is enabled\r\n                // Remove any previous operation for this cookie name (latest operation wins)\r\n                _removePendingCookie(name);\r\n                // Append new deletion operation to the array\r\n                _pendingCookies[_DYN_PUSH /* @min:%2epush */]({\r\n                    n: name,\r\n                    o: 1 /* ePendingOp.Purge */,\r\n                    v: _formatDeletionValue(path)\r\n                });\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        purge: function (name, path) {\r\n            var result = false;\r\n            if (areCookiesSupported(logger)) {\r\n                // Setting the expiration date in the past immediately removes the cookie\r\n                _delCookieFn(name, _formatDeletionValue(path));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        unload: function (isAsync) {\r\n            unloadHandler && unloadHandler.rm();\r\n            unloadHandler = null;\r\n            // Clear any pending cookies on unload\r\n            _pendingCookies = null;\r\n        }\r\n    };\r\n    // Associated this cookie manager with the config\r\n    cookieMgr[strConfigCookieMgr] = cookieMgr;\r\n    return cookieMgr;\r\n}\r\n/*\r\n* Helper method to tell if document.cookie object is supported by the runtime\r\n*/\r\nexport function areCookiesSupported(logger) {\r\n    if (_supportsCookies === null) {\r\n        _supportsCookies = false;\r\n        !_doc && _getDoc();\r\n        try {\r\n            var doc = _doc.v || {};\r\n            _supportsCookies = doc[strCookie] !== undefined;\r\n        }\r\n        catch (e) {\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 68 /* _eInternalMessageId.CannotAccessCookie */, \"Cannot access document.cookie - \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return _supportsCookies;\r\n}\r\nfunction _extractParts(theValue) {\r\n    var values = {};\r\n    if (theValue && theValue[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var parts = strTrim(theValue)[_DYN_SPLIT /* @min:%2esplit */](\";\");\r\n        arrForEach(parts, function (thePart) {\r\n            thePart = strTrim(thePart || STR_EMPTY);\r\n            if (thePart) {\r\n                var idx = strIndexOf(thePart, \"=\");\r\n                if (idx === -1) {\r\n                    values[thePart] = null;\r\n                }\r\n                else {\r\n                    values[strTrim(strLeft(thePart, idx))] = strTrim(strSubstring(thePart, idx + 1));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return values;\r\n}\r\nfunction _formatDate(theDate, func) {\r\n    if (isFunction(theDate[func])) {\r\n        return theDate[func]();\r\n    }\r\n    return null;\r\n}\r\nfunction _formatCookieValue(value, values) {\r\n    var cookieValue = value || STR_EMPTY;\r\n    objForEachKey(values, function (name, theValue) {\r\n        cookieValue += \"; \" + name + (!isNullOrUndefined(theValue) ? \"=\" + theValue : STR_EMPTY);\r\n    });\r\n    return cookieValue;\r\n}\r\nfunction _getCookieValue(name) {\r\n    var cookieValue = STR_EMPTY;\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        var theCookie = _doc.v[strCookie] || STR_EMPTY;\r\n        if (_parsedCookieValue !== theCookie) {\r\n            _cookieCache = _extractParts(theCookie);\r\n            _parsedCookieValue = theCookie;\r\n        }\r\n        cookieValue = strTrim(_cookieCache[name] || STR_EMPTY);\r\n    }\r\n    return cookieValue;\r\n}\r\nfunction _setCookieValue(name, cookieValue) {\r\n    !_doc && _getDoc();\r\n    if (_doc.v) {\r\n        _doc.v[strCookie] = name + \"=\" + cookieValue;\r\n    }\r\n}\r\nexport function uaDisallowsSameSiteNone(userAgent) {\r\n    if (!isString(userAgent)) {\r\n        return false;\r\n    }\r\n    // Cover all iOS based browsers here. This includes:\r\n    // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n    // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n    if (strContains(userAgent, \"CPU iPhone OS 12\") || strContains(userAgent, \"iPad; CPU OS 12\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n    // - Safari on Mac OS X\r\n    // This does not include:\r\n    // - Internal browser on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strContains(userAgent, \"Version/\") && strContains(userAgent, \"Safari\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n    // - Internal browser on Mac OS X\r\n    // This does not include:\r\n    // - Safari on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strEndsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n        return true;\r\n    }\r\n    // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n    // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n    // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n    if (strContains(userAgent, \"Chrome/5\") || strContains(userAgent, \"Chrome/6\")) {\r\n        return true;\r\n    }\r\n    // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n    // that don't specify their Chrome version as lacking support for SameSite=None.\r\n    if (strContains(userAgent, \"UnrealEngine\") && !strContains(userAgent, \"Chrome\")) {\r\n        return true;\r\n    }\r\n    // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n    // NB: this rule isn't complete - you need regex to make a complete rule.\r\n    // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n    if (strContains(userAgent, \"UCBrowser/12\") || strContains(userAgent, \"UCBrowser/11\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=CookieMgr.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createAllPromise, createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, arrIndexOf, objDefine, safe, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_DATA, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SPLICE, _DYN_UNLOAD, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_OFFLINE_DROP, STR_OFFLINE_SENT, STR_OFFLINE_STORE, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar defaultValues = {\r\n    perfEvtsSendAll: false\r\n};\r\nfunction _runScheduledListeners(asyncNotifications) {\r\n    asyncNotifications.h = null;\r\n    var callbacks = asyncNotifications.cb;\r\n    asyncNotifications.cb = [];\r\n    arrForEach(callbacks, function (cb) {\r\n        // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n        safe(cb.fn, [cb.arg]);\r\n    });\r\n}\r\n// This function is used to combine the logic of running the listeners and handling the async notifications so that they don't\r\n// create multiple timers if there are multiple async listeners.\r\nfunction _runListeners(listeners, name, asyncNotifications, callback) {\r\n    arrForEach(listeners, function (listener) {\r\n        if (listener && listener[name]) {\r\n            if (asyncNotifications) {\r\n                // Schedule the callback to be called after the current call stack has cleared.\r\n                asyncNotifications.cb[_DYN_PUSH /* @min:%2epush */]({\r\n                    fn: callback,\r\n                    arg: listener\r\n                });\r\n                asyncNotifications.h = asyncNotifications.h || scheduleTimeout(_runScheduledListeners, 0, asyncNotifications);\r\n            }\r\n            else {\r\n                // Run the listener in a try-catch to ensure that a single listener failing doesn't prevent the others from running\r\n                safe(callback, [listener]);\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Class to manage sending notifications to all the listeners.\r\n */\r\nvar NotificationManager = /** @class */ (function () {\r\n    function NotificationManager(config) {\r\n        this.listeners = [];\r\n        var perfEvtsSendAll;\r\n        var unloadHandler;\r\n        var _listeners = [];\r\n        var _asyncNotifications = {\r\n            h: null,\r\n            cb: []\r\n        };\r\n        var cfgHandler = createDynamicConfig(config, defaultValues);\r\n        unloadHandler = cfgHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n            perfEvtsSendAll = !!details.cfg.perfEvtsSendAll;\r\n        });\r\n        dynamicProto(NotificationManager, this, function (_self) {\r\n            objDefine(_self, \"listeners\", {\r\n                g: function () { return _listeners; }\r\n            });\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _listeners[_DYN_PUSH /* @min:%2epush */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - AWTNotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                var index = arrIndexOf(_listeners, listener);\r\n                while (index > -1) {\r\n                    _listeners[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                    index = arrIndexOf(_listeners, listener);\r\n                }\r\n            };\r\n            /**\r\n             * Notification for events sent.\r\n             * @param events - The array of events that have been sent.\r\n             */\r\n            _self[STR_EVENTS_SENT /* @min:%2eeventsSent */] = function (events) {\r\n                _runListeners(_listeners, STR_EVENTS_SENT, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_SENT /* @min:%2eeventsSent */](events);\r\n                });\r\n            };\r\n            /**\r\n             * Notification for events being discarded.\r\n             * @param events - The array of events that have been discarded by the SDK.\r\n             * @param reason - The reason for which the SDK discarded the events. The EventsDiscardedReason\r\n             * constant should be used to check the different values.\r\n             * @param sendType - [Optional] The send type used when the events were discarded.\r\n             */\r\n            _self[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */] = function (events, reason, sendType) {\r\n                _runListeners(_listeners, STR_EVENTS_DISCARDED, _asyncNotifications, function (listener) {\r\n                    listener[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */](events, reason, sendType);\r\n                });\r\n            };\r\n            /**\r\n             * [Optional] A function called when the events have been requested to be sent to the sever.\r\n             * @param sendReason - The reason why the event batch is being sent.\r\n             * @param isAsync - A flag which identifies whether the requests are being sent in an async or sync manner.\r\n             */\r\n            _self[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */] = function (sendReason, isAsync) {\r\n                _runListeners(_listeners, STR_EVENTS_SEND_REQUEST, isAsync ? _asyncNotifications : null, function (listener) {\r\n                    listener[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendReason, isAsync);\r\n                });\r\n            };\r\n            _self[STR_PERF_EVENT /* @min:%2eperfEvent */] = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    // Send all events or only parent events\r\n                    if (perfEvtsSendAll || !perfEvent[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */]()) {\r\n                        _runListeners(_listeners, STR_PERF_EVENT, null, function (listener) {\r\n                            if (perfEvent.isAsync) {\r\n                                scheduleTimeout(function () { return listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent); }, 0);\r\n                            }\r\n                            else {\r\n                                listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */] = function (events) {\r\n                if (events && events[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_STORE, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_STORE /* @min:%2eofflineEventsStored */](events);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */] = function (batch) {\r\n                if (batch && batch[_DYN_DATA /* @min:%2edata */]) {\r\n                    _runListeners(_listeners, STR_OFFLINE_SENT, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_SENT /* @min:%2eofflineBatchSent */](batch);\r\n                    });\r\n                }\r\n            };\r\n            _self[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */] = function (cnt, reason) {\r\n                if (cnt > 0) {\r\n                    var rn_1 = reason || 0; // default is unknown\r\n                    _runListeners(_listeners, STR_OFFLINE_DROP, _asyncNotifications, function (listener) {\r\n                        listener[STR_OFFLINE_DROP /* @min:%2eofflineBatchDrop */](cnt, rn_1);\r\n                    });\r\n                }\r\n            };\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                var _finishUnload = function () {\r\n                    unloadHandler && unloadHandler.rm();\r\n                    unloadHandler = null;\r\n                    _listeners = [];\r\n                    // Clear any async listener\r\n                    _asyncNotifications.h && _asyncNotifications.h[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                    _asyncNotifications.h = null;\r\n                    _asyncNotifications.cb = [];\r\n                };\r\n                var waiting;\r\n                _runListeners(_listeners, \"unload\", null, function (listener) {\r\n                    var asyncUnload = listener[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n                    if (asyncUnload) {\r\n                        if (!waiting) {\r\n                            waiting = [];\r\n                        }\r\n                        waiting[_DYN_PUSH /* @min:%2epush */](asyncUnload);\r\n                    }\r\n                });\r\n                if (waiting) {\r\n                    return createPromise(function (resolve) {\r\n                        return doAwaitResponse(createAllPromise(waiting), function () {\r\n                            _finishUnload();\r\n                            resolve();\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    _finishUnload();\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for NotificationManager.prototype.addNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.removeNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.eventsSent.\r\n// Removed Stub for NotificationManager.prototype.eventsDiscarded.\r\n// Removed Stub for NotificationManager.prototype.eventsSendRequest.\r\n// Removed Stub for NotificationManager.prototype.perfEvent.\r\n// Removed Stub for NotificationManager.prototype.unload.\r\n// Removed Stub for NotificationManager.prototype.offlineEventsStored.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchSent.\r\n// Removed Stub for NotificationManager.prototype.offlineBatchDrop.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    NotificationManager.__ieDyn=1;\n\n    return NotificationManager;\r\n}());\r\nexport { NotificationManager };\r\n//# sourceMappingURL=NotificationManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar _a;\r\nimport { __spreadArrayFn as __spreadArray } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, createSyncAllSettledPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrAppend, arrForEach, arrIndexOf, createTimeout, deepExtend, hasDocument, isFunction, isNullOrUndefined, isPlainObject, isPromiseLike, objDeepFreeze, objDefine, objForEachKey, objFreeze, objHasOwn, scheduleTimeout, throwError } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { ActiveStatus } from \"../JavaScriptSDK.Enums/InitActiveStatusEnum\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CANCEL, _DYN_CREATE_NEW, _DYN_ENABLED, _DYN_GET_NOTIFY_MGR, _DYN_GET_PLUGIN, _DYN_GET_PROCESS_TEL_CONT2, _DYN_IDENTIFIER, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_NAME, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_0, _DYN_SPLICE, _DYN_STOP_POLLING_INTERNA3, _DYN_TEARDOWN, _DYN_UNLOAD, _DYN_VALUE, _DYN_VERSION, _DYN_WATCH } from \"../__DynamicConstants\";\r\nimport { doUnloadAll, runTargetUnload } from \"./AsyncUtils\";\r\nimport { ChannelControllerPriority } from \"./Constants\";\r\nimport { createCookieMgr } from \"./CookieMgr\";\r\nimport { createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDebugListener } from \"./DbgExtensionUtils\";\r\nimport { DiagnosticLogger, _InternalLogMessage, _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getSetValue, isNotNullOrUndefined, proxyFunctionAs, proxyFunctions, toISOString } from \"./HelperFuncs\";\r\nimport { STR_CHANNELS, STR_CORE, STR_CREATE_PERF_MGR, STR_DISABLED, STR_EMPTY, STR_EVENTS_DISCARDED, STR_EXTENSIONS, STR_EXTENSION_CONFIG, STR_GET_PERF_MGR, STR_PRIORITY, UNDEFINED_VALUE } from \"./InternalConstants\";\r\nimport { NotificationManager } from \"./NotificationManager\";\r\nimport { PerfManager, doPerf, getGblPerfMgr } from \"./PerfManager\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { _getPluginState, createDistributedTraceContext, initializePlugins, sortPlugins } from \"./TelemetryHelpers\";\r\nimport { TelemetryInitializerPlugin } from \"./TelemetryInitializerPlugin\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\n// import { IStatsBeat, IStatsBeatConfig, IStatsBeatState } from \"../JavaScriptSDK.Interfaces/IStatsBeat\";\r\n// import { IStatsMgr } from \"../JavaScriptSDK.Interfaces/IStatsMgr\";\r\nvar strValidationError = \"Plugins must provide initialize method\";\r\nvar strNotificationManager = \"_notificationManager\";\r\nvar strSdkUnloadingError = \"SDK is still unloading...\";\r\nvar strSdkNotInitialized = \"SDK is not initialized\";\r\nvar maxInitQueueSize = 100;\r\nvar maxInitTimeout = 50000;\r\n// const strPluginUnloadFailed = \"Failed to unload plugin\";\r\n// /**\r\n//  * Default StatsBeatMgr configuration\r\n//  * @internal\r\n//  */\r\n// const defaultStatsCfg: IConfigDefaults<IStatsBeatConfig> = objDeepFreeze({\r\n//     shrtInt: UNDEFINED_VALUE,\r\n//     endCfg: cfgDfMerge([])\r\n// });\r\n// /**\r\n//  * Default SDK initialization configuration\r\n//  * @internal\r\n//  */\r\n// const defaultSdkConfig: IConfigDefaults<IInternalSdkConfiguration> = objDeepFreeze({\r\n//     stats: { rdOnly: true, mrg: true, v: defaultStatsCfg }\r\n// });\r\n/**\r\n * The default settings for the config.\r\n * WE MUST include all defaults here to ensure that the config is created with all of the properties\r\n * defined as dynamic.\r\n */\r\nvar defaultConfig = objDeepFreeze((_a = {\r\n        cookieCfg: {}\r\n    },\r\n    _a[STR_EXTENSIONS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_CHANNELS] = { rdOnly: true, ref: true, v: [] },\r\n    _a[STR_EXTENSION_CONFIG] = { ref: true, v: {} },\r\n    _a[STR_CREATE_PERF_MGR] = UNDEFINED_VALUE,\r\n    _a.loggingLevelConsole = 0 /* eLoggingSeverity.DISABLED */,\r\n    _a.diagnosticLogInterval = UNDEFINED_VALUE,\r\n    _a));\r\n/**\r\n * Helper to create the default performance manager\r\n * @param core - The AppInsightsCore instance\r\n * @param notificationMgr - The notification manager\r\n */\r\nfunction _createPerfManager(core, notificationMgr) {\r\n    return new PerfManager(notificationMgr);\r\n}\r\nfunction _validateExtensions(logger, channelPriority, allExtensions) {\r\n    // Concat all available extensions\r\n    var coreExtensions = [];\r\n    var channels = [];\r\n    // Check if any two extensions have the same priority, then warn to console\r\n    // And extract the local extensions from the\r\n    var extPriorities = {};\r\n    // Extension validation\r\n    arrForEach(allExtensions, function (ext) {\r\n        // Check for ext.initialize\r\n        if (isNullOrUndefined(ext) || isNullOrUndefined(ext[_DYN_INITIALIZE /* @min:%2einitialize */])) {\r\n            throwError(strValidationError);\r\n        }\r\n        var extPriority = ext[STR_PRIORITY /* @min:%2epriority */];\r\n        var identifier = ext[_DYN_IDENTIFIER /* @min:%2eidentifier */];\r\n        if (ext && extPriority) {\r\n            if (!isNullOrUndefined(extPriorities[extPriority])) {\r\n                _warnToConsole(logger, \"Two extensions have same priority #\" + extPriority + \" - \" + extPriorities[extPriority] + \", \" + identifier);\r\n            }\r\n            else {\r\n                // set a value\r\n                extPriorities[extPriority] = identifier;\r\n            }\r\n        }\r\n        // Split extensions to core and channels\r\n        if (!extPriority || extPriority < channelPriority) {\r\n            // Add to core extension that will be managed by AppInsightsCore\r\n            coreExtensions[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n        else {\r\n            channels[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n    });\r\n    return {\r\n        core: coreExtensions,\r\n        channels: channels\r\n    };\r\n}\r\nfunction _isPluginPresent(thePlugin, plugins) {\r\n    var exists = false;\r\n    arrForEach(plugins, function (plugin) {\r\n        if (plugin === thePlugin) {\r\n            exists = true;\r\n            return -1;\r\n        }\r\n    });\r\n    return exists;\r\n}\r\nfunction _deepMergeConfig(details, target, newValues, merge) {\r\n    // Lets assign the new values to the existing config\r\n    if (newValues) {\r\n        objForEachKey(newValues, function (key, value) {\r\n            if (merge) {\r\n                if (isPlainObject(value) && isPlainObject(target[key])) {\r\n                    // The target is an object and it has a value\r\n                    _deepMergeConfig(details, target[key], value, merge);\r\n                }\r\n            }\r\n            if (merge && isPlainObject(value) && isPlainObject(target[key])) {\r\n                // The target is an object and it has a value\r\n                _deepMergeConfig(details, target[key], value, merge);\r\n            }\r\n            else {\r\n                // Just Assign (replace) and/or make the property dynamic\r\n                details.set(target, key, value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _findWatcher(listeners, newWatcher) {\r\n    var theListener = null;\r\n    var idx = -1;\r\n    arrForEach(listeners, function (listener, lp) {\r\n        if (listener.w === newWatcher) {\r\n            theListener = listener;\r\n            idx = lp;\r\n            return -1;\r\n        }\r\n    });\r\n    return { i: idx, l: theListener };\r\n}\r\nfunction _addDelayedCfgListener(listeners, newWatcher) {\r\n    var theListener = _findWatcher(listeners, newWatcher).l;\r\n    if (!theListener) {\r\n        theListener = {\r\n            w: newWatcher,\r\n            rm: function () {\r\n                var fnd = _findWatcher(listeners, newWatcher);\r\n                if (fnd.i !== -1) {\r\n                    listeners[_DYN_SPLICE /* @min:%2esplice */](fnd.i, 1);\r\n                }\r\n            }\r\n        };\r\n        listeners[_DYN_PUSH /* @min:%2epush */](theListener);\r\n    }\r\n    return theListener;\r\n}\r\nfunction _registerDelayedCfgListener(config, listeners, logger) {\r\n    arrForEach(listeners, function (listener) {\r\n        var unloadHdl = onConfigChange(config, listener.w, logger);\r\n        delete listener.w; // Clear the listener reference so it will get garbage collected.\r\n        // replace the remove function\r\n        listener.rm = function () {\r\n            unloadHdl.rm();\r\n        };\r\n    });\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _initDebugListener(configHandler, unloadContainer, notificationManager, debugListener) {\r\n    // Will get recalled if any referenced config values are changed\r\n    unloadContainer.add(configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n        var disableDbgExt = details.cfg.disableDbgExt;\r\n        if (disableDbgExt === true && debugListener) {\r\n            // Remove any previously loaded debug listener\r\n            notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](debugListener);\r\n            debugListener = null;\r\n        }\r\n        if (notificationManager && !debugListener && disableDbgExt !== true) {\r\n            debugListener = getDebugListener(details.cfg);\r\n            notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](debugListener);\r\n        }\r\n    }));\r\n    return debugListener;\r\n}\r\n// Moved this outside of the closure to reduce the retained memory footprint\r\nfunction _createUnloadHook(unloadHook) {\r\n    return objDefine({\r\n        rm: function () {\r\n            unloadHook.rm();\r\n        }\r\n    }, \"toJSON\", { v: function () { return \"aicore::onCfgChange<\" + JSON.stringify(unloadHook) + \">\"; } });\r\n}\r\n/**\r\n * @group Classes\r\n * @group Entrypoint\r\n */\r\nvar AppInsightsCore = /** @class */ (function () {\r\n    function AppInsightsCore() {\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _configHandler;\r\n        var _isInitialized;\r\n        var _logger;\r\n        var _eventQueue;\r\n        var _notificationManager;\r\n        // let _statsBeat: IStatsBeat | null;\r\n        // let _statsMgr: IStatsMgr | null;\r\n        var _perfManager;\r\n        var _cfgPerfManager;\r\n        var _cookieManager;\r\n        var _pluginChain;\r\n        var _configExtensions;\r\n        var _channelConfig;\r\n        var _channels;\r\n        var _isUnloading;\r\n        var _telemetryInitializerPlugin;\r\n        var _internalLogsEventName;\r\n        var _evtNamespace;\r\n        var _unloadHandlers;\r\n        var _hookContainer;\r\n        var _debugListener;\r\n        var _traceCtx;\r\n        var _instrumentationKey;\r\n        var _cfgListeners;\r\n        var _extensions;\r\n        var _pluginVersionStringArr;\r\n        var _pluginVersionString;\r\n        var _activeStatus; // to indicate if ikey or endpoint url promised is resolved or not\r\n        var _endpoint;\r\n        var _initInMemoMaxSize; // max event count limit during wait for init promises to be resolved\r\n        var _isStatusSet; // track if active status is set in case of init timeout and init promises setting the status twice\r\n        var _initTimer;\r\n        /**\r\n         * Internal log poller\r\n         */\r\n        var _internalLogPoller;\r\n        var _internalLogPollerListening;\r\n        var _forceStopInternalLogPoller;\r\n        dynamicProto(AppInsightsCore, this, function (_self) {\r\n            // Set the default values (also called during teardown)\r\n            _initDefaults();\r\n            // Special internal method to allow the unit tests and DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_extensions, _eventQueue];\r\n            };\r\n            _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () { return _isInitialized; };\r\n            // since version 3.3.0\r\n            _self.activeStatus = function () { return _activeStatus; };\r\n            // since version 3.3.0\r\n            // internal\r\n            _self._setPendingStatus = function () {\r\n                _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n            };\r\n            // Creating the self.initialize = ()\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                if (_isUnloading) {\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                // Make sure core is only initialized once\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    throwError(\"Core cannot be initialized more than once\");\r\n                }\r\n                _configHandler = createDynamicConfig(config, defaultConfig, logger || _self[_DYN_LOGGER /* @min:%2elogger */], false);\r\n                // Re-assigning the local config property so we don't have any references to the passed value and it can be garbage collected\r\n                config = _configHandler.cfg;\r\n                // This will be \"re-run\" if the referenced config properties are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var rootCfg = details.cfg;\r\n                    _initInMemoMaxSize = rootCfg.initInMemoMaxSize || maxInitQueueSize;\r\n                    _handleIKeyEndpointPromises(rootCfg);\r\n                    // Mark the extensionConfig and all first level keys as referenced\r\n                    // This is so that calls to getExtCfg() will always return the same object\r\n                    // Even when a user may \"re-assign\" the plugin properties (or it's unloaded/reloaded)\r\n                    var extCfg = details.ref(details.cfg, STR_EXTENSION_CONFIG);\r\n                    objForEachKey(extCfg, function (key) {\r\n                        details.ref(extCfg, key);\r\n                    });\r\n                }));\r\n                _notificationManager = notificationManager;\r\n                // Initialize the debug listener outside of the closure to reduce the retained memory footprint\r\n                _debugListener = _initDebugListener(_configHandler, _hookContainer, _notificationManager && _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */](), _debugListener);\r\n                _initPerfManager();\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = logger;\r\n                var cfgExtensions = config[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                // Extension validation\r\n                _configExtensions = [];\r\n                _configExtensions[_DYN_PUSH /* @min:%2epush */].apply(_configExtensions, __spreadArray(__spreadArray([], extensions, false), cfgExtensions, false));\r\n                _channelConfig = config[STR_CHANNELS /* @min:%2echannels */];\r\n                _initPluginChain(null);\r\n                if (!_channels || _channels[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    throwError(\"No \" + STR_CHANNELS + \" available\");\r\n                }\r\n                if (_channelConfig && _channelConfig[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                    var teeController = _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */](\"TeeChannelController\");\r\n                    if (!teeController || !teeController.plugin) {\r\n                        _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"TeeChannel required\");\r\n                    }\r\n                }\r\n                _registerDelayedCfgListener(config, _cfgListeners, _logger);\r\n                _cfgListeners = null;\r\n                _isInitialized = true;\r\n                if (_activeStatus === ActiveStatus.ACTIVE) {\r\n                    _releaseQueues();\r\n                }\r\n            };\r\n            _self.getChannels = function () {\r\n                var controls = [];\r\n                if (_channels) {\r\n                    arrForEach(_channels, function (channel) {\r\n                        controls[_DYN_PUSH /* @min:%2epush */](channel);\r\n                    });\r\n                }\r\n                return objFreeze(controls);\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                doPerf(_self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */](), function () { return \"AppInsightsCore:track\"; }, function () {\r\n                    if (telemetryItem === null) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        // throw error\r\n                        throwError(\"Invalid telemetry item\");\r\n                    }\r\n                    // do basic validation before sending it through the pipeline\r\n                    if (!telemetryItem[_DYN_NAME /* @min:%2ename */] && isNullOrUndefined(telemetryItem[_DYN_NAME /* @min:%2ename */])) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        throwError(\"telemetry name required\");\r\n                    }\r\n                    // setup default iKey if not passed in\r\n                    telemetryItem.iKey = telemetryItem.iKey || _instrumentationKey;\r\n                    // add default timestamp if not passed in\r\n                    telemetryItem.time = telemetryItem.time || toISOString(new Date());\r\n                    // Common Schema 4.0\r\n                    telemetryItem.ver = telemetryItem.ver || \"4.0\";\r\n                    if (!_isUnloading && _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]() && _activeStatus === ActiveStatus.ACTIVE) {\r\n                        // Process the telemetry plugin chain\r\n                        _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](telemetryItem);\r\n                    }\r\n                    else if (_activeStatus !== ActiveStatus.INACTIVE) {\r\n                        // Queue events until all extensions are initialized\r\n                        if (_eventQueue[_DYN_LENGTH /* @min:%2elength */] <= _initInMemoMaxSize) {\r\n                            // set limit, if full, stop adding new events\r\n                            _eventQueue[_DYN_PUSH /* @min:%2epush */](telemetryItem);\r\n                        }\r\n                    }\r\n                }, function () { return ({ item: telemetryItem }); }, !(telemetryItem.sync));\r\n            };\r\n            _self[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */] = _createTelCtx;\r\n            _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */] = function () {\r\n                if (!_notificationManager) {\r\n                    _notificationManager = new NotificationManager(_configHandler.cfg);\r\n                    // For backward compatibility only\r\n                    _self[strNotificationManager] = _notificationManager;\r\n                }\r\n                return _notificationManager;\r\n            };\r\n            /**\r\n             * Adds a notification listener. The SDK calls methods on the listener when an appropriate notification is raised.\r\n             * The added plugins must raise notifications. If the plugins do not implement the notifications, then no methods will be\r\n             * called.\r\n             * @param listener - An INotificationListener object.\r\n             */\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _self.getNotifyMgr()[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param listener - INotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_0 /* @min:%2eremoveNotificationListener */](listener);\r\n                }\r\n            };\r\n            _self.getCookieMgr = function () {\r\n                if (!_cookieManager) {\r\n                    _cookieManager = createCookieMgr(_configHandler.cfg, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _cookieManager;\r\n            };\r\n            _self.setCookieMgr = function (cookieMgr) {\r\n                if (_cookieManager !== cookieMgr) {\r\n                    runTargetUnload(_cookieManager, false);\r\n                    _cookieManager = cookieMgr;\r\n                }\r\n            };\r\n            _self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */] = function () {\r\n                return _perfManager || _cfgPerfManager || getGblPerfMgr();\r\n            };\r\n            _self.setPerfMgr = function (perfMgr) {\r\n                _perfManager = perfMgr;\r\n            };\r\n            // _self.getStatsBeat = (statsBeatState: IStatsBeatState) => {\r\n            //     // create a new statsbeat if not initialize yet or the endpoint is different\r\n            //     // otherwise, return the existing one, or null\r\n            //     if (statsBeatState) {\r\n            //         if (_statsMgr && _statsMgr.enabled) {\r\n            //             if (_statsBeat && _statsBeat.endpoint !== statsBeatState.endpoint) {\r\n            //                 // Different endpoint, so unload the existing and create a new one\r\n            //                 _statsBeat.enabled = false;\r\n            //                 _statsBeat = null;\r\n            //             }\r\n            //             if (!_statsBeat) {\r\n            //                 // Create a new statsbeat instance\r\n            //                 _statsBeat = _statsMgr.newInst(statsBeatState);\r\n            //             }\r\n            //         } else if (_statsBeat) {\r\n            //             // Disable and remove any previously created statsbeat instance\r\n            //             _statsBeat.enabled = false;\r\n            //             _statsBeat = null;\r\n            //         }\r\n            //         // Return the current statsbeat instance or null if not created\r\n            //         return _statsBeat;\r\n            //     }\r\n            //     // Return null as no statsbeat state was provided\r\n            //     return null;\r\n            // };\r\n            // _self.setStatsMgr = (statsMgr: IStatsMgr) => {\r\n            //     if (_statsMgr && _statsMgr !== statsMgr) {\r\n            //         // Disable any previously created statsbeat instance\r\n            //         if (_statsBeat) {\r\n            //             _statsBeat.enabled = false;\r\n            //             _statsBeat = null;\r\n            //         }\r\n            //     }\r\n            //     _statsMgr = statsMgr;\r\n            // };\r\n            _self.eventCnt = function () {\r\n                return _eventQueue[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.releaseQueue = function () {\r\n                if (_isInitialized && _eventQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var eventQueue = _eventQueue;\r\n                    _eventQueue = [];\r\n                    if (_activeStatus === 2 /* eActiveStatus.ACTIVE */) {\r\n                        arrForEach(eventQueue, function (event) {\r\n                            event.iKey = event.iKey || _instrumentationKey;\r\n                            _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](event);\r\n                        });\r\n                    }\r\n                    else {\r\n                        // new one for msg ikey\r\n                        _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"core init status is not active\");\r\n                    }\r\n                }\r\n            };\r\n            _self.pollInternalLogs = function (eventName) {\r\n                _internalLogsEventName = eventName || null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                return _startLogPoller(true);\r\n            };\r\n            function _handleIKeyEndpointPromises(theConfig) {\r\n                // app Insights core only handle ikey and endpointurl, aisku will handle cs\r\n                // But we want to reference these config values so that if any future changes are made\r\n                // this will trigger the re-run of the watch function\r\n                // and the ikey and endpointUrl will be set to the new values\r\n                var ikey = theConfig.instrumentationKey;\r\n                var endpointUrl = theConfig.endpointUrl; // do not need to validate endpoint url, if it is null, default one will be set by sender\r\n                // Check if we are waiting for previous promises to be resolved, won't apply new changes\r\n                if (_activeStatus !== 3 /* eActiveStatus.PENDING */) {\r\n                    if (isNullOrUndefined(ikey)) {\r\n                        _instrumentationKey = null;\r\n                        // if new ikey is null, set status to be inactive, all new events will be saved in memory or dropped\r\n                        _activeStatus = ActiveStatus.INACTIVE;\r\n                        var msg = \"Please provide instrumentation key\";\r\n                        if (!_isInitialized) {\r\n                            // only throw error during initialization\r\n                            throwError(msg);\r\n                        }\r\n                        else {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, msg);\r\n                            _releaseQueues();\r\n                        }\r\n                        return;\r\n                    }\r\n                    var promises = [];\r\n                    if (isPromiseLike(ikey)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](ikey);\r\n                        _instrumentationKey = null; // reset current local ikey variable (otherwise it will always be the previous ikeys if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string\r\n                        _instrumentationKey = ikey;\r\n                    }\r\n                    if (isPromiseLike(endpointUrl)) {\r\n                        promises[_DYN_PUSH /* @min:%2epush */](endpointUrl);\r\n                        _endpoint = null; // reset current local endpoint variable (otherwise it will always be the previous urls if timeout is called before promise cb)\r\n                    }\r\n                    else {\r\n                        // string or null\r\n                        _endpoint = endpointUrl;\r\n                    }\r\n                    // at least have one promise\r\n                    if (promises[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        _waitForInitPromises(theConfig, promises);\r\n                    }\r\n                    else {\r\n                        // means no promises\r\n                        _setStatus();\r\n                    }\r\n                }\r\n            }\r\n            function _waitForInitPromises(theConfig, promises) {\r\n                // reset to false for new dynamic changes\r\n                _isStatusSet = false;\r\n                _activeStatus = 3 /* eActiveStatus.PENDING */;\r\n                var initTimeout = isNotNullOrUndefined(theConfig.initTimeOut) ? theConfig.initTimeOut : maxInitTimeout; // theConfig.initTimeOut could be 0\r\n                var allPromises = createSyncAllSettledPromise(promises);\r\n                if (_initTimer) {\r\n                    // Stop any previous timer\r\n                    _initTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                }\r\n                _initTimer = scheduleTimeout(function () {\r\n                    // set _isStatusSet to true\r\n                    // set active status\r\n                    // release queues\r\n                    _initTimer = null;\r\n                    if (!_isStatusSet) {\r\n                        _setStatus();\r\n                    }\r\n                }, initTimeout);\r\n                doAwaitResponse(allPromises, function (response) {\r\n                    try {\r\n                        if (_isStatusSet) {\r\n                            // promises take too long to resolve, ignore them\r\n                            // active status should be set by timeout already\r\n                            return;\r\n                        }\r\n                        if (!response.rejected) {\r\n                            var values = response[_DYN_VALUE /* @min:%2evalue */];\r\n                            if (values && values[_DYN_LENGTH /* @min:%2elength */]) {\r\n                                // ikey\r\n                                var ikeyRes = values[0];\r\n                                _instrumentationKey = ikeyRes && ikeyRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                // endpoint\r\n                                if (values[_DYN_LENGTH /* @min:%2elength */] > 1) {\r\n                                    var endpointRes = values[1];\r\n                                    _endpoint = endpointRes && endpointRes[_DYN_VALUE /* @min:%2evalue */];\r\n                                }\r\n                            }\r\n                            if (_instrumentationKey) {\r\n                                // if ikey is null, no need to trigger extra dynamic changes for extensions\r\n                                theConfig.instrumentationKey = _instrumentationKey; // set config.instrumentationKey for extensions to consume\r\n                                theConfig.endpointUrl = _endpoint; // set config.endpointUrl for extensions to consume\r\n                            }\r\n                        }\r\n                        // set _isStatusSet to true\r\n                        // set active status\r\n                        // release queues\r\n                        _setStatus();\r\n                    }\r\n                    catch (e) {\r\n                        if (!_isStatusSet) {\r\n                            _setStatus();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function _setStatus() {\r\n                _isStatusSet = true;\r\n                if (isNullOrUndefined(_instrumentationKey)) {\r\n                    _activeStatus = ActiveStatus.INACTIVE;\r\n                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 112 /* _eInternalMessageId.InitPromiseException */, \"ikey can't be resolved from promises\");\r\n                }\r\n                else {\r\n                    _activeStatus = ActiveStatus.ACTIVE;\r\n                }\r\n                _releaseQueues();\r\n            }\r\n            function _releaseQueues() {\r\n                if (_isInitialized) {\r\n                    _self.releaseQueue();\r\n                    _self.pollInternalLogs();\r\n                }\r\n            }\r\n            function _startLogPoller(alwaysStart) {\r\n                if ((!_internalLogPoller || !_internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */]) && !_forceStopInternalLogPoller) {\r\n                    var shouldStart = alwaysStart || (_logger && _logger.queue[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                    if (shouldStart) {\r\n                        if (!_internalLogPollerListening) {\r\n                            _internalLogPollerListening = true;\r\n                            // listen for any configuration changes so that changes to the\r\n                            // interval will cause the timer to be re-initialized\r\n                            _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                                var interval = details.cfg.diagnosticLogInterval;\r\n                                if (!interval || !(interval > 0)) {\r\n                                    interval = 10000;\r\n                                }\r\n                                var isRunning = false;\r\n                                if (_internalLogPoller) {\r\n                                    // It was already created so remember it's running and cancel\r\n                                    isRunning = _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */];\r\n                                    _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                                }\r\n                                // Create / reconfigure\r\n                                _internalLogPoller = createTimeout(_flushInternalLogs, interval);\r\n                                _internalLogPoller.unref();\r\n                                // Restart if previously running\r\n                                _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = isRunning;\r\n                            }));\r\n                        }\r\n                        _internalLogPoller[_DYN_ENABLED /* @min:%2eenabled */] = true;\r\n                    }\r\n                }\r\n                return _internalLogPoller;\r\n            }\r\n            _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */] = function () {\r\n                _forceStopInternalLogPoller = true;\r\n                _internalLogPoller && _internalLogPoller[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                _flushInternalLogs();\r\n            };\r\n            // Add addTelemetryInitializer\r\n            proxyFunctions(_self, function () { return _telemetryInitializerPlugin; }, [\"addTelemetryInitializer\"]);\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync, unloadComplete, cbTimeout) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_isInitialized) {\r\n                    // The SDK is not initialized\r\n                    throwError(strSdkNotInitialized);\r\n                }\r\n                // Check if the SDK still unloading so throw\r\n                if (_isUnloading) {\r\n                    // The SDK is already unloading\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                var unloadState = {\r\n                    reason: 50 /* TelemetryUnloadReason.SdkUnload */,\r\n                    isAsync: isAsync,\r\n                    flushComplete: false\r\n                };\r\n                var result;\r\n                if (isAsync && !unloadComplete) {\r\n                    result = createPromise(function (resolve) {\r\n                        // Set the callback to the promise resolve callback\r\n                        unloadComplete = resolve;\r\n                    });\r\n                }\r\n                var processUnloadCtx = createProcessTelemetryUnloadContext(_getPluginChain(), _self);\r\n                processUnloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                    // if (_statsBeat) {\r\n                    //     // Disable any statsbeat instance\r\n                    //     _statsBeat.enabled = false;\r\n                    //     _statsBeat = null;\r\n                    // }\r\n                    _hookContainer.run(_self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                    // Run any \"unload\" functions for the _cookieManager, _notificationManager and _logger\r\n                    doUnloadAll([_cookieManager, _notificationManager, _logger], isAsync, function () {\r\n                        _initDefaults();\r\n                        unloadComplete && unloadComplete(unloadState);\r\n                    });\r\n                }, _self);\r\n                function _doUnload(flushComplete) {\r\n                    unloadState.flushComplete = flushComplete;\r\n                    _isUnloading = true;\r\n                    // Run all of the unload handlers first (before unloading the plugins)\r\n                    _unloadHandlers.run(processUnloadCtx, unloadState);\r\n                    // Stop polling the internal logs\r\n                    _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */]();\r\n                    // Start unloading the components, from this point onwards the SDK should be considered to be in an unstable state\r\n                    processUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                _flushInternalLogs();\r\n                if (!_flushChannels(isAsync, _doUnload, 6 /* SendRequestReason.SdkUnload */, cbTimeout)) {\r\n                    _doUnload(false);\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */] = _getPlugin;\r\n            _self.addPlugin = function (plugin, replaceExisting, isAsync, addCb) {\r\n                if (!plugin) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(strValidationError);\r\n                    return;\r\n                }\r\n                var existingPlugin = _getPlugin(plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                if (existingPlugin && !replaceExisting) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(\"Plugin [\" + plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"] is already loaded!\");\r\n                    return;\r\n                }\r\n                var updateState = {\r\n                    reason: 16 /* TelemetryUpdateReason.PluginAdded */\r\n                };\r\n                function _addPlugin(removed) {\r\n                    _configExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                    updateState.added = [plugin];\r\n                    // Re-Initialize the plugin chain\r\n                    _initPluginChain(updateState);\r\n                    addCb && addCb(true);\r\n                }\r\n                if (existingPlugin) {\r\n                    var removedPlugins_1 = [existingPlugin.plugin];\r\n                    var unloadState = {\r\n                        reason: 2 /* TelemetryUnloadReason.PluginReplace */,\r\n                        isAsync: !!isAsync\r\n                    };\r\n                    _removePlugins(removedPlugins_1, unloadState, function (removed) {\r\n                        if (!removed) {\r\n                            // Previous plugin was successfully removed or was not installed\r\n                            addCb && addCb(false);\r\n                        }\r\n                        else {\r\n                            updateState.removed = removedPlugins_1;\r\n                            updateState.reason |= 32 /* TelemetryUpdateReason.PluginRemoved */;\r\n                            _addPlugin(true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    _addPlugin(false);\r\n                }\r\n            };\r\n            _self.updateCfg = function (newConfig, mergeExisting) {\r\n                if (mergeExisting === void 0) { mergeExisting = true; }\r\n                var updateState;\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    updateState = {\r\n                        reason: 1 /* TelemetryUpdateReason.ConfigurationChanged */,\r\n                        cfg: _configHandler.cfg,\r\n                        oldCfg: deepExtend({}, _configHandler.cfg),\r\n                        newConfig: deepExtend({}, newConfig),\r\n                        merge: mergeExisting\r\n                    };\r\n                    newConfig = updateState.newConfig;\r\n                    var cfg = _configHandler.cfg;\r\n                    // replace the immutable (if initialized) values\r\n                    // We don't currently allow updating the extensions and channels via the update config\r\n                    // So overwriting any user provided values to reuse the existing values\r\n                    newConfig[STR_EXTENSIONS /* @min:%2eextensions */] = cfg[STR_EXTENSIONS /* @min:%2eextensions */];\r\n                    newConfig[STR_CHANNELS /* @min:%2echannels */] = cfg[STR_CHANNELS /* @min:%2echannels */];\r\n                }\r\n                // Explicitly blocking any previous config watchers so that they don't get called because\r\n                // of this bulk update (Probably not necessary)\r\n                _configHandler._block(function (details) {\r\n                    // Lets assign the new values to the existing config either overwriting or re-assigning\r\n                    var theConfig = details.cfg;\r\n                    _deepMergeConfig(details, theConfig, newConfig, mergeExisting);\r\n                    if (!mergeExisting) {\r\n                        // Remove (unassign) the values \"missing\" from the newConfig and also not in the default config\r\n                        objForEachKey(theConfig, function (key) {\r\n                            if (!objHasOwn(newConfig, key)) {\r\n                                // Set the value to undefined\r\n                                details.set(theConfig, key, UNDEFINED_VALUE);\r\n                            }\r\n                        });\r\n                    }\r\n                    // Apply defaults to the new config\r\n                    details.setDf(theConfig, defaultConfig);\r\n                }, true);\r\n                // Now execute all of the listeners (synchronously) so they update their values immediately\r\n                _configHandler.notify();\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            };\r\n            _self.evtNamespace = function () {\r\n                return _evtNamespace;\r\n            };\r\n            _self.flush = _flushChannels;\r\n            _self.getTraceCtx = function (createNew) {\r\n                if (!_traceCtx) {\r\n                    _traceCtx = createDistributedTraceContext();\r\n                }\r\n                return _traceCtx;\r\n            };\r\n            _self.setTraceCtx = function (traceCtx) {\r\n                _traceCtx = traceCtx || null;\r\n            };\r\n            _self.addUnloadHook = _addUnloadHook;\r\n            // Create the addUnloadCb\r\n            proxyFunctionAs(_self, \"addUnloadCb\", function () { return _unloadHandlers; }, \"add\");\r\n            _self.onCfgChange = function (handler) {\r\n                var unloadHook;\r\n                if (!_isInitialized) {\r\n                    unloadHook = _addDelayedCfgListener(_cfgListeners, handler);\r\n                }\r\n                else {\r\n                    unloadHook = onConfigChange(_configHandler.cfg, handler, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _createUnloadHook(unloadHook);\r\n            };\r\n            _self.getWParam = function () {\r\n                return (hasDocument() || !!_configHandler.cfg.enableWParam) ? 0 : -1;\r\n            };\r\n            function _setPluginVersions() {\r\n                var thePlugins = {};\r\n                _pluginVersionStringArr = [];\r\n                var _addPluginVersions = function (plugins) {\r\n                    if (plugins) {\r\n                        arrForEach(plugins, function (plugin) {\r\n                            if (plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] && plugin[_DYN_VERSION /* @min:%2eversion */] && !thePlugins[plugin.identifier]) {\r\n                                var ver = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"=\" + plugin[_DYN_VERSION /* @min:%2eversion */];\r\n                                _pluginVersionStringArr[_DYN_PUSH /* @min:%2epush */](ver);\r\n                                thePlugins[plugin.identifier] = plugin;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                _addPluginVersions(_channels);\r\n                if (_channelConfig) {\r\n                    arrForEach(_channelConfig, function (channels) {\r\n                        _addPluginVersions(channels);\r\n                    });\r\n                }\r\n                _addPluginVersions(_configExtensions);\r\n            }\r\n            function _initDefaults() {\r\n                _isInitialized = false;\r\n                // Use a default logger so initialization errors are not dropped on the floor with full logging\r\n                _configHandler = createDynamicConfig({}, defaultConfig, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                // Set the logging level to critical so that any critical initialization failures are displayed on the console\r\n                _configHandler.cfg[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */] = 1 /* eLoggingSeverity.CRITICAL */;\r\n                // Define _self.config\r\n                objDefine(_self, \"config\", {\r\n                    g: function () { return _configHandler.cfg; },\r\n                    s: function (newValue) {\r\n                        _self.updateCfg(newValue, false);\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionStringArr\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionStringArr) {\r\n                            _setPluginVersions();\r\n                        }\r\n                        return _pluginVersionStringArr;\r\n                    }\r\n                });\r\n                objDefine(_self, \"pluginVersionString\", {\r\n                    g: function () {\r\n                        if (!_pluginVersionString) {\r\n                            if (!_pluginVersionStringArr) {\r\n                                _setPluginVersions();\r\n                            }\r\n                            _pluginVersionString = _pluginVersionStringArr.join(\";\");\r\n                        }\r\n                        return _pluginVersionString || STR_EMPTY;\r\n                    }\r\n                });\r\n                objDefine(_self, \"logger\", {\r\n                    g: function () {\r\n                        if (!_logger) {\r\n                            _logger = new DiagnosticLogger(_configHandler.cfg);\r\n                            _configHandler[_DYN_LOGGER /* @min:%2elogger */] = _logger;\r\n                        }\r\n                        return _logger;\r\n                    },\r\n                    s: function (newLogger) {\r\n                        _configHandler[_DYN_LOGGER /* @min:%2elogger */] = newLogger;\r\n                        if (_logger !== newLogger) {\r\n                            runTargetUnload(_logger, false);\r\n                            _logger = newLogger;\r\n                        }\r\n                    }\r\n                });\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = new DiagnosticLogger(_configHandler.cfg);\r\n                _extensions = [];\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                _telemetryInitializerPlugin = new TelemetryInitializerPlugin();\r\n                _eventQueue = [];\r\n                runTargetUnload(_notificationManager, false);\r\n                _notificationManager = null;\r\n                _perfManager = null;\r\n                // _statsBeat = null;\r\n                _cfgPerfManager = null;\r\n                runTargetUnload(_cookieManager, false);\r\n                _cookieManager = null;\r\n                _pluginChain = null;\r\n                _configExtensions = [];\r\n                _channelConfig = null;\r\n                _channels = null;\r\n                _isUnloading = false;\r\n                _internalLogsEventName = null;\r\n                _evtNamespace = createUniqueNamespace(\"AIBaseCore\", true);\r\n                _unloadHandlers = createUnloadHandlerContainer();\r\n                _traceCtx = null;\r\n                _instrumentationKey = null;\r\n                _hookContainer = createUnloadHookContainer();\r\n                _cfgListeners = [];\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                _forceStopInternalLogPoller = false;\r\n                _internalLogPoller = null;\r\n                _internalLogPollerListening = false;\r\n                _activeStatus = 0 /* eActiveStatus.NONE */; // default is None\r\n                _endpoint = null;\r\n                _initInMemoMaxSize = null;\r\n                _isStatusSet = false;\r\n                _initTimer = null;\r\n                // if (_statsBeat) {\r\n                //     // Unload and disable any statsbeat instance\r\n                //     _statsBeat.enabled = false;\r\n                // }\r\n                // _statsBeat = null;\r\n            }\r\n            function _createTelCtx() {\r\n                var theCtx = createProcessTelemetryContext(_getPluginChain(), _configHandler.cfg, _self);\r\n                theCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                return theCtx;\r\n            }\r\n            // Initialize or Re-initialize the plugins\r\n            function _initPluginChain(updateState) {\r\n                // Extension validation\r\n                var theExtensions = _validateExtensions(_self[_DYN_LOGGER /* @min:%2elogger */], ChannelControllerPriority, _configExtensions);\r\n                _pluginChain = null;\r\n                _pluginVersionString = null;\r\n                _pluginVersionStringArr = null;\r\n                // Get the primary channel queue and include as part of the normal extensions\r\n                _channels = (_channelConfig || [])[0] || [];\r\n                // Add any channels provided in the extensions and sort them\r\n                _channels = sortPlugins(arrAppend(_channels, theExtensions[STR_CHANNELS /* @min:%2echannels */]));\r\n                // Create an array of all extensions, including the _channels\r\n                var allExtensions = arrAppend(sortPlugins(theExtensions[STR_CORE /* @min:%2ecore */]), _channels);\r\n                // Required to allow plugins to call core.getPlugin() during their own initialization\r\n                _extensions = objFreeze(allExtensions);\r\n                // This has a side effect of adding the extensions passed during initialization\r\n                // into the config.extensions, so you can see all of the extensions loaded.\r\n                // This will also get updated by the addPlugin() and remove plugin code.\r\n                var cfgExtensions = _self.config[STR_EXTENSIONS /* @min:%2eextensions */] || [];\r\n                cfgExtensions.splice(0, cfgExtensions[_DYN_LENGTH /* @min:%2elength */]);\r\n                arrAppend(cfgExtensions, _extensions);\r\n                var rootCtx = _createTelCtx();\r\n                // Initializing the channels first\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    initializePlugins(rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels), allExtensions);\r\n                }\r\n                // Now initialize the normal extensions (explicitly not including the _channels as this can cause duplicate initialization)\r\n                initializePlugins(rootCtx, allExtensions);\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            }\r\n            function _getPlugin(pluginIdentifier) {\r\n                var theExt = null;\r\n                var thePlugin = null;\r\n                var channelHosts = [];\r\n                arrForEach(_extensions, function (ext) {\r\n                    if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier && ext !== _telemetryInitializerPlugin) {\r\n                        thePlugin = ext;\r\n                        return -1;\r\n                    }\r\n                    if (ext.getChannel) {\r\n                        channelHosts[_DYN_PUSH /* @min:%2epush */](ext);\r\n                    }\r\n                });\r\n                if (!thePlugin && channelHosts[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(channelHosts, function (host) {\r\n                        thePlugin = host.getChannel(pluginIdentifier);\r\n                        if (!thePlugin) {\r\n                            return -1;\r\n                        }\r\n                    });\r\n                }\r\n                if (thePlugin) {\r\n                    theExt = {\r\n                        plugin: thePlugin,\r\n                        setEnabled: function (enabled) {\r\n                            _getPluginState(thePlugin)[STR_DISABLED] = !enabled;\r\n                        },\r\n                        isEnabled: function () {\r\n                            var pluginState = _getPluginState(thePlugin);\r\n                            return !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] && !pluginState[STR_DISABLED];\r\n                        },\r\n                        remove: function (isAsync, removeCb) {\r\n                            if (isAsync === void 0) { isAsync = true; }\r\n                            var pluginsToRemove = [thePlugin];\r\n                            var unloadState = {\r\n                                reason: 1 /* TelemetryUnloadReason.PluginUnload */,\r\n                                isAsync: isAsync\r\n                            };\r\n                            _removePlugins(pluginsToRemove, unloadState, function (removed) {\r\n                                if (removed) {\r\n                                    // Re-Initialize the plugin chain\r\n                                    _initPluginChain({\r\n                                        reason: 32 /* TelemetryUpdateReason.PluginRemoved */,\r\n                                        removed: pluginsToRemove\r\n                                    });\r\n                                }\r\n                                removeCb && removeCb(removed);\r\n                            });\r\n                        }\r\n                    };\r\n                }\r\n                return theExt;\r\n            }\r\n            function _getPluginChain() {\r\n                if (!_pluginChain) {\r\n                    // copy the collection of extensions\r\n                    var extensions = (_extensions || []).slice();\r\n                    // During add / remove this may get called again, so don't read if already present\r\n                    if (arrIndexOf(extensions, _telemetryInitializerPlugin) === -1) {\r\n                        extensions[_DYN_PUSH /* @min:%2epush */](_telemetryInitializerPlugin);\r\n                    }\r\n                    _pluginChain = createTelemetryProxyChain(sortPlugins(extensions), _configHandler.cfg, _self);\r\n                }\r\n                return _pluginChain;\r\n            }\r\n            function _removePlugins(thePlugins, unloadState, removeComplete) {\r\n                if (thePlugins && thePlugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var unloadChain = createTelemetryProxyChain(thePlugins, _configHandler.cfg, _self);\r\n                    var unloadCtx = createProcessTelemetryUnloadContext(unloadChain, _self);\r\n                    unloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                        var removed = false;\r\n                        // Remove the listed config extensions\r\n                        var newConfigExtensions = [];\r\n                        arrForEach(_configExtensions, function (plugin, idx) {\r\n                            if (!_isPluginPresent(plugin, thePlugins)) {\r\n                                newConfigExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                            }\r\n                            else {\r\n                                removed = true;\r\n                            }\r\n                        });\r\n                        _configExtensions = newConfigExtensions;\r\n                        _pluginVersionString = null;\r\n                        _pluginVersionStringArr = null;\r\n                        // Re-Create the channel config\r\n                        var newChannelConfig = [];\r\n                        if (_channelConfig) {\r\n                            arrForEach(_channelConfig, function (queue, idx) {\r\n                                var newQueue = [];\r\n                                arrForEach(queue, function (channel) {\r\n                                    if (!_isPluginPresent(channel, thePlugins)) {\r\n                                        newQueue[_DYN_PUSH /* @min:%2epush */](channel);\r\n                                    }\r\n                                    else {\r\n                                        removed = true;\r\n                                    }\r\n                                });\r\n                                newChannelConfig[_DYN_PUSH /* @min:%2epush */](newQueue);\r\n                            });\r\n                            _channelConfig = newChannelConfig;\r\n                        }\r\n                        removeComplete && removeComplete(removed);\r\n                        _startLogPoller();\r\n                    });\r\n                    unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                else {\r\n                    removeComplete(false);\r\n                }\r\n            }\r\n            function _flushInternalLogs() {\r\n                if (_logger && _logger.queue) {\r\n                    var queue = _logger.queue.slice(0);\r\n                    _logger.queue[_DYN_LENGTH /* @min:%2elength */] = 0;\r\n                    arrForEach(queue, function (logMessage) {\r\n                        var item = {\r\n                            name: _internalLogsEventName ? _internalLogsEventName : \"InternalMessageId: \" + logMessage[_DYN_MESSAGE_ID /* @min:%2emessageId */],\r\n                            iKey: _instrumentationKey,\r\n                            time: toISOString(new Date()),\r\n                            baseType: _InternalLogMessage.dataType,\r\n                            baseData: { message: logMessage[_DYN_MESSAGE /* @min:%2emessage */] }\r\n                        };\r\n                        _self.track(item);\r\n                    });\r\n                }\r\n            }\r\n            function _flushChannels(isAsync, callBack, sendReason, cbTimeout) {\r\n                // Setting waiting to one so that we don't call the callBack until we finish iterating\r\n                var waiting = 1;\r\n                var doneIterating = false;\r\n                var cbTimer = null;\r\n                cbTimeout = cbTimeout || 5000;\r\n                function doCallback() {\r\n                    waiting--;\r\n                    if (doneIterating && waiting === 0) {\r\n                        cbTimer && cbTimer[_DYN_CANCEL /* @min:%2ecancel */]();\r\n                        cbTimer = null;\r\n                        callBack && callBack(doneIterating);\r\n                        callBack = null;\r\n                    }\r\n                }\r\n                if (_channels && _channels[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var flushCtx = _createTelCtx()[_DYN_CREATE_NEW /* @min:%2ecreateNew */](_channels);\r\n                    flushCtx.iterate(function (plugin) {\r\n                        if (plugin.flush) {\r\n                            waiting++;\r\n                            var handled_1 = false;\r\n                            // Not all channels will call this callback for every scenario\r\n                            if (!plugin.flush(isAsync, function () {\r\n                                handled_1 = true;\r\n                                doCallback();\r\n                            }, sendReason)) {\r\n                                if (!handled_1) {\r\n                                    // If any channel doesn't return true and it didn't call the callback, then we should assume that the callback\r\n                                    // will never be called, so use a timeout to allow the channel(s) some time to \"finish\" before triggering any\r\n                                    // followup function (such as unloading)\r\n                                    if (isAsync && cbTimer == null) {\r\n                                        cbTimer = scheduleTimeout(function () {\r\n                                            cbTimer = null;\r\n                                            doCallback();\r\n                                        }, cbTimeout);\r\n                                    }\r\n                                    else {\r\n                                        doCallback();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                doneIterating = true;\r\n                doCallback();\r\n                return true;\r\n            }\r\n            function _initPerfManager() {\r\n                // Save the previous config based performance manager creator to avoid creating new perf manager instances if unchanged\r\n                var prevCfgPerfMgr;\r\n                // Will get recalled if any referenced config values are changed\r\n                _addUnloadHook(_configHandler[_DYN_WATCH /* @min:%2ewatch */](function (details) {\r\n                    var enablePerfMgr = details.cfg.enablePerfMgr;\r\n                    if (enablePerfMgr) {\r\n                        var createPerfMgr = details.cfg[STR_CREATE_PERF_MGR /* @min:%2ecreatePerfMgr */];\r\n                        // for preCfgPerfMgr = createPerfMgr = null\r\n                        // initial createPerfMgr function should be _createPerfManager\r\n                        if ((prevCfgPerfMgr !== createPerfMgr) || !prevCfgPerfMgr) {\r\n                            if (!createPerfMgr) {\r\n                                createPerfMgr = _createPerfManager;\r\n                            }\r\n                            // Set the performance manager creation function if not defined\r\n                            getSetValue(details.cfg, STR_CREATE_PERF_MGR, createPerfMgr);\r\n                            prevCfgPerfMgr = createPerfMgr;\r\n                            // Remove any existing config based performance manager\r\n                            _cfgPerfManager = null;\r\n                        }\r\n                        // Only create the performance manager if it's not already created or manually set\r\n                        if (!_perfManager && !_cfgPerfManager && isFunction(createPerfMgr)) {\r\n                            // Create a new config based performance manager\r\n                            _cfgPerfManager = createPerfMgr(_self, _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]());\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Remove any existing config based performance manager\r\n                        _cfgPerfManager = null;\r\n                        // Clear the previous cached value so it can be GC'd\r\n                        prevCfgPerfMgr = null;\r\n                    }\r\n                }));\r\n            }\r\n            function _doUpdate(updateState) {\r\n                var updateCtx = createProcessTelemetryUpdateContext(_getPluginChain(), _self);\r\n                updateCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startLogPoller);\r\n                if (!_self._updateHook || _self._updateHook(updateCtx, updateState) !== true) {\r\n                    updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n                }\r\n            }\r\n            function _logOrThrowError(message) {\r\n                var logger = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                if (logger) {\r\n                    // there should always be a logger\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, message);\r\n                    _startLogPoller();\r\n                }\r\n                else {\r\n                    throwError(message);\r\n                }\r\n            }\r\n            function _notifyInvalidEvent(telemetryItem) {\r\n                var manager = _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]();\r\n                if (manager) {\r\n                    manager[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */]([telemetryItem], 2 /* eEventsDiscardedReason.InvalidEvent */);\r\n                }\r\n            }\r\n            function _addUnloadHook(hooks) {\r\n                _hookContainer.add(hooks);\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.getChannels.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n// Removed Stub for AppInsightsCore.prototype.getProcessTelContext.\r\n// Removed Stub for AppInsightsCore.prototype.getNotifyMgr.\r\n// Removed Stub for AppInsightsCore.prototype.addNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.removeNotificationListener.\r\n// Removed Stub for AppInsightsCore.prototype.getCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.setCookieMgr.\r\n// Removed Stub for AppInsightsCore.prototype.getPerfMgr.\r\n    // public getStatsBeat(statsBeatState: IStatsBeatState): IStatsBeat {\r\n    //     // @ DynamicProtoStub -- DO NOT add any code as this will be removed during packaging\r\n    //     return null;\r\n    // }\r\n    // public setStatsMgr(statsMgr?: IStatsMgr): void {\r\n    //     // @ DynamicProtoStub -- DO NOT add any code as this will be removed during packaging\r\n    // }\r\n// Removed Stub for AppInsightsCore.prototype.setPerfMgr.\r\n// Removed Stub for AppInsightsCore.prototype.eventCnt.\r\n// Removed Stub for AppInsightsCore.prototype.pollInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.stopPollingInternalLogs.\r\n// Removed Stub for AppInsightsCore.prototype.addTelemetryInitializer.\r\n// Removed Stub for AppInsightsCore.prototype.unload.\r\n// Removed Stub for AppInsightsCore.prototype.getPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.addPlugin.\r\n// Removed Stub for AppInsightsCore.prototype.updateCfg.\r\n// Removed Stub for AppInsightsCore.prototype.evtNamespace.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadCb.\r\n// Removed Stub for AppInsightsCore.prototype.flush.\r\n// Removed Stub for AppInsightsCore.prototype.getTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.setTraceCtx.\r\n// Removed Stub for AppInsightsCore.prototype.addUnloadHook.\r\n// Removed Stub for AppInsightsCore.prototype.onCfgChange.\r\n// Removed Stub for AppInsightsCore.prototype.activeStatus.\r\n// Removed Stub for AppInsightsCore.prototype._setPendingStatus.\r\n// Removed Stub for AppInsightsCore.prototype.releaseQueue.\r\n// Removed Stub for AppInsightsCore.prototype._updateHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}());\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n// \r\n// \r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_DIAG_LOG, _DYN_LENGTH, _DYN_PROCESS_NEXT, _DYN_SPLICE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { BaseTelemetryPlugin } from \"./BaseTelemetryPlugin\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getExceptionName } from \"./HelperFuncs\";\r\nimport { STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nfunction _addInitializer(_initializers, id, telemetryInitializer) {\r\n    var theInitializer = {\r\n        id: id,\r\n        fn: telemetryInitializer\r\n    };\r\n    arrAppend(_initializers, theInitializer);\r\n    var handler = {\r\n        remove: function () {\r\n            arrForEach(_initializers, function (initializer, idx) {\r\n                if (initializer.id === theInitializer.id) {\r\n                    _initializers[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    return -1;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    return handler;\r\n}\r\nfunction _runInitializers(_initializers, item, logger) {\r\n    var doNotSendItem = false;\r\n    var telemetryInitializersCount = _initializers[_DYN_LENGTH /* @min:%2elength */];\r\n    for (var i = 0; i < telemetryInitializersCount; ++i) {\r\n        var telemetryInitializer = _initializers[i];\r\n        if (telemetryInitializer) {\r\n            try {\r\n                if (telemetryInitializer.fn[_DYN_APPLY /* @min:%2eapply */](null, [item]) === false) {\r\n                    doNotSendItem = true;\r\n                    break;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // log error but dont stop executing rest of the telemetry initializers\r\n                // doNotSendItem = true;\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"Telemetry initializer failed: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n            }\r\n        }\r\n    }\r\n    return !doNotSendItem;\r\n}\r\nvar TelemetryInitializerPlugin = /** @class */ (function (_super) {\r\n    __extends(TelemetryInitializerPlugin, _super);\r\n    function TelemetryInitializerPlugin() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"TelemetryInitializerPlugin\";\r\n        _this.priority = 199;\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _id;\r\n        var _initializers;\r\n        _initDefaults();\r\n        dynamicProto(TelemetryInitializerPlugin, _this, function (_self, _base) {\r\n            _self.addTelemetryInitializer = function (telemetryInitializer) {\r\n                return _addInitializer(_initializers, _id++, telemetryInitializer);\r\n            };\r\n            _self[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */] = function (item, itemCtx) {\r\n                if (_runInitializers(_initializers, item, itemCtx ? itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]() : _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]())) {\r\n                    _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item, itemCtx);\r\n                }\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function () {\r\n                _initDefaults();\r\n            };\r\n        });\r\n        function _initDefaults() {\r\n            _id = 0;\r\n            _initializers = [];\r\n        }\r\n        return _this;\r\n    }\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.addTelemetryInitializer.\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.processTelemetry.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    TelemetryInitializerPlugin.__ieDyn=1;\n\n    return TelemetryInitializerPlugin;\r\n}(BaseTelemetryPlugin));\r\nexport { TelemetryInitializerPlugin };\r\n//# sourceMappingURL=TelemetryInitializerPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrSlice, getLength } from \"@nevware21/ts-utils\";\r\nimport { _DYN_UNLOAD } from \"../__DynamicConstants\";\r\n/**\r\n * Run the unload function of the target object if it exists\r\n * @param target - The target object that contains the unload function\r\n * @param isAsync - The caller identifies whether it is expecting the operation to complete synchronously or asynchronously. Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @returns The result of the target function\r\n */\r\nexport function runTargetUnload(target, isAsync) {\r\n    if (target && target[_DYN_UNLOAD /* @min:%2eunload */]) {\r\n        return target[_DYN_UNLOAD /* @min:%2eunload */](isAsync);\r\n    }\r\n}\r\n/**\r\n * Call the unload function on all targets handling any returned [IPromise](https://nevware21.github.io/ts-async/typedoc/interfaces/IPromise.html)\r\n * / Promise before calling the next targets unload\r\n * @param targets - An array of the targets to unload\r\n * @param isAsync - The caller identifies whether it is expecting the operations to complete synchronously or asynchronously.  Even\r\n * if the caller is not waiting the operation may still be performed asynchronously depending on the component and the reverse is\r\n * also true.\r\n * @param done - Optional callback function to call once all of the unload functions have been called.\r\n */\r\nexport function doUnloadAll(targets, isAsync, done) {\r\n    var result;\r\n    if (!done) {\r\n        result = createPromise(function (resolved) {\r\n            done = resolved;\r\n        });\r\n    }\r\n    if (targets && getLength(targets) > 0) {\r\n        doAwaitResponse(runTargetUnload(targets[0], isAsync), function () {\r\n            doUnloadAll(arrSlice(targets, 1), isAsync, done);\r\n        });\r\n    }\r\n    else {\r\n        done();\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=AsyncUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isFunction, objDefine } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PROCESS_TEL_CONT2, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_PROCESS_NEXT, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { isNotNullOrUndefined, proxyFunctionAs } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_EXTENSION_CONFIG, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext } from \"./ProcessTelemetryContext\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nimport { createUnloadHookContainer } from \"./UnloadHookContainer\";\r\nvar strGetPlugin = \"getPlugin\";\r\nvar defaultValues = (_a = {},\r\n    _a[STR_EXTENSION_CONFIG] = { isVal: isNotNullOrUndefined, v: {} },\r\n    _a);\r\n/**\r\n * BaseTelemetryPlugin provides a basic implementation of the ITelemetryPlugin interface so that plugins\r\n * can avoid implementation the same set of boiler plate code as well as provide a base\r\n * implementation so that new default implementations can be added without breaking all plugins.\r\n */\r\nvar BaseTelemetryPlugin = /** @class */ (function () {\r\n    function BaseTelemetryPlugin() {\r\n        var _self = this; // Setting _self here as it's used outside of the dynamicProto as well\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _isinitialized;\r\n        var _rootCtx; // Used as the root context, holding the current config and initialized core\r\n        var _nextPlugin; // Used for backward compatibility where plugins don't call the main pipeline\r\n        var _unloadHandlerContainer;\r\n        var _hookContainer;\r\n        _initDefaults();\r\n        dynamicProto(BaseTelemetryPlugin, _self, function (_self) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                _setDefaults(config, core, pluginChain);\r\n                _isinitialized = true;\r\n            };\r\n            _self[_DYN_TEARDOWN /* @min:%2eteardown */] = function (unloadCtx, unloadState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (unloadCtx && core !== unloadCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing as either the plugin is not initialized or was not initialized by the current core\r\n                    return;\r\n                }\r\n                var result;\r\n                var unloadDone = false;\r\n                var theUnloadCtx = unloadCtx || createProcessTelemetryUnloadContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUnloadState = unloadState || {\r\n                    reason: 0 /* TelemetryUnloadReason.ManualTeardown */,\r\n                    isAsync: false\r\n                };\r\n                function _unloadCallback() {\r\n                    if (!unloadDone) {\r\n                        unloadDone = true;\r\n                        _unloadHandlerContainer.run(theUnloadCtx, unloadState);\r\n                        _hookContainer.run(theUnloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]());\r\n                        if (result === true) {\r\n                            theUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n                        }\r\n                        _initDefaults();\r\n                    }\r\n                }\r\n                if (!_self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] || _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */](theUnloadCtx, theUnloadState, _unloadCallback) !== true) {\r\n                    _unloadCallback();\r\n                }\r\n                else {\r\n                    // Tell the caller that we will be calling processNext()\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_UPDATE /* @min:%2eupdate */] = function (updateCtx, updateState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (updateCtx && core !== updateCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing\r\n                    return;\r\n                }\r\n                var result;\r\n                var updateDone = false;\r\n                var theUpdateCtx = updateCtx || createProcessTelemetryUpdateContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUpdateState = updateState || {\r\n                    reason: 0 /* TelemetryUpdateReason.Unknown */\r\n                };\r\n                function _updateCallback() {\r\n                    if (!updateDone) {\r\n                        updateDone = true;\r\n                        _setDefaults(theUpdateCtx.getCfg(), theUpdateCtx.core(), theUpdateCtx[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n                    }\r\n                }\r\n                if (!_self._doUpdate || _self._doUpdate(theUpdateCtx, theUpdateState, _updateCallback) !== true) {\r\n                    _updateCallback();\r\n                }\r\n                else {\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            proxyFunctionAs(_self, \"_addUnloadCb\", function () { return _unloadHandlerContainer; }, \"add\");\r\n            proxyFunctionAs(_self, \"_addHook\", function () { return _hookContainer; }, \"add\");\r\n            objDefine(_self, \"_unloadHooks\", { g: function () { return _hookContainer; } });\r\n        });\r\n        // These are added after the dynamicProto so that are not moved to the prototype\r\n        _self[_DYN_DIAG_LOG /* @min:%2ediagLog */] = function (itemCtx) {\r\n            return _getTelCtx(itemCtx)[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n        };\r\n        _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () {\r\n            return _isinitialized;\r\n        };\r\n        _self.setInitialized = function (isInitialized) {\r\n            _isinitialized = isInitialized;\r\n        };\r\n        // _self.getNextPlugin = () => DO NOT IMPLEMENT\r\n        // Sub-classes of this base class *should* not be relying on this value and instead\r\n        // should use processNext() function. If you require access to the plugin use the\r\n        // IProcessTelemetryContext.getNext().getPlugin() while in the pipeline, Note getNext() may return null.\r\n        _self[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] = function (next) {\r\n            _nextPlugin = next;\r\n        };\r\n        _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = function (env, itemCtx) {\r\n            if (itemCtx) {\r\n                // Normal core execution sequence\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n            }\r\n            else if (_nextPlugin && isFunction(_nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Looks like backward compatibility or out of band processing. And as it looks\r\n                // like a ITelemetryPlugin or ITelemetryPluginChain, just call processTelemetry\r\n                _nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, null);\r\n            }\r\n        };\r\n        _self._getTelCtx = _getTelCtx;\r\n        function _getTelCtx(currentCtx) {\r\n            if (currentCtx === void 0) { currentCtx = null; }\r\n            var itemCtx = currentCtx;\r\n            if (!itemCtx) {\r\n                var rootCtx = _rootCtx || createProcessTelemetryContext(null, {}, _self[STR_CORE /* @min:%2ecore */]);\r\n                // tslint:disable-next-line: prefer-conditional-expression\r\n                if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                    // Looks like a chain object\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin[strGetPlugin]);\r\n                }\r\n                else {\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin);\r\n                }\r\n            }\r\n            return itemCtx;\r\n        }\r\n        function _setDefaults(config, core, pluginChain) {\r\n            // Make sure the extensionConfig exists and the config is dynamic\r\n            createDynamicConfig(config, defaultValues, safeGetLogger(core));\r\n            if (!pluginChain && core) {\r\n                // Get the first plugin from the core\r\n                pluginChain = core[_DYN_GET_PROCESS_TEL_CONT2 /* @min:%2egetProcessTelContext */]()[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n            }\r\n            var nextPlugin = _nextPlugin;\r\n            if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                // If it looks like a proxy/chain then get the plugin\r\n                nextPlugin = _nextPlugin[strGetPlugin]();\r\n            }\r\n            // Support legacy plugins where core was defined as a property\r\n            _self[STR_CORE /* @min:%2ecore */] = core;\r\n            _rootCtx = createProcessTelemetryContext(pluginChain, config, core, nextPlugin);\r\n        }\r\n        function _initDefaults() {\r\n            _isinitialized = false;\r\n            _self[STR_CORE /* @min:%2ecore */] = null;\r\n            _rootCtx = null;\r\n            _nextPlugin = null;\r\n            _hookContainer = createUnloadHookContainer();\r\n            _unloadHandlerContainer = createUnloadHandlerContainer();\r\n        }\r\n    }\r\n// Removed Stub for BaseTelemetryPlugin.prototype.initialize.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.teardown.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.update.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addUnloadCb.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addHook.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseTelemetryPlugin.__ieDyn=1;\n\n    return BaseTelemetryPlugin;\r\n}());\r\nexport { BaseTelemetryPlugin };\r\n//# sourceMappingURL=BaseTelemetryPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nexport var ChannelControllerPriority = 500;\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\n// export const SampleRate = \"sampleRate\";\r\n// export const ProcessLegacy = \"ProcessLegacy\";\r\n// export const HttpMethod = \"http.method\";\r\n// export const DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\n// export const DEFAULT_BREEZE_PATH = \"/v2/track\";\r\n// export const strNotSpecified = \"not_specified\";\r\n// export const strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { mathFloor, utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getCrypto, getMsCrypto, isIE } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar UInt32Mask = 0x100000000;\r\nvar MaxUInt32 = 0xffffffff;\r\nvar SEED1 = 123456789;\r\nvar SEED2 = 987654321;\r\n// MWC based Random generator (for IE)\r\nvar _mwcSeeded = false;\r\nvar _mwcW = SEED1;\r\nvar _mwcZ = SEED2;\r\n// Takes any integer\r\nfunction _mwcSeed(seedValue) {\r\n    if (seedValue < 0) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        seedValue >>>= 0;\r\n    }\r\n    _mwcW = (SEED1 + seedValue) & MaxUInt32;\r\n    _mwcZ = (SEED2 - seedValue) & MaxUInt32;\r\n    _mwcSeeded = true;\r\n}\r\nfunction _autoSeedMwc() {\r\n    // Simple initialization using default Math.random() - So we inherit any entropy from the browser\r\n    // and bitwise XOR with the current milliseconds\r\n    try {\r\n        var now = utcNow() & 0x7fffffff;\r\n        _mwcSeed(((Math.random() * UInt32Mask) ^ now) + now);\r\n    }\r\n    catch (e) {\r\n        // Don't crash if something goes wrong\r\n    }\r\n}\r\n/**\r\n * Generate a random value between 0 and maxValue, max value should be limited to a 32-bit maximum.\r\n * So maxValue(16) will produce a number from 0..16 (range of 17)\r\n * @param maxValue - The max value for the range\r\n */\r\nexport function randomValue(maxValue) {\r\n    if (maxValue > 0) {\r\n        return mathFloor((random32() / MaxUInt32) * (maxValue + 1)) >>> 0;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate a random 32-bit number (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), defaults un-unsigned.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function random32(signed) {\r\n    var value = 0;\r\n    var c = getCrypto() || getMsCrypto();\r\n    if (c && c.getRandomValues) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = c.getRandomValues(new Uint32Array(1))[0] & MaxUInt32;\r\n    }\r\n    if (value === 0 && isIE()) {\r\n        // For IE 6, 7, 8 (especially on XP) Math.random is not very random\r\n        if (!_mwcSeeded) {\r\n            // Set the seed for the Mwc algorithm\r\n            _autoSeedMwc();\r\n        }\r\n        // Don't use Math.random for IE\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mwcRandom32() & MaxUInt32;\r\n    }\r\n    if (value === 0) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mathFloor((UInt32Mask * Math.random()) | 0);\r\n    }\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Seed the MWC random number generator with the specified seed or a random value\r\n * @param value - optional the number to used as the seed, if undefined, null or zero a random value will be chosen\r\n */\r\nexport function mwcRandomSeed(value) {\r\n    if (!value) {\r\n        _autoSeedMwc();\r\n    }\r\n    else {\r\n        _mwcSeed(value);\r\n    }\r\n}\r\n/**\r\n * Generate a random 32-bit number between (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), using MWC (Multiply with carry)\r\n * instead of Math.random() defaults to un-signed.\r\n * Used as a replacement random generator for IE to avoid issues with older IE instances.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function mwcRandom32(signed) {\r\n    _mwcZ = (36969 * (_mwcZ & 0xFFFF) + (_mwcZ >> 16)) & MaxUInt32;\r\n    _mwcW = (18000 * (_mwcW & 0xFFFF) + (_mwcW >> 16)) & MaxUInt32;\r\n    var value = (((_mwcZ << 16) + (_mwcW & 0xFFFF)) >>> 0) & MaxUInt32 | 0;\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Generate random base64 id string.\r\n * The default length is 22 which is 132-bits so almost the same as a GUID but as base64 (the previous default was 5)\r\n * @param maxLength - Optional value to specify the length of the id to be generated, defaults to 22\r\n */\r\nexport function newId(maxLength) {\r\n    if (maxLength === void 0) { maxLength = 22; }\r\n    var base64chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    // Start with an initial random number, consuming the value in reverse byte order\r\n    var number = random32() >>> 0; // Make sure it's a +ve number\r\n    var chars = 0;\r\n    var result = STR_EMPTY;\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < maxLength) {\r\n        chars++;\r\n        result += base64chars.charAt(number & 0x3F);\r\n        number >>>= 6; // Zero fill with right shift\r\n        if (chars === 5) {\r\n            // 5 base64 characters === 30 bits so we don't have enough bits for another base64 char\r\n            // So add on another 30 bits and make sure it's +ve\r\n            number = (((random32() << 2) & 0xFFFFFFFF) | (number & 0x03)) >>> 0;\r\n            chars = 0; // We need to reset the number every 5 chars (30 bits)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=RandomHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { objDefine } from \"@nevware21/ts-utils\";\r\nimport { normalizeJsName } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { newId } from \"./RandomHelper\";\r\nvar version = '3.3.11';\r\nvar instanceName = \".\" + newId(6);\r\nvar _dataUid = 0;\r\n// Accepts only:\r\n//  - Node\r\n//    - Node.ELEMENT_NODE\r\n//    - Node.DOCUMENT_NODE\r\n//  - Object\r\n//    - Any\r\nfunction _canAcceptData(target) {\r\n    return target.nodeType === 1 || target.nodeType === 9 || !(+target.nodeType);\r\n}\r\nfunction _getCache(data, target) {\r\n    var theCache = target[data.id];\r\n    if (!theCache) {\r\n        theCache = {};\r\n        try {\r\n            if (_canAcceptData(target)) {\r\n                objDefine(target, data.id, {\r\n                    e: false,\r\n                    v: theCache\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Not all environments allow extending all objects, so just ignore the cache in those cases\r\n        }\r\n    }\r\n    return theCache;\r\n}\r\nexport function createUniqueNamespace(name, includeVersion) {\r\n    if (includeVersion === void 0) { includeVersion = false; }\r\n    return normalizeJsName(name + (_dataUid++) + (includeVersion ? \".\" + version : STR_EMPTY) + instanceName);\r\n}\r\nexport function createElmNodeData(name) {\r\n    var data = {\r\n        id: createUniqueNamespace(\"_aiData-\" + (name || STR_EMPTY) + \".\" + version),\r\n        accept: function (target) {\r\n            return _canAcceptData(target);\r\n        },\r\n        get: function (target, name, defValue, addDefault) {\r\n            var theCache = target[data.id];\r\n            if (!theCache) {\r\n                if (addDefault) {\r\n                    // Side effect is adds the cache\r\n                    theCache = _getCache(data, target);\r\n                    theCache[normalizeJsName(name)] = defValue;\r\n                }\r\n                return defValue;\r\n            }\r\n            return theCache[normalizeJsName(name)];\r\n        },\r\n        kill: function (target, name) {\r\n            if (target && target[name]) {\r\n                try {\r\n                    delete target[name];\r\n                }\r\n                catch (e) {\r\n                    // Just cleaning up, so if this fails -- ignore\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return data;\r\n}\r\n//# sourceMappingURL=DataCacheHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getInst } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar listenerFuncs = [STR_EVENTS_SENT, STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_PERF_EVENT];\r\nvar _aiNamespace = null;\r\nvar _debugListener;\r\nfunction _listenerProxyFunc(name, config) {\r\n    return function () {\r\n        var args = arguments;\r\n        var dbgExt = getDebugExt(config);\r\n        if (dbgExt) {\r\n            var listener = dbgExt.listener;\r\n            if (listener && listener[name]) {\r\n                listener[name][_DYN_APPLY /* @min:%2eapply */](listener, args);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction _getExtensionNamespace() {\r\n    // Cache the lookup of the global namespace object\r\n    var target = getInst(\"Microsoft\");\r\n    if (target) {\r\n        _aiNamespace = target[\"ApplicationInsights\"];\r\n    }\r\n    return _aiNamespace;\r\n}\r\nexport function getDebugExt(config) {\r\n    var ns = _aiNamespace;\r\n    if (!ns && config.disableDbgExt !== true) {\r\n        ns = _aiNamespace || _getExtensionNamespace();\r\n    }\r\n    return ns ? ns[\"ChromeDbgExt\"] : null;\r\n}\r\nexport function getDebugListener(config) {\r\n    if (!_debugListener) {\r\n        _debugListener = {};\r\n        for (var lp = 0; lp < listenerFuncs[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            _debugListener[listenerFuncs[lp]] = _listenerProxyFunc(listenerFuncs[lp], config);\r\n        }\r\n    }\r\n    return _debugListener;\r\n}\r\n//# sourceMappingURL=DbgExtensionUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nvar _a;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { dumpObj, isFunction, isUndefined } from \"@nevware21/ts-utils\";\r\nimport { createDynamicConfig, onConfigChange } from \"../Config/DynamicConfig\";\r\nimport { _DYN_DIAG_LOG, _DYN_LOGGER, _DYN_LOGGING_LEVEL_CONSOL4, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_PUSH, _DYN_REPLACE, _DYN_THROW_INTERNAL, _DYN_UNLOAD, _DYN_WARN_TO_CONSOLE } from \"../__DynamicConstants\";\r\nimport { getDebugExt } from \"./DbgExtensionUtils\";\r\nimport { getConsole, getJSON, hasJSON } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar STR_WARN_TO_CONSOLE = \"warnToConsole\";\r\n/**\r\n * For user non actionable traces use AI Internal prefix.\r\n */\r\nvar AiNonUserActionablePrefix = \"AI (Internal): \";\r\n/**\r\n * Prefix of the traces in portal.\r\n */\r\nvar AiUserActionablePrefix = \"AI: \";\r\n/**\r\n *  Session storage key for the prefix for the key indicating message type already logged\r\n */\r\nvar AIInternalMessagePrefix = \"AITR_\";\r\nvar defaultValues = {\r\n    loggingLevelConsole: 0,\r\n    loggingLevelTelemetry: 1,\r\n    maxMessageLimit: 25,\r\n    enableDebug: false\r\n};\r\nvar _logFuncs = (_a = {},\r\n    _a[0 /* eLoggingSeverity.DISABLED */] = null,\r\n    _a[1 /* eLoggingSeverity.CRITICAL */] = \"errorToConsole\",\r\n    _a[2 /* eLoggingSeverity.WARNING */] = STR_WARN_TO_CONSOLE,\r\n    _a[3 /* eLoggingSeverity.DEBUG */] = \"debugToConsole\",\r\n    _a);\r\nfunction _sanitizeDiagnosticText(text) {\r\n    if (text) {\r\n        return \"\\\"\" + text[_DYN_REPLACE /* @min:%2ereplace */](/\\\"/g, STR_EMPTY) + \"\\\"\";\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _logToConsole(func, message) {\r\n    var theConsole = getConsole();\r\n    if (!!theConsole) {\r\n        var logFunc = \"log\";\r\n        if (theConsole[func]) {\r\n            logFunc = func;\r\n        }\r\n        if (isFunction(theConsole[logFunc])) {\r\n            theConsole[logFunc](message);\r\n        }\r\n    }\r\n}\r\nvar _InternalLogMessage = /** @class */ (function () {\r\n    function _InternalLogMessage(msgId, msg, isUserAct, properties) {\r\n        if (isUserAct === void 0) { isUserAct = false; }\r\n        var _self = this;\r\n        _self[_DYN_MESSAGE_ID /* @min:%2emessageId */] = msgId;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] =\r\n            (isUserAct ? AiUserActionablePrefix : AiNonUserActionablePrefix) +\r\n                msgId;\r\n        var strProps = STR_EMPTY;\r\n        if (hasJSON()) {\r\n            strProps = getJSON().stringify(properties);\r\n        }\r\n        var diagnosticText = (msg ? \" message:\" + _sanitizeDiagnosticText(msg) : STR_EMPTY) +\r\n            (properties ? \" props:\" + _sanitizeDiagnosticText(strProps) : STR_EMPTY);\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] += diagnosticText;\r\n    }\r\n    _InternalLogMessage.dataType = \"MessageData\";\r\n    return _InternalLogMessage;\r\n}());\r\nexport { _InternalLogMessage };\r\nexport function safeGetLogger(core, config) {\r\n    return (core || {})[_DYN_LOGGER /* @min:%2elogger */] || new DiagnosticLogger(config);\r\n}\r\nvar DiagnosticLogger = /** @class */ (function () {\r\n    function DiagnosticLogger(config) {\r\n        this.identifier = \"DiagnosticLogger\";\r\n        /**\r\n         * The internal logging queue\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * Count of internal messages sent\r\n         */\r\n        var _messageCount = 0;\r\n        /**\r\n         * Holds information about what message types were already logged to console or sent to server.\r\n         */\r\n        var _messageLogged = {};\r\n        var _loggingLevelConsole;\r\n        var _loggingLevelTelemetry;\r\n        var _maxInternalMessageLimit;\r\n        var _enableDebug;\r\n        var _unloadHandler;\r\n        dynamicProto(DiagnosticLogger, this, function (_self) {\r\n            _unloadHandler = _setDefaultsFromConfig(config || {});\r\n            _self.consoleLoggingLevel = function () { return _loggingLevelConsole; };\r\n            /**\r\n             * This method will throw exceptions in debug mode or attempt to log the error as a console warning.\r\n             * @param severity - The severity of the log message\r\n             * @param message  - The log message.\r\n             */\r\n            _self[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */] = function (severity, msgId, msg, properties, isUserAct) {\r\n                if (isUserAct === void 0) { isUserAct = false; }\r\n                var message = new _InternalLogMessage(msgId, msg, isUserAct, properties);\r\n                if (_enableDebug) {\r\n                    throw dumpObj(message);\r\n                }\r\n                else {\r\n                    // Get the logging function and fallback to warnToConsole of for some reason errorToConsole doesn't exist\r\n                    var logFunc = _logFuncs[severity] || STR_WARN_TO_CONSOLE;\r\n                    if (!isUndefined(message[_DYN_MESSAGE /* @min:%2emessage */])) {\r\n                        if (isUserAct) {\r\n                            // check if this message type was already logged to console for this page view and if so, don't log it again\r\n                            var messageKey = +message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                            if (!_messageLogged[messageKey] && _loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                _messageLogged[messageKey] = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Only log traces if the console Logging Level is >= the throwInternal severity level\r\n                            if (_loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                            }\r\n                        }\r\n                        _logInternalMessage(severity, message);\r\n                    }\r\n                    else {\r\n                        _debugExtMsg(\"throw\" + (severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"Critical\" : \"Warning\"), message);\r\n                    }\r\n                }\r\n            };\r\n            _self.debugToConsole = function (message) {\r\n                _logToConsole(\"debug\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */] = function (message) {\r\n                _logToConsole(\"warn\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            _self.errorToConsole = function (message) {\r\n                _logToConsole(\"error\", message);\r\n                _debugExtMsg(\"error\", message);\r\n            };\r\n            _self.resetInternalMessageCount = function () {\r\n                _messageCount = 0;\r\n                _messageLogged = {};\r\n            };\r\n            _self.logInternalMessage = _logInternalMessage;\r\n            _self[_DYN_UNLOAD /* @min:%2eunload */] = function (isAsync) {\r\n                _unloadHandler && _unloadHandler.rm();\r\n                _unloadHandler = null;\r\n            };\r\n            function _logInternalMessage(severity, message) {\r\n                if (_areInternalMessagesThrottled()) {\r\n                    return;\r\n                }\r\n                // check if this message type was already logged for this session and if so, don't log it again\r\n                var logMessage = true;\r\n                var messageKey = AIInternalMessagePrefix + message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                // if the session storage is not available, limit to only one message type per page view\r\n                if (_messageLogged[messageKey]) {\r\n                    logMessage = false;\r\n                }\r\n                else {\r\n                    _messageLogged[messageKey] = true;\r\n                }\r\n                if (logMessage) {\r\n                    // Push the event in the internal queue\r\n                    if (severity <= _loggingLevelTelemetry) {\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](message);\r\n                        _messageCount++;\r\n                        _debugExtMsg((severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"error\" : \"warn\"), message);\r\n                    }\r\n                    // When throttle limit reached, send a special event\r\n                    if (_messageCount === _maxInternalMessageLimit) {\r\n                        var throttleLimitMessage = \"Internal events throttle limit per PageView reached for this app.\";\r\n                        var throttleMessage = new _InternalLogMessage(23 /* _eInternalMessageId.MessageLimitPerPVExceeded */, throttleLimitMessage, false);\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](throttleMessage);\r\n                        if (severity === 1 /* eLoggingSeverity.CRITICAL */) {\r\n                            _self.errorToConsole(throttleLimitMessage);\r\n                        }\r\n                        else {\r\n                            _self[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](throttleLimitMessage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _setDefaultsFromConfig(config) {\r\n                // make sure the config is dynamic\r\n                return onConfigChange(createDynamicConfig(config, defaultValues, _self).cfg, function (details) {\r\n                    var config = details.cfg;\r\n                    _loggingLevelConsole = config[_DYN_LOGGING_LEVEL_CONSOL4 /* @min:%2eloggingLevelConsole */];\r\n                    _loggingLevelTelemetry = config.loggingLevelTelemetry;\r\n                    _maxInternalMessageLimit = config.maxMessageLimit;\r\n                    _enableDebug = config.enableDebug;\r\n                });\r\n            }\r\n            function _areInternalMessagesThrottled() {\r\n                return _messageCount >= _maxInternalMessageLimit;\r\n            }\r\n            function _debugExtMsg(name, data) {\r\n                var dbgExt = getDebugExt(config || {});\r\n                if (dbgExt && dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */]) {\r\n                    dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */](name, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for DiagnosticLogger.prototype.consoleLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.throwInternal.\r\n// Removed Stub for DiagnosticLogger.prototype.debugToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.warnToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.errorToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.resetInternalMessageCount.\r\n// Removed Stub for DiagnosticLogger.prototype.logInternalMessage.\r\n// Removed Stub for DiagnosticLogger.prototype.unload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    DiagnosticLogger.__ieDyn=1;\n\n    return DiagnosticLogger;\r\n}());\r\nexport { DiagnosticLogger };\r\nfunction _getLogger(logger) {\r\n    return (logger || new DiagnosticLogger());\r\n}\r\n/**\r\n * This is a helper method which will call throwInternal on the passed logger, will throw exceptions in\r\n * debug mode or attempt to log the error as a console warning. This helper is provided mostly to better\r\n * support minification as logger.throwInternal() will not compress the publish \"throwInternal\" used throughout\r\n * the code.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity - The severity of the log message\r\n * @param message  - The log message.\r\n */\r\nexport function _throwInternal(logger, severity, msgId, msg, properties, isUserAct) {\r\n    if (isUserAct === void 0) { isUserAct = false; }\r\n    _getLogger(logger)[_DYN_THROW_INTERNAL /* @min:%2ethrowInternal */](severity, msgId, msg, properties, isUserAct);\r\n}\r\n/**\r\n * This is a helper method which will call warnToConsole on the passed logger with the provided message.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param message  - The log message.\r\n */\r\nexport function _warnToConsole(logger, message) {\r\n    _getLogger(logger)[_DYN_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n}\r\n/**\r\n * Logs a message to the internal queue.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity  - The severity of the log message\r\n * @param message - The message to log.\r\n */\r\nexport function _logInternalMessage(logger, severity, message) {\r\n    _getLogger(logger).logInternalMessage(severity, message);\r\n}\r\n//# sourceMappingURL=DiagnosticLogger.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { getDocument, getInst, getNavigator, getPerformance, hasNavigator, isFunction, isString, isUndefined, mathMax, strIndexOf, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SPLIT, _DYN_SUBSTRING, _DYN_TO_LOWER_CASE, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { strContains } from \"./HelperFuncs\";\r\nimport { DEFAULT_SENSITIVE_PARAMS, STR_EMPTY, STR_REDACTED } from \"./InternalConstants\";\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\nvar strDocumentMode = \"documentMode\";\r\nvar strLocation = \"location\";\r\nvar strConsole = \"console\";\r\nvar strJSON = \"JSON\";\r\nvar strCrypto = \"crypto\";\r\nvar strMsCrypto = \"msCrypto\";\r\nvar strReactNative = \"ReactNative\";\r\nvar strMsie = \"msie\";\r\nvar strTrident = \"trident/\";\r\nvar strXMLHttpRequest = \"XMLHttpRequest\";\r\nvar _isTrident = null;\r\nvar _navUserAgentCheck = null;\r\nvar _enableMocks = false;\r\nvar _useXDomainRequest = null;\r\nvar _beaconsSupported = null;\r\nfunction _hasProperty(theClass, property) {\r\n    var supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                var proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Do Nothing\r\n        }\r\n        if (!supported) {\r\n            try {\r\n                var tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            }\r\n            catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n    return supported;\r\n}\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled - A flag to enable or disable the mock\r\n */\r\nexport function setEnableEnvMocks(enabled) {\r\n    _enableMocks = enabled;\r\n}\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock) {\r\n    if (checkForMock && _enableMocks) {\r\n        var mockLocation = getInst(\"__mockLocation\");\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n    return getInst(strLocation);\r\n}\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole() {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n    return getInst(strConsole);\r\n}\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON() {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getInst(strJSON) !== null);\r\n}\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON() {\r\n    if (hasJSON()) {\r\n        return JSON || getInst(strJSON);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto() {\r\n    return getInst(strCrypto);\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto() {\r\n    return getInst(strMsCrypto);\r\n}\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative() {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    var nav = getNavigator();\r\n    if (nav && (nav[_DYN_USER_AGENT /* @min:%2euserAgent */] !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav[_DYN_USER_AGENT /* @min:%2euserAgent */];\r\n        var userAgent = (_navUserAgentCheck || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n    return _isTrident;\r\n}\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr) {\r\n    if (userAgentStr === void 0) { userAgentStr = null; }\r\n    if (!userAgentStr) {\r\n        var navigator_1 = getNavigator() || {};\r\n        userAgentStr = navigator_1 ? (navigator_1.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        var doc = getDocument() || {};\r\n        return mathMax(parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    }\r\n    else if (strContains(ua, strTrident)) {\r\n        var tridentVer = parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function isSafari(userAgentStr) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        var navigator_2 = getNavigator() || {};\r\n        userAgentStr = navigator_2 ? (navigator_2.userAgent || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    return (strIndexOf(ua, \"safari\") >= 0);\r\n}\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @param useCached - [Optional] used for testing to bypass the cached lookup, when `true` this will\r\n * cause the cached global to be reset.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported(useCached) {\r\n    if (_beaconsSupported === null || useCached === false) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n    return _beaconsSupported;\r\n}\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive) {\r\n    var isSupported = false;\r\n    try {\r\n        isSupported = !!getInst(\"fetch\");\r\n        var request = getInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nexport function useXDomainRequest() {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n    return _useXDomainRequest;\r\n}\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported() {\r\n    var isSupported = false;\r\n    try {\r\n        var xmlHttpRequest = getInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nfunction _getNamedValue(values, name) {\r\n    if (values) {\r\n        for (var i = 0; i < values[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var value = values[i];\r\n            if (value[_DYN_NAME /* @min:%2ename */]) {\r\n                if (value[_DYN_NAME /* @min:%2ename */] === name) {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name - The name of the meta-tag to find.\r\n */\r\nexport function findMetaTag(name) {\r\n    var doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        return _getNamedValue(doc.querySelectorAll(\"meta\"), name).content;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name - The name of the server timing value to find.\r\n */\r\nexport function findNamedServerTiming(name) {\r\n    var value;\r\n    var perf = getPerformance();\r\n    if (perf) {\r\n        // Try looking for a server-timing header\r\n        var navPerf = perf.getEntriesByType(\"navigation\") || [];\r\n        value = _getNamedValue((navPerf[_DYN_LENGTH /* @min:%2elength */] > 0 ? navPerf[0] : {}).serverTiming, name).description;\r\n    }\r\n    return value;\r\n}\r\n// TODO: should reuse this method for analytics plugin\r\nexport function dispatchEvent(target, evnt) {\r\n    if (target && target.dispatchEvent && evnt) {\r\n        target.dispatchEvent(evnt);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function createCustomDomEvent(eventName, details) {\r\n    var event = null;\r\n    var detail = { detail: details || null };\r\n    if (isFunction(CustomEvent)) { // Use CustomEvent constructor when available\r\n        event = new CustomEvent(eventName, detail);\r\n    }\r\n    else { // CustomEvent has no constructor in IE\r\n        var doc = getDocument();\r\n        if (doc && doc.createEvent) {\r\n            event = doc.createEvent(\"CustomEvent\");\r\n            event.initCustomEvent(eventName, true, true, detail);\r\n        }\r\n    }\r\n    return event;\r\n}\r\nexport function sendCustomEvent(evtName, cfg, customDetails) {\r\n    var global = getGlobal();\r\n    if (global && global.CustomEvent) {\r\n        try {\r\n            var details = { cfg: cfg || null, customDetails: customDetails || null };\r\n            return dispatchEvent(global, createCustomDomEvent(evtName, details));\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Redacts user information from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with user information redacted\r\n */\r\nfunction redactUserInfo(url) {\r\n    return url.replace(/^([a-zA-Z][a-zA-Z0-9+.-]*:\\/\\/)([^:@]{1,200}):([^@]{1,200})@(.*)$/, \"$1REDACTED:REDACTED@$4\");\r\n}\r\n/**\r\n * Redacts sensitive query parameters from a URL\r\n * @param url - The URL string to redact\r\n * @returns The URL with sensitive query parameters redacted\r\n */\r\nfunction redactQueryParameters(url, config) {\r\n    var sensitiveParams;\r\n    var questionMarkIndex = strIndexOf(url, \"?\");\r\n    if (questionMarkIndex === -1) {\r\n        return url;\r\n    }\r\n    if (config && config.redactQueryParams) {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS.concat(config.redactQueryParams);\r\n    }\r\n    else {\r\n        sensitiveParams = DEFAULT_SENSITIVE_PARAMS;\r\n    }\r\n    var baseUrl = strSubstring(url, 0, questionMarkIndex + 1);\r\n    var queryString = strSubstring(url, questionMarkIndex + 1);\r\n    var fragment = STR_EMPTY;\r\n    var hashIndex = strIndexOf(queryString, \"#\");\r\n    if (hashIndex !== -1) {\r\n        fragment = strSubstring(queryString, hashIndex);\r\n        queryString = strSubstring(queryString, 0, hashIndex);\r\n    }\r\n    var hasPotentialSensitiveParam = false;\r\n    for (var i = 0; i < sensitiveParams[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        var paramCheck = sensitiveParams[i] + \"=\";\r\n        if (strIndexOf(queryString, paramCheck) !== -1) {\r\n            hasPotentialSensitiveParam = true;\r\n            break;\r\n        }\r\n    }\r\n    if (!hasPotentialSensitiveParam) {\r\n        return url;\r\n    }\r\n    var resultParts = [];\r\n    var anyParamRedacted = false;\r\n    if (queryString && queryString[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var pairs = queryString[_DYN_SPLIT /* @min:%2esplit */](\"&\");\r\n        for (var i = 0; i < pairs[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var pair = pairs[i];\r\n            if (!pair) {\r\n                continue;\r\n            }\r\n            var equalsIndex = strIndexOf(pair, \"=\");\r\n            if (equalsIndex === -1) {\r\n                // Parameter without value\r\n                resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n            }\r\n            else {\r\n                var paramName = pair[_DYN_SUBSTRING /* @min:%2esubstring */](0, equalsIndex);\r\n                var paramValue = pair[_DYN_SUBSTRING /* @min:%2esubstring */](equalsIndex + 1);\r\n                if (paramValue === STR_EMPTY) {\r\n                    resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n                }\r\n                else {\r\n                    var shouldRedact = false;\r\n                    for (var j = 0; j < sensitiveParams[_DYN_LENGTH /* @min:%2elength */]; j++) {\r\n                        if (paramName === sensitiveParams[j]) {\r\n                            shouldRedact = true;\r\n                            anyParamRedacted = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (shouldRedact) {\r\n                        resultParts[_DYN_PUSH /* @min:%2epush */](paramName + \"=\" + STR_REDACTED);\r\n                    }\r\n                    else {\r\n                        resultParts[_DYN_PUSH /* @min:%2epush */](pair);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // If no parameters were redacted, return the original URL\r\n    if (!anyParamRedacted) {\r\n        return url;\r\n    }\r\n    return baseUrl + resultParts.join(\"&\") + fragment;\r\n}\r\n/**\r\n * Redacts sensitive information from a URL string, including credentials and specific query parameters.\r\n * @param input - The URL string to be redacted.\r\n * @param config - Configuration object that contain redactUrls setting.\r\n * @returns The redacted URL string or the original string if no redaction was needed or possible.\r\n */\r\nexport function fieldRedaction(input, config) {\r\n    if (!input || !isString(input) || input[_DYN_INDEX_OF /* @min:%2eindexOf */](\" \") !== -1) {\r\n        return input;\r\n    }\r\n    var isRedactionDisabled = config && config.redactUrls === false;\r\n    if (isRedactionDisabled) {\r\n        return input;\r\n    }\r\n    var hasCredentials = strIndexOf(input, \"@\") !== -1;\r\n    var hasQueryParams = strIndexOf(input, \"?\") !== -1;\r\n    // If no credentials and no query params, return original\r\n    if (!hasCredentials && !hasQueryParams) {\r\n        return input;\r\n    }\r\n    try {\r\n        var result = input;\r\n        if (hasCredentials) {\r\n            result = redactUserInfo(input);\r\n        }\r\n        if (hasQueryParams) {\r\n            result = redactQueryParameters(result, config);\r\n        }\r\n        return result;\r\n    }\r\n    catch (e) {\r\n        return input;\r\n    }\r\n}\r\n//# sourceMappingURL=EnvUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, getDocument, getWindow, isArray, objForEachKey, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_EVT_NAME, _DYN_LENGTH, _DYN_PUSH, _DYN_REPLACE, _DYN_SPLICE, _DYN_SPLIT, _DYN_TYPE } from \"../__DynamicConstants\";\r\nimport { createElmNodeData, createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// Added to help with minfication\r\nvar strOnPrefix = \"on\";\r\nvar strAttachEvent = \"attachEvent\";\r\nvar strAddEventHelper = \"addEventListener\";\r\nvar strDetachEvent = \"detachEvent\";\r\nvar strRemoveEventListener = \"removeEventListener\";\r\nvar strEvents = \"events\";\r\nvar strVisibilityChangeEvt = \"visibilitychange\";\r\nvar strPageHide = \"pagehide\";\r\nvar strPageShow = \"pageshow\";\r\nvar strUnload = \"unload\";\r\nvar strBeforeUnload = \"beforeunload\";\r\nvar strPageHideNamespace = createUniqueNamespace(\"aiEvtPageHide\");\r\nvar strPageShowNamespace = createUniqueNamespace(\"aiEvtPageShow\");\r\nvar rRemoveEmptyNs = /\\.[\\.]+/g;\r\nvar rRemoveTrailingEmptyNs = /[\\.]+$/;\r\nvar _guid = 1;\r\nvar elmNodeData = createElmNodeData(\"events\");\r\nvar eventNamespace = /^([^.]*)(?:\\.(.+)|)/;\r\nfunction _normalizeNamespace(name) {\r\n    if (name && name[_DYN_REPLACE /* @min:%2ereplace */]) {\r\n        return name[_DYN_REPLACE /* @min:%2ereplace */](/^[\\s\\.]+|(?=[\\s\\.])[\\.\\s]+$/g, STR_EMPTY);\r\n    }\r\n    return name;\r\n}\r\nfunction _getEvtNamespace(eventName, evtNamespace) {\r\n    if (evtNamespace) {\r\n        var theNamespace_1 = STR_EMPTY;\r\n        if (isArray(evtNamespace)) {\r\n            theNamespace_1 = STR_EMPTY;\r\n            arrForEach(evtNamespace, function (name) {\r\n                name = _normalizeNamespace(name);\r\n                if (name) {\r\n                    if (name[0] !== \".\") {\r\n                        name = \".\" + name;\r\n                    }\r\n                    theNamespace_1 += name;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            theNamespace_1 = _normalizeNamespace(evtNamespace);\r\n        }\r\n        if (theNamespace_1) {\r\n            if (theNamespace_1[0] !== \".\") {\r\n                theNamespace_1 = \".\" + theNamespace_1;\r\n            }\r\n            // We may only have the namespace and not an eventName\r\n            eventName = (eventName || STR_EMPTY) + theNamespace_1;\r\n        }\r\n    }\r\n    var parsedEvent = (eventNamespace.exec(eventName || STR_EMPTY) || []);\r\n    return {\r\n        type: parsedEvent[1],\r\n        ns: ((parsedEvent[2] || STR_EMPTY).replace(rRemoveEmptyNs, \".\").replace(rRemoveTrailingEmptyNs, STR_EMPTY)[_DYN_SPLIT /* @min:%2esplit */](\".\").sort()).join(\".\")\r\n    };\r\n}\r\n/**\r\n * Get all of the registered events on the target object, this is primarily used for testing cleanup but may also be used by\r\n * applications to remove their own events\r\n * @param target - The EventTarget that has registered events\r\n * @param eventName - [Optional] The name of the event to return the registered handlers and full name (with namespaces)\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n */\r\nexport function __getRegisteredEvents(target, eventName, evtNamespace) {\r\n    var theEvents = [];\r\n    var eventCache = elmNodeData.get(target, strEvents, {}, false);\r\n    var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n    objForEachKey(eventCache, function (evtType, registeredEvents) {\r\n        arrForEach(registeredEvents, function (value) {\r\n            if (!evtName[_DYN_TYPE /* @min:%2etype */] || evtName[_DYN_TYPE /* @min:%2etype */] === value[_DYN_EVT_NAME /* @min:%2eevtName */][_DYN_TYPE /* @min:%2etype */]) {\r\n                if (!evtName.ns || evtName.ns === evtName.ns) {\r\n                    theEvents[_DYN_PUSH /* @min:%2epush */]({\r\n                        name: value.evtName[_DYN_TYPE /* @min:%2etype */] + (value[_DYN_EVT_NAME /* @min:%2eevtName */].ns ? \".\" + value[_DYN_EVT_NAME /* @min:%2eevtName */].ns : STR_EMPTY),\r\n                        handler: value.handler\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n    return theEvents;\r\n}\r\n// Exported for internal unit testing only\r\nfunction _getRegisteredEvents(target, evtName, addDefault) {\r\n    if (addDefault === void 0) { addDefault = true; }\r\n    var aiEvts = elmNodeData.get(target, strEvents, {}, addDefault);\r\n    var registeredEvents = aiEvts[evtName];\r\n    if (!registeredEvents) {\r\n        registeredEvents = aiEvts[evtName] = [];\r\n    }\r\n    return registeredEvents;\r\n}\r\nfunction _doDetach(obj, evtName, handlerRef, useCapture) {\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        if (obj[strRemoveEventListener]) {\r\n            obj[strRemoveEventListener](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n        }\r\n        else if (obj[strDetachEvent]) {\r\n            obj[strDetachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n        }\r\n    }\r\n}\r\nfunction _doAttach(obj, evtName, handlerRef, useCapture) {\r\n    var result = false;\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */] && handlerRef) {\r\n        if (obj[strAddEventHelper]) {\r\n            // all browsers except IE before version 9\r\n            obj[strAddEventHelper](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n            result = true;\r\n        }\r\n        else if (obj[strAttachEvent]) {\r\n            // IE before version 9\r\n            obj[strAttachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction _doUnregister(target, events, evtName, unRegFn) {\r\n    var idx = events[_DYN_LENGTH /* @min:%2elength */];\r\n    while (idx--) {\r\n        var theEvent = events[idx];\r\n        if (theEvent) {\r\n            if (!evtName.ns || evtName.ns === theEvent[_DYN_EVT_NAME /* @min:%2eevtName */].ns) {\r\n                if (!unRegFn || unRegFn(theEvent)) {\r\n                    _doDetach(target, theEvent[_DYN_EVT_NAME /* @min:%2eevtName */], theEvent.handler, theEvent.capture);\r\n                    // Remove the registered event\r\n                    events[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _unregisterEvents(target, evtName, unRegFn) {\r\n    if (evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        _doUnregister(target, _getRegisteredEvents(target, evtName[_DYN_TYPE /* @min:%2etype */]), evtName, unRegFn);\r\n    }\r\n    else {\r\n        var eventCache = elmNodeData.get(target, strEvents, {});\r\n        objForEachKey(eventCache, function (evtType, events) {\r\n            _doUnregister(target, events, evtName, unRegFn);\r\n        });\r\n        // Cleanup\r\n        if (objKeys(eventCache)[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n            elmNodeData.kill(target, strEvents);\r\n        }\r\n    }\r\n}\r\nexport function mergeEvtNamespace(theNamespace, namespaces) {\r\n    var newNamespaces;\r\n    if (namespaces) {\r\n        if (isArray(namespaces)) {\r\n            newNamespaces = [theNamespace].concat(namespaces);\r\n        }\r\n        else {\r\n            newNamespaces = [theNamespace, namespaces];\r\n        }\r\n        // resort the namespaces so they are always in order\r\n        newNamespaces = (_getEvtNamespace(\"xx\", newNamespaces).ns)[_DYN_SPLIT /* @min:%2esplit */](\".\");\r\n    }\r\n    else {\r\n        newNamespaces = theNamespace;\r\n    }\r\n    return newNamespaces;\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventName - String that specifies any of the standard DHTML Events without \"on\" prefix, if may also include an optional (dot \".\" prefixed)\r\n * namespaces \"click\" \"click.mynamespace\" in addition to specific namespaces.\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function eventOn(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    var result = false;\r\n    if (target) {\r\n        try {\r\n            var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n            result = _doAttach(target, evtName, handlerRef, useCapture);\r\n            if (result && elmNodeData.accept(target)) {\r\n                var registeredEvent = {\r\n                    guid: _guid++,\r\n                    evtName: evtName,\r\n                    handler: handlerRef,\r\n                    capture: useCapture\r\n                };\r\n                _getRegisteredEvents(target, evtName.type)[_DYN_PUSH /* @min:%2epush */](registeredEvent);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventName - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function eventOff(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    if (target) {\r\n        try {\r\n            var evtName_1 = _getEvtNamespace(eventName, evtNamespace);\r\n            var found_1 = false;\r\n            _unregisterEvents(target, evtName_1, function (regEvent) {\r\n                if ((evtName_1.ns && !handlerRef) || regEvent.handler === handlerRef) {\r\n                    found_1 = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!found_1) {\r\n                // fallback to try and remove as requested\r\n                _doDetach(target, evtName_1, handlerRef, useCapture);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj - Object to add the event too.\r\n * @param eventNameWithoutOn - String that specifies any of the standard DHTML Events without \"on\" prefix and optional (dot \".\" prefixed) namespaces \"click\" \"click.mynamespace\".\r\n * @param handlerRef - Pointer that specifies the function to call when event fires\r\n * @param useCapture - [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function attachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    return eventOn(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object - to remove the event from\r\n * @param eventNameWithoutOn  - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param useCapture - [Optional] Defaults to false\r\n */\r\nexport function detachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    eventOff(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Trys to add an event handler for the specified event to the window, body and document\r\n * @param eventName  - The name of the event\r\n * @param callback  - The callback function that needs to be executed for the given event\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns - true if the handler was successfully added\r\n */\r\nexport function addEventHandler(eventName, callback, evtNamespace) {\r\n    var result = false;\r\n    var w = getWindow();\r\n    if (w) {\r\n        result = eventOn(w, eventName, callback, evtNamespace);\r\n        result = eventOn(w[\"body\"], eventName, callback, evtNamespace) || result;\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        result = eventOn(doc, eventName, callback, evtNamespace) || result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Trys to remove event handler(s) for the specified event/namespace to the window, body and document\r\n * @param eventName - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param callback - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventHandler(eventName, callback, evtNamespace) {\r\n    var w = getWindow();\r\n    if (w) {\r\n        eventOff(w, eventName, callback, evtNamespace);\r\n        eventOff(w[\"body\"], eventName, callback, evtNamespace);\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        eventOff(doc, eventName, callback, evtNamespace);\r\n    }\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nfunction _addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && events[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                if (!excludeEvents || arrIndexOf(excludeEvents, name) === -1) {\r\n                    added = addEventHandler(name, listener, evtNamespace) || added;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && isArray(events)) {\r\n        added = _addEventListeners(events, listener, excludeEvents, evtNamespace);\r\n        if (!added && excludeEvents && excludeEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            // Failed to add any listeners and we excluded some, so just attempt to add the excluded events\r\n            added = _addEventListeners(events, listener, null, evtNamespace);\r\n        }\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Remove the listener from the array of events\r\n * @param events - An string array of event names to bind the listener to\r\n * @param listener - The event callback to call when the event is triggered\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventListeners(events, listener, evtNamespace) {\r\n    if (events && isArray(events)) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                removeEventHandler(name, listener, evtNamespace);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Listen to the 'beforeunload', 'unload' and 'pagehide' events which indicates a page unload is occurring,\r\n * this does NOT listen to the 'visibilitychange' event as while it does indicate that the page is being hidden\r\n * it does not *necessarily* mean that the page is being completely unloaded, it can mean that the user is\r\n * just navigating to a different Tab and may come back (without unloading the page). As such you may also\r\n * need to listen to the 'addPageHideEventListener' and 'addPageShowEventListener' events.\r\n * @param listener - The event callback to call when a page unload event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked, unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageUnloadEventListener(listener, excludeEvents, evtNamespace) {\r\n    // Hook the unload event for the document, window and body to ensure that the client events are flushed to the server\r\n    // As just hooking the window does not always fire (on chrome) for page navigation's.\r\n    return addEventListeners([strBeforeUnload, strUnload, strPageHide], listener, excludeEvents, evtNamespace);\r\n}\r\n/**\r\n * Remove any matching 'beforeunload', 'unload' and 'pagehide' events that may have been added via addEventListener,\r\n * addEventListeners, addPageUnloadEventListener or addPageHideEventListener.\r\n * @param listener - The specific event callback to to be removed\r\n * @param evtNamespace - [Optional] Namespace(s) uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function removePageUnloadEventListener(listener, evtNamespace) {\r\n    removeEventListeners([strBeforeUnload, strUnload, strPageHide], listener, evtNamespace);\r\n}\r\n/**\r\n * Listen to the pagehide and visibility changing to 'hidden' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page hide event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] A Namespace to append to the event listeners so they can be uniquely identified and removed\r\n * based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageHideEventListener\" can remove these events.\r\n * Suggestion: pass as true if you are also calling addPageUnloadEventListener as that also hooks pagehide\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageHideEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"hidden\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    var pageUnloadAdded = _addEventListeners([strPageHide], listener, excludeEvents, newNamespaces);\r\n    if (!excludeEvents || arrIndexOf(excludeEvents, strVisibilityChangeEvt) === -1) {\r\n        pageUnloadAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageUnloadAdded;\r\n    }\r\n    if (!pageUnloadAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageUnloadAdded = addPageHideEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageUnloadAdded;\r\n}\r\n/**\r\n * Removes the pageHide event listeners added by addPageHideEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageHideEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageHideEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    removeEventListeners([strPageHide], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n/**\r\n * Listen to the pageshow and visibility changing to 'visible' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page is show event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional/Recommended] A Namespace to append to the event listeners so they can be uniquely\r\n * identified and removed based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageShowEventListener\" can remove these events.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageShowEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"visible\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    var pageShowAdded = _addEventListeners([strPageShow], listener, excludeEvents, newNamespaces);\r\n    pageShowAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageShowAdded;\r\n    if (!pageShowAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageShowAdded = addPageShowEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageShowAdded;\r\n}\r\n/**\r\n * Removes the pageShow event listeners added by addPageShowEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageShowEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageShowEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    removeEventListeners([strPageShow], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n//# sourceMappingURL=EventHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjAssign, ObjClass } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, asString as asString21, isArray, isBoolean, isError, isFunction, isNullOrUndefined, isNumber, isObject, isPlainObject, isString, isUndefined, objDeepFreeze, objDefine, objForEachKey, objHasOwn, strIndexOf, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_APPLY, _DYN_GET_ALL_RESPONSE_HEA5, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_REPLACE, _DYN_SPLIT, _DYN_STATUS, _DYN_SUBSTRING, _DYN_TO_LOWER_CASE } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// RESTRICT and AVOID circular dependencies you should not import other contained modules or export the contents of this file directly\r\n// Added to help with minification\r\nvar strGetPrototypeOf = \"getPrototypeOf\";\r\nvar rCamelCase = /-([a-z])/g;\r\nvar rNormalizeInvalid = /([^\\w\\d_$])/g;\r\nvar rLeadingNumeric = /^(\\d+[\\w\\d_$])/;\r\nexport var _getObjProto = Object[strGetPrototypeOf];\r\nexport function isNotUndefined(value) {\r\n    return !isUndefined(value);\r\n}\r\nexport function isNotNullOrUndefined(value) {\r\n    return !isNullOrUndefined(value);\r\n}\r\n/**\r\n * Validates that the string name conforms to the JS IdentifierName specification and if not\r\n * normalizes the name so that it would. This method does not identify or change any keywords\r\n * meaning that if you pass in a known keyword the same value will be returned.\r\n * This is a simplified version\r\n * @param name - The name to validate\r\n */\r\nexport function normalizeJsName(name) {\r\n    var value = name;\r\n    if (value && isString(value)) {\r\n        // CamelCase everything after the \"-\" and remove the dash\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rCamelCase, function (_all, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rNormalizeInvalid, \"_\");\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rLeadingNumeric, function (_all, match) {\r\n            return \"_\" + match;\r\n        });\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * A simple wrapper (for minification support) to check if the value contains the search string.\r\n * @param value - The string value to check for the existence of the search value\r\n * @param search - The value search within the value\r\n */\r\nexport function strContains(value, search) {\r\n    if (value && search) {\r\n        return strIndexOf(value, search) !== -1;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function toISOString(date) {\r\n    return date && date.toISOString() || \"\";\r\n}\r\nexport var deepFreeze = objDeepFreeze;\r\n/**\r\n * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n */\r\nexport function getExceptionName(object) {\r\n    if (isError(object)) {\r\n        return object[_DYN_NAME /* @min:%2ename */];\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Sets the provided value on the target instance using the field name when the provided chk function returns true, the chk\r\n * function will only be called if the new value is no equal to the original value.\r\n * @param target - The target object\r\n * @param field - The key of the target\r\n * @param value - The value to set\r\n * @param valChk - [Optional] Callback to check the value that if supplied will be called check if the new value can be set\r\n * @param srcChk - [Optional] Callback to check to original value that if supplied will be called if the new value should be set (if allowed)\r\n * @returns The existing or new value, depending what was set\r\n */\r\nexport function setValue(target, field, value, valChk, srcChk) {\r\n    var theValue = value;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (theValue !== value && (!srcChk || srcChk(theValue)) && (!valChk || valChk(value))) {\r\n            theValue = value;\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Returns the current value from the target object if not null or undefined otherwise sets the new value and returns it\r\n * @param target - The target object to return or set the default value\r\n * @param field - The key for the field to set on the target\r\n * @param defValue - [Optional] The value to set if not already present, when not provided a empty object will be added\r\n */\r\nexport function getSetValue(target, field, defValue) {\r\n    var theValue;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (!theValue && isNullOrUndefined(theValue)) {\r\n            // Supports having the default as null\r\n            theValue = !isUndefined(defValue) ? defValue : {};\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    else {\r\n        // Expanded for performance so we only check defValue if required\r\n        theValue = !isUndefined(defValue) ? defValue : {};\r\n    }\r\n    return theValue;\r\n}\r\nfunction _createProxyFunction(source, funcName) {\r\n    var srcFunc = null;\r\n    var src = null;\r\n    if (isFunction(source)) {\r\n        srcFunc = source;\r\n    }\r\n    else {\r\n        src = source;\r\n    }\r\n    return function () {\r\n        // Capture the original arguments passed to the method\r\n        var originalArguments = arguments;\r\n        if (srcFunc) {\r\n            src = srcFunc();\r\n        }\r\n        if (src) {\r\n            return src[funcName][_DYN_APPLY /* @min:%2eapply */](src, originalArguments);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Effectively assigns all enumerable properties (not just own properties) and functions (including inherited prototype) from\r\n * the source object to the target, it attempts to use proxy getters / setters (if possible) and proxy functions to avoid potential\r\n * implementation issues by assigning prototype functions as instance ones\r\n *\r\n * This method is the primary method used to \"update\" the snippet proxy with the ultimate implementations.\r\n *\r\n * Special ES3 Notes:\r\n * Updates (setting) of direct property values on the target or indirectly on the source object WILL NOT WORK PROPERLY, updates to the\r\n * properties of \"referenced\" object will work (target.context.newValue = 10 =\\> will be reflected in the source.context as it's the\r\n * same object). ES3 Failures: assigning target.myProp = 3 -\\> Won't change source.myProp = 3, likewise the reverse would also fail.\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param chkSet - An optional callback to determine whether a specific property/function should be proxied\r\n */\r\nexport function proxyAssign(target, source, chkSet) {\r\n    if (target && source && isObject(target) && isObject(source)) {\r\n        var _loop_1 = function (field) {\r\n            if (isString(field)) {\r\n                var value = source[field];\r\n                if (isFunction(value)) {\r\n                    if (!chkSet || chkSet(field, true, source, target)) {\r\n                        // Create a proxy function rather than just copying the (possible) prototype to the new object as an instance function\r\n                        target[field] = _createProxyFunction(source, field);\r\n                    }\r\n                }\r\n                else if (!chkSet || chkSet(field, false, source, target)) {\r\n                    if (objHasOwn(target, field)) {\r\n                        // Remove any previous instance property\r\n                        delete target[field];\r\n                    }\r\n                    objDefine(target, field, {\r\n                        g: function () {\r\n                            return source[field];\r\n                        },\r\n                        s: function (theValue) {\r\n                            source[field] = theValue;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        // effectively apply/proxy full source to the target instance\r\n        for (var field in source) {\r\n            _loop_1(field);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Creates a proxy function on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param name - The function name that will be added on the target\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param theFunc - The function name on the source that will be proxied on the target\r\n * @param overwriteTarget - If `false` this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctionAs(target, name, source, theFunc, overwriteTarget) {\r\n    if (target && name && source) {\r\n        if (overwriteTarget !== false || isUndefined(target[name])) {\r\n            target[name] = _createProxyFunction(source, theFunc);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Creates proxy functions on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param functionsToProxy - An array of function names that will be proxied on the target\r\n * @param overwriteTarget - If false this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctions(target, source, functionsToProxy, overwriteTarget) {\r\n    if (target && source && isObject(target) && isArray(functionsToProxy)) {\r\n        arrForEach(functionsToProxy, function (theFuncName) {\r\n            if (isString(theFuncName)) {\r\n                proxyFunctionAs(target, theFuncName, source, theFuncName, overwriteTarget);\r\n            }\r\n        });\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Simpler helper to create a dynamic class that implements the interface and populates the values with the defaults.\r\n * Only instance properties (hasOwnProperty) values are copied from the defaults to the new instance\r\n * @param defaults - Simple helper\r\n */\r\nexport function createClassFromInterface(defaults) {\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            var _this = this;\r\n            if (defaults) {\r\n                objForEachKey(defaults, function (field, value) {\r\n                    _this[field] = value;\r\n                });\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper function to assist with JIT performance for objects that have properties added / removed dynamically\r\n * this is primarily for chromium based browsers and has limited effects on Firefox and none of IE. Only call this\r\n * function after you have finished \"updating\" the object, calling this within loops reduces or defeats the benefits.\r\n * This helps when iterating using for..in, objKeys() and objForEach()\r\n * @param theObject - The object to be optimized if possible\r\n */\r\nexport function optimizeObject(theObject) {\r\n    // V8 Optimization to cause the JIT compiler to create a new optimized object for looking up the own properties\r\n    // primarily for object with <= 19 properties for >= 20 the effect is reduced or non-existent\r\n    if (theObject && ObjAssign) {\r\n        theObject = ObjClass(ObjAssign({}, theObject));\r\n    }\r\n    return theObject;\r\n}\r\nexport function objExtend(obj1, obj2, obj3, obj4, obj5, obj6) {\r\n    // Variables\r\n    var theArgs = arguments;\r\n    var extended = theArgs[0] || {};\r\n    var argLen = theArgs[_DYN_LENGTH /* @min:%2elength */];\r\n    var deep = false;\r\n    var idx = 1;\r\n    // Check for \"Deep\" flag\r\n    if (argLen > 0 && isBoolean(extended)) {\r\n        deep = extended;\r\n        extended = theArgs[idx] || {};\r\n        idx++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (!isObject(extended)) {\r\n        extended = {};\r\n    }\r\n    // Loop through each remaining object and conduct a merge\r\n    for (; idx < argLen; idx++) {\r\n        var arg = theArgs[idx];\r\n        var isArgArray = isArray(arg);\r\n        var isArgObj = isObject(arg);\r\n        for (var prop in arg) {\r\n            var propOk = (isArgArray && (prop in arg)) || (isArgObj && objHasOwn(arg, prop));\r\n            if (!propOk) {\r\n                continue;\r\n            }\r\n            var newValue = arg[prop];\r\n            var isNewArray = void 0;\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && newValue && ((isNewArray = isArray(newValue)) || isPlainObject(newValue))) {\r\n                // Grab the current value of the extended object\r\n                var clone = extended[prop];\r\n                if (isNewArray) {\r\n                    if (!isArray(clone)) {\r\n                        // We can't \"merge\" an array with a non-array so overwrite the original\r\n                        clone = [];\r\n                    }\r\n                }\r\n                else if (!isPlainObject(clone)) {\r\n                    // We can't \"merge\" an object with a non-object\r\n                    clone = {};\r\n                }\r\n                // Never move the original objects always clone them\r\n                newValue = objExtend(deep, clone, newValue);\r\n            }\r\n            // Assign the new (or previous) value (unless undefined)\r\n            if (newValue !== undefined) {\r\n                extended[prop] = newValue;\r\n            }\r\n        }\r\n    }\r\n    return extended;\r\n}\r\nexport var asString = asString21;\r\n/**\r\n * Checks if the feature is enabled on not. If the feature is not defined, it will return the default state if provided or undefined.\r\n * If the feature is defined, it will check the mode and return true if the mode is enable or false if the mode is disable.\r\n * @param feature - The feature name to check\r\n * @param cfg - The configuration object to check the feature state against\r\n * @param sdkDefaultState - Optional default state to return if the feature is not defined\r\n * @returns True if the feature is enabled, false if the feature is disabled, or undefined if the feature is not defined and no default state is provided.\r\n */\r\nexport function isFeatureEnabled(feature, cfg, sdkDefaultState) {\r\n    var ft = cfg && cfg.featureOptIn && cfg.featureOptIn[feature];\r\n    if (feature && ft) {\r\n        var mode = ft.mode;\r\n        // NOTE: None will be considered as true\r\n        if (mode === 3 /* FeatureOptInMode.enable */) {\r\n            return true;\r\n        }\r\n        else if (mode === 2 /* FeatureOptInMode.disable */) {\r\n            return false;\r\n        }\r\n    }\r\n    // Return the default state if provided or undefined\r\n    return sdkDefaultState;\r\n}\r\nexport function getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nexport function formatErrorMessageXdr(xdr, message) {\r\n    if (xdr) {\r\n        return \"XDomainRequest,Response:\" + getResponseText(xdr) || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function formatErrorMessageXhr(xhr, message) {\r\n    if (xhr) {\r\n        return \"XMLHttpRequest,Status:\" + xhr[_DYN_STATUS /* @min:%2estatus */] + \",Response:\" + getResponseText(xhr) || xhr.response || \"\";\r\n    }\r\n    return message;\r\n}\r\nexport function prependTransports(theTransports, newTransports) {\r\n    if (newTransports) {\r\n        if (isNumber(newTransports)) {\r\n            theTransports = [newTransports].concat(theTransports);\r\n        }\r\n        else if (isArray(newTransports)) {\r\n            theTransports = newTransports.concat(theTransports);\r\n        }\r\n    }\r\n    return theTransports;\r\n}\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n/**\r\n* Converts the XHR getAllResponseHeaders to a map containing the header key and value.\r\n* @internal\r\n*/\r\n// tslint:disable-next-line: align\r\nexport function convertAllHeadersToMap(headersString) {\r\n    var headers = {};\r\n    if (isString(headersString)) {\r\n        var headersArray = strTrim(headersString)[_DYN_SPLIT /* @min:%2esplit */](/[\\r\\n]+/);\r\n        arrForEach(headersArray, function (headerEntry) {\r\n            if (headerEntry) {\r\n                var idx = headerEntry[_DYN_INDEX_OF /* @min:%2eindexOf */](\": \");\r\n                if (idx !== -1) {\r\n                    // The new spec has the headers returning all as lowercase -- but not all browsers do this yet\r\n                    var header = strTrim(headerEntry.substring(0, idx))[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                    var value = strTrim(headerEntry[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                    headers[header] = value;\r\n                }\r\n                else {\r\n                    headers[strTrim(headerEntry)] = 1;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return headers;\r\n}\r\n/**\r\n* append the XHR headers.\r\n* @internal\r\n*/\r\nexport function _appendHeader(theHeaders, xhr, name) {\r\n    if (!theHeaders[name] && xhr && xhr.getResponseHeader) {\r\n        var value = xhr.getResponseHeader(name);\r\n        if (value) {\r\n            theHeaders[name] = strTrim(value);\r\n        }\r\n    }\r\n    return theHeaders;\r\n}\r\nvar STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nvar STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nvar STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\n/**\r\n* get the XHR getAllResponseHeaders.\r\n* @internal\r\n*/\r\nexport function _getAllResponseHeaders(xhr, isOneDs) {\r\n    var theHeaders = {};\r\n    if (!xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]) {\r\n        // Firefox 2-63 doesn't have getAllResponseHeaders function but it does have getResponseHeader\r\n        // Only call these if getAllResponseHeaders doesn't exist, otherwise we can get invalid response errors\r\n        // as collector is not currently returning the correct header to allow JS to access these headers\r\n        if (!!isOneDs) {\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_TIME_DELTA_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_HEADER);\r\n            theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_SECONDS_HEADER);\r\n        }\r\n    }\r\n    else {\r\n        theHeaders = convertAllHeadersToMap(xhr[_DYN_GET_ALL_RESPONSE_HEA5 /* @min:%2egetAllResponseHeaders */]());\r\n    }\r\n    return theHeaders;\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\nexport var UNDEFINED_VALUE = undefined;\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_CHANNELS = \"channels\";\r\nexport var STR_CORE = \"core\";\r\nexport var STR_CREATE_PERF_MGR = \"createPerfMgr\";\r\nexport var STR_DISABLED = \"disabled\";\r\nexport var STR_EXTENSION_CONFIG = \"extensionConfig\";\r\nexport var STR_EXTENSIONS = \"extensions\";\r\nexport var STR_PROCESS_TELEMETRY = \"processTelemetry\";\r\nexport var STR_PRIORITY = \"priority\";\r\nexport var STR_EVENTS_SENT = \"eventsSent\";\r\nexport var STR_EVENTS_DISCARDED = \"eventsDiscarded\";\r\nexport var STR_EVENTS_SEND_REQUEST = \"eventsSendRequest\";\r\nexport var STR_PERF_EVENT = \"perfEvent\";\r\nexport var STR_OFFLINE_STORE = \"offlineEventsStored\";\r\nexport var STR_OFFLINE_SENT = \"offlineBatchSent\";\r\nexport var STR_OFFLINE_DROP = \"offlineBatchDrop\";\r\nexport var STR_GET_PERF_MGR = \"getPerfMgr\";\r\nexport var STR_DOMAIN = \"domain\";\r\nexport var STR_PATH = \"path\";\r\nexport var STR_NOT_DYNAMIC_ERROR = \"Not dynamic - \";\r\nexport var STR_REDACTED = \"REDACTED\";\r\nexport var DEFAULT_SENSITIVE_PARAMS = [\"sig\", \"Signature\", \"AWSAccessKeyId\", \"X-Goog-Signature\"];\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isArray, isFunction, objDefine, utcNow } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_CTX, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_CTX } from \"../__DynamicConstants\";\r\nimport { STR_GET_PERF_MGR, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar strExecutionContextKey = \"ctx\";\r\nvar strParentContextKey = \"ParentContextKey\";\r\nvar strChildrenContextKey = \"ChildrenContextKey\";\r\nvar _defaultPerfManager = null;\r\nvar PerfEvent = /** @class */ (function () {\r\n    function PerfEvent(name, payloadDetails, isAsync) {\r\n        var _self = this;\r\n        _self.start = utcNow();\r\n        _self[_DYN_NAME /* @min:%2ename */] = name;\r\n        _self.isAsync = isAsync;\r\n        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return false; };\r\n        if (isFunction(payloadDetails)) {\r\n            // Create an accessor to minimize the potential performance impact of executing the payloadDetails callback\r\n            var theDetails_1;\r\n            objDefine(_self, \"payload\", {\r\n                g: function () {\r\n                    // Delay the execution of the payloadDetails until needed\r\n                    if (!theDetails_1 && isFunction(payloadDetails)) {\r\n                        theDetails_1 = payloadDetails();\r\n                        // clear it out now so the referenced objects can be garbage collected\r\n                        payloadDetails = null;\r\n                    }\r\n                    return theDetails_1;\r\n                }\r\n            });\r\n        }\r\n        _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n            if (key) {\r\n                // The parent and child links are located directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey] || key === PerfEvent[strChildrenContextKey]) {\r\n                    return _self[key];\r\n                }\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            }\r\n            return null;\r\n        };\r\n        _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n            if (key) {\r\n                // Put the parent and child links directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey]) {\r\n                    // Simple assumption, if we are setting a parent then we must be a child\r\n                    if (!_self[key]) {\r\n                        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return true; };\r\n                    }\r\n                    _self[key] = value;\r\n                }\r\n                else if (key === PerfEvent[strChildrenContextKey]) {\r\n                    _self[key] = value;\r\n                }\r\n                else {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            }\r\n        };\r\n        _self.complete = function () {\r\n            var childTime = 0;\r\n            var childEvts = _self[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n            if (isArray(childEvts)) {\r\n                for (var lp = 0; lp < childEvts[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var childEvt = childEvts[lp];\r\n                    if (childEvt) {\r\n                        childTime += childEvt.time;\r\n                    }\r\n                }\r\n            }\r\n            _self.time = utcNow() - _self.start;\r\n            _self.exTime = _self.time - childTime;\r\n            _self.complete = function () { };\r\n        };\r\n    }\r\n    PerfEvent.ParentContextKey = \"parent\";\r\n    PerfEvent.ChildrenContextKey = \"childEvts\";\r\n    return PerfEvent;\r\n}());\r\nexport { PerfEvent };\r\nvar PerfManager = /** @class */ (function () {\r\n    function PerfManager(manager) {\r\n        /**\r\n         * General bucket used for execution context set and retrieved via setCtx() and getCtx.\r\n         * Defined as private so it can be visualized via the DebugPlugin\r\n         */\r\n        this.ctx = {};\r\n        dynamicProto(PerfManager, this, function (_self) {\r\n            _self.create = function (src, payloadDetails, isAsync) {\r\n                // TODO (@MSNev): at some point we will want to add additional configuration to \"select\" which events to instrument\r\n                // for now this is just a simple do everything.\r\n                return new PerfEvent(src, payloadDetails, isAsync);\r\n            };\r\n            _self.fire = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    perfEvent.complete();\r\n                    if (manager && isFunction(manager[STR_PERF_EVENT /* @min:%2eperfEvent */])) {\r\n                        manager[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n                if (key) {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            };\r\n            _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for PerfManager.prototype.create.\r\n// Removed Stub for PerfManager.prototype.fire.\r\n// Removed Stub for PerfManager.prototype.setCtx.\r\n// Removed Stub for PerfManager.prototype.getCtx.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    PerfManager.__ieDyn=1;\n\n    return PerfManager;\r\n}());\r\nexport { PerfManager };\r\nvar doPerfActiveKey = \"CoreUtils.doPerf\";\r\n/**\r\n * Helper function to wrap a function with a perf event\r\n * @param mgrSource - The Performance Manager or a Performance provider source (may be null)\r\n * @param getSource - The callback to create the source name for the event (if perf monitoring is enabled)\r\n * @param func - The function to call and measure\r\n * @param details - A function to return the payload details\r\n * @param isAsync - Is the event / function being call asynchronously or synchronously\r\n */\r\nexport function doPerf(mgrSource, getSource, func, details, isAsync) {\r\n    if (mgrSource) {\r\n        var perfMgr = mgrSource;\r\n        if (perfMgr[STR_GET_PERF_MGR]) {\r\n            // Looks like a perf manager provider object\r\n            perfMgr = perfMgr[STR_GET_PERF_MGR]();\r\n        }\r\n        if (perfMgr) {\r\n            var perfEvt = void 0;\r\n            var currentActive = perfMgr[_DYN_GET_CTX /* @min:%2egetCtx */](doPerfActiveKey);\r\n            try {\r\n                perfEvt = perfMgr.create(getSource(), details, isAsync);\r\n                if (perfEvt) {\r\n                    if (currentActive && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                        perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strParentContextKey], currentActive);\r\n                        if (currentActive[_DYN_GET_CTX /* @min:%2egetCtx */] && currentActive[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                            var children = currentActive[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n                            if (!children) {\r\n                                children = [];\r\n                                currentActive[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strChildrenContextKey], children);\r\n                            }\r\n                            children[_DYN_PUSH /* @min:%2epush */](perfEvt);\r\n                        }\r\n                    }\r\n                    // Set this event as the active event now\r\n                    perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, perfEvt);\r\n                    return func(perfEvt);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (perfEvt && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                    perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](\"exception\", ex);\r\n                }\r\n            }\r\n            finally {\r\n                // fire the perf event\r\n                if (perfEvt) {\r\n                    perfMgr.fire(perfEvt);\r\n                }\r\n                // Reset the active event to the previous value\r\n                perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, currentActive);\r\n            }\r\n        }\r\n    }\r\n    return func();\r\n}\r\n/**\r\n * Set the global performance manager to use when there is no core instance or it has not been initialized yet.\r\n * @param perfManager - The IPerfManager instance to use when no performance manager is supplied.\r\n */\r\nexport function setGblPerfMgr(perfManager) {\r\n    _defaultPerfManager = perfManager;\r\n}\r\n/**\r\n * Get the current global performance manager that will be used with no performance manager is supplied.\r\n * @returns - The current default manager\r\n */\r\nexport function getGblPerfMgr() {\r\n    return _defaultPerfManager;\r\n}\r\n//# sourceMappingURL=PerfManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { arrForEach, dumpObj, isArray, isFunction, isNullOrUndefined, isUndefined, objForEachKey, objFreeze, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _applyDefaultValue } from \"../Config/ConfigDefaults\";\r\nimport { createDynamicConfig } from \"../Config/DynamicConfig\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_IDENTIFIER, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UNLOAD, _DYN_UPDATE } from \"../__DynamicConstants\";\r\nimport { _throwInternal, safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { proxyFunctions } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_DISABLED, STR_EMPTY, STR_EXTENSION_CONFIG, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { doPerf } from \"./PerfManager\";\r\nimport { _getPluginState } from \"./TelemetryHelpers\";\r\nvar strTelemetryPluginChain = \"TelemetryPluginChain\";\r\nvar strHasRunFlags = \"_hasRun\";\r\nvar strGetTelCtx = \"_getTelCtx\";\r\nvar _chainId = 0;\r\nfunction _getNextProxyStart(proxy, core, startAt) {\r\n    while (proxy) {\r\n        if (proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]() === startAt) {\r\n            return proxy;\r\n        }\r\n        proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    }\r\n    // This wasn't found in the existing chain so create an isolated one with just this plugin\r\n    return createTelemetryProxyChain([startAt], core.config || {}, core);\r\n}\r\n/**\r\n * @ignore\r\n * @param telemetryChain\r\n * @param dynamicHandler\r\n * @param core\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n * @returns\r\n */\r\nfunction _createInternalContext(telemetryChain, dynamicHandler, core, startAt) {\r\n    // We have a special case where we want to start execution from this specific plugin\r\n    // or we simply reuse the existing telemetry plugin chain (normal execution case)\r\n    var _nextProxy = null; // By Default set as no next plugin\r\n    var _onComplete = [];\r\n    if (!dynamicHandler) {\r\n        dynamicHandler = createDynamicConfig({}, null, core[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    if (startAt !== null) {\r\n        // There is no next element (null) vs not defined (undefined) so use the full chain\r\n        _nextProxy = startAt ? _getNextProxyStart(telemetryChain, core, startAt) : telemetryChain;\r\n    }\r\n    var context = {\r\n        _next: _moveNext,\r\n        ctx: {\r\n            core: function () {\r\n                return core;\r\n            },\r\n            diagLog: function () {\r\n                return safeGetLogger(core, dynamicHandler.cfg);\r\n            },\r\n            getCfg: function () {\r\n                return dynamicHandler.cfg;\r\n            },\r\n            getExtCfg: _resolveExtCfg,\r\n            getConfig: _getConfig,\r\n            hasNext: function () {\r\n                return !!_nextProxy;\r\n            },\r\n            getNext: function () {\r\n                return _nextProxy;\r\n            },\r\n            setNext: function (nextPlugin) {\r\n                _nextProxy = nextPlugin;\r\n            },\r\n            iterate: _iterateChain,\r\n            onComplete: _addOnComplete\r\n        }\r\n    };\r\n    function _addOnComplete(onComplete, that) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (onComplete) {\r\n            _onComplete[_DYN_PUSH /* @min:%2epush */]({\r\n                func: onComplete,\r\n                self: !isUndefined(that) ? that : context.ctx,\r\n                args: args\r\n            });\r\n        }\r\n    }\r\n    function _moveNext() {\r\n        var nextProxy = _nextProxy;\r\n        // Automatically move to the next plugin\r\n        _nextProxy = nextProxy ? nextProxy[_DYN_GET_NEXT /* @min:%2egetNext */]() : null;\r\n        if (!nextProxy) {\r\n            var onComplete = _onComplete;\r\n            if (onComplete && onComplete[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                arrForEach(onComplete, function (completeDetails) {\r\n                    try {\r\n                        completeDetails.func.call(completeDetails.self, completeDetails.args);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(core[_DYN_LOGGER /* @min:%2elogger */], 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected Exception during onComplete - \" + dumpObj(e));\r\n                    }\r\n                });\r\n                _onComplete = [];\r\n            }\r\n        }\r\n        return nextProxy;\r\n    }\r\n    function _getExtCfg(identifier, createIfMissing) {\r\n        var idCfg = null;\r\n        var cfg = dynamicHandler.cfg;\r\n        if (cfg && identifier) {\r\n            var extCfg = cfg[STR_EXTENSION_CONFIG /* @min:%2eextensionConfig */];\r\n            if (!extCfg && createIfMissing) {\r\n                extCfg = {};\r\n            }\r\n            // Always set the value so that the property always exists\r\n            cfg[STR_EXTENSION_CONFIG] = extCfg; // Note: it is valid for the \"value\" to be undefined\r\n            // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n            extCfg = dynamicHandler.ref(cfg, STR_EXTENSION_CONFIG);\r\n            if (extCfg) {\r\n                idCfg = extCfg[identifier];\r\n                if (!idCfg && createIfMissing) {\r\n                    idCfg = {};\r\n                }\r\n                // Always set the value so that the property always exists\r\n                extCfg[identifier] = idCfg; // Note: it is valid for the \"value\" to be undefined\r\n                // Calling `ref()` has a side effect of causing the referenced property to become dynamic  (if not already)\r\n                idCfg = dynamicHandler.ref(extCfg, identifier);\r\n            }\r\n        }\r\n        return idCfg;\r\n    }\r\n    function _resolveExtCfg(identifier, defaultValues) {\r\n        var newConfig = _getExtCfg(identifier, true);\r\n        if (defaultValues) {\r\n            // Enumerate over the defaultValues and if not already populated attempt to\r\n            // find a value from the root config or use the default value\r\n            objForEachKey(defaultValues, function (field, defaultValue) {\r\n                // for each unspecified field, set the default value\r\n                if (isNullOrUndefined(newConfig[field])) {\r\n                    var cfgValue = dynamicHandler.cfg[field];\r\n                    if (cfgValue || !isNullOrUndefined(cfgValue)) {\r\n                        newConfig[field] = cfgValue;\r\n                    }\r\n                }\r\n                _applyDefaultValue(dynamicHandler, newConfig, field, defaultValue);\r\n            });\r\n        }\r\n        return dynamicHandler.setDf(newConfig, defaultValues);\r\n    }\r\n    function _getConfig(identifier, field, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = false; }\r\n        var theValue;\r\n        var extConfig = _getExtCfg(identifier, false);\r\n        var rootConfig = dynamicHandler.cfg;\r\n        if (extConfig && (extConfig[field] || !isNullOrUndefined(extConfig[field]))) {\r\n            theValue = extConfig[field];\r\n        }\r\n        else if (rootConfig[field] || !isNullOrUndefined(rootConfig[field])) {\r\n            theValue = rootConfig[field];\r\n        }\r\n        return (theValue || !isNullOrUndefined(theValue)) ? theValue : defaultValue;\r\n    }\r\n    function _iterateChain(cb) {\r\n        // Keep processing until we reach the end of the chain\r\n        var nextPlugin;\r\n        while (!!(nextPlugin = context._next())) {\r\n            var plugin = nextPlugin[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n            if (plugin) {\r\n                // callback with the current on\r\n                cb(plugin);\r\n            }\r\n        }\r\n    }\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryContext(telemetryChain, cfg, core, startAt) {\r\n    var config = createDynamicConfig(cfg);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(env) {\r\n        var nextPlugin = internalContext._next();\r\n        if (nextPlugin) {\r\n            // Run the next plugin which will call \"processNext()\"\r\n            nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, context);\r\n        }\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), config.cfg, core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for handling the unloading of the chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUnloadContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(unloadState) {\r\n        var nextPlugin = internalContext._next();\r\n        nextPlugin && nextPlugin[_DYN_UNLOAD /* @min:%2eunload */](context, unloadState);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUnloadContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for updating the configuration\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUpdateContext(telemetryChain, core, startAt) {\r\n    var config = createDynamicConfig(core.config);\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(updateState) {\r\n        return context.iterate(function (plugin) {\r\n            if (isFunction(plugin[_DYN_UPDATE /* @min:%2eupdate */])) {\r\n                plugin[_DYN_UPDATE /* @min:%2eupdate */](context, updateState);\r\n            }\r\n        });\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config.cfg, core, startAt);\r\n        }\r\n        return createProcessTelemetryUpdateContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates an execution chain from the array of plugins\r\n * @param plugins - The array of plugins that will be executed in this order\r\n * @param defItemCtx - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n */\r\nexport function createTelemetryProxyChain(plugins, config, core, startAt) {\r\n    var firstProxy = null;\r\n    var add = startAt ? false : true;\r\n    if (isArray(plugins) && plugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // Create the proxies and wire up the next plugin chain\r\n        var lastProxy_1 = null;\r\n        arrForEach(plugins, function (thePlugin) {\r\n            if (!add && startAt === thePlugin) {\r\n                add = true;\r\n            }\r\n            if (add && thePlugin && isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Only add plugins that are processors\r\n                var newProxy = createTelemetryPluginProxy(thePlugin, config, core);\r\n                if (!firstProxy) {\r\n                    firstProxy = newProxy;\r\n                }\r\n                if (lastProxy_1) {\r\n                    // Set this new proxy as the next for the previous one\r\n                    lastProxy_1._setNext(newProxy);\r\n                }\r\n                lastProxy_1 = newProxy;\r\n            }\r\n        });\r\n    }\r\n    if (startAt && !firstProxy) {\r\n        // Special case where the \"startAt\" was not in the original list of plugins\r\n        return createTelemetryProxyChain([startAt], config, core);\r\n    }\r\n    return firstProxy;\r\n}\r\n/**\r\n * Create the processing telemetry proxy instance, the proxy is used to abstract the current plugin to allow monitoring and\r\n * execution plugins while passing around the dynamic execution state (IProcessTelemetryContext), the proxy instance no longer\r\n * contains any execution state and can be reused between requests (this was not the case for 2.7.2 and earlier with the\r\n * TelemetryPluginChain class).\r\n * @param plugin - The plugin instance to proxy\r\n * @param config - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n * @returns\r\n */\r\nexport function createTelemetryPluginProxy(plugin, config, core) {\r\n    var nextProxy = null;\r\n    var hasProcessTelemetry = isFunction(plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]);\r\n    var hasSetNext = isFunction(plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]);\r\n    var chainId;\r\n    if (plugin) {\r\n        chainId = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"-\" + plugin[STR_PRIORITY /* @min:%2epriority */] + \"-\" + _chainId++;\r\n    }\r\n    else {\r\n        chainId = \"Unknown-0-\" + _chainId++;\r\n    }\r\n    var proxyChain = {\r\n        getPlugin: function () {\r\n            return plugin;\r\n        },\r\n        getNext: function () {\r\n            return nextProxy;\r\n        },\r\n        processTelemetry: _processTelemetry,\r\n        unload: _unloadPlugin,\r\n        update: _updatePlugin,\r\n        _id: chainId,\r\n        _setNext: function (nextPlugin) {\r\n            nextProxy = nextPlugin;\r\n        }\r\n    };\r\n    function _getTelCtx() {\r\n        var itemCtx;\r\n        // Looks like a plugin didn't pass the (optional) context, so create a new one\r\n        if (plugin && isFunction(plugin[strGetTelCtx])) {\r\n            // This plugin extends from the BaseTelemetryPlugin so lets use it\r\n            itemCtx = plugin[strGetTelCtx]();\r\n        }\r\n        if (!itemCtx) {\r\n            // Create a temporary one\r\n            itemCtx = createProcessTelemetryContext(proxyChain, config, core);\r\n        }\r\n        return itemCtx;\r\n    }\r\n    function _processChain(itemCtx, processPluginFn, name, details, isAsync) {\r\n        var hasRun = false;\r\n        var identifier = plugin ? plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] : strTelemetryPluginChain;\r\n        var hasRunContext = itemCtx[strHasRunFlags];\r\n        if (!hasRunContext) {\r\n            // Assign and populate\r\n            hasRunContext = itemCtx[strHasRunFlags] = {};\r\n        }\r\n        // Ensure that we keep the context in sync\r\n        itemCtx.setNext(nextProxy);\r\n        if (plugin) {\r\n            doPerf(itemCtx[STR_CORE /* @min:%2ecore */](), function () { return identifier + \":\" + name; }, function () {\r\n                // Mark this component as having run\r\n                hasRunContext[chainId] = true;\r\n                try {\r\n                    // Set a flag on the next plugin so we know if it was attempted to be executed\r\n                    var nextId = nextProxy ? nextProxy._id : STR_EMPTY;\r\n                    if (nextId) {\r\n                        hasRunContext[nextId] = false;\r\n                    }\r\n                    hasRun = processPluginFn(itemCtx);\r\n                }\r\n                catch (error) {\r\n                    var hasNextRun = nextProxy ? hasRunContext[nextProxy._id] : true;\r\n                    if (hasNextRun) {\r\n                        // The next plugin after us has already run so set this one as complete\r\n                        hasRun = true;\r\n                    }\r\n                    if (!nextProxy || !hasNextRun) {\r\n                        // Either we have no next plugin or the current one did not attempt to call the next plugin\r\n                        // Which means the current one is the root of the failure so log/report this failure\r\n                        _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 73 /* _eInternalMessageId.PluginException */, \"Plugin [\" + identifier + \"] failed during \" + name + \" - \" + dumpObj(error) + \", run flags: \" + dumpObj(hasRunContext));\r\n                    }\r\n                }\r\n            }, details, isAsync);\r\n        }\r\n        return hasRun;\r\n    }\r\n    function _processTelemetry(env, itemCtx) {\r\n        itemCtx = itemCtx || _getTelCtx();\r\n        function _callProcessTelemetry(itemCtx) {\r\n            if (!plugin || !hasProcessTelemetry) {\r\n                return false;\r\n            }\r\n            var pluginState = _getPluginState(plugin);\r\n            if (pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] || pluginState[STR_DISABLED]) {\r\n                return false;\r\n            }\r\n            // Ensure that we keep the context in sync (for processNext()), just in case a plugin\r\n            // doesn't calls processTelemetry() instead of itemContext.processNext() or some\r\n            // other form of error occurred\r\n            if (hasSetNext) {\r\n                // Backward compatibility setting the next plugin on the instance\r\n                plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](nextProxy);\r\n            }\r\n            plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, itemCtx);\r\n            // Process Telemetry is expected to call itemCtx.processNext() or nextPlugin.processTelemetry()\r\n            return true;\r\n        }\r\n        if (!_processChain(itemCtx, _callProcessTelemetry, \"processTelemetry\", function () { return ({ item: env }); }, !(env.sync))) {\r\n            // The underlying plugin is either not defined, not enabled or does not have a processTelemetry implementation\r\n            // so we still want the next plugin to be executed.\r\n            itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n        }\r\n    }\r\n    function _unloadPlugin(unloadCtx, unloadState) {\r\n        function _callTeardown() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only teardown the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === unloadCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    // Handle plugins that don't extend from the BaseTelemetryPlugin\r\n                    pluginState[STR_CORE /* @min:%2ecore */] = null;\r\n                    pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] = true;\r\n                    pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = false;\r\n                    if (plugin[_DYN_TEARDOWN /* @min:%2eteardown */] && plugin[_DYN_TEARDOWN /* @min:%2eteardown */](unloadCtx, unloadState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(unloadCtx, _callTeardown, \"unload\", function () { }, unloadState.isAsync)) {\r\n            // Only called if we hasRun was not true\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n        }\r\n    }\r\n    function _updatePlugin(updateCtx, updateState) {\r\n        function _callUpdate() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only update the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === updateCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    if (plugin[_DYN_UPDATE /* @min:%2eupdate */] && plugin[_DYN_UPDATE /* @min:%2eupdate */](updateCtx, updateState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(updateCtx, _callUpdate, \"update\", function () { }, false)) {\r\n            // Only called if we hasRun was not true\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n        }\r\n    }\r\n    return objFreeze(proxyChain);\r\n}\r\n/**\r\n * This class will be removed!\r\n * @deprecated use createProcessTelemetryContext() instead\r\n */\r\nvar ProcessTelemetryContext = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n     * @param plugins - The plugin instances that will be executed\r\n     * @param config - The current config\r\n     * @param core - The current core instance\r\n     */\r\n    function ProcessTelemetryContext(pluginChain, config, core, startAt) {\r\n        var _self = this;\r\n        var context = createProcessTelemetryContext(pluginChain, config, core, startAt);\r\n        // Proxy all functions of the context to this object\r\n        proxyFunctions(_self, context, objKeys(context));\r\n    }\r\n    return ProcessTelemetryContext;\r\n}());\r\nexport { ProcessTelemetryContext };\r\n//# sourceMappingURL=ProcessTelemetryContext.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { createPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { arrForEach, dumpObj, getInst, getNavigator, getWindow, isFunction, isString, objKeys } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DATA, _DYN_HEADERS, _DYN_INITIALIZE, _DYN_LENGTH, _DYN_MESSAGE, _DYN_PUSH, _DYN_REPLACE, _DYN_STATUS, _DYN_TIMEOUT, _DYN_TO_LOWER_CASE, _DYN_URL_STRING, _DYN_VALUE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { DisabledPropertyName } from \"./Constants\";\r\nimport { _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { getLocation, isBeaconsSupported, isFetchSupported, isXhrSupported, useXDomainRequest } from \"./EnvUtils\";\r\nimport { _getAllResponseHeaders, formatErrorMessageXdr, formatErrorMessageXhr, getResponseText, openXhr } from \"./HelperFuncs\";\r\nvar STR_EMPTY = \"\";\r\nvar STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\nvar STR_POST_METHOD = \"POST\";\r\n/**\r\n * This Internal component\r\n * Manager SendPost functions\r\n * SendPostManger\r\n * @internal for internal use only\r\n */\r\nvar SenderPostManager = /** @class */ (function () {\r\n    function SenderPostManager() {\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _enableSendPromise;\r\n        var _isInitialized;\r\n        var _diagLog;\r\n        var _isOneDs;\r\n        var _onCompleteFuncs;\r\n        var _disableCredentials;\r\n        var _fetchCredentials;\r\n        var _fallbackInst;\r\n        var _disableXhr;\r\n        var _disableBeacon;\r\n        var _disableBeaconSync;\r\n        var _disableFetchKeepAlive;\r\n        var _addNoResponse;\r\n        var _timeoutWrapper;\r\n        dynamicProto(SenderPostManager, this, function (_self, _base) {\r\n            var _sendCredentials = true; // for 1ds\r\n            _initDefaults();\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, diagLog) {\r\n                _diagLog = diagLog;\r\n                if (_isInitialized) {\r\n                    _throwInternal(_diagLog, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _self.SetConfig(config);\r\n                _isInitialized = true;\r\n            };\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_isInitialized, _isOneDs, _disableCredentials, _enableSendPromise];\r\n            };\r\n            // This componet might get its config from sender, offline sender, 1ds post\r\n            // so set this function to mock dynamic changes\r\n            _self.SetConfig = function (config) {\r\n                try {\r\n                    _onCompleteFuncs = config.senderOnCompleteCallBack || {};\r\n                    _disableCredentials = !!config.disableCredentials;\r\n                    _fetchCredentials = config.fetchCredentials;\r\n                    _isOneDs = !!config.isOneDs;\r\n                    _enableSendPromise = !!config.enableSendPromise;\r\n                    _disableXhr = !!config.disableXhr;\r\n                    _disableBeacon = !!config.disableBeacon;\r\n                    _disableBeaconSync = !!config.disableBeaconSync;\r\n                    _timeoutWrapper = config.timeWrapper;\r\n                    _addNoResponse = !!config.addNoResponse;\r\n                    _disableFetchKeepAlive = !!config.disableFetchKeepAlive;\r\n                    _fallbackInst = { sendPOST: _xhrSender };\r\n                    if (!_isOneDs) {\r\n                        _sendCredentials = false; // for appInsights, set it to false always\r\n                    }\r\n                    if (_disableCredentials) {\r\n                        var location_1 = getLocation();\r\n                        if (location_1 && location_1.protocol && location_1.protocol[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"file:\") {\r\n                            // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                            _sendCredentials = false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return false;\r\n            };\r\n            _self.getSyncFetchPayload = function () {\r\n                return _syncFetchPayload;\r\n            };\r\n            _self.getSenderInst = function (transports, sync) {\r\n                if (transports && transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    return _getSenderInterface(transports, sync);\r\n                }\r\n                return null;\r\n            };\r\n            _self.getFallbackInst = function () {\r\n                return _fallbackInst;\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function (unloadCtx, unloadState) {\r\n                _initDefaults();\r\n            };\r\n            _self.preparePayload = function (callback, zipPayload, payload, isSync) {\r\n                if (!zipPayload || isSync || !payload[_DYN_DATA /* @min:%2edata */]) {\r\n                    // If the request is synchronous, the body is null or undefined or Compression is not supported, we don't need to compress it\r\n                    callback(payload);\r\n                    return;\r\n                }\r\n                try {\r\n                    var csStream = getInst(\"CompressionStream\");\r\n                    if (!isFunction(csStream)) {\r\n                        callback(payload);\r\n                        return;\r\n                    }\r\n                    // Create a readable stream from the uint8 data\r\n                    var body = new ReadableStream({\r\n                        start: function (controller) {\r\n                            controller.enqueue(isString(payload[_DYN_DATA /* @min:%2edata */]) ? new TextEncoder().encode(payload[_DYN_DATA /* @min:%2edata */]) : payload[_DYN_DATA /* @min:%2edata */]);\r\n                            controller.close();\r\n                        }\r\n                    });\r\n                    var compressedStream = body.pipeThrough(new csStream(\"gzip\"));\r\n                    var reader_1 = compressedStream.getReader();\r\n                    var chunks_1 = [];\r\n                    var totalLength_1 = 0;\r\n                    var callbackCalled_1 = false;\r\n                    // Process each chunk from the compressed stream reader\r\n                    doAwaitResponse(reader_1.read(), function processChunk(response) {\r\n                        if (!callbackCalled_1 && !response.rejected) {\r\n                            // Process the chunk and continue reading\r\n                            var result = response[_DYN_VALUE /* @min:%2evalue */];\r\n                            if (!result.done) {\r\n                                // Add current chunk and continue reading\r\n                                chunks_1[_DYN_PUSH /* @min:%2epush */](result[_DYN_VALUE /* @min:%2evalue */]);\r\n                                totalLength_1 += result.value[_DYN_LENGTH /* @min:%2elength */];\r\n                                return doAwaitResponse(reader_1.read(), processChunk);\r\n                            }\r\n                            // We are complete so combine all chunks\r\n                            var combined = new Uint8Array(totalLength_1);\r\n                            var offset = 0;\r\n                            for (var _i = 0, chunks_2 = chunks_1; _i < chunks_2.length; _i++) {\r\n                                var chunk = chunks_2[_i];\r\n                                combined.set(chunk, offset);\r\n                                offset += chunk[_DYN_LENGTH /* @min:%2elength */];\r\n                            }\r\n                            // Update payload with compressed data\r\n                            payload[_DYN_DATA /* @min:%2edata */] = combined;\r\n                            payload[_DYN_HEADERS /* @min:%2eheaders */][\"Content-Encoding\"] = \"gzip\";\r\n                            payload._chunkCount = chunks_1[_DYN_LENGTH /* @min:%2elength */];\r\n                        }\r\n                        if (!callbackCalled_1) {\r\n                            // Send the processed payload to the callback, if not already called\r\n                            // If the response was rejected, we will call the callback with the original payload\r\n                            // As it only gets \"replaced\" if the compression was successful\r\n                            callbackCalled_1 = true;\r\n                            callback(payload);\r\n                        }\r\n                        // We don't need to return anything as this will cause the calling chain to be resolved and closed\r\n                    });\r\n                    // returning the reader to allow the caller to cancel the stream if needed\r\n                    // This is not a requirement but allows for better control over the stream, like if we detect that we are unloading\r\n                    // we could use reader.cancel() to stop the stream and avoid sending the request, but this may still be an asynchronous operation\r\n                    // and may not be possible to cancel the stream in time\r\n                    return reader_1;\r\n                }\r\n                catch (error) {\r\n                    // CompressionStream is not available at all\r\n                    callback(payload);\r\n                    return;\r\n                }\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(res, onComplete) {\r\n                _doOnComplete(onComplete, 200, {}, res);\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(message, onComplete) {\r\n                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _doOnComplete(onComplete, 400, {});\r\n            }\r\n            function _onNoPayloadUrl(onComplete) {\r\n                _onError(\"No endpoint url is provided for the batch\", onComplete);\r\n            }\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                var transportType = 0 /* TransportType.NotSet */;\r\n                var sendPostFunc = null;\r\n                var lp = 0;\r\n                while (sendPostFunc == null && lp < transports[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    transportType = transports[lp];\r\n                    if (!_disableXhr && transportType === 1 /* TransportType.Xhr */) {\r\n                        if (useXDomainRequest()) {\r\n                            // IE 8 and 9\r\n                            sendPostFunc = _xdrSender;\r\n                        }\r\n                        else if (isXhrSupported()) {\r\n                            sendPostFunc = _xhrSender;\r\n                        }\r\n                    }\r\n                    else if (transportType === 2 /* TransportType.Fetch */ && isFetchSupported(syncSupport) && (!syncSupport || !_disableFetchKeepAlive)) {\r\n                        sendPostFunc = _doFetchSender;\r\n                    }\r\n                    else if (transportType === 3 /* TransportType.Beacon */ && isBeaconsSupported() && (syncSupport ? !_disableBeaconSync : !_disableBeacon)) {\r\n                        sendPostFunc = _beaconSender;\r\n                    }\r\n                    lp++;\r\n                }\r\n                if (sendPostFunc) {\r\n                    return {\r\n                        _transport: transportType,\r\n                        _isSync: syncSupport,\r\n                        sendPOST: sendPostFunc\r\n                    };\r\n                }\r\n                return null;\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete && oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n            }\r\n            function _doBeaconSend(payload, oncomplete) {\r\n                var nav = getNavigator();\r\n                var url = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!url) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    // return true here, because we don't want to retry it with fallback sender\r\n                    return true;\r\n                }\r\n                url = payload[_DYN_URL_STRING /* @min:%2eurlString */] + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                // Chrome only allows CORS-safelisted values for the sendBeacon data argument\r\n                // see: https://bugs.chromium.org/p/chromium/issues/detail?id=720283\r\n                var plainTextBatch = _isOneDs ? data : new Blob([data], { type: \"text/plain;charset=UTF-8\" });\r\n                // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                var queued = nav.sendBeacon(url, plainTextBatch);\r\n                return queued;\r\n            }\r\n            /**\r\n             * Send Beacon API request\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - not used\r\n             * Note: Beacon API does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _beaconSender(payload, oncomplete, sync) {\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                try {\r\n                    if (data) {\r\n                        // The sendBeacon method returns true if the user agent is able to successfully queue the data for transfer. Otherwise it returns false.\r\n                        if (!_doBeaconSend(payload, oncomplete)) {\r\n                            var onRetry = _onCompleteFuncs && _onCompleteFuncs.beaconOnRetry;\r\n                            if (onRetry && isFunction(onRetry)) {\r\n                                onRetry(payload, oncomplete, _doBeaconSend);\r\n                            }\r\n                            else {\r\n                                _fallbackInst && _fallbackInst.sendPOST(payload, oncomplete, true);\r\n                                _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            // if can send\r\n                            _onSuccess(STR_EMPTY, oncomplete); // if success, onComplete is called with status code 200\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _isOneDs && _warnToConsole(_diagLog, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(e));\r\n                    _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, STR_EMPTY);\r\n                }\r\n                return;\r\n            }\r\n            /**\r\n             * Send XMLHttpRequest\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - Indicates if the request should be sent synchronously\r\n             */\r\n            function _xhrSender(payload, oncomplete, sync) {\r\n                //let  internalPayload = payload as IInternalPayloadData;\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (_isOneDs && sync && payload.disableXhrSync) {\r\n                    sync = false;\r\n                }\r\n                //const xhr = new XMLHttpRequest();\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                var xhr = openXhr(STR_POST_METHOD, endPointUrl, _sendCredentials, true, sync, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                if (!_isOneDs) {\r\n                    // application/json should NOT add to 1ds post by default\r\n                    xhr.setRequestHeader(\"Content-type\", \"application/json\");\r\n                }\r\n                arrForEach(objKeys(headers), function (headerName) {\r\n                    xhr.setRequestHeader(headerName, headers[headerName]);\r\n                });\r\n                xhr.onreadystatechange = function () {\r\n                    if (!_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                        if (xhr.readyState === 4) {\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }\r\n                };\r\n                xhr.onload = function () {\r\n                    if (_isOneDs) {\r\n                        _doOnReadyFunc(xhr);\r\n                    }\r\n                };\r\n                function _doOnReadyFunc(xhr) {\r\n                    var onReadyFunc = _onCompleteFuncs && _onCompleteFuncs.xhrOnComplete;\r\n                    var onReadyFuncExist = onReadyFunc && isFunction(onReadyFunc);\r\n                    if (onReadyFuncExist) {\r\n                        onReadyFunc(xhr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        var response = getResponseText(xhr);\r\n                        _doOnComplete(oncomplete, xhr[_DYN_STATUS /* @min:%2estatus */], _getAllResponseHeaders(xhr, _isOneDs), response);\r\n                    }\r\n                }\r\n                xhr.onerror = function (event) {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 400, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    rejectFunc && rejectFunc(event);\r\n                };\r\n                xhr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, _isOneDs ? xhr[_DYN_STATUS /* @min:%2estatus */] : 500, _getAllResponseHeaders(xhr, _isOneDs), _isOneDs ? STR_EMPTY : formatErrorMessageXhr(xhr));\r\n                    resolveFunc && resolveFunc(false);\r\n                };\r\n                xhr.send(payload[_DYN_DATA /* @min:%2edata */]);\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send fetch API request\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - For fetch this identifies whether we are \"unloading\" (false) or a normal request\r\n             */\r\n            function _doFetchSender(payload, oncomplete, sync) {\r\n                var _a;\r\n                var endPointUrl = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                var batch = payload[_DYN_DATA /* @min:%2edata */];\r\n                var plainTextBatch = _isOneDs ? batch : new Blob([batch], { type: \"application/json\" });\r\n                var thePromise;\r\n                var resolveFunc;\r\n                var rejectFunc;\r\n                var requestHeaders = new Headers();\r\n                var batchLength = batch[_DYN_LENGTH /* @min:%2elength */];\r\n                var ignoreResponse = false;\r\n                var responseHandled = false;\r\n                var headers = payload[_DYN_HEADERS /* @min:%2eheaders */] || {};\r\n                //TODO: handle time out for 1ds\r\n                var init = (_a = {\r\n                        method: STR_POST_METHOD,\r\n                        body: plainTextBatch\r\n                    },\r\n                    _a[DisabledPropertyName] = true // Mark so we don't attempt to track this request\r\n                ,\r\n                    _a);\r\n                // Only add headers if there are headers to add, due to issue with some polyfills\r\n                if (payload.headers && objKeys(payload.headers)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(objKeys(headers), function (headerName) {\r\n                        requestHeaders.append(headerName, headers[headerName]);\r\n                    });\r\n                    init[_DYN_HEADERS /* @min:%2eheaders */] = requestHeaders;\r\n                }\r\n                if (_fetchCredentials) { // if user passed in this value via post channel (1ds), then use it\r\n                    init.credentials = _fetchCredentials;\r\n                }\r\n                else if (_sendCredentials && _isOneDs) {\r\n                    // for 1ds, Don't send credentials when URL is file://\r\n                    init.credentials = \"include\";\r\n                }\r\n                if (sync) {\r\n                    init.keepalive = true;\r\n                    _syncFetchPayload += batchLength;\r\n                    if (_isOneDs) {\r\n                        if (payload[\"_sendReason\"] === 2 /* SendRequestReason.Unload */) {\r\n                            // As a sync request (during unload), it is unlikely that we will get a chance to process the response so\r\n                            // just like beacon send assume that the events have been accepted and processed\r\n                            ignoreResponse = true;\r\n                            if (_addNoResponse) {\r\n                                endPointUrl += _noResponseQs;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // for appinsights, set to true for all sync request\r\n                        ignoreResponse = true;\r\n                    }\r\n                }\r\n                var request = new Request(endPointUrl, init);\r\n                try {\r\n                    // Also try and tag the request (just in case the value in init is not copied over)\r\n                    request[DisabledPropertyName] = true;\r\n                }\r\n                catch (e) {\r\n                    // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n                    // cause the request to fail and we no telemetry would be sent\r\n                }\r\n                if (!sync && _enableSendPromise) {\r\n                    thePromise = createPromise(function (resolve, reject) {\r\n                        resolveFunc = resolve;\r\n                        rejectFunc = reject;\r\n                    });\r\n                }\r\n                if (!endPointUrl) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    resolveFunc && resolveFunc(false);\r\n                    return;\r\n                }\r\n                function _handleError(res, statusCode) {\r\n                    // In case there is an error in the request. Set the status to 0 for 1ds and 400 for appInsights\r\n                    // so that the events can be retried later.\r\n                    if (statusCode) {\r\n                        _doOnComplete(oncomplete, _isOneDs ? 0 : statusCode, {}, _isOneDs ? STR_EMPTY : res);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, _isOneDs ? 0 : 400, {}, _isOneDs ? STR_EMPTY : res);\r\n                    }\r\n                }\r\n                function _onFetchComplete(response, payload, value) {\r\n                    var status = response[_DYN_STATUS /* @min:%2estatus */];\r\n                    var onCompleteFunc = _onCompleteFuncs.fetchOnComplete;\r\n                    if (onCompleteFunc && isFunction(onCompleteFunc)) {\r\n                        onCompleteFunc(response, oncomplete, value || STR_EMPTY, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, status, {}, value || STR_EMPTY);\r\n                    }\r\n                }\r\n                try {\r\n                    doAwaitResponse(fetch(_isOneDs ? endPointUrl : request, _isOneDs ? init : null), function (result) {\r\n                        if (sync) {\r\n                            _syncFetchPayload -= batchLength;\r\n                            batchLength = 0;\r\n                        }\r\n                        if (!responseHandled) {\r\n                            responseHandled = true;\r\n                            if (!result.rejected) {\r\n                                var response_1 = result[_DYN_VALUE /* @min:%2evalue */];\r\n                                try {\r\n                                    /**\r\n                                     * The Promise returned from fetch() wont reject on HTTP error status even if the response is an HTTP 404 or 500.\r\n                                     * Instead, it will resolve normally (with ok status set to false), and it will only reject on network failure\r\n                                     * or if anything prevented the request from completing.\r\n                                     */\r\n                                    if (!_isOneDs && !response_1.ok) {\r\n                                        // this is for appInsights only\r\n                                        if (response_1[_DYN_STATUS /* @min:%2estatus */]) {\r\n                                            _handleError(response_1.statusText, response_1[_DYN_STATUS /* @min:%2estatus */]);\r\n                                        }\r\n                                        else {\r\n                                            _handleError(response_1.statusText, 499);\r\n                                        }\r\n                                        resolveFunc && resolveFunc(false);\r\n                                    }\r\n                                    else {\r\n                                        if (_isOneDs && !response_1.body) {\r\n                                            _onFetchComplete(response_1, null, STR_EMPTY);\r\n                                            resolveFunc && resolveFunc(true);\r\n                                        }\r\n                                        else {\r\n                                            doAwaitResponse(response_1.text(), function (resp) {\r\n                                                _onFetchComplete(response_1, payload, resp[_DYN_VALUE /* @min:%2evalue */]);\r\n                                                resolveFunc && resolveFunc(true);\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                    if (response_1 && response_1[_DYN_STATUS /* @min:%2estatus */]) {\r\n                                        _handleError(dumpObj(e), response_1[_DYN_STATUS /* @min:%2estatus */]);\r\n                                    }\r\n                                    else {\r\n                                        _handleError(dumpObj(e), 499);\r\n                                    }\r\n                                    rejectFunc && rejectFunc(e);\r\n                                }\r\n                            }\r\n                            else {\r\n                                _handleError(result.reason && result.reason[_DYN_MESSAGE /* @min:%2emessage */], 499);\r\n                                rejectFunc && rejectFunc(result.reason);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                catch (e) {\r\n                    if (!responseHandled) {\r\n                        _handleError(dumpObj(e), 499);\r\n                        rejectFunc && rejectFunc(e);\r\n                    }\r\n                }\r\n                if (ignoreResponse && !responseHandled) {\r\n                    // Assume success during unload processing as we most likely won't get the response\r\n                    responseHandled = true;\r\n                    _doOnComplete(oncomplete, 200, {});\r\n                    resolveFunc && resolveFunc(true);\r\n                }\r\n                if (_isOneDs && !responseHandled && payload[_DYN_TIMEOUT /* @min:%2etimeout */] > 0) {\r\n                    // Simulate timeout\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        if (!responseHandled) {\r\n                            // Assume a 500 response (which will cause a retry)\r\n                            responseHandled = true;\r\n                            _doOnComplete(oncomplete, 500, {});\r\n                            resolveFunc && resolveFunc(true);\r\n                        }\r\n                    }, payload[_DYN_TIMEOUT /* @min:%2etimeout */]);\r\n                }\r\n                return thePromise;\r\n            }\r\n            /**\r\n             * Send XDomainRequest\r\n             * @param payload - The data payload to be sent.\r\n             * @param sync - Indicates if the request should be sent synchronously\r\n             *\r\n             * Note: XDomainRequest does not support sync requests. This 'isAsync' parameter is added\r\n             * to maintain consistency with the xhrSender's contract\r\n             * Note: XDomainRequest does not support custom headers and we are not able to get\r\n             * appId from the backend for the correct correlation.\r\n             */\r\n            function _xdrSender(payload, oncomplete, sync) {\r\n                // It doesn't support custom headers, so no action is taken with current requestHeaders\r\n                var _window = getWindow();\r\n                var xdr = new XDomainRequest();\r\n                var data = payload[_DYN_DATA /* @min:%2edata */];\r\n                xdr.onload = function () {\r\n                    var response = getResponseText(xdr);\r\n                    var onloadFunc = _onCompleteFuncs && _onCompleteFuncs.xdrOnComplete;\r\n                    if (onloadFunc && isFunction(onloadFunc)) {\r\n                        onloadFunc(xdr, oncomplete, payload);\r\n                    }\r\n                    else {\r\n                        _doOnComplete(oncomplete, 200, {}, response);\r\n                    }\r\n                };\r\n                xdr.onerror = function () {\r\n                    _doOnComplete(oncomplete, 400, {}, _isOneDs ? STR_EMPTY : formatErrorMessageXdr(xdr));\r\n                };\r\n                xdr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, 500, {});\r\n                };\r\n                xdr.onprogress = function () { };\r\n                // XDomainRequest requires the same protocol as the hosting page.\r\n                // If the protocol doesn't match, we can't send the telemetry :(.\r\n                var hostingProtocol = _window && _window.location && _window.location.protocol || \"\";\r\n                var endpoint = payload[_DYN_URL_STRING /* @min:%2eurlString */];\r\n                if (!endpoint) {\r\n                    _onNoPayloadUrl(oncomplete);\r\n                    return;\r\n                }\r\n                if (!_isOneDs && endpoint.lastIndexOf(hostingProtocol, 0) !== 0) {\r\n                    var msg = \"Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.\";\r\n                    _throwInternal(_diagLog, 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + msg);\r\n                    _onError(msg, oncomplete);\r\n                    return;\r\n                }\r\n                var endpointUrl = _isOneDs ? endpoint : endpoint[_DYN_REPLACE /* @min:%2ereplace */](/^(https?:)/, \"\");\r\n                xdr.open(STR_POST_METHOD, endpointUrl);\r\n                if (payload[_DYN_TIMEOUT /* @min:%2etimeout */]) {\r\n                    xdr[_DYN_TIMEOUT /* @min:%2etimeout */] = payload[_DYN_TIMEOUT /* @min:%2etimeout */];\r\n                }\r\n                xdr.send(data);\r\n                if (_isOneDs && sync) {\r\n                    _timeoutWrapper && _timeoutWrapper.set(function () {\r\n                        xdr.send(data);\r\n                    }, 0);\r\n                }\r\n                else {\r\n                    xdr.send(data);\r\n                }\r\n            }\r\n            function _initDefaults() {\r\n                _syncFetchPayload = 0;\r\n                _isInitialized = false;\r\n                _enableSendPromise = false;\r\n                _diagLog = null;\r\n                _isOneDs = null;\r\n                _onCompleteFuncs = null;\r\n                _disableCredentials = null;\r\n                _fetchCredentials = null;\r\n                _fallbackInst = null;\r\n                _disableXhr = false;\r\n                _disableBeacon = false;\r\n                _disableBeaconSync = false;\r\n                _disableFetchKeepAlive = false;\r\n                _addNoResponse = false;\r\n                _timeoutWrapper = null;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for SenderPostManager.prototype.initialize.\r\n// Removed Stub for SenderPostManager.prototype.getSyncFetchPayload.\r\n// Removed Stub for SenderPostManager.prototype.SetConfig.\r\n// Removed Stub for SenderPostManager.prototype.getSenderInst.\r\n// Removed Stub for SenderPostManager.prototype.getFallbackInst.\r\n// Removed Stub for SenderPostManager.prototype._doTeardown.\r\n// Removed Stub for SenderPostManager.prototype.preparePayload.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    SenderPostManager.__ieDyn=1;\n\n    return SenderPostManager;\r\n}());\r\nexport { SenderPostManager };\r\n//# sourceMappingURL=SenderPostManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, isArray, isString, strLeft, strTrim } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_ATTRIBUTE, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_PUSH, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_TRACE_FLAGS, _DYN_VERSION } from \"../__DynamicConstants\";\r\nimport { generateW3CId } from \"./CoreUtils\";\r\nimport { findMetaTag, findNamedServerTiming } from \"./EnvUtils\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// using {0,16} for leading and trailing whitespace just to constrain the possible runtime of a random string\r\nvar TRACE_PARENT_REGEX = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})(-[^\\s]{1,64})?$/i;\r\nvar DEFAULT_VERSION = \"00\";\r\nvar INVALID_VERSION = \"ff\";\r\nvar INVALID_TRACE_ID = \"00000000000000000000000000000000\";\r\nvar INVALID_SPAN_ID = \"0000000000000000\";\r\nvar SAMPLED_FLAG = 0x01;\r\nfunction _isValid(value, len, invalidValue) {\r\n    if (value && value[_DYN_LENGTH /* @min:%2elength */] === len && value !== invalidValue) {\r\n        return !!value.match(/^[\\da-f]*$/i);\r\n    }\r\n    return false;\r\n}\r\nfunction _formatValue(value, len, defValue) {\r\n    if (_isValid(value, len)) {\r\n        return value;\r\n    }\r\n    return defValue;\r\n}\r\nfunction _formatFlags(value) {\r\n    if (isNaN(value) || value < 0 || value > 255) {\r\n        value = 0x01;\r\n    }\r\n    var result = value.toString(16);\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < 2) {\r\n        result = \"0\" + result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new ITraceParent instance using the provided values.\r\n * @param traceId - The traceId to use, when invalid a new random W3C id will be generated.\r\n * @param spanId - The parent/span id to use, a new random value will be generated if it is invalid.\r\n * @param flags - The traceFlags to use, defaults to zero (0) if not supplied or invalid\r\n * @param version - The version to used, defaults to version \"01\" if not supplied or invalid.\r\n * @returns\r\n */\r\nexport function createTraceParent(traceId, spanId, flags, version) {\r\n    return {\r\n        version: _isValid(version, 2, INVALID_VERSION) ? version : DEFAULT_VERSION,\r\n        traceId: isValidTraceId(traceId) ? traceId : generateW3CId(),\r\n        spanId: isValidSpanId(spanId) ? spanId : strLeft(generateW3CId(), 16),\r\n        traceFlags: flags >= 0 && flags <= 0xFF ? flags : 1\r\n    };\r\n}\r\n/**\r\n * Attempt to parse the provided string as a W3C TraceParent header value (https://www.w3.org/TR/trace-context/#traceparent-header)\r\n *\r\n * @param value - The value to be parsed\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function parseTraceParent(value, selectIdx) {\r\n    if (!value) {\r\n        // Don't pass a null/undefined or empty string\r\n        return null;\r\n    }\r\n    if (isArray(value)) {\r\n        // The value may have been encoded on the page into an array so handle this automatically\r\n        value = value[0] || \"\";\r\n    }\r\n    if (!value || !isString(value) || value[_DYN_LENGTH /* @min:%2elength */] > 8192) {\r\n        // limit potential processing based on total length\r\n        return null;\r\n    }\r\n    if (value[_DYN_INDEX_OF /* @min:%2eindexOf */](\",\") !== -1) {\r\n        var values = value[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        value = values[selectIdx > 0 && values[_DYN_LENGTH /* @min:%2elength */] > selectIdx ? selectIdx : 0];\r\n    }\r\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\r\n    var match = TRACE_PARENT_REGEX.exec(strTrim(value));\r\n    if (!match || // No match\r\n        match[1] === INVALID_VERSION || // version ff is forbidden\r\n        match[2] === INVALID_TRACE_ID || // All zeros is considered to be invalid\r\n        match[3] === INVALID_SPAN_ID) { // All zeros is considered to be invalid\r\n        return null;\r\n    }\r\n    return {\r\n        version: (match[1] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        traceId: (match[2] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        spanId: (match[3] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */](),\r\n        traceFlags: parseInt(match[4], 16)\r\n    };\r\n}\r\n/**\r\n * Is the provided W3c Trace Id a valid string representation, it must be a 32-character string\r\n * of lowercase hexadecimal characters for example, 4bf92f3577b34da6a3ce929d0e0e4736.\r\n * If all characters as zero (00000000000000000000000000000000) it will be considered an invalid value.\r\n * @param value - The W3c trace Id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidTraceId(value) {\r\n    return _isValid(value, 32, INVALID_TRACE_ID);\r\n}\r\n/**\r\n * Is the provided W3c span id (aka. parent id) a valid string representation, it must be a 16-character\r\n * string of lowercase hexadecimal characters, for example, 00f067aa0ba902b7.\r\n * If all characters are zero (0000000000000000) this is considered an invalid value.\r\n * @param value - The W3c span id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidSpanId(value) {\r\n    return _isValid(value, 16, INVALID_SPAN_ID);\r\n}\r\n/**\r\n * Validates that the provided ITraceParent instance conforms to the currently supported specifications\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isValidTraceParent(value) {\r\n    if (!value ||\r\n        !_isValid(value[_DYN_VERSION /* @min:%2eversion */], 2, INVALID_VERSION) ||\r\n        !_isValid(value.traceId, 32, INVALID_TRACE_ID) ||\r\n        !_isValid(value.spanId, 16, INVALID_SPAN_ID) ||\r\n        !_isValid(_formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]), 2)) {\r\n        // Each known field must contain a valid value\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Is the parsed traceParent indicating that the trace is currently sampled.\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isSampledFlag(value) {\r\n    if (isValidTraceParent(value)) {\r\n        return (value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] & SAMPLED_FLAG) === SAMPLED_FLAG;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Format the ITraceParent value as a string using the supported and know version formats.\r\n * So even if the passed traceParent is a later version the string value returned from this\r\n * function will convert it to only the known version formats.\r\n * This currently only supports version \"00\" and invalid \"ff\"\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function formatTraceParent(value) {\r\n    if (value) {\r\n        // Special Note: This only supports formatting as version 00, future versions should encode any known supported version\r\n        // So parsing a future version will populate the correct version value but reformatting will reduce it to version 00.\r\n        var flags = _formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]);\r\n        if (!_isValid(flags, 2)) {\r\n            flags = \"01\";\r\n        }\r\n        var version = value[_DYN_VERSION /* @min:%2eversion */] || DEFAULT_VERSION;\r\n        if (version !== \"00\" && version !== \"ff\") {\r\n            // Reduce version to \"00\"\r\n            version = DEFAULT_VERSION;\r\n        }\r\n        // Format as version 00\r\n        return \"\".concat(version.toLowerCase(), \"-\").concat(_formatValue(value.traceId, 32, INVALID_TRACE_ID).toLowerCase(), \"-\").concat(_formatValue(value.spanId, 16, INVALID_SPAN_ID).toLowerCase(), \"-\").concat(flags.toLowerCase());\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n * Helper function to fetch the passed traceparent from the page, looking for it as a meta-tag or a Server-Timing header.\r\n * @param selectIdx - If the found value is comma separated which is the preferred entry to select, defaults to the first\r\n * @returns\r\n */\r\nexport function findW3cTraceParent(selectIdx) {\r\n    var name = \"traceparent\";\r\n    var traceParent = parseTraceParent(findMetaTag(name), selectIdx);\r\n    if (!traceParent) {\r\n        traceParent = parseTraceParent(findNamedServerTiming(name), selectIdx);\r\n    }\r\n    return traceParent;\r\n}\r\n/**\r\n * Find all script tags in the provided document and return the information about them.\r\n * @param doc - The document to search for script tags\r\n * @returns\r\n */\r\nexport function findAllScripts(doc) {\r\n    var scripts = doc.getElementsByTagName(\"script\");\r\n    var result = [];\r\n    arrForEach(scripts, function (script) {\r\n        var src = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"src\");\r\n        if (src) {\r\n            var crossOrigin = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"crossorigin\");\r\n            var async = script.hasAttribute(\"async\") === true;\r\n            var defer = script.hasAttribute(\"defer\") === true;\r\n            var referrerPolicy = script[_DYN_GET_ATTRIBUTE /* @min:%2egetAttribute */](\"referrerpolicy\");\r\n            var info = { url: src };\r\n            if (crossOrigin) {\r\n                info.crossOrigin = crossOrigin;\r\n            }\r\n            if (async) {\r\n                info.async = async;\r\n            }\r\n            if (defer) {\r\n                info.defer = defer;\r\n            }\r\n            if (referrerPolicy) {\r\n                info.referrerPolicy = referrerPolicy;\r\n            }\r\n            result[_DYN_PUSH /* @min:%2epush */](info);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n//# sourceMappingURL=W3cTraceParent.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, isFunction } from \"@nevware21/ts-utils\";\r\nimport { _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_TRACE_FLAGS, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { createElmNodeData } from \"./DataCacheHelper\";\r\nimport { STR_CORE, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { isValidSpanId, isValidTraceId } from \"./W3cTraceParent\";\r\nvar pluginStateData = createElmNodeData(\"plugin\");\r\nexport function _getPluginState(plugin) {\r\n    return pluginStateData.get(plugin, \"state\", {}, true);\r\n}\r\n/**\r\n * Initialize the queue of plugins\r\n * @param plugins - The array of plugins to initialize and setting of the next plugin\r\n * @param config - The current config for the instance\r\n * @param core - THe current core instance\r\n * @param extensions - The extensions\r\n */\r\nexport function initializePlugins(processContext, extensions) {\r\n    // Set the next plugin and identified the uninitialized plugins\r\n    var initPlugins = [];\r\n    var lastPlugin = null;\r\n    var proxy = processContext[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    var pluginState;\r\n    while (proxy) {\r\n        var thePlugin = proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n        if (thePlugin) {\r\n            if (lastPlugin && lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] && thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]) {\r\n                // Set this plugin as the next for the previous one\r\n                lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](thePlugin);\r\n            }\r\n            pluginState = _getPluginState(thePlugin);\r\n            var isInitialized = !!pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */];\r\n            if (thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]) {\r\n                isInitialized = thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]();\r\n            }\r\n            if (!isInitialized) {\r\n                initPlugins[_DYN_PUSH /* @min:%2epush */](thePlugin);\r\n            }\r\n            lastPlugin = thePlugin;\r\n            proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n        }\r\n    }\r\n    // Now initialize the plugins\r\n    arrForEach(initPlugins, function (thePlugin) {\r\n        var core = processContext[STR_CORE /* @min:%2ecore */]();\r\n        thePlugin[_DYN_INITIALIZE /* @min:%2einitialize */](processContext.getCfg(), core, extensions, processContext[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n        pluginState = _getPluginState(thePlugin);\r\n        // Only add the core to the state if the plugin didn't set it (doesn't extend from BaseTelemetryPlugin)\r\n        if (!thePlugin[STR_CORE] && !pluginState[STR_CORE]) {\r\n            pluginState[STR_CORE] = core;\r\n        }\r\n        pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = true;\r\n        delete pluginState[_DYN_TEARDOWN /* @min:%2eteardown */];\r\n    });\r\n}\r\nexport function sortPlugins(plugins) {\r\n    // Sort by priority\r\n    return plugins.sort(function (extA, extB) {\r\n        var result = 0;\r\n        if (extB) {\r\n            var bHasProcess = extB[STR_PROCESS_TELEMETRY];\r\n            if (extA[STR_PROCESS_TELEMETRY]) {\r\n                result = bHasProcess ? extA[STR_PRIORITY] - extB[STR_PRIORITY] : 1;\r\n            }\r\n            else if (bHasProcess) {\r\n                result = -1;\r\n            }\r\n        }\r\n        else {\r\n            result = extA ? 1 : -1;\r\n        }\r\n        return result;\r\n    });\r\n    // sort complete\r\n}\r\n/**\r\n * Teardown / Unload helper to perform teardown/unloading operations for the provided components synchronously or asynchronously, this will call any\r\n * _doTeardown() or _doUnload() functions on the provided components to allow them to finish removal.\r\n * @param components - The components you want to unload\r\n * @param unloadCtx - This is the context that should be used during unloading.\r\n * @param unloadState - The details / state of the unload process, it holds details like whether it should be unloaded synchronously or asynchronously and the reason for the unload.\r\n * @param asyncCallback - An optional callback that the plugin must call if it returns true to inform the caller that it has completed any async unload/teardown operations.\r\n * @returns boolean - true if the plugin has or will call asyncCallback, this allows the plugin to perform any asynchronous operations.\r\n */\r\nexport function unloadComponents(components, unloadCtx, unloadState, asyncCallback) {\r\n    var idx = 0;\r\n    function _doUnload() {\r\n        while (idx < components[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var component = components[idx++];\r\n            if (component) {\r\n                var func = component._doUnload || component[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */];\r\n                if (isFunction(func)) {\r\n                    if (func.call(component, unloadCtx, unloadState, _doUnload) === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return _doUnload();\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext which optionally also \"sets\" the value on a parent\r\n * @param parentCtx - An optional parent distributed trace instance\r\n * @returns A new IDistributedTraceContext instance that uses an internal temporary object\r\n */\r\nexport function createDistributedTraceContext(parentCtx) {\r\n    var trace = {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace.traceId;\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace.traceId = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace.spanId;\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace.spanId = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */];\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TelemetryHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_DIAG_LOG, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nexport function createUnloadHandlerContainer() {\r\n    var handlers = [];\r\n    function _addHandler(handler) {\r\n        if (handler) {\r\n            handlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n        }\r\n    }\r\n    function _runHandlers(unloadCtx, unloadState) {\r\n        arrForEach(handlers, function (handler) {\r\n            try {\r\n                handler(unloadCtx, unloadState);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(unloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected error calling unload handler - \" + dumpObj(e));\r\n            }\r\n        });\r\n        handlers = [];\r\n    }\r\n    return {\r\n        add: _addHandler,\r\n        run: _runHandlers\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHandlerContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrAppend, arrForEach, dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nvar _maxHooks;\r\nvar _hookAddMonitor;\r\n/**\r\n * Test hook for setting the maximum number of unload hooks and calling a monitor function when the hooks are added or removed\r\n * This allows for automatic test failure when the maximum number of unload hooks is exceeded\r\n * @param maxHooks - The maximum number of unload hooks\r\n * @param addMonitor - The monitor function to call when hooks are added or removed\r\n */\r\nexport function _testHookMaxUnloadHooksCb(maxHooks, addMonitor) {\r\n    _maxHooks = maxHooks;\r\n    _hookAddMonitor = addMonitor;\r\n}\r\n/**\r\n * Create a IUnloadHookContainer which can be used to remember unload hook functions to be executed during the component unloading\r\n * process.\r\n * @returns A new IUnloadHookContainer instance\r\n */\r\nexport function createUnloadHookContainer() {\r\n    var _hooks = [];\r\n    function _doUnload(logger) {\r\n        var oldHooks = _hooks;\r\n        _hooks = [];\r\n        // Remove all registered unload hooks\r\n        arrForEach(oldHooks, function (fn) {\r\n            // allow either rm or remove callback function\r\n            try {\r\n                (fn.rm || fn.remove).call(fn);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unloading:\" + dumpObj(e));\r\n            }\r\n        });\r\n        if (_maxHooks && oldHooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n            _hookAddMonitor ? _hookAddMonitor(\"doUnload\", oldHooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n        }\r\n    }\r\n    function _addHook(hooks) {\r\n        if (hooks) {\r\n            arrAppend(_hooks, hooks);\r\n            if (_maxHooks && _hooks[_DYN_LENGTH /* @min:%2elength */] > _maxHooks) {\r\n                _hookAddMonitor ? _hookAddMonitor(\"Add\", _hooks) : _throwInternal(null, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.MaxUnloadHookExceeded */, \"Max unload hooks exceeded. An excessive number of unload hooks has been detected.\");\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        run: _doUnload,\r\n        add: _addHook\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHookContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 11\r\nexport var _DYN_LENGTH = \"length\"; // Count: 64\r\nexport var _DYN_WARN_TO_CONSOLE = \"warnToConsole\"; // Count: 4\r\nexport var _DYN_THROW_INTERNAL = \"throwInternal\"; // Count: 5\r\nexport var _DYN_WATCH = \"watch\"; // Count: 7\r\nexport var _DYN_APPLY = \"apply\"; // Count: 7\r\nexport var _DYN_PUSH = \"push\"; // Count: 42\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 9\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 20\r\nexport var _DYN_CANCEL = \"cancel\"; // Count: 9\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 5\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 8\r\nexport var _DYN_REMOVE_NOTIFICATION_0 = \"removeNotificationListener\"; // Count: 4\r\nexport var _DYN_ADD_NOTIFICATION_LIS1 = \"addNotificationListener\"; // Count: 4\r\nexport var _DYN_IS_INITIALIZED = \"isInitialized\"; // Count: 11\r\nexport var _DYN_GET_NOTIFY_MGR = \"getNotifyMgr\"; // Count: 5\r\nexport var _DYN_GET_PLUGIN = \"getPlugin\"; // Count: 5\r\nexport var _DYN_NAME = \"name\"; // Count: 9\r\nexport var _DYN_PROCESS_NEXT = \"processNext\"; // Count: 15\r\nexport var _DYN_GET_PROCESS_TEL_CONT2 = \"getProcessTelContext\"; // Count: 2\r\nexport var _DYN_VALUE = \"value\"; // Count: 7\r\nexport var _DYN_ENABLED = \"enabled\"; // Count: 6\r\nexport var _DYN_STOP_POLLING_INTERNA3 = \"stopPollingInternalLogs\"; // Count: 2\r\nexport var _DYN_UNLOAD = \"unload\"; // Count: 7\r\nexport var _DYN_ON_COMPLETE = \"onComplete\"; // Count: 4\r\nexport var _DYN_VERSION = \"version\"; // Count: 4\r\nexport var _DYN_LOGGING_LEVEL_CONSOL4 = \"loggingLevelConsole\"; // Count: 2\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 7\r\nexport var _DYN_TEARDOWN = \"teardown\"; // Count: 9\r\nexport var _DYN_MESSAGE_ID = \"messageId\"; // Count: 4\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 7\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 9\r\nexport var _DYN__DO_TEARDOWN = \"_doTeardown\"; // Count: 5\r\nexport var _DYN_UPDATE = \"update\"; // Count: 5\r\nexport var _DYN_GET_NEXT = \"getNext\"; // Count: 10\r\nexport var _DYN_SET_NEXT_PLUGIN = \"setNextPlugin\"; // Count: 5\r\nexport var _DYN_USER_AGENT = \"userAgent\"; // Count: 5\r\nexport var _DYN_SPLIT = \"split\"; // Count: 8\r\nexport var _DYN_REPLACE = \"replace\"; // Count: 9\r\nexport var _DYN_SUBSTRING = \"substring\"; // Count: 4\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 5\r\nexport var _DYN_TYPE = \"type\"; // Count: 17\r\nexport var _DYN_EVT_NAME = \"evtName\"; // Count: 4\r\nexport var _DYN_STATUS = \"status\"; // Count: 9\r\nexport var _DYN_GET_ALL_RESPONSE_HEA5 = \"getAllResponseHeaders\"; // Count: 2\r\nexport var _DYN_IS_CHILD_EVT = \"isChildEvt\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 11\r\nexport var _DYN_GET_CTX = \"getCtx\"; // Count: 6\r\nexport var _DYN_SET_CTX = \"setCtx\"; // Count: 10\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_HEADERS = \"headers\"; // Count: 6\r\nexport var _DYN_URL_STRING = \"urlString\"; // Count: 5\r\nexport var _DYN_TIMEOUT = \"timeout\"; // Count: 6\r\nexport var _DYN_TOTAL_REQUEST = \"totalRequest\"; // Count: 4\r\nexport var _DYN_REQUEST_DURATION = \"requestDuration\"; // Count: 3\r\nexport var _DYN_FAILURE = \"failure\"; // Count: 4\r\nexport var _DYN_EXCEPTION = \"exception\"; // Count: 4\r\nexport var _DYN_THROTTLE = \"throttle\"; // Count: 4\r\nexport var _DYN_TRACE_FLAGS = \"traceFlags\"; // Count: 5\r\nexport var _DYN_GET_ATTRIBUTE = \"getAttribute\"; // Count: 3\r\n//# sourceMappingURL=__DynamicConstants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\n//# sourceMappingURL=Constants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { getGlobal, objAssign, objCreate, objDefineProp, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\nimport { ObjClass, ObjProto, strDefault, strShimFunction, strShimPrototype } from \"./Constants\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES5 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nvar strHasOwnProperty = \"hasOwnProperty\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = objAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreate(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (objHasOwnProperty(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && objDefineProp(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !objHasOwnProperty(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!objDefineProp) {\r\n        objDefineProp(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (objDefineProp) {\r\n        objDefineProp(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!objDefineProp) {\r\n        objDefineProp(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n/**\r\n * This is an internal property used to cause internal (reporting) requests to be ignored from reporting\r\n * additional telemetry, to handle polyfil implementations ALL urls used with a disabled request will\r\n * also be ignored for future requests even when this property is not provided.\r\n * Tagging as Ignore as this is an internal value and is not expected to be used outside of the SDK\r\n * @ignore\r\n */\r\nexport var DisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var SampleRate = \"sampleRate\";\r\nexport var ProcessLegacy = \"ProcessLegacy\";\r\nexport var HttpMethod = \"http.method\";\r\nexport var DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\nexport var DEFAULT_BREEZE_PATH = \"/v2/track\";\r\nexport var strNotSpecified = \"not_specified\";\r\nexport var strIkey = \"iKey\";\r\n//# sourceMappingURL=Constants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_SPLIT = \"split\"; // Count: 6\r\nexport var _DYN_LENGTH = \"length\"; // Count: 46\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 6\r\nexport var _DYN_INGESTIONENDPOINT = \"ingestionendpoint\"; // Count: 6\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 8\r\nexport var _DYN_REMOVE_ITEM = \"removeItem\"; // Count: 3\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 5\r\nexport var _DYN_COUNT = \"count\"; // Count: 6\r\nexport var _DYN_PRE_TRIGGER_DATE = \"preTriggerDate\"; // Count: 4\r\nexport var _DYN_GET_UTCDATE = \"getUTCDate\"; // Count: 3\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 4\r\nexport var _DYN_PATHNAME = \"pathname\"; // Count: 4\r\nexport var _DYN_MATCH = \"match\"; // Count: 5\r\nexport var _DYN_CORRELATION_HEADER_E0 = \"correlationHeaderExcludePatterns\"; // Count: 2\r\nexport var _DYN_NAME = \"name\"; // Count: 10\r\nexport var _DYN_EXTENSION_CONFIG = \"extensionConfig\"; // Count: 4\r\nexport var _DYN_PROPERTIES = \"properties\"; // Count: 10\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 9\r\nexport var _DYN_SIZE_IN_BYTES = \"sizeInBytes\"; // Count: 4\r\nexport var _DYN_TYPE_NAME = \"typeName\"; // Count: 5\r\nexport var _DYN_EXCEPTIONS = \"exceptions\"; // Count: 5\r\nexport var _DYN_SEVERITY_LEVEL = \"severityLevel\"; // Count: 5\r\nexport var _DYN_PROBLEM_GROUP = \"problemGroup\"; // Count: 3\r\nexport var _DYN_PARSED_STACK = \"parsedStack\"; // Count: 6\r\nexport var _DYN_HAS_FULL_STACK = \"hasFullStack\"; // Count: 5\r\nexport var _DYN_ASSEMBLY = \"assembly\"; // Count: 4\r\nexport var _DYN_FILE_NAME = \"fileName\"; // Count: 9\r\nexport var _DYN_LINE = \"line\"; // Count: 6\r\nexport var _DYN_AI_DATA_CONTRACT = \"aiDataContract\"; // Count: 4\r\nexport var _DYN_DURATION = \"duration\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, fieldRedaction, getJSON, hasJSON, isObject, objForEachKey, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { asString, isString, strSubstr, strSubstring } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_STRINGIFY, _DYN_TO_STRING } from \"../../__DynamicConstants\";\r\nexport function dataSanitizeKeyAndAddUniqueness(logger, key, map) {\r\n    var origLength = key[_DYN_LENGTH /* @min:%2elength */];\r\n    var field = dataSanitizeKey(logger, key);\r\n    // validation truncated the length.  We need to add uniqueness\r\n    if (field[_DYN_LENGTH /* @min:%2elength */] !== origLength) {\r\n        var i = 0;\r\n        var uniqueField = field;\r\n        while (map[uniqueField] !== undefined) {\r\n            i++;\r\n            uniqueField = strSubstring(field, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ - 3) + dsPadNumber(i);\r\n        }\r\n        field = uniqueField;\r\n    }\r\n    return field;\r\n}\r\nexport function dataSanitizeKey(logger, name) {\r\n    var nameTrunc;\r\n    if (name) {\r\n        // Remove any leading or trailing whitespace\r\n        name = strTrim(asString(name));\r\n        // truncate the string to 150 chars\r\n        if (name[_DYN_LENGTH /* @min:%2elength */] > 150 /* DataSanitizerValues.MAX_NAME_LENGTH */) {\r\n            nameTrunc = strSubstring(name, 0, 150 /* DataSanitizerValues.MAX_NAME_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 57 /* _eInternalMessageId.NameTooLong */, \"name is too long.  It has been truncated to \" + 150 /* DataSanitizerValues.MAX_NAME_LENGTH */ + \" characters.\", { name: name }, true);\r\n        }\r\n    }\r\n    return nameTrunc || name;\r\n}\r\nexport function dataSanitizeString(logger, value, maxLength) {\r\n    if (maxLength === void 0) { maxLength = 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; }\r\n    var valueTrunc;\r\n    if (value) {\r\n        maxLength = maxLength ? maxLength : 1024 /* DataSanitizerValues.MAX_STRING_LENGTH */; // in case default parameters dont work\r\n        value = strTrim(asString(value));\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            valueTrunc = strSubstring(value, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 61 /* _eInternalMessageId.StringValueTooLong */, \"string value is too long. It has been truncated to \" + maxLength + \" characters.\", { value: value }, true);\r\n        }\r\n    }\r\n    return valueTrunc || value;\r\n}\r\nexport function dataSanitizeUrl(logger, url, config) {\r\n    if (isString(url)) {\r\n        url = fieldRedaction(url, config);\r\n    }\r\n    return dataSanitizeInput(logger, url, 2048 /* DataSanitizerValues.MAX_URL_LENGTH */, 66 /* _eInternalMessageId.UrlTooLong */);\r\n}\r\nexport function dataSanitizeMessage(logger, message) {\r\n    var messageTrunc;\r\n    if (message) {\r\n        if (message[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */) {\r\n            messageTrunc = strSubstring(message, 0, 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 56 /* _eInternalMessageId.MessageTruncated */, \"message is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_MESSAGE_LENGTH */ + \" characters.\", { message: message }, true);\r\n        }\r\n    }\r\n    return messageTrunc || message;\r\n}\r\nexport function dataSanitizeException(logger, exception) {\r\n    var exceptionTrunc;\r\n    if (exception) {\r\n        // Make surte its a string\r\n        var value = \"\" + exception;\r\n        if (value[_DYN_LENGTH /* @min:%2elength */] > 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */) {\r\n            exceptionTrunc = strSubstring(value, 0, 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 52 /* _eInternalMessageId.ExceptionTruncated */, \"exception is too long, it has been truncated to \" + 32768 /* DataSanitizerValues.MAX_EXCEPTION_LENGTH */ + \" characters.\", { exception: exception }, true);\r\n        }\r\n    }\r\n    return exceptionTrunc || exception;\r\n}\r\nexport function dataSanitizeProperties(logger, properties) {\r\n    if (properties) {\r\n        var tempProps_1 = {};\r\n        objForEachKey(properties, function (prop, value) {\r\n            if (isObject(value) && hasJSON()) {\r\n                // Stringify any part C properties\r\n                try {\r\n                    value = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"custom property is not valid\", { exception: e }, true);\r\n                }\r\n            }\r\n            value = dataSanitizeString(logger, value, 8192 /* DataSanitizerValues.MAX_PROPERTY_LENGTH */);\r\n            prop = dataSanitizeKeyAndAddUniqueness(logger, prop, tempProps_1);\r\n            tempProps_1[prop] = value;\r\n        });\r\n        properties = tempProps_1;\r\n    }\r\n    return properties;\r\n}\r\nexport function dataSanitizeMeasurements(logger, measurements) {\r\n    if (measurements) {\r\n        var tempMeasurements_1 = {};\r\n        objForEachKey(measurements, function (measure, value) {\r\n            measure = dataSanitizeKeyAndAddUniqueness(logger, measure, tempMeasurements_1);\r\n            tempMeasurements_1[measure] = value;\r\n        });\r\n        measurements = tempMeasurements_1;\r\n    }\r\n    return measurements;\r\n}\r\nexport function dataSanitizeId(logger, id) {\r\n    return id ? dataSanitizeInput(logger, id, 128 /* DataSanitizerValues.MAX_ID_LENGTH */, 69 /* _eInternalMessageId.IdTooLong */)[_DYN_TO_STRING /* @min:%2etoString */]() : id;\r\n}\r\nexport function dataSanitizeInput(logger, input, maxLength, _msgId) {\r\n    var inputTrunc;\r\n    if (input) {\r\n        input = strTrim(asString(input));\r\n        if (input[_DYN_LENGTH /* @min:%2elength */] > maxLength) {\r\n            inputTrunc = strSubstring(input, 0, maxLength);\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, _msgId, \"input is too long, it has been truncated to \" + maxLength + \" characters.\", { data: input }, true);\r\n        }\r\n    }\r\n    return inputTrunc || input;\r\n}\r\nexport function dsPadNumber(num) {\r\n    var s = \"00\" + num;\r\n    return strSubstr(s, s[_DYN_LENGTH /* @min:%2elength */] - 3);\r\n}\r\n//# sourceMappingURL=DataSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Event = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the EventTelemetry object\r\n     */\r\n    function Event(logger, name, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Event.envelopeType = \"Microsoft.ApplicationInsights.{0}.Event\";\r\n    Event.dataType = \"EventData\";\r\n    return Event;\r\n}());\r\nexport { Event };\r\n//# sourceMappingURL=Event.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_PROPERTIES, _DYN_SEVERITY_LEVEL } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties } from \"./Common/DataSanitizer\";\r\nvar Trace = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the TraceTelemetry object\r\n     */\r\n    function Trace(logger, message, severityLevel, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            message: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        message = message || strNotSpecified;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] = dataSanitizeMessage(logger, message);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (severityLevel) {\r\n            _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n        }\r\n    }\r\n    Trace.envelopeType = \"Microsoft.ApplicationInsights.{0}.Message\";\r\n    Trace.dataType = \"MessageData\";\r\n    return Trace;\r\n}());\r\nexport { Trace };\r\n//# sourceMappingURL=Trace.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { mathFloor, mathRound } from \"@nevware21/ts-utils\";\r\nimport { _DYN_LENGTH, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar strEmpty = \"\";\r\nexport function stringToBoolOrDefault(str, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = false; }\r\n    if (str === undefined || str === null) {\r\n        return defaultValue;\r\n    }\r\n    return str.toString()[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() === \"true\";\r\n}\r\n/**\r\n * Convert ms to c# time span format\r\n */\r\nexport function msToTimeSpan(totalms) {\r\n    if (isNaN(totalms) || totalms < 0) {\r\n        totalms = 0;\r\n    }\r\n    totalms = mathRound(totalms);\r\n    var ms = strEmpty + totalms % 1000;\r\n    var sec = strEmpty + mathFloor(totalms / 1000) % 60;\r\n    var min = strEmpty + mathFloor(totalms / (1000 * 60)) % 60;\r\n    var hour = strEmpty + mathFloor(totalms / (1000 * 60 * 60)) % 24;\r\n    var days = mathFloor(totalms / (1000 * 60 * 60 * 24));\r\n    ms = ms[_DYN_LENGTH /* @min:%2elength */] === 1 ? \"00\" + ms : ms[_DYN_LENGTH /* @min:%2elength */] === 2 ? \"0\" + ms : ms;\r\n    sec = sec[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + sec : sec;\r\n    min = min[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + min : min;\r\n    hour = hour[_DYN_LENGTH /* @min:%2elength */] < 2 ? \"0\" + hour : hour;\r\n    return (days > 0 ? days + \".\" : strEmpty) + hour + \":\" + min + \":\" + sec + \".\" + ms;\r\n}\r\nexport function getExtensionByName(extensions, identifier) {\r\n    var extension = null;\r\n    arrForEach(extensions, function (value) {\r\n        if (value.identifier === identifier) {\r\n            extension = value;\r\n            return -1;\r\n        }\r\n    });\r\n    return extension;\r\n}\r\nexport function isCrossOriginError(message, url, lineNumber, columnNumber, error) {\r\n    return !error && isString(message) && (message === \"Script error.\" || message === \"Script error\");\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeId, dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageView = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageView(logger, name, url, durationMs, properties, measurements, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            id: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = dataSanitizeId(logger, id);\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        if (!isNaN(durationMs)) {\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(durationMs);\r\n        }\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    PageView.envelopeType = \"Microsoft.ApplicationInsights.{0}.Pageview\";\r\n    PageView.dataType = \"PageviewData\";\r\n    return PageView;\r\n}());\r\nexport { PageView };\r\n//# sourceMappingURL=PageView.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar PageViewPerformance = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the PageEventTelemetry object\r\n     */\r\n    function PageViewPerformance(logger, name, url, unused, properties, measurements, cs4BaseData) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            url: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            perfTotal: 0 /* FieldType.Default */,\r\n            networkConnect: 0 /* FieldType.Default */,\r\n            sentRequest: 0 /* FieldType.Default */,\r\n            receivedResponse: 0 /* FieldType.Default */,\r\n            domProcessing: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.url = dataSanitizeUrl(logger, url);\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n        if (cs4BaseData) {\r\n            _self.domProcessing = cs4BaseData.domProcessing;\r\n            _self[_DYN_DURATION /* @min:%2eduration */] = cs4BaseData[_DYN_DURATION /* @min:%2eduration */];\r\n            _self.networkConnect = cs4BaseData.networkConnect;\r\n            _self.perfTotal = cs4BaseData.perfTotal;\r\n            _self.receivedResponse = cs4BaseData.receivedResponse;\r\n            _self.sentRequest = cs4BaseData.sentRequest;\r\n        }\r\n    }\r\n    PageViewPerformance.envelopeType = \"Microsoft.ApplicationInsights.{0}.PageviewPerformance\";\r\n    PageViewPerformance.dataType = \"PageviewPerformanceData\";\r\n    return PageViewPerformance;\r\n}());\r\nexport { PageViewPerformance };\r\n//# sourceMappingURL=PageViewPerformance.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { arrForEach, arrMap, isArray, isError, isFunction, isNullOrUndefined, isObject, isString, strTrim } from \"@microsoft/applicationinsights-core-js\";\r\nimport { asString, getWindow, objFreeze, strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_AI_DATA_CONTRACT, _DYN_ASSEMBLY, _DYN_EXCEPTIONS, _DYN_FILE_NAME, _DYN_HAS_FULL_STACK, _DYN_LENGTH, _DYN_LINE, _DYN_MATCH, _DYN_MEASUREMENTS, _DYN_MESSAGE, _DYN_NAME, _DYN_PARSED_STACK, _DYN_PROBLEM_GROUP, _DYN_PROPERTIES, _DYN_SEVERITY_LEVEL, _DYN_SIZE_IN_BYTES, _DYN_SPLIT, _DYN_STRINGIFY, _DYN_TO_STRING, _DYN_TYPE_NAME } from \"../__DynamicConstants\";\r\nimport { dataSanitizeException, dataSanitizeMeasurements, dataSanitizeMessage, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\n// These Regex covers the following patterns\r\n// 1. Chrome/Firefox/IE/Edge:\r\n//    at functionName (filename:lineNumber:columnNumber)\r\n//    at functionName (filename:lineNumber)\r\n//    at filename:lineNumber:columnNumber\r\n//    at filename:lineNumber\r\n//    at functionName@filename:lineNumber:columnNumber\r\n// 2. Safari / Opera:\r\n//    functionName@filename:lineNumber:columnNumber\r\n//    functionName@filename:lineNumber\r\n//    filename:lineNumber:columnNumber\r\n//    filename:lineNumber\r\n//    Line ## of scriptname script filename:lineNumber:columnNumber\r\n//    Line ## of scriptname script filename\r\n// 3. IE/Edge (Additional formats)\r\n//    at functionName@filename:lineNumber\r\nvar STACKFRAME_BASE_SIZE = 58; // '{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n/**\r\n * Check if the string conforms to what looks like a stack frame line and not just a general message\r\n * comment or other non-stack related info.\r\n *\r\n * This  should be used to filter out any leading \"message\" lines from a stack trace, before attempting to parse\r\n * the individual stack frames. Once you have estabilsted the start of the stack frames you can then use the\r\n * FULL_STACK_FRAME_1, FULL_STACK_FRAME_2, FULL_STACK_FRAME_3, and EXTRACT_FILENAME to parse the individual\r\n * stack frames to extract the method, filename, line number, and column number.\r\n * These may still provide invalid matches, so the sequence of execution is important to avoid providing\r\n * an invalid parsed stack.\r\n */\r\nvar IS_FRAME = /^\\s{0,50}(from\\s|at\\s|Line\\s{1,5}\\d{1,10}\\s{1,5}of|\\w{1,50}@\\w{1,80}|[^\\(\\s\\n]+:[0-9\\?]+(?::[0-9\\?]+)?)/;\r\n/**\r\n * Parse a well formed stack frame with both the line and column numbers\r\n * ----------------------------------\r\n * **Primary focus of the matching**\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n */\r\nvar FULL_STACK_FRAME_1 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\]]+):([0-9\\?]+):([0-9\\?]+)\\)?$/;\r\n/**\r\n * Parse a well formed stack frame with only a line number.\r\n * ----------------------------------\r\n * > Note: this WILL also match with line and column number, but the line number is included with the filename\r\n * > you should attempt to match with FULL_STACK_FRAME_1 first.\r\n *\r\n * **Primary focus of the matching (run FULL_STACK_FRAME_1 first)**\r\n * - at functionName (filename:lineNumber)\r\n * - at filename:lineNumber\r\n * - at functionName@filename:lineNumber\r\n * - functionName (filename:lineNumber)\r\n * - filename:lineNumber\r\n * - functionName@filename:lineNumber\r\n *\r\n * **Secondary matches**\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n */\r\nvar FULL_STACK_FRAME_2 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\]]+):([0-9\\?]+)\\)?$/;\r\n/**\r\n * Attempt to Parse a frame that doesn't include a line or column number.\r\n * ----------------------------------\r\n * > Note: this WILL also match lines with a line or line and column number, you should attempt to match with\r\n * both FULL_STACK_FRAME_1 and FULL_STACK_FRAME_2 first to avoid false positives.\r\n *\r\n * **Unexpected Invalid Matches** (Matches that should be avoided -- by using the FULL_STACK_FRAME_1 and FULL_STACK_FRAME_2 first)\r\n * - at https://localhost:44365/static/node_bundles/@microsoft/blah/js/bundle.js:144112:27\r\n * - at https://localhost:44365/static/node_bundles/@microsoft/blah/js/bundle.js:144112:27\r\n *\r\n * **Primary focus of the matching (run FULL_STACK_FRAME_1 first)**\r\n * - at functionName@filename\r\n * - at functionName (filename)\r\n * - at functionName filename\r\n * - at filename  <- Will actuall match this as the \"method\" and not the filename (care should be taken to avoid this)\r\n * - functionName@filename\r\n * - functionName (filename)\r\n * - functionName filename\r\n * - functionName\r\n *\r\n * **Secondary matches** (The line and column numbers will be included with the matched filename)\r\n * - at functionName (filename:lineNumber:columnNumber)\r\n * - at functionName (filename:lineNumber)\r\n * - at filename:lineNumber:columnNumber\r\n * - at filename:lineNumber\r\n * - at functionName@filename:lineNumber:columnNumber\r\n * - at functionName@filename:lineNumber\r\n * - functionName (filename:lineNumber:columnNumber)\r\n * - functionName (filename:lineNumber)\r\n * - filename:lineNumber:columnNumber\r\n * - filename:lineNumber\r\n * - functionName@filename:lineNumber:columnNumber\r\n * - functionName@filename:lineNumber\r\n  */\r\nvar FULL_STACK_FRAME_3 = /^(?:\\s{0,50}at)?\\s{0,50}([^\\@\\()\\s]+)?\\s{0,50}(?:\\s|\\@|\\()\\s{0,5}([^\\(\\s\\n\\)\\]]+)\\)?$/;\r\n/**\r\n * Attempt to extract the filename (with or without line and column numbers) from a string.\r\n * ----------------------------------\r\n * > Note: this will only match the filename (with any line or column numbers) and will\r\n * > return what looks like the filename, however, it will also match random strings that\r\n * > look like a filename, so care should be taken to ensure that the filename is actually\r\n * > a filename before using it.\r\n * >\r\n * > It is recommended to use this in conjunction with the FULL_STACK_FRAME_1, FULL_STACK_FRAME_2, and FULL_STACK_FRAME_3\r\n * > to ensure first to reduce false matches, if all of these fail then you can use this to extract the filename from a random\r\n * > strings to identify any potential filename from a known stack frame line.\r\n *\r\n * **Known Invalid matching**\r\n *\r\n * This regex will basically match any \"final\" string of a line or one that is trailed by a comma, so this should not\r\n * be used as the \"only\" matching regex, but rather as a final fallback to extract the filename from a string.\r\n * If you are certain that the string line is a stack frame and not part of the exception message (lines before the stack)\r\n * or trailing comments, then you can use this to extract the filename and then further parse with PARSE_FILENAME_LINE_COL\r\n * and PARSE_FILENAME_LINE_ONLY to extract any potential the line and column numbers.\r\n *\r\n * **Primary focus of the matching**\r\n * - at (anonymous) @ VM60:1\r\n * - Line 21 of linked script file://localhost/C:/Temp/stacktrace.js\r\n * - Line 11 of inline#1 script in http://localhost:3000/static/js/main.206f4846.js:2:296748\r\n * - Line 68 of inline#2 script in file://localhost/teststack.html\r\n * - at Global code (http://example.com/stacktrace.js:11:1)\r\n */\r\nvar EXTRACT_FILENAME = /(?:^|\\(|\\s{0,10}[\\w\\)]+\\@)?([^\\(\\n\\s\\]\\)]+)(?:\\:([0-9]+)(?:\\:([0-9]+))?)?\\)?(?:,|$)/;\r\n/**\r\n * Attempt to extract the filename, line number, and column number from a string.\r\n */\r\nvar PARSE_FILENAME_LINE_COL = /([^\\(\\s\\n]+):([0-9]+):([0-9]+)$/;\r\n/**\r\n * Attempt to extract the filename and line number from a string.\r\n */\r\nvar PARSE_FILENAME_LINE_ONLY = /([^\\(\\s\\n]+):([0-9]+)$/;\r\nvar NoMethod = \"<no_method>\";\r\nvar strError = \"error\";\r\nvar strStack = \"stack\";\r\nvar strStackDetails = \"stackDetails\";\r\nvar strErrorSrc = \"errorSrc\";\r\nvar strMessage = \"message\";\r\nvar strDescription = \"description\";\r\nvar _parseSequence = [\r\n    { re: FULL_STACK_FRAME_1, len: 5, m: 1, fn: 2, ln: 3, col: 4 },\r\n    { chk: _ignoreNative, pre: _scrubAnonymous, re: FULL_STACK_FRAME_2, len: 4, m: 1, fn: 2, ln: 3 },\r\n    { re: FULL_STACK_FRAME_3, len: 3, m: 1, fn: 2, hdl: _handleFilename },\r\n    { re: EXTRACT_FILENAME, len: 2, fn: 1, hdl: _handleFilename }\r\n];\r\nfunction _scrubAnonymous(frame) {\r\n    return frame.replace(/(\\(anonymous\\))/, \"<anonymous>\");\r\n}\r\nfunction _ignoreNative(frame) {\r\n    return strIndexOf(frame, \"[native\") < 0;\r\n}\r\nfunction _stringify(value, convertToString) {\r\n    var result = value;\r\n    if (result && !isString(result)) {\r\n        if (JSON && JSON[_DYN_STRINGIFY /* @min:%2estringify */]) {\r\n            result = JSON[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            if (convertToString && (!result || result === \"{}\")) {\r\n                if (isFunction(value[_DYN_TO_STRING /* @min:%2etoString */])) {\r\n                    result = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                }\r\n                else {\r\n                    result = \"\" + value;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = \"\" + value + \" - (Missing JSON.stringify)\";\r\n        }\r\n    }\r\n    return result || \"\";\r\n}\r\nfunction _formatMessage(theEvent, errorType) {\r\n    var evtMessage = theEvent;\r\n    if (theEvent) {\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            evtMessage = theEvent[strMessage] || theEvent[strDescription] || evtMessage;\r\n        }\r\n        // Make sure the message is a string\r\n        if (evtMessage && !isString(evtMessage)) {\r\n            // tslint:disable-next-line: prefer-conditional-expression\r\n            evtMessage = _stringify(evtMessage, true);\r\n        }\r\n        if (theEvent[\"filename\"]) {\r\n            // Looks like an event object with filename\r\n            evtMessage = evtMessage + \" @\" + (theEvent[\"filename\"] || \"\") + \":\" + (theEvent[\"lineno\"] || \"?\") + \":\" + (theEvent[\"colno\"] || \"?\");\r\n        }\r\n    }\r\n    // Automatically add the error type to the message if it does already appear to be present\r\n    if (errorType && errorType !== \"String\" && errorType !== \"Object\" && errorType !== \"Error\" && strIndexOf(evtMessage || \"\", errorType) === -1) {\r\n        evtMessage = errorType + \": \" + evtMessage;\r\n    }\r\n    return evtMessage || \"\";\r\n}\r\nfunction _isExceptionDetailsInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return \"hasFullStack\" in value && \"typeName\" in value;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isExceptionInternal(value) {\r\n    try {\r\n        if (isObject(value)) {\r\n            return (\"ver\" in value && \"exceptions\" in value && \"properties\" in value);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n    return false;\r\n}\r\nfunction _isStackDetails(details) {\r\n    return details && details.src && isString(details.src) && details.obj && isArray(details.obj);\r\n}\r\nfunction _convertStackObj(errorStack) {\r\n    var src = errorStack || \"\";\r\n    if (!isString(src)) {\r\n        if (isString(src[strStack])) {\r\n            src = src[strStack];\r\n        }\r\n        else {\r\n            src = \"\" + src;\r\n        }\r\n    }\r\n    var items = src[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    return {\r\n        src: src,\r\n        obj: items\r\n    };\r\n}\r\nfunction _getOperaStack(errorMessage) {\r\n    var stack = [];\r\n    var lines = errorMessage[_DYN_SPLIT /* @min:%2esplit */](\"\\n\");\r\n    for (var lp = 0; lp < lines[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n        var entry = lines[lp];\r\n        if (lines[lp + 1]) {\r\n            entry += \"@\" + lines[lp + 1];\r\n            lp++;\r\n        }\r\n        stack.push(entry);\r\n    }\r\n    return {\r\n        src: errorMessage,\r\n        obj: stack\r\n    };\r\n}\r\nfunction _getStackFromErrorObj(errorObj) {\r\n    var details = null;\r\n    if (errorObj) {\r\n        try {\r\n            /* Using bracket notation is support older browsers (IE 7/8 -- dont remember the version) that throw when using dot\r\n            notation for undefined objects and we don't want to loose the error from being reported */\r\n            if (errorObj[strStack]) {\r\n                // Chrome/Firefox\r\n                details = _convertStackObj(errorObj[strStack]);\r\n            }\r\n            else if (errorObj[strError] && errorObj[strError][strStack]) {\r\n                // Edge error event provides the stack and error object\r\n                details = _convertStackObj(errorObj[strError][strStack]);\r\n            }\r\n            else if (errorObj[\"exception\"] && errorObj.exception[strStack]) {\r\n                details = _convertStackObj(errorObj.exception[strStack]);\r\n            }\r\n            else if (_isStackDetails(errorObj)) {\r\n                details = errorObj;\r\n            }\r\n            else if (_isStackDetails(errorObj[strStackDetails])) {\r\n                details = errorObj[strStackDetails];\r\n            }\r\n            else if (getWindow() && getWindow()[\"opera\"] && errorObj[strMessage]) {\r\n                // Opera\r\n                details = _getOperaStack(errorObj[_DYN_MESSAGE /* @min:%2emessage */]);\r\n            }\r\n            else if (errorObj[\"reason\"] && errorObj.reason[strStack]) {\r\n                // UnhandledPromiseRejection\r\n                details = _convertStackObj(errorObj.reason[strStack]);\r\n            }\r\n            else if (isString(errorObj)) {\r\n                details = _convertStackObj(errorObj);\r\n            }\r\n            else {\r\n                var evtMessage = errorObj[strMessage] || errorObj[strDescription] || \"\";\r\n                if (isString(errorObj[strErrorSrc])) {\r\n                    if (evtMessage) {\r\n                        evtMessage += \"\\n\";\r\n                    }\r\n                    evtMessage += \" from \" + errorObj[strErrorSrc];\r\n                }\r\n                if (evtMessage) {\r\n                    details = _convertStackObj(evtMessage);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // something unexpected happened so to avoid failing to report any error lets swallow the exception\r\n            // and fallback to the callee/caller method\r\n            details = _convertStackObj(e);\r\n        }\r\n    }\r\n    return details || {\r\n        src: \"\",\r\n        obj: null\r\n    };\r\n}\r\nfunction _formatStackTrace(stackDetails) {\r\n    var stack = \"\";\r\n    if (stackDetails) {\r\n        if (stackDetails.obj) {\r\n            stack = stackDetails.obj.join(\"\\n\");\r\n        }\r\n        else {\r\n            stack = stackDetails.src || \"\";\r\n        }\r\n    }\r\n    return stack;\r\n}\r\nfunction _parseStack(stack) {\r\n    var parsedStack;\r\n    var frames = stack.obj;\r\n    if (frames && frames[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        parsedStack = [];\r\n        var level_1 = 0;\r\n        var foundStackStart_1 = false;\r\n        var totalSizeInBytes_1 = 0;\r\n        arrForEach(frames, function (frame) {\r\n            if (foundStackStart_1 || _isStackFrame(frame)) {\r\n                var theFrame = asString(frame);\r\n                // Once we have found the first stack frame we treat the rest of the lines as part of the stack\r\n                foundStackStart_1 = true;\r\n                var parsedFrame = _extractStackFrame(theFrame, level_1);\r\n                if (parsedFrame) {\r\n                    totalSizeInBytes_1 += parsedFrame[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                    parsedStack.push(parsedFrame);\r\n                    level_1++;\r\n                }\r\n            }\r\n        });\r\n        // DP Constraint - exception parsed stack must be < 32KB\r\n        // remove frames from the middle to meet the threshold\r\n        var exceptionParsedStackThreshold = 32 * 1024;\r\n        if (totalSizeInBytes_1 > exceptionParsedStackThreshold) {\r\n            var left = 0;\r\n            var right = parsedStack[_DYN_LENGTH /* @min:%2elength */] - 1;\r\n            var size = 0;\r\n            var acceptedLeft = left;\r\n            var acceptedRight = right;\r\n            while (left < right) {\r\n                // check size\r\n                var lSize = parsedStack[left][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                var rSize = parsedStack[right][_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */];\r\n                size += lSize + rSize;\r\n                if (size > exceptionParsedStackThreshold) {\r\n                    // remove extra frames from the middle\r\n                    var howMany = acceptedRight - acceptedLeft + 1;\r\n                    parsedStack.splice(acceptedLeft, howMany);\r\n                    break;\r\n                }\r\n                // update pointers\r\n                acceptedLeft = left;\r\n                acceptedRight = right;\r\n                left++;\r\n                right--;\r\n            }\r\n        }\r\n    }\r\n    return parsedStack;\r\n}\r\nfunction _getErrorType(errorType) {\r\n    // Gets the Error Type by passing the constructor (used to get the true type of native error object).\r\n    var typeName = \"\";\r\n    if (errorType) {\r\n        typeName = errorType.typeName || errorType[_DYN_NAME /* @min:%2ename */] || \"\";\r\n        if (!typeName) {\r\n            try {\r\n                var funcNameRegex = /function (.{1,200})\\(/;\r\n                var results = (funcNameRegex).exec((errorType).constructor[_DYN_TO_STRING /* @min:%2etoString */]());\r\n                typeName = (results && results[_DYN_LENGTH /* @min:%2elength */] > 1) ? results[1] : \"\";\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n            }\r\n        }\r\n    }\r\n    return typeName;\r\n}\r\n/**\r\n * Formats the provided errorObj for display and reporting, it may be a String, Object, integer or undefined depending on the browser.\r\n * @param errorObj - The supplied errorObj\r\n */\r\nexport function _formatErrorCode(errorObj) {\r\n    if (errorObj) {\r\n        try {\r\n            if (!isString(errorObj)) {\r\n                var errorType = _getErrorType(errorObj);\r\n                var result = _stringify(errorObj, false);\r\n                if (!result || result === \"{}\") {\r\n                    if (errorObj[strError]) {\r\n                        // Looks like an MS Error Event\r\n                        errorObj = errorObj[strError];\r\n                        errorType = _getErrorType(errorObj);\r\n                    }\r\n                    result = _stringify(errorObj, true);\r\n                }\r\n                if (strIndexOf(result, errorType) !== 0 && errorType !== \"String\") {\r\n                    return errorType + \":\" + result;\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty -- Ignoring any failures as nothing we can do\r\n        }\r\n    }\r\n    // Fallback to just letting the object format itself into a string\r\n    return \"\" + (errorObj || \"\");\r\n}\r\nvar Exception = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the ExceptionTelemetry object\r\n     */\r\n    function Exception(logger, exception, properties, measurements, severityLevel, id) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            exceptions: 1 /* FieldType.Required */,\r\n            severityLevel: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2; // TODO: handle the CS\"4.0\" ==> breeze 2 conversion in a better way\r\n        if (!_isExceptionInternal(exception)) {\r\n            if (!properties) {\r\n                properties = {};\r\n            }\r\n            if (id) {\r\n                properties.id = id;\r\n            }\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = [_createExceptionDetails(logger, exception, properties)];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n            if (severityLevel) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = severityLevel;\r\n            }\r\n            if (id) {\r\n                _self.id = id;\r\n            }\r\n        }\r\n        else {\r\n            _self[_DYN_EXCEPTIONS /* @min:%2eexceptions */] = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */] || [];\r\n            _self[_DYN_PROPERTIES /* @min:%2eproperties */] = exception[_DYN_PROPERTIES /* @min:%2eproperties */];\r\n            _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = exception[_DYN_MEASUREMENTS /* @min:%2emeasurements */];\r\n            if (exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */]) {\r\n                _self[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */] = exception[_DYN_SEVERITY_LEVEL /* @min:%2eseverityLevel */];\r\n            }\r\n            if (exception.id) {\r\n                _self.id = exception.id;\r\n                exception[_DYN_PROPERTIES /* @min:%2eproperties */].id = exception.id;\r\n            }\r\n            if (exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */]) {\r\n                _self[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */] = exception[_DYN_PROBLEM_GROUP /* @min:%2eproblemGroup */];\r\n            }\r\n            // bool/int types, use isNullOrUndefined\r\n            if (!isNullOrUndefined(exception.isManual)) {\r\n                _self.isManual = exception.isManual;\r\n            }\r\n        }\r\n    }\r\n    Exception.CreateAutoException = function (message, url, lineNumber, columnNumber, error, evt, stack, errorSrc) {\r\n        var errorType = _getErrorType(error || evt || message);\r\n        return {\r\n            message: _formatMessage(message, errorType),\r\n            url: url,\r\n            lineNumber: lineNumber,\r\n            columnNumber: columnNumber,\r\n            error: _formatErrorCode(error || evt || message),\r\n            evt: _formatErrorCode(evt || message),\r\n            typeName: errorType,\r\n            stackDetails: _getStackFromErrorObj(stack || error || evt),\r\n            errorSrc: errorSrc\r\n        };\r\n    };\r\n    Exception.CreateFromInterface = function (logger, exception, properties, measurements) {\r\n        var exceptions = exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */]\r\n            && arrMap(exception[_DYN_EXCEPTIONS /* @min:%2eexceptions */], function (ex) { return _createExDetailsFromInterface(logger, ex); });\r\n        var exceptionData = new Exception(logger, __assign(__assign({}, exception), { exceptions: exceptions }), properties, measurements);\r\n        return exceptionData;\r\n    };\r\n    Exception.prototype.toInterface = function () {\r\n        var _a = this, exceptions = _a.exceptions, properties = _a.properties, measurements = _a.measurements, severityLevel = _a.severityLevel, problemGroup = _a.problemGroup, id = _a.id, isManual = _a.isManual;\r\n        var exceptionDetailsInterface = exceptions instanceof Array\r\n            && arrMap(exceptions, function (exception) { return exception.toInterface(); })\r\n            || undefined;\r\n        return {\r\n            ver: \"4.0\",\r\n            exceptions: exceptionDetailsInterface,\r\n            severityLevel: severityLevel,\r\n            properties: properties,\r\n            measurements: measurements,\r\n            problemGroup: problemGroup,\r\n            id: id,\r\n            isManual: isManual\r\n        };\r\n    };\r\n    /**\r\n     * Creates a simple exception with 1 stack frame. Useful for manual constracting of exception.\r\n     */\r\n    Exception.CreateSimpleException = function (message, typeName, assembly, fileName, details, line) {\r\n        var _a;\r\n        return {\r\n            exceptions: [\r\n                (_a = {},\r\n                    _a[_DYN_HAS_FULL_STACK /* @min:hasFullStack */] = true,\r\n                    _a.message = message,\r\n                    _a.stack = details,\r\n                    _a.typeName = typeName,\r\n                    _a)\r\n            ]\r\n        };\r\n    };\r\n    Exception.envelopeType = \"Microsoft.ApplicationInsights.{0}.Exception\";\r\n    Exception.dataType = \"ExceptionData\";\r\n    Exception.formatError = _formatErrorCode;\r\n    return Exception;\r\n}());\r\nexport { Exception };\r\nvar exDetailsAiDataContract = objFreeze({\r\n    id: 0 /* FieldType.Default */,\r\n    outerId: 0 /* FieldType.Default */,\r\n    typeName: 1 /* FieldType.Required */,\r\n    message: 1 /* FieldType.Required */,\r\n    hasFullStack: 0 /* FieldType.Default */,\r\n    stack: 0 /* FieldType.Default */,\r\n    parsedStack: 2 /* FieldType.Array */\r\n});\r\nfunction _toInterface() {\r\n    var _self = this;\r\n    var parsedStack = isArray(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */])\r\n        && arrMap(_self[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return _parsedFrameToInterface(frame); });\r\n    var exceptionDetailsInterface = {\r\n        id: _self.id,\r\n        outerId: _self.outerId,\r\n        typeName: _self[_DYN_TYPE_NAME /* @min:%2etypeName */],\r\n        message: _self[_DYN_MESSAGE /* @min:%2emessage */],\r\n        hasFullStack: _self[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */],\r\n        stack: _self[strStack],\r\n        parsedStack: parsedStack || undefined\r\n    };\r\n    return exceptionDetailsInterface;\r\n}\r\nexport function _createExceptionDetails(logger, exception, properties) {\r\n    var _a;\r\n    var id;\r\n    var outerId;\r\n    var typeName;\r\n    var message;\r\n    var hasFullStack;\r\n    var theStack;\r\n    var parsedStack;\r\n    if (!_isExceptionDetailsInternal(exception)) {\r\n        var error = exception;\r\n        var evt = error && error.evt;\r\n        if (!isError(error)) {\r\n            error = error[strError] || evt || error;\r\n        }\r\n        typeName = dataSanitizeString(logger, _getErrorType(error)) || strNotSpecified;\r\n        message = dataSanitizeMessage(logger, _formatMessage(exception || error, typeName)) || strNotSpecified;\r\n        var stack = exception[strStackDetails] || _getStackFromErrorObj(exception);\r\n        parsedStack = _parseStack(stack);\r\n        // after parsedStack is inited, iterate over each frame object, sanitize its assembly field\r\n        if (isArray(parsedStack)) {\r\n            arrMap(parsedStack, function (frame) {\r\n                frame[_DYN_ASSEMBLY /* @min:%2eassembly */] = dataSanitizeString(logger, frame[_DYN_ASSEMBLY /* @min:%2eassembly */]);\r\n                frame[_DYN_FILE_NAME /* @min:%2efileName */] = dataSanitizeString(logger, frame[_DYN_FILE_NAME /* @min:%2efileName */]);\r\n            });\r\n        }\r\n        theStack = dataSanitizeException(logger, _formatStackTrace(stack));\r\n        hasFullStack = isArray(parsedStack) && parsedStack[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n        if (properties) {\r\n            properties[_DYN_TYPE_NAME /* @min:%2etypeName */] = properties[_DYN_TYPE_NAME /* @min:%2etypeName */] || typeName;\r\n        }\r\n    }\r\n    else {\r\n        typeName = exception[_DYN_TYPE_NAME /* @min:%2etypeName */];\r\n        message = exception[_DYN_MESSAGE /* @min:%2emessage */];\r\n        theStack = exception[strStack];\r\n        parsedStack = exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */] || [];\r\n        hasFullStack = exception[_DYN_HAS_FULL_STACK /* @min:%2ehasFullStack */];\r\n    }\r\n    return _a = {},\r\n        _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = exDetailsAiDataContract,\r\n        _a.id = id,\r\n        _a.outerId = outerId,\r\n        _a.typeName = typeName,\r\n        _a.message = message,\r\n        _a[_DYN_HAS_FULL_STACK /* @min:hasFullStack */] = hasFullStack,\r\n        _a.stack = theStack,\r\n        _a.parsedStack = parsedStack,\r\n        _a.toInterface = _toInterface,\r\n        _a;\r\n}\r\nexport function _createExDetailsFromInterface(logger, exception) {\r\n    var parsedStack = (isArray(exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */])\r\n        && arrMap(exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */], function (frame) { return _stackFrameFromInterface(frame); }))\r\n        || exception[_DYN_PARSED_STACK /* @min:%2eparsedStack */];\r\n    var exceptionDetails = _createExceptionDetails(logger, __assign(__assign({}, exception), { parsedStack: parsedStack }));\r\n    return exceptionDetails;\r\n}\r\nfunction _parseFilename(theFrame, fileName) {\r\n    var lineCol = fileName[_DYN_MATCH /* @min:%2ematch */](PARSE_FILENAME_LINE_COL);\r\n    if (lineCol && lineCol[_DYN_LENGTH /* @min:%2elength */] >= 4) {\r\n        theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = lineCol[1];\r\n        theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(lineCol[2]);\r\n    }\r\n    else {\r\n        var lineNo = fileName[_DYN_MATCH /* @min:%2ematch */](PARSE_FILENAME_LINE_ONLY);\r\n        if (lineNo && lineNo[_DYN_LENGTH /* @min:%2elength */] >= 3) {\r\n            theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = lineNo[1];\r\n            theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(lineNo[2]);\r\n        }\r\n        else {\r\n            theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = fileName;\r\n        }\r\n    }\r\n}\r\nfunction _handleFilename(theFrame, sequence, matches) {\r\n    var filename = theFrame[_DYN_FILE_NAME /* @min:%2efileName */];\r\n    if (sequence.fn && matches && matches[_DYN_LENGTH /* @min:%2elength */] > sequence.fn) {\r\n        if (sequence.ln && matches[_DYN_LENGTH /* @min:%2elength */] > sequence.ln) {\r\n            filename = strTrim(matches[sequence.fn] || \"\");\r\n            theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(strTrim(matches[sequence.ln] || \"\")) || 0;\r\n        }\r\n        else {\r\n            filename = strTrim(matches[sequence.fn] || \"\");\r\n        }\r\n    }\r\n    if (filename) {\r\n        _parseFilename(theFrame, filename);\r\n    }\r\n}\r\nfunction _isStackFrame(frame) {\r\n    var result = false;\r\n    if (frame && isString(frame)) {\r\n        var trimmedFrame = strTrim(frame);\r\n        if (trimmedFrame) {\r\n            result = IS_FRAME.test(trimmedFrame);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar stackFrameAiDataContract = objFreeze({\r\n    level: 1 /* FieldType.Required */,\r\n    method: 1 /* FieldType.Required */,\r\n    assembly: 0 /* FieldType.Default */,\r\n    fileName: 0 /* FieldType.Default */,\r\n    line: 0 /* FieldType.Default */\r\n});\r\nexport function _extractStackFrame(frame, level) {\r\n    var _a;\r\n    var theFrame;\r\n    if (frame && isString(frame) && strTrim(frame)) {\r\n        theFrame = (_a = {},\r\n            _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = stackFrameAiDataContract,\r\n            _a.level = level,\r\n            _a.assembly = strTrim(frame),\r\n            _a.method = NoMethod,\r\n            _a.fileName = \"\",\r\n            _a.line = 0,\r\n            _a.sizeInBytes = 0,\r\n            _a);\r\n        var idx = 0;\r\n        while (idx < _parseSequence[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var sequence = _parseSequence[idx];\r\n            if (sequence.chk && !sequence.chk(frame)) {\r\n                break;\r\n            }\r\n            if (sequence.pre) {\r\n                frame = sequence.pre(frame);\r\n            }\r\n            // Attempt to \"parse\" the stack frame\r\n            var matches = frame[_DYN_MATCH /* @min:%2ematch */](sequence.re);\r\n            if (matches && matches[_DYN_LENGTH /* @min:%2elength */] >= sequence.len) {\r\n                if (sequence.m) {\r\n                    theFrame.method = strTrim(matches[sequence.m] || NoMethod);\r\n                }\r\n                if (sequence.hdl) {\r\n                    // Run any custom handler\r\n                    sequence.hdl(theFrame, sequence, matches);\r\n                }\r\n                else if (sequence.fn) {\r\n                    if (sequence.ln) {\r\n                        theFrame[_DYN_FILE_NAME /* @min:%2efileName */] = strTrim(matches[sequence.fn] || \"\");\r\n                        theFrame[_DYN_LINE /* @min:%2eline */] = parseInt(strTrim(matches[sequence.ln] || \"\")) || 0;\r\n                    }\r\n                    else {\r\n                        _parseFilename(theFrame, matches[sequence.fn] || \"\");\r\n                    }\r\n                }\r\n                // We found a match so stop looking\r\n                break;\r\n            }\r\n            idx++;\r\n        }\r\n    }\r\n    return _populateFrameSizeInBytes(theFrame);\r\n}\r\nfunction _stackFrameFromInterface(frame) {\r\n    var _a;\r\n    var parsedFrame = (_a = {},\r\n        _a[_DYN_AI_DATA_CONTRACT /* @min:aiDataContract */] = stackFrameAiDataContract,\r\n        _a.level = frame.level,\r\n        _a.method = frame.method,\r\n        _a.assembly = frame[_DYN_ASSEMBLY /* @min:%2eassembly */],\r\n        _a.fileName = frame[_DYN_FILE_NAME /* @min:%2efileName */],\r\n        _a.line = frame[_DYN_LINE /* @min:%2eline */],\r\n        _a.sizeInBytes = 0,\r\n        _a);\r\n    return _populateFrameSizeInBytes(parsedFrame);\r\n}\r\nfunction _populateFrameSizeInBytes(frame) {\r\n    var sizeInBytes = STACKFRAME_BASE_SIZE;\r\n    if (frame) {\r\n        sizeInBytes += frame.method[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.assembly[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.fileName[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.level.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n        sizeInBytes += frame.line.toString()[_DYN_LENGTH /* @min:%2elength */];\r\n        frame[_DYN_SIZE_IN_BYTES /* @min:%2esizeInBytes */] = sizeInBytes;\r\n    }\r\n    return frame;\r\n}\r\nexport function _parsedFrameToInterface(frame) {\r\n    return {\r\n        level: frame.level,\r\n        method: frame.method,\r\n        assembly: frame[_DYN_ASSEMBLY /* @min:%2eassembly */],\r\n        fileName: frame[_DYN_FILE_NAME /* @min:%2efileName */],\r\n        line: frame[_DYN_LINE /* @min:%2eline */]\r\n    };\r\n}\r\n//# sourceMappingURL=Exception.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar DataPoint = /** @class */ (function () {\r\n    function DataPoint() {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            name: 1 /* FieldType.Required */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 1 /* FieldType.Required */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */\r\n        };\r\n        /**\r\n         * Metric type. Single measurement or the aggregated value.\r\n         */\r\n        this.kind = 0 /* DataPointType.Measurement */;\r\n    }\r\n    return DataPoint;\r\n}());\r\nexport { DataPoint };\r\n//# sourceMappingURL=DataPoint.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { strNotSpecified } from \"../Constants\";\r\nimport { _DYN_COUNT, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { DataPoint } from \"./Common/DataPoint\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString } from \"./Common/DataSanitizer\";\r\nvar Metric = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the MetricTelemetry object\r\n     */\r\n    function Metric(logger, name, value, count, min, max, stdDev, properties, measurements) {\r\n        this.aiDataContract = {\r\n            ver: 1 /* FieldType.Required */,\r\n            metrics: 1 /* FieldType.Required */,\r\n            properties: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        var dataPoint = new DataPoint();\r\n        dataPoint[_DYN_COUNT /* @min:%2ecount */] = count > 0 ? count : undefined;\r\n        dataPoint.max = isNaN(max) || max === null ? undefined : max;\r\n        dataPoint.min = isNaN(min) || min === null ? undefined : min;\r\n        dataPoint[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        dataPoint.value = value;\r\n        dataPoint.stdDev = isNaN(stdDev) || stdDev === null ? undefined : stdDev;\r\n        _self.metrics = [dataPoint];\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    Metric.envelopeType = \"Microsoft.ApplicationInsights.{0}.Metric\";\r\n    Metric.dataType = \"MetricData\";\r\n    return Metric;\r\n}());\r\nexport { Metric };\r\n//# sourceMappingURL=Metric.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { getDocument, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_MATCH, _DYN_PATHNAME, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _document = getDocument() || {};\r\nvar _htmlAnchorIdx = 0;\r\n// Use an array of temporary values as it's possible for multiple calls to parseUrl() will be called with different URLs\r\n// Using a cache size of 5 for now as it current depth usage is at least 2, so adding a minor buffer to handle future updates\r\nvar _htmlAnchorElement = [null, null, null, null, null];\r\nexport function urlParseUrl(url) {\r\n    var anchorIdx = _htmlAnchorIdx;\r\n    var anchorCache = _htmlAnchorElement;\r\n    var tempAnchor = anchorCache[anchorIdx];\r\n    if (!_document.createElement) {\r\n        // Always create the temp instance if createElement is not available\r\n        tempAnchor = { host: urlParseHost(url, true) };\r\n    }\r\n    else if (!anchorCache[anchorIdx]) {\r\n        // Create and cache the unattached anchor instance\r\n        tempAnchor = anchorCache[anchorIdx] = _document.createElement(\"a\");\r\n    }\r\n    tempAnchor.href = url;\r\n    // Move the cache index forward\r\n    anchorIdx++;\r\n    if (anchorIdx >= anchorCache[_DYN_LENGTH /* @min:%2elength */]) {\r\n        anchorIdx = 0;\r\n    }\r\n    _htmlAnchorIdx = anchorIdx;\r\n    return tempAnchor;\r\n}\r\nexport function urlGetAbsoluteUrl(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a.href;\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetPathName(url) {\r\n    var result;\r\n    var a = urlParseUrl(url);\r\n    if (a) {\r\n        result = a[_DYN_PATHNAME /* @min:%2epathname */];\r\n    }\r\n    return result;\r\n}\r\nexport function urlGetCompleteUrl(method, absoluteUrl) {\r\n    if (method) {\r\n        return method.toUpperCase() + \" \" + absoluteUrl;\r\n    }\r\n    return absoluteUrl;\r\n}\r\n// Fallback method to grab host from url if document.createElement method is not available\r\nexport function urlParseHost(url, inclPort) {\r\n    var fullHost = urlParseFullHost(url, inclPort) || \"\";\r\n    if (fullHost) {\r\n        var match = fullHost[_DYN_MATCH /* @min:%2ematch */](/(www\\d{0,5}\\.)?([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 3 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            return match[2] + (match[3] || \"\");\r\n        }\r\n    }\r\n    return fullHost;\r\n}\r\nexport function urlParseFullHost(url, inclPort) {\r\n    var result = null;\r\n    if (url) {\r\n        var match = url[_DYN_MATCH /* @min:%2ematch */](/(\\w{1,150}):\\/\\/([^\\/:]{1,256})(:\\d{1,20})?/i);\r\n        if (match != null && match[_DYN_LENGTH /* @min:%2elength */] > 2 && isString(match[2]) && match[2][_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            result = match[2] || \"\";\r\n            if (inclPort && match[_DYN_LENGTH /* @min:%2elength */] > 2) {\r\n                var protocol = (match[1] || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n                var port = match[3] || \"\";\r\n                // IE includes the standard port so pass it off if it's the same as the protocol\r\n                if (protocol === \"http\" && port === \":80\") {\r\n                    port = \"\";\r\n                }\r\n                else if (protocol === \"https\" && port === \":443\") {\r\n                    port = \"\";\r\n                }\r\n                result += port;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=UrlHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrForEach, arrIndexOf, dateNow, getPerformance, isNullOrUndefined, isValidSpanId, isValidTraceId } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strIndexOf } from \"@nevware21/ts-utils\";\r\nimport { DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH } from \"./Constants\";\r\nimport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nimport { dataSanitizeString } from \"./Telemetry/Common/DataSanitizer\";\r\nimport { urlParseFullHost, urlParseUrl } from \"./UrlHelperFuncs\";\r\nimport { _DYN_CORRELATION_HEADER_E0, _DYN_LENGTH, _DYN_NAME, _DYN_PATHNAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\n// listing only non-geo specific locations\r\nvar _internalEndpoints = [\r\n    DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH,\r\n    \"https://breeze.aimon.applicationinsights.io\" + DEFAULT_BREEZE_PATH,\r\n    \"https://dc-int.services.visualstudio.com\" + DEFAULT_BREEZE_PATH\r\n];\r\nvar _correlationIdPrefix = \"cid-v1:\";\r\nexport function isInternalApplicationInsightsEndpoint(endpointUrl) {\r\n    return arrIndexOf(_internalEndpoints, endpointUrl[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]()) !== -1;\r\n}\r\nexport function correlationIdSetPrefix(prefix) {\r\n    _correlationIdPrefix = prefix;\r\n}\r\nexport function correlationIdGetPrefix() {\r\n    return _correlationIdPrefix;\r\n}\r\n/**\r\n * Checks if a request url is not on a excluded domain list and if it is safe to add correlation headers.\r\n * Headers are always included if the current domain matches the request domain. If they do not match (CORS),\r\n * they are regex-ed across correlationHeaderDomains and correlationHeaderExcludedDomains to determine if headers are included.\r\n * Some environments don't give information on currentHost via window.location.host (e.g. Cordova). In these cases, the user must\r\n * manually supply domains to include correlation headers on. Else, no headers will be included at all.\r\n */\r\nexport function correlationIdCanIncludeCorrelationHeader(config, requestUrl, currentHost) {\r\n    if (!requestUrl || (config && config.disableCorrelationHeaders)) {\r\n        return false;\r\n    }\r\n    if (config && config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */]) {\r\n        for (var i = 0; i < config.correlationHeaderExcludePatterns[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            if (config[_DYN_CORRELATION_HEADER_E0 /* @min:%2ecorrelationHeaderExcludePatterns */][i].test(requestUrl)) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    var requestHost = urlParseUrl(requestUrl).host[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    if (requestHost && (strIndexOf(requestHost, \":443\") !== -1 || strIndexOf(requestHost, \":80\") !== -1)) {\r\n        // [Bug #1260] IE can include the port even for http and https URLs so if present\r\n        // try and parse it to remove if it matches the default protocol port\r\n        requestHost = (urlParseFullHost(requestUrl, true) || \"\")[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    }\r\n    if ((!config || !config.enableCorsCorrelation) && (requestHost && requestHost !== currentHost)) {\r\n        return false;\r\n    }\r\n    var includedDomains = config && config.correlationHeaderDomains;\r\n    if (includedDomains) {\r\n        var matchExists_1;\r\n        arrForEach(includedDomains, function (domain) {\r\n            var regex = new RegExp(domain.toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n            matchExists_1 = matchExists_1 || regex.test(requestHost);\r\n        });\r\n        if (!matchExists_1) {\r\n            return false;\r\n        }\r\n    }\r\n    var excludedDomains = config && config.correlationHeaderExcludedDomains;\r\n    if (!excludedDomains || excludedDomains[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n        return true;\r\n    }\r\n    for (var i = 0; i < excludedDomains[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n        var regex = new RegExp(excludedDomains[i].toLowerCase().replace(/\\\\/g, \"\\\\\\\\\").replace(/\\./g, \"\\\\.\").replace(/\\*/g, \".*\"));\r\n        if (regex.test(requestHost)) {\r\n            return false;\r\n        }\r\n    }\r\n    // if we don't know anything about the requestHost, require the user to use included/excludedDomains.\r\n    // Previously we always returned false for a falsy requestHost\r\n    return requestHost && requestHost[_DYN_LENGTH /* @min:%2elength */] > 0;\r\n}\r\n/**\r\n * Combines target appId and target role name from response header.\r\n */\r\nexport function correlationIdGetCorrelationContext(responseHeader) {\r\n    if (responseHeader) {\r\n        var correlationId = correlationIdGetCorrelationContextValue(responseHeader, RequestHeaders[1 /* eRequestHeaders.requestContextTargetKey */]);\r\n        if (correlationId && correlationId !== _correlationIdPrefix) {\r\n            return correlationId;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Gets key from correlation response header\r\n */\r\nexport function correlationIdGetCorrelationContextValue(responseHeader, key) {\r\n    if (responseHeader) {\r\n        var keyValues = responseHeader[_DYN_SPLIT /* @min:%2esplit */](\",\");\r\n        for (var i = 0; i < keyValues[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            var keyValue = keyValues[i][_DYN_SPLIT /* @min:%2esplit */](\"=\");\r\n            if (keyValue[_DYN_LENGTH /* @min:%2elength */] === 2 && keyValue[0] === key) {\r\n                return keyValue[1];\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName) {\r\n    var target, name = commandName, data = commandName;\r\n    if (absoluteUrl && absoluteUrl[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        var parsedUrl = urlParseUrl(absoluteUrl);\r\n        target = parsedUrl.host;\r\n        if (!name) {\r\n            if (parsedUrl[_DYN_PATHNAME /* @min:%2epathname */] != null) {\r\n                var pathName = (parsedUrl.pathname[_DYN_LENGTH /* @min:%2elength */] === 0) ? \"/\" : parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                if (pathName.charAt(0) !== \"/\") {\r\n                    pathName = \"/\" + pathName;\r\n                }\r\n                data = parsedUrl[_DYN_PATHNAME /* @min:%2epathname */];\r\n                name = dataSanitizeString(logger, method ? method + \" \" + pathName : pathName);\r\n            }\r\n            else {\r\n                name = dataSanitizeString(logger, absoluteUrl);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        target = commandName;\r\n        name = commandName;\r\n    }\r\n    return {\r\n        target: target,\r\n        name: name,\r\n        data: data\r\n    };\r\n}\r\nexport function dateTimeUtilsNow() {\r\n    // returns the window or webworker performance object\r\n    var perf = getPerformance();\r\n    if (perf && perf.now && perf.timing) {\r\n        var now = perf.now() + perf.timing.navigationStart;\r\n        // Known issue with IE where this calculation can be negative, so if it is then ignore and fallback\r\n        if (now > 0) {\r\n            return now;\r\n        }\r\n    }\r\n    return dateNow();\r\n}\r\nexport function dateTimeUtilsDuration(start, end) {\r\n    var result = null;\r\n    if (start !== 0 && end !== 0 && !isNullOrUndefined(start) && !isNullOrUndefined(end)) {\r\n        result = end - start;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext from an optional telemetryTrace\r\n * @param telemetryTrace - The telemetryTrace instance that is being wrapped\r\n * @param parentCtx - An optional parent distributed trace instance, almost always undefined as this scenario is only used in the case of multiple property handlers.\r\n * @returns A new IDistributedTraceContext instance that is backed by the telemetryTrace or temporary object\r\n */\r\nexport function createDistributedTraceContextFromTrace(telemetryTrace, parentCtx) {\r\n    var trace = telemetryTrace || {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace.traceID;\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace.traceID = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace.parentID;\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace.parentID = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace.traceFlags;\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace.traceFlags = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=Util.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { msToTimeSpan } from \"../HelperFuncs\";\r\nimport { AjaxHelperParseDependencyPath } from \"../Util\";\r\nimport { _DYN_DURATION, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_PROPERTIES } from \"../__DynamicConstants\";\r\nimport { dataSanitizeMeasurements, dataSanitizeProperties, dataSanitizeString, dataSanitizeUrl } from \"./Common/DataSanitizer\";\r\nvar RemoteDependencyData = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of the RemoteDependencyData object\r\n     */\r\n    function RemoteDependencyData(logger, id, absoluteUrl, commandName, value, success, resultCode, method, requestAPI, correlationContext, properties, measurements) {\r\n        if (requestAPI === void 0) { requestAPI = \"Ajax\"; }\r\n        this.aiDataContract = {\r\n            id: 1 /* FieldType.Required */,\r\n            ver: 1 /* FieldType.Required */,\r\n            name: 0 /* FieldType.Default */,\r\n            resultCode: 0 /* FieldType.Default */,\r\n            duration: 0 /* FieldType.Default */,\r\n            success: 0 /* FieldType.Default */,\r\n            data: 0 /* FieldType.Default */,\r\n            target: 0 /* FieldType.Default */,\r\n            type: 0 /* FieldType.Default */,\r\n            properties: 0 /* FieldType.Default */,\r\n            measurements: 0 /* FieldType.Default */,\r\n            kind: 0 /* FieldType.Default */,\r\n            value: 0 /* FieldType.Default */,\r\n            count: 0 /* FieldType.Default */,\r\n            min: 0 /* FieldType.Default */,\r\n            max: 0 /* FieldType.Default */,\r\n            stdDev: 0 /* FieldType.Default */,\r\n            dependencyKind: 0 /* FieldType.Default */,\r\n            dependencySource: 0 /* FieldType.Default */,\r\n            commandName: 0 /* FieldType.Default */,\r\n            dependencyTypeName: 0 /* FieldType.Default */\r\n        };\r\n        var _self = this;\r\n        _self.ver = 2;\r\n        _self.id = id;\r\n        _self[_DYN_DURATION /* @min:%2eduration */] = msToTimeSpan(value);\r\n        _self.success = success;\r\n        _self.resultCode = resultCode + \"\";\r\n        _self.type = dataSanitizeString(logger, requestAPI);\r\n        var dependencyFields = AjaxHelperParseDependencyPath(logger, absoluteUrl, method, commandName);\r\n        _self.data = dataSanitizeUrl(logger, commandName) || dependencyFields.data; // get a value from hosturl if commandName not available\r\n        _self.target = dataSanitizeString(logger, dependencyFields.target);\r\n        if (correlationContext) {\r\n            _self.target = \"\".concat(_self.target, \" | \").concat(correlationContext);\r\n        }\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, dependencyFields[_DYN_NAME /* @min:%2ename */]);\r\n        _self[_DYN_PROPERTIES /* @min:%2eproperties */] = dataSanitizeProperties(logger, properties);\r\n        _self[_DYN_MEASUREMENTS /* @min:%2emeasurements */] = dataSanitizeMeasurements(logger, measurements);\r\n    }\r\n    RemoteDependencyData.envelopeType = \"Microsoft.ApplicationInsights.{0}.RemoteDependency\";\r\n    RemoteDependencyData.dataType = \"RemoteDependencyData\";\r\n    return RemoteDependencyData;\r\n}());\r\nexport { RemoteDependencyData };\r\n//# sourceMappingURL=RemoteDependencyData.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { arrForEach, createUniqueNamespace, eventOff, eventOn, getDocument, getNavigator, getWindow, isNullOrUndefined, isUndefined, mergeEvtNamespace } from \"@microsoft/applicationinsights-core-js\";\r\nfunction _disableEvents(target, evtNamespace) {\r\n    eventOff(target, null, null, evtNamespace);\r\n}\r\n/**\r\n * Create a new OfflineListener instance to monitor browser online / offline events\r\n * @param parentEvtNamespace - The parent event namespace to append to any specific events for this instance\r\n */\r\nexport function createOfflineListener(parentEvtNamespace) {\r\n    var _document = getDocument();\r\n    var _navigator = getNavigator(); // Gets the window.navigator or workerNavigator depending on the global\r\n    var _isListening = false;\r\n    var listenerList = [];\r\n    // Set the initial state\r\n    // rState is changed by the browser, both via events and when we check the navigator.onLine property\r\n    var rState = 1 /* eOfflineValue.Online */;\r\n    if (_navigator && !isNullOrUndefined(_navigator.onLine) && !_navigator.onLine) { // navigator.onLine is undefined in react-native\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n    }\r\n    // ustate is changed by the user calling setOnlineState\r\n    var uState = 0 /* eOfflineValue.Unknown */;\r\n    // current state would be updated each time rState or uState is changed\r\n    // it is a resolved value of rState and uState\r\n    var _currentState = calCurrentState();\r\n    var _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"OfflineListener\"), parentEvtNamespace);\r\n    try {\r\n        if (_enableEvents(getWindow())) {\r\n            _isListening = true;\r\n        }\r\n        if (_document) {\r\n            // Also attach to the document.body or document\r\n            var target = _document.body || _document;\r\n            if (target.ononline) {\r\n                if (_enableEvents(target)) {\r\n                    _isListening = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // this makes react-native less angry\r\n        _isListening = false;\r\n    }\r\n    function _enableEvents(target) {\r\n        var enabled = false;\r\n        if (target) {\r\n            enabled = eventOn(target, \"online\", _setOnline, _evtNamespace);\r\n            if (enabled) {\r\n                eventOn(target, \"offline\", _setOffline, _evtNamespace);\r\n            }\r\n        }\r\n        return enabled;\r\n    }\r\n    function _isOnline() {\r\n        return _currentState;\r\n    }\r\n    function calCurrentState() {\r\n        if (uState === 2 /* eOfflineValue.Offline */ || rState === 2 /* eOfflineValue.Offline */) {\r\n            return false;\r\n        }\r\n        return true; // if both unknown, then we assume the network is good\r\n    }\r\n    function listnerNoticeCheck() {\r\n        // we were offline and are now online or we were online and now offline\r\n        var newState = calCurrentState();\r\n        if (_currentState !== newState) {\r\n            _currentState = newState; // use the resolved state to update\r\n            // send all the callbacks with the current state\r\n            arrForEach(listenerList, function (callback) {\r\n                var offlineState = {\r\n                    isOnline: _currentState,\r\n                    rState: rState,\r\n                    uState: uState\r\n                };\r\n                try {\r\n                    callback(offlineState);\r\n                }\r\n                catch (e) {\r\n                    // Do nothing, just making sure we run all of the callbacks\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function setOnlineState(newState) {\r\n        uState = newState;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOnline() {\r\n        rState = 1 /* eOfflineValue.Online */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _setOffline() {\r\n        rState = 2 /* eOfflineValue.Offline */;\r\n        listnerNoticeCheck();\r\n    }\r\n    function _unload() {\r\n        var win = getWindow();\r\n        if (win && _isListening) {\r\n            _disableEvents(win, _evtNamespace);\r\n            if (_document) {\r\n                // Also attach to the document.body or document\r\n                var target = _document.body || _document;\r\n                if (!isUndefined(target.ononline)) {\r\n                    _disableEvents(target, _evtNamespace);\r\n                }\r\n            }\r\n            _isListening = false;\r\n        }\r\n    }\r\n    function addListener(callback) {\r\n        listenerList.push(callback);\r\n        // Define rm as an instance of IUnloadHook\r\n        return {\r\n            rm: function () {\r\n                var index = listenerList.indexOf(callback);\r\n                if (index > -1) {\r\n                    return listenerList.splice(index, 1);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    return {\r\n        isOnline: _isOnline,\r\n        isListening: function () { return _isListening; },\r\n        unload: _unload,\r\n        addListener: addListener,\r\n        setOnlineState: setOnlineState\r\n    };\r\n}\r\n//# sourceMappingURL=Offline.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"@microsoft/applicationinsights-core-js\";\r\nexport var StorageType = ( /* @__PURE__ */createEnumStyle({\r\n    LocalStorage: 0 /* eStorageType.LocalStorage */,\r\n    SessionStorage: 1 /* eStorageType.SessionStorage */\r\n}));\r\nexport var DistributedTracingModes = ( /* @__PURE__ */createEnumStyle({\r\n    AI: 0 /* eDistributedTracingModes.AI */,\r\n    AI_AND_W3C: 1 /* eDistributedTracingModes.AI_AND_W3C */,\r\n    W3C: 2 /* eDistributedTracingModes.W3C */\r\n}));\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = ( /* @__PURE__ */createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n}));\r\n//# sourceMappingURL=Enums.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _throwInternal, dumpObj, getExceptionName, getGlobal, getGlobalInst, isNullOrUndefined, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { StorageType } from \"./Enums\";\r\nimport { _DYN_REMOVE_ITEM, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar _canUseLocalStorage = undefined;\r\nvar _canUseSessionStorage = undefined;\r\nvar _storagePrefix = \"\";\r\n/**\r\n * Gets the localStorage object if available\r\n * @returns {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getLocalStorageObject() {\r\n    if (utlCanUseLocalStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Tests storage object (localStorage or sessionStorage) to verify that it is usable\r\n * More details here: https://mathiasbynens.be/notes/localstorage-pattern\r\n * @param storageType - Type of storage\r\n * @returns {Storage} Returns storage object verified that it is usable\r\n */\r\nfunction _getVerifiedStorageObject(storageType) {\r\n    try {\r\n        if (isNullOrUndefined(getGlobal())) {\r\n            return null;\r\n        }\r\n        var uid = (new Date)[_DYN_TO_STRING /* @min:%2etoString */]();\r\n        var storage = getGlobalInst(storageType === StorageType.LocalStorage ? \"localStorage\" : \"sessionStorage\");\r\n        var name_1 = _storagePrefix + uid;\r\n        storage.setItem(name_1, uid);\r\n        var fail = storage.getItem(name_1) !== uid;\r\n        storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name_1);\r\n        if (!fail) {\r\n            return storage;\r\n        }\r\n    }\r\n    catch (exception) {\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Gets the sessionStorage object if available\r\n * @returns {Storage} - Returns the storage object if available else returns null\r\n */\r\nfunction _getSessionStorageObject() {\r\n    if (utlCanUseSessionStorage()) {\r\n        return _getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Disables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlDisableStorage() {\r\n    _canUseLocalStorage = false;\r\n    _canUseSessionStorage = false;\r\n}\r\nexport function utlSetStoragePrefix(storagePrefix) {\r\n    _storagePrefix = storagePrefix || \"\";\r\n}\r\n/**\r\n * Re-enables the global SDK usage of local or session storage if available\r\n */\r\nexport function utlEnableStorage() {\r\n    _canUseLocalStorage = utlCanUseLocalStorage(true);\r\n    _canUseSessionStorage = utlCanUseSessionStorage(true);\r\n}\r\n/**\r\n * Returns whether LocalStorage can be used, if the reset parameter is passed a true this will override\r\n * any previous disable calls.\r\n * @param reset - Should the usage be reset and determined only based on whether LocalStorage is available\r\n */\r\nexport function utlCanUseLocalStorage(reset) {\r\n    if (reset || _canUseLocalStorage === undefined) {\r\n        _canUseLocalStorage = !!_getVerifiedStorageObject(StorageType.LocalStorage);\r\n    }\r\n    return _canUseLocalStorage;\r\n}\r\nexport function utlGetLocalStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 1 /* _eInternalMessageId.BrowserCannotReadLocalStorage */, \"Browser failed read of local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetLocalStorage(logger, name, data) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 3 /* _eInternalMessageId.BrowserCannotWriteLocalStorage */, \"Browser failed write to local storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveStorage(logger, name) {\r\n    var storage = _getLocalStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseLocalStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 5 /* _eInternalMessageId.BrowserFailedRemovalFromLocalStorage */, \"Browser failed removal of local storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlCanUseSessionStorage(reset) {\r\n    if (reset || _canUseSessionStorage === undefined) {\r\n        _canUseSessionStorage = !!_getVerifiedStorageObject(StorageType.SessionStorage);\r\n    }\r\n    return _canUseSessionStorage;\r\n}\r\nexport function utlGetSessionStorageKeys() {\r\n    var keys = [];\r\n    if (utlCanUseSessionStorage()) {\r\n        objForEachKey(getGlobalInst(\"sessionStorage\"), function (key) {\r\n            keys.push(key);\r\n        });\r\n    }\r\n    return keys;\r\n}\r\nexport function utlGetSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            return storage.getItem(name);\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 2 /* _eInternalMessageId.BrowserCannotReadSessionStorage */, \"Browser failed read of session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function utlSetSessionStorage(logger, name, data) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage.setItem(name, data);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 4 /* _eInternalMessageId.BrowserCannotWriteSessionStorage */, \"Browser failed write to session storage. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function utlRemoveSessionStorage(logger, name) {\r\n    var storage = _getSessionStorageObject();\r\n    if (storage !== null) {\r\n        try {\r\n            storage[_DYN_REMOVE_ITEM /* @min:%2eremoveItem */](name);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            _canUseSessionStorage = false;\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 6 /* _eInternalMessageId.BrowserFailedRemovalFromSessionStorage */, \"Browser failed removal of session storage item. \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=StorageHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createValueMap } from \"@microsoft/applicationinsights-core-js\";\r\nexport var RequestHeaders = ( /* @__PURE__ */createValueMap({\r\n    requestContextHeader: [0 /* eRequestHeaders.requestContextHeader */, \"Request-Context\"],\r\n    requestContextTargetKey: [1 /* eRequestHeaders.requestContextTargetKey */, \"appId\"],\r\n    requestContextAppIdFormat: [2 /* eRequestHeaders.requestContextAppIdFormat */, \"appId=cid-v1:\"],\r\n    requestIdHeader: [3 /* eRequestHeaders.requestIdHeader */, \"Request-Id\"],\r\n    traceParentHeader: [4 /* eRequestHeaders.traceParentHeader */, \"traceparent\"],\r\n    traceStateHeader: [5 /* eRequestHeaders.traceStateHeader */, \"tracestate\"],\r\n    sdkContextHeader: [6 /* eRequestHeaders.sdkContextHeader */, \"Sdk-Context\"],\r\n    sdkContextHeaderAppIdRequest: [7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */, \"appId\"],\r\n    requestContextHeaderLowerCase: [8 /* eRequestHeaders.requestContextHeaderLowerCase */, \"request-context\"]\r\n}));\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","/*\n * Application Insights JavaScript SDK - Core, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { dumpObj } from \"@nevware21/ts-utils\";\r\nimport { _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_NAME } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { getJSON } from \"./EnvUtils\";\r\n/**\r\n * Parses the response from the backend.\r\n * @param response - XMLHttpRequest or XDomainRequest response\r\n */\r\nexport function parseResponse(response, diagLog) {\r\n    try {\r\n        if (response && response !== \"\") {\r\n            var result = getJSON().parse(response);\r\n            if (result && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && result[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] >= result.itemsAccepted &&\r\n                result.itemsReceived - result.itemsAccepted === result.errors[_DYN_LENGTH /* @min:%2elength */]) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 43 /* _eInternalMessageId.InvalidBackendResponse */, \"Cannot parse the response. \" + (e[_DYN_NAME /* @min:%2ename */] || dumpObj(e)), {\r\n            response: response\r\n        });\r\n    }\r\n    return null;\r\n}\r\n//# sourceMappingURL=ResponseHelpers.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport { createClassFromInterface } from \"@microsoft/applicationinsights-core-js\";\r\nfunction _aiNameFunc(baseName) {\r\n    var aiName = \"ai.\" + baseName + \".\";\r\n    return function (name) {\r\n        return aiName + name;\r\n    };\r\n}\r\nvar _aiApplication = _aiNameFunc(\"application\");\r\nvar _aiDevice = _aiNameFunc(\"device\");\r\nvar _aiLocation = _aiNameFunc(\"location\");\r\nvar _aiOperation = _aiNameFunc(\"operation\");\r\nvar _aiSession = _aiNameFunc(\"session\");\r\nvar _aiUser = _aiNameFunc(\"user\");\r\nvar _aiCloud = _aiNameFunc(\"cloud\");\r\nvar _aiInternal = _aiNameFunc(\"internal\");\r\nvar ContextTagKeys = /** @class */ (function (_super) {\r\n    __extends(ContextTagKeys, _super);\r\n    function ContextTagKeys() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return ContextTagKeys;\r\n}(createClassFromInterface({\r\n    applicationVersion: _aiApplication(\"ver\"),\r\n    applicationBuild: _aiApplication(\"build\"),\r\n    applicationTypeId: _aiApplication(\"typeId\"),\r\n    applicationId: _aiApplication(\"applicationId\"),\r\n    applicationLayer: _aiApplication(\"layer\"),\r\n    deviceId: _aiDevice(\"id\"),\r\n    deviceIp: _aiDevice(\"ip\"),\r\n    deviceLanguage: _aiDevice(\"language\"),\r\n    deviceLocale: _aiDevice(\"locale\"),\r\n    deviceModel: _aiDevice(\"model\"),\r\n    deviceFriendlyName: _aiDevice(\"friendlyName\"),\r\n    deviceNetwork: _aiDevice(\"network\"),\r\n    deviceNetworkName: _aiDevice(\"networkName\"),\r\n    deviceOEMName: _aiDevice(\"oemName\"),\r\n    deviceOS: _aiDevice(\"os\"),\r\n    deviceOSVersion: _aiDevice(\"osVersion\"),\r\n    deviceRoleInstance: _aiDevice(\"roleInstance\"),\r\n    deviceRoleName: _aiDevice(\"roleName\"),\r\n    deviceScreenResolution: _aiDevice(\"screenResolution\"),\r\n    deviceType: _aiDevice(\"type\"),\r\n    deviceMachineName: _aiDevice(\"machineName\"),\r\n    deviceVMName: _aiDevice(\"vmName\"),\r\n    deviceBrowser: _aiDevice(\"browser\"),\r\n    deviceBrowserVersion: _aiDevice(\"browserVersion\"),\r\n    locationIp: _aiLocation(\"ip\"),\r\n    locationCountry: _aiLocation(\"country\"),\r\n    locationProvince: _aiLocation(\"province\"),\r\n    locationCity: _aiLocation(\"city\"),\r\n    operationId: _aiOperation(\"id\"),\r\n    operationName: _aiOperation(\"name\"),\r\n    operationParentId: _aiOperation(\"parentId\"),\r\n    operationRootId: _aiOperation(\"rootId\"),\r\n    operationSyntheticSource: _aiOperation(\"syntheticSource\"),\r\n    operationCorrelationVector: _aiOperation(\"correlationVector\"),\r\n    sessionId: _aiSession(\"id\"),\r\n    sessionIsFirst: _aiSession(\"isFirst\"),\r\n    sessionIsNew: _aiSession(\"isNew\"),\r\n    userAccountAcquisitionDate: _aiUser(\"accountAcquisitionDate\"),\r\n    userAccountId: _aiUser(\"accountId\"),\r\n    userAgent: _aiUser(\"userAgent\"),\r\n    userId: _aiUser(\"id\"),\r\n    userStoreRegion: _aiUser(\"storeRegion\"),\r\n    userAuthUserId: _aiUser(\"authUserId\"),\r\n    userAnonymousUserAcquisitionDate: _aiUser(\"anonUserAcquisitionDate\"),\r\n    userAuthenticatedUserAcquisitionDate: _aiUser(\"authUserAcquisitionDate\"),\r\n    cloudName: _aiCloud(\"name\"),\r\n    cloudRole: _aiCloud(\"role\"),\r\n    cloudRoleVer: _aiCloud(\"roleVer\"),\r\n    cloudRoleInstance: _aiCloud(\"roleInstance\"),\r\n    cloudEnvironment: _aiCloud(\"environment\"),\r\n    cloudLocation: _aiCloud(\"location\"),\r\n    cloudDeploymentUnit: _aiCloud(\"deploymentUnit\"),\r\n    internalNodeName: _aiInternal(\"nodeName\"),\r\n    internalSdkVersion: _aiInternal(\"sdkVersion\"),\r\n    internalAgentVersion: _aiInternal(\"agentVersion\"),\r\n    internalSnippet: _aiInternal(\"snippet\"),\r\n    internalSdkSrc: _aiInternal(\"sdkSrc\")\r\n})));\r\nexport { ContextTagKeys };\r\n//# sourceMappingURL=ContextTagKeys.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { ContextTagKeys } from \"./Contracts/ContextTagKeys\";\r\nexport var Extensions = {\r\n    UserExt: \"user\",\r\n    DeviceExt: \"device\",\r\n    TraceExt: \"trace\",\r\n    WebExt: \"web\",\r\n    AppExt: \"app\",\r\n    OSExt: \"os\",\r\n    SessionExt: \"ses\",\r\n    SDKExt: \"sdk\"\r\n};\r\nexport var CtxTagKeys = new ContextTagKeys();\r\n//# sourceMappingURL=PartAExtensions.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { strNotSpecified } from \"../../Constants\";\r\nimport { _DYN_AI_DATA_CONTRACT, _DYN_NAME } from \"../../__DynamicConstants\";\r\nimport { dataSanitizeString } from \"./DataSanitizer\";\r\nvar Envelope = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Envelope(logger, data, name) {\r\n        var _this = this;\r\n        var _self = this;\r\n        _self.ver = 1;\r\n        _self.sampleRate = 100.0;\r\n        _self.tags = {};\r\n        _self[_DYN_NAME /* @min:%2ename */] = dataSanitizeString(logger, name) || strNotSpecified;\r\n        _self.data = data;\r\n        _self.time = toISOString(new Date());\r\n        _self[_DYN_AI_DATA_CONTRACT /* @min:%2eaiDataContract */] = {\r\n            time: 1 /* FieldType.Required */,\r\n            iKey: 1 /* FieldType.Required */,\r\n            name: 1 /* FieldType.Required */,\r\n            sampleRate: function () {\r\n                return (_this.sampleRate === 100) ? 4 /* FieldType.Hidden */ : 1 /* FieldType.Required */;\r\n            },\r\n            tags: 1 /* FieldType.Required */,\r\n            data: 1 /* FieldType.Required */\r\n        };\r\n    }\r\n    return Envelope;\r\n}());\r\nexport { Envelope };\r\n//# sourceMappingURL=Envelope.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar Data = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new instance of telemetry data.\r\n     */\r\n    function Data(baseType, data) {\r\n        /**\r\n         * The data contract for serializing this object.\r\n         */\r\n        this.aiDataContract = {\r\n            baseType: 1 /* FieldType.Required */,\r\n            baseData: 1 /* FieldType.Required */\r\n        };\r\n        this.baseType = baseType;\r\n        this.baseData = data;\r\n    }\r\n    return Data;\r\n}());\r\nexport { Data };\r\n//# sourceMappingURL=Data.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// ###################################################################################################################################################\r\n// Note: DON'T Export these const from the package as we are still targeting IE/ES5 this will export a mutable variables that someone could change ###\r\n// ###################################################################################################################################################\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_DURATION = \"duration\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_TAGS = \"tags\"; // Count: 17\r\nexport var _DYN_DEVICE_TYPE = \"deviceType\"; // Count: 3\r\nexport var _DYN_DATA = \"data\"; // Count: 13\r\nexport var _DYN_NAME = \"name\"; // Count: 8\r\nexport var _DYN_TRACE_ID = \"traceID\"; // Count: 5\r\nexport var _DYN_LENGTH = \"length\"; // Count: 38\r\nexport var _DYN_STRINGIFY = \"stringify\"; // Count: 5\r\nexport var _DYN_MEASUREMENTS = \"measurements\"; // Count: 7\r\nexport var _DYN_DATA_TYPE = \"dataType\"; // Count: 10\r\nexport var _DYN_ENVELOPE_TYPE = \"envelopeType\"; // Count: 7\r\nexport var _DYN_TO_STRING = \"toString\"; // Count: 7\r\nexport var _DYN_ENQUEUE = \"enqueue\"; // Count: 7\r\nexport var _DYN_COUNT = \"count\"; // Count: 7\r\nexport var _DYN_PUSH = \"push\"; // Count: 9\r\nexport var _DYN_EMIT_LINE_DELIMITED_0 = \"emitLineDelimitedJson\"; // Count: 3\r\nexport var _DYN_CLEAR = \"clear\"; // Count: 6\r\nexport var _DYN_MARK_AS_SENT = \"markAsSent\"; // Count: 4\r\nexport var _DYN_CLEAR_SENT = \"clearSent\"; // Count: 5\r\nexport var _DYN_BUFFER_OVERRIDE = \"bufferOverride\"; // Count: 3\r\nexport var _DYN__BUFFER__KEY = \"BUFFER_KEY\"; // Count: 5\r\nexport var _DYN__SENT__BUFFER__KEY = \"SENT_BUFFER_KEY\"; // Count: 8\r\nexport var _DYN_CONCAT = \"concat\"; // Count: 6\r\nexport var _DYN__MAX__BUFFER__SIZE = \"MAX_BUFFER_SIZE\"; // Count: 5\r\nexport var _DYN_TRIGGER_SEND = \"triggerSend\"; // Count: 5\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 16\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 3\r\nexport var _DYN__SENDER = \"_sender\"; // Count: 5\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 5\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 5\r\nexport var _DYN_CUSTOM_HEADERS = \"customHeaders\"; // Count: 3\r\nexport var _DYN_MAX_BATCH_SIZE_IN_BY1 = \"maxBatchSizeInBytes\"; // Count: 2\r\nexport var _DYN_ONUNLOAD_DISABLE_BEA2 = \"onunloadDisableBeacon\"; // Count: 3\r\nexport var _DYN_IS_BEACON_API_DISABL3 = \"isBeaconApiDisabled\"; // Count: 3\r\nexport var _DYN_ALWAYS_USE_XHR_OVERR4 = \"alwaysUseXhrOverride\"; // Count: 2\r\nexport var _DYN_ENABLE_SESSION_STORA5 = \"enableSessionStorageBuffer\"; // Count: 2\r\nexport var _DYN__BUFFER = \"_buffer\"; // Count: 9\r\nexport var _DYN_ONUNLOAD_DISABLE_FET6 = \"onunloadDisableFetch\"; // Count: 2\r\nexport var _DYN_DISABLE_SEND_BEACON_7 = \"disableSendBeaconSplit\"; // Count: 2\r\nexport var _DYN_GET_SENDER_INST = \"getSenderInst\"; // Count: 4\r\nexport var _DYN__ON_ERROR = \"_onError\"; // Count: 7\r\nexport var _DYN__ON_PARTIAL_SUCCESS = \"_onPartialSuccess\"; // Count: 3\r\nexport var _DYN__ON_SUCCESS = \"_onSuccess\"; // Count: 6\r\nexport var _DYN_ITEMS_RECEIVED = \"itemsReceived\"; // Count: 3\r\nexport var _DYN_ITEMS_ACCEPTED = \"itemsAccepted\"; // Count: 3\r\nexport var _DYN_BASE_TYPE = \"baseType\"; // Count: 4\r\nexport var _DYN_SAMPLE_RATE = \"sampleRate\"; // Count: 4\r\nexport var _DYN_GET_HASH_CODE_SCORE = \"getHashCodeScore\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { CtxTagKeys, Data, Envelope, Event, Exception, HttpMethod, Metric, PageView, PageViewPerformance, RemoteDependencyData, SampleRate, Trace, dataSanitizeString } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, _warnToConsole, getJSON, hasJSON, isNullOrUndefined, isNumber, isString, isTruthy, objForEachKey, optimizeObject, setValue, toISOString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DURATION } from \"./InternalConstants\";\r\nimport { _DYN_DATA, _DYN_DATA_TYPE, _DYN_DEVICE_TYPE, _DYN_ENVELOPE_TYPE, _DYN_LENGTH, _DYN_MEASUREMENTS, _DYN_NAME, _DYN_STRINGIFY, _DYN_TAGS, _DYN_TO_STRING, _DYN_TRACE_ID } from \"./__DynamicConstants\";\r\n// these two constants are used to filter out properties not needed when trying to extract custom properties and measurements from the incoming payload\r\nvar strBaseType = \"baseType\";\r\nvar strBaseData = \"baseData\";\r\nvar strProperties = \"properties\";\r\nvar strTrue = \"true\";\r\nfunction _setValueIf(target, field, value) {\r\n    return setValue(target, field, value, isTruthy);\r\n}\r\n/*\r\n * Maps Part A data from CS 4.0\r\n */\r\nfunction _extractPartAExtensions(logger, item, env) {\r\n    // todo: switch to keys from common in this method\r\n    var envTags = env[_DYN_TAGS /* @min:%2etags */] = env[_DYN_TAGS /* @min:%2etags */] || {};\r\n    var itmExt = item.ext = item.ext || {};\r\n    var itmTags = item[_DYN_TAGS /* @min:%2etags */] = item[_DYN_TAGS /* @min:%2etags */] || [];\r\n    var extUser = itmExt.user;\r\n    if (extUser) {\r\n        _setValueIf(envTags, CtxTagKeys.userAuthUserId, extUser.authId);\r\n        _setValueIf(envTags, CtxTagKeys.userId, extUser.id || extUser.localId);\r\n    }\r\n    var extApp = itmExt.app;\r\n    if (extApp) {\r\n        _setValueIf(envTags, CtxTagKeys.sessionId, extApp.sesId);\r\n    }\r\n    var extDevice = itmExt.device;\r\n    if (extDevice) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceId, extDevice.id || extDevice.localId);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice.deviceClass);\r\n        _setValueIf(envTags, CtxTagKeys.deviceIp, extDevice.ip);\r\n        _setValueIf(envTags, CtxTagKeys.deviceModel, extDevice.model);\r\n        _setValueIf(envTags, CtxTagKeys[_DYN_DEVICE_TYPE /* @min:%2edeviceType */], extDevice[_DYN_DEVICE_TYPE /* @min:%2edeviceType */]);\r\n    }\r\n    var web = item.ext.web;\r\n    if (web) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceLanguage, web.browserLang);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowserVersion, web.browserVer);\r\n        _setValueIf(envTags, CtxTagKeys.deviceBrowser, web.browser);\r\n        var envData = env[_DYN_DATA /* @min:%2edata */] = env[_DYN_DATA /* @min:%2edata */] || {};\r\n        var envBaseData = envData[strBaseData] = envData[strBaseData] || {};\r\n        var envProps = envBaseData[strProperties] = envBaseData[strProperties] || {};\r\n        _setValueIf(envProps, \"domain\", web.domain);\r\n        _setValueIf(envProps, \"isManual\", web.isManual ? strTrue : null);\r\n        _setValueIf(envProps, \"screenRes\", web.screenRes);\r\n        _setValueIf(envProps, \"userConsent\", web.userConsent ? strTrue : null);\r\n    }\r\n    var extOs = itmExt.os;\r\n    if (extOs) {\r\n        _setValueIf(envTags, CtxTagKeys.deviceOS, extOs[_DYN_NAME /* @min:%2ename */]);\r\n        _setValueIf(envTags, CtxTagKeys.deviceOSVersion, extOs.osVer);\r\n    }\r\n    // No support for mapping Trace.traceState to 2.0 as it is currently empty\r\n    var extTrace = itmExt.trace;\r\n    if (extTrace) {\r\n        _setValueIf(envTags, CtxTagKeys.operationParentId, extTrace.parentID);\r\n        _setValueIf(envTags, CtxTagKeys.operationName, dataSanitizeString(logger, extTrace[_DYN_NAME /* @min:%2ename */]));\r\n        _setValueIf(envTags, CtxTagKeys.operationId, extTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n    }\r\n    // Sample 4.0 schema\r\n    //  {\r\n    //     \"time\" : \"2018-09-05T22:51:22.4936Z\",\r\n    //     \"name\" : \"MetricWithNamespace\",\r\n    //     \"iKey\" : \"ABC-5a4cbd20-e601-4ef5-a3c6-5d6577e4398e\",\r\n    //     \"ext\": {  \"cloud\": {\r\n    //          \"role\": \"WATSON3\",\r\n    //          \"roleInstance\": \"CO4AEAP00000260\"\r\n    //      },\r\n    //      \"device\": {}, \"correlation\": {} },\r\n    //      \"tags\": [\r\n    //        { \"amazon.region\" : \"east2\" },\r\n    //        { \"os.expid\" : \"wp:02df239\" }\r\n    //     ]\r\n    //   }\r\n    var tgs = {};\r\n    // deals with tags.push({object})\r\n    for (var i = itmTags[_DYN_LENGTH /* @min:%2elength */] - 1; i >= 0; i--) {\r\n        var tg = itmTags[i];\r\n        objForEachKey(tg, function (key, value) {\r\n            tgs[key] = value;\r\n        });\r\n        itmTags.splice(i, 1);\r\n    }\r\n    // deals with tags[key]=value (and handles hasOwnProperty)\r\n    objForEachKey(itmTags, function (tg, value) {\r\n        tgs[tg] = value;\r\n    });\r\n    var theTags = __assign(__assign({}, envTags), tgs);\r\n    if (!theTags[CtxTagKeys.internalSdkVersion]) {\r\n        // Append a version in case it is not already set\r\n        theTags[CtxTagKeys.internalSdkVersion] = dataSanitizeString(logger, \"javascript:\".concat(EnvelopeCreator.Version), 64);\r\n    }\r\n    env[_DYN_TAGS /* @min:%2etags */] = optimizeObject(theTags);\r\n}\r\nfunction _extractPropsAndMeasurements(data, properties, measurements) {\r\n    if (!isNullOrUndefined(data)) {\r\n        objForEachKey(data, function (key, value) {\r\n            if (isNumber(value)) {\r\n                measurements[key] = value;\r\n            }\r\n            else if (isString(value)) {\r\n                properties[key] = value;\r\n            }\r\n            else if (hasJSON()) {\r\n                properties[key] = getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](value);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue) {\r\n    if (!isNullOrUndefined(properties)) {\r\n        objForEachKey(properties, function (key, value) {\r\n            properties[key] = value || customUndefinedValue;\r\n        });\r\n    }\r\n}\r\n// TODO: Do we want this to take logger as arg or use this._logger as nonstatic?\r\nfunction _createEnvelope(logger, envelopeType, telemetryItem, data) {\r\n    var envelope = new Envelope(logger, data, envelopeType);\r\n    _setValueIf(envelope, \"sampleRate\", telemetryItem[SampleRate]);\r\n    if ((telemetryItem[strBaseData] || {}).startTime) {\r\n        // Starting from Version 3.0.3, the time property will be assigned by the startTime value,\r\n        // which records the loadEvent time for the pageView event.\r\n        envelope.time = toISOString(telemetryItem[strBaseData].startTime);\r\n    }\r\n    envelope.iKey = telemetryItem.iKey;\r\n    var iKeyNoDashes = telemetryItem.iKey.replace(/-/g, \"\");\r\n    envelope[_DYN_NAME /* @min:%2ename */] = envelope[_DYN_NAME /* @min:%2ename */].replace(\"{0}\", iKeyNoDashes);\r\n    // extract all extensions from ctx\r\n    _extractPartAExtensions(logger, telemetryItem, envelope);\r\n    // loop through the envelope tags (extension of Part A) and pick out the ones that should go in outgoing envelope tags\r\n    telemetryItem[_DYN_TAGS /* @min:%2etags */] = telemetryItem[_DYN_TAGS /* @min:%2etags */] || [];\r\n    return optimizeObject(envelope);\r\n}\r\nfunction EnvelopeCreatorInit(logger, telemetryItem) {\r\n    if (isNullOrUndefined(telemetryItem[strBaseData])) {\r\n        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 46 /* _eInternalMessageId.TelemetryEnvelopeInvalid */, \"telemetryItem.baseData cannot be null.\");\r\n    }\r\n}\r\nexport var EnvelopeCreator = {\r\n    Version: '3.3.11'\r\n};\r\nexport function DependencyEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    if (isNullOrUndefined(bd)) {\r\n        _warnToConsole(logger, \"Invalid input for dependency data\");\r\n        return null;\r\n    }\r\n    var method = bd[strProperties] && bd[strProperties][HttpMethod] ? bd[strProperties][HttpMethod] : \"GET\";\r\n    var remoteDepData = new RemoteDependencyData(logger, bd.id, bd.target, bd[_DYN_NAME /* @min:%2ename */], bd[STR_DURATION /* @min:%2eduration */], bd.success, bd.responseCode, method, bd.type, bd.correlationContext, customProperties, customMeasurements);\r\n    var data = new Data(RemoteDependencyData[_DYN_DATA_TYPE /* @min:%2edataType */], remoteDepData);\r\n    return _createEnvelope(logger, RemoteDependencyData[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function EventEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var customProperties = {};\r\n    var customMeasurements = {};\r\n    if (telemetryItem[strBaseType] !== Event[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n        customProperties[\"baseTypeSource\"] = telemetryItem[strBaseType]; // save the passed in base type as a property\r\n    }\r\n    if (telemetryItem[strBaseType] === Event[_DYN_DATA_TYPE /* @min:%2edataType */]) { // take collection\r\n        customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n        customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    }\r\n    else { // if its not a known type, convert to custom event\r\n        if (telemetryItem[strBaseData]) {\r\n            _extractPropsAndMeasurements(telemetryItem[strBaseData], customProperties, customMeasurements);\r\n        }\r\n    }\r\n    // Extract root level properties from part C telemetryItem.data\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var eventName = telemetryItem[strBaseData][_DYN_NAME /* @min:%2ename */];\r\n    var eventData = new Event(logger, eventName, customProperties, customMeasurements);\r\n    var data = new Data(Event[_DYN_DATA_TYPE /* @min:%2edataType */], eventData);\r\n    return _createEnvelope(logger, Event[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function ExceptionEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Extract root level properties from part C telemetryItem.data\r\n    var customMeasurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    var customProperties = telemetryItem[strBaseData][strProperties] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], customProperties, customMeasurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(customProperties, customUndefinedValue);\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    var exData = Exception.CreateFromInterface(logger, bd, customProperties, customMeasurements);\r\n    var data = new Data(Exception[_DYN_DATA_TYPE /* @min:%2edataType */], exData);\r\n    return _createEnvelope(logger, Exception[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function MetricEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var baseData = telemetryItem[strBaseData];\r\n    var props = baseData[strProperties] || {};\r\n    var measurements = baseData[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseMetricData = new Metric(logger, baseData[_DYN_NAME /* @min:%2ename */], baseData.average, baseData.sampleCount, baseData.min, baseData.max, baseData.stdDev, props, measurements);\r\n    var data = new Data(Metric[_DYN_DATA_TYPE /* @min:%2edataType */], baseMetricData);\r\n    return _createEnvelope(logger, Metric[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    // Since duration is not part of the domain properties in Common Schema, extract it from part C\r\n    var duration;\r\n    var baseData = telemetryItem[strBaseData];\r\n    if (!isNullOrUndefined(baseData) &&\r\n        !isNullOrUndefined(baseData[strProperties]) &&\r\n        !isNullOrUndefined(baseData[strProperties][STR_DURATION])) { // from part B properties\r\n        duration = baseData[strProperties][STR_DURATION];\r\n        delete baseData[strProperties][STR_DURATION];\r\n    }\r\n    else if (!isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */]) &&\r\n        !isNullOrUndefined(telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION])) { // from custom properties\r\n        duration = telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n        delete telemetryItem[_DYN_DATA /* @min:%2edata */][STR_DURATION];\r\n    }\r\n    var bd = telemetryItem[strBaseData];\r\n    // special case: pageview.id is grabbed from current operation id. Analytics plugin is decoupled from properties plugin, so this is done here instead. This can be made a default telemetry intializer instead if needed to be decoupled from channel\r\n    var currentContextId;\r\n    if (((telemetryItem.ext || {}).trace || {})[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n        currentContextId = telemetryItem.ext.trace[_DYN_TRACE_ID /* @min:%2etraceID */];\r\n    }\r\n    var id = bd.id || currentContextId;\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    // refUri is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.refUri)) {\r\n        properties[\"refUri\"] = bd.refUri;\r\n    }\r\n    // pageType is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.pageType)) {\r\n        properties[\"pageType\"] = bd.pageType;\r\n    }\r\n    // isLoggedIn is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd.isLoggedIn)) {\r\n        properties[\"isLoggedIn\"] = bd.isLoggedIn[_DYN_TO_STRING /* @min:%2etoString */]();\r\n    }\r\n    // pageTags is a field that Breeze still does not recognize as part of Part B. For now, put it in Part C until it supports it as a domain property\r\n    if (!isNullOrUndefined(bd[strProperties])) {\r\n        var pageTags = bd[strProperties];\r\n        objForEachKey(pageTags, function (key, value) {\r\n            properties[key] = value;\r\n        });\r\n    }\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var pageViewData = new PageView(logger, name, url, duration, properties, measurements, id);\r\n    var data = new Data(PageView[_DYN_DATA_TYPE /* @min:%2edataType */], pageViewData);\r\n    return _createEnvelope(logger, PageView[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function PageViewPerformanceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var bd = telemetryItem[strBaseData];\r\n    var name = bd[_DYN_NAME /* @min:%2ename */];\r\n    var url = bd.uri || bd.url;\r\n    var properties = bd[strProperties] || {};\r\n    var measurements = bd[_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], properties, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(properties, customUndefinedValue);\r\n    }\r\n    var baseData = new PageViewPerformance(logger, name, url, undefined, properties, measurements, bd);\r\n    var data = new Data(PageViewPerformance[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, PageViewPerformance[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\nexport function TraceEnvelopeCreator(logger, telemetryItem, customUndefinedValue) {\r\n    EnvelopeCreatorInit(logger, telemetryItem);\r\n    var message = telemetryItem[strBaseData].message;\r\n    var severityLevel = telemetryItem[strBaseData].severityLevel;\r\n    var props = telemetryItem[strBaseData][strProperties] || {};\r\n    var measurements = telemetryItem[strBaseData][_DYN_MEASUREMENTS /* @min:%2emeasurements */] || {};\r\n    _extractPropsAndMeasurements(telemetryItem[_DYN_DATA /* @min:%2edata */], props, measurements);\r\n    if (!isNullOrUndefined(customUndefinedValue)) {\r\n        _convertPropsUndefinedToCustomDefinedValue(props, customUndefinedValue);\r\n    }\r\n    var baseData = new Trace(logger, message, severityLevel, props, measurements);\r\n    var data = new Data(Trace[_DYN_DATA_TYPE /* @min:%2edataType */], baseData);\r\n    return _createEnvelope(logger, Trace[_DYN_ENVELOPE_TYPE /* @min:%2eenvelopeType */], telemetryItem, data);\r\n}\r\n//# sourceMappingURL=EnvelopeCreator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { utlGetSessionStorage, utlRemoveSessionStorage, utlSetSessionStorage } from \"@microsoft/applicationinsights-common\";\r\nimport { _throwInternal, arrForEach, arrIndexOf, dumpObj, getExceptionName, getJSON, isArray, isFunction, isNullOrUndefined, isString } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_CONCAT, _DYN_COUNT, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENQUEUE, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_PUSH, _DYN_STRINGIFY, _DYN__BUFFER__KEY, _DYN__MAX__BUFFER__SIZE, _DYN__SENT__BUFFER__KEY } from \"./__DynamicConstants\";\r\nvar BaseSendBuffer = /** @class */ (function () {\r\n    function BaseSendBuffer(logger, config) {\r\n        var _buffer = [];\r\n        var _bufferFullMessageSent = false;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        this._get = function () {\r\n            return _buffer;\r\n        };\r\n        this._set = function (buffer) {\r\n            _buffer = buffer;\r\n            return _buffer;\r\n        };\r\n        dynamicProto(BaseSendBuffer, this, function (_self) {\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= config.eventsLimitInMem) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 105 /* _eInternalMessageId.InMemoryStorageBufferFull */, \"Maximum in-memory buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        // will log statsbeat exception later here\r\n                        return;\r\n                    }\r\n                }\r\n                _buffer[_DYN_PUSH /* @min:%2epush */](payload);\r\n                return;\r\n            };\r\n            _self[_DYN_COUNT /* @min:%2ecount */] = function () {\r\n                return _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.size = function () {\r\n                var size = _buffer[_DYN_LENGTH /* @min:%2elength */];\r\n                for (var lp = 0; lp < _buffer[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    size += (_buffer[lp].item)[_DYN_LENGTH /* @min:%2elength */];\r\n                }\r\n                if (!config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */]) {\r\n                    size += 2;\r\n                }\r\n                return size;\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _buffer = [];\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self.getItems = function () {\r\n                return _buffer.slice(0);\r\n            };\r\n            _self.batchPayloads = function (payloads) {\r\n                if (payloads && payloads[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var payloadStr_1 = [];\r\n                    arrForEach(payloads, function (payload) {\r\n                        payloadStr_1[_DYN_PUSH /* @min:%2epush */](payload.item);\r\n                    });\r\n                    var batch = config[_DYN_EMIT_LINE_DELIMITED_0 /* @min:%2eemitLineDelimitedJson */] ?\r\n                        payloadStr_1.join(\"\\n\") :\r\n                        \"[\" + payloadStr_1.join(\",\") + \"]\";\r\n                    return batch;\r\n                }\r\n                return null;\r\n            };\r\n            _self.createNew = function (newLogger, newConfig, canUseSessionStorage) {\r\n                var items = _buffer.slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                var newBuffer = !!canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(items, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                return newBuffer;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for BaseSendBuffer.prototype.enqueue.\r\n// Removed Stub for BaseSendBuffer.prototype.count.\r\n// Removed Stub for BaseSendBuffer.prototype.size.\r\n// Removed Stub for BaseSendBuffer.prototype.clear.\r\n// Removed Stub for BaseSendBuffer.prototype.getItems.\r\n// Removed Stub for BaseSendBuffer.prototype.batchPayloads.\r\n// Removed Stub for BaseSendBuffer.prototype.createNew.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    BaseSendBuffer.__ieDyn=1;\n\n    return BaseSendBuffer;\r\n}());\r\n/*\r\n * An array based send buffer.\r\n */\r\nvar ArraySendBuffer = /** @class */ (function (_super) {\r\n    __extends(ArraySendBuffer, _super);\r\n    function ArraySendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        dynamicProto(ArraySendBuffer, _this, function (_self, _base) {\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                // not supported\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for ArraySendBuffer.prototype.markAsSent.\r\n// Removed Stub for ArraySendBuffer.prototype.clearSent.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ArraySendBuffer.__ieDyn=1;\n\n    return ArraySendBuffer;\r\n}(BaseSendBuffer));\r\nexport { ArraySendBuffer };\r\nvar PREVIOUS_KEYS = [\"AI_buffer\", \"AI_sentBuffer\"];\r\n/*\r\n * Session storage buffer holds a copy of all unsent items in the browser session storage.\r\n */\r\nvar SessionStorageSendBuffer = /** @class */ (function (_super) {\r\n    __extends(SessionStorageSendBuffer, _super);\r\n    function SessionStorageSendBuffer(logger, config) {\r\n        var _this = _super.call(this, logger, config) || this;\r\n        var _bufferFullMessageSent = false;\r\n        //Note: should not use config.namePrefix directly, because it will always refers to the latest namePrefix\r\n        var _namePrefix = config === null || config === void 0 ? void 0 : config.namePrefix;\r\n        // TODO: add remove buffer override as well\r\n        var _b = config[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */] || { getItem: utlGetSessionStorage, setItem: utlSetSessionStorage }, getItem = _b.getItem, setItem = _b.setItem;\r\n        var _maxRetryCnt = config.maxRetryCnt;\r\n        dynamicProto(SessionStorageSendBuffer, _this, function (_self, _base) {\r\n            var bufferItems = _getBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */]);\r\n            var itemsInSentBuffer = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n            var previousItems = _getPreviousEvents();\r\n            var notDeliveredItems = itemsInSentBuffer[_DYN_CONCAT /* @min:%2econcat */](previousItems);\r\n            var buffer = _self._set(bufferItems[_DYN_CONCAT /* @min:%2econcat */](notDeliveredItems));\r\n            // If the buffer has too many items, drop items from the end.\r\n            if (buffer[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                buffer[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n            }\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n            _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], buffer);\r\n            _self[_DYN_ENQUEUE /* @min:%2eenqueue */] = function (payload) {\r\n                if (_self[_DYN_COUNT /* @min:%2ecount */]() >= SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                    // sent internal log only once per page view\r\n                    if (!_bufferFullMessageSent) {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Maximum buffer size reached: \" + _self[_DYN_COUNT /* @min:%2ecount */](), true);\r\n                        _bufferFullMessageSent = true;\r\n                    }\r\n                    return;\r\n                }\r\n                payload.cnt = payload.cnt || 0;\r\n                // max retry is defined, and max retry is reached, do not add the payload to buffer\r\n                if (!isNullOrUndefined(_maxRetryCnt)) {\r\n                    if (payload.cnt > _maxRetryCnt) {\r\n                        // TODO: add log here on dropping payloads\r\n                        return;\r\n                    }\r\n                }\r\n                _base[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._get());\r\n            };\r\n            _self[_DYN_CLEAR /* @min:%2eclear */] = function () {\r\n                _base[_DYN_CLEAR /* @min:%2eclear */]();\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._get());\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], []);\r\n                _bufferFullMessageSent = false;\r\n            };\r\n            _self[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */] = function (payload) {\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__BUFFER__KEY /* @min:%2eBUFFER_KEY */], _self._set(_removePayloadsFromBuffer(payload, _self._get())));\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                if (sentElements instanceof Array && payload instanceof Array) {\r\n                    sentElements = sentElements[_DYN_CONCAT /* @min:%2econcat */](payload);\r\n                    if (sentElements[_DYN_LENGTH /* @min:%2elength */] > SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */]) {\r\n                        // We send telemetry normally. If the SENT_BUFFER is too big we don't add new elements\r\n                        // until we receive a response from the backend and the buffer has free space again (see clearSent method)\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 67 /* _eInternalMessageId.SessionStorageBufferFull */, \"Sent buffer reached its maximum size: \" + sentElements[_DYN_LENGTH /* @min:%2elength */], true);\r\n                        sentElements[_DYN_LENGTH /* @min:%2elength */] = SessionStorageSendBuffer[_DYN__MAX__BUFFER__SIZE /* @min:%2eMAX_BUFFER_SIZE */];\r\n                    }\r\n                    _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n                }\r\n            };\r\n            _self[_DYN_CLEAR_SENT /* @min:%2eclearSent */] = function (payload) {\r\n                var sentElements = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]);\r\n                sentElements = _removePayloadsFromBuffer(payload, sentElements);\r\n                _setBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */], sentElements);\r\n            };\r\n            _self.createNew = function (newLogger, newConfig, canUseSessionStorage) {\r\n                canUseSessionStorage = !!canUseSessionStorage;\r\n                var unsentItems = _self._get().slice(0);\r\n                var sentItems = _getBuffer(SessionStorageSendBuffer[_DYN__SENT__BUFFER__KEY /* @min:%2eSENT_BUFFER_KEY */]).slice(0);\r\n                newLogger = newLogger || logger;\r\n                newConfig = newConfig || {};\r\n                // to make sure that we do not send duplicated payloads when it is switched back to previous one\r\n                _self[_DYN_CLEAR /* @min:%2eclear */]();\r\n                var newBuffer = canUseSessionStorage ? new SessionStorageSendBuffer(newLogger, newConfig) : new ArraySendBuffer(newLogger, newConfig);\r\n                arrForEach(unsentItems, function (payload) {\r\n                    newBuffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payload);\r\n                });\r\n                if (canUseSessionStorage) {\r\n                    // arr buffer will clear all payloads if markAsSent() is called\r\n                    newBuffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](sentItems);\r\n                }\r\n                return newBuffer;\r\n            };\r\n            function _removePayloadsFromBuffer(payloads, buffer) {\r\n                var remaining = [];\r\n                var payloadStr = [];\r\n                arrForEach(payloads, function (payload) {\r\n                    payloadStr[_DYN_PUSH /* @min:%2epush */](payload.item);\r\n                });\r\n                arrForEach(buffer, function (value) {\r\n                    if (!isFunction(value) && arrIndexOf(payloadStr, value.item) === -1) {\r\n                        remaining[_DYN_PUSH /* @min:%2epush */](value);\r\n                    }\r\n                });\r\n                return remaining;\r\n            }\r\n            function _getBuffer(key) {\r\n                var prefixedKey = key;\r\n                prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                return _getBufferBase(prefixedKey);\r\n            }\r\n            function _getBufferBase(key) {\r\n                try {\r\n                    var bufferJson = getItem(logger, key);\r\n                    if (bufferJson) {\r\n                        var buffer_1 = getJSON().parse(bufferJson);\r\n                        if (isString(buffer_1)) {\r\n                            // When using some version prototype.js the stringify / parse cycle does not decode array's correctly\r\n                            buffer_1 = getJSON().parse(buffer_1);\r\n                        }\r\n                        if (buffer_1 && isArray(buffer_1)) {\r\n                            return buffer_1;\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 42 /* _eInternalMessageId.FailedToRestoreStorageBuffer */, \" storage key: \" + key + \", \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            function _setBuffer(key, buffer) {\r\n                var prefixedKey = key;\r\n                try {\r\n                    prefixedKey = _namePrefix ? _namePrefix + \"_\" + prefixedKey : prefixedKey;\r\n                    var bufferJson = JSON[_DYN_STRINGIFY /* @min:%2estringify */](buffer);\r\n                    setItem(logger, prefixedKey, bufferJson);\r\n                }\r\n                catch (e) {\r\n                    // if there was an error, clear the buffer\r\n                    // telemetry is stored in the _buffer array so we won't loose any items\r\n                    setItem(logger, prefixedKey, JSON[_DYN_STRINGIFY /* @min:%2estringify */]([]));\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \" storage key: \" + prefixedKey + \", \" + getExceptionName(e) + \". Buffer cleared\", { exception: dumpObj(e) });\r\n                }\r\n            }\r\n            // this removes buffer with prefix+key\r\n            function _getPreviousEvents() {\r\n                var items = [];\r\n                try {\r\n                    arrForEach(PREVIOUS_KEYS, function (key) {\r\n                        var events = _getItemsFromPreviousKey(key);\r\n                        items = items[_DYN_CONCAT /* @min:%2econcat */](events);\r\n                        // to make sure that we also transfer items from old prefixed + key buffer\r\n                        if (_namePrefix) {\r\n                            var prefixedKey = _namePrefix + \"_\" + key;\r\n                            var prefixEvents = _getItemsFromPreviousKey(prefixedKey);\r\n                            items = items[_DYN_CONCAT /* @min:%2econcat */](prefixEvents);\r\n                        }\r\n                    });\r\n                    return items;\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 41 /* _eInternalMessageId.FailedToSetStorageBuffer */, \"Transfer events from previous buffers: \" + getExceptionName(e) + \". previous Buffer items can not be removed\", { exception: dumpObj(e) });\r\n                }\r\n                return [];\r\n            }\r\n            // transform string[] to IInternalStorageItem[]\r\n            function _getItemsFromPreviousKey(key) {\r\n                try {\r\n                    var items = _getBufferBase(key);\r\n                    var transFormedItems_1 = [];\r\n                    arrForEach(items, function (item) {\r\n                        var internalItem = {\r\n                            item: item,\r\n                            cnt: 0 // previous events will be default to 0 count\r\n                        };\r\n                        transFormedItems_1[_DYN_PUSH /* @min:%2epush */](internalItem);\r\n                    });\r\n                    // remove the session storage if we can add events back\r\n                    utlRemoveSessionStorage(logger, key);\r\n                    return transFormedItems_1;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return [];\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for SessionStorageSendBuffer.prototype.enqueue.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clear.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.markAsSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.clearSent.\r\n// Removed Stub for SessionStorageSendBuffer.prototype.createNew.\r\n    var _a;\r\n    _a = SessionStorageSendBuffer;\r\n    SessionStorageSendBuffer.VERSION = \"_1\";\r\n    SessionStorageSendBuffer.BUFFER_KEY = \"AI_buffer\" + _a.VERSION;\r\n    SessionStorageSendBuffer.SENT_BUFFER_KEY = \"AI_sentBuffer\" + _a.VERSION;\r\n    // Maximum number of payloads stored in the buffer. If the buffer is full, new elements will be dropped.\r\n    SessionStorageSendBuffer.MAX_BUFFER_SIZE = 2000;\r\n    return SessionStorageSendBuffer;\r\n}(BaseSendBuffer));\r\nexport { SessionStorageSendBuffer };\r\n//# sourceMappingURL=SendBuffer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a, _b;\r\nimport { __assignFn as __assign, __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BreezeChannelIdentifier, DEFAULT_BREEZE_ENDPOINT, DEFAULT_BREEZE_PATH, Event, Exception, Metric, PageView, PageViewPerformance, ProcessLegacy, RemoteDependencyData, RequestHeaders, SampleRate, Trace, createOfflineListener, isInternalApplicationInsightsEndpoint, utlCanUseSessionStorage, utlSetStoragePrefix } from \"@microsoft/applicationinsights-common\";\r\nimport { ActiveStatus, BaseTelemetryPlugin, SenderPostManager, _throwInternal, _warnToConsole, arrForEach, cfgDfBoolean, cfgDfValidate, createProcessTelemetryContext, createUniqueNamespace, dateNow, dumpObj, formatErrorMessageXdr, formatErrorMessageXhr, getExceptionName, getIEVersion, isArray, isBeaconsSupported, isFeatureEnabled, isFetchSupported, isNullOrUndefined, mergeEvtNamespace, objExtend, onConfigChange, parseResponse, prependTransports, runTargetUnload } from \"@microsoft/applicationinsights-core-js\";\r\nimport { createPromise, doAwait, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { getInst, isFunction, isNumber, isPromiseLike, isString, isTruthy, mathFloor, mathMax, mathMin, objDeepFreeze, objDefine, scheduleTimeout } from \"@nevware21/ts-utils\";\r\nimport { DependencyEnvelopeCreator, EventEnvelopeCreator, ExceptionEnvelopeCreator, MetricEnvelopeCreator, PageViewEnvelopeCreator, PageViewPerformanceEnvelopeCreator, TraceEnvelopeCreator } from \"./EnvelopeCreator\";\r\nimport { ArraySendBuffer, SessionStorageSendBuffer } from \"./SendBuffer\";\r\nimport { Serializer } from \"./Serializer\";\r\nimport { Sample } from \"./TelemetryProcessors/Sample\";\r\nimport { _DYN_ALWAYS_USE_XHR_OVERR4, _DYN_BASE_TYPE, _DYN_BUFFER_OVERRIDE, _DYN_CLEAR, _DYN_CLEAR_SENT, _DYN_COUNT, _DYN_CUSTOM_HEADERS, _DYN_DIAG_LOG, _DYN_DISABLE_SEND_BEACON_7, _DYN_EMIT_LINE_DELIMITED_0, _DYN_ENABLE_SESSION_STORA5, _DYN_ENDPOINT_URL, _DYN_ENQUEUE, _DYN_GET_SENDER_INST, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_BEACON_API_DISABL3, _DYN_ITEMS_ACCEPTED, _DYN_ITEMS_RECEIVED, _DYN_LENGTH, _DYN_MARK_AS_SENT, _DYN_MAX_BATCH_SIZE_IN_BY1, _DYN_ONUNLOAD_DISABLE_BEA2, _DYN_ONUNLOAD_DISABLE_FET6, _DYN_PUSH, _DYN_SAMPLE_RATE, _DYN_TAGS, _DYN_TRIGGER_SEND, _DYN__BUFFER, _DYN__ON_ERROR, _DYN__ON_PARTIAL_SUCCESS, _DYN__ON_SUCCESS, _DYN__SENDER } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar EMPTY_STR = \"\";\r\nvar FetchSyncRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nfunction _getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return null;\r\n}\r\nfunction isOverrideFn(httpXHROverride) {\r\n    return httpXHROverride && httpXHROverride.sendPOST;\r\n}\r\nvar defaultAppInsightsChannelConfig = objDeepFreeze((_a = {\r\n        // Use the default value (handles empty string in the configuration)\r\n        endpointUrl: cfgDfValidate(isTruthy, DEFAULT_BREEZE_ENDPOINT + DEFAULT_BREEZE_PATH)\r\n    },\r\n    _a[_DYN_EMIT_LINE_DELIMITED_0 /* @min:emitLineDelimitedJson */] = cfgDfBoolean(),\r\n    _a.maxBatchInterval = 15000,\r\n    _a[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:maxBatchSizeInBytes */] = 102400,\r\n    _a.disableTelemetry = cfgDfBoolean(),\r\n    _a[_DYN_ENABLE_SESSION_STORA5 /* @min:enableSessionStorageBuffer */] = cfgDfBoolean(true),\r\n    _a.isRetryDisabled = cfgDfBoolean(),\r\n    _a[_DYN_IS_BEACON_API_DISABL3 /* @min:isBeaconApiDisabled */] = cfgDfBoolean(true),\r\n    _a[_DYN_DISABLE_SEND_BEACON_7 /* @min:disableSendBeaconSplit */] = cfgDfBoolean(true),\r\n    _a.disableXhr = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:onunloadDisableFetch */] = cfgDfBoolean(),\r\n    _a[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:onunloadDisableBeacon */] = cfgDfBoolean(),\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.namePrefix = UNDEFINED_VALUE,\r\n    _a.samplingPercentage = cfgDfValidate(_chkSampling, 100),\r\n    _a[_DYN_CUSTOM_HEADERS /* @min:customHeaders */] = UNDEFINED_VALUE,\r\n    _a.convertUndefined = UNDEFINED_VALUE,\r\n    _a.eventsLimitInMem = 10000,\r\n    _a[_DYN_BUFFER_OVERRIDE /* @min:bufferOverride */] = false,\r\n    _a.httpXHROverride = { isVal: isOverrideFn, v: UNDEFINED_VALUE },\r\n    _a[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:alwaysUseXhrOverride */] = cfgDfBoolean(),\r\n    _a.transports = UNDEFINED_VALUE,\r\n    _a.retryCodes = UNDEFINED_VALUE,\r\n    _a.corsPolicy = UNDEFINED_VALUE,\r\n    _a.maxRetryCnt = { isVal: isNumber, v: 10 },\r\n    _a));\r\nvar CrossOriginResourcePolicyHeader = \"X-Set-Cross-Origin-Resource-Policy\";\r\nfunction _chkSampling(value) {\r\n    return !isNaN(value) && value > 0 && value <= 100;\r\n}\r\nvar EnvelopeTypeCreator = (_b = {},\r\n    _b[Event.dataType] = EventEnvelopeCreator,\r\n    _b[Trace.dataType] = TraceEnvelopeCreator,\r\n    _b[PageView.dataType] = PageViewEnvelopeCreator,\r\n    _b[PageViewPerformance.dataType] = PageViewPerformanceEnvelopeCreator,\r\n    _b[Exception.dataType] = ExceptionEnvelopeCreator,\r\n    _b[Metric.dataType] = MetricEnvelopeCreator,\r\n    _b[RemoteDependencyData.dataType] = DependencyEnvelopeCreator,\r\n    _b);\r\nvar Sender = /** @class */ (function (_super) {\r\n    __extends(Sender, _super);\r\n    function Sender() {\r\n        var _this = _super.call(this) || this;\r\n        _this.priority = 1001;\r\n        _this.identifier = BreezeChannelIdentifier;\r\n        // Don't set the defaults here, set them in the _initDefaults() as this is also called during unload\r\n        var _consecutiveErrors; // How many times in a row a retryable error condition has occurred.\r\n        var _retryAt; // The time to retry at in milliseconds from 1970/01/01 (this makes the timer calculation easy).\r\n        var _lastSend; // The time of the last send operation.\r\n        var _paused; // Flag indicating that the sending should be paused\r\n        var _timeoutHandle; // Handle to the timer for delayed sending of batches of data.\r\n        var _serializer;\r\n        var _stamp_specific_redirects;\r\n        var _headers;\r\n        var _syncFetchPayload = 0; // Keep track of the outstanding sync fetch payload total (as sync fetch has limits)\r\n        var _syncUnloadSender; // The identified sender to use for the synchronous unload stage\r\n        var _offlineListener;\r\n        var _evtNamespace;\r\n        var _endpointUrl;\r\n        var _orgEndpointUrl;\r\n        var _maxBatchSizeInBytes;\r\n        var _beaconSupported;\r\n        var _beaconOnUnloadSupported;\r\n        var _beaconNormalSupported;\r\n        var _customHeaders;\r\n        var _disableTelemetry;\r\n        var _instrumentationKey;\r\n        var _convertUndefined;\r\n        var _isRetryDisabled;\r\n        var _maxBatchInterval;\r\n        var _sessionStorageUsed;\r\n        var _bufferOverrideUsed;\r\n        var _namePrefix;\r\n        var _enableSendPromise;\r\n        var _alwaysUseCustomSend;\r\n        var _disableXhr;\r\n        var _fetchKeepAlive;\r\n        var _xhrSend;\r\n        var _fallbackSend;\r\n        var _disableBeaconSplit;\r\n        var _sendPostMgr;\r\n        var _retryCodes;\r\n        var _zipPayload;\r\n        dynamicProto(Sender, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n            };\r\n            _self.resume = function () {\r\n                if (_paused) {\r\n                    _paused = false;\r\n                    _retryAt = null;\r\n                    // flush if we have exceeded the max-size already\r\n                    _checkMaxSize();\r\n                    _setupTimer();\r\n                }\r\n            };\r\n            _self.flush = function (isAsync, callBack, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_paused) {\r\n                    // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                    _clearScheduledTimer();\r\n                    try {\r\n                        var result_1 = _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](isAsync, null, sendReason || 1 /* SendRequestReason.ManualFlush */);\r\n                        // Handles non-promise and always called if the returned promise resolves or rejects\r\n                        return doAwaitResponse(result_1, function (rsp) {\r\n                            if (callBack) {\r\n                                callBack(!rsp.rejected);\r\n                                return true;\r\n                            }\r\n                            // When async=true and no callback, return a promise\r\n                            if (isAsync) {\r\n                                return createPromise(function (resolve) {\r\n                                    resolve(!rsp.rejected);\r\n                                });\r\n                            }\r\n                            return result_1;\r\n                        });\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 22 /* _eInternalMessageId.FlushFailed */, \"flush failed, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            };\r\n            _self.onunloadFlush = function () {\r\n                if (!_paused) {\r\n                    if (_beaconSupported || _alwaysUseCustomSend) {\r\n                        try {\r\n                            return _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, _doUnloadSend, 2 /* SendRequestReason.Unload */);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */, \"failed to flush with beacon sender on page unload, telemetry will not be collected: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _self.flush(false);\r\n                    }\r\n                }\r\n            };\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                if (_self.isInitialized()) {\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender is already initialized\");\r\n                }\r\n                _base[_DYN_INITIALIZE /* @min:%2einitialize */](config, core, extensions, pluginChain);\r\n                var identifier = _self.identifier;\r\n                _serializer = new Serializer(core.logger);\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = 0;\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _stamp_specific_redirects = 0;\r\n                var diagLog = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                _evtNamespace = mergeEvtNamespace(createUniqueNamespace(\"Sender\"), core.evtNamespace && core.evtNamespace());\r\n                _offlineListener = createOfflineListener(_evtNamespace);\r\n                // This function will be re-called whenever any referenced configuration is changed\r\n                _self._addHook(onConfigChange(config, function (details) {\r\n                    var config = details.cfg;\r\n                    if (config.storagePrefix) {\r\n                        utlSetStoragePrefix(config.storagePrefix);\r\n                    }\r\n                    var ctx = createProcessTelemetryContext(null, config, core);\r\n                    // getExtCfg only finds undefined values from core\r\n                    var senderConfig = ctx.getExtCfg(identifier, defaultAppInsightsChannelConfig);\r\n                    var curExtUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    // if it is not inital change (_endpointUrl has value)\r\n                    // if current sender endpoint url is not changed directly\r\n                    // means ExtCfg is not changed directly\r\n                    // then we need to monitor endpoint url changes from core\r\n                    if (_endpointUrl && curExtUrl === _endpointUrl) {\r\n                        var coreUrl = config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                        // if core endpoint url is changed\r\n                        if (coreUrl && coreUrl !== curExtUrl) {\r\n                            // and endpoint promise changes is handled by this as well\r\n                            senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = coreUrl;\r\n                        }\r\n                    }\r\n                    var csStream = getInst(\"CompressionStream\");\r\n                    // Determine whether to enable payload compression (zipping).\r\n                    _zipPayload = isFeatureEnabled(\"zipPayload\", config, false);\r\n                    if (!isFunction(csStream)) {\r\n                        _zipPayload = false;\r\n                    }\r\n                    var corsPolicy = senderConfig.corsPolicy;\r\n                    if (corsPolicy) {\r\n                        if (corsPolicy === \"same-origin\" || corsPolicy === \"same-site\" || corsPolicy === \"cross-origin\") {\r\n                            _this.addHeader(CrossOriginResourcePolicyHeader, corsPolicy);\r\n                        }\r\n                    }\r\n                    else {\r\n                        delete _headers[CrossOriginResourcePolicyHeader];\r\n                    }\r\n                    if (isPromiseLike(senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */])) {\r\n                        // if it is promise, means the endpoint url is from core.endpointurl\r\n                        senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    objDefine(_self, \"_senderConfig\", {\r\n                        g: function () {\r\n                            return senderConfig;\r\n                        }\r\n                    });\r\n                    // Only update the endpoint if the original config !== the current config\r\n                    // This is so any redirect endpointUrl is not overwritten\r\n                    if (_orgEndpointUrl !== senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */]) {\r\n                        if (_orgEndpointUrl) {\r\n                            // TODO: add doc to remind users to flush before changing endpoint, otherwise all unsent payload will be sent to new endpoint\r\n                        }\r\n                        _endpointUrl = _orgEndpointUrl = senderConfig[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                    }\r\n                    // or is not string\r\n                    if (core.activeStatus() === ActiveStatus.PENDING) {\r\n                        // waiting for core promises to be resolved\r\n                        // NOTE: if active status is set to pending, stop sending, clear timer here\r\n                        _self.pause();\r\n                    }\r\n                    else if (core.activeStatus() === ActiveStatus.ACTIVE) {\r\n                        // core status changed from pending to other status\r\n                        _self.resume();\r\n                    }\r\n                    if (_customHeaders && _customHeaders !== senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */]) {\r\n                        // Removing any previously defined custom headers as they have changed\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            delete _headers[customHeader.header];\r\n                        });\r\n                    }\r\n                    _maxBatchSizeInBytes = senderConfig[_DYN_MAX_BATCH_SIZE_IN_BY1 /* @min:%2emaxBatchSizeInBytes */];\r\n                    _beaconSupported = (senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false || senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false) && isBeaconsSupported();\r\n                    _beaconOnUnloadSupported = senderConfig[_DYN_ONUNLOAD_DISABLE_BEA2 /* @min:%2eonunloadDisableBeacon */] === false && isBeaconsSupported();\r\n                    _beaconNormalSupported = senderConfig[_DYN_IS_BEACON_API_DISABL3 /* @min:%2eisBeaconApiDisabled */] === false && isBeaconsSupported();\r\n                    _alwaysUseCustomSend = senderConfig[_DYN_ALWAYS_USE_XHR_OVERR4 /* @min:%2ealwaysUseXhrOverride */];\r\n                    _disableXhr = !!senderConfig.disableXhr;\r\n                    _retryCodes = senderConfig.retryCodes;\r\n                    var bufferOverride = senderConfig[_DYN_BUFFER_OVERRIDE /* @min:%2ebufferOverride */];\r\n                    var canUseSessionStorage = !!senderConfig[_DYN_ENABLE_SESSION_STORA5 /* @min:%2eenableSessionStorageBuffer */] &&\r\n                        (!!bufferOverride || utlCanUseSessionStorage());\r\n                    var namePrefix = senderConfig.namePrefix;\r\n                    //Note: emitLineDelimitedJson and eventsLimitInMem is directly accessed via config in senderBuffer\r\n                    //Therefore, if canUseSessionStorage is not changed, we do not need to re initialize a new one\r\n                    var shouldUpdate = (canUseSessionStorage !== _sessionStorageUsed)\r\n                        || (canUseSessionStorage && (_namePrefix !== namePrefix)) // prefixName is only used in session storage\r\n                        || (canUseSessionStorage && (_bufferOverrideUsed !== bufferOverride));\r\n                    if (_self[_DYN__BUFFER /* @min:%2e_buffer */]) {\r\n                        // case1 (Pre and Now enableSessionStorageBuffer settings are same)\r\n                        // if namePrefix changes, transfer current buffer to new buffer\r\n                        // else no action needed\r\n                        //case2 (Pre and Now enableSessionStorageBuffer settings are changed)\r\n                        // transfer current buffer to new buffer\r\n                        if (shouldUpdate) {\r\n                            try {\r\n                                _self[_DYN__BUFFER /* @min:%2e_buffer */] = _self[_DYN__BUFFER /* @min:%2e_buffer */].createNew(diagLog, senderConfig, canUseSessionStorage);\r\n                            }\r\n                            catch (e) {\r\n                                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"failed to transfer telemetry to different buffer storage, telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                            }\r\n                        }\r\n                        _checkMaxSize();\r\n                    }\r\n                    else {\r\n                        _self[_DYN__BUFFER /* @min:%2e_buffer */] = canUseSessionStorage\r\n                            ? new SessionStorageSendBuffer(diagLog, senderConfig) : new ArraySendBuffer(diagLog, senderConfig);\r\n                    }\r\n                    _namePrefix = namePrefix;\r\n                    _sessionStorageUsed = canUseSessionStorage;\r\n                    _bufferOverrideUsed = bufferOverride;\r\n                    _fetchKeepAlive = !senderConfig[_DYN_ONUNLOAD_DISABLE_FET6 /* @min:%2eonunloadDisableFetch */] && isFetchSupported(true);\r\n                    _disableBeaconSplit = !!senderConfig[_DYN_DISABLE_SEND_BEACON_7 /* @min:%2edisableSendBeaconSplit */];\r\n                    _self._sample = new Sample(senderConfig.samplingPercentage, diagLog);\r\n                    _instrumentationKey = senderConfig[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    if (!isPromiseLike(_instrumentationKey) && !_validateInstrumentationKey(_instrumentationKey, config)) {\r\n                        _throwInternal(diagLog, 1 /* eLoggingSeverity.CRITICAL */, 100 /* _eInternalMessageId.InvalidInstrumentationKey */, \"Invalid Instrumentation key \" + _instrumentationKey);\r\n                    }\r\n                    _customHeaders = senderConfig[_DYN_CUSTOM_HEADERS /* @min:%2ecustomHeaders */];\r\n                    if (isString(_endpointUrl) && !isInternalApplicationInsightsEndpoint(_endpointUrl) && _customHeaders && _customHeaders[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        arrForEach(_customHeaders, function (customHeader) {\r\n                            _this.addHeader(customHeader.header, customHeader.value);\r\n                        });\r\n                    }\r\n                    else {\r\n                        _customHeaders = null;\r\n                    }\r\n                    _enableSendPromise = senderConfig.enableSendPromise;\r\n                    var sendPostConfig = _getSendPostMgrConfig();\r\n                    // only init it once\r\n                    if (!_sendPostMgr) {\r\n                        _sendPostMgr = new SenderPostManager();\r\n                        _sendPostMgr[_DYN_INITIALIZE /* @min:%2einitialize */](sendPostConfig, diagLog);\r\n                    }\r\n                    else {\r\n                        _sendPostMgr.SetConfig(sendPostConfig);\r\n                    }\r\n                    var customInterface = senderConfig.httpXHROverride;\r\n                    var httpInterface = null;\r\n                    var syncInterface = null;\r\n                    // User requested transport(s) values > Beacon > Fetch > XHR\r\n                    // Beacon would be filtered out if user has set disableBeaconApi to true at _getSenderInterface\r\n                    var theTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */], senderConfig.transports);\r\n                    httpInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](theTransports, false);\r\n                    var xhrInterface = _sendPostMgr && _sendPostMgr.getFallbackInst();\r\n                    _xhrSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync);\r\n                    };\r\n                    _fallbackSend = function (payload, isAsync) {\r\n                        return _doSend(xhrInterface, payload, isAsync, false);\r\n                    };\r\n                    httpInterface = _alwaysUseCustomSend ? customInterface : (httpInterface || customInterface || xhrInterface);\r\n                    _self[_DYN__SENDER /* @min:%2e_sender */] = function (payload, isAsync) {\r\n                        return _doSend(httpInterface, payload, isAsync);\r\n                    };\r\n                    if (_fetchKeepAlive) {\r\n                        // Try and use the fetch with keepalive\r\n                        _syncUnloadSender = _fetchKeepAliveSender;\r\n                    }\r\n                    var syncTransports = prependTransports([3 /* TransportType.Beacon */, 1 /* TransportType.Xhr */], senderConfig.unloadTransports);\r\n                    if (!_fetchKeepAlive) {\r\n                        // remove fetch from theTransports\r\n                        syncTransports = syncTransports.filter(function (transport) { return transport !== 2 /* TransportType.Fetch */; });\r\n                    }\r\n                    syncInterface = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */](syncTransports, true);\r\n                    syncInterface = _alwaysUseCustomSend ? customInterface : (syncInterface || customInterface);\r\n                    if ((_alwaysUseCustomSend || senderConfig.unloadTransports || !_syncUnloadSender) && syncInterface) {\r\n                        _syncUnloadSender = function (payload, isAsync) {\r\n                            return _doSend(syncInterface, payload, isAsync);\r\n                        };\r\n                    }\r\n                    if (!_syncUnloadSender) {\r\n                        _syncUnloadSender = _xhrSend;\r\n                    }\r\n                    _disableTelemetry = senderConfig.disableTelemetry;\r\n                    _convertUndefined = senderConfig.convertUndefined || UNDEFINED_VALUE;\r\n                    _isRetryDisabled = senderConfig.isRetryDisabled;\r\n                    _maxBatchInterval = senderConfig.maxBatchInterval;\r\n                }));\r\n            };\r\n            _self.processTelemetry = function (telemetryItem, itemCtx) {\r\n                itemCtx = _self._getTelCtx(itemCtx);\r\n                var diagLogger = itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var isValidate = _validate(telemetryItem, diagLogger);\r\n                    if (!isValidate) {\r\n                        return;\r\n                    }\r\n                    var aiEnvelope = _getEnvelope(telemetryItem, diagLogger);\r\n                    if (!aiEnvelope) {\r\n                        return;\r\n                    }\r\n                    // check if the incoming payload is too large, truncate if necessary\r\n                    var payload = _serializer.serialize(aiEnvelope);\r\n                    // flush if we would exceed the max-size limit by adding this item\r\n                    var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                    _checkMaxSize(payload);\r\n                    var payloadItem = {\r\n                        item: payload,\r\n                        cnt: 0 // inital cnt will always be 0\r\n                    };\r\n                    // enqueue the payload\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](payloadItem);\r\n                    // ensure an invocation timeout is set\r\n                    _setupTimer();\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */, \"Failed adding telemetry to the sender's buffer, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                }\r\n                // hand off the telemetry item to the next plugin\r\n                _self.processNext(telemetryItem, itemCtx);\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _syncFetchPayload === 0 && _self._buffer[_DYN_COUNT /* @min:%2ecount */]() === 0;\r\n            };\r\n            _self.getOfflineListener = function () {\r\n                return _offlineListener;\r\n            };\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            _self._xhrReadyStateChange = function (xhr, payload, countOfItemsInPayload) {\r\n                // since version 3.2.0, this function is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xhrReadyStateChange(xhr, payload, countOfItemsInPayload);\r\n            };\r\n            /**\r\n             * Immediately send buffered data\r\n             * @param isAsync - Indicates if the events should be sent asynchronously\r\n             * @param forcedSender - Indicates the forcedSender, undefined if not passed\r\n             */\r\n            _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */] = function (isAsync, forcedSender, sendReason) {\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                var result;\r\n                if (!_paused) {\r\n                    try {\r\n                        var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                        // Send data only if disableTelemetry is false\r\n                        if (!_disableTelemetry) {\r\n                            if (buffer[_DYN_COUNT /* @min:%2ecount */]() > 0) {\r\n                                var payload = buffer.getItems();\r\n                                _notifySendRequest(sendReason || 0 /* SendRequestReason.Undefined */, isAsync);\r\n                                // invoke send\r\n                                if (forcedSender) {\r\n                                    result = forcedSender.call(_self, payload, isAsync);\r\n                                }\r\n                                else {\r\n                                    result = _self[_DYN__SENDER /* @min:%2e_sender */](payload, isAsync);\r\n                                }\r\n                            }\r\n                            // update lastSend time to enable throttling\r\n                            _lastSend = +new Date;\r\n                        }\r\n                        else {\r\n                            buffer[_DYN_CLEAR /* @min:%2eclear */]();\r\n                        }\r\n                        _clearScheduledTimer();\r\n                    }\r\n                    catch (e) {\r\n                        /* Ignore this error for IE under v10 */\r\n                        var ieVer = getIEVersion();\r\n                        if (!ieVer || ieVer > 9) {\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Telemetry transmission failed, some telemetry will be lost: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                        }\r\n                        // potential place to call countException q3\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n            _self.getOfflineSupport = function () {\r\n                return {\r\n                    getUrl: function () {\r\n                        return _endpointUrl;\r\n                    },\r\n                    createPayload: _createPayload,\r\n                    serialize: _serialize,\r\n                    batch: _batch,\r\n                    shouldProcess: function (evt) {\r\n                        return !!_validate(evt);\r\n                    }\r\n                };\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _self.onunloadFlush();\r\n                runTargetUnload(_offlineListener, false);\r\n                _initDefaults();\r\n            };\r\n            /**\r\n             * error handler\r\n             */\r\n            _self[_DYN__ON_ERROR /* @min:%2e_onError */] = function (payload, message, event) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onError(payload, message, event);\r\n            };\r\n            /**\r\n             * partial success handler\r\n             */\r\n            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */] = function (payload, results) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onPartialSuccess(payload, results);\r\n            };\r\n            /**\r\n             * success handler\r\n             */\r\n            _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */] = function (payload, countOfItemsInPayload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _onSuccess(payload, countOfItemsInPayload);\r\n                //_self._buffer && _self._buffer.clearSent(payload);\r\n            };\r\n            /**\r\n             * xdr state changes\r\n             */\r\n            _self._xdrOnLoad = function (xdr, payload) {\r\n                // since version 3.1.3, string[] is no-op\r\n                if (_isStringArr(payload)) {\r\n                    return;\r\n                }\r\n                return _xdrOnLoad(xdr, payload);\r\n            };\r\n            // function _getStatsBeat() {\r\n            //     let statsBeatConfig: IStatsBeatState = {\r\n            //         cKey: _self._senderConfig.instrumentationKey,\r\n            //         endpoint: _endpointUrl,\r\n            //         sdkVer: EnvelopeCreator.Version,\r\n            //         type: eStatsType.SDK\r\n            //     };\r\n            //     let core = _self.core;\r\n            //     // During page unload the core may have been cleared and some async events may not have been sent yet\r\n            //     // resulting in the core being null. In this case we don't want to create a statsbeat instance\r\n            //     return core ? core.getStatsBeat(statsBeatConfig) : null;\r\n            // }\r\n            function _xdrOnLoad(xdr, payload) {\r\n                var responseText = _getResponseText(xdr);\r\n                if (xdr && (responseText + \"\" === \"200\" || responseText === \"\")) {\r\n                    _consecutiveErrors = 0;\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, 0);\r\n                }\r\n                else {\r\n                    var results = parseResponse(responseText);\r\n                    if (results && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] && results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] > results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]\r\n                        && !_isRetryDisabled) {\r\n                        _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, results);\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, formatErrorMessageXdr(xdr));\r\n                    }\r\n                }\r\n            }\r\n            function _getSendPostMgrConfig() {\r\n                try {\r\n                    var onCompleteFuncs = {\r\n                        xdrOnComplete: function (xdr, oncomplete, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            //const responseText = _getResponseText(xdr);\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     if (xdr && (responseText + \"\" === \"200\" || responseText === \"\")) {\r\n                            //         _consecutiveErrors = 0;\r\n                            //         statsbeat.count(200, payload, _endpointUrl);\r\n                            //     } else {\r\n                            //         const results = parseResponse(responseText);\r\n                            //         if (results && results.itemsReceived && results.itemsReceived > results.itemsAccepted\r\n                            //             && !_isRetryDisabled) {\r\n                            //             statsbeat.count(206, payload, _endpointUrl);\r\n                            //         } else {\r\n                            //             statsbeat.count(499, payload, _endpointUrl);\r\n                            //         }\r\n                            //     }\r\n                            // }\r\n                            return _xdrOnLoad(xdr, payloadArr);\r\n                        },\r\n                        fetchOnComplete: function (response, onComplete, resValue, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     statsbeat.count(response.status, payload, _endpointUrl);\r\n                            // }\r\n                            return _checkResponsStatus(response.status, payloadArr, response.url, payloadArr[_DYN_LENGTH /* @min:%2elength */], response.statusText, resValue || \"\");\r\n                        },\r\n                        xhrOnComplete: function (request, oncomplete, payload) {\r\n                            var payloadArr = _getPayloadArr(payload);\r\n                            if (!payloadArr) {\r\n                                return;\r\n                            }\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat && request.readyState === 4) {\r\n                            //     statsbeat.count(request.status, payload, _endpointUrl);\r\n                            // }\r\n                            return _xhrReadyStateChange(request, payloadArr, payloadArr[_DYN_LENGTH /* @min:%2elength */]);\r\n                        },\r\n                        beaconOnRetry: function (data, onComplete, canSend) {\r\n                            // let statsbeat = _getStatsBeat();\r\n                            // if (statsbeat) {\r\n                            //     statsbeat.count(499, data, _endpointUrl);\r\n                            // }\r\n                            return _onBeaconRetry(data, onComplete, canSend);\r\n                        }\r\n                    };\r\n                    var config = {\r\n                        enableSendPromise: _enableSendPromise,\r\n                        isOneDs: false,\r\n                        disableCredentials: false,\r\n                        disableXhr: _disableXhr,\r\n                        disableBeacon: !_beaconNormalSupported,\r\n                        disableBeaconSync: !_beaconOnUnloadSupported,\r\n                        senderOnCompleteCallBack: onCompleteFuncs\r\n                    };\r\n                    return config;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * xhr state changes\r\n             */\r\n            function _xhrReadyStateChange(xhr, payload, countOfItemsInPayload) {\r\n                if (xhr.readyState === 4) {\r\n                    _checkResponsStatus(xhr.status, payload, xhr.responseURL, countOfItemsInPayload, formatErrorMessageXhr(xhr), _getResponseText(xhr) || xhr.response);\r\n                }\r\n            }\r\n            /**\r\n             * error handler\r\n             */\r\n            function _onError(payload, message, event) {\r\n                _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 26 /* _eInternalMessageId.OnError */, \"Failed to send telemetry.\", { message: message });\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            /**\r\n             * partial success handler\r\n             */\r\n            function _onPartialSuccess(payload, results) {\r\n                var failed = [];\r\n                var retry = [];\r\n                // Iterate through the reversed array of errors so that splicing doesn't have invalid indexes after the first item.\r\n                var errors = results.errors.reverse();\r\n                for (var _i = 0, errors_1 = errors; _i < errors_1.length; _i++) {\r\n                    var error = errors_1[_i];\r\n                    var extracted = payload.splice(error.index, 1)[0];\r\n                    if (_isRetriable(error.statusCode)) {\r\n                        retry[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                    else {\r\n                        // All other errors, including: 402 (Monthly quota exceeded) and 439 (Too many requests and refresh cache).\r\n                        failed[_DYN_PUSH /* @min:%2epush */](extracted);\r\n                    }\r\n                }\r\n                if (payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */]);\r\n                }\r\n                if (failed[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _self[_DYN__ON_ERROR /* @min:%2e_onError */](failed, formatErrorMessageXhr(null, [\"partial success\", results[_DYN_ITEMS_ACCEPTED /* @min:%2eitemsAccepted */], \"of\", results.itemsReceived].join(\" \")));\r\n                }\r\n                if (retry[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    _resendPayload(retry);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \"Partial success. \" +\r\n                        \"Delivered: \" + payload[_DYN_LENGTH /* @min:%2elength */] + \", Failed: \" + failed[_DYN_LENGTH /* @min:%2elength */] +\r\n                        \". Will retry to send \" + retry[_DYN_LENGTH /* @min:%2elength */] + \" our of \" + results[_DYN_ITEMS_RECEIVED /* @min:%2eitemsReceived */] + \" items\");\r\n                }\r\n            }\r\n            /**\r\n             * success handler\r\n             */\r\n            function _onSuccess(payload, countOfItemsInPayload) {\r\n                _self._buffer && _self._buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n            }\r\n            function _getPayloadArr(payload) {\r\n                try {\r\n                    if (payload) {\r\n                        var internalPayload = payload;\r\n                        var arr = internalPayload.oriPayload;\r\n                        if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                            return arr;\r\n                        }\r\n                        return null;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _validate(telemetryItem, diagLogger) {\r\n                if (_disableTelemetry) {\r\n                    // Do not send/save data\r\n                    return false;\r\n                }\r\n                // validate input\r\n                if (!telemetryItem) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 7 /* _eInternalMessageId.CannotSendEmptyTelemetry */, \"Cannot send empty telemetry\");\r\n                    return false;\r\n                }\r\n                // validate event\r\n                if (telemetryItem.baseData && !telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 70 /* _eInternalMessageId.InvalidEvent */, \"Cannot send telemetry without baseData and baseType\");\r\n                    return false;\r\n                }\r\n                if (!telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */]) {\r\n                    // Default\r\n                    telemetryItem[_DYN_BASE_TYPE /* @min:%2ebaseType */] = \"EventData\";\r\n                }\r\n                // ensure a sender was constructed\r\n                if (!_self[_DYN__SENDER /* @min:%2e_sender */]) {\r\n                    diagLogger && _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 28 /* _eInternalMessageId.SenderNotInitialized */, \"Sender was not initialized\");\r\n                    return false;\r\n                }\r\n                // check if this item should be sampled in, else add sampleRate tag\r\n                if (!_isSampledIn(telemetryItem)) {\r\n                    // Item is sampled out, do not send it\r\n                    diagLogger && _throwInternal(diagLogger, 2 /* eLoggingSeverity.WARNING */, 33 /* _eInternalMessageId.TelemetrySampledAndNotSent */, \"Telemetry item was sampled out and not sent\", { SampleRate: _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] });\r\n                    return false;\r\n                }\r\n                else {\r\n                    telemetryItem[SampleRate] = _self._sample[_DYN_SAMPLE_RATE /* @min:%2esampleRate */];\r\n                }\r\n                return true;\r\n            }\r\n            function _getEnvelope(telemetryItem, diagLogger) {\r\n                // construct an envelope that Application Insights endpoint can understand\r\n                // if ikey of telemetry is provided and not empty, envelope will use this iKey instead of senderConfig iKey\r\n                var defaultEnvelopeIkey = telemetryItem.iKey || _instrumentationKey;\r\n                var aiEnvelope = Sender.constructEnvelope(telemetryItem, defaultEnvelopeIkey, diagLogger, _convertUndefined);\r\n                if (!aiEnvelope) {\r\n                    _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 47 /* _eInternalMessageId.CreateEnvelopeError */, \"Unable to create an AppInsights envelope\");\r\n                    return;\r\n                }\r\n                var doNotSendItem = false;\r\n                // this is for running in legacy mode, where customer may already have a custom initializer present\r\n                if (telemetryItem[_DYN_TAGS /* @min:%2etags */] && telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy]) {\r\n                    arrForEach(telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy], function (callBack) {\r\n                        try {\r\n                            if (callBack && callBack(aiEnvelope) === false) {\r\n                                doNotSendItem = true;\r\n                                _warnToConsole(diagLogger, \"Telemetry processor check returns false\");\r\n                            }\r\n                        }\r\n                        catch (e) {\r\n                            // log error but dont stop executing rest of the telemetry initializers\r\n                            // doNotSendItem = true;\r\n                            _throwInternal(diagLogger, 1 /* eLoggingSeverity.CRITICAL */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"One of telemetry initializers failed, telemetry item will not be sent: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n                        }\r\n                    });\r\n                    delete telemetryItem[_DYN_TAGS /* @min:%2etags */][ProcessLegacy];\r\n                }\r\n                if (doNotSendItem) {\r\n                    return; // do not send, no need to execute next plugin\r\n                }\r\n                return aiEnvelope;\r\n            }\r\n            function _serialize(item) {\r\n                var rlt = EMPTY_STR;\r\n                var diagLogger = _self[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n                try {\r\n                    var valid = _validate(item, diagLogger);\r\n                    var envelope = null;\r\n                    if (valid) {\r\n                        envelope = _getEnvelope(item, diagLogger);\r\n                    }\r\n                    if (envelope) {\r\n                        rlt = _serializer.serialize(envelope);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return rlt;\r\n            }\r\n            function _batch(arr) {\r\n                var rlt = EMPTY_STR;\r\n                if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                    rlt = \"[\" + arr.join(\",\") + \"]\";\r\n                }\r\n                return rlt;\r\n            }\r\n            function _createPayload(data) {\r\n                var headers = _getHeaders();\r\n                return {\r\n                    urlString: _endpointUrl,\r\n                    data: data,\r\n                    headers: headers\r\n                };\r\n            }\r\n            function _isSampledIn(envelope) {\r\n                return _self._sample.isSampledIn(envelope);\r\n            }\r\n            function _getOnComplete(payload, status, headers, response) {\r\n                // ***********************************************************************************************\r\n                //TODO: handle other status codes\r\n                if (status === 200 && payload) {\r\n                    _self._onSuccess(payload, payload[_DYN_LENGTH /* @min:%2elength */]);\r\n                }\r\n                else {\r\n                    response && _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, response);\r\n                }\r\n            }\r\n            function _doSend(sendInterface, payload, isAsync, markAsSent) {\r\n                if (markAsSent === void 0) { markAsSent = true; }\r\n                var onComplete = function (status, headers, response) {\r\n                    // let statsbeat = _getStatsBeat();\r\n                    // if (statsbeat) {\r\n                    //     statsbeat.count(status, payloadData, _endpointUrl);\r\n                    // }\r\n                    return _getOnComplete(payload, status, headers, response);\r\n                };\r\n                var payloadData = _getPayload(payload);\r\n                // if (payloadData) {\r\n                //     payloadData.statsBeatData = {startTime: dateNow()};\r\n                // }\r\n                var sendPostFunc = sendInterface && sendInterface.sendPOST;\r\n                if (sendPostFunc && payloadData) {\r\n                    // ***********************************************************************************************\r\n                    // mark payload as sent at the beginning of calling each send function\r\n                    if (markAsSent) {\r\n                        _self._buffer[_DYN_MARK_AS_SENT /* @min:%2emarkAsSent */](payload);\r\n                    }\r\n                    var result_2;\r\n                    var callbackExecuted_1 = false;\r\n                    var resolveFn_1;\r\n                    var rejectFn_1;\r\n                    _sendPostMgr.preparePayload(function (processedPayload) {\r\n                        result_2 = sendPostFunc(processedPayload, onComplete, !isAsync);\r\n                        callbackExecuted_1 = true;\r\n                        if (resolveFn_1) {\r\n                            doAwait(result_2, resolveFn_1, rejectFn_1);\r\n                        }\r\n                    }, _zipPayload, payloadData, !isAsync);\r\n                    if (callbackExecuted_1) {\r\n                        return result_2;\r\n                    }\r\n                    // Callback was not executed synchronously, so we need to return a promise\r\n                    return createPromise(function (resolve, reject) {\r\n                        resolveFn_1 = resolve;\r\n                        rejectFn_1 = reject;\r\n                    });\r\n                }\r\n                return null;\r\n            }\r\n            function _getPayload(payload) {\r\n                if (isArray(payload) && payload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var batch = _self[_DYN__BUFFER /* @min:%2e_buffer */].batchPayloads(payload);\r\n                    var headers = _getHeaders();\r\n                    var payloadData = {\r\n                        data: batch,\r\n                        urlString: _endpointUrl,\r\n                        headers: headers,\r\n                        disableXhrSync: _disableXhr,\r\n                        disableFetchKeepAlive: !_fetchKeepAlive,\r\n                        oriPayload: payload\r\n                    };\r\n                    return payloadData;\r\n                }\r\n                return null;\r\n            }\r\n            function _getHeaders() {\r\n                try {\r\n                    var headers = _headers || {};\r\n                    if (isInternalApplicationInsightsEndpoint(_endpointUrl)) {\r\n                        headers[RequestHeaders[6 /* eRequestHeaders.sdkContextHeader */]] = RequestHeaders[7 /* eRequestHeaders.sdkContextHeaderAppIdRequest */];\r\n                    }\r\n                    return headers;\r\n                }\r\n                catch (e) {\r\n                    // eslint-disable-next-line no-empty\r\n                }\r\n                return null;\r\n            }\r\n            function _checkMaxSize(incomingPayload) {\r\n                var incomingSize = incomingPayload ? incomingPayload[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n                if ((_self[_DYN__BUFFER /* @min:%2e_buffer */].size() + incomingSize) > _maxBatchSizeInBytes) {\r\n                    if (!_offlineListener || _offlineListener.isOnline()) { // only trigger send when currently online\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 10 /* SendRequestReason.MaxBatchSize */);\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _checkResponsStatus(status, payload, responseUrl, countOfItemsInPayload, errorMessage, res) {\r\n                var response = null;\r\n                if (!_self._appId) {\r\n                    response = parseResponse(res);\r\n                    if (response && response.appId) {\r\n                        _self._appId = response.appId;\r\n                    }\r\n                }\r\n                if ((status < 200 || status >= 300) && status !== 0) {\r\n                    // Update End Point url if permanent redirect or moved permanently\r\n                    // Updates the end point url before retry\r\n                    if (status === 301 || status === 307 || status === 308) {\r\n                        if (!_checkAndUpdateEndPointUrl(responseUrl)) {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (_offlineListener && !_offlineListener.isOnline()) { // offline\r\n                        // Note: Don't check for status == 0, since adblock gives this code\r\n                        if (!_isRetryDisabled) {\r\n                            var offlineBackOffMultiplier = 10; // arbritrary number\r\n                            _resendPayload(payload, offlineBackOffMultiplier);\r\n                            _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". Offline - Response Code: \".concat(status, \". Offline status: \").concat(!_offlineListener.isOnline(), \". Will retry to send \").concat(payload.length, \" items.\"));\r\n                        }\r\n                        return;\r\n                    }\r\n                    if (!_isRetryDisabled && _isRetriable(status)) {\r\n                        _resendPayload(payload);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" +\r\n                            \"Response code \" + status + \". Will retry to send \" + payload[_DYN_LENGTH /* @min:%2elength */] + \" items.\");\r\n                    }\r\n                    else {\r\n                        _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                    }\r\n                }\r\n                else {\r\n                    // check if the xhr's responseURL or fetch's response.url is same as endpoint url\r\n                    // TODO after 10 redirects force send telemetry with 'redirect=false' as query parameter.\r\n                    _checkAndUpdateEndPointUrl(responseUrl);\r\n                    if (status === 206) {\r\n                        if (!response) {\r\n                            response = parseResponse(res);\r\n                        }\r\n                        if (response && !_isRetryDisabled) {\r\n                            _self[_DYN__ON_PARTIAL_SUCCESS /* @min:%2e_onPartialSuccess */](payload, response);\r\n                        }\r\n                        else {\r\n                            _self[_DYN__ON_ERROR /* @min:%2e_onError */](payload, errorMessage);\r\n                        }\r\n                    }\r\n                    else {\r\n                        _consecutiveErrors = 0;\r\n                        _self[_DYN__ON_SUCCESS /* @min:%2e_onSuccess */](payload, countOfItemsInPayload);\r\n                    }\r\n                }\r\n            }\r\n            function _checkAndUpdateEndPointUrl(responseUrl) {\r\n                // Maximum stamp specific redirects allowed(uncomment this when breeze is ready with not allowing redirects feature)\r\n                if (_stamp_specific_redirects >= 10) {\r\n                    //  _self._senderConfig.endpointUrl = () => Sender._getDefaultAppInsightsChannelConfig().endpointUrl()+\"/?redirect=false\";\r\n                    //  _stamp_specific_redirects = 0;\r\n                    return false;\r\n                }\r\n                if (!isNullOrUndefined(responseUrl) && responseUrl !== \"\") {\r\n                    if (responseUrl !== _endpointUrl) {\r\n                        _endpointUrl = responseUrl;\r\n                        ++_stamp_specific_redirects;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            function _doUnloadSend(payload, isAsync) {\r\n                if (_syncUnloadSender) {\r\n                    // We are unloading so always call the sender with sync set to false\r\n                    _syncUnloadSender(payload, false);\r\n                }\r\n                else {\r\n                    // Fallback to the previous beacon Sender (which causes a CORB warning on chrome now)\r\n                    var beaconInst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([3 /* TransportType.Beacon */], true);\r\n                    return _doSend(beaconInst, payload, isAsync);\r\n                }\r\n            }\r\n            function _onBeaconRetry(payload, onComplete, canSend) {\r\n                var internalPayload = payload;\r\n                var data = internalPayload && internalPayload.oriPayload;\r\n                if (!_disableBeaconSplit) {\r\n                    // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                    var droppedPayload = [];\r\n                    for (var lp = 0; lp < data[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        var thePayload = data[lp];\r\n                        var arr = [thePayload];\r\n                        var item = _getPayload(arr);\r\n                        if (!canSend(item, onComplete)) {\r\n                            // Can't send anymore, so split the batch and drop the rest\r\n                            droppedPayload[_DYN_PUSH /* @min:%2epush */](thePayload);\r\n                        }\r\n                        else {\r\n                            _self._onSuccess(arr, arr[_DYN_LENGTH /* @min:%2elength */]);\r\n                        }\r\n                    }\r\n                    if (droppedPayload[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                        _fallbackSend && _fallbackSend(droppedPayload, true);\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                    }\r\n                }\r\n                else {\r\n                    _fallbackSend && _fallbackSend(data, true);\r\n                    _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with normal sender.\");\r\n                }\r\n            }\r\n            function _isStringArr(arr) {\r\n                try {\r\n                    if (arr && arr[_DYN_LENGTH /* @min:%2elength */]) {\r\n                        return (isString(arr[0]));\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    //TODO: log, sender use IInternalStorageItem instead of string since 3.1.3\r\n                }\r\n                return null;\r\n            }\r\n            function _fetchKeepAliveSender(payload, isAsync) {\r\n                var transport = null;\r\n                if (isArray(payload)) {\r\n                    var payloadSize = payload[_DYN_LENGTH /* @min:%2elength */];\r\n                    for (var lp = 0; lp < payload[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                        payloadSize += payload[lp].item[_DYN_LENGTH /* @min:%2elength */];\r\n                    }\r\n                    var syncFetchPayload = _sendPostMgr.getSyncFetchPayload();\r\n                    if ((syncFetchPayload + payloadSize) <= FetchSyncRequestSizeLimitBytes) {\r\n                        transport = 2 /* TransportType.Fetch */;\r\n                    }\r\n                    else if (isBeaconsSupported()) {\r\n                        // Fallback to beacon sender as we at least get told which events can't be scheduled\r\n                        transport = 3 /* TransportType.Beacon */;\r\n                    }\r\n                    else {\r\n                        // Payload is going to be too big so just try and send via XHR\r\n                        transport = 1 /* TransportType.Xhr */;\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 40 /* _eInternalMessageId.TransmissionFailed */, \". \" + \"Failed to send telemetry with Beacon API, retried with xhrSender.\");\r\n                    }\r\n                    var inst = _sendPostMgr && _sendPostMgr[_DYN_GET_SENDER_INST /* @min:%2egetSenderInst */]([transport], true);\r\n                    return _doSend(inst, payload, isAsync);\r\n                }\r\n                return null;\r\n            }\r\n            /**\r\n             * Resend payload. Adds payload back to the send buffer and setup a send timer (with exponential backoff).\r\n             * @param payload\r\n             */\r\n            function _resendPayload(payload, linearFactor) {\r\n                if (linearFactor === void 0) { linearFactor = 1; }\r\n                if (!payload || payload[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    return;\r\n                }\r\n                var buffer = _self[_DYN__BUFFER /* @min:%2e_buffer */];\r\n                buffer[_DYN_CLEAR_SENT /* @min:%2eclearSent */](payload);\r\n                _consecutiveErrors++;\r\n                for (var _i = 0, payload_1 = payload; _i < payload_1.length; _i++) {\r\n                    var item = payload_1[_i];\r\n                    item.cnt = item.cnt || 0; // to make sure we have cnt for each payload\r\n                    item.cnt++; // when resend, increase cnt\r\n                    buffer[_DYN_ENQUEUE /* @min:%2eenqueue */](item);\r\n                }\r\n                // setup timer\r\n                _setRetryTime(linearFactor);\r\n                _setupTimer();\r\n            }\r\n            /**\r\n             * Calculates the time to wait before retrying in case of an error based on\r\n             * http://en.wikipedia.org/wiki/Exponential_backoff\r\n             */\r\n            function _setRetryTime(linearFactor) {\r\n                var SlotDelayInSeconds = 10;\r\n                var delayInSeconds;\r\n                if (_consecutiveErrors <= 1) {\r\n                    delayInSeconds = SlotDelayInSeconds;\r\n                }\r\n                else {\r\n                    var backOffSlot = (Math.pow(2, _consecutiveErrors) - 1) / 2;\r\n                    // tslint:disable-next-line:insecure-random\r\n                    var backOffDelay = mathFloor(Math.random() * backOffSlot * SlotDelayInSeconds) + 1;\r\n                    backOffDelay = linearFactor * backOffDelay;\r\n                    delayInSeconds = mathMax(mathMin(backOffDelay, 3600), SlotDelayInSeconds);\r\n                }\r\n                // TODO: Log the backoff time like the C# version does.\r\n                var retryAfterTimeSpan = dateNow() + (delayInSeconds * 1000);\r\n                // TODO: Log the retry at time like the C# version does.\r\n                _retryAt = retryAfterTimeSpan;\r\n            }\r\n            /**\r\n             * Sets up the timer which triggers actually sending the data.\r\n             */\r\n            function _setupTimer() {\r\n                if (!_timeoutHandle && !_paused) {\r\n                    var retryInterval = _retryAt ? mathMax(0, _retryAt - dateNow()) : 0;\r\n                    var timerValue = mathMax(_maxBatchInterval, retryInterval);\r\n                    _timeoutHandle = scheduleTimeout(function () {\r\n                        _timeoutHandle = null;\r\n                        _self[_DYN_TRIGGER_SEND /* @min:%2etriggerSend */](true, null, 1 /* SendRequestReason.NormalSchedule */);\r\n                    }, timerValue);\r\n                }\r\n            }\r\n            function _clearScheduledTimer() {\r\n                _timeoutHandle && _timeoutHandle.cancel();\r\n                _timeoutHandle = null;\r\n                _retryAt = null;\r\n            }\r\n            /**\r\n             * Checks if the SDK should resend the payload after receiving this status code from the backend.\r\n             * @param statusCode\r\n             */\r\n            function _isRetriable(statusCode) {\r\n                // retryCodes = [] means should not retry\r\n                if (!isNullOrUndefined(_retryCodes)) {\r\n                    return _retryCodes[_DYN_LENGTH /* @min:%2elength */] && _retryCodes.indexOf(statusCode) > -1;\r\n                }\r\n                return statusCode === 401 // Unauthorized\r\n                    // Removing as private links can return a 403 which causes excessive retries and session storage usage\r\n                    // || statusCode === 403 // Forbidden\r\n                    || statusCode === 408 // Timeout\r\n                    || statusCode === 429 // Too many requests.\r\n                    || statusCode === 500 // Internal server error.\r\n                    || statusCode === 502 // Bad Gateway.\r\n                    || statusCode === 503 // Service unavailable.\r\n                    || statusCode === 504; // Gateway timeout.\r\n            }\r\n            // Using function lookups for backward compatibility as the getNotifyMgr() did not exist until after v2.5.6\r\n            function _getNotifyMgr() {\r\n                var func = \"getNotifyMgr\";\r\n                var result;\r\n                var core = _self.core;\r\n                if (core) {\r\n                    // During page unload the core may have been cleared and some async events may not have been sent yet\r\n                    // resulting in the core being null. In this case we don't want to create a statsbeat instance\r\n                    if (core[func]) {\r\n                        result = core[func]();\r\n                    }\r\n                    else {\r\n                        // using _self.core['_notificationManager'] for backward compatibility\r\n                        result = core[\"_notificationManager\"];\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            function _notifySendRequest(sendRequest, isAsync) {\r\n                var manager = _getNotifyMgr();\r\n                if (manager && manager.eventsSendRequest) {\r\n                    try {\r\n                        manager.eventsSendRequest(sendRequest, isAsync);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + getExceptionName(e), { exception: dumpObj(e) });\r\n                    }\r\n                }\r\n            }\r\n            /**\r\n             * Validate UUID Format\r\n             * Specs taken from https://tools.ietf.org/html/rfc4122 and breeze repo\r\n             */\r\n            function _validateInstrumentationKey(instrumentationKey, config) {\r\n                var disableValidation = config.disableInstrumentationKeyValidation;\r\n                var disableIKeyValidationFlag = isNullOrUndefined(disableValidation) ? false : disableValidation;\r\n                if (disableIKeyValidationFlag) {\r\n                    return true;\r\n                }\r\n                var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n                var regexp = new RegExp(UUID_Regex);\r\n                return regexp.test(instrumentationKey);\r\n            }\r\n            function _initDefaults() {\r\n                _self[_DYN__SENDER /* @min:%2e_sender */] = null;\r\n                _self[_DYN__BUFFER /* @min:%2e_buffer */] = null;\r\n                _self._appId = null;\r\n                _self._sample = null;\r\n                _headers = {};\r\n                _offlineListener = null;\r\n                _consecutiveErrors = 0;\r\n                _retryAt = null;\r\n                _lastSend = null;\r\n                _paused = false;\r\n                _timeoutHandle = null;\r\n                _serializer = null;\r\n                _stamp_specific_redirects = 0;\r\n                _syncFetchPayload = 0;\r\n                _syncUnloadSender = null;\r\n                _evtNamespace = null;\r\n                _endpointUrl = null;\r\n                _orgEndpointUrl = null;\r\n                _maxBatchSizeInBytes = 0;\r\n                _beaconSupported = false;\r\n                _customHeaders = null;\r\n                _disableTelemetry = false;\r\n                _instrumentationKey = null;\r\n                _convertUndefined = UNDEFINED_VALUE;\r\n                _isRetryDisabled = false;\r\n                _sessionStorageUsed = null;\r\n                _namePrefix = UNDEFINED_VALUE;\r\n                _disableXhr = false;\r\n                _fetchKeepAlive = false;\r\n                _disableBeaconSplit = false;\r\n                _xhrSend = null;\r\n                _fallbackSend = null;\r\n                _sendPostMgr = null;\r\n                objDefine(_self, \"_senderConfig\", {\r\n                    g: function () {\r\n                        return objExtend({}, defaultAppInsightsChannelConfig);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Sender.constructEnvelope = function (orig, iKey, logger, convertUndefined) {\r\n        var envelope;\r\n        if (iKey !== orig.iKey && !isNullOrUndefined(iKey)) {\r\n            envelope = __assign(__assign({}, orig), { iKey: iKey });\r\n        }\r\n        else {\r\n            envelope = orig;\r\n        }\r\n        var creator = EnvelopeTypeCreator[envelope.baseType] || EventEnvelopeCreator;\r\n        return creator(logger, envelope, convertUndefined);\r\n    };\r\n// Removed Stub for Sender.prototype.pause.\r\n// Removed Stub for Sender.prototype.resume.\r\n// Removed Stub for Sender.prototype.flush.\r\n// Removed Stub for Sender.prototype.onunloadFlush.\r\n// Removed Stub for Sender.prototype.initialize.\r\n// Removed Stub for Sender.prototype.processTelemetry.\r\n// Removed Stub for Sender.prototype._xhrReadyStateChange.\r\n// Removed Stub for Sender.prototype.triggerSend.\r\n// Removed Stub for Sender.prototype._onError.\r\n// Removed Stub for Sender.prototype._onPartialSuccess.\r\n// Removed Stub for Sender.prototype._onSuccess.\r\n// Removed Stub for Sender.prototype._xdrOnLoad.\r\n// Removed Stub for Sender.prototype.addHeader.\r\n// Removed Stub for Sender.prototype.isCompletelyIdle.\r\n// Removed Stub for Sender.prototype.getOfflineSupport.\r\n// Removed Stub for Sender.prototype.getOfflineListener.\r\n    return Sender;\r\n}(BaseTelemetryPlugin));\r\nexport { Sender };\r\n//# sourceMappingURL=Sender.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _throwInternal, getJSON, isArray, isFunction, isObject, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_LENGTH, _DYN_PUSH, _DYN_STRINGIFY, _DYN_TO_STRING } from \"./__DynamicConstants\";\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer(logger) {\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            /**\r\n             * Serializes the current object to a JSON string.\r\n             */\r\n            _self.serialize = function (input) {\r\n                var output = _serializeObject(input, \"root\");\r\n                try {\r\n                    return getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](output);\r\n                }\r\n                catch (e) {\r\n                    // if serialization fails return an empty string\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                }\r\n            };\r\n            function _serializeObject(source, name) {\r\n                var circularReferenceCheck = \"__aiCircularRefCheck\";\r\n                var output = {};\r\n                if (!source) {\r\n                    _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"cannot serialize object because it is null or undefined\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (source[circularReferenceCheck]) {\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 50 /* _eInternalMessageId.CircularReferenceDetected */, \"Circular reference detected while serializing object\", { name: name }, true);\r\n                    return output;\r\n                }\r\n                if (!source.aiDataContract) {\r\n                    // special case for measurements/properties/tags\r\n                    if (name === \"measurements\") {\r\n                        output = _serializeStringMap(source, \"number\", name);\r\n                    }\r\n                    else if (name === \"properties\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (name === \"tags\") {\r\n                        output = _serializeStringMap(source, \"string\", name);\r\n                    }\r\n                    else if (isArray(source)) {\r\n                        output = _serializeArray(source, name);\r\n                    }\r\n                    else {\r\n                        _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */, \"Attempting to serialize an object which does not implement ISerializable\", { name: name }, true);\r\n                        try {\r\n                            // verify that the object can be stringified\r\n                            getJSON()[_DYN_STRINGIFY /* @min:%2estringify */](source);\r\n                            output = source;\r\n                        }\r\n                        catch (e) {\r\n                            // if serialization fails return an empty string\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 48 /* _eInternalMessageId.CannotSerializeObject */, (e && isFunction(e[_DYN_TO_STRING /* @min:%2etoString */])) ? e[_DYN_TO_STRING /* @min:%2etoString */]() : \"Error serializing object\", null, true);\r\n                        }\r\n                    }\r\n                    return output;\r\n                }\r\n                source[circularReferenceCheck] = true;\r\n                objForEachKey(source.aiDataContract, function (field, contract) {\r\n                    var isRequired = (isFunction(contract)) ? (contract() & 1 /* FieldType.Required */) : (contract & 1 /* FieldType.Required */);\r\n                    var isHidden = (isFunction(contract)) ? (contract() & 4 /* FieldType.Hidden */) : (contract & 4 /* FieldType.Hidden */);\r\n                    var isArray = contract & 2 /* FieldType.Array */;\r\n                    var isPresent = source[field] !== undefined;\r\n                    var isObj = isObject(source[field]) && source[field] !== null;\r\n                    if (isRequired && !isPresent && !isArray) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 24 /* _eInternalMessageId.MissingRequiredFieldSpecification */, \"Missing required field specification. The field is required but not present on source\", { field: field, name: name });\r\n                        // If not in debug mode, continue and hope the error is permissible\r\n                    }\r\n                    else if (!isHidden) { // Don't serialize hidden fields\r\n                        var value = void 0;\r\n                        if (isObj) {\r\n                            if (isArray) {\r\n                                // special case; recurse on each object in the source array\r\n                                value = _serializeArray(source[field], field);\r\n                            }\r\n                            else {\r\n                                // recurse on the source object in this field\r\n                                value = _serializeObject(source[field], field);\r\n                            }\r\n                        }\r\n                        else {\r\n                            // assign the source field to the output even if undefined or required\r\n                            value = source[field];\r\n                        }\r\n                        // only emit this field if the value is defined\r\n                        if (value !== undefined) {\r\n                            output[field] = value;\r\n                        }\r\n                    }\r\n                });\r\n                delete source[circularReferenceCheck];\r\n                return output;\r\n            }\r\n            function _serializeArray(sources, name) {\r\n                var output;\r\n                if (!!sources) {\r\n                    if (!isArray(sources)) {\r\n                        _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, 54 /* _eInternalMessageId.ItemNotInArray */, \"This field was specified as an array in the contract but the item is not an array.\\r\\n\", { name: name }, true);\r\n                    }\r\n                    else {\r\n                        output = [];\r\n                        for (var i = 0; i < sources[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n                            var source = sources[i];\r\n                            var item = _serializeObject(source, name + \"[\" + i + \"]\");\r\n                            output[_DYN_PUSH /* @min:%2epush */](item);\r\n                        }\r\n                    }\r\n                }\r\n                return output;\r\n            }\r\n            function _serializeStringMap(map, expectedType, name) {\r\n                var output;\r\n                if (map) {\r\n                    output = {};\r\n                    objForEachKey(map, function (field, value) {\r\n                        if (expectedType === \"string\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else if (!value[_DYN_TO_STRING /* @min:%2etoString */]) {\r\n                                output[field] = \"invalid field: toString() is not defined.\";\r\n                            }\r\n                            else {\r\n                                output[field] = value[_DYN_TO_STRING /* @min:%2etoString */]();\r\n                            }\r\n                        }\r\n                        else if (expectedType === \"number\") {\r\n                            if (value === undefined) {\r\n                                output[field] = \"undefined\";\r\n                            }\r\n                            else if (value === null) {\r\n                                output[field] = \"null\";\r\n                            }\r\n                            else {\r\n                                var num = parseFloat(value);\r\n                                output[field] = num;\r\n                            }\r\n                        }\r\n                        else {\r\n                            output[field] = \"invalid field: \" + name + \" is of unknown type.\";\r\n                            _throwInternal(logger, 1 /* eLoggingSeverity.CRITICAL */, output[field], null, true);\r\n                        }\r\n                    });\r\n                }\r\n                return output;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.serialize.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n//# sourceMappingURL=Serializer.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_CONCAT, _DYN_LENGTH } from \"../../__DynamicConstants\";\r\n// (Magic number) DJB algorithm can't work on shorter strings (results in poor distribution\r\nvar MIN_INPUT_LENGTH = 8;\r\nvar HashCodeScoreGenerator = /** @class */ (function () {\r\n    function HashCodeScoreGenerator() {\r\n    }\r\n    HashCodeScoreGenerator.prototype.getHashCodeScore = function (key) {\r\n        var score = this.getHashCode(key) / HashCodeScoreGenerator.INT_MAX_VALUE;\r\n        return score * 100;\r\n    };\r\n    HashCodeScoreGenerator.prototype.getHashCode = function (input) {\r\n        if (input === \"\") {\r\n            return 0;\r\n        }\r\n        while (input[_DYN_LENGTH /* @min:%2elength */] < MIN_INPUT_LENGTH) {\r\n            input = input[_DYN_CONCAT /* @min:%2econcat */](input);\r\n        }\r\n        // 5381 is a magic number: http://stackoverflow.com/questions/10696223/reason-for-5381-number-in-djb-hash-function\r\n        var hash = 5381;\r\n        for (var i = 0; i < input[_DYN_LENGTH /* @min:%2elength */]; ++i) {\r\n            hash = ((hash << 5) + hash) + input.charCodeAt(i);\r\n            // 'hash' is of number type which means 53 bit integer (http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types-number-type)\r\n            // 'hash & hash' will keep it 32 bit integer - just to make it clearer what the result is.\r\n            hash = hash & hash;\r\n        }\r\n        return Math.abs(hash);\r\n    };\r\n    // We're using 32 bit math, hence max value is (2^31 - 1)\r\n    HashCodeScoreGenerator.INT_MAX_VALUE = 2147483647;\r\n    return HashCodeScoreGenerator;\r\n}());\r\nexport { HashCodeScoreGenerator };\r\n//# sourceMappingURL=HashCodeScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ContextTagKeys } from \"@microsoft/applicationinsights-common\";\r\nimport { _DYN_GET_HASH_CODE_SCORE, _DYN_TAGS, _DYN_TRACE_ID } from \"../../__DynamicConstants\";\r\nimport { HashCodeScoreGenerator } from \"./HashCodeScoreGenerator\";\r\nvar SamplingScoreGenerator = /** @class */ (function () {\r\n    function SamplingScoreGenerator() {\r\n        var _self = this;\r\n        var hashCodeGenerator = new HashCodeScoreGenerator();\r\n        var keys = new ContextTagKeys();\r\n        _self.getSamplingScore = function (item) {\r\n            var score = 0;\r\n            if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.userId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.userId]);\r\n            }\r\n            else if (item.ext && item.ext.user && item.ext.user.id) {\r\n                score = hashCodeGenerator[_DYN_GET_HASH_CODE_SCORE /* @min:%2egetHashCodeScore */](item.ext.user.id);\r\n            }\r\n            else if (item[_DYN_TAGS /* @min:%2etags */] && item[_DYN_TAGS /* @min:%2etags */][keys.operationId]) { // search in tags first, then ext\r\n                score = hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS /* @min:%2etags */][keys.operationId]);\r\n            }\r\n            else if (item.ext && item.ext.telemetryTrace && item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]) {\r\n                score = hashCodeGenerator.getHashCodeScore(item.ext.telemetryTrace[_DYN_TRACE_ID /* @min:%2etraceID */]);\r\n            }\r\n            else {\r\n                // tslint:disable-next-line:insecure-random\r\n                score = (Math.random() * 100);\r\n            }\r\n            return score;\r\n        };\r\n    }\r\n    return SamplingScoreGenerator;\r\n}());\r\nexport { SamplingScoreGenerator };\r\n//# sourceMappingURL=SamplingScoreGenerator.js.map","/*\n * Application Insights JavaScript SDK - Channel, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { Metric } from \"@microsoft/applicationinsights-common\";\r\nimport { safeGetLogger } from \"@microsoft/applicationinsights-core-js\";\r\nimport { _DYN_DATA_TYPE, _DYN_SAMPLE_RATE } from \"../__DynamicConstants\";\r\nimport { SamplingScoreGenerator } from \"./SamplingScoreGenerators/SamplingScoreGenerator\";\r\nvar Sample = /** @class */ (function () {\r\n    function Sample(sampleRate, logger) {\r\n        // We're using 32 bit math, hence max value is (2^31 - 1)\r\n        this.INT_MAX_VALUE = 2147483647;\r\n        var _logger = logger || safeGetLogger(null);\r\n        if (sampleRate > 100 || sampleRate < 0) {\r\n            _logger.throwInternal(2 /* eLoggingSeverity.WARNING */, 58 /* _eInternalMessageId.SampleRateOutOfRange */, \"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.\", { samplingRate: sampleRate }, true);\r\n            sampleRate = 100;\r\n        }\r\n        this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */] = sampleRate;\r\n        this.samplingScoreGenerator = new SamplingScoreGenerator();\r\n    }\r\n    /**\r\n    * Determines if an envelope is sampled in (i.e. will be sent) or not (i.e. will be dropped).\r\n    */\r\n    Sample.prototype.isSampledIn = function (envelope) {\r\n        var samplingPercentage = this[_DYN_SAMPLE_RATE /* @min:%2esampleRate */]; // 0 - 100\r\n        var isSampledIn = false;\r\n        if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n            return true;\r\n        }\r\n        else if (envelope.baseType === Metric[_DYN_DATA_TYPE /* @min:%2edataType */]) {\r\n            // exclude MetricData telemetry from sampling\r\n            return true;\r\n        }\r\n        isSampledIn = this.samplingScoreGenerator.getSamplingScore(envelope) < samplingPercentage;\r\n        return isSampledIn;\r\n    };\r\n    return Sample;\r\n}());\r\nexport { Sample };\r\n//# sourceMappingURL=Sample.js.map","/*\n * Application Insights JavaScript SDK - Common, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { arrReduce, objKeys, strEndsWith } from \"@microsoft/applicationinsights-core-js\";\r\nimport { DEFAULT_BREEZE_ENDPOINT } from \"./Constants\";\r\nimport { _DYN_INGESTIONENDPOINT, _DYN_LENGTH, _DYN_SPLIT, _DYN_TO_LOWER_CASE } from \"./__DynamicConstants\";\r\nvar _FIELDS_SEPARATOR = \";\";\r\nvar _FIELD_KEY_VALUE_SEPARATOR = \"=\";\r\nexport function parseConnectionString(connectionString) {\r\n    if (!connectionString) {\r\n        return {};\r\n    }\r\n    var kvPairs = connectionString[_DYN_SPLIT /* @min:%2esplit */](_FIELDS_SEPARATOR);\r\n    var result = arrReduce(kvPairs, function (fields, kv) {\r\n        var kvParts = kv[_DYN_SPLIT /* @min:%2esplit */](_FIELD_KEY_VALUE_SEPARATOR);\r\n        if (kvParts[_DYN_LENGTH /* @min:%2elength */] === 2) { // only save fields with valid formats\r\n            var key = kvParts[0][_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n            var value = kvParts[1];\r\n            fields[key] = value;\r\n        }\r\n        return fields;\r\n    }, {});\r\n    if (objKeys(result)[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // this is a valid connection string, so parse the results\r\n        if (result.endpointsuffix) {\r\n            // apply the default endpoints\r\n            var locationPrefix = result.location ? result.location + \".\" : \"\";\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\r\n        }\r\n        // apply user override endpoint or the default endpoints\r\n        result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] || DEFAULT_BREEZE_ENDPOINT;\r\n        if (strEndsWith(result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */], \"/\")) {\r\n            result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */] = result[_DYN_INGESTIONENDPOINT /* @min:%2eingestionendpoint */].slice(0, -1);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport var ConnectionStringParser = {\r\n    parse: parseConnectionString\r\n};\r\n//# sourceMappingURL=ConnectionStringParser.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nvar _a, _b;\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\nimport { DEFAULT_BREEZE_PATH, parseConnectionString } from \"@microsoft/applicationinsights-common\";\r\nimport { AppInsightsCore, cfgDfValidate, createDynamicConfig, onConfigChange, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nimport { createSyncPromise, doAwaitResponse } from \"@nevware21/ts-async\";\r\nimport { isNullOrUndefined, isPromiseLike, isString, objDefine, throwError } from \"@nevware21/ts-utils\";\r\nimport { _DYN_CONNECTION_STRING, _DYN_ENDPOINT_URL, _DYN_INSTRUMENTATION_KEY, _DYN_USER_OVERRIDE_ENDPOI0 } from \"./__DynamicConstants\";\r\nvar UNDEFINED_VALUE = undefined;\r\nvar defaultConfigValues = (_a = {\r\n        diagnosticLogInterval: cfgDfValidate(_chkDiagLevel, 10000)\r\n    },\r\n    _a[_DYN_CONNECTION_STRING /* @min:connectionString */] = UNDEFINED_VALUE,\r\n    _a.endpointUrl = UNDEFINED_VALUE,\r\n    _a[_DYN_INSTRUMENTATION_KEY /* @min:instrumentationKey */] = UNDEFINED_VALUE,\r\n    _a.featureOptIn = (_b = {},\r\n        _b[\"zipPayload\"] = { mode: 1 /* FeatureOptInMode.none */ },\r\n        _b),\r\n    _a.extensionConfig = {},\r\n    _a);\r\nfunction _chkDiagLevel(value) {\r\n    // Make sure we have a value > 0\r\n    return value && value > 0;\r\n}\r\n/**\r\n * @export\r\n */\r\nvar ApplicationInsights = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ApplicationInsights.\r\n     * @param config - The configuration to use for this ApplicationInsights instance\r\n     */\r\n    function ApplicationInsights(config) {\r\n        var core = new AppInsightsCore();\r\n        var _config;\r\n        // initialize the queue and config in case they are undefined\r\n        if (isNullOrUndefined(config) ||\r\n            (isNullOrUndefined(config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */]) && isNullOrUndefined(config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */]))) {\r\n            throwError(\"Invalid input configuration\");\r\n        }\r\n        dynamicProto(ApplicationInsights, this, function (_self) {\r\n            // Define _self.config\r\n            objDefine(_self, \"config\", {\r\n                g: function () { return _config; }\r\n            });\r\n            _initialize();\r\n            _self.initialize = _initialize;\r\n            _self.track = _track;\r\n            proxyFunctions(_self, core, [\r\n                \"flush\",\r\n                \"pollInternalLogs\",\r\n                \"stopPollingInternalLogs\",\r\n                \"unload\",\r\n                \"getPlugin\",\r\n                \"addPlugin\",\r\n                \"evtNamespace\",\r\n                \"addUnloadCb\",\r\n                \"onCfgChange\",\r\n                \"getTraceCtx\",\r\n                \"updateCfg\",\r\n                \"addTelemetryInitializer\"\r\n            ]);\r\n            function _initialize() {\r\n                var cfgHandler = createDynamicConfig(config || {}, defaultConfigValues);\r\n                _config = cfgHandler.cfg;\r\n                core.addUnloadHook(onConfigChange(cfgHandler, function () {\r\n                    var configCs = _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */];\r\n                    if (isPromiseLike(configCs)) {\r\n                        var ikeyPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var ikey = _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                                if (!res.rejected && curCs) {\r\n                                    // replace cs with resolved values in case of circular promises\r\n                                    _config[_DYN_CONNECTION_STRING /* @min:%2econnectionString */] = curCs;\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    ikey = resolvedCs.instrumentationkey || ikey;\r\n                                }\r\n                                resolve(ikey);\r\n                            });\r\n                        });\r\n                        var urlPromise = createSyncPromise(function (resolve, reject) {\r\n                            doAwaitResponse(configCs, function (res) {\r\n                                var curCs = res.value;\r\n                                var url = _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                                if (!res.rejected && curCs) {\r\n                                    var resolvedCs = parseConnectionString(curCs);\r\n                                    var ingest = resolvedCs.ingestionendpoint;\r\n                                    url = ingest ? ingest + DEFAULT_BREEZE_PATH : url;\r\n                                }\r\n                                resolve(url);\r\n                            });\r\n                        });\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = ikeyPromise;\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] || urlPromise;\r\n                    }\r\n                    if (isString(configCs)) {\r\n                        var cs = parseConnectionString(configCs);\r\n                        var ingest = cs.ingestionendpoint;\r\n                        _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] : (ingest + DEFAULT_BREEZE_PATH); // only add /v2/track when from connectionstring\r\n                        _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */] = cs.instrumentationkey || _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                    }\r\n                    // userOverrideEndpointUrl have the highest priority\r\n                    _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */] = _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] ? _config[_DYN_USER_OVERRIDE_ENDPOI0 /* @min:%2euserOverrideEndpointUrl */] : _config[_DYN_ENDPOINT_URL /* @min:%2eendpointUrl */];\r\n                }));\r\n                // initialize core\r\n                core.initialize(_config, [new Sender()]);\r\n            }\r\n        });\r\n        function _track(item) {\r\n            if (item) {\r\n                // to pass sender.processTelemetry()\r\n                item.baseData = item.baseData || {};\r\n                item.baseType = item.baseType || \"EventData\";\r\n            }\r\n            core.track(item);\r\n        }\r\n    }\r\n// Removed Stub for ApplicationInsights.prototype.initialize.\r\n// Removed Stub for ApplicationInsights.prototype.track.\r\n// Removed Stub for ApplicationInsights.prototype.flush.\r\n// Removed Stub for ApplicationInsights.prototype.pollInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.stopPollingInternalLogs.\r\n// Removed Stub for ApplicationInsights.prototype.unload.\r\n// Removed Stub for ApplicationInsights.prototype.getPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.addPlugin.\r\n// Removed Stub for ApplicationInsights.prototype.evtNamespace.\r\n// Removed Stub for ApplicationInsights.prototype.addUnloadCb.\r\n// Removed Stub for ApplicationInsights.prototype.getTraceCtx.\r\n// Removed Stub for ApplicationInsights.prototype.addTelemetryInitializer.\r\n// Removed Stub for ApplicationInsights.prototype.updateCfg.\r\n// Removed Stub for ApplicationInsights.prototype.onCfgChange.\r\n    // This is a workaround for an IE bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    ApplicationInsights.__ieDyn=1;\n\n    return ApplicationInsights;\r\n}());\r\nexport { ApplicationInsights };\r\nexport { AppInsightsCore, arrForEach, isNullOrUndefined, throwError, proxyFunctions } from \"@microsoft/applicationinsights-core-js\";\r\nexport { SeverityLevel } from \"@microsoft/applicationinsights-common\";\r\nexport { Sender } from \"@microsoft/applicationinsights-channel-js\";\r\n//# sourceMappingURL=index.js.map","/*\n * Application Insights JavaScript Web SDK - Basic, 3.3.11\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES5 which can result in a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 6\r\nexport var _DYN_CONNECTION_STRING = \"connectionString\"; // Count: 4\r\nexport var _DYN_ENDPOINT_URL = \"endpointUrl\"; // Count: 5\r\nexport var _DYN_USER_OVERRIDE_ENDPOI0 = \"userOverrideEndpointUrl\"; // Count: 5\r\n//# sourceMappingURL=__DynamicConstants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar _a;\r\nimport { getGlobal, objCreate, objHasOwnProperty, throwTypeError } from \"@nevware21/ts-utils\";\r\n;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!objHasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && objHasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || objHasOwnProperty(target, funcName)) && funcName !== str__Proto && funcName !== Prototype);\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throwTypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = objCreate(null);\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = objCreate(null);\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && objHasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || objCreate(null);\r\n        instFunc = (instFuncTable[proto[DynClassName]] || objCreate(null))[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !objHasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || objCreate(null);\r\n        if (!_isObjectOrArrayPrototype(instFuncTable)) {\r\n            var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || objCreate(null)); // fetch and assign if as it may not exist yet\r\n            // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n            }\r\n            if (!_isObjectOrArrayPrototype(instFuncs_1)) {\r\n                _forEachProp(target, function (name) {\r\n                    // Only add overridden functions\r\n                    if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                        // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                        instFuncs_1[name] = target[name];\r\n                        delete target[name];\r\n                        // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                        if (!objHasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                            proto[name] = _createDynamicPrototype(proto, name);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (objHasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nexport default function dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!objHasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (objHasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\r\n//# sourceMappingURL=DynamicProto.js.map","/*!\n * NevWare21 Solutions LLC - ts-async, 0.5.5\n * https://github.com/nevware21/ts-async\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\nimport { isPromiseLike, objDefineProperties, getDocument, createCachedValue, safe, getInst, dumpObj, arrSlice, iterForOf, objDefineProp, hasSymbol, getKnownSymbol, isFunction, throwTypeError, isUndefined, scheduleTimeout, isNode, getWindow, getGlobal, objDefine, objToString, isArray, arrForEach, isIterable, createCustomError, isNumber, scheduleIdleCallback, utcNow, getLength, isIterator, fnCall, arrIndexOf } from '@nevware21/ts-utils';\n\nvar STR_PROMISE = \"Promise\";\nvar DONE = \"done\";\nvar VALUE = \"value\";\nvar RETURN = \"return\";\nvar REJECTED = \"rejected\";\n\nfunction doAwaitResponse(value, cb) {\n    return doAwait(value, function (value) {\n        return cb ? cb({\n            status: \"fulfilled\",\n            rejected: false,\n            value: value\n        }) : value;\n    }, function (reason) {\n        return cb ? cb({\n            status: REJECTED,\n            rejected: true,\n            reason: reason\n        }) : reason;\n    });\n}\nfunction doAwait(value, resolveFn, rejectFn, finallyFn) {\n    var result = value;\n    try {\n        if (isPromiseLike(value)) {\n            if (resolveFn || rejectFn) {\n                result = value.then(resolveFn, rejectFn);\n            }\n        }\n        else {\n            try {\n                if (resolveFn) {\n                    result = resolveFn(value);\n                }\n            }\n            catch (err) {\n                if (rejectFn) {\n                    result = rejectFn(err);\n                }\n                else {\n                    throw err;\n                }\n            }\n        }\n    }\n    finally {\n        if (finallyFn) {\n            doFinally(result, finallyFn);\n        }\n    }\n    return result;\n}\nfunction doFinally(value, finallyFn) {\n    var result = value;\n    if (finallyFn) {\n        if (isPromiseLike(value)) {\n            if (value.finally) {\n                result = value.finally(finallyFn);\n            }\n            else {\n                result = value.then(function (value) {\n                    finallyFn();\n                    return value;\n                }, function (reason) {\n                    finallyFn();\n                    throw reason;\n                });\n            }\n        }\n        else {\n            finallyFn();\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n\nvar _debugState;\nvar _debugResult;\nvar _debugHandled;\nvar _promiseDebugEnabled = false;\nfunction _addDebugState$1(thePromise, stateFn, resultFn, handledFn) {\n    _debugState = _debugState || { toString: function () { return \"[[PromiseState]]\"; } };\n    _debugResult = _debugResult || { toString: function () { return \"[[PromiseResult]]\"; } };\n    _debugHandled = _debugHandled || { toString: function () { return \"[[PromiseIsHandled]]\"; } };\n    var props = {};\n    props[_debugState] = { get: stateFn };\n    props[_debugResult] = { get: resultFn };\n    props[_debugHandled] = { get: handledFn };\n    objDefineProperties(thePromise, props);\n}\nfunction setPromiseDebugState(enabled, logger) {\n    _promiseDebugEnabled = enabled;\n}\n\nvar STRING_STATES = [\n    \"pending\", \"resolving\", \"resolved\", REJECTED\n];\n\nvar DISPATCH_EVENT = \"dispatchEvent\";\nvar _hasInitEvent;\nfunction _hasInitEventFn(doc) {\n    var evt;\n    if (doc && doc.createEvent) {\n        evt = doc.createEvent(\"Event\");\n    }\n    return (!!evt && evt.initEvent);\n}\nfunction emitEvent(target, evtName, populateEvent, useNewEvent) {\n    var doc = getDocument();\n    !_hasInitEvent && (_hasInitEvent = createCachedValue(!!safe(_hasInitEventFn, [doc]).v));\n    var theEvt = _hasInitEvent.v ? doc.createEvent(\"Event\") : (useNewEvent ? new Event(evtName) : {});\n    populateEvent && populateEvent(theEvt);\n    if (_hasInitEvent.v) {\n        theEvt.initEvent(evtName, false, true);\n    }\n    if (theEvt && target[DISPATCH_EVENT]) {\n        target[DISPATCH_EVENT](theEvt);\n    }\n    else {\n        var handler = target[\"on\" + evtName];\n        if (handler) {\n            handler(theEvt);\n        }\n        else {\n            var theConsole = getInst(\"console\");\n            theConsole && (theConsole[\"error\"] || theConsole[\"log\"])(evtName, dumpObj(theEvt));\n        }\n    }\n}\n\nvar NODE_UNHANDLED_REJECTION = \"unhandledRejection\";\nvar UNHANDLED_REJECTION = NODE_UNHANDLED_REJECTION.toLowerCase();\nvar _currentPromiseId = [];\nvar _uniquePromiseId = 0;\nvar _unhandledRejectionTimeout = 10;\nvar _aggregationError;\nvar _hasPromiseRejectionEvent;\nfunction dumpFnObj(value) {\n    if (isFunction(value)) {\n        return value.toString();\n    }\n    return dumpObj(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAggregationError(values) {\n    !_aggregationError && (_aggregationError = createCachedValue(safe(getInst, [\"AggregationError\"]).v || createCustomError(\"AggregationError\", function (self, args) {\n        self.errors = args[0];\n    })));\n    return new _aggregationError.v(values);\n}\nfunction _createPromise(newPromise, processor, executor) {\n    var additionalArgs = arrSlice(arguments, 3);\n    var _state = 0 ;\n    var _hasResolved = false;\n    var _settledValue;\n    var _queue = [];\n    var _id = _uniquePromiseId++;\n    var _parentId = _currentPromiseId.length > 0 ? _currentPromiseId[_currentPromiseId.length - 1] : undefined;\n    var _handled = false;\n    var _unHandledRejectionHandler = null;\n    var _thePromise;\n    function _then(onResolved, onRejected) {\n        try {\n            _currentPromiseId.push(_id);\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            var thenPromise = newPromise(function (resolve, reject) {\n                _queue.push(function () {\n                    try {\n                        var handler = _state === 2  ? onResolved : onRejected;\n                        var value = isUndefined(handler) ? _settledValue : (isFunction(handler) ? handler(_settledValue) : handler);\n                        if (isPromiseLike(value)) {\n                            value.then(resolve, reject);\n                        }\n                        else if (handler) {\n                            resolve(value);\n                        }\n                        else if (_state === 3 ) {\n                            reject(value);\n                        }\n                        else {\n                            resolve(value);\n                        }\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                });\n                if (_hasResolved) {\n                    _processQueue();\n                }\n            }, additionalArgs);\n            return thenPromise;\n        }\n        finally {\n            _currentPromiseId.pop();\n        }\n    }\n    function _catch(onRejected) {\n        return _then(undefined, onRejected);\n    }\n    function _finally(onFinally) {\n        var thenFinally = onFinally;\n        var catchFinally = onFinally;\n        if (isFunction(onFinally)) {\n            thenFinally = function (value) {\n                onFinally && onFinally();\n                return value;\n            };\n            catchFinally = function (reason) {\n                onFinally && onFinally();\n                throw reason;\n            };\n        }\n        return _then(thenFinally, catchFinally);\n    }\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    function _processQueue() {\n        if (_queue.length > 0) {\n            var pending = _queue.slice();\n            _queue = [];\n            _handled = true;\n            _unHandledRejectionHandler && _unHandledRejectionHandler.cancel();\n            _unHandledRejectionHandler = null;\n            processor(pending);\n        }\n    }\n    function _createSettleIfFn(newState, allowState) {\n        return function (theValue) {\n            if (_state === allowState) {\n                if (newState === 2  && isPromiseLike(theValue)) {\n                    _state = 1 ;\n                    theValue.then(_createSettleIfFn(2 , 1 ), _createSettleIfFn(3 , 1 ));\n                    return;\n                }\n                _state = newState;\n                _hasResolved = true;\n                _settledValue = theValue;\n                _processQueue();\n                if (!_handled && newState === 3  && !_unHandledRejectionHandler) {\n                    _unHandledRejectionHandler = scheduleTimeout(_notifyUnhandledRejection, _unhandledRejectionTimeout);\n                }\n            }\n        };\n    }\n    function _notifyUnhandledRejection() {\n        if (!_handled) {\n            _handled = true;\n            if (isNode()) {\n                process.emit(NODE_UNHANDLED_REJECTION, _settledValue, _thePromise);\n            }\n            else {\n                var gbl = getWindow() || getGlobal();\n                !_hasPromiseRejectionEvent && (_hasPromiseRejectionEvent = createCachedValue(safe((getInst), [STR_PROMISE + \"RejectionEvent\"]).v));\n                emitEvent(gbl, UNHANDLED_REJECTION, function (theEvt) {\n                    objDefine(theEvt, \"promise\", { g: function () { return _thePromise; } });\n                    theEvt.reason = _settledValue;\n                    return theEvt;\n                }, !!_hasPromiseRejectionEvent.v);\n            }\n        }\n    }\n    _thePromise = {\n        then: _then,\n        \"catch\": _catch,\n        finally: _finally\n    };\n    objDefineProp(_thePromise, \"state\", {\n        get: _strState\n    });\n    if (_promiseDebugEnabled) {\n        _addDebugState$1(_thePromise, _strState, function () { return objToString(_settledValue); }, function () { return _handled; });\n    }\n    if (hasSymbol()) {\n        _thePromise[getKnownSymbol(11 )] = \"IPromise\";\n    }\n    function _toString() {\n        return \"IPromise\" + (_promiseDebugEnabled ? \"[\" + _id + (!isUndefined(_parentId) ? (\":\" + _parentId) : \"\") + \"]\" : \"\") + \" \" + _strState() + (_hasResolved ? (\" - \" + dumpFnObj(_settledValue)) : \"\") + (\"\");\n    }\n    _thePromise.toString = _toString;\n    (function _initialize() {\n        if (!isFunction(executor)) {\n            throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpFnObj(executor));\n        }\n        var _rejectFn = _createSettleIfFn(3 , 0 );\n        try {\n            executor.call(_thePromise, _createSettleIfFn(2 , 0 ), _rejectFn);\n        }\n        catch (e) {\n            _rejectFn(e);\n        }\n    })();\n    return _thePromise;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllPromise(newPromise) {\n    return function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            try {\n                var values_1 = [];\n                var pending_1 = 1;\n                iterForOf(input, function (item, idx) {\n                    if (item) {\n                        pending_1++;\n                        doAwait(item, function (value) {\n                            values_1[idx] = value;\n                            if (--pending_1 === 0) {\n                                resolve(values_1);\n                            }\n                        }, reject);\n                    }\n                });\n                pending_1--;\n                if (pending_1 === 0) {\n                    resolve(values_1);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createResolvedPromise(newPromise) {\n    return function (value) {\n        var additionalArgs = arrSlice(arguments, 1);\n        if (isPromiseLike(value)) {\n            return value;\n        }\n        return newPromise(function (resolve) {\n            resolve(value);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRejectedPromise(newPromise) {\n    return function (reason) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (_resolve, reject) {\n            reject(reason);\n        }, additionalArgs);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAllSettledPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var values = [];\n            var pending = 1;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (value.rejected) {\n                        values[idx] = {\n                            status: REJECTED,\n                            reason: value.reason\n                        };\n                    }\n                    else {\n                        values[idx] = {\n                            status: \"fulfilled\",\n                            value: value.value\n                        };\n                    }\n                    if (--pending === 0) {\n                        resolve(values);\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0) {\n                    resolve(values);\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createRacePromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var isDone = false;\n            function processItem(item) {\n                doAwaitResponse(item, function (value) {\n                    if (!isDone) {\n                        isDone = true;\n                        if (value.rejected) {\n                            reject(value.reason);\n                        }\n                        else {\n                            resolve(value.value);\n                        }\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createAnyPromise(newPromise) {\n    return createCachedValue(function (input) {\n        var additionalArgs = arrSlice(arguments, 1);\n        return newPromise(function (resolve, reject) {\n            var theErros = [];\n            var pending = 1;\n            var isDone = false;\n            function processItem(item, idx) {\n                pending++;\n                doAwaitResponse(item, function (value) {\n                    if (!value.rejected) {\n                        isDone = true;\n                        resolve(value.value);\n                        return;\n                    }\n                    else {\n                        theErros[idx] = value.reason;\n                    }\n                    if (--pending === 0 && !isDone) {\n                        reject(_createAggregationError(theErros));\n                    }\n                });\n            }\n            try {\n                if (isArray(input)) {\n                    arrForEach(input, processItem);\n                }\n                else if (isIterable(input)) {\n                    iterForOf(input, processItem);\n                }\n                else {\n                    throwTypeError(\"Input is not an iterable\");\n                }\n                pending--;\n                if (pending === 0 && !isDone) {\n                    reject(_createAggregationError(theErros));\n                }\n            }\n            catch (e) {\n                reject(e);\n            }\n        }, additionalArgs);\n    });\n}\n\nfunction syncItemProcessor(pending) {\n    arrForEach(pending, function (fn) {\n        try {\n            fn();\n        }\n        catch (e) {\n        }\n    });\n}\nfunction timeoutItemProcessor(timeout) {\n    var callbackTimeout = isNumber(timeout) ? timeout : 0;\n    return function (pending) {\n        scheduleTimeout(function () {\n            syncItemProcessor(pending);\n        }, callbackTimeout);\n    };\n}\nfunction idleItemProcessor(timeout) {\n    var options;\n    if (timeout >= 0) {\n        options = {\n            timeout: +timeout\n        };\n    }\n    return function (pending) {\n        scheduleIdleCallback(function (deadline) {\n            syncItemProcessor(pending);\n        }, options);\n    };\n}\n\nvar _allAsyncSettledCreator;\nvar _raceAsyncCreator;\nvar _anyAsyncCreator;\nfunction createAsyncPromise(executor, timeout) {\n    return _createPromise(createAsyncPromise, timeoutItemProcessor(timeout), executor, timeout);\n}\nvar createAsyncAllPromise = ( /*#__PURE__*/_createAllPromise(createAsyncPromise));\nvar createAsyncResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createAsyncPromise));\nvar createAsyncRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createAsyncPromise));\nfunction createAsyncAllSettledPromise(input, timeout) {\n    !_allAsyncSettledCreator && (_allAsyncSettledCreator = _createAllSettledPromise(createAsyncPromise));\n    return _allAsyncSettledCreator.v(input, timeout);\n}\nfunction createAsyncRacePromise(values, timeout) {\n    !_raceAsyncCreator && (_raceAsyncCreator = _createRacePromise(createAsyncPromise));\n    return _raceAsyncCreator.v(values, timeout);\n}\nfunction createAsyncAnyPromise(values, timeout) {\n    !_anyAsyncCreator && (_anyAsyncCreator = _createAnyPromise(createAsyncPromise));\n    return _anyAsyncCreator.v(values, timeout);\n}\n\nvar _promiseCls;\nvar _allCreator;\nvar _allNativeSettledCreator;\nvar _raceNativeCreator;\nvar _anyNativeCreator;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createNativePromiseHelper(name, func) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    if (_promiseCls.v && _promiseCls.v[name]) {\n        return createCachedValue(function (input, timeout) {\n            return createNativePromise(function (resolve, reject) {\n                _promiseCls.v[name](input).then(resolve, reject);\n            });\n        });\n    }\n    return func();\n}\nfunction createNativePromise(executor, timeout) {\n    !_promiseCls && (_promiseCls = createCachedValue((safe(getInst, [STR_PROMISE]).v) || null));\n    var PrmCls = _promiseCls.v;\n    if (!PrmCls) {\n        return createAsyncPromise(executor);\n    }\n    if (!isFunction(executor)) {\n        throwTypeError(STR_PROMISE + \": executor is not a function - \" + dumpObj(executor));\n    }\n    var _state = 0 ;\n    function _strState() {\n        return STRING_STATES[_state];\n    }\n    var thePromise = new PrmCls(function (resolve, reject) {\n        function _resolve(value) {\n            _state = 2 ;\n            resolve(value);\n        }\n        function _reject(reason) {\n            _state = 3 ;\n            reject(reason);\n        }\n        executor(_resolve, _reject);\n    });\n    objDefineProp(thePromise, \"state\", {\n        get: _strState\n    });\n    return thePromise;\n}\nfunction createNativeAllPromise(input, timeout) {\n    !_allCreator && (_allCreator = _createNativePromiseHelper(\"all\", function () { return createCachedValue(_createAllPromise(createNativePromise)); }));\n    return _allCreator.v(input, timeout);\n}\nvar createNativeResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createNativePromise));\nvar createNativeRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createNativePromise));\nfunction createNativeAllSettledPromise(input, timeout) {\n    !_allNativeSettledCreator && (_allNativeSettledCreator = _createNativePromiseHelper(\"allSettled\", function () { return _createAllSettledPromise(createNativePromise); }));\n    return _allNativeSettledCreator.v(input, timeout);\n}\nfunction createNativeRacePromise(values, timeout) {\n    !_raceNativeCreator && (_raceNativeCreator = _createNativePromiseHelper(\"race\", function () { return _createRacePromise(createNativePromise); }));\n    return _raceNativeCreator.v(values, timeout);\n}\nfunction createNativeAnyPromise(values, timeout) {\n    !_anyNativeCreator && (_anyNativeCreator = _createNativePromiseHelper(\"any\", function () { return _createAnyPromise(createNativePromise); }));\n    return _anyNativeCreator.v(values, timeout);\n}\n\nvar _allSyncSettledCreator;\nvar _raceSyncCreator;\nvar _anySyncCreator;\nfunction createSyncPromise(executor) {\n    return _createPromise(createSyncPromise, syncItemProcessor, executor);\n}\nvar createSyncAllPromise = ( /*#__PURE__*/_createAllPromise(createSyncPromise));\nvar createSyncResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createSyncPromise));\nvar createSyncRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createSyncPromise));\nfunction createSyncAllSettledPromise(input, timeout) {\n    !_allSyncSettledCreator && (_allSyncSettledCreator = _createAllSettledPromise(createSyncPromise));\n    return _allSyncSettledCreator.v(input, timeout);\n}\nfunction createSyncRacePromise(values, timeout) {\n    !_raceSyncCreator && (_raceSyncCreator = _createRacePromise(createSyncPromise));\n    return _raceSyncCreator.v(values, timeout);\n}\nfunction createSyncAnyPromise(values, timeout) {\n    !_anySyncCreator && (_anySyncCreator = _createAnyPromise(createSyncPromise));\n    return _anySyncCreator.v(values, timeout);\n}\n\nvar _defaultIdleTimeout;\nvar _allIdleSettledCreator;\nvar _raceIdleCreator;\nvar _anyIdleCreator;\nfunction setDefaultIdlePromiseTimeout(idleDeadline) {\n    _defaultIdleTimeout = idleDeadline;\n}\nvar setDefaultIdleTimeout = ( /*#__PURE__*/_pureAssign(setDefaultIdlePromiseTimeout));\nfunction createIdlePromise(executor, timeout) {\n    var theTimeout = isUndefined(timeout) ? _defaultIdleTimeout : timeout;\n    return _createPromise(createIdlePromise, idleItemProcessor(theTimeout), executor, theTimeout);\n}\nvar createIdleAllPromise = ( /*#__PURE__*/_createAllPromise(createIdlePromise));\nvar createIdleResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createIdlePromise));\nvar createIdleRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createIdlePromise));\nfunction createIdleAllSettledPromise(input, timeout) {\n    !_allIdleSettledCreator && (_allIdleSettledCreator = _createAllSettledPromise(createIdlePromise));\n    return _allIdleSettledCreator.v(input, timeout);\n}\nfunction createIdleRacePromise(values, timeout) {\n    !_raceIdleCreator && (_raceIdleCreator = _createRacePromise(createIdlePromise));\n    return _raceIdleCreator.v(values, timeout);\n}\nfunction createIdleAnyPromise(values, timeout) {\n    !_anyIdleCreator && (_anyIdleCreator = _createAnyPromise(createIdlePromise));\n    return _anyIdleCreator.v(values, timeout);\n}\n\nvar _promiseCreator;\nvar _allSettledCreator;\nvar _raceCreator;\nvar _anyCreator;\nfunction setCreatePromiseImpl(creator) {\n    _promiseCreator = creator ? createCachedValue(creator) : null;\n}\nfunction createPromise(executor, timeout) {\n    !_promiseCreator && (_promiseCreator = createCachedValue(createNativePromise));\n    return _promiseCreator.v.call(this, executor, timeout);\n}\nvar createAllPromise = ( /*#__PURE__*/_createAllPromise(createPromise));\nvar createResolvedPromise = ( /*#__PURE__*/_createResolvedPromise(createPromise));\nvar createRejectedPromise = ( /*#__PURE__*/_createRejectedPromise(createPromise));\nfunction createAllSettledPromise(input, timeout) {\n    !_allSettledCreator && (_allSettledCreator = _createAllSettledPromise(createPromise));\n    return _allSettledCreator.v(input, timeout);\n}\nfunction createRacePromise(values, timeout) {\n    !_raceCreator && (_raceCreator = _createRacePromise(createPromise));\n    return _raceCreator.v(values, timeout);\n}\nfunction createAnyPromise(values, timeout) {\n    !_anyCreator && (_anyCreator = _createAnyPromise(createPromise));\n    return _anyCreator.v(values, timeout);\n}\n\nfunction createTimeoutPromise(timeout, resolveReject, message) {\n    return createPromise(function (resolve, reject) {\n        scheduleTimeout(function () {\n            (resolveReject ? resolve : reject)(!isUndefined(message) ? message : \"Timeout of \" + timeout + \"ms exceeded\");\n        }, timeout);\n    });\n}\n\nfunction _doneChk(isDone, state, value, thisArg) {\n    var result = isDone;\n    state.res = value;\n    if (!result) {\n        if (state.isDone && isFunction(state.isDone)) {\n            return doAwait(state.isDone.call(thisArg, state), function (done) {\n                state.iter++;\n                return !!done;\n            });\n        }\n        else {\n            result = !!state.isDone;\n        }\n    }\n    state.iter++;\n    return result;\n}\nfunction doWhileAsync(callbackFn, isDoneFn, thisArg) {\n    var promise;\n    var resolve;\n    var reject = function (reason) {\n        isDone = true;\n        throw reason;\n    };\n    var isDone = false;\n    var state = {\n        st: utcNow(),\n        iter: 0,\n        isDone: isDoneFn || false\n    };\n    if (callbackFn) {\n        var _createPromise_1 = function () {\n            return createPromise(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n        };\n        var _handleAsyncDone_1 = function (done) {\n            isDone = !!done;\n            if (!isDone) {\n                _processNext_1();\n            }\n            else {\n                resolve(state.res);\n            }\n        };\n        var _processNext_1 = function () {\n            while (!isDone) {\n                try {\n                    var cbResult = callbackFn.call(thisArg, state);\n                    if (isPromiseLike(cbResult)) {\n                        promise = promise || _createPromise_1();\n                        doAwait(cbResult, function (res) {\n                            try {\n                                doAwait(_doneChk(isDone, state, res, thisArg), _handleAsyncDone_1, reject);\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                        }, reject);\n                        return promise;\n                    }\n                    else {\n                        var dnRes = _doneChk(isDone, state, cbResult, thisArg);\n                        if (isPromiseLike(dnRes)) {\n                            promise = promise || _createPromise_1();\n                            doAwait(dnRes, _handleAsyncDone_1, reject);\n                            return promise;\n                        }\n                        else {\n                            isDone = !!dnRes;\n                        }\n                    }\n                }\n                catch (e) {\n                    reject(e);\n                    return promise;\n                }\n            }\n            if (isDone && resolve) {\n                resolve(state.res);\n            }\n            return promise || state.res;\n        };\n        return _processNext_1();\n    }\n}\n\nfunction arrForEachAsync(theArray, callbackFn, thisArg) {\n    if (theArray) {\n        var len_1 = getLength(theArray);\n        if (len_1) {\n            var isDone = function (state) {\n                if (state.iter >= len_1 || state.res === -1) {\n                    return true;\n                }\n            };\n            return doWhileAsync(function (state) {\n                var idx = state.iter;\n                if (idx in theArray) {\n                    return callbackFn.call(thisArg || theArray, theArray[idx], idx, theArray);\n                }\n            }, isDone);\n        }\n    }\n}\n\nvar _iterSymbol;\nvar _iterAsyncSymbol;\nfunction iterForOfAsync(iter, callbackFn, thisArg) {\n    var err;\n    var iterResult;\n    var theIter = iter;\n    function onFailed(failed) {\n        err = { e: failed };\n        if (theIter.throw) {\n            iterResult = null;\n            theIter.throw(err);\n        }\n        throw failed;\n    }\n    function onFinally() {\n        try {\n            if (iterResult && !iterResult[DONE]) {\n                theIter[RETURN] && theIter[RETURN](iterResult);\n            }\n        }\n        finally {\n            if (err) {\n                throw err.e;\n            }\n        }\n    }\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterAsyncSymbol && (_iterAsyncSymbol = createCachedValue(getKnownSymbol(0 )));\n            theIter = iter[_iterAsyncSymbol.v] ? iter[_iterAsyncSymbol.v]() : null;\n            if (!theIter) {\n                !_iterSymbol && (_iterSymbol = createCachedValue(getKnownSymbol(3 )));\n                theIter = iter[_iterSymbol.v] ? iter[_iterSymbol.v]() : null;\n            }\n        }\n        if (theIter && isIterator(theIter)) {\n            var result = void 0;\n            try {\n                result = doWhileAsync(function (state) {\n                    return doAwait(theIter.next(), function (res) {\n                        iterResult = res;\n                        if (!res[DONE]) {\n                            return fnCall(callbackFn, thisArg || theIter, iterResult[VALUE], state.iter, theIter);\n                        }\n                    }, function (reason) {\n                        state.isDone = true;\n                        onFailed(reason);\n                    });\n                }, function (state) {\n                    if (!iterResult || iterResult[DONE] || state.res === -1) {\n                        onFinally();\n                        return true;\n                    }\n                }, thisArg || theIter);\n                if (isPromiseLike(result)) {\n                    result = doFinally(result.catch(onFailed), onFinally);\n                }\n                return result;\n            }\n            catch (failed) {\n                onFailed(failed);\n            }\n            finally {\n                if (result && !isPromiseLike(result)) {\n                    onFinally();\n                }\n            }\n        }\n    }\n}\n\nvar REJECT = \"reject\";\nvar REJECTED_ERROR = \"Rejected\";\nvar _schedulerId = 0;\nvar _debugName;\nvar _debugIntState;\nvar _customErrors = {};\nfunction _rejectDone() {\n}\nfunction _createError(type, evt, message) {\n    !_customErrors[type] && (_customErrors[type] = createCustomError(type));\n    var now = utcNow();\n    return new (_customErrors[type])(\"Task [\".concat(evt.id, \"] \").concat(message || \"\", \"- \").concat((evt.st ? \"Running\" : \"Waiting\"), \": \").concat(_calcTime(now, evt.st || evt.cr)));\n}\nfunction _calcTime(now, start) {\n    return ((now - start) || \"0\") + \" ms\";\n}\nfunction _abortStaleTasks(taskQueue, staleTimeoutPeriod) {\n    var now = utcNow();\n    var expired = now - staleTimeoutPeriod;\n    arrForEach(taskQueue, function (evt) {\n        if (evt && !evt.rj && (evt.st && evt.st < expired) || (!evt.st && evt.cr && evt.cr < expired)) {\n            evt && evt[REJECT](evt.rj || _createError(\"Aborted\", evt, \"Stale \"));\n        }\n    });\n}\nfunction _removeTask(queue, taskDetail) {\n    var idx = arrIndexOf(queue, taskDetail);\n    if (idx !== -1) {\n        queue.splice(idx, 1);\n    }\n}\nfunction _addDebugState(theScheduler, nameFn, stateFn) {\n    _debugName = _debugName || { toString: function () { return \"[[SchedulerName]]\"; } };\n    _debugIntState = _debugIntState || { toString: function () { return \"[[SchedulerState]]\"; } };\n    objDefineProp(theScheduler, _debugName, { get: nameFn });\n    objDefineProp(theScheduler, _debugIntState, { get: stateFn });\n}\nfunction createTaskScheduler(newPromise, name) {\n    var _theTask;\n    var _running = [];\n    var _waiting = [];\n    var _staleTimeoutPeriod = 600000;\n    var _staleTimeoutCheckPeriod = _staleTimeoutPeriod / 10;\n    var _taskCount = 0;\n    var _schedulerName = (name ? (name + \".\") : \"\") + _schedulerId++;\n    var _blockedTimer;\n    newPromise = newPromise || createPromise;\n    var _startBlockedTimer = function () {\n        var hasTasks = (getLength(_running) + getLength(_waiting)) > 0;\n        if (_staleTimeoutPeriod > 0) {\n            if (!_blockedTimer) {\n                _blockedTimer = scheduleTimeout(function () {\n                    _abortStaleTasks(_running, _staleTimeoutPeriod);\n                    _abortStaleTasks(_waiting, _staleTimeoutPeriod);\n                    _blockedTimer && (_blockedTimer.enabled = ((getLength(_running) + getLength(_waiting)) > 0));\n                }, _staleTimeoutCheckPeriod);\n                _blockedTimer.unref();\n            }\n            _blockedTimer && (_blockedTimer.enabled = hasTasks);\n        }\n    };\n    var _queueTask = function (startAction, taskName, timeout) {\n        var _a;\n        var taskId = _schedulerName + \".\" + _taskCount++;\n        if (taskName) {\n            taskId += \"-(\" + taskName + \")\";\n        }\n        var newTask = (_a = {\n                id: taskId,\n                cr: utcNow(),\n                to: timeout\n            },\n            _a[REJECT] = function (reason) {\n                newTask.rj = reason || _createError(REJECTED_ERROR, newTask);\n                newTask[REJECT] = _rejectDone;\n            },\n            _a);\n        if (!_theTask) {\n            newTask.p = newPromise(_runTask(newTask, startAction));\n        }\n        else {\n            newTask.p = _waitForPreviousTask(newTask, _theTask, startAction);\n        }\n        _theTask = newTask;\n        return newTask.p;\n    };\n    var _runTask = function (taskDetail, startAction) {\n        taskDetail.st = utcNow();\n        _running.push(taskDetail);\n        _startBlockedTimer();\n        return function (onTaskResolve, onTaskReject) {\n            var _promiseReject = function (reason) {\n                taskDetail.rj = taskDetail.rj || reason || _createError(REJECTED_ERROR, taskDetail);\n                taskDetail[REJECT] = _rejectDone;\n                _doCleanup(taskDetail);\n                onTaskResolve = null;\n                onTaskReject && onTaskReject(reason);\n                onTaskReject = null;\n            };\n            var taskId = taskDetail.id;\n            if (taskDetail.rj) {\n                _promiseReject(taskDetail.rj);\n            }\n            else {\n                taskDetail[REJECT] = _promiseReject;\n                try {\n                    var startResult = startAction(taskId);\n                    if (taskDetail.to && isPromiseLike(startResult)) {\n                        taskDetail.t = scheduleTimeout(function () {\n                            _promiseReject(_createError(\"Timeout\", taskDetail));\n                        }, taskDetail.to);\n                    }\n                    doAwait(startResult, function (theResult) {\n                        _doCleanup(taskDetail);\n                        try {\n                            onTaskResolve && onTaskResolve(theResult);\n                        }\n                        catch (e) {\n                            onTaskReject && onTaskReject(e);\n                        }\n                        onTaskReject = null;\n                        onTaskResolve = null;\n                    }, _promiseReject);\n                }\n                catch (e) {\n                    _promiseReject(e);\n                }\n            }\n        };\n    };\n    var _waitForPreviousTask = function (taskDetail, prevTask, startAction) {\n        _waiting.push(taskDetail);\n        _startBlockedTimer();\n        return newPromise(function (onWaitResolve, onWaitReject) {\n            doAwaitResponse(prevTask.p, function () {\n                _removeTask(_waiting, taskDetail);\n                _runTask(taskDetail, startAction)(onWaitResolve, onWaitReject);\n            });\n        });\n    };\n    var _doCleanup = function (taskDetail) {\n        _removeTask(_running, taskDetail);\n        taskDetail.t && taskDetail.t.cancel();\n        taskDetail.t = null;\n        if (_theTask && _theTask === taskDetail) {\n            _theTask = null;\n            if (getLength(_running) + getLength(_waiting) === 0) {\n                _blockedTimer && _blockedTimer.cancel();\n                _blockedTimer = null;\n            }\n        }\n    };\n    var theScheduler = {\n        idle: true,\n        queue: _queueTask,\n        setStaleTimeout: function (staleTimeout, staleCheckPeriod) {\n            _blockedTimer && _blockedTimer.cancel();\n            _blockedTimer = null;\n            _staleTimeoutPeriod = staleTimeout;\n            _staleTimeoutCheckPeriod = staleCheckPeriod || staleTimeout / 10;\n            _startBlockedTimer();\n        }\n    };\n    objDefine(theScheduler, \"idle\", {\n        g: function () {\n            return getLength(_running) + getLength(_waiting) === 0;\n        }\n    });\n    _addDebugState(theScheduler, function () { return _schedulerName; }, function () {\n        return {\n            l: _theTask,\n            r: _running,\n            w: _waiting\n        };\n    });\n    return theScheduler;\n}\n\nvar toStringTagSymbol = getKnownSymbol(11 );\nvar PolyPromise = ( /*#__PURE__*/(function () {\n    function PolyPromiseImpl(executor) {\n        this._$ = createAsyncPromise(executor);\n        if (toStringTagSymbol) {\n            this[toStringTagSymbol] = \"Promise\";\n        }\n        objDefineProp(this, \"state\", {\n            get: function () {\n                return this._$.state;\n            }\n        });\n    }\n    PolyPromiseImpl.all = createAsyncAllPromise;\n    PolyPromiseImpl.race = createAsyncRacePromise;\n    PolyPromiseImpl.any = createAsyncAnyPromise;\n    PolyPromiseImpl.reject = createAsyncRejectedPromise;\n    PolyPromiseImpl.resolve = createAsyncResolvedPromise;\n    PolyPromiseImpl.allSettled = createAsyncAllSettledPromise;\n    var theProto = PolyPromiseImpl.prototype;\n    theProto.then = function (onResolved, onRejected) {\n        return this._$.then(onResolved, onRejected);\n    };\n    theProto.catch = function (onRejected) {\n        return this._$.catch(onRejected);\n    };\n    theProto.finally = function (onfinally) {\n        return this._$.finally(onfinally);\n    };\n    return PolyPromiseImpl;\n}()));\n\nexport { PolyPromise, arrForEachAsync, createAllPromise, createAllSettledPromise, createAnyPromise, createAsyncAllPromise, createAsyncAllSettledPromise, createAsyncAnyPromise, createAsyncPromise, createAsyncRacePromise, createAsyncRejectedPromise, createAsyncResolvedPromise, createIdleAllPromise, createIdleAllSettledPromise, createIdleAnyPromise, createIdlePromise, createIdleRacePromise, createIdleRejectedPromise, createIdleResolvedPromise, createNativeAllPromise, createNativeAllSettledPromise, createNativeAnyPromise, createNativePromise, createNativeRacePromise, createNativeRejectedPromise, createNativeResolvedPromise, createPromise, createRacePromise, createRejectedPromise, createResolvedPromise, createSyncAllPromise, createSyncAllSettledPromise, createSyncAnyPromise, createSyncPromise, createSyncRacePromise, createSyncRejectedPromise, createSyncResolvedPromise, createTaskScheduler, createTimeoutPromise, doAwait, doAwaitResponse, doFinally, doWhileAsync, iterForOfAsync, setCreatePromiseImpl, setDefaultIdlePromiseTimeout, setDefaultIdleTimeout, setPromiseDebugState };\n//# sourceMappingURL=ts-async.js.map\n","/*! https://github.com/nevware21/ts-utils v0.12.5 */\n/*\n * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.\n * Licensed under the MIT license.\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureAssign(func1, func2) {\n    return func1 || func2;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _pureRef(value, name) {\n    return value[name];\n}\n\nvar UNDEF_VALUE = undefined;\nvar NULL_VALUE = null;\nvar EMPTY = \"\";\nvar FUNCTION = \"function\";\nvar OBJECT = \"object\";\nvar PROTOTYPE = \"prototype\";\nvar __PROTO__ = \"__proto__\";\nvar UNDEFINED = \"undefined\";\nvar CONSTRUCTOR = \"constructor\";\nvar SYMBOL = \"Symbol\";\nvar LENGTH = \"length\";\nvar NAME = \"name\";\nvar CALL = \"call\";\nvar TO_STRING = \"toString\";\nvar GET_OWN_PROPERTY_DESCRIPTOR = \"getOwnPropertyDescriptor\";\nvar GET_OWN_PROPERTY_NAMES = \"getOwnPropertyNames\";\nvar GET_OWN_PROPERTY_SYMBOLS = \"getOwnPropertySymbols\";\nvar ObjClass = ( /*#__PURE__*/_pureAssign(Object));\nvar ObjProto = ( /*#__PURE__*/_pureRef(ObjClass, PROTOTYPE));\nvar StrCls = ( /*#__PURE__*/_pureAssign(String));\nvar StrProto = ( /*#__PURE__*/_pureRef(StrCls, PROTOTYPE));\nvar MathCls = ( /*#__PURE__*/_pureAssign(Math));\nvar ArrCls = ( /*#__PURE__*/_pureAssign(Array));\nvar ArrProto = ( /*#__PURE__*/_pureRef(ArrCls, PROTOTYPE));\nvar ArrSlice = ( /*#__PURE__*/_pureRef(ArrProto, \"slice\"));\nvar NumberCls = ( /*#__PURE__*/_pureAssign(Number));\n\nvar POLYFILL_TAG = \"_polyfill\";\nvar POLYFILL_TYPE_NAME = \"__nw21$polytype__\";\nfunction _isPolyfill(obj) {\n    return !!(obj && obj[POLYFILL_TAG]);\n}\nfunction _isPolyfillType(obj, polyfillTypeName) {\n    return !!(obj && obj[POLYFILL_TYPE_NAME] === polyfillTypeName);\n}\n\nfunction safe(func, argArray) {\n    try {\n        return {\n            v: func.apply(this, argArray)\n        };\n    }\n    catch (e) {\n        return { e: e };\n    }\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGet(cb, defValue, argArray) {\n    var result = safe(cb, argArray);\n    return result.e ? defValue : result.v;\n}\n\nvar _primitiveTypes;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createIs(theType) {\n    return function (value) {\n        return typeof value === theType;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createIsWithPoly(theType) {\n    return function (value) {\n        return typeof value === theType || _isPolyfillType(value, theType);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createObjIs(theName) {\n    var theType = \"[object \" + theName + \"]\";\n    return function (value) {\n        return !!(value && objToString(value) === theType);\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objToString(value) {\n    return ObjProto[TO_STRING].call(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTypeof(value, theType) {\n    return typeof value === theType;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isUndefined(value) {\n    return typeof value === UNDEFINED || value === UNDEFINED;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictUndefined(arg) {\n    return arg === UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNullOrUndefined(value) {\n    return value === NULL_VALUE || isUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isStrictNullOrUndefined(value) {\n    return value === NULL_VALUE || value === UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isDefined(arg) {\n    return !!arg || arg !== UNDEF_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitive(value) {\n    return value === NULL_VALUE || isPrimitiveType(typeof value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPrimitiveType(theType) {\n    !_primitiveTypes && (_primitiveTypes = [\"string\", \"number\", \"boolean\", UNDEFINED, \"symbol\", \"bigint\"]);\n    return !!(theType !== OBJECT && _primitiveTypes.indexOf(theType) !== -1);\n}\nvar isString = ( /*#__PURE__*/_createIs(\"string\"));\nvar isFunction = ( /*#__PURE__*/_createIs(FUNCTION));\nvar isAsyncFunction = ( /*#__PURE__*/_createObjIs(\"AsyncFunction\"));\nvar isGenerator = ( /*#__PURE__*/_createObjIs(\"GeneratorFunction\"));\nvar isAsyncGenerator = ( /*#__PURE__*/_createObjIs(\"AsyncGeneratorFunction\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isObject(value) {\n    if (!value && isNullOrUndefined(value)) {\n        return false;\n    }\n    return !!value && typeof value === OBJECT;\n}\nvar isArray = ( /* #__PURE__*/_pureRef(ArrCls, \"isArray\"));\nvar isDate = ( /*#__PURE__*/_createObjIs(\"Date\"));\nvar isNumber = ( /*#__PURE__*/_createIs(\"number\"));\nvar isBoolean = ( /*#__PURE__*/_createIs(\"boolean\"));\nvar isRegExp = ( /*#__PURE__*/_createObjIs(\"RegExp\"));\nvar isFile = ( /*#__PURE__*/_createObjIs(\"File\"));\nvar isFormData = ( /*#__PURE__*/_createObjIs(\"FormData\"));\nvar isBlob = ( /*#__PURE__*/_createObjIs(\"Blob\"));\nvar isArrayBuffer = ( /*#__PURE__*/_createObjIs(\"ArrayBuffer\"));\nvar isError = ( /*#__PURE__*/_createObjIs(\"Error\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromiseLike(value) {\n    return !!(value && value.then && isFunction(value.then));\n}\nvar isThenable = isPromiseLike;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPromise(value) {\n    return !!(value && value.then && value.catch && isFunction(value.then) && isFunction(value.catch));\n}\nvar isMap = ( /*#__PURE__*/_createObjIs(\"Map\"));\nvar isWeakMap = ( /*#__PURE__*/_createObjIs(\"WeakMap\"));\nvar isSet = ( /*#__PURE__*/_createObjIs(\"Set\"));\nvar isWeakSet = ( /*#__PURE__*/_createObjIs(\"WeakSet\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction isMapLike(value) {\n    return !!(value &&\n        isFunction(value.get) &&\n        isFunction(value.set) &&\n        isFunction(value.has) &&\n        isFunction(value.delete) &&\n        isNumber(value.size));\n}\nfunction isSetLike(value) {\n    return !!(value &&\n        isFunction(value.add) &&\n        isFunction(value.has) &&\n        isFunction(value.delete) &&\n        isNumber(value.size));\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isNotTruthy(value) {\n    return !value || !isTruthy(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isTruthy(value) {\n    return !(!value || safeGet(function () { return !(value && (0 + value)); }, !value));\n}\nvar isBigInt = ( /*#__PURE__*/_createIsWithPoly(\"bigint\"));\n\nfunction _returnNothing() {\n    return;\n}\nfunction _returnEmptyArray() {\n    return [];\n}\nfunction _returnFalse() {\n    return false;\n}\n\nvar asString = ( /*#__PURE__*/_pureAssign(StrCls));\n\nvar ERROR_TYPE = \"[object Error]\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction dumpObj(object, format) {\n    var propertyValueDump = EMPTY;\n    var objType = ObjProto[TO_STRING][CALL](object);\n    if (objType === ERROR_TYPE) {\n        object = { stack: asString(object.stack), message: asString(object.message), name: asString(object.name) };\n    }\n    try {\n        propertyValueDump = JSON.stringify(object, NULL_VALUE, format ? ((typeof format === \"number\") ? format : 4) : UNDEF_VALUE);\n        propertyValueDump = (propertyValueDump ? propertyValueDump.replace(/\"(\\w+)\"\\s*:\\s{0,1}/g, \"$1: \") : NULL_VALUE) || asString(object);\n    }\n    catch (e) {\n        propertyValueDump = \" - \" + dumpObj(e, format);\n    }\n    return objType + \": \" + propertyValueDump;\n}\n\nfunction throwError(message) {\n    throw new Error(message);\n}\nfunction throwTypeError(message) {\n    throw new TypeError(message);\n}\nfunction throwRangeError(message) {\n    throw new RangeError(message);\n}\n\nfunction _throwIfNullOrUndefined(obj) {\n    if (isStrictNullOrUndefined(obj)) {\n        throwTypeError(\"Cannot convert undefined or null to object\");\n    }\n}\nfunction _throwIfNotString(value) {\n    if (!isString(value)) {\n        throwTypeError(\"'\" + dumpObj(value) + \"' is not a string\");\n    }\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction objHasOwnProperty(obj, prop) {\n    return !!obj && ObjProto.hasOwnProperty[CALL](obj, prop);\n}\n\nvar _objGetOwnPropertyDescriptor$2 = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar objHasOwn = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"hasOwn\")), polyObjHasOwn));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjHasOwn(obj, prop) {\n    _throwIfNullOrUndefined(obj);\n    return objHasOwnProperty(obj, prop) || !!_objGetOwnPropertyDescriptor$2(obj, prop);\n}\n\nfunction objForEachKey(theObject, callbackfn, thisArg) {\n    if (theObject && (isObject(theObject) || isFunction(theObject))) {\n        for (var prop in theObject) {\n            if (objHasOwn(theObject, prop)) {\n                if (callbackfn[CALL](thisArg || theObject, prop, theObject[prop]) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction arrForEach(theArray, callbackfn, thisArg) {\n    if (theArray) {\n        var len = theArray[LENGTH] >>> 0;\n        for (var idx = 0; idx < len; idx++) {\n            if (idx in theArray) {\n                if (callbackfn[CALL](thisArg || theArray, theArray[idx], idx, theArray) === -1) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nvar _unwrapFunction = ( _unwrapFunctionWithPoly);\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapFunctionWithPoly(funcName, clsProto, polyFunc) {\n    var clsFn = clsProto ? clsProto[funcName] : NULL_VALUE;\n    return function (thisArg) {\n        var theFunc = (thisArg ? thisArg[funcName] : NULL_VALUE) || clsFn;\n        if (theFunc || polyFunc) {\n            var theArgs = arguments;\n            return (theFunc || polyFunc).apply(thisArg, theFunc ? ArrSlice[CALL](theArgs, 1) : theArgs);\n        }\n        throwTypeError(\"\\\"\" + asString(funcName) + \"\\\" not defined for \" + dumpObj(thisArg));\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _unwrapProp(propName) {\n    return function (thisArg) {\n        return thisArg[propName];\n    };\n}\n\nfunction _objPropertyIsEnum(obj, propKey) {\n    var desc;\n    var fn = ObjClass.getOwnPropertyDescriptor;\n    if (!isStrictNullOrUndefined(obj) && fn) {\n        desc = safe(fn, [obj, propKey]).v || NULL_VALUE;\n    }\n    if (!desc) {\n        desc = safe(function () {\n            for (var key in obj) {\n                if (key === propKey) {\n                    return { enumerable: true };\n                }\n            }\n        }).v;\n    }\n    return (desc && desc.enumerable) || false;\n}\nvar objPropertyIsEnumerable = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"propertyIsEnumerable\", NULL_VALUE, _objPropertyIsEnum));\n\nvar _objGetOwnPropertyDescriptor$1 = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar _objGetOwnPropertySymbols = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_SYMBOLS)), _returnEmptyArray));\nvar propMap = {\n    e: \"enumerable\",\n    c: \"configurable\",\n    v: \"value\",\n    w: \"writable\",\n    g: \"get\",\n    s: \"set\"\n};\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createProp(value) {\n    var prop = {};\n    prop[propMap[\"c\"]] = true;\n    prop[propMap[\"e\"]] = true;\n    if (value.l) {\n        prop.get = function () { return value.l.v; };\n        var desc = _objGetOwnPropertyDescriptor$1(value.l, \"v\");\n        if (desc && desc.set) {\n            prop.set = function (newValue) {\n                value.l.v = newValue;\n            };\n        }\n    }\n    objForEachKey(value, function (key, value) {\n        prop[propMap[key]] = isStrictUndefined(value) ? prop[propMap[key]] : value;\n    });\n    return prop;\n}\nvar objDefineProp = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperty\"));\nvar objDefineProperties = ( /*#__PURE__*/_pureRef(ObjClass, \"defineProperties\"));\nfunction objDefineGet(target, key, value, configurable, enumerable) {\n    var _a;\n    return objDefineProp(target, key, _createProp((_a = {\n            e: enumerable,\n            c: configurable\n        },\n        _a[isFunction(value) ? \"g\" : \"v\"] = value,\n        _a)));\n}\nfunction objDefineAccessors(target, prop, getProp, setProp, configurable, enumerable) {\n    var desc = {\n        e: enumerable,\n        c: configurable\n    };\n    if (getProp) {\n        desc.g = getProp;\n    }\n    if (setProp) {\n        desc.s = setProp;\n    }\n    return objDefineProp(target, prop, _createProp(desc));\n}\nfunction objDefine(target, key, propDesc) {\n    return objDefineProp(target, key, _createProp(propDesc));\n}\nfunction objDefineProps(target, propDescMap) {\n    var props = {};\n    objForEachKey(propDescMap, function (key, value) {\n        props[key] = _createProp(value);\n    });\n    arrForEach(_objGetOwnPropertySymbols(propDescMap), function (sym) {\n        if (objPropertyIsEnumerable(propDescMap, sym)) {\n            props[sym] = _createProp(propDescMap[sym]);\n        }\n    });\n    return objDefineProperties(target, props);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createKeyValueMap(values, keyType, valueType, completeFn, writable) {\n    var theMap = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(theMap, key, keyType ? value : key);\n        _assignMapValue(theMap, value, valueType ? value : key);\n    });\n    return completeFn ? completeFn(theMap) : theMap;\n}\nfunction _assignMapValue(theMap, key, value, writable) {\n    objDefineProp(theMap, key, {\n        value: value,\n        enumerable: true,\n        writable: false\n    });\n}\n\nfunction _objIterateEntries(obj, mapper) {\n    var result = [];\n    objForEachKey(obj, function (key, val) {\n        result.push(mapper(key, val));\n    });\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjKeys(obj) {\n    _throwIfNullOrUndefined(obj);\n    if (!isObject(obj)) {\n        throwTypeError(\"non-object \" + dumpObj(obj));\n    }\n    return _objIterateEntries(obj, function (k, _) { return k; });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjEntries(value) {\n    return _objIterateEntries(value, function (k, v) { return [k, v]; });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjValues(value) {\n    return _objIterateEntries(value, function (_, v) { return v; });\n}\n\nfunction polyObjIs(value1, value2) {\n    if (value1 !== value1) {\n        return value2 !== value2;\n    }\n    if (value1 === 0 && value2 === 0) {\n        return 1 / value1 === 1 / value2;\n    }\n    return value1 === value2;\n}\n\nvar objIsFrozen = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isFrozen\")), _returnFalse));\nvar objIsSealed = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isSealed\")), _returnFalse));\n\nvar _objFreeze = ( /*#__PURE__*/_pureRef(ObjClass, \"freeze\"));\nfunction _doNothing(value) {\n    return value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getProto(value) {\n    _throwIfNullOrUndefined(value);\n    return value[__PROTO__] || NULL_VALUE;\n}\nvar objAssign = ( /*#__PURE__*/_pureRef(ObjClass, \"assign\"));\nvar objKeys = ( /*#__PURE__*/_pureRef(ObjClass, \"keys\"));\nfunction _deepFreeze(val, visited) {\n    if ((isArray(val) || isObject(val) || isFunction(val)) && !objIsFrozen(val)) {\n        for (var lp = 0; lp < visited.length; lp++) {\n            if (visited[lp] === val) {\n                return val;\n            }\n        }\n        visited.push(val);\n        objForEachKey(val, function (_key, propValue) {\n            _deepFreeze(propValue, visited);\n        });\n        objFreeze(val);\n    }\n    return val;\n}\nfunction objDeepFreeze(value) {\n    return _objFreeze ? _deepFreeze(value, []) : value;\n}\nvar objFreeze = ( /*#__PURE__*/_pureAssign(_objFreeze, _doNothing));\nvar objSeal = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"seal\")), _doNothing));\nvar objGetPrototypeOf = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"getPrototypeOf\")), _getProto));\nvar objEntries = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"entries\")), polyObjEntries));\nvar objValues = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"values\")), polyObjValues));\nvar objIs = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"is\")), polyObjIs));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnum(values) {\n    return _createKeyValueMap(values, 1 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumKeyMap(values) {\n    return _createKeyValueMap(values, 0 , 0 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createEnumValueMap(values) {\n    return _createKeyValueMap(values, 1 , 1 , objFreeze);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createSimpleMap(values) {\n    var mapClass = {};\n    objForEachKey(values, function (key, value) {\n        _assignMapValue(mapClass, key, value[1]);\n        _assignMapValue(mapClass, value[0], value[1]);\n    });\n    return objFreeze(mapClass);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createTypeMap(values) {\n    return createSimpleMap(values);\n}\n\nvar _wellKnownSymbolMap = ( /*#__PURE__*/createEnumKeyMap({\n    asyncIterator: 0 ,\n    hasInstance: 1 ,\n    isConcatSpreadable: 2 ,\n    iterator: 3 ,\n    match: 4 ,\n    matchAll: 5 ,\n    replace: 6 ,\n    search: 7 ,\n    species: 8 ,\n    split: 9 ,\n    toPrimitive: 10 ,\n    toStringTag: 11 ,\n    unscopables: 12\n}));\n\nvar GLOBAL_CONFIG_KEY = \"__tsUtils$gblCfg\";\nvar _globalCfg;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalValue() {\n    var result;\n    if (typeof globalThis !== UNDEFINED) {\n        result = globalThis;\n    }\n    if (!result && typeof self !== UNDEFINED) {\n        result = self;\n    }\n    if (!result && typeof window !== UNDEFINED) {\n        result = window;\n    }\n    if (!result && typeof global !== UNDEFINED) {\n        result = global;\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getGlobalConfig() {\n    if (!_globalCfg) {\n        var gbl = safe(_getGlobalValue).v || {};\n        _globalCfg = gbl[GLOBAL_CONFIG_KEY] = gbl[GLOBAL_CONFIG_KEY] || {};\n    }\n    return _globalCfg;\n}\n\nvar mathMin = ( /*#__PURE__*/_pureRef(MathCls, \"min\"));\nvar mathMax = ( /*#__PURE__*/_pureRef(MathCls, \"max\"));\n\nvar strSlice = ( /*#__PURE__*/_unwrapFunction(\"slice\", StrProto));\n\nvar strSubstring = ( /*#__PURE__*/_unwrapFunction(\"substring\", StrProto));\nvar strSubstr = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"substr\", StrProto, polyStrSubstr));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSubstr(value, start, length) {\n    _throwIfNullOrUndefined(value);\n    if (length < 0) {\n        return EMPTY;\n    }\n    start = start || 0;\n    if (start < 0) {\n        start = mathMax(start + value[LENGTH], 0);\n    }\n    if (isUndefined(length)) {\n        return strSlice(value, start);\n    }\n    return strSlice(value, start, start + length);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLeft(value, count) {\n    return strSubstring(value, 0, count);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strRight(value, count) {\n    return count <= 0 ? EMPTY : (value[LENGTH] > count ? strSlice(value, -count) : value);\n}\n\nfunction _tagAsPolyfill(target, polyfillTypeName) {\n    if (target) {\n        safe(function () {\n            target[POLYFILL_TAG] = true;\n            target[POLYFILL_TYPE_NAME] = polyfillTypeName;\n        });\n        safe(objDefine, [target, POLYFILL_TAG, {\n                v: true,\n                w: false,\n                e: false\n            }]);\n        safe(objDefine, [target, POLYFILL_TYPE_NAME, {\n                v: polyfillTypeName,\n                w: false,\n                e: false\n            }]);\n    }\n    return target;\n}\n\nvar objCreate = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ObjClass, \"create\")), polyObjCreate));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyObjCreate(obj, properties) {\n    var newObj = null;\n    function tempFunc() { }\n    if (!isStrictNullOrUndefined(obj)) {\n        var type = typeof obj;\n        if (type !== OBJECT && type !== FUNCTION) {\n            throwTypeError(\"Prototype must be an Object or function: \" + dumpObj(obj));\n        }\n        tempFunc[PROTOTYPE] = obj;\n        safe(function () {\n            tempFunc[__PROTO__] = obj;\n        });\n        newObj = new tempFunc();\n    }\n    else {\n        newObj = {};\n    }\n    if (properties) {\n        safe(objDefineProperties, [newObj, properties]);\n    }\n    return newObj;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction utcNow() {\n    return (Date.now || polyUtcNow)();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyUtcNow() {\n    return new Date().getTime();\n}\n\nfunction fnApply(fn, thisArg, argArray) {\n    return fn.apply(thisArg, argArray);\n}\nfunction fnCall(fn, thisArg) {\n    return fn.apply(thisArg, ArrSlice[CALL](arguments, 2));\n}\nfunction fnBind(fn, thisArg) {\n    return fn.bind.apply(fn, ArrSlice[CALL](arguments, 1));\n}\n\nvar _globalLazyTestHooks;\nfunction _initTestHooks() {\n    _globalLazyTestHooks = _getGlobalConfig();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getLazy(cb, argArray) {\n    var lazyValue = {};\n    !_globalLazyTestHooks && _initTestHooks();\n    lazyValue.b = _globalLazyTestHooks.lzy;\n    objDefineProp(lazyValue, \"v\", {\n        configurable: true,\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            if (!_globalLazyTestHooks.lzy) {\n                objDefineProp(lazyValue, \"v\", {\n                    value: result\n                });\n            }\n            lazyValue.b = _globalLazyTestHooks.lzy;\n            return result;\n        }\n    });\n    return lazyValue;\n}\nfunction setBypassLazyCache(newValue) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _globalLazyTestHooks.lzy = newValue;\n}\nfunction getWritableLazy(cb, argArray) {\n    var lazyValue = {};\n    !_globalLazyTestHooks && _initTestHooks();\n    lazyValue.b = _globalLazyTestHooks.lzy;\n    var _setValue = function (newValue) {\n        objDefineProp(lazyValue, \"v\", {\n            value: newValue,\n            writable: true\n        });\n        if (lazyValue.b) {\n            delete lazyValue.b;\n        }\n    };\n    objDefineProp(lazyValue, \"v\", {\n        configurable: true,\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            if (!_globalLazyTestHooks.lzy) {\n                _setValue(result);\n            }\n            if (_globalLazyTestHooks.lzy && lazyValue.b !== _globalLazyTestHooks.lzy) {\n                lazyValue.b = _globalLazyTestHooks.lzy;\n            }\n            return result;\n        },\n        set: _setValue\n    });\n    return lazyValue;\n}\n\nvar mathRandom = ( /*#__PURE__*/_pureRef(MathCls, \"random\"));\n\nvar _uniqueInstanceId = ( /*#__PURE__*/getLazy(function () {\n    var value = (utcNow().toString(36).slice(2));\n    while (value.length < 16) {\n        value += mathRandom().toString(36).slice(2);\n    }\n    value = value.substring(0, 16);\n    return value;\n}));\n\nvar UNIQUE_REGISTRY_ID = \"_urid\";\nvar POLY_SYM = \"$nw21sym\";\nvar _polySymbols;\nvar _polyId = 0;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _globalSymbolRegistry() {\n    if (!_polySymbols) {\n        var gblCfg = _getGlobalConfig();\n        _polySymbols = gblCfg.gblSym = gblCfg.gblSym || { k: {}, s: {} };\n    }\n    return _polySymbols;\n}\nvar _wellKnownSymbolCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyNewSymbol(description) {\n    var uniqueId = \"_\" + _polyId++ + \"_\" + _uniqueInstanceId.v;\n    var symString = SYMBOL + \"(\" + description + \")\";\n    function _setProp(name, value) {\n        objDefine(theSymbol, name, {\n            v: value,\n            e: false,\n            w: false\n        });\n    }\n    var theSymbol = objCreate(null);\n    _setProp(\"description\", asString(description));\n    _setProp(TO_STRING, function () { return symString + POLY_SYM + uniqueId; });\n    _setProp(\"valueOf\", function () { return theSymbol; });\n    _setProp(\"v\", symString);\n    _setProp(\"_uid\", uniqueId);\n    return _tagAsPolyfill(theSymbol, \"symbol\");\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolFor(key) {\n    var registry = _globalSymbolRegistry();\n    if (!objHasOwn(registry.k, key)) {\n        var newSymbol_1 = polyNewSymbol(key);\n        var regId_1 = objKeys(registry.s).length;\n        newSymbol_1[UNIQUE_REGISTRY_ID] = function () { return regId_1 + \"_\" + newSymbol_1[TO_STRING](); };\n        registry.k[key] = newSymbol_1;\n        registry.s[newSymbol_1[UNIQUE_REGISTRY_ID]()] = asString(key);\n    }\n    return registry.k[key];\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polySymbolKeyFor(sym) {\n    if (!sym || !sym[TO_STRING] || strSubstring(sym[TO_STRING](), 0, 6) != SYMBOL) {\n        throwTypeError(sym + \" is not a symbol\");\n    }\n    var regId = _isPolyfill(sym) && sym[UNIQUE_REGISTRY_ID] && sym[UNIQUE_REGISTRY_ID]();\n    return regId ? _globalSymbolRegistry().s[regId] : undefined;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyGetKnownSymbol(name) {\n    !_wellKnownSymbolCache && (_wellKnownSymbolCache = {});\n    var result;\n    var knownName = _wellKnownSymbolMap[name];\n    if (knownName) {\n        result = _wellKnownSymbolCache[knownName] = _wellKnownSymbolCache[knownName] || polyNewSymbol(SYMBOL + \".\" + knownName);\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCachedValue(value) {\n    return objDefineProp({\n        toJSON: function () { return value; }\n    }, \"v\", { value: value });\n}\nvar createDeferredCachedValue = getDeferred;\n/*#__NO_SIDE_EFFECTS__*/\nfunction getDeferred(cb, argArray) {\n    var theValue = {\n        toJSON: function () { return theValue.v; }\n    };\n    return objDefineProp(theValue, \"v\", {\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            cb = NULL_VALUE;\n            objDefineProp(theValue, \"v\", { value: result });\n            return result;\n        },\n        configurable: true\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getWritableDeferred(cb, argArray) {\n    var theValue = {\n        toJSON: function () { return theValue.v; }\n    };\n    var _setValue = function (newValue) {\n        objDefineProp(theValue, \"v\", {\n            value: newValue,\n            writable: true\n        });\n    };\n    return objDefineProp(theValue, \"v\", {\n        get: function () {\n            var result = fnApply(cb, null, argArray);\n            _setValue(result);\n            cb = NULL_VALUE;\n            return result;\n        },\n        set: _setValue,\n        configurable: true\n    });\n}\n\nvar WINDOW = \"window\";\nvar _cachedGlobal;\nfunction _getGlobalInstFn(getFn, theArgs) {\n    var cachedValue;\n    return function () {\n        !_globalLazyTestHooks && _initTestHooks();\n        if (!cachedValue || _globalLazyTestHooks.lzy) {\n            cachedValue = createCachedValue(safe(getFn, theArgs).v);\n        }\n        return cachedValue.v;\n    };\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction lazySafeGetInst(name) {\n    return getLazy(function () { return safe((getInst), [name]).v || UNDEF_VALUE; });\n}\nfunction getGlobal(useCached) {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_cachedGlobal || useCached === false || _globalLazyTestHooks.lzy) {\n        _cachedGlobal = createCachedValue(safe(_getGlobalValue).v || NULL_VALUE);\n    }\n    return _cachedGlobal.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getInst(name, useCached) {\n    var gbl;\n    if (!_cachedGlobal || useCached === false) {\n        gbl = getGlobal(useCached);\n    }\n    else {\n        gbl = _cachedGlobal.v;\n    }\n    if (gbl && gbl[name]) {\n        return gbl[name];\n    }\n    if (name === WINDOW) {\n        try {\n            return window;\n        }\n        catch (e) {\n        }\n    }\n    return NULL_VALUE;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasDocument() {\n    return !!( /*#__PURE__*/getDocument());\n}\nvar getDocument = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"document\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasWindow() {\n    return !!( /*#__PURE__*/getWindow());\n}\nvar getWindow = ( /*#__PURE__*/_getGlobalInstFn(getInst, [WINDOW]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasNavigator() {\n    return !!( /*#__PURE__*/getNavigator());\n}\nvar getNavigator = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"navigator\"]));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasHistory() {\n    return !!( /*#__PURE__*/getHistory());\n}\nvar getHistory = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"history\"]));\nvar isNode = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return (process && (process.versions || {}).node); }).v);\n}));\nvar isWebWorker = ( /*#__PURE__*/_getGlobalInstFn(function () {\n    return !!( /*#__PURE__*/safe(function () { return self && self instanceof WorkerGlobalScope; }).v);\n}));\n\nvar _symbol;\nvar _symbolFor;\nvar _symbolKeyFor;\n/*#__NO_SIDE_EFFECTS__*/\nfunction _initSymbol() {\n    _symbol = ( /*#__PURE__*/createCachedValue(safe((getInst), [SYMBOL]).v));\n    return _symbol;\n}\nfunction _getSymbolKey(key) {\n    var gblSym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return (gblSym.v ? gblSym.v[key] : UNDEF_VALUE);\n}\nvar isSymbol = ( /*#__PURE__*/_createIsWithPoly(\"symbol\"));\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasSymbol() {\n    return !!( /*#__PURE__*/getSymbol());\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getSymbol() {\n    !_globalLazyTestHooks && _initTestHooks();\n    return ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol()).v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getKnownSymbol(name, noPoly) {\n    var knownName = _wellKnownSymbolMap[name];\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v[knownName || name] : (!noPoly ? polyGetKnownSymbol(name) : UNDEF_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction newSymbol(description, noPoly) {\n    !_globalLazyTestHooks && _initTestHooks();\n    var sym = ((!_globalLazyTestHooks.lzy ? _symbol : 0) || _initSymbol());\n    return sym.v ? sym.v(description) : (!noPoly ? polyNewSymbol(description) : NULL_VALUE);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolFor(key) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolFor = ((!_globalLazyTestHooks.lzy ? _symbolFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"for\"]).v)));\n    return (_symbolFor.v || polySymbolFor)(key);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction symbolKeyFor(sym) {\n    !_globalLazyTestHooks && _initTestHooks();\n    _symbolKeyFor = ((!_globalLazyTestHooks.lzy ? _symbolKeyFor : 0) || ( /*#__PURE__*/createCachedValue(safe((_getSymbolKey), [\"keyFor\"]).v)));\n    return (_symbolKeyFor.v || polySymbolKeyFor)(sym);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterator(value) {\n    return !!value && isFunction(value.next);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction isIterable(value) {\n    return !isStrictNullOrUndefined(value) && isFunction(value[getKnownSymbol(3 )]);\n}\n\nvar _iterSymbol$1;\nfunction iterForOf(iter, callbackfn, thisArg) {\n    if (iter) {\n        if (!isIterator(iter)) {\n            !_iterSymbol$1 && (_iterSymbol$1 = createCachedValue(getKnownSymbol(3 )));\n            iter = iter[_iterSymbol$1.v] ? iter[_iterSymbol$1.v]() : NULL_VALUE;\n        }\n        if (isIterator(iter)) {\n            var err = UNDEF_VALUE;\n            var iterResult = UNDEF_VALUE;\n            try {\n                var count = 0;\n                while (!(iterResult = iter.next()).done) {\n                    if (callbackfn[CALL](thisArg || iter, iterResult.value, count, iter) === -1) {\n                        break;\n                    }\n                    count++;\n                }\n            }\n            catch (failed) {\n                err = { e: failed };\n                if (iter.throw) {\n                    iterResult = NULL_VALUE;\n                    iter.throw(err);\n                }\n            }\n            finally {\n                try {\n                    if (iterResult && !iterResult.done) {\n                        iter.return && iter.return(iterResult);\n                    }\n                }\n                finally {\n                    if (err) {\n                        // eslint-disable-next-line no-unsafe-finally\n                        throw err.e;\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction arrAppend(target, elms) {\n    if (!isUndefined(elms) && target) {\n        if (isArray(elms)) {\n            fnApply(target.push, target, elms);\n        }\n        else if (isIterator(elms) || isIterable(elms)) {\n            iterForOf(elms, function (elm) {\n                target.push(elm);\n            });\n        }\n        else {\n            target.push(elms);\n        }\n    }\n    return target;\n}\n\nvar arrEvery = /*#__PURE__*/ _unwrapFunction(\"every\", ArrProto);\nvar arrFilter = /*#__PURE__*/ _unwrapFunction(\"filter\", ArrProto);\n\nvar arrIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", ArrProto));\nvar arrLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", ArrProto));\n\nvar arrMap = ( /*#__PURE__*/_unwrapFunction(\"map\", ArrProto));\n\nfunction arrSlice(theArray, start, end) {\n    return ((theArray ? theArray[\"slice\"] : NULL_VALUE) || ArrSlice).apply(theArray, ArrSlice[CALL](arguments, 1));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyIsArray(value) {\n    if (isNullOrUndefined(value)) {\n        return false;\n    }\n    return objToString(value) === \"[object Array]\";\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyArrIncludes(theArray, searchElement, fromIndex) {\n    return arrIndexOf(theArray, searchElement, fromIndex) !== -1;\n}\nfunction polyArrFind(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    arrForEach(theArray, function (value, index) {\n        if (callbackFn[CALL](thisArg | theArray, value, index, theArray)) {\n            result = index;\n            return -1;\n        }\n    });\n    return result;\n}\nfunction polyArrFindLast(theArray, callbackFn, thisArg) {\n    var result;\n    var idx = polyArrFindLastIndex(theArray, callbackFn, thisArg);\n    return idx !== -1 ? theArray[idx] : result;\n}\nfunction polyArrFindLastIndex(theArray, callbackFn, thisArg) {\n    var result = -1;\n    var len = theArray[LENGTH] >>> 0;\n    for (var idx = len - 1; idx >= 0; idx--) {\n        if (idx in theArray && callbackFn[CALL](thisArg | theArray, theArray[idx], idx, theArray)) {\n            result = idx;\n            break;\n        }\n    }\n    return result;\n}\nfunction polyArrFrom(theValue, mapFn, thisArg) {\n    if (isArray(theValue)) {\n        var result_1 = arrSlice(theValue);\n        return mapFn ? arrMap(result_1, mapFn, thisArg) : result_1;\n    }\n    var result = [];\n    iterForOf(theValue, function (value, cnt) {\n        return result.push(mapFn ? mapFn[CALL](thisArg, value, cnt) : value);\n    });\n    return result;\n}\n\nvar arrFind = /*#__PURE__*/ _unwrapFunctionWithPoly(\"find\", ArrProto, polyArrFind);\nvar arrFindIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findIndex\", ArrProto, polyArrFindIndex);\nvar arrFindLast = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLast\", ArrProto, polyArrFindLast);\nvar arrFindLastIndex = /*#__PURE__*/ _unwrapFunctionWithPoly(\"findLastIndex\", ArrProto, polyArrFindLastIndex);\n\nvar arrFrom = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(ArrCls, \"from\")), polyArrFrom));\n\nvar arrIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", ArrProto, polyArrIncludes));\nvar arrContains = arrIncludes;\n\nvar arrReduce = ( /*#__PURE__*/_unwrapFunction(\"reduce\", ArrProto));\n\nvar arrSome = ( /*#__PURE__*/_unwrapFunction(\"some\", ArrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFnDeferredProxy(hostFn, funcName) {\n    return function () {\n        var theArgs = ArrSlice[CALL](arguments);\n        var theHost = hostFn();\n        return fnApply(theHost[funcName], theHost, theArgs);\n    };\n}\nfunction createProxyFuncs(target, host, funcDefs) {\n    if (target && host && isArray(funcDefs)) {\n        var isDeferred_1 = isFunction(host);\n        arrForEach(funcDefs, function (funcDef) {\n            var targetName = (funcDef.as || funcDef.n);\n            if (funcDef.rp === false && target[targetName]) {\n                return;\n            }\n            target[targetName] = isDeferred_1 ?\n                createFnDeferredProxy(host, funcDef.n) :\n                fnBind(host[funcDef.n], host);\n        });\n    }\n    return target;\n}\n\nvar _iterSymbol;\n/*#__NO_SIDE_EFFECTS__*/\nfunction readArgs(theArgs, start, end) {\n    if (!objHasOwn(theArgs, LENGTH)) {\n        !_iterSymbol && (_iterSymbol = createCachedValue(hasSymbol() && getKnownSymbol(3 )));\n        var iterFn = void 0;\n        if (_iterSymbol.v) {\n            iterFn = theArgs[_iterSymbol.v];\n        }\n        if (iterFn) {\n            var values_1 = [];\n            var from_1 = (start === UNDEF_VALUE || start < 0) ? 0 : start;\n            var to_1 = end < 0 || start < 0 ? UNDEF_VALUE : end;\n            iterForOf(iterFn[CALL](theArgs), function (value, cnt) {\n                if (to_1 !== UNDEF_VALUE && cnt >= to_1) {\n                    return -1;\n                }\n                if (cnt >= from_1) {\n                    values_1.push(value);\n                }\n            });\n            if ((start === UNDEF_VALUE || start >= 0) && (end === UNDEF_VALUE || end >= 0)) {\n                return values_1;\n            }\n            theArgs = values_1;\n        }\n    }\n    return arrSlice(theArgs, start, end);\n}\n\nvar _isProtoArray;\nvar objSetPrototypeOf = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"setPrototypeOf\")), _polyObjSetPrototypeOf));\nfunction _polyObjSetPrototypeOf(obj, proto) {\n    var _a;\n    !_isProtoArray && (_isProtoArray = createCachedValue((_a = {}, _a[__PROTO__] = [], _a) instanceof Array));\n    _isProtoArray.v ? obj[__PROTO__] = proto : objForEachKey(proto, function (key, value) { return obj[key] = value; });\n    return obj;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createCustomError(name, d, b) {\n    safe(objDefine, [d, NAME, { v: name, c: true, e: false }]);\n    d = objSetPrototypeOf(d, b);\n    function __() {\n        this[CONSTRUCTOR] = d;\n        safe(objDefine, [this, NAME, { v: name, c: true, e: false }]);\n    }\n    d[PROTOTYPE] = b === NULL_VALUE ? objCreate(b) : (__[PROTOTYPE] = b[PROTOTYPE], new __());\n    return d;\n}\nfunction _setName(baseClass, name) {\n    name && (baseClass[NAME] = name);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createCustomError(name, constructCb, errorBase) {\n    var theBaseClass = errorBase || Error;\n    var orgName = theBaseClass[PROTOTYPE][NAME];\n    var captureFn = Error.captureStackTrace;\n    return _createCustomError(name, function () {\n        var _this = this;\n        var theArgs = arguments;\n        try {\n            safe(_setName, [theBaseClass, name]);\n            var _self = fnApply(theBaseClass, _this, ArrSlice[CALL](theArgs)) || _this;\n            if (_self !== _this) {\n                var orgProto = objGetPrototypeOf(_this);\n                if (orgProto !== objGetPrototypeOf(_self)) {\n                    objSetPrototypeOf(_self, orgProto);\n                }\n            }\n            captureFn && captureFn(_self, _this[CONSTRUCTOR]);\n            constructCb && constructCb(_self, theArgs);\n            return _self;\n        }\n        finally {\n            safe(_setName, [theBaseClass, orgName]);\n        }\n    }, theBaseClass);\n}\nvar _unsupportedError;\nfunction throwUnsupported(message) {\n    if (!_unsupportedError) {\n        _unsupportedError = createCustomError(\"UnsupportedError\");\n    }\n    throw new _unsupportedError(message);\n}\n\nfunction isElement(value) {\n    return !!value && value.nodeType === 1 &&\n        !!value.nodeName &&\n        !!(typeof Element !== \"undefined\" && value instanceof Element);\n}\nfunction isElementLike(value) {\n    return !!value && value.nodeType === 1 && !!value.nodeName;\n}\n\nfunction isEmpty(value) {\n    var result = isStrictNullOrUndefined(value);\n    if (!result) {\n        if (isString(value) || isArray(value)) {\n            result = (value.length === 0);\n        }\n        else if (isMapLike(value) || isSetLike(value)) {\n            result = (value.size === 0);\n        }\n        else if (isObject(value)) {\n            result = objKeys(value).length === 0;\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTrimFn(exp) {\n    return function _doTrim(value) {\n        _throwIfNullOrUndefined(value);\n        if (value && value.replace) {\n            value = value.replace(exp, EMPTY);\n        }\n        return value;\n    };\n}\nvar polyStrTrim = ( /*#__PURE__*/_createTrimFn(/^\\s+|(?=\\s)\\s+$/g));\nvar polyStrTrimStart = ( /*#__PURE__*/_createTrimFn(/^\\s+/g));\nvar polyStrTrimEnd = ( /*#__PURE__*/_createTrimFn(/(?=\\s)\\s+$/g));\n\nvar strTrim = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trim\", StrProto, polyStrTrim));\nvar strTrimStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimStart\", StrProto, polyStrTrimStart));\nvar strTrimLeft = ( /*#__PURE__*/_pureAssign(strTrimStart));\nvar strTrimEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"trimEnd\", StrProto, polyStrTrimEnd));\nvar strTrimRight = ( /*#__PURE__*/_pureAssign(strTrimEnd));\n\nvar strUpper = ( /*#__PURE__*/_unwrapFunction(\"toUpperCase\", StrProto));\nvar strLower = ( /*#__PURE__*/_unwrapFunction(\"toLowerCase\", StrProto));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _convertCase(value, newPrefix, upperWord) {\n    return strTrim(asString(value)).replace(/((_|\\W)+(\\w){0,1}|([a-z])([A-Z]))/g, function (_match, _g1, _g2, wordStart, upperPrefix, upperLetter) {\n        var convertMatch = wordStart || upperLetter || EMPTY;\n        if (upperWord) {\n            convertMatch = strUpper(convertMatch);\n        }\n        return (upperPrefix || EMPTY) + newPrefix + convertMatch;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strLetterCase(value) {\n    return asString(value).replace(/(_|\\b)\\w/g, strUpper);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strCamelCase(value, upperFirst) {\n    var result = _convertCase(value, \"\", true);\n    return result.replace(/^\\w/, upperFirst ? strUpper : strLower);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strKebabCase(value, scream) {\n    var result = _convertCase(value, \"-\");\n    return (scream ? strUpper : strLower)(result);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strSnakeCase(value, scream) {\n    var result = _convertCase(value, \"_\");\n    return (scream ? strUpper : strLower)(result);\n}\n\nvar mathFloor = ( /*#__PURE__*/_pureRef(MathCls, \"floor\"));\nvar mathCeil = ( /*#__PURE__*/_pureRef(MathCls, \"ceil\"));\n\nvar mathTrunc = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(MathCls, \"trunc\")), polyMathTrunc));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyMathTrunc(value) {\n    var theValue = +value;\n    return (theValue > 0 ? mathFloor : mathCeil)(theValue);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction mathToInt(value, throwInfinity) {\n    var result = +value;\n    if (throwInfinity && (result === Infinity || result == Infinity)) {\n        throwRangeError(\"invalid value [\" + dumpObj(value) + \"]\");\n    }\n    return result !== result || result === 0 ? 0 : mathTrunc(result);\n}\n\nvar strRepeat = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"repeat\", StrProto, polyStrRepeat));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrRepeat(value, count) {\n    _throwIfNullOrUndefined(value);\n    count = mathToInt(count, true);\n    if (count < 0) {\n        throwRangeError(\"invalid count must be >= 0 && < Infinity\");\n    }\n    var pad = isString(value) ? value : asString(value);\n    var result = EMPTY;\n    for (; count > 0; (count >>>= 1) && (pad += pad)) {\n        if (count & 1) {\n            result += pad;\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _padValue(value, targetLength, padString) {\n    var result = EMPTY;\n    targetLength = mathToInt(targetLength, true);\n    targetLength >>= 0;\n    var len = value[LENGTH];\n    if (len < targetLength) {\n        result = isNullOrUndefined(padString) ? \" \" : asString(padString);\n        targetLength = targetLength - len;\n        if (targetLength > result[LENGTH]) {\n            result = strRepeat(result, mathCeil(targetLength / result[LENGTH]));\n        }\n        if (result[LENGTH] > targetLength) {\n            result = strSubstring(result, 0, targetLength);\n        }\n    }\n    return result;\n}\nvar strPadStart = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padStart\", StrProto, polyStrPadStart));\nvar strPadEnd = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"padEnd\", StrProto, polyStrPadEnd));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadStart(value, targetLength, padString) {\n    return _padValue(value, targetLength, padString) + value;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrPadEnd(value, targetLength, padString) {\n    return value + _padValue(value, targetLength, padString);\n}\n\nvar DBL_QUOTE = \"\\\"\";\nvar INVALID_JS_NAME = /([^\\w\\d_$])/g;\nvar _htmlEntityCache;\n/*#__NO_SIDE_EFFECTS__*/\nfunction normalizeJsName(jsName, camelCase) {\n    var result = asString(jsName).replace(INVALID_JS_NAME, \"_\");\n    return !isUndefined(camelCase) ? strCamelCase(result, !camelCase) : result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsJson(value, format) {\n    var result;\n    if (isString(value)) {\n        result = DBL_QUOTE + value.replace(/[^\\w .,\\-!@#$%\\^&*\\(\\)_+={}\\[\\]:;|<>?]/g, function (match) {\n            if (match === DBL_QUOTE || match === \"\\\\\") {\n                return \"\\\\\" + match;\n            }\n            var hex = match.charCodeAt(0)[TO_STRING](16);\n            return \"\\\\u\" + strPadStart(strUpper(hex), 4, \"0\");\n        }) + DBL_QUOTE;\n    }\n    else {\n        try {\n            result = JSON.stringify(value, NULL_VALUE, format ? (isNumber(format) ? format : 4) : UNDEF_VALUE);\n        }\n        catch (e) {\n            result = DBL_QUOTE + dumpObj(e) + DBL_QUOTE;\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction encodeAsHtml(value) {\n    !_htmlEntityCache && (_htmlEntityCache = {\n        \"&\": \"amp\",\n        \"<\": \"lt\",\n        \">\": \"gt\",\n        \"\\\"\": \"quot\",\n        \"'\": \"#39\"\n    });\n    return asString(value).replace(/[&<>\"']/g, function (match) { return \"&\" + _htmlEntityCache[match] + \";\"; });\n}\n\nvar _fnToString;\nvar _objCtrFnString;\nvar _gblWindow;\n/*#__NO_SIDE_EFFECTS__*/\nfunction isPlainObject(value) {\n    if (!value || typeof value !== OBJECT) {\n        return false;\n    }\n    if (!_gblWindow) {\n        _gblWindow = hasWindow() ? getWindow() : true;\n    }\n    var result = false;\n    if (value !== _gblWindow) {\n        if (!_objCtrFnString) {\n            _fnToString = Function[PROTOTYPE][TO_STRING];\n            _objCtrFnString = _fnToString[CALL](ObjClass);\n        }\n        try {\n            var proto = objGetPrototypeOf(value);\n            result = !proto;\n            if (!result) {\n                if (objHasOwnProperty(proto, CONSTRUCTOR)) {\n                    proto = proto[CONSTRUCTOR];\n                }\n                result = !!(proto && typeof proto === FUNCTION && _fnToString[CALL](proto) === _objCtrFnString);\n            }\n        }\n        catch (ex) {\n        }\n    }\n    return result;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _defaultDeepCopyHandler(details) {\n    details.value && plainObjDeepCopyHandler(details);\n    return true;\n}\nvar defaultDeepCopyHandlers = [\n    arrayDeepCopyHandler,\n    plainObjDeepCopyHandler,\n    functionDeepCopyHandler,\n    dateDeepCopyHandler\n];\n/*#__NO_SIDE_EFFECTS__*/\nfunction _getSetVisited(visitMap, source, newPath, cb) {\n    var theEntry;\n    arrForEach(visitMap, function (entry) {\n        if (entry.k === source) {\n            theEntry = entry;\n            return -1;\n        }\n    });\n    if (!theEntry) {\n        theEntry = { k: source, v: source };\n        visitMap.push(theEntry);\n        cb(theEntry);\n    }\n    return theEntry.v;\n}\nfunction _deepCopy(visitMap, value, ctx, key) {\n    var userHandler = ctx.handler;\n    var newPath = ctx.path ? (key ? ctx.path.concat(key) : ctx.path) : [];\n    var newCtx = {\n        handler: ctx.handler,\n        src: ctx.src,\n        path: newPath\n    };\n    var theType = typeof value;\n    var isPlain = false;\n    var isPrim = value === NULL_VALUE;\n    if (!isPrim) {\n        if (value && theType === OBJECT) {\n            isPlain = isPlainObject(value);\n        }\n        else {\n            isPrim = isPrimitiveType(theType);\n        }\n    }\n    var details = {\n        type: theType,\n        isPrim: isPrim,\n        isPlain: isPlain,\n        value: value,\n        result: value,\n        path: newPath,\n        origin: ctx.src,\n        copy: function (source, newKey) {\n            return _deepCopy(visitMap, source, newKey ? newCtx : ctx, newKey);\n        },\n        copyTo: function (target, source) {\n            return _copyProps(visitMap, target, source, newCtx);\n        }\n    };\n    if (!details.isPrim) {\n        return _getSetVisited(visitMap, value, newPath, function (newEntry) {\n            objDefine(details, \"result\", {\n                g: function () {\n                    return newEntry.v;\n                },\n                s: function (newValue) {\n                    newEntry.v = newValue;\n                }\n            });\n            var idx = 0;\n            var handler = userHandler;\n            while (!(handler || (idx < defaultDeepCopyHandlers.length ? defaultDeepCopyHandlers[idx++] : _defaultDeepCopyHandler))[CALL](ctx, details)) {\n                handler = NULL_VALUE;\n            }\n        });\n    }\n    if (userHandler && userHandler[CALL](ctx, details)) {\n        return details.result;\n    }\n    return value;\n}\nfunction _copyProps(visitMap, target, source, ctx) {\n    if (!isNullOrUndefined(source)) {\n        for (var key in source) {\n            target[key] = _deepCopy(visitMap, source[key], ctx, key);\n        }\n    }\n    return target;\n}\nfunction objCopyProps(target, source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source,\n        path: []\n    };\n    return _copyProps([], target, source, ctx);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction objDeepCopy(source, handler) {\n    var ctx = {\n        handler: handler,\n        src: source\n    };\n    return _deepCopy([], source, ctx);\n}\nfunction arrayDeepCopyHandler(details) {\n    var value = details.value;\n    if (isArray(value)) {\n        var target = details.result = [];\n        target.length = value.length;\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\nfunction dateDeepCopyHandler(details) {\n    var value = details.value;\n    if (isDate(value)) {\n        details.result = new Date(value.getTime());\n        return true;\n    }\n    return false;\n}\nfunction functionDeepCopyHandler(details) {\n    if (details.type === FUNCTION) {\n        return true;\n    }\n    return false;\n}\nfunction plainObjDeepCopyHandler(details) {\n    var value = details.value;\n    if (value && details.isPlain) {\n        var target = details.result = {};\n        details.copyTo(target, value);\n        return true;\n    }\n    return false;\n}\n\nfunction _doExtend(target, theArgs) {\n    arrForEach(theArgs, function (theArg) {\n        objCopyProps(target, theArg);\n    });\n    return target;\n}\nfunction deepExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(objDeepCopy(target) || {}, ArrSlice[CALL](arguments));\n}\nfunction objExtend(target, obj1, obj2, obj3, obj4, obj5, obj6) {\n    return _doExtend(target || {}, ArrSlice[CALL](arguments));\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrSymSplit(value, splitter, limit) {\n    var splitFn = splitter ? splitter[getKnownSymbol(9 )] : UNDEF_VALUE;\n    return splitFn ? splitFn(value, limit) : [value];\n}\n\nvar strSplit = ( /*#__PURE__*/_unwrapFunction(\"split\", StrProto));\nvar strSymSplit = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"split\", StrProto, polyStrSymSplit));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByKey(target, path, defValue) {\n    if (!path || !target) {\n        return defValue;\n    }\n    var parts = strSplit(path, \".\");\n    var cnt = parts.length;\n    for (var lp = 0; lp < cnt && !isNullOrUndefined(target); lp++) {\n        target = target[parts[lp]];\n    }\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getValueByIter(target, iter, defValue) {\n    if (!iter || !target) {\n        return defValue;\n    }\n    iterForOf(iter, function (value) {\n        if (isNullOrUndefined(target)) {\n            return -1;\n        }\n        target = target[value];\n    });\n    return (!isNullOrUndefined(target) ? target : defValue);\n}\nfunction setValueByKey(target, path, value) {\n    if (target && path) {\n        var parts = strSplit(path, \".\");\n        var lastKey = parts.pop();\n        arrForEach(parts, function (key) {\n            if (isNullOrUndefined(target[key])) {\n                target[key] = {};\n            }\n            target = target[key];\n        });\n        target[lastKey] = value;\n    }\n}\nfunction setValueByIter(target, iter, value) {\n    if (target && iter) {\n        var lastKey_1;\n        iterForOf(iter, function (key) {\n            if (lastKey_1) {\n                if (isNullOrUndefined(target[lastKey_1])) {\n                    target[lastKey_1] = {};\n                }\n                target = target[lastKey_1];\n            }\n            lastKey_1 = key;\n        });\n        target[lastKey_1] = value;\n    }\n}\n\nvar getLength = ( /*#__PURE__*/_unwrapProp(LENGTH));\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction getIntValue(value, defValue) {\n    try {\n        var theValue = value;\n        if (!isNumber(value)) {\n            theValue = parseInt(asString(value), 10);\n        }\n        return (isNullOrUndefined(value) || isNaN(theValue)) ? defValue : theValue;\n    }\n    catch (e) {\n    }\n    return defValue;\n}\nvar isInteger = ( /* #__PURE__*/_pureAssign(( /* #__PURE__*/_pureRef(NumberCls, \"isInteger\")), _polyNumberIsInteger));\nfunction _polyNumberIsInteger(value) {\n    return isNumber(value) && !isNaN(value) &&\n        isFinite(value) &&\n        mathFloor(value) === value;\n}\nfunction isFiniteNumber(value) {\n    return isNumber(value) && !isNaN(value) && isFinite(value);\n}\n\nvar _perf;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasPerformance() {\n    return !!getPerformance();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction getPerformance() {\n    !_globalLazyTestHooks && _initTestHooks();\n    if (!_perf || _globalLazyTestHooks.lzy) {\n        _perf = createCachedValue(safe((getInst), [\"performance\"]).v);\n    }\n    return _perf.v;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction perfNow() {\n    var perf = getPerformance();\n    if (perf && perf.now) {\n        return perf.now();\n    }\n    return utcNow();\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction elapsedTime(startTime) {\n    return perfNow() - startTime;\n}\n\nvar MATCH_ANY = \"(.*)\";\nvar MATCH_SINGLE = \"(.)\";\nfunction _createRegExp(value, escapeRgx, replaceFn, ignoreCase, fullMatch) {\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    return new RegExp((fullMatch ? \"^\" : EMPTY) + replaceFn(value.replace(escapeRgx, \"\\\\$1\")) + (fullMatch ? \"$\" : EMPTY), ignoreCase ? \"i\" : \"\");\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createWildcardRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.\\?{}()\\[\\]\\\\\\/\\\"\\'])/g, function (value) {\n        return value.replace(/\\*/g, MATCH_ANY);\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createFilenameRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\\\\\\\|\\\\\\/|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            return g1 == \"*\" ? MATCH_ANY : MATCH_SINGLE;\n        });\n    }, !!ignoreCase, fullMatch);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction makeGlobRegex(value, ignoreCase, fullMatch) {\n    return _createRegExp(asString(value), /([-+|^$#\\.{}()\\\\\\/\\[\\]\\\"\\'])/g, function (value) {\n        return value.replace(/(\\*\\*\\\\[\\\\\\/]|\\\\\\\\|\\\\\\/|\\*\\*|\\*|\\?)/g, function (_all, g1) {\n            if (g1 == \"**\\\\/\" || g1 == \"**\\\\\\\\\") {\n                return \"(.*[\\\\\\\\\\\\/])*\";\n            }\n            if (g1 === \"\\\\/\" || g1 == \"\\\\\\\\\") {\n                return \"[\\\\\\\\\\\\/]{1}\";\n            }\n            if (g1 === \"**\") {\n                return MATCH_ANY;\n            }\n            return g1 === \"*\" ? \"([^\\\\\\\\\\\\/]*)\" : \"([^\\\\\\\\\\\\/]{1})\";\n        });\n    }, !!ignoreCase, fullMatch);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetLazy(cb, defValue, argArray) {\n    return getLazy(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetWritableLazy(cb, defValue, argArray) {\n    return getWritableLazy(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetDeferred(cb, defValue, argArray) {\n    return getDeferred(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction safeGetWritableDeferred(cb, defValue, argArray) {\n    return getWritableDeferred(function () {\n        var result = safe(cb, argArray);\n        return result.e ? defValue : result.v;\n    });\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction _checkLength(value, props) {\n    var result;\n    arrForEach(props, function (prop) {\n        if (prop in value) {\n            var propValue = value[prop];\n            result = (isFunction(propValue) ? propValue() : propValue) > 0;\n            return -1;\n        }\n    });\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction _hasValue(value, depth) {\n    var result = value === false || value === 0;\n    if (!result && !isNullOrUndefined(value)) {\n        if (isArray(value)) {\n            result = value[LENGTH] > 0;\n        }\n        else if (isDate(value)) {\n            result = !isNaN(value.getTime());\n        }\n        else if (isBoolean(value)) {\n            return true;\n        }\n        else if (isObject(value)) {\n            try {\n                var chkValue = _checkLength(value, [LENGTH, \"byteLength\", \"size\", \"count\"]);\n                if (isBoolean(chkValue)) {\n                    return chkValue;\n                }\n                if (isFunction(value.valueOf) && depth < 5) {\n                    return _hasValue(value.valueOf(), ++depth);\n                }\n            }\n            catch (e) {\n            }\n            return !!objKeys(value)[LENGTH];\n        }\n        else {\n            result = isTruthy(value);\n        }\n    }\n    return result;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasValue(value) {\n    return _hasValue(value, 0);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterable(ctx) {\n    return makeIterable({}, ctx);\n}\nfunction makeIterable(target, ctx) {\n    var itSymbol = getKnownSymbol(3 );\n    function _createIterator() {\n        return createIterator(ctx);\n    }\n    target[itSymbol] = _createIterator;\n    return target;\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction createIterator(ctx) {\n    var isDone = false;\n    function _value() {\n        return ctx.v;\n    }\n    function _next() {\n        if (!isDone) {\n            isDone = (ctx.n ? ctx.n(arguments) : true);\n        }\n        var result = {\n            done: isDone\n        };\n        if (!isDone) {\n            objDefine(result, \"value\", { g: _value });\n        }\n        return result;\n    }\n    function _return(value) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.r && ctx.r(value)\n        };\n    }\n    function _throw(e) {\n        isDone = true;\n        return {\n            done: true,\n            value: ctx.t && ctx.t(e)\n        };\n    }\n    var theIterator = {\n        next: _next\n    };\n    if (ctx.r) {\n        theIterator.return = _return;\n    }\n    if (ctx.t) {\n        theIterator.throw = _throw;\n    }\n    return theIterator;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createArrayIterator(values) {\n    var idx = -1;\n    var theValues = values ? values.slice() : [];\n    var len = theValues[LENGTH];\n    function _value() {\n        if (idx >= 0 && idx < len) {\n            return theValues[idx];\n        }\n    }\n    function _getNext() {\n        idx++;\n        return idx >= len;\n    }\n    var ctx = {\n        n: _getNext\n    };\n    objDefine(ctx, \"v\", { g: _value });\n    return createIterator(ctx);\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction createRangeIterator(start, end, step) {\n    var nextValue = start;\n    var theValue = UNDEF_VALUE;\n    if (isNullOrUndefined(end)) {\n        end = start;\n    }\n    var theStep = step;\n    if (!theStep) {\n        theStep = (start <= end) ? 1 : -1;\n    }\n    function _value() {\n        return theValue;\n    }\n    function _getNext() {\n        var isDone = (theStep > 0) ? (nextValue > end) : (nextValue < end);\n        if (!isDone) {\n            theValue = nextValue;\n            nextValue += theStep;\n        }\n        return isDone;\n    }\n    return createIterator(objDefine({\n        n: _getNext\n    }, \"v\", { g: _value }));\n}\n\nvar mathAbs = ( /*#__PURE__*/_pureRef(MathCls, \"abs\"));\n\nvar mathExp = ( /*#__PURE__*/_pureRef(MathCls, \"exp\"));\nvar mathLog = ( /*#__PURE__*/_pureRef(MathCls, \"log\"));\n\nvar mathAsin = ( /*#__PURE__*/_pureRef(MathCls, \"asin\"));\nvar mathAcos = ( /*#__PURE__*/_pureRef(MathCls, \"acos\"));\nvar mathAtan = ( /*#__PURE__*/_pureRef(MathCls, \"atan\"));\nvar mathAtan2 = ( /*#__PURE__*/_pureRef(MathCls, \"atan2\"));\n\nvar mathPow = ( /*#__PURE__*/_pureRef(MathCls, \"pow\"));\nvar mathSqrt = ( /*#__PURE__*/_pureRef(MathCls, \"sqrt\"));\n\nvar mathRound = ( /*#__PURE__*/_pureRef(MathCls, \"round\"));\n\nvar mathSin = ( /*#__PURE__*/_pureRef(MathCls, \"sin\"));\nvar mathCos = ( /*#__PURE__*/_pureRef(MathCls, \"cos\"));\nvar mathTan = ( /*#__PURE__*/_pureRef(MathCls, \"tan\"));\n\nvar _recursionCheckOwnDescriptors;\nvar _recursionCheckOwnSymbols;\nvar _objGetOwnPropertyNames = ( /* #__PURE__ */_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_NAMES)), _returnEmptyArray));\nvar _objGetOwnPropertyDescriptor = ( /* #__PURE__ */_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nfunction polyObjGetOwnPropertyDescriptors(obj) {\n    var result = {};\n    _throwIfNullOrUndefined(obj);\n    if (!_recursionCheckOwnDescriptors) {\n        try {\n            _recursionCheckOwnDescriptors = true;\n            arrForEach(_objGetOwnPropertyNames(obj), function (propName) {\n                var descriptor = _objGetOwnPropertyDescriptor(obj, propName);\n                if (descriptor !== undefined) {\n                    result[propName] = descriptor;\n                }\n            });\n            arrForEach(_polyObjGetOwnPropertySymbols(obj), function (sym) {\n                var descriptor = _objGetOwnPropertyDescriptor(obj, sym);\n                if (descriptor !== undefined) {\n                    result[sym] = descriptor;\n                }\n            });\n        }\n        finally {\n            _recursionCheckOwnDescriptors = false;\n        }\n    }\n    return result;\n}\nfunction _polyObjGetOwnPropertySymbols(obj) {\n    var result = [];\n    var objHasOwn = ObjClass.hasOwn || polyObjHasOwn;\n    if (!_recursionCheckOwnSymbols) {\n        try {\n            _recursionCheckOwnSymbols = true;\n            var symEnum = 0 ;\n            while (symEnum <= 12 ) {\n                var sym = getKnownSymbol(symEnum);\n                if (sym && objHasOwn(obj, sym)) {\n                    result.push(sym);\n                }\n                symEnum++;\n            }\n        }\n        finally {\n            _recursionCheckOwnSymbols = false;\n        }\n    }\n    return result;\n}\n\nvar objGetOwnPropertyDescriptor = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_DESCRIPTOR)), _returnNothing));\nvar objGetOwnPropertyDescriptors = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"getOwnPropertyDescriptors\")), polyObjGetOwnPropertyDescriptors));\nvar objGetOwnPropertyNames = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, GET_OWN_PROPERTY_NAMES)), _returnEmptyArray));\nvar objGetOwnPropertySymbols = ( /* #__PURE__*/_pureAssign(( /* #__PURE__ */_pureRef(ObjClass, GET_OWN_PROPERTY_SYMBOLS)), _returnEmptyArray));\n\nfunction polyObjFromEntries(entries) {\n    var result = {};\n    function addEntry(entry) {\n        if (isArray(entry) && entry.length >= 2) {\n            result[entry[0]] = entry[1];\n        }\n    }\n    if (isArray(entries)) {\n        arrForEach(entries, addEntry);\n    }\n    else if (isIterable(entries)) {\n        iterForOf(entries, addEntry);\n    }\n    return result;\n}\n\nvar objFromEntries = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"fromEntries\")), polyObjFromEntries));\n\nvar objPreventExtensions = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"preventExtensions\")), _doNothing));\nvar objIsExtensible = ( /*#__PURE__*/_pureAssign(( /*#__PURE__*/_pureRef(ObjClass, \"isExtensible\")), _returnFalse));\n\nvar strEndsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"endsWith\", StrProto, polyStrEndsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrEndsWith(value, searchString, length) {\n    _throwIfNotString(value);\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var end = (!isUndefined(length) && length < value[LENGTH]) ? length : value[LENGTH];\n    return strSubstring(value, end - searchValue[LENGTH], end) === searchValue;\n}\n\nvar strIndexOf = ( /*#__PURE__*/_unwrapFunction(\"indexOf\", StrProto));\nvar strLastIndexOf = ( /*#__PURE__*/_unwrapFunction(\"lastIndexOf\", StrProto));\n\nvar strIncludes = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"includes\", StrProto, polyStrIncludes));\nvar strContains = ( /*#__PURE__*/_pureAssign(strIncludes));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrIncludes(value, searchString, position) {\n    if (isRegExp(searchString)) {\n        throwTypeError(\"'searchString' must not be a regular expression\" + dumpObj(searchString));\n    }\n    return strIndexOf(value, asString(searchString), position) !== -1;\n}\n\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrWhiteSpace(value) {\n    if (isString(value)) {\n        return value.replace(/[\\s\\t\\r\\n\\f]+/g, EMPTY) === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n/*#__NO_SIDE_EFFECTS__*/\nfunction strIsNullOrEmpty(value) {\n    if (isString(value)) {\n        return value === EMPTY;\n    }\n    return isNullOrUndefined(value);\n}\n\nvar strStartsWith = ( /*#__PURE__*/_unwrapFunctionWithPoly(\"startsWith\", StrProto, polyStrStartsWith));\n/*#__NO_SIDE_EFFECTS__*/\nfunction polyStrStartsWith(value, searchString, position) {\n    _throwIfNotString(value);\n    var searchValue = isString(searchString) ? searchString : asString(searchString);\n    var pos = position > 0 ? position : 0;\n    return strSubstring(value, pos, pos + searchValue[LENGTH]) === searchValue;\n}\n\nvar REF = \"ref\";\nvar UNREF = \"unref\";\nvar HAS_REF = \"hasRef\";\nvar ENABLED = \"enabled\";\n/*#__NO_SIDE_EFFECTS__*/\nfunction _createTimerHandler(startTimer, refreshFn, cancelFn) {\n    var ref = true;\n    var timerId = startTimer ? refreshFn(NULL_VALUE) : NULL_VALUE;\n    var theTimerHandler;\n    function _unref() {\n        ref = false;\n        timerId && timerId[UNREF] && timerId[UNREF]();\n        return theTimerHandler;\n    }\n    function _cancel() {\n        timerId && cancelFn(timerId);\n        timerId = NULL_VALUE;\n    }\n    function _refresh() {\n        timerId = refreshFn(timerId);\n        if (!ref) {\n            _unref();\n        }\n        return theTimerHandler;\n    }\n    function _setEnabled(value) {\n        !value && timerId && _cancel();\n        value && !timerId && _refresh();\n    }\n    theTimerHandler = {\n        cancel: _cancel,\n        refresh: _refresh\n    };\n    theTimerHandler[HAS_REF] = function () {\n        if (timerId && timerId[HAS_REF]) {\n            return timerId[HAS_REF]();\n        }\n        return ref;\n    };\n    theTimerHandler[REF] = function () {\n        ref = true;\n        timerId && timerId[REF] && timerId[REF]();\n        return theTimerHandler;\n    };\n    theTimerHandler[UNREF] = _unref;\n    theTimerHandler = objDefineProp(theTimerHandler, ENABLED, {\n        get: function () { return !!timerId; },\n        set: _setEnabled\n    });\n    return {\n        h: theTimerHandler,\n        dn: function () {\n            timerId = NULL_VALUE;\n        }\n    };\n}\n\nvar _setTimeoutFn;\nvar _clearTimeoutFn;\nfunction _resolveTimeoutFn(timeoutFn) {\n    var result = isFunction(timeoutFn) ? timeoutFn : _setTimeoutFn;\n    if (!result) {\n        var globalOverrides = _getGlobalConfig().tmOut || [];\n        if (isArray(globalOverrides) && globalOverrides.length > 0 && isFunction(globalOverrides[0])) {\n            result = globalOverrides[0];\n        }\n    }\n    return result || setTimeout;\n}\nfunction _resolveClearTimeoutFn(timeoutFn) {\n    var result = isFunction(timeoutFn) ? timeoutFn : _clearTimeoutFn;\n    if (!result) {\n        var globalOverrides = _getGlobalConfig().tmOut || [];\n        if (isArray(globalOverrides) && globalOverrides.length > 1 && isFunction(globalOverrides[1])) {\n            result = globalOverrides[1];\n        }\n    }\n    return result || clearTimeout;\n}\nfunction _createTimeoutWith(startTimer, overrideFn, theArgs) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    var setFn = _resolveTimeoutFn(len > 0 ? overrideFn[0] : (!isArr ? overrideFn : UNDEF_VALUE));\n    var clearFn = _resolveClearTimeoutFn(len > 1 ? overrideFn[1] : UNDEF_VALUE);\n    var timerFn = theArgs[0];\n    theArgs[0] = function () {\n        handler.dn();\n        fnApply(timerFn, UNDEF_VALUE, ArrSlice[CALL](arguments));\n    };\n    var handler = _createTimerHandler(startTimer, function (timerId) {\n        if (timerId) {\n            if (timerId.refresh) {\n                timerId.refresh();\n                return timerId;\n            }\n            fnApply(clearFn, UNDEF_VALUE, [timerId]);\n        }\n        return fnApply(setFn, UNDEF_VALUE, theArgs);\n    }, function (timerId) {\n        fnApply(clearFn, UNDEF_VALUE, [timerId]);\n    });\n    return handler.h;\n}\nfunction setTimeoutOverrides(overrideFn) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    _setTimeoutFn = (len > 0 ? overrideFn[0] : (!isArr ? overrideFn : UNDEF_VALUE));\n    _clearTimeoutFn = (len > 1 ? overrideFn[1] : UNDEF_VALUE);\n}\nfunction setGlobalTimeoutOverrides(overrideFn) {\n    var isArr = isArray(overrideFn);\n    var len = isArr ? overrideFn.length : 0;\n    var globalCfg = _getGlobalConfig();\n    if (!overrideFn) {\n        globalCfg.tmOut = undefined;\n    }\n    else {\n        globalCfg.tmOut = [\n            (len > 0 ? overrideFn[0] : (!isArr ? overrideFn : null)),\n            (len > 1 ? overrideFn[1] : null)\n        ];\n    }\n}\nfunction scheduleTimeout(callback, timeout) {\n    return _createTimeoutWith(true, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction scheduleTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(true, overrideFn, ArrSlice[CALL](arguments, 1));\n}\nfunction createTimeout(callback, timeout) {\n    return _createTimeoutWith(false, UNDEF_VALUE, ArrSlice[CALL](arguments));\n}\nfunction createTimeoutWith(overrideFn, callback, timeout) {\n    return _createTimeoutWith(false, overrideFn, ArrSlice[CALL](arguments, 1));\n}\n\nvar _defaultIdleTimeout = 100;\nvar _maxExecutionTime = 50;\n/*#__NO_SIDE_EFFECTS__*/\nfunction hasIdleCallback() {\n    return !!( /*#__PURE__*/getIdleCallback());\n}\nvar getIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"requestIdleCallback\"]));\nvar getCancelIdleCallback = ( /*#__PURE__*/_getGlobalInstFn(getInst, [\"cancelIdleCallback\"]));\nfunction setDefaultIdleTimeout(timeout) {\n    _defaultIdleTimeout = timeout;\n}\nfunction setDefaultMaxExecutionTime(maxTime) {\n    _maxExecutionTime = maxTime;\n}\nfunction scheduleIdleCallback(callback, options) {\n    function _createDeadline(timedOut) {\n        var startTime = perfNow();\n        return {\n            didTimeout: timedOut,\n            timeRemaining: function () {\n                return _maxExecutionTime - elapsedTime(startTime);\n            }\n        };\n    }\n    if (hasIdleCallback()) {\n        var handler_1 = _createTimerHandler(true, function (idleId) {\n            idleId && getCancelIdleCallback()(idleId);\n            return getIdleCallback()(function (deadline) {\n                handler_1.dn();\n                callback(deadline || _createDeadline(false));\n            }, options);\n        }, function (idleId) {\n            getCancelIdleCallback()(idleId);\n        });\n        return handler_1.h;\n    }\n    var timeout = (options || {}).timeout;\n    if (isUndefined(timeout)) {\n        timeout = _defaultIdleTimeout;\n    }\n    return scheduleTimeout(function () {\n        callback(_createDeadline(true));\n    }, timeout);\n}\n\nfunction scheduleInterval(callback, timeout) {\n    var theArguments = ArrSlice[CALL](arguments);\n    var handler = _createTimerHandler(true, function (intervalId) {\n        intervalId && clearInterval(intervalId);\n        return fnApply(setInterval, UNDEF_VALUE, theArguments);\n    }, function (intervalId) {\n        fnApply(clearInterval, UNDEF_VALUE, [intervalId]);\n    });\n    return handler.h;\n}\n\nexport { arrAppend, arrContains, arrEvery, arrFilter, arrFind, arrFindIndex, arrFindLast, arrFindLastIndex, arrForEach, arrFrom, arrIncludes, arrIndexOf, arrLastIndexOf, arrMap, arrReduce, arrSlice, arrSome, arrayDeepCopyHandler, asString, createArrayIterator, createCachedValue, createCustomError, createDeferredCachedValue, createEnum, createEnumKeyMap, createEnumValueMap, createFilenameRegex, createFnDeferredProxy, createIterable, createIterator, createProxyFuncs, createRangeIterator, createSimpleMap, createTimeout, createTimeoutWith, createTypeMap, createWildcardRegex, dateDeepCopyHandler, deepExtend, dumpObj, elapsedTime, encodeAsHtml, encodeAsJson, fnApply, fnBind, fnCall, functionDeepCopyHandler, getCancelIdleCallback, getDeferred, getDocument, getGlobal, getHistory, getIdleCallback, getInst, getIntValue, getKnownSymbol, getLazy, getLength, getNavigator, getPerformance, getSymbol, getValueByIter, getValueByKey, getWindow, getWritableDeferred, getWritableLazy, hasDocument, hasHistory, hasIdleCallback, hasNavigator, hasPerformance, hasSymbol, hasValue, hasWindow, isArray, isArrayBuffer, isAsyncFunction, isAsyncGenerator, isBigInt, isBlob, isBoolean, isDate, isDefined, isElement, isElementLike, isEmpty, isError, isFile, isFiniteNumber, isFormData, isFunction, isGenerator, isInteger, isIterable, isIterator, isMap, isMapLike, isNode, isNotTruthy, isNullOrUndefined, isNumber, isObject, isPlainObject, isPrimitive, isPrimitiveType, isPromise, isPromiseLike, isRegExp, isSet, isSetLike, isStrictNullOrUndefined, isStrictUndefined, isString, isSymbol, isThenable, isTruthy, isTypeof, isUndefined, isWeakMap, isWeakSet, isWebWorker, iterForOf, lazySafeGetInst, makeGlobRegex, makeIterable, mathAbs, mathAcos, mathAsin, mathAtan, mathAtan2, mathCeil, mathCos, mathExp, mathFloor, mathLog, mathMax, mathMin, mathPow, mathRandom, mathRound, mathSin, mathSqrt, mathTan, mathToInt, mathTrunc, newSymbol, normalizeJsName, objAssign, objCopyProps, objCreate, objDeepCopy, objDeepFreeze, objDefine, objDefineAccessors, objDefineGet, objDefineProp, objDefineProperties, objDefineProps, objEntries, objExtend, objForEachKey, objFreeze, objFromEntries, objGetOwnPropertyDescriptor, objGetOwnPropertyDescriptors, objGetOwnPropertyNames, objGetOwnPropertySymbols, objGetPrototypeOf, objHasOwn, objHasOwnProperty, objIs, objIsExtensible, objIsFrozen, objIsSealed, objKeys, objPreventExtensions, objPropertyIsEnumerable, objSeal, objSetPrototypeOf, objToString, objValues, perfNow, plainObjDeepCopyHandler, polyArrFind, polyArrFindIndex, polyArrFindLast, polyArrFindLastIndex, polyArrFrom, polyArrIncludes, polyGetKnownSymbol, polyIsArray, polyNewSymbol, polyObjEntries, polyObjHasOwn, polyObjIs, polyObjKeys, polyStrIncludes, polyStrSubstr, polyStrSymSplit, polyStrTrim, polyStrTrimEnd, polyStrTrimStart, polySymbolFor, polySymbolKeyFor, polyUtcNow, readArgs, safe, safeGet, safeGetDeferred, safeGetLazy, safeGetWritableDeferred, safeGetWritableLazy, scheduleIdleCallback, scheduleInterval, scheduleTimeout, scheduleTimeoutWith, setBypassLazyCache, setDefaultIdleTimeout, setDefaultMaxExecutionTime, setGlobalTimeoutOverrides, setTimeoutOverrides, setValueByIter, setValueByKey, strCamelCase, strContains, strEndsWith, strIncludes, strIndexOf, strIsNullOrEmpty, strIsNullOrWhiteSpace, strKebabCase, strLastIndexOf, strLeft, strLetterCase, strLower, strPadEnd, strPadStart, strRepeat, strRight, strSlice, strSnakeCase, strSplit, strStartsWith, strSubstr, strSubstring, strSymSplit, strTrim, strTrimEnd, strTrimLeft, strTrimRight, strTrimStart, strUpper, symbolFor, symbolKeyFor, throwError, throwRangeError, throwTypeError, throwUnsupported, utcNow };\n//# sourceMappingURL=ts-utils.js.map\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"https\");","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar InstantiationStatus;\n(function (InstantiationStatus) {\n    InstantiationStatus[InstantiationStatus[\"NOT_INSTANTIATED\"] = 0] = \"NOT_INSTANTIATED\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATING\"] = 1] = \"INSTANTIATING\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATED\"] = 2] = \"INSTANTIATED\";\n})(InstantiationStatus || (InstantiationStatus = {}));\nexport class BaseTelemetrySender {\n    constructor(key, clientFactory) {\n        // Whether or not the client has been instantiated\n        this._instantiationStatus = InstantiationStatus.NOT_INSTANTIATED;\n        // Queues used to store events until the sender is ready\n        this._eventQueue = [];\n        this._exceptionQueue = [];\n        this._clientFactory = clientFactory;\n        this._key = key;\n    }\n    /**\n     * Sends the event to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param eventName The name of the event to log\n     * @param data The data contanied in the event\n     */\n    sendEventData(eventName, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._eventQueue.push({ eventName, data });\n            }\n            return;\n        }\n        this._telemetryClient.logEvent(eventName, data);\n    }\n    /**\n     * Sends an exception to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param exception The exception to collect\n     * @param data Data associated with the exception\n     */\n    sendErrorData(exception, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._exceptionQueue.push({ exception, data });\n            }\n            return;\n        }\n        const errorData = { stack: exception.stack, message: exception.message, name: exception.name };\n        if (data) {\n            const errorProperties = data.properties || data;\n            data.properties = { ...errorProperties, ...errorData };\n        }\n        else {\n            data = { properties: errorData };\n        }\n        this._telemetryClient.logEvent(\"unhandlederror\", data);\n    }\n    /**\n     * Flushes the buffered telemetry data\n     */\n    async flush() {\n        return this._telemetryClient?.flush();\n    }\n    async dispose() {\n        if (this._telemetryClient) {\n            await this._telemetryClient.dispose();\n            this._telemetryClient = undefined;\n        }\n        return;\n    }\n    /**\n     * Flushes the queued events that existed before the client was instantiated\n     */\n    _flushQueues() {\n        this._eventQueue.forEach(({ eventName, data }) => this.sendEventData(eventName, data));\n        this._eventQueue = [];\n        this._exceptionQueue.forEach(({ exception, data }) => this.sendErrorData(exception, data));\n        this._exceptionQueue = [];\n    }\n    /**\n     * Instantiates the telemetry client to make the sender \"active\"\n     */\n    instantiateSender() {\n        if (this._instantiationStatus !== InstantiationStatus.NOT_INSTANTIATED) {\n            return;\n        }\n        this._instantiationStatus = InstantiationStatus.INSTANTIATING;\n        // Call the client factory to get the client and then let it know it's instatntiated\n        this._clientFactory(this._key).then(client => {\n            this._telemetryClient = client;\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n            this._flushQueues();\n        }).catch(err => {\n            console.error(err);\n            // If it failed to instntiate, then we don't want to try again.\n            // So we mark it as instantiated. See #94\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n        });\n    }\n}\n//# sourceMappingURL=baseTelemetrySender.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class TelemetryUtil {\n    static applyReplacements(data, replacementOptions) {\n        for (const key of Object.keys(data)) {\n            for (const option of replacementOptions) {\n                if (option.lookup.test(key)) {\n                    if (option.replacementString !== undefined) {\n                        data[key] = option.replacementString;\n                    }\n                    else {\n                        delete data[key];\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Given a key / connection string checks if it is a valid 1DS key\n     * @param key The key to check if it's a valid 1DS key\n     */\n    static shouldUseOneDataSystemSDK(key) {\n        // Simple to check to ensure the key is the right length and the dashes are in the right spot\n        return (key.length === 74 &&\n            key[32] === \"-\" &&\n            key[41] === \"-\" &&\n            key[46] === \"-\" &&\n            key[51] === \"-\" &&\n            key[56] === \"-\" &&\n            key[69] === \"-\");\n    }\n    // This also includes the common properties which core mixes in\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.nodeArch\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodecommithash\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.telemetryclientversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    static getAdditionalCommonProperties(osShim) {\n        return {\n            \"common.os\": osShim.platform,\n            \"common.nodeArch\": osShim.architecture,\n            \"common.platformversion\": (osShim.release || \"\").replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, \"$1$2$3\"),\n            // Do not change this string as it gets found and replaced upon packaging\n            \"common.telemetryclientversion\": \"1.2.0\"\n        };\n    }\n    // Get singleton instance of TelemetryUtil\n    static getInstance() {\n        if (!TelemetryUtil._instance) {\n            TelemetryUtil._instance = new TelemetryUtil();\n        }\n        return TelemetryUtil._instance;\n    }\n}\n//# sourceMappingURL=util.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nexport class BaseTelemetryReporter {\n    constructor(telemetrySender, vscodeAPI, initializationOptions) {\n        this.telemetrySender = telemetrySender;\n        this.vscodeAPI = vscodeAPI;\n        this.userOptIn = false;\n        this.errorOptIn = false;\n        this.disposables = [];\n        this._onDidChangeTelemetryLevel = new this.vscodeAPI.EventEmitter();\n        this.onDidChangeTelemetryLevel = this._onDidChangeTelemetryLevel.event;\n        this.telemetryLogger = this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender, initializationOptions);\n        // Keep track of the user's opt-in status\n        this.updateUserOptIn();\n        this.telemetryLogger.onDidChangeEnableStates(() => {\n            this.updateUserOptIn();\n        });\n    }\n    /**\n     * Updates the user's telemetry opt-in status\n     */\n    updateUserOptIn() {\n        this.errorOptIn = this.telemetryLogger.isErrorsEnabled;\n        this.userOptIn = this.telemetryLogger.isUsageEnabled;\n        // The sender is lazy loaded so if telemetry is off it's not loaded in\n        if (this.telemetryLogger.isErrorsEnabled || this.telemetryLogger.isUsageEnabled) {\n            this.telemetrySender.instantiateSender();\n        }\n        this._onDidChangeTelemetryLevel.fire(this.telemetryLevel);\n    }\n    get telemetryLevel() {\n        if (this.errorOptIn && this.userOptIn) {\n            return \"all\";\n        }\n        else if (this.errorOptIn) {\n            return \"error\";\n        }\n        else {\n            return \"off\";\n        }\n    }\n    /**\n     * Internal function which logs telemetry events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryEvent(eventName, properties, measurements, dangerous) {\n        // If it's dangerous we skip going through the logger as the logger checks opt-in status, etc.\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logUsage(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends a telemetry event.\n     * Properties are sanitized on best-effort basis to remove sensitive data prior to sending.\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * Sends a raw (unsanitized) telemetry event with the given properties and measurements.\n     * NOTE: This will not be logged to the output channel due to API limitations.\n     * @param eventName The name of the event\n     * @param properties The set of properties to add to the event in the form of a string key value pair\n     * @param measurements The set of measurements to add to the event in the form of a string key  number value pair\n     */\n    sendRawTelemetryEvent(eventName, properties, measurements) {\n        const modifiedProperties = { ...properties };\n        for (const propertyKey of Object.keys(modifiedProperties ?? {})) {\n            const propertyValue = modifiedProperties[propertyKey];\n            if (typeof propertyKey === \"string\" && propertyValue !== undefined) {\n                // Trusted values are not sanitized, which is what we want for raw telemetry\n                modifiedProperties[propertyKey] = new this.vscodeAPI.TelemetryTrustedValue(typeof propertyValue === \"string\" ? propertyValue : propertyValue.value);\n            }\n        }\n        this.sendTelemetryEvent(eventName, modifiedProperties, measurements);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry error events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryErrorEvent(eventName, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends an error event\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryErrorEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry error event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to run the properties and measures through sanitiziation, defaults to true\n     */\n    sendDangerousTelemetryErrorEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Disposes of the telemetry reporter\n     */\n    async dispose() {\n        await this.telemetrySender.dispose();\n        this.telemetryLogger.dispose();\n        return Promise.all(this.disposables.map(d => d.dispose()));\n    }\n}\n//# sourceMappingURL=baseTelemetryReporter.js.map","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nimport * as https from \"https\";\nimport * as os from \"os\";\nimport * as vscode from \"vscode\";\nimport { oneDataSystemClientFactory } from \"../common/1dsClientFactory\";\nimport { appInsightsClientFactory } from \"../common/appInsightsClientFactory\";\nimport { BaseTelemetryReporter } from \"../common/baseTelemetryReporter\";\nimport { BaseTelemetrySender } from \"../common/baseTelemetrySender\";\nimport { TelemetryUtil } from \"../common/util\";\n/**\n * Create a replacement for the XHTMLRequest object utilizing nodes HTTP module.\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction getDefaultXHROverride() {\n    // Override the way events get sent since node doesn't have XHTMLRequest\n    const customHttpXHROverride = {\n        sendPOST: (payload, oncomplete) => {\n            const options = {\n                method: \"POST\",\n                headers: {\n                    ...payload.headers,\n                    \"Content-Type\": \"application/json\",\n                    \"Content-Length\": Buffer.byteLength(payload.data)\n                }\n            };\n            try {\n                const req = https.request(payload.urlString, options, res => {\n                    res.on(\"data\", function (responseData) {\n                        oncomplete(res.statusCode ?? 200, res.headers, responseData.toString());\n                    });\n                    // On response with error send status of 0 and a blank response to oncomplete so we can retry events\n                    res.on(\"error\", function () {\n                        oncomplete(0, {});\n                    });\n                });\n                req.write(payload.data, (err) => {\n                    if (err) {\n                        oncomplete(0, {});\n                    }\n                });\n                req.end();\n            }\n            catch {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            }\n        }\n    };\n    return customHttpXHROverride;\n}\n/**\n * Create an XHR override from a custom fetcher function.\n * @param fetcher The custom fetcher function to use for sending telemetry data\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction createXHROverrideFromFetcher(fetcher) {\n    const xhrOverride = {\n        sendPOST: (payload, oncomplete) => {\n            const dataString = typeof payload.data === \"string\" ? payload.data : Buffer.from(payload.data).toString();\n            fetcher(payload.urlString, { method: \"POST\", headers: payload.headers, body: dataString })\n                .then(async (response) => {\n                const responseHeaders = {};\n                for (const [key, value] of response.headers) {\n                    responseHeaders[key] = value;\n                }\n                const body = await response.text();\n                oncomplete(response.status, responseHeaders, body);\n            })\n                .catch(() => {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            });\n        }\n    };\n    return xhrOverride;\n}\nexport class TelemetryReporter extends BaseTelemetryReporter {\n    constructor(connectionString, replacementOptions, initializationOptions, customFetcher) {\n        const xhrOverride = customFetcher ? createXHROverrideFromFetcher(customFetcher) : getDefaultXHROverride();\n        let clientFactory = (connectionString) => appInsightsClientFactory(connectionString, vscode.env.machineId, vscode.env.sessionId, xhrOverride, replacementOptions);\n        // If connection string is usable by 1DS use the 1DS SDk\n        if (TelemetryUtil.shouldUseOneDataSystemSDK(connectionString)) {\n            clientFactory = (key) => oneDataSystemClientFactory(key, vscode, xhrOverride);\n        }\n        const osShim = {\n            release: os.release(),\n            platform: os.platform(),\n            architecture: os.arch(),\n        };\n        const sender = new BaseTelemetrySender(connectionString, clientFactory);\n        if (connectionString && connectionString.indexOf(\"AIF-\") === 0) {\n            throw new Error(\"AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions\");\n        }\n        const initializationOpts = {\n            ...initializationOptions,\n            additionalCommonProperties: initializationOptions?.additionalCommonProperties ?\n                { ...initializationOptions.additionalCommonProperties, ...TelemetryUtil.getAdditionalCommonProperties(osShim) }\n                : TelemetryUtil.getAdditionalCommonProperties(osShim)\n        };\n        super(sender, vscode, initializationOpts);\n    }\n}\n//# sourceMappingURL=telemetryReporter.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BreezeChannelIdentifier } from \"@microsoft/applicationinsights-common\";\nimport { TelemetryUtil } from \"./util\";\nexport const appInsightsClientFactory = async (connectionString, machineId, sessionId, xhrOverride, replacementOptions) => {\n    let appInsightsClient;\n    try {\n        const basicAISDK = await import /* webpackMode: \"eager\" */(\"@microsoft/applicationinsights-web-basic\");\n        const extensionConfig = {};\n        if (xhrOverride) {\n            // Configure the channel to use a XHR Request override since it's not available in node\n            const channelConfig = {\n                alwaysUseXhrOverride: true,\n                httpXHROverride: xhrOverride\n            };\n            extensionConfig[BreezeChannelIdentifier] = channelConfig;\n        }\n        let instrumentationKey;\n        if (!connectionString.startsWith(\"InstrumentationKey=\")) {\n            instrumentationKey = connectionString;\n        }\n        const authConfig = instrumentationKey ? { instrumentationKey } : { connectionString };\n        appInsightsClient = new basicAISDK.ApplicationInsights({\n            ...authConfig,\n            disableAjaxTracking: true,\n            disableExceptionTracking: true,\n            disableFetchTracking: true,\n            disableCorrelationHeaders: true,\n            disableCookiesUsage: true,\n            autoTrackPageVisitTime: false,\n            emitLineDelimitedJson: false,\n            disableInstrumentationKeyValidation: true,\n            extensionConfig,\n        });\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Sets the appinsights client into a standardized form\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            const properties = { ...data?.properties, ...data?.measurements };\n            if (replacementOptions?.length) {\n                TelemetryUtil.applyReplacements(properties, replacementOptions);\n            }\n            appInsightsClient?.track({\n                name: eventName,\n                data: properties,\n                baseType: \"EventData\",\n                ext: { user: { id: machineId, authId: machineId }, app: { sesId: sessionId } },\n                baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n            });\n        },\n        flush: async () => {\n            appInsightsClient?.flush(false);\n        },\n        dispose: async () => {\n            const unloadPromise = new Promise((resolve) => {\n                appInsightsClient?.unload(true, () => {\n                    resolve();\n                    appInsightsClient = undefined;\n                }, 1000);\n            });\n            return unloadPromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=appInsightsClientFactory.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Configures 1DS properly and returns the core client object\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n * @returns The AI core object\n */\nconst getAICore = async (key, vscodeAPI, xhrOverride) => {\n    const oneDs = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-core-js\");\n    const postPlugin = await import(/* webpackMode: \"eager\" */ \"@microsoft/1ds-post-js\");\n    const appInsightsCore = new oneDs.AppInsightsCore();\n    const collectorChannelPlugin = new postPlugin.PostChannel();\n    // Configure the app insights core to send to collector++ and disable logging of debug info\n    const coreConfig = {\n        instrumentationKey: key,\n        endpointUrl: \"https://mobile.events.data.microsoft.com/OneCollector/1.0\",\n        loggingLevelTelemetry: 0,\n        loggingLevelConsole: 0,\n        disableCookiesUsage: true,\n        disableDbgExt: true,\n        disableInstrumentationKeyValidation: true,\n        channels: [[\n                collectorChannelPlugin\n            ]]\n    };\n    if (xhrOverride) {\n        coreConfig.extensionConfig = {};\n        // Configure the channel to use a XHR Request override since it's not available in node\n        const channelConfig = {\n            alwaysUseXhrOverride: true,\n            httpXHROverride: xhrOverride\n        };\n        coreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n    }\n    const config = vscodeAPI.workspace.getConfiguration(\"telemetry\");\n    const internalTesting = config.get(\"internalTesting\");\n    appInsightsCore.initialize(coreConfig, []);\n    appInsightsCore.addTelemetryInitializer((envelope) => {\n        envelope[\"ext\"] = envelope[\"ext\"] ?? {};\n        envelope[\"ext\"][\"web\"] = envelope[\"ext\"][\"web\"] ?? {};\n        envelope[\"ext\"][\"web\"][\"consentDetails\"] = \"{\\\"GPC_DataSharingOptIn\\\":false}\";\n        // Only add the remaining flags when `telemetry.internalTesting` is enabled\n        if (!internalTesting) {\n            return;\n        }\n        envelope[\"ext\"][\"utc\"] = envelope[\"ext\"][\"utc\"] ?? {};\n        // Sets it to be internal only based on Windows UTC flagging\n        envelope[\"ext\"][\"utc\"][\"flags\"] = 0x0000811ECD;\n    });\n    return appInsightsCore;\n};\n/**\n * Configures and creates a telemetry client using the 1DS sdk\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n */\nexport const oneDataSystemClientFactory = async (key, vscodeAPI, xhrOverride) => {\n    let appInsightsCore = await getAICore(key, vscodeAPI, xhrOverride);\n    const flushOneDS = async () => {\n        try {\n            const flushPromise = new Promise((resolve, reject) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.flush(true, (completedFlush) => {\n                    if (!completedFlush) {\n                        reject(\"Failed to flush app 1DS!\");\n                        return;\n                    }\n                });\n            });\n            return flushPromise;\n        }\n        catch (e) {\n            throw new Error(\"Failed to flush 1DS!\\n\" + e.message);\n        }\n    };\n    // Shape the app insights core from 1DS into a standard format\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsCore?.track({\n                    name: eventName,\n                    baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: flushOneDS,\n        dispose: async () => {\n            const disposePromise = new Promise((resolve) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.unload(false, () => {\n                    resolve();\n                    appInsightsCore = undefined;\n                    return;\n                }, 1000);\n            });\n            return disposePromise;\n        }\n    };\n    return telemetryClient;\n};\n//# sourceMappingURL=1dsClientFactory.js.map","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n","/*!\n * Tmp\n *\n * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>\n *\n * MIT Licensed\n */\n\n/*\n * Module dependencies.\n */\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst crypto = require('crypto');\nconst _c = { fs: fs.constants, os: os.constants };\n\n/*\n * The working inner variables.\n */\nconst // the random characters to choose from\n  RANDOM_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n  TEMPLATE_PATTERN = /XXXXXX/,\n  DEFAULT_TRIES = 3,\n  CREATE_FLAGS = (_c.O_CREAT || _c.fs.O_CREAT) | (_c.O_EXCL || _c.fs.O_EXCL) | (_c.O_RDWR || _c.fs.O_RDWR),\n  // constants are off on the windows platform and will not match the actual errno codes\n  IS_WIN32 = os.platform() === 'win32',\n  EBADF = _c.EBADF || _c.os.errno.EBADF,\n  ENOENT = _c.ENOENT || _c.os.errno.ENOENT,\n  DIR_MODE = 0o700 /* 448 */,\n  FILE_MODE = 0o600 /* 384 */,\n  EXIT = 'exit',\n  // this will hold the objects need to be removed on exit\n  _removeObjects = [],\n  // API change in fs.rmdirSync leads to error when passing in a second parameter, e.g. the callback\n  FN_RMDIR_SYNC = fs.rmdirSync.bind(fs);\n\nlet _gracefulCleanup = false;\n\n/**\n * Recursively remove a directory and its contents.\n *\n * @param {string} dirPath path of directory to remove\n * @param {Function} callback\n * @private\n */\nfunction rimraf(dirPath, callback) {\n  return fs.rm(dirPath, { recursive: true }, callback);\n}\n\n/**\n * Recursively remove a directory and its contents, synchronously.\n *\n * @param {string} dirPath path of directory to remove\n * @private\n */\nfunction FN_RIMRAF_SYNC(dirPath) {\n  return fs.rmSync(dirPath, { recursive: true });\n}\n\n/**\n * Gets a temporary file name.\n *\n * @param {(Options|tmpNameCallback)} options options or callback\n * @param {?tmpNameCallback} callback the callback function\n */\nfunction tmpName(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  _assertAndSanitizeOptions(opts, function (err, sanitizedOptions) {\n    if (err) return cb(err);\n\n    let tries = sanitizedOptions.tries;\n    (function _getUniqueName() {\n      try {\n        const name = _generateTmpName(sanitizedOptions);\n\n        // check whether the path exists then retry if needed\n        fs.stat(name, function (err) {\n          /* istanbul ignore else */\n          if (!err) {\n            /* istanbul ignore else */\n            if (tries-- > 0) return _getUniqueName();\n\n            return cb(new Error('Could not get a unique tmp filename, max tries reached ' + name));\n          }\n\n          cb(null, name);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    })();\n  });\n}\n\n/**\n * Synchronous version of tmpName.\n *\n * @param {Object} options\n * @returns {string} the generated random name\n * @throws {Error} if the options are invalid or could not generate a filename\n */\nfunction tmpNameSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const sanitizedOptions = _assertAndSanitizeOptionsSync(opts);\n\n  let tries = sanitizedOptions.tries;\n  do {\n    const name = _generateTmpName(sanitizedOptions);\n    try {\n      fs.statSync(name);\n    } catch (e) {\n      return name;\n    }\n  } while (tries-- > 0);\n\n  throw new Error('Could not get a unique tmp filename, max tries reached');\n}\n\n/**\n * Creates and opens a temporary file.\n *\n * @param {(Options|null|undefined|fileCallback)} options the config options or the callback function or null or undefined\n * @param {?fileCallback} callback\n */\nfunction file(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create and open the file\n    fs.open(name, CREATE_FLAGS, opts.mode || FILE_MODE, function _fileCreated(err, fd) {\n      /* istanbu ignore else */\n      if (err) return cb(err);\n\n      if (opts.discardDescriptor) {\n        return fs.close(fd, function _discardCallback(possibleErr) {\n          // the chance of getting an error on close here is rather low and might occur in the most edgiest cases only\n          return cb(possibleErr, name, undefined, _prepareTmpFileRemoveCallback(name, -1, opts, false));\n        });\n      } else {\n        // detachDescriptor passes the descriptor whereas discardDescriptor closes it, either way, we no longer care\n        // about the descriptor\n        const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n        cb(null, name, fd, _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, false));\n      }\n    });\n  });\n}\n\n/**\n * Synchronous version of file.\n *\n * @param {Options} options\n * @returns {FileSyncObject} object consists of name, fd and removeCallback\n * @throws {Error} if cannot create a file\n */\nfunction fileSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n  const name = tmpNameSync(opts);\n  let fd = fs.openSync(name, CREATE_FLAGS, opts.mode || FILE_MODE);\n  /* istanbul ignore else */\n  if (opts.discardDescriptor) {\n    fs.closeSync(fd);\n    fd = undefined;\n  }\n\n  return {\n    name: name,\n    fd: fd,\n    removeCallback: _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, true)\n  };\n}\n\n/**\n * Creates a temporary directory.\n *\n * @param {(Options|dirCallback)} options the options or the callback function\n * @param {?dirCallback} callback\n */\nfunction dir(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create the directory\n    fs.mkdir(name, opts.mode || DIR_MODE, function _dirCreated(err) {\n      /* istanbul ignore else */\n      if (err) return cb(err);\n\n      cb(null, name, _prepareTmpDirRemoveCallback(name, opts, false));\n    });\n  });\n}\n\n/**\n * Synchronous version of dir.\n *\n * @param {Options} options\n * @returns {DirSyncObject} object consists of name and removeCallback\n * @throws {Error} if it cannot create a directory\n */\nfunction dirSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const name = tmpNameSync(opts);\n  fs.mkdirSync(name, opts.mode || DIR_MODE);\n\n  return {\n    name: name,\n    removeCallback: _prepareTmpDirRemoveCallback(name, opts, true)\n  };\n}\n\n/**\n * Removes files asynchronously.\n *\n * @param {Object} fdPath\n * @param {Function} next\n * @private\n */\nfunction _removeFileAsync(fdPath, next) {\n  const _handler = function (err) {\n    if (err && !_isENOENT(err)) {\n      // reraise any unanticipated error\n      return next(err);\n    }\n    next();\n  };\n\n  if (0 <= fdPath[0])\n    fs.close(fdPath[0], function () {\n      fs.unlink(fdPath[1], _handler);\n    });\n  else fs.unlink(fdPath[1], _handler);\n}\n\n/**\n * Removes files synchronously.\n *\n * @param {Object} fdPath\n * @private\n */\nfunction _removeFileSync(fdPath) {\n  let rethrownException = null;\n  try {\n    if (0 <= fdPath[0]) fs.closeSync(fdPath[0]);\n  } catch (e) {\n    // reraise any unanticipated error\n    if (!_isEBADF(e) && !_isENOENT(e)) throw e;\n  } finally {\n    try {\n      fs.unlinkSync(fdPath[1]);\n    } catch (e) {\n      // reraise any unanticipated error\n      if (!_isENOENT(e)) rethrownException = e;\n    }\n  }\n  if (rethrownException !== null) {\n    throw rethrownException;\n  }\n}\n\n/**\n * Prepares the callback for removal of the temporary file.\n *\n * Returns either a sync callback or a async callback depending on whether\n * fileSync or file was called, which is expressed by the sync parameter.\n *\n * @param {string} name the path of the file\n * @param {number} fd file descriptor\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {fileCallback | fileCallbackSync}\n * @private\n */\nfunction _prepareTmpFileRemoveCallback(name, fd, opts, sync) {\n  const removeCallbackSync = _prepareRemoveCallback(_removeFileSync, [fd, name], sync);\n  const removeCallback = _prepareRemoveCallback(_removeFileAsync, [fd, name], sync, removeCallbackSync);\n\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Prepares the callback for removal of the temporary directory.\n *\n * Returns either a sync callback or a async callback depending on whether\n * tmpFileSync or tmpFile was called, which is expressed by the sync parameter.\n *\n * @param {string} name\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {Function} the callback\n * @private\n */\nfunction _prepareTmpDirRemoveCallback(name, opts, sync) {\n  const removeFunction = opts.unsafeCleanup ? rimraf : fs.rmdir.bind(fs);\n  const removeFunctionSync = opts.unsafeCleanup ? FN_RIMRAF_SYNC : FN_RMDIR_SYNC;\n  const removeCallbackSync = _prepareRemoveCallback(removeFunctionSync, name, sync);\n  const removeCallback = _prepareRemoveCallback(removeFunction, name, sync, removeCallbackSync);\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Creates a guarded function wrapping the removeFunction call.\n *\n * The cleanup callback is save to be called multiple times.\n * Subsequent invocations will be ignored.\n *\n * @param {Function} removeFunction\n * @param {string} fileOrDirName\n * @param {boolean} sync\n * @param {cleanupCallbackSync?} cleanupCallbackSync\n * @returns {cleanupCallback | cleanupCallbackSync}\n * @private\n */\nfunction _prepareRemoveCallback(removeFunction, fileOrDirName, sync, cleanupCallbackSync) {\n  let called = false;\n\n  // if sync is true, the next parameter will be ignored\n  return function _cleanupCallback(next) {\n    /* istanbul ignore else */\n    if (!called) {\n      // remove cleanupCallback from cache\n      const toRemove = cleanupCallbackSync || _cleanupCallback;\n      const index = _removeObjects.indexOf(toRemove);\n      /* istanbul ignore else */\n      if (index >= 0) _removeObjects.splice(index, 1);\n\n      called = true;\n      if (sync || removeFunction === FN_RMDIR_SYNC || removeFunction === FN_RIMRAF_SYNC) {\n        return removeFunction(fileOrDirName);\n      } else {\n        return removeFunction(fileOrDirName, next || function () {});\n      }\n    }\n  };\n}\n\n/**\n * The garbage collector.\n *\n * @private\n */\nfunction _garbageCollector() {\n  /* istanbul ignore else */\n  if (!_gracefulCleanup) return;\n\n  // the function being called removes itself from _removeObjects,\n  // loop until _removeObjects is empty\n  while (_removeObjects.length) {\n    try {\n      _removeObjects[0]();\n    } catch (e) {\n      // already removed?\n    }\n  }\n}\n\n/**\n * Random name generator based on crypto.\n * Adapted from http://blog.tompawlak.org/how-to-generate-random-values-nodejs-javascript\n *\n * @param {number} howMany\n * @returns {string} the generated random name\n * @private\n */\nfunction _randomChars(howMany) {\n  let value = [],\n    rnd = null;\n\n  // make sure that we do not fail because we ran out of entropy\n  try {\n    rnd = crypto.randomBytes(howMany);\n  } catch (e) {\n    rnd = crypto.pseudoRandomBytes(howMany);\n  }\n\n  for (let i = 0; i < howMany; i++) {\n    value.push(RANDOM_CHARS[rnd[i] % RANDOM_CHARS.length]);\n  }\n\n  return value.join('');\n}\n\n/**\n * Checks whether the `obj` parameter is defined or not.\n *\n * @param {Object} obj\n * @returns {boolean} true if the object is undefined\n * @private\n */\nfunction _isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\n/**\n * Parses the function arguments.\n *\n * This function helps to have optional arguments.\n *\n * @param {(Options|null|undefined|Function)} options\n * @param {?Function} callback\n * @returns {Array} parsed arguments\n * @private\n */\nfunction _parseArguments(options, callback) {\n  /* istanbul ignore else */\n  if (typeof options === 'function') {\n    return [{}, options];\n  }\n\n  /* istanbul ignore else */\n  if (_isUndefined(options)) {\n    return [{}, callback];\n  }\n\n  // copy options so we do not leak the changes we make internally\n  const actualOptions = {};\n  for (const key of Object.getOwnPropertyNames(options)) {\n    actualOptions[key] = options[key];\n  }\n\n  return [actualOptions, callback];\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePath(name, tmpDir, cb) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  fs.stat(pathToResolve, function (err) {\n    if (err) {\n      fs.realpath(path.dirname(pathToResolve), function (err, parentDir) {\n        if (err) return cb(err);\n\n        cb(null, path.join(parentDir, path.basename(pathToResolve)));\n      });\n    } else {\n      fs.realpath(pathToResolve, cb);\n    }\n  });\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePathSync(name, tmpDir) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  try {\n    fs.statSync(pathToResolve);\n    return fs.realpathSync(pathToResolve);\n  } catch (_err) {\n    const parentDir = fs.realpathSync(path.dirname(pathToResolve));\n\n    return path.join(parentDir, path.basename(pathToResolve));\n  }\n}\n\n/**\n * Generates a new temporary name.\n *\n * @param {Object} opts\n * @returns {string} the new random name according to opts\n * @private\n */\nfunction _generateTmpName(opts) {\n  const tmpDir = opts.tmpdir;\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.name)) {\n    return path.join(tmpDir, opts.dir, opts.name);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.template)) {\n    return path.join(tmpDir, opts.dir, opts.template).replace(TEMPLATE_PATTERN, _randomChars(6));\n  }\n\n  // prefix and postfix\n  const name = [\n    opts.prefix ? opts.prefix : 'tmp',\n    '-',\n    process.pid,\n    '-',\n    _randomChars(12),\n    opts.postfix ? '-' + opts.postfix : ''\n  ].join('');\n\n  return path.join(tmpDir, opts.dir, name);\n}\n\n/**\n * Asserts and sanitizes the basic options.\n *\n * @private\n */\nfunction _assertOptionsBase(options) {\n  if (!_isUndefined(options.name)) {\n    const name = options.name;\n\n    // assert that name is not absolute and does not contain a path\n    if (path.isAbsolute(name)) throw new Error(`name option must not contain an absolute path, found \"${name}\".`);\n\n    // must not fail on valid .<name> or ..<name> or similar such constructs\n    const basename = path.basename(name);\n    if (basename === '..' || basename === '.' || basename !== name)\n      throw new Error(`name option must not contain a path, found \"${name}\".`);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(options.template) && !options.template.match(TEMPLATE_PATTERN)) {\n    throw new Error(`Invalid template, found \"${options.template}\".`);\n  }\n\n  /* istanbul ignore else */\n  if ((!_isUndefined(options.tries) && isNaN(options.tries)) || options.tries < 0) {\n    throw new Error(`Invalid tries, found \"${options.tries}\".`);\n  }\n\n  // if a name was specified we will try once\n  options.tries = _isUndefined(options.name) ? options.tries || DEFAULT_TRIES : 1;\n  options.keep = !!options.keep;\n  options.detachDescriptor = !!options.detachDescriptor;\n  options.discardDescriptor = !!options.discardDescriptor;\n  options.unsafeCleanup = !!options.unsafeCleanup;\n\n  // for completeness' sake only, also keep (multiple) blanks if the user, purportedly sane, requests us to\n  options.prefix = _isUndefined(options.prefix) ? '' : options.prefix;\n  options.postfix = _isUndefined(options.postfix) ? '' : options.postfix;\n}\n\n/**\n * Gets the relative directory to tmpDir.\n *\n * @private\n */\nfunction _getRelativePath(option, name, tmpDir, cb) {\n  if (_isUndefined(name)) return cb(null);\n\n  _resolvePath(name, tmpDir, function (err, resolvedPath) {\n    if (err) return cb(err);\n\n    const relativePath = path.relative(tmpDir, resolvedPath);\n\n    if (!resolvedPath.startsWith(tmpDir)) {\n      return cb(new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`));\n    }\n\n    cb(null, relativePath);\n  });\n}\n\n/**\n * Gets the relative path to tmpDir.\n *\n * @private\n */\nfunction _getRelativePathSync(option, name, tmpDir) {\n  if (_isUndefined(name)) return;\n\n  const resolvedPath = _resolvePathSync(name, tmpDir);\n  const relativePath = path.relative(tmpDir, resolvedPath);\n\n  if (!resolvedPath.startsWith(tmpDir)) {\n    throw new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`);\n  }\n\n  return relativePath;\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptions(options, cb) {\n  _getTmpDir(options, function (err, tmpDir) {\n    if (err) return cb(err);\n\n    options.tmpdir = tmpDir;\n\n    try {\n      _assertOptionsBase(options, tmpDir);\n    } catch (err) {\n      return cb(err);\n    }\n\n    // sanitize dir, also keep (multiple) blanks if the user, purportedly sane, requests us to\n    _getRelativePath('dir', options.dir, tmpDir, function (err, dir) {\n      if (err) return cb(err);\n\n      options.dir = _isUndefined(dir) ? '' : dir;\n\n      // sanitize further if template is relative to options.dir\n      _getRelativePath('template', options.template, tmpDir, function (err, template) {\n        if (err) return cb(err);\n\n        options.template = template;\n\n        cb(null, options);\n      });\n    });\n  });\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptionsSync(options) {\n  const tmpDir = (options.tmpdir = _getTmpDirSync(options));\n\n  _assertOptionsBase(options, tmpDir);\n\n  const dir = _getRelativePathSync('dir', options.dir, tmpDir);\n  options.dir = _isUndefined(dir) ? '' : dir;\n\n  options.template = _getRelativePathSync('template', options.template, tmpDir);\n\n  return options;\n}\n\n/**\n * Helper for testing against EBADF to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isEBADF(error) {\n  return _isExpectedError(error, -EBADF, 'EBADF');\n}\n\n/**\n * Helper for testing against ENOENT to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isENOENT(error) {\n  return _isExpectedError(error, -ENOENT, 'ENOENT');\n}\n\n/**\n * Helper to determine whether the expected error code matches the actual code and errno,\n * which will differ between the supported node versions.\n *\n * - Node >= 7.0:\n *   error.code {string}\n *   error.errno {number} any numerical value will be negated\n *\n * CAVEAT\n *\n * On windows, the errno for EBADF is -4083 but os.constants.errno.EBADF is different and we must assume that ENOENT\n * is no different here.\n *\n * @param {SystemError} error\n * @param {number} errno\n * @param {string} code\n * @private\n */\nfunction _isExpectedError(error, errno, code) {\n  return IS_WIN32 ? error.code === code : error.code === code && error.errno === errno;\n}\n\n/**\n * Sets the graceful cleanup.\n *\n * If graceful cleanup is set, tmp will remove all controlled temporary objects on process exit, otherwise the\n * temporary objects will remain in place, waiting to be cleaned up on system restart or otherwise scheduled temporary\n * object removals.\n */\nfunction setGracefulCleanup() {\n  _gracefulCleanup = true;\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDir(options, cb) {\n  return fs.realpath((options && options.tmpdir) || os.tmpdir(), cb);\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDirSync(options) {\n  return fs.realpathSync((options && options.tmpdir) || os.tmpdir());\n}\n\n// Install process exit listener\nprocess.addListener(EXIT, _garbageCollector);\n\n/**\n * Configuration options.\n *\n * @typedef {Object} Options\n * @property {?boolean} keep the temporary object (file or dir) will not be garbage collected\n * @property {?number} tries the number of tries before give up the name generation\n * @property (?int) mode the access mode, defaults are 0o700 for directories and 0o600 for files\n * @property {?string} template the \"mkstemp\" like filename template\n * @property {?string} name fixed name relative to tmpdir or the specified dir option\n * @property {?string} dir tmp directory relative to the root tmp directory in use\n * @property {?string} prefix prefix for the generated name\n * @property {?string} postfix postfix for the generated name\n * @property {?string} tmpdir the root tmp directory which overrides the os tmpdir\n * @property {?boolean} unsafeCleanup recursively removes the created temporary directory, even when it's not empty\n * @property {?boolean} detachDescriptor detaches the file descriptor, caller is responsible for closing the file, tmp will no longer try closing the file during garbage collection\n * @property {?boolean} discardDescriptor discards the file descriptor (closes file, fd is -1), tmp will no longer try closing the file during garbage collection\n */\n\n/**\n * @typedef {Object} FileSyncObject\n * @property {string} name the name of the file\n * @property {string} fd the file descriptor or -1 if the fd has been discarded\n * @property {fileCallback} removeCallback the callback function to remove the file\n */\n\n/**\n * @typedef {Object} DirSyncObject\n * @property {string} name the name of the directory\n * @property {fileCallback} removeCallback the callback function to remove the directory\n */\n\n/**\n * @callback tmpNameCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n */\n\n/**\n * @callback fileCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback fileCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallback\n * @param {simpleCallback} [next] function to call whenever the tmp object needs to be removed\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallbackSync\n */\n\n/**\n * Callback function for function composition.\n * @see {@link https://github.com/raszi/node-tmp/issues/57|raszi/node-tmp#57}\n *\n * @callback simpleCallback\n */\n\n// exporting all the needed methods\n\n// evaluate _getTmpDir() lazily, mainly for simplifying testing but it also will\n// allow users to reconfigure the temporary directory\nObject.defineProperty(module.exports, 'tmpdir', {\n  enumerable: true,\n  configurable: false,\n  get: function () {\n    return _getTmpDirSync();\n  }\n});\n\nmodule.exports.dir = dir;\nmodule.exports.dirSync = dirSync;\n\nmodule.exports.file = file;\nmodule.exports.fileSync = fileSync;\n\nmodule.exports.tmpName = tmpName;\nmodule.exports.tmpNameSync = tmpNameSync;\n\nmodule.exports.setGracefulCleanup = setGracefulCleanup;\n","import * as vscode from 'vscode';\n\nexport class AdminTreeItem extends vscode.TreeItem {\n  constructor(\n    public readonly label: string,\n    public readonly collapsibleState: vscode.TreeItemCollapsibleState,\n    public readonly command?: vscode.Command,\n    public readonly iconPath?: vscode.ThemeIcon\n  ) {\n    super(label, collapsibleState);\n    this.command = command;\n    this.iconPath = iconPath;\n  }\n}\n","import * as vscode from 'vscode';\nimport { AdminTreeItem } from './AdminTreeItem';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class AdminTreeView implements vscode.TreeDataProvider<AdminTreeItem> {\n  private _onDidChangeTreeData: vscode.EventEmitter<AdminTreeItem | undefined | null | void> = new vscode.EventEmitter<AdminTreeItem | undefined | null | void>();\n  readonly onDidChangeTreeData: vscode.Event<AdminTreeItem | undefined | null | void> = this._onDidChangeTreeData.event;\n\n  constructor() {\n    Telemetry.Current.send('AdminTreeViewInitialized');\n  }\n\n  refresh(): void {\n    this._onDidChangeTreeData.fire();\n  }\n\n  getTreeItem(element: AdminTreeItem): vscode.TreeItem {\n    return element;\n  }\n\n  getChildren(element?: AdminTreeItem): Thenable<AdminTreeItem[]> {\n    if (!element) {\n      // Root level - return the admin nodes\n      return Promise.resolve([\n        new AdminTreeItem(\n          'Variables',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewVariables',\n            title: 'View Variables',\n            arguments: []\n          },\n          new vscode.ThemeIcon('symbol-variable')\n        ),\n        new AdminTreeItem(\n          'Connections',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewConnections',\n            title: 'View Connections',\n            arguments: []\n          },\n          new vscode.ThemeIcon('link')\n        ),\n        new AdminTreeItem(\n          'Providers',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewProviders',\n            title: 'View Providers',\n            arguments: []\n          },\n          new vscode.ThemeIcon('package')\n        ),\n        new AdminTreeItem(\n          'Configs',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewConfigs',\n            title: 'View Configs',\n            arguments: []\n          },\n          new vscode.ThemeIcon('settings-gear')\n        ),\n        new AdminTreeItem(\n          'Plugins',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewPlugins',\n            title: 'View Plugins',\n            arguments: []\n          },\n          new vscode.ThemeIcon('extensions')\n        ),\n        new AdminTreeItem(\n          'Server Health',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewServerHealth',\n            title: 'View Server Health',\n            arguments: []\n          },\n          new vscode.ThemeIcon('pulse')\n        )\n      ]);\n    }\n    return Promise.resolve([]);\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ConfigsView {\n    public static Current: ConfigsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private configJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ConfigsView.constructor Started');\n        Telemetry.Current.send('ConfigsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ConfigsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ConfigsView.loadData Started');\n        Telemetry.Current.send('ConfigsView.loadData.called');\n\n        const result = await Session.Current.Api.getConfig();\n        if (result.isSuccessful) {\n            this.configJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ConfigsView.renderHtml Started');\n        Telemetry.Current.send('ConfigsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ConfigsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ConfigsView.render Started');\n        Telemetry.Current.send('ConfigsView.render.called');\n\n        if (ConfigsView.Current) {\n            ConfigsView.Current._panel.reveal(vscode.ViewColumn.One);\n            ConfigsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"configsView\", \"Configs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ConfigsView.Current = new ConfigsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ConfigsView.dispose Started');\n        Telemetry.Current.send('ConfigsView.dispose.called');\n\n        ConfigsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ConfigsView._getWebviewContent Started');\n        Telemetry.Current.send('ConfigsView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from config sections\n        let tableRows = '';\n        if (this.configJson && this.configJson.sections) {\n            for (const section of this.configJson.sections) {\n                const sectionName = section.name || 'N/A';\n                \n                if (section.options && Array.isArray(section.options)) {\n                    for (const option of section.options) {\n                        const key = option.key || 'N/A';\n                        const value = option.value || 'N/A';\n                        \n                        tableRows += `\n                        <tr class=\"table-row\">\n                            <td>${this._escapeHtml(sectionName)}</td>\n                            <td>${this._escapeHtml(key)}</td>\n                            <td><code>${this._escapeHtml(String(value))}</code></td>\n                        </tr>`;\n                    }\n                }\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Configs</title>\n      </head>\n      <body>  \n        <h2>Airflow Configuration</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-configs\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Section</th>\n                    <th>Key</th>\n                    <th>Value</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ConfigsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ConfigsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ConfigsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-configs\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ConnectionsView {\n    public static Current: ConnectionsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private connectionsJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ConnectionsView.constructor Started');\n        Telemetry.Current.send('ConnectionsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ConnectionsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ConnectionsView.loadData Started');\n        Telemetry.Current.send('ConnectionsView.loadData.called');\n\n        const result = await Session.Current.Api.getConnections();\n        if (result.isSuccessful) {\n            this.connectionsJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ConnectionsView.renderHtml Started');\n        Telemetry.Current.send('ConnectionsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ConnectionsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ConnectionsView.render Started');\n        Telemetry.Current.send('ConnectionsView.render.called');\n\n        if (ConnectionsView.Current) {\n            ConnectionsView.Current._panel.reveal(vscode.ViewColumn.One);\n            ConnectionsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"connectionsView\", \"Connections\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ConnectionsView.Current = new ConnectionsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ConnectionsView.dispose Started');\n        Telemetry.Current.send('ConnectionsView.dispose.called');\n\n        ConnectionsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ConnectionsView._getWebviewContent Started');\n        Telemetry.Current.send('ConnectionsView._getWebviewContent.called');\n\n        const toolkitUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode\",\n            \"webview-ui-toolkit\",\n            \"dist\",\n            \"toolkit.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        let tableRows = '';\n        if (this.connectionsJson && this.connectionsJson.connections && Array.isArray(this.connectionsJson.connections)) {\n            for (const conn of this.connectionsJson.connections) {\n                const connId = conn.conn_id || 'N/A';\n                const connType = conn.conn_type || 'N/A';\n                const host = conn.host || '';\n                const port = conn.port || '';\n                const schema = conn.schema || '';\n                \n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(connId)}</td>\n                    <td><span class=\"tag\">${this._escapeHtml(connType)}</span></td>\n                    <td>${this._escapeHtml(host)}</td>\n                    <td>${this._escapeHtml(String(port))}</td>\n                    <td>${this._escapeHtml(schema)}</td>\n                </tr>`;\n            }\n        } else if (this.connectionsJson) {\n             // Fallback if structure is different\n             tableRows = `<tr><td colspan=\"5\"><pre>${JSON.stringify(this.connectionsJson, null, 2)}</pre></td></tr>`;\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${toolkitUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 11px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n        </style>\n        <title>Connections</title>\n      </head>\n      <body>  \n        <h2>Airflow Connections</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-connections\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Conn ID</th>\n                    <th>Type</th>\n                    <th>Host</th>\n                    <th>Port</th>\n                    <th>Schema</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${tableRows || '<tr><td colspan=\"5\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No connections found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        if (!text) return '';\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ConnectionsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ConnectionsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ConnectionsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-connections\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class PluginsView {\n    public static Current: PluginsView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private pluginsJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('PluginsView.constructor Started');\n        Telemetry.Current.send('PluginsView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('PluginsView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('PluginsView.loadData Started');\n        Telemetry.Current.send('PluginsView.loadData.called');\n\n        const result = await Session.Current.Api.getPlugins();\n        if (result.isSuccessful) {\n            this.pluginsJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('PluginsView.renderHtml Started');\n        Telemetry.Current.send('PluginsView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('PluginsView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('PluginsView.render Started');\n        Telemetry.Current.send('PluginsView.render.called');\n\n        if (PluginsView.Current) {\n            PluginsView.Current._panel.reveal(vscode.ViewColumn.One);\n            PluginsView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"pluginsView\", \"Plugins\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            PluginsView.Current = new PluginsView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('PluginsView.dispose Started');\n        Telemetry.Current.send('PluginsView.dispose.called');\n\n        PluginsView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('PluginsView._getWebviewContent Started');\n        Telemetry.Current.send('PluginsView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from plugins data\n        let tableRows = '';\n        if (this.pluginsJson && this.pluginsJson.plugins) {\n            for (const plugin of this.pluginsJson.plugins) {\n                const name = plugin.name || 'N/A';\n                const hooks = plugin.hooks && plugin.hooks.length > 0 ? plugin.hooks.join(', ') : 'None';\n                const executors = plugin.executors && plugin.executors.length > 0 ? plugin.executors.join(', ') : 'None';\n                const macros = plugin.macros && plugin.macros.length > 0 ? plugin.macros.map((m: any) => m.name).join(', ') : 'None';\n                \n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(name)}</td>\n                    <td>${this._escapeHtml(hooks)}</td>\n                    <td>${this._escapeHtml(executors)}</td>\n                    <td>${this._escapeHtml(macros)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Plugins</title>\n      </head>\n      <body>  \n        <h2>Airflow Plugins</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-plugins\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Name</th>\n                    <th>Hooks</th>\n                    <th>Executors</th>\n                    <th>Macros</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"4\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No plugins found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('PluginsView._setWebviewMessageListener Started');\n        Telemetry.Current.send('PluginsView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('PluginsView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-plugins\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ProvidersView {\n    public static Current: ProvidersView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private providersJson: any;\n\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ProvidersView.constructor Started');\n        Telemetry.Current.send('ProvidersView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ProvidersView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ProvidersView.loadData Started');\n        Telemetry.Current.send('ProvidersView.loadData.called');\n\n        const result = await Session.Current.Api.getProviders();\n        if (result.isSuccessful) {\n            this.providersJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ProvidersView.renderHtml Started');\n        Telemetry.Current.send('ProvidersView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ProvidersView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ProvidersView.render Started');\n        Telemetry.Current.send('ProvidersView.render.called');\n\n        if (ProvidersView.Current) {\n            ProvidersView.Current._panel.reveal(vscode.ViewColumn.One);\n            ProvidersView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"providersView\", \"Providers\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ProvidersView.Current = new ProvidersView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ProvidersView.dispose Started');\n        Telemetry.Current.send('ProvidersView.dispose.called');\n\n        ProvidersView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ProvidersView._getWebviewContent Started');\n        Telemetry.Current.send('ProvidersView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from providers data\n        let tableRows = '';\n        if (this.providersJson && this.providersJson.providers) {\n            for (const provider of this.providersJson.providers) {\n                const packageName = provider.package_name || 'N/A';\n                const version = provider.version || 'N/A';\n                const description = provider.description || 'N/A';\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(packageName)}</td>\n                    <td>${this._escapeHtml(version)}</td>\n                    <td>${this._escapeHtml(description)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Providers</title>\n      </head>\n      <body>  \n        <h2>Airflow Providers</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-providers\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Package Name</th>\n                    <th>Version</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"3\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No providers found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ProvidersView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ProvidersView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ProvidersView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-providers\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ServerHealthView {\n    public static Current: ServerHealthView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private healthJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('ServerHealthView.constructor Started');\n        Telemetry.Current.send('ServerHealthView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('ServerHealthView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('ServerHealthView.loadData Started');\n        Telemetry.Current.send('ServerHealthView.loadData.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getHealth();\n        if (result.isSuccessful) {\n            this.healthJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('ServerHealthView.renderHtml Started');\n        Telemetry.Current.send('ServerHealthView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('ServerHealthView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('ServerHealthView.render Started');\n        Telemetry.Current.send('ServerHealthView.render.called');\n\n        if (ServerHealthView.Current) {\n            ServerHealthView.Current._panel.reveal(vscode.ViewColumn.One);\n            ServerHealthView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"serverHealthView\", \"Server Health\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            ServerHealthView.Current = new ServerHealthView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('ServerHealthView.dispose Started');\n        Telemetry.Current.send('ServerHealthView.dispose.called');\n\n        ServerHealthView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('ServerHealthView._getWebviewContent Started');\n        Telemetry.Current.send('ServerHealthView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from health data\n        let tableRows = '';\n        if (this.healthJson) {\n            // Metadatabase status\n            if (this.healthJson.metadatabase) {\n                const status = this.healthJson.metadatabase.status || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Metadatabase</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n            }\n\n            // Scheduler status\n            if (this.healthJson.scheduler) {\n                const status = this.healthJson.scheduler.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.scheduler.latest_scheduler_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Scheduler</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest Scheduler Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n\n            // Triggerer status\n            if (this.healthJson.triggerer) {\n                const status = this.healthJson.triggerer.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.triggerer.latest_triggerer_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>Triggerer</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest Triggerer Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n\n            // Dag Processor status\n            if (this.healthJson.dag_processor) {\n                const status = this.healthJson.dag_processor.status || 'N/A';\n                const latestHeartbeat = ui.toISODateTimeString(new Date(this.healthJson.dag_processor.latest_dag_processor_heartbeat)) || 'N/A';\n                const emoji = this._getHealthEmoji(status);\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>DAG Processor</td>\n                    <td>${emoji} ${this._escapeHtml(status)}</td>\n                </tr>`;\n                if (latestHeartbeat !== 'N/A') {\n                    tableRows += `\n                    <tr class=\"table-row\">\n                        <td>Latest DAG Processor Heartbeat</td>\n                        <td>${this._escapeHtml(latestHeartbeat)}</td>\n                    </tr>`;\n                }\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            h3 {\n                font-size: var(--font-size-md);\n                color: var(--vscode-descriptionForeground);\n                margin-top: -16px;\n                margin-bottom: var(--spacing-lg);\n                font-weight: normal;\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n        </style>\n        <title>Server Health</title>\n      </head>\n      <body>  \n        <h2>Server Health</h2>\n        <h3>${Session.Current.Server?.apiUrl}</h3>\n        <div class=\"controls\">\n            <vscode-button id=\"refresh-btn\" appearance=\"secondary\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Component</th>\n                    <th>Status</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"2\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No health data available</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('refresh-btn').addEventListener('click', () => {\n                vscode.postMessage({ command: 'refresh' });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getHealthEmoji(status: string): string {\n        const statusLower = status.toLowerCase();\n        if (statusLower === 'healthy') {\n            return '';\n        } else if (statusLower === 'unhealthy') {\n            return '';\n        }\n        return '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('ServerHealthView._setWebviewMessageListener Started');\n        Telemetry.Current.send('ServerHealthView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('ServerHealthView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class VariablesView {\n    public static Current: VariablesView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n    private variablesJson: any;\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('VariablesView.constructor Started');\n        Telemetry.Current.send('VariablesView.constructor.called');\n\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('VariablesView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('VariablesView.loadData Started');\n        Telemetry.Current.send('VariablesView.loadData.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getVariables();\n        if (result.isSuccessful) {\n            this.variablesJson = result.result;\n        }\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('VariablesView.renderHtml Started');\n        Telemetry.Current.send('VariablesView.renderHtml.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('VariablesView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('VariablesView.render Started');\n        Telemetry.Current.send('VariablesView.render.called');\n\n        if (VariablesView.Current) {\n            VariablesView.Current._panel.reveal(vscode.ViewColumn.One);\n            VariablesView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"variablesView\", \"Variables\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            VariablesView.Current = new VariablesView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('VariablesView.dispose Started');\n        Telemetry.Current.send('VariablesView.dispose.called');\n\n        VariablesView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('VariablesView._getWebviewContent Started');\n        Telemetry.Current.send('VariablesView._getWebviewContent.called');\n\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Build table rows from variables data\n        let tableRows = '';\n        if (this.variablesJson && this.variablesJson.variables) {\n            for (const variable of this.variablesJson.variables) {\n                const key = variable.key || 'N/A';\n                const value = variable.val || 'N/A';\n                const description = variable.description || '';\n                tableRows += `\n                <tr class=\"table-row\">\n                    <td>${this._escapeHtml(key)}</td>\n                    <td><code>${this._escapeHtml(value)}</code></td>\n                    <td>${this._escapeHtml(description)}</td>\n                </tr>`;\n            }\n        }\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${elementsUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body { \n                padding: var(--spacing-md); \n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            .controls {\n                margin-bottom: var(--spacing-lg);\n            }\n\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            code {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-editor-foreground);\n                padding: 2px 4px;\n                border-radius: 3px;\n                font-family: monospace;\n                font-size: 11px;\n            }\n        </style>\n        <title>Variables</title>\n      </head>\n      <body>  \n        <h2>Airflow Variables</h2>\n        <div class=\"controls\">\n            <vscode-button appearance=\"secondary\" id=\"refresh-variables\">Refresh</vscode-button>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                    <th>Description</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"3\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No variables found</td></tr>'}\n            </tbody>\n        </table>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('VariablesView._setWebviewMessageListener Started');\n        Telemetry.Current.send('VariablesView._setWebviewMessageListener.called');\n        \n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('VariablesView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"refresh-variables\":\n                        this.loadData();\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { encode } from 'base-64';\nimport * as ui from './UI';\nimport { MethodResult } from './MethodResult';\nimport { ServerConfig } from './Types';\nimport { Telemetry } from './Telemetry';\n\n// Wrapper for fetch to handle ESM node-fetch in CommonJS\nconst fetch = async (url: string, init?: any) => {\n    const module = await import('node-fetch');\n    return module.default(url, init);\n};\n\nexport class AirflowApi {\n    private jwtToken: string | undefined;\n\n    constructor(public config: ServerConfig) {}\n\n    private get version(): 'v1' | 'v2' | 'unknown' {\n        if (this.config.apiUrl.includes('v1')) { return 'v1'; }\n        if (this.config.apiUrl.includes('v2')) { return 'v2'; }\n        return 'unknown';\n    }\n\n    private async getJwtToken(): Promise<string | undefined> {\n        if (this.jwtToken) { return this.jwtToken; }\n\n\n        try {\n            const response = await fetch(this.config.apiUrl.replace(\"/api/v2\", \"\") + '/auth/token', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ username: this.config.apiUserName, password: this.config.apiPassword }),\n            });\n\n            const result = await response.json() as any;\n            if (response.status === 201 || response.status === 200) {\n                this.jwtToken = result['access_token'];\n                return this.jwtToken;\n            } else {\n                ui.logToOutput(`getJwtToken failed: ${response.status} - ${JSON.stringify(result)}`);\n            }\n        } catch (error) {\n            ui.logToOutput(\"getJwtToken Error\", error as Error);\n            Telemetry.Current.send('AirflowApi.getJwtToken.error', { error: (error as Error).message });\n        }\n        return undefined;\n    }\n\n    private async getHeaders(): Promise<Record<string, string>> {\n        const headers: Record<string, string> = {\n            'Content-Type': 'application/json'\n        };\n\n        if (this.version === 'v1') {\n            headers['Authorization'] = 'Basic ' + encode(`${this.config.apiUserName}:${this.config.apiPassword}`);\n        } else if (this.version === 'v2') {\n            const token = await this.getJwtToken();\n            if (token) {\n                headers['Authorization'] = 'Bearer ' + token;\n            } else {\n                ui.showWarningMessage('Unable to obtain JWT token for Airflow API v2.');\n            }\n        }\n        return headers;\n    }\n\n    public async checkConnection(): Promise<boolean> {\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags?limit=1`, { method: 'GET', headers });\n            return response.status === 200;\n        } catch (e) {\n            Telemetry.Current.send('AirflowApi.checkConnection.error', { error: (e as Error).message });\n            return false;\n        }\n    }\n\n    public async getDagList(): Promise<MethodResult<any[]>> {\n        const result = new MethodResult<any[]>();\n        const allDags: any[] = [];\n        let offset = 0;\n        const limit = 100;\n\n        try {\n            while (true) {\n                const headers = await this.getHeaders();\n                const response = await fetch(`${this.config.apiUrl}/dags?limit=${limit}&offset=${offset}`, { method: 'GET', headers });\n                const data = await response.json() as any;\n\n                if (response.status === 200) {\n                    allDags.push(...data[\"dags\"]);\n                    if (data[\"dags\"].length < limit) {\n                        break;\n                    }\n                    offset += limit;\n                } else {\n                    ui.showApiErrorMessage('Api Call Error', data);\n                    result.isSuccessful = false;\n                    return result;\n                }\n            }\n            result.result = allDags;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage('Cannot connect to Airflow.', error as Error);\n            Telemetry.Current.send('AirflowApi.getDagList.error', { error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async triggerDag(dagId: string, config: string = \"{}\", date?: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            let body: any = { conf: JSON.parse(config) };\n            \n            if (this.version === 'v1' && date) {\n                body.logical_date = date + \"T00:00:00Z\";\n            } else if (this.version === 'v2') {\n                body.logical_date = date ? (date + \"T00:00:00Z\") : new Date().toISOString();\n            }\n\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns`, {\n                method: 'POST',\n                headers,\n                body: JSON.stringify(body),\n            });\n\n            const data = await response.json();\n            if (response.status === 200 || response.status === 201) { // 201 Created is typical for POST\n                //ui.showInfoMessage(`${dagId} Triggered.`);\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Trigger Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Trigger Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.triggerDag.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getDagRun(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getDagRun.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getLastDagRun(dagId: string): Promise<MethodResult<any>> {\n        const history = await this.getDagRunHistory(dagId);\n        if (history.isSuccessful && history.result && history.result.dag_runs && history.result.dag_runs.length > 0) {\n            return this.getDagRun(dagId, history.result.dag_runs[0].dag_run_id);\n        }\n        const res = new MethodResult<any>();\n        res.isSuccessful = false;\n        return res;\n    }\n\n    public async getDagRunHistory(dagId: string, date?: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            let url = `${this.config.apiUrl}/dags/${dagId}/dagRuns?order_by=-start_date`;\n            \n            // If date is provided, filter runs for that specific day\n            if (date) {\n                const startDate = `${date}T00:00:00Z`;\n                const endDate = `${date}T23:59:59Z`;\n                url += `&start_date_gte=${encodeURIComponent(startDate)}&start_date_lte=${encodeURIComponent(endDate)}`;\n            }\n            \n            const response = await fetch(url, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getDagRunHistory.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async pauseDag(dagId: string, isPaused: boolean): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ is_paused: isPaused })\n            });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                //ui.showInfoMessage(`${dagId} ${isPaused ? \"PAUSED\" : \"UN-PAUSED\"}`);\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Pause Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Pause Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.pauseDag.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getSourceCode(dagId: string, fileToken?: string): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n            const headers = await this.getHeaders();\n            let url = \"\";\n            if (this.version === 'v1' && fileToken) {\n                url = `${this.config.apiUrl}/dagSources/${fileToken}`;\n            } else if (this.version === 'v2') {\n                url = `${this.config.apiUrl}/dagSources/${dagId}`;\n            } else {\n                throw new Error(\"Unknown Airflow Version or missing file token\");\n            }\n\n            const response = await fetch(url, { method: 'GET', headers });\n            \n            if (response.status === 200) {\n                if (this.version === 'v2') {\n                    const json = await response.json() as any;\n                    result.result = json.content;\n                } else {\n                    result.result = await response.text();\n                }\n                result.isSuccessful = true;\n            } else {\n                const data = await response.json();\n                ui.showApiErrorMessage(`${dagId} Source Code Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Source Code Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getSourceCode.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getImportErrors(): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/importErrors`, { method: 'GET', headers });\n            const data = await response.json();\n\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            Telemetry.Current.send('AirflowApi.getImportErrors.error', { error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n   public async getTaskInstanceLog(dagId: string, dagRunId: string, taskId: string, tryNumber: number): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            //ui.showInfoMessage('Fetching Task Logs...');\n            const headers = await this.getHeaders();\n            \n            const logRes = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}/taskInstances/${taskId}/logs/${tryNumber}`, { method: 'GET', headers });\n            const logJson = await logRes.json();\n            \n            result.result = logJson;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskInstanceLog.error', { dagId, dagRunId, taskId, tryNumber: tryNumber.toString(), error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n   public async getTaskInstanceLogText(dagId: string, dagRunId: string, taskId: string, tryNumber?: number): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n\n            if (tryNumber === undefined) {\n                //get latest try number\n                const taskInstancesResult = await this.getTaskInstances(dagId, dagRunId);\n                if (!taskInstancesResult.isSuccessful) {\n                    result.isSuccessful = false;\n                    result.error = taskInstancesResult.error;\n                    return result;\n                }\n                \n                const taskInstance = taskInstancesResult.result.task_instances.find((ti: any) => ti.task_id === taskId);\n                if (!taskInstance) {\n                    throw new Error(`Task instance not found for taskId: ${taskId}`);\n                }\n                tryNumber = taskInstance.try_number;\n            }\n            \n\n            const logJsonResult = await this.getTaskInstanceLog(dagId, dagRunId, taskId, tryNumber);\n            if (!logJsonResult.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = logJsonResult.error;\n                return result;\n            }\n            \n            const logJson = logJsonResult.result;\n            const logText = JSON.stringify(logJson, null, 2);\n\n            let logContent = '';\n            logContent +=`############################################################\\n`;\n            logContent += `Dag=${dagId}\\nDagRun=${dagRunId}\\nTaskId=${taskId}\\nTry=${tryNumber}\\n`;\n            logContent += `############################################################\\n\\n`;\n            logContent += logText;\n            \n            result.result = logContent;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskInstanceLogText.error', { dagId, dagRunId, taskId, tryNumber: tryNumber?.toString() || 'undefined', error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getLastDagRunLogText(dagId: string): Promise<MethodResult<string>> {\n        const result = new MethodResult<string>();\n        try {\n            //ui.showInfoMessage('Fetching Latest DAG Run Logs...');\n            const history = await this.getDagRunHistory(dagId);\n            if (!history.isSuccessful || !history.result.dag_runs.length) {\n                throw new Error(\"No DAG runs found\");\n            }\n\n            const dagRunId = history.result.dag_runs[0].dag_run_id;\n            let logContent = await this.getDagRunLogText(dagId, dagRunId);\n            if (!logContent.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = logContent.error;\n                return result;\n            }\n            result.result = logContent.result;\n            result.isSuccessful = true;\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getLastDagRunLogText.error', { dagId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n    \n    public async getDagRunLogText(dagId: string, dagRunId: string) : Promise<MethodResult<string>>{\n        const result = new MethodResult<string>();\n        //ui.showInfoMessage('Fetching DAG Run Logs...');\n        try {\n            const taskInstancesResult = await this.getTaskInstances(dagId, dagRunId);\n            if (!taskInstancesResult.isSuccessful) {\n                result.isSuccessful = false;\n                result.error = taskInstancesResult.error;\n                return result;\n            }\n\n            let logContent = '';\n            for (const ti of taskInstancesResult.result.task_instances) {\n                const taskId = ti.task_id;\n                const tryNumber = ti.try_number;\n\n                const logTextResult = await this.getTaskInstanceLogText(dagId, dagRunId, taskId, tryNumber);\n                if (!logTextResult.isSuccessful) {\n                    result.isSuccessful = false;\n                    result.error = logTextResult.error;\n                    return result;\n                }\n                logContent += logTextResult.result + '\\n\\n';\n            }\n            result.result = logContent;\n            result.isSuccessful = true;\n            return result\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Log Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.getDagRunLogText.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n\n    }\n\n    public async getDagInfo(dagId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}`);\n    }\n\n    public async getDagTasks(dagId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}/tasks`);\n    }\n\n    public async getTaskInstances(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        return this.genericGet(`/dags/${dagId}/dagRuns/${dagRunId}/taskInstances`);\n    }\n\n    public async cancelDagRun(dagId: string, dagRunId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ state: 'failed' })\n            });\n            const data = await response.json();\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`${dagId} Cancel Error`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`${dagId} Cancel Error`, error as Error);\n            Telemetry.Current.send('AirflowApi.cancelDagRun.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async getTaskXComs(dagId: string, dagRunId: string, taskId: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}/taskInstances/${taskId}/xcomEntries`, { method: 'GET', headers });\n            \n            if (response.status === 200) {\n                const data = await response.json();\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                const data = await response.json();\n                ui.showApiErrorMessage(`XCom fetch error for ${taskId}`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`XCom fetch error for ${taskId}`, error as Error);\n            Telemetry.Current.send('AirflowApi.getTaskXComs.error', { dagId, dagRunId, taskId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    public async updateDagRunNote(dagId: string, dagRunId: string, note: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}/dags/${dagId}/dagRuns/${dagRunId}`, {\n                method: 'PATCH',\n                headers,\n                body: JSON.stringify({ note: note })\n            });\n            const data = await response.json();\n            \n            if (response.status === 200) {\n                //ui.showInfoMessage('DAG run note updated successfully');\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`Failed to update note`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`Failed to update note`, error as Error);\n            Telemetry.Current.send('AirflowApi.updateDagRunNote.error', { dagId, dagRunId, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n\n    // Add other methods as needed (getConnections, getVariables, getProviders)\n    public async getConnections(): Promise<MethodResult<any>> {\n        return this.genericGet('/connections');\n    }\n\n    public async getVariables(): Promise<MethodResult<any>> {\n        return this.genericGet('/variables');\n    }\n\n    public async getProviders(): Promise<MethodResult<any>> {\n        return this.genericGet('/providers');\n    }\n\n    public async getConfig(): Promise<MethodResult<any>> {\n        return this.genericGet('/config');\n    }\n\n    public async getPlugins(): Promise<MethodResult<any>> {\n        return this.genericGet('/plugins');\n    }\n\n    public async getHealth(): Promise<MethodResult<any>> {\n        return this.genericGet('/monitor/health');\n    }\n\n    private async genericGet(endpoint: string): Promise<MethodResult<any>> {\n        const result = new MethodResult<any>();\n        try {\n            const headers = await this.getHeaders();\n            const response = await fetch(`${this.config.apiUrl}${endpoint}`, { method: 'GET', headers });\n            const data = await response.json();\n            if (response.status === 200) {\n                result.result = data;\n                result.isSuccessful = true;\n            } else {\n                ui.showApiErrorMessage(`Error fetching ${endpoint}`, data);\n                result.isSuccessful = false;\n            }\n        } catch (error) {\n            ui.showErrorMessage(`Error fetching ${endpoint}`, error as Error);\n            Telemetry.Current.send('AirflowApi.genericGet.error', { endpoint, error: (error as Error).message });\n            result.isSuccessful = false;\n            result.error = error as Error;\n        }\n        return result;\n    }\n}","import { DagView } from \"../dag/DagView\";\nimport { DagTreeView } from \"../dag/DagTreeView\";\n\n\nexport function DagTriggered(source: any, dagId: string, dagRunId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.goToDagRun(dagId, dagRunId);\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagStateWithDagId(dagId, dagRunId, \"queued\");\n    }\n    \n}\n\nexport function DagRunCancelled(source: any, dagId: string, dagRunId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.goToDagRun(dagId, dagRunId);\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagStateWithDagId(dagId, dagRunId, \"failed\");\n    }\n    \n}\n\n\nexport function DagPaused(source: any, dagId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.loadDagInfoOnly();\n    }\n\n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagPaused(dagId)\n    }\n    \n}\n\nexport function DagUnPaused(source: any, dagId: string) {\n\t\n    if (!(source instanceof DagView) && DagView.Current && DagView.Current.dagId === dagId) {\n        DagView.Current.loadDagInfoOnly();\n    }\n    \n    if (!(source instanceof DagTreeView) && DagTreeView.Current) {\n        DagTreeView.Current?.notifyDagUnPaused(dagId)\n    }\n    \n}","/* eslint-disable @typescript-eslint/naming-convention */\n\nexport class MethodResult<T> {\n    public result: T;\n    public isSuccessful: boolean;\n    public error: Error;\n    constructor() {\n        this.result = undefined as unknown as T;\n        this.isSuccessful = false;\n        this.error = undefined;\n    }\n}","import { AirflowApi } from \"./Api\";\nimport { ServerConfig } from '../common/Types';\nimport * as ui from '../common/UI';\nimport * as vscode from 'vscode';\n\nexport class Session {\n\tpublic static Current: Session;\n\n    public Api: AirflowApi | undefined;\n    public Server: ServerConfig | undefined;\n    public Context: vscode.ExtensionContext;\n    public ExtensionUri: vscode.Uri;\n    public ServerList: ServerConfig[] = [];\n\n\tpublic constructor(context: vscode.ExtensionContext) {\n\t\tSession.Current = this;\n        this.Context = context;\n        this.ExtensionUri = context.extensionUri;\n        this.LoadState();\n\t}\n\n    public SaveState() {\n        ui.logToOutput('Saving state...');\n        \n        this.Context.globalState.update('apiUrl', this.Server?.apiUrl);\n        this.Context.globalState.update('apiUserName', this.Server?.apiUserName);\n        this.Context.globalState.update('apiPassword', this.Server?.apiPassword);\n        this.Context.globalState.update('serverList', this.ServerList);\n    }\n\n    public LoadState() {\n        ui.logToOutput('Loading state...');\n\n        const apiUrlTemp: string = this.Context.globalState.get('apiUrl') || '';\n        const apiUserNameTemp: string = this.Context.globalState.get('apiUserName') || '';\n        const apiPasswordTemp: string = this.Context.globalState.get('apiPassword') || '';\n\n        if (apiUrlTemp && apiUserNameTemp) {\n            this.Server = { apiUrl: apiUrlTemp, apiUserName: apiUserNameTemp, apiPassword: apiPasswordTemp };\n            this.Api = new AirflowApi(this.Server);\n        }\n\n        this.ServerList = this.Context.globalState.get('serverList') || [];\n    }\n\n    public SetServer(server: ServerConfig) {\n        this.Server = server;\n        this.Api = new AirflowApi(this.Server);\n        this.SaveState();\n    }\n\n    public ChangeServer(apiUrl: string, apiUserName: string) {\n        this.Server = this.ServerList.find((server) => server.apiUrl === apiUrl && server.apiUserName === apiUserName);   \n        if (this.Server) {\n            this.Api = new AirflowApi(this.Server);\n            this.SaveState();\n        }\n    }\n\n    public RemoveServer(apiUrl: string, apiUserName: string) {\n        this.ServerList = this.ServerList.filter((server) => !(server.apiUrl === apiUrl && server.apiUserName === apiUserName));   \n        this.SaveState();\n    }\n\n    public AddServer(server: ServerConfig) {\n        const exists = this.ServerList.some((s) => s.apiUrl === server.apiUrl && s.apiUserName === server.apiUserName);\n        if (!exists) {\n            this.ServerList.push(server);\n            this.SaveState();\n        }\n    }\n\n    public TestServer(serverConfig: ServerConfig) {\n        let api = new AirflowApi(serverConfig);\n        let result = api.checkConnection();\n        return result;\n    }\n\n    public ClearServers() {\n        this.ServerList = [];\n        this.Server = undefined;\n        this.Api = undefined;\n        this.SaveState();\n    }\n\n    public GetServer(apiUrl: string, apiUserName: string) {\n        return this.ServerList.find((server) => server.apiUrl === apiUrl && server.apiUserName === apiUserName);\n    }\n\n    public GetWorkspaceFolders(): vscode.WorkspaceFolder[] {\n        return [...(vscode.workspace.workspaceFolders || [])];\n    }\n\n    public GetWorkspaceFolder(): vscode.WorkspaceFolder | undefined {\n        const folders = this.GetWorkspaceFolders();\n        if (folders.length > 0) {\n            return folders[0];\n        }\n        return undefined;\n    }\n\n    public get HasWorkspaceFolder(): boolean {\n        const folders = this.GetWorkspaceFolders();\n        return folders.length > 0;\n    }\n\n\tpublic dispose() {\n\t\tSession.Current = undefined;\n\t}\n}","import * as vscode from 'vscode';\nimport { Session } from './Session';\nimport * as fs from 'fs';\n\nexport async function InstallSkills(): Promise<void> \n{\n\n    const terminal = vscode.window.createTerminal({ name: 'Airflow Skills' });\n    terminal.show(false);\n    terminal.sendText('echo Installing Airflow Skills...', true);\n    // Wait for terminal readiness before sending the command.\n    setTimeout(() => {\n        terminal.sendText('npx skills add necatiarslan/airflow-vscode-extension --yes --skill \"*\" -a github-copilot', true);\n    }, 5000);\n\n    CleanupSkillsExistsCache();\n}\n\nlet _skillsExists : boolean | undefined = undefined;\n\nexport function AreSkillsInstalled(): boolean {\n    if (_skillsExists !== undefined) {\n        return _skillsExists;\n    }\n\n    if (!Session.Current.HasWorkspaceFolder) {\n        return false;\n    };\n\n    const skillsFolderPath = \".agents/skills/airflow\";\n    const skillsFolderUri = vscode.Uri.joinPath(Session.Current.GetWorkspaceFolder()!.uri, skillsFolderPath);\n    try {\n        _skillsExists = fs.existsSync(skillsFolderUri.fsPath);\n        return _skillsExists;\n    } catch (error) {\n        return false;\n    }\n}\n\nexport function CleanupSkillsExistsCache() {\n    //wait for 1 minute before resetting the cache to avoid excessive filesystem checks\n    setTimeout(() => {\n        _skillsExists = undefined;\n    }, 60000);\n}\n","import { TelemetryReporter } from \"@vscode/extension-telemetry\";\nimport * as vscode from \"vscode\";\n\nexport class Telemetry {\n\n    private connectionString = \"InstrumentationKey=10fbe7b4-13da-4481-ab61-902bd7acac44;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/;ApplicationId=1af62da8-61c9-4cb6-8c9b-34d84e6e8bfe\";\n    public static Current: Telemetry;\n\n    private reporter: TelemetryReporter | undefined = undefined;\n\n    constructor(context: vscode.ExtensionContext) {\n        Telemetry.Current = this;\n        if (vscode.env.isTelemetryEnabled && this.connectionString) {\n            this.reporter = new TelemetryReporter(this.connectionString);\n            context.subscriptions.push(this.reporter);\n        }\n    }\n\n    public send(eventName: string, properties?: { [key: string]: string }, measurements?: { [key: string]: number }) {\n        if (!vscode.env.isTelemetryEnabled) return;\n        if (!this.reporter) return;\n\n        this.reporter.sendTelemetryEvent(eventName, properties, measurements);\n    }\n\n    public sendError(eventName: string, errorOrProps?: Error | { [key: string]: string }, measurements?: { [key: string]: number }) {\n        if (!vscode.env.isTelemetryEnabled) return;\n        if (!this.reporter) return;\n\n\n        if (errorOrProps instanceof Error) {\n            this.reporter.sendTelemetryErrorEvent(eventName, {\n                message: errorOrProps.message,\n                name: errorOrProps.name,\n                stack: errorOrProps.stack ?? ''\n            }, measurements);\n        } else {\n            const props = errorOrProps || {};\n            this.reporter.sendTelemetryErrorEvent(eventName, props, measurements);\n        }\n    }\n\n    public dispose() {\n        if (this.reporter) {\n            this.reporter.dispose();\n        }\n    }\n\n}\n\n","import * as vscode from 'vscode';\nimport { Uri, Webview } from \"vscode\";\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\nlet outputChannel: vscode.OutputChannel;\nlet logsOutputChannel: vscode.OutputChannel;\n\nconst NEW_LINE: string = \"\\n\\n\";\n\nexport function toISODateString(date: Date | null): string {\n  if (!date) {\n    return \"\";\n  }\n  return date.toISOString().split('T')[0];\n}\n\nexport function toISODateTimeString(date: Date | null): string {\n  if (!date) {\n    return \"\";\n  }\n  return date.toISOString().replace('T', ' ').substring(0, 19);\n}\n\nexport function getUri(webview: Webview, extensionUri: Uri, pathList: string[]) {\n  return webview.asWebviewUri(Uri.joinPath(extensionUri, ...pathList));\n}\n\nexport function showOutputMessage(message: any, popupMessage: string = \"Results are printed to OUTPUT / Airflow-Extension\"): void {\n\n  if (!outputChannel) {\n    outputChannel = vscode.window.createOutputChannel(\"Airflow-Extension\");\n  }\n\n  outputChannel.clear();\n\n  if (typeof message === \"object\") {\n    outputChannel.appendLine(JSON.stringify(message, null, 4));\n  }\n  else {\n    outputChannel.appendLine(message);\n  }\n  outputChannel.show();\n  showInfoMessage(popupMessage);\n}\n\nexport function logToOutput(message: any, error: Error | undefined = undefined): void {\n  const now = new Date().toLocaleString();\n\n  if (!logsOutputChannel) {\n    logsOutputChannel = vscode.window.createOutputChannel(\"Airflow-Log\");\n  }\n\n  if (typeof message === \"object\") {\n    logsOutputChannel.appendLine(\"[\" + now + \"] \" + JSON.stringify(message, null, 4));\n  }\n  else {\n    logsOutputChannel.appendLine(\"[\" + now + \"] \" + message);\n  }\n\n  if (error) {\n    logsOutputChannel.appendLine(error.name);\n    logsOutputChannel.appendLine(error.message);\n    if (error.stack) {\n      logsOutputChannel.appendLine(error.stack);\n    }\n  }\n}\n\nexport function showInfoMessage(message: string): void {\n  vscode.window.showInformationMessage(message);\n}\n\nexport function showWarningMessage(message: string): void {\n  vscode.window.showWarningMessage(message);\n}\n\nexport function showErrorMessage(message: string, error: Error | undefined = undefined): void {\n  if (error) {\n    vscode.window.showErrorMessage(message + NEW_LINE + error.name + NEW_LINE + error.message);\n  }\n  else {\n    vscode.window.showErrorMessage(message);\n  }\n}\n\nexport function showApiErrorMessage(message: string, jsonResult: any): void {\n  let preText: string = \"\";\n  if (jsonResult) {\n    if (jsonResult.status === 403) {\n      preText = \"Permission Denied !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else if (jsonResult.status === 401) {\n      preText = \"Invalid Authentication Info !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else if (jsonResult.status === 404) {\n      preText = \"Resource Not Found !!!\";\n      vscode.window.showErrorMessage(preText);\n    }\n    else {\n      vscode.window.showErrorMessage(preText);\n    }\n  }\n  else {\n    vscode.window.showErrorMessage(message);\n  }\n}\n\nexport function getExtensionVersion() {\n  const { version: extVersion } = JSON.parse(\n    readFileSync(join(__dirname, '..', 'package.json'), { encoding: 'utf8' })\n  );\n  return extVersion;\n}\n\nexport function openFile(file: string) {\n  // Use workspace API to open file in editor and show it in column one\n  (async () => {\n    try {\n      const doc = await vscode.workspace.openTextDocument(vscode.Uri.file(file));\n      await vscode.window.showTextDocument(doc, { viewColumn: vscode.ViewColumn.One, preview: false });\n    } catch (err) {\n      logToOutput('openFile Error', err as Error);\n    }\n  })();\n}\n\nfunction padTo2Digits(num: number) {\n  return num.toString().padStart(2, '0');\n}\n\nexport function getDuration(startDate: Date, endDate: Date): string {\n  if (!startDate) {\n    return \"\";\n  }\n\n  if (!endDate || endDate < startDate) {\n    endDate = new Date();//now\n  }\n\n  const duration = endDate.valueOf() - startDate.valueOf();\n  return (convertMsToTime(duration));\n}\n\nexport function convertMsToTime(milliseconds: number): string {\n  let seconds = Math.floor(milliseconds / 1000);\n  let minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  seconds = seconds % 60;\n  minutes = minutes % 60;\n\n  return `${padTo2Digits(hours)}:${padTo2Digits(minutes)}:${padTo2Digits(seconds,)}`;\n}\n\nexport function isJsonString(jsonString: string): boolean {\n  try {\n    const json = JSON.parse(jsonString);\n    return (typeof json === 'object');\n  } catch (e) {\n    return false;\n  }\n}\n\nexport function isValidDate(dateString: string): boolean {\n  const regEx = /^\\d{4}-\\d{2}-\\d{2}$/;\n  if (!dateString.match(regEx)) {\n    return false;  // Invalid format\n  }\n  const d = new Date(dateString);\n  const dNum = d.getTime();\n  if (!dNum && dNum !== 0) {\n    return false; // NaN value, Invalid date\n  }\n  return d.toISOString().slice(0, 10) === dateString;\n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport { DagTreeItem } from './DagTreeItem';\nimport { DagTreeView } from './DagTreeView';\n\nexport class DagTreeDataProvider implements vscode.TreeDataProvider<DagTreeItem>\n{\n\tprivate _onDidChangeTreeData: vscode.EventEmitter<DagTreeItem | undefined | void> = new vscode.EventEmitter<DagTreeItem | undefined | void>();\n\treadonly onDidChangeTreeData: vscode.Event<DagTreeItem | undefined | void> = this._onDidChangeTreeData.event;\n\tdagList: any;\n\tdagTreeItemList: DagTreeItem[] = [];\n\tvisibleDagList: DagTreeItem[] = [];\n\n\trefresh(): void {\n\t\tthis._onDidChangeTreeData.fire();\n\t}\n\n\tloadDagTreeItemsFromApiResponse() {\n\t\tthis.dagTreeItemList = [];\n\t\tif (this.dagList) {\n\t\t\tfor (var dag of this.dagList) {\n\t\t\t\tif (dag) {\n\t\t\t\t\tlet treeItem = new DagTreeItem(dag);\n\t\t\t\t\tthis.dagTreeItemList.push(treeItem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetChildren(element: DagTreeItem): Thenable<DagTreeItem[]> {\n\t\tif (!element) {\n\t\t\tthis.visibleDagList = this.getVisibleDagList();\n\t\t\treturn Promise.resolve(this.visibleDagList);\n\t\t}\n\t\treturn Promise.resolve([]);\n\t}\n\n\tgetVisibleDagList(): DagTreeItem[]{\n\t\tvar result: DagTreeItem[] = [];\n\t\tfor (var node of this.dagTreeItemList) {\n\t\t\tif (DagTreeView.Current.FilterString && !node.doesFilterMatch(DagTreeView.Current.FilterString)) { continue; }\n\t\t\tif (DagTreeView.Current.ShowOnlyActive && node.IsPaused) { continue; }\n\t\t\tif (DagTreeView.Current.ShowOnlyFavorite && !node.IsFav) { continue; }\n\n\t\t\tresult.push(node);\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetTreeItem(element: DagTreeItem): DagTreeItem {\n\t\treturn element;\n\t}\n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport { AirflowDag } from '../common/Types';\nimport { DagTreeView } from './DagTreeView';\n\nexport class DagTreeItem extends vscode.TreeItem {\n    public IsPaused: boolean;\n    public IsActive: boolean;\n    public DagId: string;\n    public Owners: string[];\n    public Tags: { name: string }[];\n    public ApiResponse: AirflowDag;\n    public FileToken: string;\n    public LatestDagRunId: string = '';\n    public LatestDagState: string = '';\n    private _IsFav: boolean = false;\n    public IsFiltered: boolean = false;\n\n    constructor(apiResponse: AirflowDag) {\n        super(apiResponse.dag_id);\n        this.ApiResponse = apiResponse;\n        this.DagId = apiResponse.dag_id;\n        this.IsActive = apiResponse.is_active;\n        this.IsPaused = apiResponse.is_paused;\n        this.Owners = apiResponse.owners;\n        this.Tags = apiResponse.tags;\n        this.FileToken = apiResponse.file_token;\n        this._IsFav = DagTreeView.Current.FavoriteDags.includes(this.DagId);\n\n        this.setContextValue();\n        this.refreshUI();\n    }\n\n    public set IsFav(value: boolean) {\n        this._IsFav = value;\n        this.setContextValue();\n    }\n\n    public get IsFav(): boolean {\n        return this._IsFav;\n    }\n\n    public isDagRunning(): boolean {\n        return (this.LatestDagState === 'queued' || this.LatestDagState === 'running');\n    }\n\n    public setContextValue() {\n        let contextValue = \"#\";\n        contextValue += this.IsFav ? \"IsFav#\" : \"!IsFav#\";\n        contextValue += this.IsPaused ? \"IsPaused#\" : \"!IsPaused#\";\n        contextValue += this.IsActive ? \"IsActive#\" : \"!IsActive#\";\n        contextValue += this.IsFiltered ? \"IsFiltered#\" : \"!IsFiltered#\";\n        contextValue += this.isDagRunning() ? \"IsRunning#\" : \"!IsRunning#\";\n\n        this.contextValue = contextValue;\n    }\n\n    public refreshUI() {\n\n        if (this.IsPaused) {\n            this.iconPath = new vscode.ThemeIcon('circle-outline', new vscode.ThemeColor('disabledForeground'));\n            this.ApiResponse.is_paused = true;\n        }\n        else {\n            //\"queued\" \"running\" \"success\" \"failed\"\n            if (this.LatestDagState === 'queued') {\n                this.iconPath = new vscode.ThemeIcon('loading~spin', new vscode.ThemeColor('charts.yellow'));\n            }\n            else if (this.LatestDagState === 'running') {\n                this.iconPath = new vscode.ThemeIcon('loading~spin', new vscode.ThemeColor('charts.blue'));\n            }\n            else if (this.LatestDagState === 'success') {\n                this.iconPath = new vscode.ThemeIcon('check', new vscode.ThemeColor('testing.iconPassed'));\n            }\n            else if (this.LatestDagState === 'failed') {\n                this.iconPath = new vscode.ThemeIcon('error', new vscode.ThemeColor('testing.iconFailed'));\n            }\n            else {\n                this.iconPath = new vscode.ThemeIcon('circle-filled', new vscode.ThemeColor('charts.gray'));\n            }\n            this.ApiResponse.is_paused = false;\n        }\n        \n        // Update context value to reflect current running state\n        this.setContextValue();\n    }\n\n    public doesFilterMatch(filterString: string): boolean {\n        let words: string[] = filterString.split(',');\n        words = words.map(word => word.trim());\n\n        this.IsFiltered = false;\n        for (const word of words) {\n            if (this.DagId.includes(word)) { this.IsFiltered = true; break; }\n            if (this.Owners.includes(word))  { this.IsFiltered = true; break; }\n\n            for (const t of this.Tags) {\n                if (t.name.includes(word)) { this.IsFiltered = true; break; }\n            }\n        }\n        \n        return this.IsFiltered;\n    }\n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from 'vscode';\nimport * as tmp from 'tmp';\nimport * as fs from 'fs';\nimport { DagTreeItem } from './DagTreeItem';\nimport { DagTreeDataProvider } from './DagTreeDataProvider';\nimport { DagView } from './DagView';\nimport { DailyDagRunView } from '../report/DailyDagRunView';\nimport { DagRunView } from '../report/DagRunView';\nimport * as ui from '../common/UI';\nimport { ServerConfig } from '../common/Types';\nimport * as MessageHub from '../common/MessageHub';\nimport { Session } from '../common/Session';\nimport { DagLogView } from '../report/DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\n\nexport class DagTreeView {\n\n\tpublic static Current: DagTreeView;\n\n\tpublic FilterString: string = '';\n\tpublic ShowOnlyActive: boolean = true;\n\tpublic ShowOnlyFavorite: boolean = false;\n\tpublic FavoriteDags: string[] = [];\n\t\n\tprivate dagStatusInterval: NodeJS.Timeout | undefined;\n\tprivate view: vscode.TreeView<DagTreeItem>;\n\tprivate treeDataProvider: DagTreeDataProvider;\n\n\tpublic constructor() {\n\t\tui.logToOutput('DagTreeView.constructor Started');\n\t\tTelemetry.Current.send('dagTreeView.constructor.called');\n\t\t\n\t\tthis.treeDataProvider = new DagTreeDataProvider();\n\t\tthis.view = vscode.window.createTreeView('dagTreeView', { treeDataProvider: this.treeDataProvider, showCollapseAll: true });\n\t\tthis.loadState();\n\t\t\n\t\tSession.Current.Context!.subscriptions.push(this.view);\n\t\tSession.Current.Context!.subscriptions.push({ dispose: () => this.dispose() });\n\t\tDagTreeView.Current = this;\n\t\tthis.setFilterMessage();\n\t\tthis.refresh();\n\t}\n\n\tprivate dispose() {\n\t\tui.logToOutput('DagTreeView.dispose Started');\n\t\tif (this.dagStatusInterval) {\n\t\t\tclearInterval(this.dagStatusInterval);\n\t\t}\n\t}\n\n\tpublic async refresh(): Promise<void> {\n\t\tui.logToOutput('DagTreeView.refresh Started');\n\t\tTelemetry.Current.send('dagTreeView.refresh.called');\n\n\t\tif (!Session.Current.Api) {\n\t\t\tthis.treeDataProvider.dagList = [];\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\treturn;\n\t\t}\n\n\t\tawait vscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: \"Airflow: Loading...\",\n\t\t}, async (progress) => {\n\t\t\tprogress.report({ increment: 0 });\n\t\t\tawait this.loadDags();\n\t\t});\n\t\t\n\t\tawait this.getImportErrors();\n\t}\n\n\tpublic viewDagView(node: DagTreeItem): void {\n\t\tui.logToOutput('DagTreeView.viewDagView Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagView.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tDagView.render(node.DagId);\n\t}\n\n\tpublic async addToFavDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.addToFavDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.addToFavDAG.called');\n\n\t\tnode.IsFav = true;\n\t\tif (!this.FavoriteDags.includes(node.DagId)) {\n\t\t\tthis.FavoriteDags.push(node.DagId);\n\t\t}\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tpublic async deleteFromFavDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.deleteFromFavDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.deleteFromFavDAG.called');\n\n\t\tnode.IsFav = false;\n\t\tthis.FavoriteDags = this.FavoriteDags.filter(d => d !== node.DagId);\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tprivate createAndOpenTempFile(content: string, prefix: string, extension: string): void {\n\t\tconst tmpFile = tmp.fileSync({ mode: 0o644, prefix, postfix: extension });\n\t\tfs.appendFileSync(tmpFile.name, content);\n\t\tui.openFile(tmpFile.name);\n\t}\n\n\tprivate startDagStatusInterval(): void {\n\t\tif (!this.dagStatusInterval) {\n\t\t\tthis.dagStatusInterval = setInterval(() => {\n\t\t\t\tvoid this.refreshRunningDagState(this).catch((err: any) => ui.logToOutput('refreshRunningDagState Error', err));\n\t\t\t}, 10 * 1000);\n\t\t}\n\t}\n\n\tprivate handleTriggerSuccess(node: DagTreeItem, responseTrigger: any): void {\n\t\tnode.LatestDagRunId = responseTrigger['dag_run_id'];\n\t\tnode.LatestDagState = responseTrigger['state'];\n\t\tnode.refreshUI();\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.startDagStatusInterval();\n\t\tMessageHub.DagTriggered(this, node.DagId, node.LatestDagRunId);\n\t}\n\n\tpublic async triggerDag(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.triggerDag Started');\n\t\tTelemetry.Current.send('dagTreeView.triggerDag.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tif (node.IsPaused) {\n\t\t\tui.showWarningMessage('Dag is PAUSED !!!');\n\t\t\treturn;\n\t\t}\n\n\t\tif (node.isDagRunning()) {\n\t\t\tui.showWarningMessage('Dag is ALREADY RUNNING !!!');\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await Session.Current.Api.triggerDag(node.DagId);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.handleTriggerSuccess(node, result.result);\n\t\t}\n\t}\n\n\tprivate async refreshRunningDagState(dagTreeView: DagTreeView) {\n\t\tui.logToOutput('DagTreeView.refreshRunningDagState Started');\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tlet noDagIsRunning: boolean = true;\n\t\tfor (const node of dagTreeView.treeDataProvider.visibleDagList) {\n\t\t\tif (node.isDagRunning()) {\n\t\t\t\tnoDagIsRunning = false;\n\n\t\t\t\tconst result = await Session.Current.Api.getDagRun(node.DagId, node.LatestDagRunId);\n\n\t\t\t\tif (result.isSuccessful) {\n\t\t\t\t\tnode.LatestDagState = result.result['state'];\n\t\t\t\t\tnode.refreshUI();\n\t\t\t\t} else {\n\t\t\t\t\tnode.LatestDagRunId = '';\n\t\t\t\t\tnode.LatestDagState = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tdagTreeView.treeDataProvider.refresh();\n\t\t}\n\t\tif (noDagIsRunning && dagTreeView.dagStatusInterval) {\n\t\t\tclearInterval(dagTreeView.dagStatusInterval);\n\t\t\tdagTreeView.dagStatusInterval = undefined;\n\t\t\t//ui.showInfoMessage('All Dag Run(s) Completed');\n\t\t\tui.logToOutput('All Dag Run(s) Completed');\n\t\t}\n\t}\n\n\tpublic async triggerDagWConfig(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.triggerDagWConfig Started');\n\t\tTelemetry.Current.send('dagTreeView.triggerDagWConfig.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tlet triggerDagConfig = await vscode.window.showInputBox({ placeHolder: 'Enter Configuration JSON (Optional, must be a dict object) or Press Enter' });\n\n\t\tif (!triggerDagConfig) {\n\t\t\ttriggerDagConfig = \"{}\";\n\t\t}\n\n\t\tif (triggerDagConfig !== undefined) {\n\t\t\tconst result = await Session.Current.Api.triggerDag(node.DagId, triggerDagConfig);\n\n\t\t\tif (result.isSuccessful) {\n\t\t\t\tthis.handleTriggerSuccess(node, result.result);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async checkAllDagsRunState() {\n\t\tui.logToOutput('DagTreeView.checkAllDagsRunState Started');\n\t\tTelemetry.Current.send('dagTreeView.checkAllDagsRunState.called');\n\n\t\tif (!this.treeDataProvider) { return; }\n\t\tfor (const node of this.treeDataProvider.visibleDagList) {\n\t\t\tif (!node.IsPaused) {\n\t\t\t\tthis.checkDagRunState(node);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async notifyDagStateWithDagId(dagId: string, dagRunId?: string, dagState?: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagStateWithDagId Started');\n\t\tTelemetry.Current.send('dagTreeView.notifyDagStateWithDagId.called');\n\n\t\tif (!this.treeDataProvider) { return; }\n\t\tfor (const node of this.treeDataProvider.visibleDagList) {\n\t\t\tif (node.DagId === dagId) {\n\t\t\t\t//this.checkDagRunState(node);\n\t\t\t\tnode.LatestDagRunId = dagRunId;\n\t\t\t\tnode.LatestDagState = dagState;\n\t\t\t\tnode.refreshUI();\t\n\t\t\t\tthis.treeDataProvider.refresh();\n\n\t\t\t\tif (node.isDagRunning()) {\n\t\t\t\t\tthis.startDagStatusInterval();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async checkDagRunState(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.checkDagRunState Started');\n\t\tTelemetry.Current.send('dagTreeView.checkDagRunState.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (!node) { return; }\n\t\tif (node.IsPaused) { ui.showWarningMessage(node.DagId + 'Dag is PAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.getLastDagRun(node.DagId);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.LatestDagRunId = result.result.dag_run_id;\n\t\t\tnode.LatestDagState = result.result.state;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\n\t\t\tif (node.isDagRunning()) {\n\t\t\t\tthis.startDagStatusInterval();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async pauseDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.pauseDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.pauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (node.IsPaused) { ui.showWarningMessage(node.DagId + 'Dag is already PAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.pauseDag(node.DagId, true);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.IsPaused = true;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\tMessageHub.DagPaused(this, node.DagId);\n\t\t}\n\t}\n\n\tpublic async notifyDagPaused(dagId: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagPaused Started');\n\t\tthis.refresh();\n\t}\n\n\tpublic async notifyDagUnPaused(dagId: string) {\n\t\tui.logToOutput('DagTreeView.notifyDagUnPaused Started');\n\t\tthis.refresh();\n\t}\n\n\tpublic async unPauseDAG(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.unPauseDAG Started');\n\t\tTelemetry.Current.send('dagTreeView.unPauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\tif (!node.IsPaused) { ui.showInfoMessage(node.DagId + 'Dag is already UNPAUSED'); return; }\n\n\t\tconst result = await Session.Current.Api.pauseDag(node.DagId, false);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.IsPaused = false;\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\tMessageHub.DagUnPaused(this, node.DagId);\n\t\t}\n\t}\n\n\tpublic async cancelDagRun(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.cancelDagRun Started');\n\t\tTelemetry.Current.send('dagTreeView.cancelDagRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\t\t\n\t\tif (!node.isDagRunning()) {\n\t\t\tui.showWarningMessage('No running DAG to cancel');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!node.LatestDagRunId) {\n\t\t\tui.showWarningMessage('No DAG run ID found');\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await Session.Current.Api.cancelDagRun(node.DagId, node.LatestDagRunId);\n\t\tif (result.isSuccessful) {\n\t\t\tnode.LatestDagState = 'failed';\n\t\t\tnode.refreshUI();\n\t\t\tthis.treeDataProvider.refresh();\n\t\t\t//ui.showInfoMessage(`DAG Run ${node.LatestDagRunId} cancelled`);\n\t\t\t\n\t\t\tMessageHub.DagRunCancelled(this, node.DagId, node.LatestDagRunId);\n\t\t}\n\t}\n\n\tpublic async lastDAGRunLog(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.lastDAGRunLog Started');\n\t\tTelemetry.Current.send('dagTreeView.lastDAGRunLog.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\t// const result = await Session.Current.Api.getLastDagRunLogText(node.DagId);\n\t\t// if (result.isSuccessful) {\n\t\t// \tthis.createAndOpenTempFile(result.result, node.DagId, '.log');\n\t\t// }\n\n\t\tDagLogView.render(node.DagId, node.LatestDagRunId);\n\t}\n\n\tpublic async dagSourceCode(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.dagSourceCode Started');\n\t\tTelemetry.Current.send('dagTreeView.dagSourceCode.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getSourceCode(node.DagId, node.FileToken);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.createAndOpenTempFile(result.result, node.DagId, '.py');\n\t\t} else {\n\t\t\tui.logToOutput(result.result);\n\t\t\tui.showErrorMessage(result.result);\n\t\t}\n\t}\n\n\tpublic async showDagInfo(node: DagTreeItem) {\n\t\tui.logToOutput('DagTreeView.showDagInfo Started');\n\t\tTelemetry.Current.send('dagTreeView.showDagInfo.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getDagInfo(node.DagId);\n\n\t\tif (result.isSuccessful) {\n\t\t\tthis.createAndOpenTempFile(JSON.stringify(result.result, null, 2), node.DagId + '_info', '.json');\n\t\t} else {\n\t\t\tui.logToOutput(result.result);\n\t\t\tui.showErrorMessage('Failed to fetch DAG info');\n\t\t}\n\t}\n\n\tpublic async filter() {\n\t\tui.logToOutput('DagTreeView.filter Started');\n\t\tTelemetry.Current.send('dagTreeView.filter.called');\n\n\t\tconst filterStringTemp = await vscode.window.showInputBox({ value: this.FilterString, placeHolder: 'Enter your filters seperated by comma' });\n\n\t\tif (filterStringTemp === undefined) { return; }\n\n\t\tthis.FilterString = filterStringTemp;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async showOnlyActive() {\n\t\tui.logToOutput('DagTreeView.showOnlyActive Started');\n\t\tTelemetry.Current.send('dagTreeView.showOnlyActive.called');\n\n\t\tthis.ShowOnlyActive = !this.ShowOnlyActive;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async showOnlyFavorite() {\n\t\tui.logToOutput('DagTreeView.showOnlyFavorite Started');\n\t\tTelemetry.Current.send('dagTreeView.showOnlyFavorite.called');\n\n\t\tthis.ShowOnlyFavorite = !this.ShowOnlyFavorite;\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setFilterMessage();\n\t\tthis.saveState();\n\t}\n\n\tpublic async addServer() {\n\t\tui.logToOutput('DagTreeView.addServer Started');\n\t\tTelemetry.Current.send('dagTreeView.addServer.called');\n\n\n\t\tconst apiUrlTemp = await vscode.window.showInputBox({ value: 'http://localhost:8080/api/v2', placeHolder: 'API Full URL (Exp:http://localhost:8080/api/v2)' });\n\t\tif (!apiUrlTemp) { return; }\n\n\t\tconst userNameTemp = await vscode.window.showInputBox({ placeHolder: 'User Name' });\n\t\tif (!userNameTemp) { return; }\n\n\t\tconst passwordTemp = await vscode.window.showInputBox({ placeHolder: 'Password' });\n\t\tif (!passwordTemp) { return; }\n\n\t\tconst newServer: ServerConfig = { apiUrl: apiUrlTemp, apiUserName: userNameTemp, apiPassword: passwordTemp };\n\t\t\n\t\tlet result = await Session.Current.TestServer(newServer);\n\t\tif (!result) {\n\t\t\tui.showErrorMessage(\"Failed to connect to server.\");\n\t\t\treturn;\n\t\t}\n\n\t\tSession.Current.AddServer(newServer);\n\t\tSession.Current.SetServer(newServer);\n\n\t\tthis.refresh();\n\t}\n\n\tpublic async removeServer() {\n\t\tui.logToOutput('DagTreeView.removeServer Started');\n\t\tTelemetry.Current.send('dagTreeView.removeServer.called');\n\n\t\tif (Session.Current.ServerList.length === 0) { return; }\n\n\t\tconst items: string[] = Session.Current.ServerList.map(s => `${s.apiUrl} - ${s.apiUserName}`);\n\n\t\tconst selected = await vscode.window.showQuickPick(items, { canPickMany: false, placeHolder: 'Select To Remove' });\n\t\tif (!selected) { return; }\n\n\t\tconst selectedItems = selected.split(' - ');\n\t\tif (selectedItems[0]) {\n\t\t\tSession.Current.RemoveServer(selectedItems[0], selectedItems[1]);\n\t\t\t\n\t\t\tui.showInfoMessage(\"Server removed.\");\n\t\t}\n\t}\n\n\tpublic async connectServer() {\n\t\tui.logToOutput('DagTreeView.connectServer Started');\n\t\tTelemetry.Current.send('dagTreeView.connectServer.called');\n\n\t\tif (Session.Current.ServerList.length === 0) {\n\t\t\tthis.addServer();\n\t\t\treturn;\n\t\t}\n\n\t\tconst items: string[] = [];\n\t\tfor (const s of Session.Current.ServerList) {\n\t\t\titems.push(s.apiUrl + \" - \" + s.apiUserName);\n\t\t}\n\n\t\tconst selected = await vscode.window.showQuickPick(items, { canPickMany: false, placeHolder: 'Select To Connect' });\n\t\tif (!selected) { return; }\n\n\t\tconst selectedItems = selected.split(' - ');\n\n\t\tif (selectedItems[0]) {\n\t\t\tconst server = Session.Current.GetServer(selectedItems[0], selectedItems[1]);\n\t\t\tif (server) {\n\t\t\t\tlet result = await Session.Current.TestServer(server);\n\t\t\t\tif (result) \n\t\t\t\t{\n\t\t\t\t\tSession.Current.SetServer(server);\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tui.showErrorMessage(\"Failed to connect to server.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async clearServers() {\n\t\tui.logToOutput('DagTreeView.clearServers Started');\n\t\tTelemetry.Current.send('dagTreeView.clearServers.called');\n\n\t\tSession.Current.ClearServers();\n\t\tthis.treeDataProvider.dagList = undefined;\n\t\tthis.treeDataProvider.refresh();\n\t\tui.showInfoMessage(\"Server List Cleared\");\n\t}\n\n\tpublic async loadDags() {\n\t\tui.logToOutput('DagTreeView.loadDags Started');\n\t\tTelemetry.Current.send('dagTreeView.loadDags.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tthis.treeDataProvider.dagList = undefined;\n\n\t\tconst result = await Session.Current.Api.getDagList();\n\t\tif (result.isSuccessful) {\n\t\t\tthis.treeDataProvider.dagList = result.result;\n\t\t\tthis.treeDataProvider.loadDagTreeItemsFromApiResponse();\n\t\t}\n\t\tthis.treeDataProvider.refresh();\n\t\tthis.setViewTitle();\n\t}\n\n\tpublic async loadLatestRunStatusForAllDags() {\n\t\tui.logToOutput('DagTreeView.loadLatestRunStatusForAllDags Started');\n\t\tTelemetry.Current.send('dagTreeView.loadLatestRunStatusForAllDags.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n\t\t// Fetch latest run status for each visible DAG (limit to avoid too many API calls)\n\t\tconst visibleDags = this.treeDataProvider.visibleDagList.slice(0, 50); // Limit to first 50 DAGs\n\t\t\n\t\tfor (const dagItem of visibleDags) {\n\t\t\tif (!dagItem.IsPaused) {\n\t\t\t\ttry {\n\t\t\t\t\tconst runResult = await Session.Current.Api.getLastDagRun(dagItem.DagId);\n\t\t\t\t\tif (runResult.isSuccessful && runResult.result) {\n\t\t\t\t\t\tdagItem.LatestDagRunId = runResult.result.dag_run_id;\n\t\t\t\t\t\tdagItem.LatestDagState = runResult.result.state;\n\t\t\t\t\t\tdagItem.refreshUI();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// Silently continue if a DAG's last run can't be fetched\n\t\t\t\t\tui.logToOutput(`Failed to fetch last run for ${dagItem.DagId}`, error as Error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.treeDataProvider.refresh();\n\t}\n\n\tpublic async setViewTitle() {\n\t\tif (Session.Current.Server) {\n\t\t\tthis.view.title = Session.Current.Server.apiUrl + \" - \" + Session.Current.Server.apiUserName;\n\t\t} else {\n\t\t\tthis.view.title = \"Airflow\";\n\t\t}\n\t}\n\n\tpublic async getImportErrors() {\n\t\tui.logToOutput('DagTreeView.getImportErrors Started');\n\t\tif (!Session.Current.Api) { return; }\n\n\t\tconst result = await Session.Current.Api.getImportErrors();\n\t\tif (result.isSuccessful) {\n\t\t\tconst importErrors = result.result;\n\t\t\tif (importErrors.total_entries > 0) {\n\t\t\t\tui.showOutputMessage(result.result, \"Import Dag Errors! Check Output Panel\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate saveState() {\n\t\tui.logToOutput('DagTreeView.saveState Started');\n\t\tTelemetry.Current.send('dagTreeView.saveState.called');\n\n\t\ttry {\n\t\t\tSession.Current.Context!.globalState.update('FilterString', this.FilterString);\n\t\t\tSession.Current.Context!.globalState.update('ShowOnlyActive', this.ShowOnlyActive);\n\t\t\tSession.Current.Context!.globalState.update('ShowOnlyFavorite', this.ShowOnlyFavorite);\n\t\t\tSession.Current.Context!.globalState.update('FavoriteDags', this.FavoriteDags);\n\t\t} catch (error) {\n\t\t\tui.logToOutput(\"dagTreeView.saveState Error !!!\", error as Error);\n\t\t}\n\t}\n\n\tprivate setFilterMessage() {\n\t\tif (Session.Current.Server) {\n\t\t\tthis.view.message = this.getBoolenSign(this.ShowOnlyFavorite) + 'Fav, ' + this.getBoolenSign(this.ShowOnlyActive) + 'Active, Filter : ' + this.FilterString;\n\t\t}\n\t}\n\n\tprivate getBoolenSign(variable: boolean) {\n\t\treturn variable ? \"\" : \"\";\n\t}\n\n\tprivate loadState() {\n\t\tui.logToOutput('DagTreeView.loadState Started');\n\t\tTelemetry.Current.send('dagTreeView.loadState.called');\n\n\t\ttry {\n\t\t\tconst filterStringTemp: string = Session.Current.Context!.globalState.get('FilterString') || '';\n\t\t\tif (filterStringTemp) {\n\t\t\t\tthis.FilterString = filterStringTemp;\n\t\t\t\tthis.setFilterMessage();\n\t\t\t}\n\n\t\t\tconst ShowOnlyActiveTemp: boolean | undefined = Session.Current.Context!.globalState.get('ShowOnlyActive');\n\t\t\tif (ShowOnlyActiveTemp !== undefined) { this.ShowOnlyActive = ShowOnlyActiveTemp; }\n\n\t\t\tconst ShowOnlyFavoriteTemp: boolean | undefined = Session.Current.Context!.globalState.get('ShowOnlyFavorite');\n\t\t\tif (ShowOnlyFavoriteTemp !== undefined) { this.ShowOnlyFavorite = ShowOnlyFavoriteTemp; }\n\n\t\t\tconst FavoriteDagsTemp: string[] | undefined = Session.Current.Context!.globalState.get('FavoriteDags');\n\t\t\tif (FavoriteDagsTemp !== undefined) { this.FavoriteDags = FavoriteDagsTemp; }\n\n\t\t} catch (error) {\n\t\t\tui.logToOutput(\"dagTreeView.loadState Error !!!\", error as Error);\n\t\t}\n\t}\n\n\tpublic async viewConnections() {\n\t\tui.logToOutput('DagTreeView.viewConnections Started');\n\t\tTelemetry.Current.send('dagTreeView.viewConnections.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ConnectionsView } = await import('../admin/ConnectionsView');\n\t\t\tConnectionsView.render();\n\t\t}\n\t}\n\n\tpublic async viewVariables() {\n\t\tui.logToOutput('DagTreeView.viewVariables Started');\n\t\tTelemetry.Current.send('dagTreeView.viewVariables.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { VariablesView } = await import('../admin/VariablesView');\n\t\t\tVariablesView.render();\n\t\t}\n\t}\n\n\tpublic async viewProviders() {\n\t\tui.logToOutput('DagTreeView.viewProviders Started');\n\t\tTelemetry.Current.send('dagTreeView.viewProviders.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ProvidersView } = await import('../admin/ProvidersView');\n\t\t\tProvidersView.render();\n\t\t}\n\t}\n\n\tpublic async viewConfigs() {\n\t\tui.logToOutput('DagTreeView.viewConfigs Started');\n\t\tTelemetry.Current.send('dagTreeView.viewConfigs.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ConfigsView } = await import('../admin/ConfigsView');\n\t\t\tConfigsView.render();\n\t\t}\n\t}\n\n\tpublic async viewPlugins() {\n\t\tui.logToOutput('DagTreeView.viewPlugins Started');\n\t\tTelemetry.Current.send('dagTreeView.viewPlugins.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { PluginsView } = await import('../admin/PluginsView');\n\t\t\tPluginsView.render();\n\t\t}\n\t}\n\n\tpublic async viewDagRuns() {\n\t\tui.logToOutput('DagTreeView.viewDagRuns Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagRuns.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tDailyDagRunView.render();\n\t\t}\n\t}\n\n\tpublic async viewDagRunHistory() {\n\t\tui.logToOutput('DagTreeView.viewDagRunHistory Started');\n\t\tTelemetry.Current.send('dagTreeView.viewDagRunHistory.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tDagRunView.render();\n\t\t}\n\t}\n\n\tpublic async viewServerHealth() {\n\t\tui.logToOutput('DagTreeView.viewServerHealth Started');\n\t\tTelemetry.Current.send('dagTreeView.viewServerHealth.called');\n\n\t\tif (Session.Current.Api) {\n\t\t\tconst { ServerHealthView } = await import('../admin/ServerHealthView');\n\t\t\tServerHealthView.render();\n\t\t}\n\t}\n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as tmp from 'tmp';\nimport * as fs from 'fs';\nimport * as ui from '../common/UI';\nimport { DagTreeView } from \"./DagTreeView\";\nimport * as MessageHub from '../common/MessageHub';\nimport { Session } from '../common/Session';\nimport { AIHandler } from '../language_tools/AIHandler';\nimport { DagLogView } from '../report/DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagView {\n    public static Current: DagView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n\n\n    public dagId: string;\n    public dagRunId: string | undefined;\n\n    private dagJson: any;\n    private dagRunJson: any;\n    private dagRunHistoryJson: any;\n    private dagTaskInstancesJson: any;\n    private dagTasksJson: any;\n    private dagHistorySelectedDate: string | undefined = ui.toISODateString(new Date());\n\n    private dagStatusInterval: NodeJS.Timeout | undefined;\n    private activetabid: string = \"tab-1\";\n\n    private constructor(panel: vscode.WebviewPanel, dagId: string, dagRunId?: string) {\n        ui.logToOutput('DagView.constructor Started');\n        Telemetry.Current.send('dagView.constructor.called');\n\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadAllDagData();\n        ui.logToOutput('DagView.constructor Completed');\n    }\n\n    private resetDagData(){\n        this.activetabid = \"tab-1\";\n        this.dagJson = undefined;\n        this.dagRunJson = undefined;\n        this.dagRunHistoryJson = undefined;\n        this.dagTaskInstancesJson = undefined;\n        this.dagTasksJson = undefined;\n        this.stopCheckingDagRunStatus();\n    }\n\n    private async loadAllDagData() {\n        ui.logToOutput('DagView.loadAllDagData Started');\n        Telemetry.Current.send('dagView.loadAllDagData.called');\n\n        await this.getDagInfo();\n        if (this.dagRunId) {\n            await this.getDagRun();\n        }\n        else {\n            await this.getLastRun();\n        }\n        await this.getDagTasks();\n        //await this.getRunHistory();\n        await this.renderHmtl();\n    }\n\n    public async loadDagInfoOnly() {\n        ui.logToOutput('DagView.loadDagInfoOnly Started');\n        Telemetry.Current.send('dagView.loadDagInfoOnly.called');\n\n        await this.getDagInfo();\n        await this.renderHmtl();\n    }\n\n    private async renderHmtl() {\n        ui.logToOutput('DagView.renderHmtl Started');\n        Telemetry.Current.send('dagView.renderHmtl.called');\n\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        //ui.showOutputMessage(this._panel.webview.html);\n        ui.logToOutput('DagView.renderHmtl Completed');\n    }\n\n    public static render(dagId: string, dagRunId?: string) {\n        ui.logToOutput('DagView.render Started');\n        Telemetry.Current.send('dagView.render.called');\n\n        if (DagView.Current) {\n            DagView.Current.dagId = dagId;\n            DagView.Current.dagRunId = dagRunId;\n            DagView.Current._panel.reveal(vscode.ViewColumn.Two);\n            DagView.Current.resetDagData();\n            DagView.Current.loadAllDagData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagView\", \"Dag View\", vscode.ViewColumn.Two, {\n                enableScripts: true,\n            });\n\n\n            DagView.Current = new DagView(panel, dagId, dagRunId);\n        }\n    }\n\n    /**\n     * Helper method to create a temp file and open it\n     */\n    private createAndOpenTempFile(content: string, prefix: string, extension: string): void {\n        const tmpFile = tmp.fileSync({ mode: 0o644, prefix, postfix: extension });\n        fs.appendFileSync(tmpFile.name, content);\n        ui.openFile(tmpFile.name);\n    }\n\n    private async getLastRun() {\n        ui.logToOutput('DagView.getLastRun Started');\n        Telemetry.Current.send('dagView.getLastRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getLastDagRun(this.dagId);\n        if (result.isSuccessful) {\n            this.dagRunJson = result.result;\n            this.dagRunId = this.dagRunJson.dag_run_id;\n            this.getTaskInstances();\n\n            if(this.dagRunJson && this.dagRunJson.state === \"running\" )\n            {\n                this.startCheckingDagRunStatus();\n            }\n        }\n\n    }\n\n    public goToDagRun(dagId: string, dagRunId: string) {\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this.getDagRun();\n    }\n\n    public goToDag(dagId: string) {\n        this.dagId = dagId;\n        this.dagRunId = undefined;\n        this.getLastRun();\n    }\n    private async getDagRun() {\n        ui.logToOutput('DagView.getDagRun Started');\n        Telemetry.Current.send('dagView.getDagRun.called');\n\n\t\tif (!Session.Current.Api) { return; }\n        \n        const result = await Session.Current.Api.getDagRun(this.dagId, this.dagRunId);\n        if (result.isSuccessful) {\n            this.dagRunJson = result.result;\n            this.dagRunId = this.dagRunJson.dag_run_id;\n            this.getTaskInstances();\n        }\n        await this.renderHmtl();\n    }\n\n    private async getRunHistory(date?: string) {\n        ui.logToOutput('DagView.getRunHistory Started');\n        Telemetry.Current.send('dagView.getRunHistory.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagRunHistory(this.dagId, date);\n        if (result.isSuccessful) {\n            this.dagRunHistoryJson = result.result;\n        }\n\n    }\n\n    private async getTaskInstances() {\n        ui.logToOutput('DagView.getTaskInstances Started');\n        Telemetry.Current.send('dagView.getTaskInstances.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getTaskInstances(this.dagId, this.dagRunId);\n\n        if (result.isSuccessful) {\n            this.dagTaskInstancesJson = result.result;\n        }\n\n    }\n\n    private async getDagInfo() {\n        ui.logToOutput('DagView.getDagInfo Started');\n        Telemetry.Current.send('dagView.getDagInfo.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagInfo(this.dagId);\n        if (result.isSuccessful) {\n            this.dagJson = result.result;\n        }\n    }\n\n    private async getDagTasks() {\n        ui.logToOutput('DagView.getDagTasks Started');\n        Telemetry.Current.send('dagView.getDagTasks.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getDagTasks(this.dagId);\n        if (result.isSuccessful) {\n            this.dagTasksJson = result.result;\n        }\n    }\n\n    private dispose() {\n        ui.logToOutput('DagView.dispose Started');\n        Telemetry.Current.send('dagView.dispose.called');\n\n        DagView.Current = undefined;\n\n        // stop any running interval checks\n        this.stopCheckingDagRunStatus();\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagView._getWebviewContent Started');\n        Telemetry.Current.send('dagView.getWebviewContent.called');\n\n        //file URIs\n        const toolkitUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\", \n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        //LATEST DAG RUN\n        let state:string = \"\";\n        let logical_date:Date | undefined = undefined;\n        let start_date:Date | undefined = undefined;\n        let end_date:Date | undefined = undefined;\n        let logical_date_string:string = \"\";\n        let start_date_string:string = \"\";\n        let duration:string = \"\";\n        let isDagRunning:boolean = false;\n        let hasDagRun:boolean = false;\n\n        if(this.dagRunJson){\n            state = this.dagRunJson.state;\n            logical_date = this.dagRunJson.logical_date;\n            start_date = this.dagRunJson.start_date;\n            end_date = this.dagRunJson.end_date;\n            logical_date_string = logical_date ? ui.toISODateTimeString(new Date(logical_date)) : \"\";\n            start_date_string = start_date ? ui.toISODateTimeString(new Date(start_date)) : \"\";\n            duration = start_date ? ui.getDuration(new Date(start_date), end_date ? new Date(end_date) : new Date()) : \"\";\n            isDagRunning = (state === \"queued\" || state === \"running\") ? true : false;\n            hasDagRun = true;\n        }\n\n        let runningOrFailedTasks: string = \"\";\n        if (this.dagTaskInstancesJson) {\n            for (const t of this.dagTaskInstancesJson[\"task_instances\"]) {\n                if(t.state === \"running\" || t.state === \"failed\" || t.state === \"up_for_retry\" || t.state === \"up_for_reschedule\" || t.state === \"deferred\")\n                {\n                    runningOrFailedTasks += `<span class=\"task-tag state-${t.state}\">${t.task_id}</span> `;\n                }\n            }\n        }\n\n        //INFO TAB\n        let owners = (this.dagJson && Array.isArray(this.dagJson[\"owners\"])) ? this.dagJson[\"owners\"].join(\", \") : \"\";\n        let tags: string = \"\";\n        if (this.dagJson && Array.isArray(this.dagJson[\"tags\"])) {\n            this.dagJson[\"tags\"].forEach((item: any) => { tags += `<span class=\"tag\">${item.name}</span> `; });\n        }\n        let schedule = (this.dagJson && this.dagJson[\"timetable_description\"]) ? this.dagJson[\"timetable_description\"] + \" - \" + this.dagJson[\"timetable_summary\"]: \"\";\n        let next_run = (this.dagJson && this.dagJson[\"next_dagrun_data_interval_start\"]) ? ui.toISODateTimeString(new Date(this.dagJson[\"next_dagrun_data_interval_start\"])) : \"None\";\n        let isPausedText = (this.dagJson) ? (this.dagJson.is_paused ? \"true\" : \"false\") : \"unknown\";\n        let isPaused = isPausedText === \"true\";\n        \n        //TASKS TAB\n        let taskRows: string = \"\";\n        if (this.dagTaskInstancesJson) {\n            for (const t of this.dagTaskInstancesJson[\"task_instances\"].sort((a: any, b: any) => (a.start_date > b.start_date) ? 1 : -1)) {\n                taskRows += `\n                <tr class=\"table-row\">\n                    <td>\n                        <div style=\"display: flex; align-items: center;\">\n                            <div class=\"state-indicator state-${t.state}\" title=\"${t.state}\" ></div>\n                            <span class=\"task-name\">${t.task_id}</span> <span class=\"try-number\">(${t.try_number})</span>\n                        </div>\n                    </td>\n                    <td>\n                        <div class=\"action-links\">\n                            <a href=\"#\" class=\"link-button\" id=\"task-log-link-${t.task_id}\">Logs</a>\n                            <a href=\"#\" class=\"link-button\" id=\"task-xcom-link-${t.task_id}\">XComs</a>\n                        </div>\n                    </td>\n                    <td><span class=\"duration-badge\">${ui.getDuration(new Date(t.start_date), new Date(t.end_date))}</span></td>\n                    <td class=\"operator-type\">${t.operator}</td>\n                </tr>\n                `;\n            }\n        }\n\n        // BUILD TASK DEPENDENCY TREE\n        let taskDependencyTree: string = \"\";\n        if (this.dagTasksJson && this.dagTasksJson.tasks && this.dagTasksJson.tasks.length > 0) {\n            taskDependencyTree = this.buildTaskDependencyTree(this.dagTasksJson.tasks);\n        }\n\n        //HISTORY TAB\n        let runHistoryRows: string = \"\";\n        if (this.dagRunHistoryJson) {\n            for (const t of this.dagRunHistoryJson[\"dag_runs\"]) {\n                runHistoryRows += `\n                <tr class=\"table-row\">\n                    <td>\n                        <div style=\"display: flex; align-items: center;\">\n                            <div class=\"state-indicator state-${t.state}\" title=\"${t.state}\"></div>\n                            <span class=\"state-text\">${t.state}</span>\n                        </div>\n                    </td>\n                    <td><a href=\"#\" class=\"history-link\" id=\"history-dag-run-id-${t.dag_run_id}\">${ui.toISODateTimeString(new Date(t.start_date))}</a></td>\n                    <td><span class=\"duration-badge\">${ui.getDuration(new Date(t.start_date), new Date(t.end_date))}</span></td>\n                    <td><span class=\"note-text\">${t.note || ''}</span></td>\n                </tr>\n                `;\n            }\n        }\n\n\n        let result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <script type=\"module\" src=\"${toolkitUri}\"></script>\n        <script type=\"module\" src=\"${mainUri}\"></script>\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n            }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            /* Header Section */\n            .header-container {\n                display: flex;\n                align-items: center;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                padding-bottom: var(--spacing-md);\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            .dag-paused-indicator {\n                width: 12px;\n                height: 12px;\n                border-radius: 50%;\n            }\n            .dag-paused-true { background-color: var(--vscode-disabledForeground); }\n            .dag-paused-false { background-color: var(--vscode-testing-iconPassed); }\n\n            /* Tabs */\n            vscode-tabs {\n                border-radius: var(--border-radius);\n            }\n\n            section {\n                padding: 20px 0;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n            }\n            \n            th.section-header {\n                font-size: 13px;\n                color: var(--vscode-editor-foreground);\n                background-color: transparent;\n                border-bottom: 2px solid var(--vscode-button-background);\n                padding-bottom: 8px;\n                padding-left: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* Detail Layouts */\n            .detail-row td:first-child {\n                width: 120px;\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n            }\n            .detail-row td:nth-child(2) {\n                width: 20px;\n                text-align: center;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            /* States & Badges */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Map existing state classes to colors if possible, or assume external CSS handles it */\n            \n            .task-tag {\n                display: inline-block;\n                padding: 2px 8px;\n                background-color: var(--vscode-badge-background);\n                color: var(--vscode-badge-foreground);\n                border-radius: 12px;\n                font-size: 11px;\n                margin-right: 4px;\n                margin-bottom: 4px;\n            }\n\n            .tag {\n                background-color: var(--vscode-textBlockQuote-background);\n                color: var(--vscode-textBlockQuote-border);\n                padding: 2px 6px;\n                border-radius: 4px;\n                font-size: 12px;\n                border: 1px solid var(--vscode-widget-border);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .operator-type {\n                font-style: italic;\n                color: var(--vscode-descriptionForeground);\n            }\n\n            .try-number {\n                font-size: 11px;\n                color: var(--vscode-descriptionForeground);\n                margin-left: 4px;\n            }\n\n            .action-links {\n                display: flex;\n                gap: 12px;\n            }\n\n            .link-button {\n                font-size: 12px;\n            }\n\n            /* Inputs */\n            input[type=\"date\"], vscode-textfield, vscode-textarea {\n                width: 100%;\n                box-sizing: border-box;\n                font-family: inherit;\n            }\n            input[type=\"date\"] {\n                padding: 6px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 2px;\n            }\n\n            vscode-button {\n                margin-right: 8px;\n            }\n            \n            /* Utils */\n            .mt-md { margin-top: var(--spacing-md); }\n            .mb-md { margin-bottom: var(--spacing-md); }\n\n            /* Code block for JSON/Config */\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 8px;\n                border-radius: 4px;\n                white-space: pre-wrap;\n                font-size: 12px;\n                max-height: 200px;\n                overflow-y: auto;\n            }\n\n        </style>\n        <title>DAG</title>\n      </head>\n      <body>  \n\n        <div class=\"header-container\">\n            <div class=\"dag-paused-indicator dag-paused-${isPausedText}\"></div>\n            <h2>${this.dagId}</h2>\n            <div style=\"visibility: ${isDagRunning ? \"visible\" : \"hidden\"}; display: flex; align-items: center;\">\n                <vscode-progress-ring></vscode-progress-ring>\n            </div>\n        </div>\n                    \n        <vscode-tabs id=\"tab-control\" selected-index=\"${this.activetabid === 'tab-1' ? 0 : this.activetabid === 'tab-2' ? 1 : this.activetabid === 'tab-3' ? 2 : 3}\">\n            <vscode-tab-header slot=\"header\">RUN</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">TASKS</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">INFO</vscode-tab-header>\n            <vscode-tab-header slot=\"header\">HISTORY</vscode-tab-header>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Dag Run Details</th>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>State</td>\n                            <td>:</td>\n                            <td>\n                                <div style=\"display: flex; align-items: center;\">\n                                    <div class=\"state-indicator state-${state}\"></div> <span>${state}</span>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Tasks</td>\n                            <td>:</td>\n                            <td>${runningOrFailedTasks || '<span style=\"opacity:0.5\">None active</span>'}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td>${logical_date_string}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>StartDate</td>\n                            <td>:</td>\n                            <td>${start_date_string}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Duration</td>\n                            <td>:</td>\n                            <td>${duration}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Note</td>\n                            <td>:</td>\n                            <td><a href=\"#\" id=\"run-update-note-link\" title=\"Click to update note\">${this.dagRunJson?.note || '<span style=\"opacity:0.5; font-style:italic;\">Add a note...</span>'}</a></td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><div class=\"code-block\">${this.dagRunJson?.conf ? JSON.stringify(this.dagRunJson.conf, null, 2) : '{}'}</div></td>\n                        </tr>\n                    </table>\n                    \n                    <div class=\"mb-md\">\n                        <vscode-button appearance=\"secondary\" id=\"run-ask-ai\" ${!hasDagRun ? \"disabled\" : \"\"}>Ask AI</vscode-button>    \n                        <vscode-button appearance=\"secondary\" id=\"run-view-log\" ${!hasDagRun ? \"disabled\" : \"\"}>Log</vscode-button> \n                        <vscode-button appearance=\"secondary\" id=\"run-lastrun-check\" ${isPaused ? \"disabled\" : \"\"}>Refresh</vscode-button>  \n                        <vscode-button appearance=\"secondary\" id=\"run-more-dagrun-detail\" ${!hasDagRun ? \"disabled\" : \"\"}>More</vscode-button>\n                    </div>\n            \n                    <br>\n            \n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Trigger Run</th>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Logical Date</td>\n                            <td>:</td>\n                            <td><vscode-textfield id=\"run_date\" placeholder=\"YYYY-MM-DD (Optional)\" maxlength=\"10\"></vscode-textfield></td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Config</td>\n                            <td>:</td>\n                            <td><vscode-textarea id=\"run_config\" rows=\"3\" placeholder='{\"key\": \"value\"}'></vscode-textarea></td>\n                        </tr>\n                    </table>\n                    \n                    <div class=\"mb-md\">\n                        <vscode-button appearance=\"primary\" id=\"run-trigger-dag\" ${isPaused ? \"disabled\" : \"\"}>Run</vscode-button>\n                        <vscode-button appearance=\"secondary\" id=\"run-lastrun-cancel\" ${isPaused || !isDagRunning ? \"disabled\" : \"\"}>Cancel</vscode-button>  \n                    </div>\n\n                    <br>\n\n                    <table>\n                        <tr>\n                            <th colspan=\"3\" class=\"section-header\">Control</th>\n                        </tr>\n                    </table>\n                    <div class=\"mb-md\">\n                         <vscode-button appearance=\"secondary\" id=\"run-pause-dag\" ${isPaused ? \"disabled\" : \"\"}>Pause</vscode-button>\n                         <vscode-button appearance=\"secondary\" id=\"run-unpause-dag\" ${!isPaused ? \"disabled\" : \"\"}>Unpause</vscode-button>\n                    </div>\n\n                    <br><br>\n                    \n                    <div style=\"opacity: 0.7; font-size: 12px; margin-top: 40px; border-top: 1px solid var(--vscode-widget-border); padding-top: 20px;\">\n                        <div style=\"margin-bottom: 8px;\"><a href=\"https://github.com/necatiarslan/airflow-vscode-extension/issues/new\">Report Bug / Request Feature</a></div>\n                        <div style=\"margin-bottom: 8px;\"><a href=\"https://bit.ly/airflow-extension-survey\">New Feature Survey</a></div>\n                        <div><a href=\"https://github.com/sponsors/necatiarslan\">Support this extension</a></div>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n\n            <vscode-tab-panel>\n                <section>\n                    ${taskDependencyTree ? `\n                    <div style=\"margin-bottom: 20px; border: 1px solid var(--vscode-widget-border); border-radius: 4px; padding: 10px;\">\n                        <vscode-tree>\n                        ${taskDependencyTree}\n                        </vscode-tree>\n                    </div>\n                    ` : ''}\n\n                    <table>\n                        <tr>\n                            <th>Task</th>\n                            <th>Actions</th>\n                            <th>Duration</th>            \n                            <th>Operator</th>\n                        </tr>\n                        ${taskRows}\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance=\"secondary\" id=\"tasks-refresh\">Refresh</vscode-button>\n                        <vscode-button appearance=\"secondary\" id=\"tasks-more-detail\" ${!this.dagTaskInstancesJson ? \"disabled\" : \"\"}>Raw JSON</vscode-button>\n                    </div>\n\n                </section>\n            </vscode-tab-panel>\n            \n            <vscode-tab-panel>\n                <section>\n                    <table>\n                        <tr class=\"detail-row\">\n                            <td>Owners</td>\n                            <td>:</td>\n                            <td>${owners}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Tags</td>\n                            <td>:</td>\n                            <td>${tags}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Schedule</td>\n                            <td>:</td>\n                            <td>${schedule}</td>\n                        </tr>\n                        <tr class=\"detail-row\">\n                            <td>Next Run</td>\n                            <td>:</td>\n                            <td>${next_run}</td>\n                        </tr>\n                    </table>\n                    \n                    <div>\n                        <vscode-button appearance=\"secondary\" id=\"info-source-code\">Source Code</vscode-button> \n                        <vscode-button appearance=\"secondary\" id=\"other-dag-detail\">Raw JSON</vscode-button>\n                    </div>\n                </section>\n            </vscode-tab-panel>\n\n            <vscode-tab-panel>\n                <section>                    \n                    <div style=\"display: flex; align-items: center; gap: 10px; margin-bottom: 20px; background: var(--vscode-editor-inactiveSelectionBackground); padding: 10px; border-radius: 4px;\">\n                        <label for=\"history_date\" style=\"font-weight: 600;\">Filter Date:</label>\n                        <input type=\"date\" id=\"history_date\" value=\"${this.dagHistorySelectedDate}\" style=\"width: 150px;\">\n                        <vscode-button appearance=\"secondary\" id=\"history-load-runs\">Load Runs</vscode-button>\n                    </div>\n\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>State</th>\n                                <th>Start Time</th>            \n                                <th>Duration</th>\n                                <th>Notes</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${runHistoryRows}\n                        </tbody>\n                    </table>   \n                </section>\n            </vscode-tab-panel>\n\n        </vscode-tabs>\n      </body>\n    </html>\n    `;\n        ui.logToOutput('DagView._getWebviewContent Completed');\n        return result;\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagView._setWebviewMessageListener Started');\n        Telemetry.Current.send('dagView.setWebviewMessageListener.called');\n\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                const command = message.command;\n                let activetabid = message.activetabid;\n\n                if ([\"tab-1\", \"tab-2\", \"tab-3\", \"tab-4\"].includes(activetabid)) {\n                    this.activetabid = message.activetabid;\n                }\n\n                ui.logToOutput('DagView._setWebviewMessageListener Message Received ' + message.command);\n                switch (command) {\n                    case \"run-trigger-dag\":\n                        this.triggerDagWConfig(message.config, message.date);\n                        return;\n                    case \"run-view-log\":\n                        this.showDAGRunLog();\n                        return;\n                    case \"run-more-dagrun-detail\":\n                        ui.showOutputMessage(this.dagRunJson);\n                        return;\n                    case \"other-dag-detail\":\n                        ui.showOutputMessage(this.dagJson);\n                        return;\n                    case \"tasks-more-detail\":\n                        ui.showOutputMessage(this.dagTaskInstancesJson);\n                        return;\n                    case \"history-load-runs\":\n                        this.getRunHistoryAndRenderHtml(message.date);\n                        return;\n                    case \"info-source-code\":\n                        this.showSourceCode();\n                        return;\n                    case \"run-pause-dag\":\n                        this.pauseDAG(true);\n                        return;\n                    case \"run-unpause-dag\":\n                        this.pauseDAG(false);\n                        return;\n\n                    case \"run-ask-ai\":\n                        this.askAI();\n                        return;\n\n                    case \"run-lastrun-check\":\n                        this.getLastRun();\n                        if(this.dagRunJson)\n                        {\n                            this.startCheckingDagRunStatus();\n                        }\n                        \n                        return;\n\n                    case \"run-lastrun-cancel\":\n                        if(this.dagRunJson)\n                        {\n                            this.cancelDagRun();\n                        }\n                        \n                        return;\n\n                    case \"run-update-note\":\n                        if(this.dagRunJson)\n                        {\n                            this.updateDagRunNote();\n                        }\n                        return;\n\n                    case \"history-dag-run-id\":\n                        let dagRunId:string = message.id;\n                        dagRunId = dagRunId.replace(\"history-dag-run-id-\", \"\");\n                        this.activetabid = \"tab-1\";\n                        this.dagRunId = dagRunId;\n                        this.getDagRun();\n                        return;\n\n                    case \"task-log-link\":\n                        let taskId:string = message.id;\n                        taskId = taskId.replace(\"task-log-link-\", \"\");\n                        this.showTaskInstanceLog(this.dagId, this.dagRunId, taskId);\n                        return;\n\n                    case \"task-xcom-link\":\n                        let xcomTaskId:string = message.id;\n                        xcomTaskId = xcomTaskId.replace(\"task-xcom-link-\", \"\");\n                        this.showTaskXComs(this.dagId, this.dagRunId, xcomTaskId);\n                        return;\n\n                    case \"tasks-refresh\":\n                        this.getTasksAndRenderHtml();\n                        return;\n                    \n                    case \"tabControlChanged\":\n                        this.activetabid = message.activeid;\n                        ui.logToOutput(\"tab changed to \" + message.activeid);\n                        return;\n                }\n\n            },\n            undefined,\n            this._disposables\n        );\n    }\n\n    private async getTasksAndRenderHtml() {\n        await this.getDagTasks();\n        await this.renderHmtl();\n    }\n\n    private async cancelDagRun(){\n        ui.logToOutput('DagView.cancelDagRun Started');\n        Telemetry.Current.send('dagView.cancelDagRun.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.cancelDagRun(this.dagId, this.dagRunId);\n        if (result.isSuccessful) {\n            //ui.showInfoMessage(`Dag ${this.dagId} Run ${this.dagRunId} cancelled successfully.`);\n            ui.logToOutput(`Dag ${this.dagId} Run ${this.dagRunId} cancelled successfully.`);\n            await this.getDagRun();\n            MessageHub.DagRunCancelled(this, this.dagId, this.dagRunId);\n        }\n    }\n\n    private async updateDagRunNote() {\n        ui.logToOutput('DagView.updateDagRunNote Started');\n        Telemetry.Current.send('dagView.updateDagRunNote.called');\n        \n        if (!Session.Current.Api || !this.dagRunJson) { return; }\n        \n        // Show input box with current note as default value\n        const newNote = await vscode.window.showInputBox({\n            prompt: 'Enter note for this DAG run',\n            value: this.dagRunJson.note || '',\n            placeHolder: 'Add a note for this DAG run'\n        });\n        \n        // User cancelled the input\n        if (newNote === undefined) {\n            return;\n        }\n        \n        const result = await Session.Current.Api.updateDagRunNote(this.dagId, this.dagRunId, newNote);\n        if (result.isSuccessful) {\n            // Refresh the DAG run to get the updated note\n            await this.getDagRun();\n        }\n    }\n\n    private async pauseDAG(is_paused: boolean) {\n        ui.logToOutput('DagView.pauseDAG Started');\n        Telemetry.Current.send('dagView.pauseDAG.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        if (is_paused && this.dagJson.is_paused) { ui.showWarningMessage(this.dagId + 'Dag is already PAUSED'); return; }\n        if (!is_paused && !this.dagJson.is_paused) { ui.showWarningMessage(this.dagId + 'Dag is already ACTIVE'); return; }\n\n        const result = await Session.Current.Api.pauseDag(this.dagId, is_paused);\n        if (result.isSuccessful) {\n            this.loadDagInfoOnly();\n            is_paused ? MessageHub.DagPaused(this, this.dagId) : MessageHub.DagUnPaused(this, this.dagId);\n        }\n\n    }\n\n    private async askAI() {\n        ui.logToOutput('DagView.askAI Started');\n        Telemetry.Current.send('dagView.askAI.called');\n\n        if (!Session.Current.Api) { return; }\n\n        if (!DagTreeView.Current) {\n            ui.showErrorMessage('DagTreeView is not available');\n            return;\n        }\n\n        if (!this.dagJson) {\n            ui.showErrorMessage('DAG information is not available');\n            return;\n        }\n        \n        const code = await Session.Current.Api.getSourceCode(this.dagId, this.dagJson.file_token);\n        if (!code.isSuccessful) {\n            ui.showErrorMessage('Failed to retrieve DAG source code for AI context');\n            return;\n        }\n\n        const logs = await Session.Current.Api.getDagRunLogText(this.dagId, this.dagRunId);\n        if (!logs.isSuccessful) {\n            ui.showErrorMessage('Failed to retrieve DAG logs for AI context');\n            return;\n        }\n\n        // Call the askAI function from DagTreeView\n        await AIHandler.Current.askAIWithContext({ code: code.result, logs: logs.result, dag: this.dagJson, dagRun: this.dagRunJson, tasks: this.dagTasksJson, taskInstances: this.dagTaskInstancesJson });\n    }\n\n    private async showSourceCode() {\n        ui.logToOutput('DagView.showSourceCode Started');\n        Telemetry.Current.send('dagView.showSourceCode.called');\n\n        if (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getSourceCode(this.dagId, this.dagJson.file_token);\n\n        if (result.isSuccessful) {\n            this.createAndOpenTempFile(result.result, this.dagId, '.py');\n        }\n        else\n        {\n            ui.logToOutput(result.result);\n            ui.showErrorMessage(result.result);\n        }\n    }\n\n    private async getRunHistoryAndRenderHtml(date?: string) {\n        ui.logToOutput('DagView.getRunHistoryAndRenderHtml Started');\n        Telemetry.Current.send('dagView.getRunHistoryAndRenderHtml.called');\n\n        this.dagHistorySelectedDate = date;\n        await this.getRunHistory(date);\n        await this.renderHmtl();\n    }\n\n    private async showDAGRunLog() {\n        ui.logToOutput('DagView.showDAGRunLog Started');\n        Telemetry.Current.send('dagView.showDAGRunLog.called');\n\n        if (!Session.Current.Api) { return; }\n\n        // const result = await Session.Current.Api.getDagRunLogText(this.dagId, this.dagRunId);\n        // if (result.isSuccessful) {\n        //     this.createAndOpenTempFile(result.result, this.dagId, '.log');\n        // }\n        DagLogView.render(this.dagId, this.dagRunId);\n    }\n\n    private async showTaskInstanceLog(dagId: string, dagRunId:string, taskId:string) {\n        ui.logToOutput('DagView.showTaskInstanceLog Started');\n        Telemetry.Current.send('dagView.showTaskInstanceLog.called');\n\n        if (!Session.Current.Api) { return; }\n\n        // const result = await Session.Current.Api.getTaskInstanceLogText(dagId, dagRunId, taskId);\n        // if (result.isSuccessful) {\n        //     this.createAndOpenTempFile(result.result, dagId + '-' + taskId, '.log');\n        // }\n        DagLogView.render(dagId, dagRunId, taskId);\n    }\n\n    private async showTaskXComs(dagId: string, dagRunId:string, taskId:string) {\n        ui.logToOutput('DagView.showTaskXComs Started');\n        Telemetry.Current.send('dagView.showTaskXComs.called');\n\n\t\tif (!Session.Current.Api) { return; }\n\n        const result = await Session.Current.Api.getTaskXComs(dagId, dagRunId, taskId);\n        if (result.isSuccessful) {\n            this.createAndOpenTempFile(JSON.stringify(result.result, null, 2), dagId + '-' + taskId + '_xcom', '.json');\n        } else {\n            ui.showInfoMessage(`No XCom entries found for task: ${taskId}`);\n        }\n    }\n\n    private async triggerDagWConfig(config: string = \"\", date: string = \"\") {\n        ui.logToOutput('DagView.triggerDagWConfig Started');\n        Telemetry.Current.send('dagView.triggerDagWConfig.called');\n\n        if (!Session.Current.Api) { return; }\n\n        if (config && !ui.isJsonString(config)) {\n            ui.showWarningMessage(\"Config is not a valid JSON\");\n            return;\n        }\n\n        if (date && !ui.isValidDate(date)) {\n            ui.showWarningMessage(\"Date is not a valid DATE\");\n            return;\n        }\n\n        if (!config) {\n            config = \"{}\";\n        }\n\n\n        if (config !== undefined) {\n\n            const result = await Session.Current.Api.triggerDag(this.dagId, config, date);\n\n            if (result.isSuccessful) {\n                this.dagRunId = result.result[\"dag_run_id\"];\n                this.startCheckingDagRunStatus();\n                MessageHub.DagTriggered(this, this.dagId, this.dagRunId);\n            }\n        }\n    }\n\n    private async startCheckingDagRunStatus() {\n        ui.logToOutput('DagView.startCheckingDagRunStatus Started');\n        Telemetry.Current.send('dagView.startCheckingDagRunStatus.called');\n\n        await this.refreshRunningDagState(this);\n        if (this.dagStatusInterval) {\n            clearInterval(this.dagStatusInterval);//stop prev checking\n        }\n        this.dagStatusInterval = setInterval(() => {\n            void this.refreshRunningDagState(this).catch((err: any) => ui.logToOutput('refreshRunningDagState Error', err));\n        }, 5 * 1000);\n    }\n\n    private async stopCheckingDagRunStatus() {\n        ui.logToOutput('DagView.stopCheckingDagRunStatus Started');\n        Telemetry.Current.send('dagView.stopCheckingDagRunStatus.called');\n\n        if (this.dagStatusInterval) {\n            clearInterval(this.dagStatusInterval);//stop prev checking\n        }\n    }\n\n    private async refreshRunningDagState(dagView: DagView) {\n        ui.logToOutput('DagView.refreshRunningDagState Started');\n        Telemetry.Current.send('dagView.refreshRunningDagState.called');\n\n        if (!Session.Current.Api) { return; }\n        \n        if (!dagView.dagId || !dagView.dagRunId)\n        {\n            dagView.stopCheckingDagRunStatus();\n            return;\n        }\n\n        const result = await Session.Current.Api.getDagRun(dagView.dagId, dagView.dagRunId);\n        if (result.isSuccessful) {\n            dagView.dagRunJson = result.result;\n\n            const resultTasks = await Session.Current.Api.getTaskInstances(dagView.dagId, dagView.dagRunId);\n            if (resultTasks.isSuccessful) {\n                dagView.dagTaskInstancesJson = resultTasks.result;\n            }\n        }\n        else {\n            dagView.stopCheckingDagRunStatus();\n            return;\n        }\n\n        let state = (dagView.dagRunJson) ? dagView.dagRunJson.state : \"\";\n\n        //\"queued\" \"running\" \"success\" \"failed\"\n        if (state === \"queued\" || state === \"running\") {\n            //go on for the next check\n        }\n        else {\n            dagView.stopCheckingDagRunStatus();\n        }\n\n        dagView.renderHmtl();\n    }\n\n    private buildTaskDependencyTree(tasks: any[]): string {\n        ui.logToOutput('DagView.buildTaskDependencyTree Started');\n        Telemetry.Current.send('dagView.buildTaskDependencyTree.called');\n        \n        // Create a map for quick task lookup\n        const taskMap = new Map<string, any>();\n        tasks.forEach(task => {\n            taskMap.set(task.task_id, task);\n        });\n\n        // Find root tasks (tasks with no upstream dependencies)\n        const rootTasks = tasks.filter(task => \n            !task.upstream_task_ids || task.upstream_task_ids.length === 0\n        );\n\n        if (rootTasks.length === 0) {\n            return \"No task dependencies found or circular dependencies detected.\";\n        }\n\n        // Build tree recursively\n        const visited = new Set<string>();\n        let treeHtml = \"\";\n\n        const buildTree = (taskId: string): string => {\n            if (visited.has(taskId)) {\n                return \"\"; // Prevent infinite loops and duplicates in this spanning tree view\n            }\n            visited.add(taskId);\n\n            const task = taskMap.get(taskId);\n            if (!task) {\n                return \"\";\n            }\n\n            let itemHtml = `<vscode-tree-item>\\n`;\n            itemHtml += `${task.task_id}\\n`;\n\n            // Get downstream tasks\n            const downstreamIds = task.downstream_task_ids || [];\n            \n            if (downstreamIds.length > 0) {\n                downstreamIds.forEach((downstreamId: string) => {\n                    itemHtml += buildTree(downstreamId);\n                });\n            }\n            \n            itemHtml += `</vscode-tree-item>\\n`;\n\n            return itemHtml;\n        };\n\n        // Build tree for each root task\n        rootTasks.forEach((rootTask) => {\n            treeHtml += buildTree(rootTask.task_id);\n        });\n\n        return treeHtml || \"No tasks to display.\";\n    }\n\n}","import { AskAIContext } from '../common/Types';\nimport { Session } from '../common/Session';\nimport * as vscode from 'vscode';\nimport * as ui from '../common/UI';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { TriggerDagRunTool } from './TriggerDagRunTool';\nimport { GetFailedRunsTool } from './GetFailedRunsTool';\nimport { ListActiveDagsTool } from './ListActiveDagsTool';\nimport { ListPausedDagsTool } from './ListPausedDagsTool';\nimport { GetRunningDagsTool } from './GetRunningDagsTool';\nimport { PauseDagTool } from './PauseDagTool';\nimport { UnpauseDagTool } from './UnpauseDagTool';\nimport { GetDagRunsTool } from './GetDagRunsTool';\nimport { CancelDagRunTool } from './CancelDagRunTool';\nimport { AnalyseDagLatestRunTool } from './AnalyseDagLatestRunTool';\nimport { GetDagHistoryTool } from './GetDagHistoryTool';\nimport { GetDagRunDetailTool } from './GetDagRunDetailTool';\nimport { GetTodayTool } from './GetTodayTool';\nimport { GetDagSourceCodeTool } from './GetDagSourceCodeTool';\nimport { GoToDagViewTool } from './GoToDagViewTool';\nimport { GoToDagLogViewTool } from './GoToDagLogViewTool';\nimport { GoToDagRunHistoryTool } from './GoToDagRunHistoryTool';\nimport { GoToProvidersViewTool } from './GoToProvidersViewTool';\nimport { GoToConnectionsViewTool } from './GoToConnectionsViewTool';\nimport { GoToVariablesViewTool } from './GoToVariablesViewTool';\nimport { GoToConfigsViewTool } from './GoToConfigsViewTool';\nimport { GoToPluginsViewTool } from './GoToPluginsViewTool';\nimport { GoToServerHealthViewTool } from './GoToServerHealthViewTool';\nimport { Telemetry } from '../common/Telemetry';\nimport * as skills from '../common/Skills';\n\nexport class AIHandler \n{\n    public static Current: AIHandler;\n\n    public askAIContext: AskAIContext | undefined;\n    public currentDagId: string | undefined;\n\n    constructor() {\n        AIHandler.Current = this;\n        Telemetry.Current.send('AIHandler.Initialized');\n    }\n\n    public async aIHandler (request: vscode.ChatRequest, context: vscode.ChatContext, stream: vscode.ChatResponseStream, token: vscode.CancellationToken) : Promise<void>\n    {\n        ui.logToOutput('AIHandler.aIHandler Started');\n        Telemetry.Current.send('AIHandler.aIHandler.Started');\n\n        const aiContext = AIHandler.Current?.askAIContext;\n        \n        // 1. Define the tools we want to expose to the model\n        // These must match the definitions in package.json\n        const tools: vscode.LanguageModelChatTool[] = [\n            {\n                name: 'list_active_dags',\n                description: 'Lists all Airflow DAGs that are currently active (not paused). Returns a list of DAG IDs and their details.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'list_paused_dags',\n                description: 'Lists all Airflow DAGs that are currently paused. Returns a list of DAG IDs and their details.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'get_running_dags',\n                description: 'Lists all Airflow DAGs that currently have running or queued DAG runs. Use this when asked about running, executing, or in-progress DAGs. Returns DAG IDs with run states and run IDs.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'pause_dag',\n                description: 'Pauses a specific Airflow DAG. Required input: dag_id (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The unique identifier (ID) of the DAG to pause' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'unpause_dag',\n                description: 'Unpauses (activates) a specific Airflow DAG. Required input: dag_id (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The unique identifier (ID) of the DAG to unpause' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'trigger_dag_run',\n                description: 'Triggers a DAG run. Inputs: dag_id (string), config_json (string, optional), date (string, optional).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        configJson: { type: 'string', description: 'JSON configuration or file path' },\n                        date: { type: 'string', description: 'Logical date in ISO 8601 format' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_failed_runs',\n                description: 'Gets failed DAG runs. Inputs: time_range_hours (number), dag_id_filter (string).',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        timeRangeHours: { type: 'number' },\n                        dagIdFilter: { type: 'string' }\n                    },\n                    required: []\n                }\n            },\n            {\n                name: 'get_dag_runs',\n                description: 'Retrieves DAG runs for a given DAG. Optional date (YYYY-MM-DD). Returns run id, start time, duration, status.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        date: { type: 'string', description: 'Optional date filter YYYY-MM-DD' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_dag_history',\n                description: 'Retrieves DAG run history for a given date (defaults to today). Returns date/time, status, duration, note.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        date: { type: 'string', description: 'Optional date filter YYYY-MM-DD' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'cancel_dag_run',\n                description: 'Cancels the currently running DAG run for the given DAG. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'analyse_dag_latest_run',\n                description: 'Comprehensive analysis of the latest DAG run including tasks, source code, and logs. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'get_dag_run_detail',\n                description: 'Comprehensive analysis of a specific DAG run by run ID. Analyzes tasks, source code, and logs for the specified run. Required: dag_id, dag_run_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        dagRunId: { type: 'string', description: 'The DAG run ID to analyze' }\n                    },\n                    required: ['dagId', 'dagRunId']\n                }\n            },\n            {\n                name: 'get_today',\n                description: 'Returns the current system date in multiple formats. Use when asked about today\\'s date or current date. Helpful for date filtering operations. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'get_dag_source_code',\n                description: 'Retrieves the Python source code for a specific DAG. Use when the user wants to see or analyze the DAG implementation. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to get source code for' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_view',\n                description: 'Opens the DAG View panel to display information about a specific DAG. Optional: provide dag_run_id to view a specific run. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to view' },\n                        dagRunId: { type: 'string', description: 'Optional DAG run ID to navigate to a specific run' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_log_view',\n                description: 'Opens the DAG Log View panel to display task logs for a specific Airflow DAG. Required: dag_id. Optional: dag_run_id, task_id, try_number.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID' },\n                        dagRunId: { type: 'string', description: 'Optional: The DAG run ID' },\n                        taskId: { type: 'string', description: 'Optional: The Task ID' },\n                        tryNumber: { type: 'number', description: 'Optional: The try number' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_dag_run_history',\n                description: 'Opens the DAG Run History panel with optional filters. Shows run history for a DAG with optional date range and status filters. Required: dag_id.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {\n                        dagId: { type: 'string', description: 'The DAG ID to view history for' },\n                        startDate: { type: 'string', description: 'Optional start date filter (YYYY-MM-DD format)' },\n                        endDate: { type: 'string', description: 'Optional end date filter (YYYY-MM-DD format)' },\n                        status: { type: 'string', description: 'Optional status filter (success, failed, running, queued, upstream_failed)' }\n                    },\n                    required: ['dagId']\n                }\n            },\n            {\n                name: 'go_to_providers_view',\n                description: 'Opens the Providers View panel to display installed Airflow providers. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_connections_view',\n                description: 'Opens the Connections View panel to display Airflow connections. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_variables_view',\n                description: 'Opens the Variables View panel to display Airflow variables. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_configs_view',\n                description: 'Opens the Configs View panel to display Airflow configuration settings. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_plugins_view',\n                description: 'Opens the Plugins View panel to display installed Airflow plugins. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            },\n            {\n                name: 'go_to_server_health_view',\n                description: 'Opens the Server Health View panel to display Airflow server health status. No inputs required.',\n                inputSchema: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            }\n        ];\n\n        // 2. Construct the Initial Messages\n        const messages: vscode.LanguageModelChatMessage[] = [\n            vscode.LanguageModelChatMessage.User(`You are an expert in Apache Airflow. You have access to tools to manage DAGs, view logs, and check status. Use them when appropriate.`),\n            vscode.LanguageModelChatMessage.User(`Don't provide JSON responses unless specifically asked. Always format your responses in markdown.`)\n        ];\n\n        // Loop through the latest 6 entries from context.history (only previous @aws interactions)\n        const recentHistory = context.history.slice(-6);\n        for (const turn of recentHistory) {\n            if (turn instanceof vscode.ChatRequestTurn) {\n                messages.push(vscode.LanguageModelChatMessage.User(turn.prompt));\n                continue;\n            }\n\n            if (turn instanceof vscode.ChatResponseTurn) {\n                const responseContent = turn.response\n                .filter((part): part is vscode.ChatResponseMarkdownPart => part instanceof vscode.ChatResponseMarkdownPart)\n                .map((part: vscode.ChatResponseMarkdownPart) => part.value.value)\n                .join('\\n');\n\n                if (responseContent) {\n                messages.push(vscode.LanguageModelChatMessage.Assistant(responseContent));\n                }\n            }\n        }\n\n        // Add context if available\n        if (aiContext) {\n            messages.push(vscode.LanguageModelChatMessage.User(`Context:\\nDAG: ${aiContext.dag || 'N/A'}\\nLogs: ${aiContext.logs || 'N/A'}\\nCode: ${aiContext.code || 'N/A'}`));\n        }\n\n        if (this.currentDagId) {\n            messages.push(vscode.LanguageModelChatMessage.User(`Current DAG ID in focus: ${this.currentDagId}`));\n        }\n\n        messages.push(vscode.LanguageModelChatMessage.User(request.prompt));\n\n        // Check if user is expressing appreciation\n        const usedAppreciated = request.prompt.toLowerCase().includes('thank');\n\n        // 3. Select Model and Send Request\n        try {\n            //TODO: Make model configurable\n            // const [model] = await vscode.lm.selectChatModels( {id: \"claude-sonnet-4.5\"} );\n            let model = request.model;\n            if (request.model.id.includes('auto')) {\n                const models = await vscode.lm.selectChatModels({ vendor: model.vendor, family: model.family });\n                if (models.length > 0)\n                {\n                    model = models[0];\n                    ui.logToOutput(`Auto-selected model: ${model.name} (${model.id})`);\n                }\n                else\n                {\n                    ui.logToOutput(`No models found for vendor: ${model.vendor}, family: ${model.family}`);\n                    model = undefined;\n                }\n            }\n\n            ui.logToOutput(`Selected AI Family: ${model?.family || 'None'}, Name: ${model?.name || 'None'}`);\n            Telemetry.Current.send('AIHandler.aIHandler.ModelSelected', { modelId: model?.id || 'None' });\n            if (!model) {\n                stream.markdown(\"No suitable AI model found.\");\n                return;\n            }\n\n            // Tool calling loop\n            let keepGoing = true;\n            while (keepGoing && !token.isCancellationRequested) {\n                keepGoing = false; // Default to stop unless we get a tool call\n\n                const chatResponse = await model.sendRequest(messages, { tools }, token);\n                let toolCalls: vscode.LanguageModelToolCallPart[] = [];\n\n                for await (const fragment of chatResponse.text) {\n                    stream.markdown(fragment);\n                }\n                \n                // Collect tool calls from the response\n                for await (const part of chatResponse.stream) {\n                    if (part instanceof vscode.LanguageModelToolCallPart) {\n                        toolCalls.push(part);\n                    }\n                }\n\n                // Execute tools if any were called\n                if (toolCalls.length > 0) {\n                    keepGoing = true; // We need to send results back to the model\n                    \n                    // Add the model's response (including tool calls) to history\n                    messages.push(vscode.LanguageModelChatMessage.Assistant(toolCalls));\n\n                    for (const toolCall of toolCalls) {\n                        stream.progress(`Calling: ${toolCall.name}`);\n                        ui.logToOutput(`AI requested tool: ${toolCall.name} with input: ${JSON.stringify(toolCall.input)}`);\n                        Telemetry.Current.send('AIHandler.aIHandler.ToolCalled', { toolName: toolCall.name, toolInput: JSON.stringify(toolCall.input) });\n                        \n                        try {\n                            // Invoke the tool using VS Code LM API\n                            const result = await vscode.lm.invokeTool(\n                                toolCall.name, \n                                { input: toolCall.input } as any, \n                                token\n                            );\n                            \n                            // Convert result to string/text part\n                            const resultText = result.content\n                                .filter(part => part instanceof vscode.LanguageModelTextPart)\n                                .map(part => (part as vscode.LanguageModelTextPart).value)\n                                .join('\\n');\n                            \n                            // Add result to history\n                            messages.push(vscode.LanguageModelChatMessage.User([\n                                new vscode.LanguageModelToolResultPart(toolCall.callId, [new vscode.LanguageModelTextPart(resultText)])\n                            ]));\n\n                        } catch (err) {\n                            Telemetry.Current.send('AIHandler.aIHandler.ToolCallFailed', { toolName: toolCall.name, error: err instanceof Error ? err.message : String(err) });\n                            const errorMessage = `Tool execution failed: ${err instanceof Error ? err.message : String(err)}`;\n                            messages.push(vscode.LanguageModelChatMessage.User([\n                                new vscode.LanguageModelToolResultPart(toolCall.callId, [new vscode.LanguageModelTextPart(errorMessage)])\n                            ]));\n                        }\n                    }\n                }\n            }\n\n            if(Session.Current?.HasWorkspaceFolder && !skills.AreSkillsInstalled()) {\n                stream.markdown(\"\\n\\n\\n\");\n                const vscodeMarkdownLink = new vscode.MarkdownString(\n                    ` [Install Airflow Skills](command:airflow-ext.installAirflowSkills) for the best experience`\n                );\n                vscodeMarkdownLink.isTrusted = {\n                    enabledCommands: ['airflow-ext.installAirflowSkills']\n                };\n                stream.markdown(vscodeMarkdownLink);\n            }\n\n            // Final appreciation message\n            if (usedAppreciated) {\n                stream.markdown(\"\\n\\n\\n\")\n                stream.markdown(\"\\n [Donate](https://github.com/sponsors/necatiarslan) if you found me useful!\");\n                stream.markdown(\"\\n Request a [New Feature](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)\");\n                stream.markdown(\"\\n Attend [Survey](https://bit.ly/airflow-extension-survey) to help me get better. \");\n            }\n\n        } catch (err) {\n            ui.logToOutput(`AIHandler.aIHandler Error: ${err instanceof Error ? err.message : String(err)}`);\n            Telemetry.Current.send('AIHandler.aIHandler.Error', { error: err instanceof Error ? err.message : String(err) });\n            if (err instanceof Error) {\n                stream.markdown(`I'm sorry, I couldn't connect to the AI model: ${err.message}`);\n            } else {\n                stream.markdown(\"I'm sorry, I couldn't connect to the AI model.\");\n            }\n            stream.markdown(\"\\n Please [Report Bug](https://github.com/necatiarslan/airflow-vscode-extension/issues/new)\");\n\n        }\n    };\n\n    public async isChatCommandAvailable(): Promise<boolean> {\n        const commands = await vscode.commands.getCommands(true); // 'true' includes internal commands\n        return commands.includes('workbench.action.chat.open');\n    }\n\n    public async askAI(dagId: string, fileToken: string) {\n        ui.logToOutput('AIHandler.askAI Started');\n        Telemetry.Current.send('AIHandler.askAI.Started');\n        if (!Session.Current.Api) { return; }\n        if (!await this.isChatCommandAvailable()) {\n            ui.showErrorMessage('Chat command is not available. Please ensure you have access to VS Code AI features.');\n            return;\n        }\n\n        let dagSourceCode = '';\n        let latestDagLogs = '';\n\n        // Fetch DAG Source Code\n        const sourceResult = await Session.Current.Api.getSourceCode(dagId, fileToken);\n        if (sourceResult.isSuccessful) {\n            dagSourceCode = sourceResult.result;\n        } else {\n            ui.showErrorMessage('Failed to fetch DAG source code for AI analysis.');\n            return;\n        }\n\n        // Fetch Latest DAG Run Logs\n        const logResult = await Session.Current.Api.getLastDagRunLogText(dagId);\n        if (logResult.isSuccessful) {\n            latestDagLogs = logResult.result;\n        } else {\n            ui.showErrorMessage('Failed to fetch latest DAG run logs for AI analysis.');\n            return;\n        }\n\n        await this.askAIWithContext({ code: dagSourceCode, logs: latestDagLogs, dag: dagId, dagRun: null, tasks: null, taskInstances: null });\n    }\n\n    public async askAIWithContext(askAIContext: AskAIContext) {\n        this.askAIContext = askAIContext;\n\n        const appName = vscode.env.appName;\n        let commandId = '';\n        if (appName.includes('Antigravity')) {\n            // Antigravity replaces the Chat with an Agent workflow.\n            // We must use the Agent Manager command instead.\n            // **REPLACE WITH THE ACTUAL ANTIGRAVITY AGENT COMMAND ID**\n            commandId = 'antigravity.startAgentTask';\n\n        } else if (appName.includes('Code - OSS') || appName.includes('Visual Studio Code')) {\n            // This is standard VS Code or VSCodium. Check for the legacy Chat command.\n            commandId = 'workbench.action.chat.open';\n\n        } else {\n            // Unknown environment, default to checking if the command exists at all.\n            commandId = 'workbench.action.chat.open';\n        }\n\n        await vscode.commands.executeCommand(commandId, {\n            query: '@airflow Analyze the current logs'\n        });\n    }\n\n    public registerChatParticipant(){\n        const participant = vscode.chat.createChatParticipant('airflow-ext.participant', AIHandler.Current.aIHandler.bind(AIHandler.Current));\n        participant.iconPath = vscode.Uri.joinPath(Session.Current.Context.extensionUri, 'media', 'ai-assistant-logo.png');\n        Session.Current.Context.subscriptions.push(participant);\n    }\n\n    public registerAiTools(){\n        // Register Language Model Tools for AI-powered control, monitoring, and debugging\n        ui.logToOutput('Registering Language Model Tools...');\n        \n        // Initialize the API adapter (uses DagTreeView.Current.api dynamically)\n        const airflowClient = new AirflowClientAdapter();\n        const context = Session.Current.Context;\n\n        // Register Tool 1: trigger_dag_run (Control)\n        const triggerDagRunTool = vscode.lm.registerTool(\n            'trigger_dag_run',\n            new TriggerDagRunTool(airflowClient)\n        );\n        context.subscriptions.push(triggerDagRunTool);\n        ui.logToOutput('Registered tool: trigger_dag_run');\n\n        // Register Tool 2: get_failed_runs (Monitoring)\n        const getFailedRunsTool = vscode.lm.registerTool(\n            'get_failed_runs',\n            new GetFailedRunsTool(airflowClient)\n        );\n        context.subscriptions.push(getFailedRunsTool);\n        ui.logToOutput('Registered tool: get_failed_runs');\n\n        // Register Tool 4: list_active_dags (Monitoring)\n        const listActiveDagsTool = vscode.lm.registerTool(\n            'list_active_dags',\n            new ListActiveDagsTool(airflowClient)\n        );\n        context.subscriptions.push(listActiveDagsTool);\n        ui.logToOutput('Registered tool: list_active_dags');\n\n        // Register Tool 5: list_paused_dags (Monitoring)\n        const listPausedDagsTool = vscode.lm.registerTool(\n            'list_paused_dags',\n            new ListPausedDagsTool(airflowClient)\n        );\n        context.subscriptions.push(listPausedDagsTool);\n        ui.logToOutput('Registered tool: list_paused_dags');\n\n        // Register Tool 6: get_running_dags (Monitoring)\n        const getRunningDagsTool = vscode.lm.registerTool(\n            'get_running_dags',\n            new GetRunningDagsTool(airflowClient)\n        );\n        context.subscriptions.push(getRunningDagsTool);\n        ui.logToOutput('Registered tool: get_running_dags');\n\n        // Register Tool 7: pause_dag (Control)\n        const pauseDagTool = vscode.lm.registerTool(\n            'pause_dag',\n            new PauseDagTool(airflowClient)\n        );\n        context.subscriptions.push(pauseDagTool);\n        ui.logToOutput('Registered tool: pause_dag');\n\n        // Register Tool 8: unpause_dag (Control)\n        const unpauseDagTool = vscode.lm.registerTool(\n            'unpause_dag',\n            new UnpauseDagTool(airflowClient)\n        );\n        context.subscriptions.push(unpauseDagTool);\n        ui.logToOutput('Registered tool: unpause_dag');\n\n        // Register Tool 9: get_dag_runs (Monitoring)\n        const getDagRunsTool = vscode.lm.registerTool(\n            'get_dag_runs',\n            new GetDagRunsTool(airflowClient)\n        );\n        context.subscriptions.push(getDagRunsTool);\n        ui.logToOutput('Registered tool: get_dag_runs');\n\n        // Register Tool 10: cancel_dag_run (Control)\n        const cancelDagRunTool = vscode.lm.registerTool(\n            'cancel_dag_run',\n            new CancelDagRunTool(airflowClient)\n        );\n        context.subscriptions.push(cancelDagRunTool);\n        ui.logToOutput('Registered tool: cancel_dag_run');\n\n        // Register Tool 11: analyse_dag_latest_run (Analysis)\n        const analyseDagLatestRunTool = vscode.lm.registerTool(\n            'analyse_dag_latest_run',\n            new AnalyseDagLatestRunTool(airflowClient)\n        );\n        context.subscriptions.push(analyseDagLatestRunTool);\n        ui.logToOutput('Registered tool: analyse_dag_latest_run');\n\n        // Register Tool 12: get_dag_history (Monitoring)\n        const getDagHistoryTool = vscode.lm.registerTool(\n            'get_dag_history',\n            new GetDagHistoryTool(airflowClient)\n        );\n        context.subscriptions.push(getDagHistoryTool);\n        ui.logToOutput('Registered tool: get_dag_history');\n\n        // Register Tool 13: get_dag_run_detail (Analysis)\n        const getDagRunDetailTool = vscode.lm.registerTool(\n            'get_dag_run_detail',\n            new GetDagRunDetailTool(airflowClient)\n        );\n        context.subscriptions.push(getDagRunDetailTool);\n        ui.logToOutput('Registered tool: get_dag_run_detail');\n\n        // Register Tool 14: get_today (Utility)\n        const getTodayTool = vscode.lm.registerTool(\n            'get_today',\n            new GetTodayTool()\n        );\n        context.subscriptions.push(getTodayTool);\n        ui.logToOutput('Registered tool: get_today');\n\n        // Register Tool 15: get_dag_source_code (Analysis)\n        const getDagSourceCodeTool = vscode.lm.registerTool(\n            'get_dag_source_code',\n            new GetDagSourceCodeTool(airflowClient)\n        );\n        context.subscriptions.push(getDagSourceCodeTool);\n        ui.logToOutput('Registered tool: get_dag_source_code');\n\n        // Register Tool 16: go_to_dag_view (Navigation)\n        const goToDagViewTool = vscode.lm.registerTool(\n            'go_to_dag_view',\n            new GoToDagViewTool()\n        );\n        context.subscriptions.push(goToDagViewTool);\n        ui.logToOutput('Registered tool: go_to_dag_view');\n\n        // Register Tool 17: go_to_dag_log_view (Navigation)\n        const goToDagLogViewTool = vscode.lm.registerTool(\n            'go_to_dag_log_view',\n            new GoToDagLogViewTool()\n        );\n        context.subscriptions.push(goToDagLogViewTool);\n        ui.logToOutput('Registered tool: go_to_dag_log_view');\n\n        // Register Tool 18: go_to_dag_run_history (Navigation)\n        const goToDagRunHistoryTool = vscode.lm.registerTool(\n            'go_to_dag_run_history',\n            new GoToDagRunHistoryTool()\n        );\n        context.subscriptions.push(goToDagRunHistoryTool);\n        ui.logToOutput('Registered tool: go_to_dag_run_history');\n\n        // Register Tool 19: go_to_providers_view (Navigation)\n        const goToProvidersViewTool = vscode.lm.registerTool(\n            'go_to_providers_view',\n            new GoToProvidersViewTool()\n        );\n        context.subscriptions.push(goToProvidersViewTool);\n        ui.logToOutput('Registered tool: go_to_providers_view');\n\n        // Register Tool 20: go_to_connections_view (Navigation)\n        const goToConnectionsViewTool = vscode.lm.registerTool(\n            'go_to_connections_view',\n            new GoToConnectionsViewTool()\n        );\n        context.subscriptions.push(goToConnectionsViewTool);\n        ui.logToOutput('Registered tool: go_to_connections_view');\n\n        // Register Tool 21: go_to_variables_view (Navigation)\n        const goToVariablesViewTool = vscode.lm.registerTool(\n            'go_to_variables_view',\n            new GoToVariablesViewTool()\n        );\n        context.subscriptions.push(goToVariablesViewTool);\n        ui.logToOutput('Registered tool: go_to_variables_view');\n\n        // Register Tool 22: go_to_configs_view (Navigation)\n        const goToConfigsViewTool = vscode.lm.registerTool(\n            'go_to_configs_view',\n            new GoToConfigsViewTool()\n        );\n        context.subscriptions.push(goToConfigsViewTool);\n        ui.logToOutput('Registered tool: go_to_configs_view');\n\n        // Register Tool 23: go_to_plugins_view (Navigation)\n        const goToPluginsViewTool = vscode.lm.registerTool(\n            'go_to_plugins_view',\n            new GoToPluginsViewTool()\n        );\n        context.subscriptions.push(goToPluginsViewTool);\n        ui.logToOutput('Registered tool: go_to_plugins_view');\n\n        // Register Tool 24: go_to_server_health_view (Navigation)\n        const goToServerHealthViewTool = vscode.lm.registerTool(\n            'go_to_server_health_view',\n            new GoToServerHealthViewTool()\n        );\n        context.subscriptions.push(goToServerHealthViewTool);\n        ui.logToOutput('Registered tool: go_to_server_health_view');\n\n        ui.logToOutput('All Language Model Tools registered successfully');\n    }\n}","\nimport { Session } from '../common/Session';\nimport * as MessageHub from '../common/MessageHub';\n\nexport interface IDagRunResult {\n    dag_id: string;\n    dag_run_id: string;\n    state: string;\n    execution_date: string;\n    logical_date: string;\n    start_date?: string;\n    end_date?: string;\n    conf?: Record<string, unknown>;\n}\n\nexport interface IFailedRunSummary {\n    dag_id: string;\n    dag_run_id: string;\n    state: 'failed' | 'upstream_failed' | 'skipped';\n    execution_date: string;\n    logical_date: string;\n    start_date?: string;\n    end_date?: string;\n    error_message?: string;\n}\n\nexport interface IDagSummary {\n    dag_id: string;\n    is_paused: boolean;\n    is_active: boolean;\n    description?: string;\n    owners?: string[];\n    tags?: { name: string }[];\n}\n\nexport interface ITaskInstance {\n    task_id: string;\n    dag_id: string;\n    dag_run_id: string;\n    execution_date: string;\n    start_date: string;\n    end_date: string;\n    duration: number;\n    state: string;\n    try_number: number;\n    map_index: number;\n    max_tries: number;\n    hostname: string;\n    unixname: string;\n    pool: string;\n    pool_slots: number;\n    queue: string;\n    priority_weight: number;\n    operator: string;\n    queued_when: string;\n    pid: number;\n    executor_config: string;\n}\n\nexport class AirflowClientAdapter {\n    \n    /**\n     * Triggers a DAG run via POST /dags/{dag_id}/dagRuns\n     * \n     * @param dagId - The DAG identifier\n     * @param configJson - JSON string containing the DAG run configuration (optional)\n     * @param date - The logical date for the run (optional)\n     * @returns Promise with the created DAG run result\n     */\n    async triggerDagRun(dagId: string, configJson: string = '{}', date?: string): Promise<IDagRunResult> {\n        // Validate JSON before calling API\n        try {\n            JSON.parse(configJson);\n        } catch (error) {\n            throw new Error(`Invalid JSON in config_json parameter: ${error instanceof Error ? error.message : String(error)}`);\n        }\n\n        const result = await Session.Current.Api.triggerDag(dagId, configJson, date);\n\n        if (!result.isSuccessful) {\n            throw new Error(result.error?.message || 'Failed to trigger DAG run');\n        }\n\n        MessageHub.DagTriggered(this, dagId, result.result.dag_run_id);\n\n        // Map the API response to our interface\n        const apiResponse = result.result;\n        return {\n            dag_id: apiResponse.dag_id || dagId,\n            dag_run_id: apiResponse.dag_run_id || apiResponse.run_id || '',\n            state: apiResponse.state || 'queued',\n            execution_date: apiResponse.execution_date || apiResponse.logical_date || new Date().toISOString(),\n            logical_date: apiResponse.logical_date || apiResponse.execution_date || new Date().toISOString(),\n            start_date: apiResponse.start_date,\n            end_date: apiResponse.end_date,\n            conf: apiResponse.conf\n        };\n    }\n\n    /**\n     * Queries for failed DAG runs using the Airflow API\n     * \n     * @param timeRangeHours - Number of hours to look back (default 24)\n     * @param dagIdFilter - Optional DAG ID filter\n     * @returns Promise with array of failed run summaries\n     */\n    async queryFailedRuns(timeRangeHours: number = 24, dagIdFilter?: string): Promise<IFailedRunSummary[]> {\n        const failedRuns: IFailedRunSummary[] = [];\n\n        try {\n            // If dagIdFilter is specified, query only that DAG\n            if (dagIdFilter) {\n                const result = await Session.Current.Api.getDagRunHistory(dagIdFilter);\n                if (result.isSuccessful && result.result?.dag_runs) {\n                    failedRuns.push(...this.filterFailedRuns(result.result.dag_runs, timeRangeHours));\n                }\n            } else {\n                // If no filter, we need to get the DAG list first, then query each\n                const dagListResult = await Session.Current.Api.getDagList();\n                if (dagListResult.isSuccessful && dagListResult.result) {\n                    // Handle both v1 (array) and v2 (object with dags property) responses\n                    const resultData = dagListResult.result as any;\n                    const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n                    \n                    // Limit to first 20 DAGs to avoid too many API calls\n                    const dagsToCheck = dags.slice(0, 20);\n                    \n                    // Query each DAG's runs in parallel\n                    const runPromises = dagsToCheck.map(async (dag: any) => {\n                        try {\n                            const dagId = dag.dag_id;\n                            const runResult = await Session.Current.Api.getDagRunHistory(dagId);\n                            if (runResult.isSuccessful && runResult.result?.dag_runs) {\n                                return this.filterFailedRuns(runResult.result.dag_runs, timeRangeHours);\n                            }\n                        } catch (error) {\n                            // Silently continue on error for individual DAGs\n                            return [];\n                        }\n                        return [];\n                    });\n\n                    const results = await Promise.all(runPromises);\n                    results.forEach(runs => failedRuns.push(...runs));\n                }\n            }\n\n            return failedRuns;\n\n        } catch (error) {\n            throw new Error(`Failed to query failed runs: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves a list of DAGs filtered by paused state\n     * \n     * @param isPaused - Whether to list paused (true) or active (false) DAGs\n     * @returns Promise with array of DAG summaries\n     */\n    async getDags(isPaused: boolean): Promise<IDagSummary[]> {\n        try {\n            const dagListResult = await Session.Current.Api.getDagList();\n            if (!dagListResult.isSuccessful || !dagListResult.result) {\n                throw new Error(dagListResult.error?.message || 'Failed to fetch DAG list');\n            }\n\n            // Handle both v1 (array) and v2 (object with dags property) responses\n            const resultData = dagListResult.result as any;\n            const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n\n            return dags\n                .filter((dag: any) => dag.is_paused === isPaused)\n                .map((dag: any) => ({\n                    dag_id: dag.dag_id,\n                    is_paused: dag.is_paused,\n                    is_active: dag.is_active !== undefined ? dag.is_active : !dag.is_paused,\n                    description: dag.description,\n                    owners: dag.owners,\n                    tags: dag.tags\n                }));\n\n        } catch (error) {\n            throw new Error(`Failed to get DAG list: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves a list of DAGs that are currently running\n     * \n     * @returns Promise with array of DAG summaries that have running DAG runs\n     */\n    async getRunningDags(): Promise<Array<IDagSummary & { latest_run_state: string; latest_run_id: string }>> {\n        try {\n            const dagListResult = await Session.Current.Api.getDagList();\n            if (!dagListResult.isSuccessful || !dagListResult.result) {\n                throw new Error(dagListResult.error?.message || 'Failed to fetch DAG list');\n            }\n\n            const resultData = dagListResult.result as any;\n            const dags = Array.isArray(resultData) ? resultData : (resultData.dags || []);\n\n            // Filter and enrich DAGs with their latest run info\n            const runningDags: Array<IDagSummary & { latest_run_state: string; latest_run_id: string }> = [];\n\n            for (const dag of dags) {\n                if (dag.is_paused) {\n                    continue; // Skip paused DAGs\n                }\n\n                try {\n                    const latestRun = await this.getLatestDagRun(dag.dag_id);\n                    if (latestRun && (latestRun.state === 'running' || latestRun.state === 'queued')) {\n                        runningDags.push({\n                            dag_id: dag.dag_id,\n                            is_paused: dag.is_paused,\n                            is_active: dag.is_active !== undefined ? dag.is_active : !dag.is_paused,\n                            description: dag.description,\n                            owners: dag.owners,\n                            tags: dag.tags,\n                            latest_run_state: latestRun.state,\n                            latest_run_id: latestRun.dag_run_id\n                        });\n                    }\n                } catch (error) {\n                    // Continue if we can't get the latest run for a DAG\n                    continue;\n                }\n            }\n\n            return runningDags;\n\n        } catch (error) {\n            throw new Error(`Failed to get running DAGs: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Pauses or unpauses a DAG\n     * \n     * @param dagId - The DAG ID\n     * @param isPaused - True to pause, false to unpause\n     */\n    async pauseDag(dagId: string, isPaused: boolean): Promise<void> {\n        try {\n            const result = await Session.Current.Api.pauseDag(dagId, isPaused);\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || `Failed to ${isPaused ? 'pause' : 'unpause'} DAG`);\n            }\n            MessageHub.DagPaused(this, dagId);\n        } catch (error) {\n            throw new Error(`Failed to change DAG state: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the latest DAG run for a given DAG\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the latest DAG run result or undefined if not found\n     */\n    async getLatestDagRun(dagId: string): Promise<IDagRunResult | undefined> {\n        try {\n            const result = await Session.Current.Api.getLastDagRun(dagId);\n            if (!result.isSuccessful || !result.result) {\n                return undefined;\n            }\n            \n            const apiResponse = result.result;\n            return {\n                dag_id: apiResponse.dag_id || dagId,\n                dag_run_id: apiResponse.dag_run_id || apiResponse.run_id || '',\n                state: apiResponse.state || 'unknown',\n                execution_date: apiResponse.execution_date || apiResponse.logical_date || new Date().toISOString(),\n                logical_date: apiResponse.logical_date || apiResponse.execution_date || new Date().toISOString(),\n                start_date: apiResponse.start_date,\n                end_date: apiResponse.end_date,\n                conf: apiResponse.conf\n            };\n        } catch (error) {\n            // Return undefined on error to allow caller to handle\n            return undefined;\n        }\n    }\n\n    /**\n     * Retrieves task instances for a specific DAG run\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID\n     * @returns Promise with array of task instances\n     */\n    async getTaskInstances(dagId: string, dagRunId: string): Promise<any[]> {\n        try {\n            const result = await Session.Current.Api.getTaskInstances(dagId, dagRunId);\n            if (!result.isSuccessful || !result.result) {\n                return [];\n            }\n            \n            // API v2 returns { task_instances: [...] }\n            return result.result.task_instances || [];\n        } catch (error) {\n            return [];\n        }\n    }\n\n    /**\n     * Retrieves task log content\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID\n     * @param taskId - The task ID\n     * @param tryNumber - The task attempt number\n     * @returns Promise with the log content (truncated for LLM processing)\n     */\n    async getTaskLog(dagId: string, dagRunId: string, taskId: string, tryNumber: string): Promise<string> {\n        try {\n            // Use the existing getTaskInstanceLog method\n            const result = await Session.Current.Api.getTaskInstanceLogText(dagId, dagRunId, taskId);\n\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || 'Failed to retrieve task log');\n            }\n\n            const logContent = result.result || '';\n\n            // Truncate to last 400 characters for token efficiency\n            if (logContent.length > 400) {\n                return '...' + logContent.slice(-400);\n            }\n\n            return logContent;\n\n        } catch (error) {\n            throw new Error(`Failed to get task log: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Helper method to filter failed runs within the time range\n     */\n    private filterFailedRuns(dagRuns: any[], timeRangeHours: number): IFailedRunSummary[] {\n        const cutoffTime = new Date();\n        cutoffTime.setHours(cutoffTime.getHours() - timeRangeHours);\n\n        const failedStates = ['failed', 'upstream_failed', 'skipped'];\n\n        return dagRuns\n            .filter((run: any) => {\n                // Filter by state\n                if (!failedStates.includes(run.state)) {\n                    return false;\n                }\n\n                // Filter by time range\n                const runDate = new Date(run.execution_date || run.logical_date || run.start_date);\n                return runDate >= cutoffTime;\n            })\n            .map((run: any) => ({\n                dag_id: run.dag_id,\n                dag_run_id: run.dag_run_id || run.run_id,\n                state: run.state,\n                execution_date: run.execution_date || run.logical_date,\n                logical_date: run.logical_date || run.execution_date,\n                start_date: run.start_date,\n                end_date: run.end_date,\n                error_message: this.extractErrorMessage(run)\n            }));\n    }\n\n    /**\n     * Retrieves DAG run history for a specific DAG\n     * \n     * @param dagId - The DAG ID\n     * @param date - Optional date filter (YYYY-MM-DD format)\n     * @returns Promise with DAG runs data\n     */\n    async getDagRunHistory(dagId: string, date?: string): Promise<any> {\n        try {\n            const result = await Session.Current.Api.getDagRunHistory(dagId, date);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG run history');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG run history: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Stops a running DAG run by setting its state to failed\n     * \n     * @param dagId - The DAG ID\n     * @param dagRunId - The DAG run ID to stop\n     */\n    async cancelDagRun(dagId: string, dagRunId: string): Promise<void> {\n        try {\n            const result = await Session.Current.Api.cancelDagRun(dagId, dagRunId);\n            if (!result.isSuccessful) {\n                throw new Error(result.error?.message || 'Failed to cancel DAG run');\n            }\n            MessageHub.DagRunCancelled(this, dagId, dagRunId);\n        } catch (error) {\n            throw new Error(`Failed to stop DAG run: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the source code for a DAG\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the DAG source code\n     */\n    async getDagSource(dagId: string): Promise<string> {\n        try {\n            const result = await Session.Current.Api.getSourceCode(dagId);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG source code');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG source code: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Retrieves the source code for a DAG (handles both v1 and v2 APIs)\n     * For v1 API, automatically fetches the file_token first\n     * \n     * @param dagId - The DAG ID\n     * @returns Promise with the DAG source code\n     */\n    async getDagSourceCode(dagId: string): Promise<string> {\n        try {\n            // First, try to get DAG info to obtain file_token (needed for v1 API)\n            const dagInfoResult = await Session.Current.Api.getDagInfo(dagId);\n            let fileToken: string | undefined;\n            \n            if (dagInfoResult.isSuccessful && dagInfoResult.result?.file_token) {\n                fileToken = dagInfoResult.result.file_token;\n            }\n\n            // Now get the source code (fileToken is optional for v2)\n            const result = await Session.Current.Api.getSourceCode(dagId, fileToken);\n            if (!result.isSuccessful || !result.result) {\n                throw new Error(result.error?.message || 'Failed to fetch DAG source code');\n            }\n            return result.result;\n        } catch (error) {\n            throw new Error(`Failed to get DAG source code: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Helper to extract error message from DAG run\n     */\n    private extractErrorMessage(run: any): string | undefined {\n        // Try to extract error information from the run object\n        if (run.note) {\n            return run.note;\n        }\n        if (run.state === 'failed') {\n            return `DAG run failed`;\n        }\n        if (run.state === 'upstream_failed') {\n            return `Upstream task(s) failed`;\n        }\n        if (run.state === 'skipped') {\n            return `DAG run was skipped`;\n        }\n        return undefined;\n    }\n}\n","/**\n * AnalyseDagLatestRunTool - Language Model Tool for comprehensive DAG run analysis\n * \n * This tool retrieves comprehensive information about the latest DAG run including:\n * - DAG run details\n * - Task instances\n * - DAG source code\n * - Task logs\n * \n * It provides a complete analysis to help diagnose issues and understand execution.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for analyzing latest DAG run\n */\nexport interface IAnalyseDagLatestRunParams {\n    dagId: string;\n}\n\n/**\n * AnalyseDagLatestRunTool - Implements vscode.LanguageModelTool for comprehensive DAG analysis\n */\nexport class AnalyseDagLatestRunTool implements vscode.LanguageModelTool<IAnalyseDagLatestRunParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IAnalyseDagLatestRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId } = options.input;\n\n        return {\n            invocationMessage: `Analyzing latest run for DAG '${dagId}'...`\n        };\n    }\n\n    /**\n     * Execute comprehensive DAG run analysis\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IAnalyseDagLatestRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('AnalyseDagLatestRunTool.invoke');\n        \n        try {\n            // Step 1: Get the latest DAG run\n            const dagRun = await this.client.getLatestDagRun(dagId);\n\n            if (!dagRun) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No DAG run found for '${dagId}'.`)\n                ]);\n            }\n\n            // Step 2: Get task instances for this run\n            const taskInstances = await this.client.getTaskInstances(dagId, dagRun.dag_run_id);\n\n            // Step 3: Get DAG source code\n            let dagSourceCode = 'N/A';\n            try {\n                dagSourceCode = await this.client.getDagSource(dagId);\n            } catch (error) {\n                dagSourceCode = `Failed to retrieve source code: ${error instanceof Error ? error.message : String(error)}`;\n            }\n\n            // Step 4: Get logs for each task (focusing on failed tasks first, then all)\n            const taskLogs: { task_id: string; state: string; log: string }[] = [];\n            \n            // Sort tasks: failed first, then by execution order\n            const sortedTasks = [...taskInstances].sort((a: any, b: any) => {\n                const failedStates = ['failed', 'upstream_failed'];\n                const aFailed = failedStates.includes(a.state);\n                const bFailed = failedStates.includes(b.state);\n                \n                if (aFailed && !bFailed) return -1;\n                if (!aFailed && bFailed) return 1;\n                return 0;\n            });\n\n            // Get logs for up to 5 tasks (prioritizing failed tasks)\n            const tasksToLog = sortedTasks.slice(0, 5);\n            for (const task of tasksToLog) {\n                try {\n                    const log = await this.client.getTaskLog(\n                        dagId, \n                        dagRun.dag_run_id, \n                        task.task_id, \n                        task.try_number?.toString() || '1'\n                    );\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: log\n                    });\n                } catch (error) {\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: `Failed to retrieve log: ${error instanceof Error ? error.message : String(error)}`\n                    });\n                }\n            }\n\n            // Build comprehensive analysis report\n            let report = this.buildAnalysisReport(dagId, dagRun, taskInstances, dagSourceCode, taskLogs);\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(report)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to analyze DAG run\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('AnalyseDagLatestRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Build comprehensive analysis report\n     */\n    private buildAnalysisReport(\n        dagId: string,\n        dagRun: any,\n        taskInstances: any[],\n        dagSourceCode: string,\n        taskLogs: { task_id: string; state: string; log: string }[]\n    ): string {\n        let report = `#  Comprehensive DAG Run Analysis\\n\\n`;\n        report += `## DAG: ${dagId}\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 1: DAG Run Overview\n        report += `##  DAG Run Overview\\n\\n`;\n        report += `- **Run ID:** \\`${dagRun.dag_run_id}\\`\\n`;\n        report += `- **State:** ${this.getStatusEmoji(dagRun.state)} **${dagRun.state}**\\n`;\n        report += `- **Execution Date:** ${dagRun.execution_date}\\n`;\n        report += `- **Logical Date:** ${dagRun.logical_date}\\n`;\n        \n        if (dagRun.start_date) {\n            report += `- **Start Date:** ${dagRun.start_date}\\n`;\n        }\n        if (dagRun.end_date) {\n            report += `- **End Date:** ${dagRun.end_date}\\n`;\n            \n            // Calculate duration\n            const start = new Date(dagRun.start_date);\n            const end = new Date(dagRun.end_date);\n            const durationMs = end.getTime() - start.getTime();\n            const durationSec = Math.floor(durationMs / 1000);\n            const minutes = Math.floor(durationSec / 60);\n            const seconds = durationSec % 60;\n            report += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n        }\n        \n        report += `\\n---\\n\\n`;\n\n        // Section 2: Task Instances Summary\n        report += `##  Task Instances (${taskInstances.length} tasks)\\n\\n`;\n        \n        // Group tasks by state\n        const tasksByState: { [state: string]: any[] } = {};\n        taskInstances.forEach((task: any) => {\n            const state = task.state || 'unknown';\n            if (!tasksByState[state]) {\n                tasksByState[state] = [];\n            }\n            tasksByState[state].push(task);\n        });\n\n        // Display summary by state\n        for (const [state, tasks] of Object.entries(tasksByState)) {\n            report += `### ${this.getStatusEmoji(state)} ${state} (${tasks.length})\\n`;\n            tasks.forEach((task: any) => {\n                report += `- **${task.task_id}**`;\n                if (task.duration) {\n                    report += ` - Duration: ${Math.round(task.duration)}s`;\n                }\n                if (task.start_date) {\n                    report += ` - Started: ${task.start_date}`;\n                }\n                report += `\\n`;\n            });\n            report += `\\n`;\n        }\n\n        report += `---\\n\\n`;\n\n        // Section 3: Task Logs Analysis\n        if (taskLogs.length > 0) {\n            report += `##  Task Logs (Top ${taskLogs.length} tasks)\\n\\n`;\n            \n            taskLogs.forEach((taskLog, index) => {\n                report += `### ${index + 1}. Task: ${taskLog.task_id} (${this.getStatusEmoji(taskLog.state)} ${taskLog.state})\\n\\n`;\n                report += `\\`\\`\\`\\n${taskLog.log}\\n\\`\\`\\`\\n\\n`;\n            });\n\n            report += `---\\n\\n`;\n        }\n\n        // Section 4: DAG Source Code\n        report += `##  DAG Source Code\\n\\n`;\n        report += `\\`\\`\\`python\\n${dagSourceCode}\\n\\`\\`\\`\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 5: Raw Data\n        report += `##  Raw Data (JSON)\\n\\n`;\n        report += `### DAG Run\\n\\`\\`\\`json\\n${JSON.stringify(dagRun, null, 2)}\\n\\`\\`\\`\\n\\n`;\n        report += `### Task Instances\\n\\`\\`\\`json\\n${JSON.stringify(taskInstances, null, 2)}\\n\\`\\`\\`\\n\\n`;\n\n        // Section 6: Analysis Prompt\n        report += `---\\n\\n`;\n        report += `##  Analysis Request\\n\\n`;\n        report += `Please analyze the above information and provide:\\n`;\n        report += `1. **Summary of Execution:** What happened during this DAG run?\\n`;\n        report += `2. **Issues Identified:** What errors or problems occurred?\\n`;\n        report += `3. **Root Cause Analysis:** What likely caused any failures?\\n`;\n        report += `4. **Recommendations:** How can these issues be resolved?\\n`;\n        report += `5. **Code Review:** Any issues in the DAG code that need attention?\\n`;\n\n        return report;\n    }\n\n    /**\n     * Helper to get emoji for task/run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': '',\n            'none': '',\n            'unknown': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","/**\n * CancelDagRunTool - Language Model Tool for cancelling a running DAG run\n * \n * This tool cancels the currently running DAG run for a specific DAG.\n * It requires user confirmation since it's a state-changing operation.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for cancelling a DAG run\n */\nexport interface ICancelDagRunParams {\n    dagId: string;\n}\n\n/**\n * CancelDagRunTool - Implements vscode.LanguageModelTool for cancelling DAG runs\n */\nexport class CancelDagRunTool implements vscode.LanguageModelTool<ICancelDagRunParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation with user confirmation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<ICancelDagRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n        \n        // Try to get the current running DAG run\n        let runInfo = '';\n        try {\n            const latestRun = await this.client.getLatestDagRun(dagId);\n            if (latestRun && (latestRun.state === 'running' || latestRun.state === 'queued')) {\n                runInfo = `\\n**Current Run:** \\`${latestRun.dag_run_id}\\`\\n**State:** ${latestRun.state}\\n\\n`;\n            }\n        } catch (error) {\n            // Ignore error, proceed with generic confirmation\n        }\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Cancel DAG Run Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **CANCEL** the running DAG run for:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n`);\n        if (runInfo) {\n            confirmationMessage.appendMarkdown(runInfo);\n        }\n        confirmationMessage.appendMarkdown('**Effect:** The current DAG run will be marked as failed and cancelled.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Cancelling DAG run: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Cancel DAG Run',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    /**\n     * Execute the cancel DAG run action\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<ICancelDagRunParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('CancelDagRunTool.invoke');\n        \n        try {\n            // First, get the latest DAG run to find the running one\n            const latestRun = await this.client.getLatestDagRun(dagId);\n\n            if (!latestRun) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No DAG run found for '${dagId}'.`)\n                ]);\n            }\n\n            // Check if the latest run is actually running\n            if (latestRun.state !== 'running' && latestRun.state !== 'queued') {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` DAG '${dagId}' is not currently running.\\n\\nLatest run state: **${latestRun.state}**\\nRun ID: \\`${latestRun.dag_run_id}\\``)\n                ]);\n            }\n\n            // Cancel the DAG run\n            await this.client.cancelDagRun(dagId, latestRun.dag_run_id);\n\n            const message = [\n                ` **Success!** DAG run cancelled.`,\n                ``,\n                `- **DAG ID:** ${dagId}`,\n                `- **Run ID:** ${latestRun.dag_run_id}`,\n                `- **Previous State:** ${latestRun.state}`,\n                ``,\n                `The DAG run has been marked as failed and cancelled.`\n            ].join('\\n');\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            Telemetry.Current.sendError('CancelDagRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to cancel DAG run for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GetDagHistoryTool - Language Model Tool for retrieving DAG run history\n * \n * This tool retrieves the run history for a specific DAG, optionally filtered by date.\n * Returns date of run, status, duration, and notes for each run.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport * as ui from '../common/UI';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying DAG history\n */\nexport interface IGetDagHistoryParams {\n    dagId: string;\n    date?: string; // Optional date in YYYY-MM-DD format (defaults to today)\n}\n\n/**\n * GetDagHistoryTool - Implements vscode.LanguageModelTool for retrieving DAG history\n */\nexport class GetDagHistoryTool implements vscode.LanguageModelTool<IGetDagHistoryParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, date } = options.input;\n        const dateStr = date || ui.toISODateString(new Date());\n\n        return {\n            invocationMessage: `Retrieving history for DAG '${dagId}' (date: ${dateStr})`\n        };\n    }\n\n    /**\n     * Execute the query for DAG history\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagHistoryTool.invoke');\n        \n        // Use today's date if not provided\n        const queryDate = date ||  ui.toISODateString(new Date());\n\n        try {\n            // Get DAG run history from the API\n            const result = await this.client.getDagRunHistory(dagId, queryDate);\n\n            if (!result || !result.dag_runs || result.dag_runs.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No run history found for DAG '${dagId}' on ${queryDate}.`)\n                ]);\n            }\n\n            const runs = result.dag_runs;\n\n            // Build detailed summary\n            let summaryMessage = `##  DAG Run History for '${dagId}'\\n\\n`;\n            summaryMessage += `**Date Filter:** ${queryDate}\\n`;\n            summaryMessage += `**Total Runs:** ${runs.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details in a table-like format\n            summaryMessage += `| # | Date/Time | Status | Duration | Note |\\n`;\n            summaryMessage += `|---|-----------|--------|----------|------|\\n`;\n\n            runs.forEach((run: any, index: number) => {\n                const runDate = run.execution_date || run.logical_date || 'N/A';\n                const status = this.getStatusEmoji(run.state) + ' ' + (run.state || 'unknown');\n                \n                let duration = 'N/A';\n                if (run.start_date && run.end_date) {\n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    duration = `${minutes}m ${seconds}s`;\n                } else if (run.start_date && !run.end_date) {\n                    duration = ' Running';\n                }\n                \n                const note = run.note || '-';\n                \n                summaryMessage += `| ${index + 1} | ${runDate} | ${status} | ${duration} | ${note} |\\n`;\n            });\n\n            summaryMessage += `\\n---\\n\\n`;\n\n            // Add detailed breakdown\n            summaryMessage += `### Detailed Breakdown\\n\\n`;\n            \n            runs.forEach((run: any, index: number) => {\n                summaryMessage += `#### ${index + 1}. Run ID: ${run.dag_run_id || run.run_id}\\n\\n`;\n                summaryMessage += `- **Status:** ${this.getStatusEmoji(run.state)} ${run.state || 'unknown'}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date || run.logical_date}\\n`;\n                summaryMessage += `- **Logical Date:** ${run.logical_date || run.execution_date}\\n`;\n                \n                if (run.start_date) {\n                    summaryMessage += `- **Start Date:** ${run.start_date}\\n`;\n                }\n                if (run.end_date) {\n                    summaryMessage += `- **End Date:** ${run.end_date}\\n`;\n                    \n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    summaryMessage += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n                }\n                \n                if (run.note) {\n                    summaryMessage += `- **Note:** ${run.note}\\n`;\n                }\n                \n                if (run.conf && Object.keys(run.conf).length > 0) {\n                    summaryMessage += `- **Configuration:** \\`${JSON.stringify(run.conf)}\\`\\n`;\n                }\n                \n                summaryMessage += `\\n`;\n            });\n\n            // Include raw JSON for LLM processing\n            summaryMessage += `---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(runs, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to retrieve DAG history\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The date format is YYYY-MM-DD\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagHistoryTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Helper to get emoji for run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","/**\n * GetDagRunDetailTool - Language Model Tool for comprehensive DAG run analysis by run ID\n * \n * This tool retrieves comprehensive information about a specific DAG run including:\n * - DAG run details\n * - Task instances\n * - DAG source code\n * - Task logs\n * \n * It provides a complete analysis to help diagnose issues and understand execution.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n/**\n * Input parameters for analyzing a specific DAG run\n */\nexport interface IGetDagRunDetailParams {\n    dagId: string;\n    dagRunId: string;\n}\n\n/**\n * GetDagRunDetailTool - Implements vscode.LanguageModelTool for comprehensive DAG run analysis\n */\nexport class GetDagRunDetailTool implements vscode.LanguageModelTool<IGetDagRunDetailParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagRunDetailParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, dagRunId } = options.input;\n\n        return {\n            invocationMessage: `Analyzing DAG run '${dagRunId}' for DAG '${dagId}'...`\n        };\n    }\n\n    /**\n     * Execute comprehensive DAG run analysis\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagRunDetailParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagRunDetailTool.invoke');\n        \n        try {\n            // Step 1: Get task instances for this run\n            const taskInstances = await this.client.getTaskInstances(dagId, dagRunId);\n\n            if (!taskInstances || taskInstances.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No task instances found for DAG run '${dagRunId}' in DAG '${dagId}'.`)\n                ]);\n            }\n\n            // Step 2: Get DAG source code\n            let dagSourceCode = 'N/A';\n            try {\n                dagSourceCode = await this.client.getDagSource(dagId);\n            } catch (error) {\n                dagSourceCode = `Failed to retrieve source code: ${error instanceof Error ? error.message : String(error)}`;\n            }\n\n            // Step 3: Get logs for each task (focusing on failed tasks first, then all)\n            const taskLogs: { task_id: string; state: string; log: string }[] = [];\n            \n            // Sort tasks: failed first, then by execution order\n            const sortedTasks = [...taskInstances].sort((a: any, b: any) => {\n                const failedStates = ['failed', 'upstream_failed'];\n                const aFailed = failedStates.includes(a.state);\n                const bFailed = failedStates.includes(b.state);\n                \n                if (aFailed && !bFailed) return -1;\n                if (!aFailed && bFailed) return 1;\n                return 0;\n            });\n\n            // Get logs for up to 5 tasks (prioritizing failed tasks)\n            const tasksToLog = sortedTasks.slice(0, 5);\n            for (const task of tasksToLog) {\n                try {\n                    const log = await this.client.getTaskLog(\n                        dagId, \n                        dagRunId, \n                        task.task_id, \n                        task.try_number?.toString() || '1'\n                    );\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: log\n                    });\n                } catch (error) {\n                    taskLogs.push({\n                        task_id: task.task_id,\n                        state: task.state,\n                        log: `Failed to retrieve log: ${error instanceof Error ? error.message : String(error)}`\n                    });\n                }\n            }\n\n            // Build DAG run object from task instances\n            const dagRun = {\n                dag_id: dagId,\n                dag_run_id: dagRunId,\n                state: this.deriveDagRunState(taskInstances),\n                execution_date: taskInstances[0]?.execution_date || 'N/A',\n                logical_date: taskInstances[0]?.execution_date || 'N/A',\n                start_date: this.getEarliestStartDate(taskInstances),\n                end_date: this.getLatestEndDate(taskInstances)\n            };\n\n            // Build comprehensive analysis report\n            let report = this.buildAnalysisReport(dagId, dagRun, taskInstances, dagSourceCode, taskLogs);\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(report)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to analyze DAG run\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The DAG run ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagRunDetailTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Derive overall DAG run state from task instances\n     */\n    private deriveDagRunState(taskInstances: any[]): string {\n        if (taskInstances.some((t: any) => t.state === 'failed')) return 'failed';\n        if (taskInstances.some((t: any) => t.state === 'running')) return 'running';\n        if (taskInstances.some((t: any) => t.state === 'queued')) return 'queued';\n        if (taskInstances.every((t: any) => t.state === 'success')) return 'success';\n        return 'unknown';\n    }\n\n    /**\n     * Get earliest start date from task instances\n     */\n    private getEarliestStartDate(taskInstances: any[]): string | undefined {\n        const startDates = taskInstances\n            .filter((t: any) => t.start_date)\n            .map((t: any) => new Date(t.start_date).getTime());\n        \n        if (startDates.length === 0) return undefined;\n        \n        const earliest = Math.min(...startDates);\n        return new Date(earliest).toISOString();\n    }\n\n    /**\n     * Get latest end date from task instances\n     */\n    private getLatestEndDate(taskInstances: any[]): string | undefined {\n        const endDates = taskInstances\n            .filter((t: any) => t.end_date)\n            .map((t: any) => new Date(t.end_date).getTime());\n        \n        if (endDates.length === 0) return undefined;\n        \n        const latest = Math.max(...endDates);\n        return new Date(latest).toISOString();\n    }\n\n    /**\n     * Build comprehensive analysis report\n     */\n    private buildAnalysisReport(\n        dagId: string,\n        dagRun: any,\n        taskInstances: any[],\n        dagSourceCode: string,\n        taskLogs: { task_id: string; state: string; log: string }[]\n    ): string {\n        let report = `#  Comprehensive DAG Run Analysis\\n\\n`;\n        report += `## DAG: ${dagId}\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 1: DAG Run Overview\n        report += `##  DAG Run Overview\\n\\n`;\n        report += `- **Run ID:** \\`${dagRun.dag_run_id}\\`\\n`;\n        report += `- **State:** ${this.getStatusEmoji(dagRun.state)} **${dagRun.state}**\\n`;\n        report += `- **Execution Date:** ${dagRun.execution_date}\\n`;\n        report += `- **Logical Date:** ${dagRun.logical_date}\\n`;\n        \n        if (dagRun.start_date) {\n            report += `- **Start Date:** ${dagRun.start_date}\\n`;\n        }\n        if (dagRun.end_date) {\n            report += `- **End Date:** ${dagRun.end_date}\\n`;\n            \n            // Calculate duration\n            const start = new Date(dagRun.start_date);\n            const end = new Date(dagRun.end_date);\n            const durationMs = end.getTime() - start.getTime();\n            const durationSec = Math.floor(durationMs / 1000);\n            const minutes = Math.floor(durationSec / 60);\n            const seconds = durationSec % 60;\n            report += `- **Duration:** ${minutes}m ${seconds}s\\n`;\n        }\n        \n        report += `\\n---\\n\\n`;\n\n        // Section 2: Task Instances Summary\n        report += `##  Task Instances (${taskInstances.length} tasks)\\n\\n`;\n        \n        // Group tasks by state\n        const tasksByState: { [state: string]: any[] } = {};\n        taskInstances.forEach((task: any) => {\n            const state = task.state || 'unknown';\n            if (!tasksByState[state]) {\n                tasksByState[state] = [];\n            }\n            tasksByState[state].push(task);\n        });\n\n        // Display summary by state\n        for (const [state, tasks] of Object.entries(tasksByState)) {\n            report += `### ${this.getStatusEmoji(state)} ${state} (${tasks.length})\\n`;\n            tasks.forEach((task: any) => {\n                report += `- **${task.task_id}**`;\n                if (task.duration) {\n                    report += ` - Duration: ${Math.round(task.duration)}s`;\n                }\n                if (task.start_date) {\n                    report += ` - Started: ${task.start_date}`;\n                }\n                report += `\\n`;\n            });\n            report += `\\n`;\n        }\n\n        report += `---\\n\\n`;\n\n        // Section 3: Task Logs Analysis\n        if (taskLogs.length > 0) {\n            report += `##  Task Logs (Top ${taskLogs.length} tasks)\\n\\n`;\n            \n            taskLogs.forEach((taskLog, index) => {\n                report += `### ${index + 1}. Task: ${taskLog.task_id} (${this.getStatusEmoji(taskLog.state)} ${taskLog.state})\\n\\n`;\n                report += `\\`\\`\\`\\n${taskLog.log}\\n\\`\\`\\`\\n\\n`;\n            });\n\n            report += `---\\n\\n`;\n        }\n\n        // Section 4: DAG Source Code\n        report += `##  DAG Source Code\\n\\n`;\n        report += `\\`\\`\\`python\\n${dagSourceCode}\\n\\`\\`\\`\\n\\n`;\n        report += `---\\n\\n`;\n\n        // Section 5: Raw Data\n        report += `##  Raw Data (JSON)\\n\\n`;\n        report += `### DAG Run\\n\\`\\`\\`json\\n${JSON.stringify(dagRun, null, 2)}\\n\\`\\`\\`\\n\\n`;\n        report += `### Task Instances\\n\\`\\`\\`json\\n${JSON.stringify(taskInstances, null, 2)}\\n\\`\\`\\`\\n\\n`;\n\n        // Section 6: Analysis Prompt\n        report += `---\\n\\n`;\n        report += `##  Analysis Request\\n\\n`;\n        report += `Please analyze the above information and provide:\\n`;\n        report += `1. **Summary of Execution:** What happened during this DAG run?\\n`;\n        report += `2. **Issues Identified:** What errors or problems occurred?\\n`;\n        report += `3. **Root Cause Analysis:** What likely caused any failures?\\n`;\n        report += `4. **Recommendations:** How can these issues be resolved?\\n`;\n        report += `5. **Code Review:** Any issues in the DAG code that need attention?\\n`;\n\n        return report;\n    }\n\n    /**\n     * Helper to get emoji for task/run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': '',\n            'none': '',\n            'unknown': ''\n        };\n        return statusMap[status?.toLowerCase()] || '';\n    }\n}\n","/**\n * GetDagRunsTool - Language Model Tool for retrieving DAG runs\n * \n * This tool retrieves the runs for a specific DAG, optionally filtered by date.\n * Returns run ID, start time, duration, and status for each run.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport * as ui from '../common/UI';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying DAG runs\n */\nexport interface IGetDagRunsParams {\n    dagId: string;\n    date?: string; // Optional date in ISO format (defaults to today)\n}\n\n/**\n * GetDagRunsTool - Implements vscode.LanguageModelTool for retrieving DAG runs\n */\nexport class GetDagRunsTool implements vscode.LanguageModelTool<IGetDagRunsParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, date } = options.input;\n        const dateStr = date ||  ui.toISODateString(new Date());\n\n        return {\n            invocationMessage: `Retrieving runs for DAG '${dagId}' (date: ${dateStr})`\n        };\n    }\n\n    /**\n     * Execute the query for DAG runs\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagRunsTool.invoke');\n        \n        try {\n            // Get DAG run history from the API\n            const result = await this.client.getDagRunHistory(dagId);\n\n            if (!result || !result.dag_runs || result.dag_runs.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` No runs found for DAG '${dagId}'.`)\n                ]);\n            }\n\n            let runs = result.dag_runs;\n\n            // Filter by date if provided\n            if (date) {\n                const targetDate = new Date(date);\n                runs = runs.filter((run: any) => {\n                    const runDate = new Date(run.execution_date || run.logical_date);\n                    return  ui.toISODateString(runDate) === ui.toISODateString(targetDate);\n                });\n\n                if (runs.length === 0) {\n                    return new vscode.LanguageModelToolResult([\n                        new vscode.LanguageModelTextPart(` No runs found for DAG '${dagId}' on ${date}.`)\n                    ]);\n                }\n            }\n\n            // Build detailed summary\n            let summaryMessage = `##  DAG Runs for '${dagId}'\\n\\n`;\n            if (date) {\n                summaryMessage += `**Date Filter:** ${date}\\n`;\n            } else {\n                summaryMessage += `**Date Filter:** Today (${ui.toISODateString(new Date())})\\n`;\n            }\n            summaryMessage += `**Total Runs:** ${runs.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details\n            runs.forEach((run: any, index: number) => {\n                const startTime = run.start_date || run.execution_date || 'N/A';\n                const endTime = run.end_date || 'N/A';\n                let duration = 'N/A';\n                \n                if (run.start_date && run.end_date) {\n                    const start = new Date(run.start_date);\n                    const end = new Date(run.end_date);\n                    const durationMs = end.getTime() - start.getTime();\n                    const durationSec = Math.floor(durationMs / 1000);\n                    const minutes = Math.floor(durationSec / 60);\n                    const seconds = durationSec % 60;\n                    duration = `${minutes}m ${seconds}s`;\n                }\n\n                const status = run.state || 'unknown';\n                const statusEmoji = this.getStatusEmoji(status);\n\n                summaryMessage += `### ${index + 1}. Run: ${run.dag_run_id || run.run_id}\\n\\n`;\n                summaryMessage += `- **Status:** ${statusEmoji} ${status}\\n`;\n                summaryMessage += `- **Start Time:** ${startTime}\\n`;\n                if (endTime !== 'N/A') {\n                    summaryMessage += `- **End Time:** ${endTime}\\n`;\n                }\n                summaryMessage += `- **Duration:** ${duration}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date || run.logical_date}\\n`;\n                summaryMessage += `\\n`;\n            });\n\n            // Include raw JSON for LLM processing\n            summaryMessage += `\\n---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(runs, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            const errorMessage = `\n Failed to retrieve DAG runs\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The DAG ID is correct\n- The Airflow server is accessible\n- You have the necessary permissions\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetDagRunsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    /**\n     * Helper to get emoji for run status\n     */\n    private getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'up_for_retry': '',\n            'up_for_reschedule': '',\n            'removed': '',\n            'scheduled': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n}\n","import * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IGetDagSourceCodeParams {\n    dagId: string;\n}\n\nexport class GetDagSourceCodeTool implements vscode.LanguageModelTool<IGetDagSourceCodeParams> {\n    constructor(private airflowClient: AirflowClientAdapter) {}\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGetDagSourceCodeParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetDagSourceCodeTool.invoke');\n        \n        try {\n            const sourceCode = await this.airflowClient.getDagSourceCode(dagId);\n\n            const result = `## DAG Source Code: ${dagId}\n\n\\`\\`\\`python\n${sourceCode}\n\\`\\`\\`\n\n**Total Lines:** ${sourceCode.split('\\n').length}\n\nThe source code has been retrieved successfully. You can analyze it for:\n- DAG structure and task dependencies\n- Operator configurations\n- Schedule and retry settings\n- Custom logic and parameters\n- Potential issues or improvements\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(result)\n            ]);\n        } catch (error) {\n            const errorMessage = `Failed to retrieve source code for DAG '${dagId}': ${error instanceof Error ? error.message : String(error)}`;\n            \n            // Track invocation error\n            Telemetry.Current.sendError('GetDagSourceCodeTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGetDagSourceCodeParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: `Retrieving source code for DAG '${options.input.dagId}'...`\n        };\n    }\n}\n","/**\n * GetFailedRunsTool - Language Model Tool for monitoring failed DAG runs\n * \n * This tool implements a read-only observability action that retrieves\n * failed DAG runs from Airflow. It does not require user confirmation\n * since it's a non-destructive operation.\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter, IFailedRunSummary } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for querying failed runs\n */\nexport interface IQueryRunsParams {\n    timeRangeHours?: number;\n    dagIdFilter?: string;\n}\n\n/**\n * GetFailedRunsTool - Implements vscode.LanguageModelTool for monitoring\n */\nexport class GetFailedRunsTool implements vscode.LanguageModelTool<IQueryRunsParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * Prepare invocation - minimal for read-only operations\n     * \n     * Since this is a read-only monitoring tool, we don't need extensive\n     * confirmation dialogs. This method can return undefined or a simple message.\n     * \n     * @param options - Contains the parsed input parameters\n     * @param token - Cancellation token\n     * @returns PreparedToolInvocation or undefined\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IQueryRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const timeRange = options.input.timeRangeHours || 24;\n        const dagFilter = options.input.dagIdFilter;\n\n        const message = dagFilter\n            ? `Querying failed runs for DAG '${dagFilter}' (last ${timeRange} hours)`\n            : `Querying all failed runs (last ${timeRange} hours)`;\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    /**\n     * Execute the query for failed DAG runs\n     * \n     * @param options - Contains the validated input parameters\n     * @param token - Cancellation token\n     * @returns LanguageModelToolResult with failed runs data\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IQueryRunsParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const timeRange = options.input.timeRangeHours || 24;\n        const dagFilter = options.input.dagIdFilter;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GetFailedRunsTool.invoke');\n\n        try {\n            // Call the mock API client to get failed runs\n            const failedRuns = await this.client.queryFailedRuns(timeRange, dagFilter);\n\n            // Format the response for the LLM\n            if (failedRuns.length === 0) {\n                const noFailuresMessage = dagFilter\n                    ? ` No failed runs found for DAG '${dagFilter}' in the last ${timeRange} hours.`\n                    : ` No failed runs found in the last ${timeRange} hours. All DAGs are healthy!`;\n\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(noFailuresMessage)\n                ]);\n            }\n\n            // Build a detailed summary\n            let summaryMessage = `##  Failed DAG Runs Report\\n\\n`;\n            summaryMessage += `**Time Range:** Last ${timeRange} hours\\n`;\n            if (dagFilter) {\n                summaryMessage += `**DAG Filter:** ${dagFilter}\\n`;\n            }\n            summaryMessage += `**Total Failed Runs:** ${failedRuns.length}\\n\\n`;\n            summaryMessage += `---\\n\\n`;\n\n            // Add individual run details\n            failedRuns.forEach((run: IFailedRunSummary, index: number) => {\n                summaryMessage += `### ${index + 1}. ${run.dag_id}\\n\\n`;\n                summaryMessage += `- **Run ID:** \\`${run.dag_run_id}\\`\\n`;\n                summaryMessage += `- **State:** ${run.state}\\n`;\n                summaryMessage += `- **Execution Date:** ${run.execution_date}\\n`;\n                summaryMessage += `- **Logical Date:** ${run.logical_date}\\n`;\n                if (run.start_date) {\n                    summaryMessage += `- **Started:** ${run.start_date}\\n`;\n                }\n                if (run.end_date) {\n                    summaryMessage += `- **Ended:** ${run.end_date}\\n`;\n                }\n                if (run.error_message) {\n                    summaryMessage += `- **Error:** ${run.error_message}\\n`;\n                }\n                summaryMessage += `\\n`;\n            });\n\n            // Also include raw JSON for LLM processing\n            summaryMessage += `\\n---\\n\\n**Raw Data (JSON):**\\n\\n`;\n            summaryMessage += `\\`\\`\\`json\\n${JSON.stringify(failedRuns, null, 2)}\\n\\`\\`\\`\\n`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(summaryMessage)\n            ]);\n\n        } catch (error) {\n            // Handle errors gracefully\n            const errorMessage = `\n Failed to Query DAG Runs\n\n**Error:** ${error instanceof Error ? error.message : String(error)}\n\nPlease check:\n- The Airflow server is accessible\n- You have the necessary permissions\n- The time range and filters are valid\n            `.trim();\n\n            // Track invocation error\n            Telemetry.Current.sendError('GetFailedRunsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(errorMessage)\n            ]);\n        }\n    }\n}\n","/**\n * GetRunningDagsTool - Language Model Tool for listing currently running DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class GetRunningDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Checking for running DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GetRunningDagsTool.invoke');\n        \n        try {\n            const runningDags = await this.client.getRunningDags();\n\n            if (runningDags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No DAGs are currently running.\")\n                ]);\n            }\n\n            let message = `##  Running DAGs (${runningDags.length})\\n\\n`;\n            runningDags.forEach(dag => {\n                const stateEmoji = dag.latest_run_state === 'running' ? '' : '';\n                message += `- ${stateEmoji} **${dag.dag_id}** - State: ${dag.latest_run_state}, Run ID: \\`${dag.latest_run_id}\\``;\n                if (dag.description) {\n                    message += `\\n  Description: ${dag.description}`;\n                }\n                if (dag.owners && dag.owners.length > 0) {\n                    message += `\\n  Owners: ${dag.owners.join(', ')}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(runningDags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GetRunningDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to get running DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","import * as vscode from 'vscode';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class GetTodayTool implements vscode.LanguageModelTool<void> {\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GetTodayTool.invoke');\n        \n        const today = new Date();\n        \n        // Format: YYYY-MM-DD\n        const formattedDate = today.toISOString().split('T')[0];\n        \n        // Additional formats for user convenience\n        const dayOfWeek = today.toLocaleDateString('en-US', { weekday: 'long' });\n        const fullDate = today.toLocaleDateString('en-US', { \n            weekday: 'long', \n            year: 'numeric', \n            month: 'long', \n            day: 'numeric' \n        });\n\n        const result = `## Today's Date\n\n**ISO Format:** ${formattedDate}\n**Full Date:** ${fullDate}\n**Day of Week:** ${dayOfWeek}\n\n*Use the ISO format (${formattedDate}) when filtering DAG runs or working with date ranges.*`;\n\n        return new vscode.LanguageModelToolResult([\n            new vscode.LanguageModelTextPart(result)\n        ]);\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Getting current system date...'\n        };\n    }\n}\n","/**\n * GoToConfigsViewTool - Language Model Tool for opening the Configs view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ConfigsView } from '../admin/ConfigsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToConfigsViewTool - Opens the Configs panel\n */\nexport class GoToConfigsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Configs View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToConfigsViewTool.invoke');\n        \n        try {\n\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ConfigsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Configs View - showing Airflow configuration settings (airflow.cfg)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToConfigsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Configs View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToConnectionsViewTool - Language Model Tool for opening the Connections view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ConnectionsView } from '../admin/ConnectionsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToConnectionsViewTool - Opens the Connections panel\n */\nexport class GoToConnectionsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Connections View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToConnectionsViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ConnectionsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Connections View - showing Airflow connections (databases, APIs, cloud services, etc.)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToConnectionsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Connections View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToDagLogViewTool - Language Model Tool for opening the DAG Log View panel\n * \n * This tool allows users to open the DagLogView for a specific DAG,\n * optionally providing dagRunId, taskId, and tryNumber.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagLogView } from '../report/DagLogView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for opening DAG Log View\n */\nexport interface IGoToDagLogViewParams {\n    dagId: string;\n    dagRunId?: string;\n    taskId?: string;\n    tryNumber?: number;\n}\n\n/**\n * GoToDagLogViewTool - Implements vscode.LanguageModelTool for opening DAG Log View\n * \n * This tool opens the DagLogView panel to display logs for tasks.\n */\nexport class GoToDagLogViewTool implements vscode.LanguageModelTool<IGoToDagLogViewParams> {\n\n    constructor() {\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagLogViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, dagRunId, taskId, tryNumber } = options.input;\n\n        let message = `Opening DAG Log View for: **${dagId}**`;\n        if (dagRunId) {\n            message += `\\nDAG Run ID: **${dagRunId}**`;\n        }\n        if (taskId) {\n            message += `\\nTask ID: **${taskId}**`;\n        }\n        if (tryNumber) {\n            message += `\\nTry Number: **${tryNumber}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagLogViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId, taskId, tryNumber } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagLogViewTool.invoke');\n        \n        try {\n\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Open the DagLogView with the specified parameters\n            DagLogView.render(dagId, dagRunId, taskId, tryNumber);\n\n            let successMessage = ` Opened DAG Log View for: **${dagId}**`;\n            if (dagRunId) successMessage += `, Run: **${dagRunId}**`;\n            if (taskId) successMessage += `, Task: **${taskId}**`;\n            if (tryNumber) successMessage += `, Try: **${tryNumber}**`;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagLogViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG Log View for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToDagRunHistoryTool - Language Model Tool for opening the DAG Run History view\n * \n * This tool allows users to open the DagRunHistory view with optional filters\n * for dagId, startDate, endDate, and status.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagRunView } from '../report/DagRunView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IGoToDagRunHistoryParams {\n    dagId: string;\n    startDate?: string;\n    endDate?: string;\n    status?: string;\n}\n\n/**\n * GoToDagRunHistoryTool - Implements vscode.LanguageModelTool for opening DAG Run History View\n * \n * This tool opens the DagRunHistory panel to display run history for a specific DAG.\n * Optional filters can be applied for date range and status.\n */\nexport class GoToDagRunHistoryTool implements vscode.LanguageModelTool<IGoToDagRunHistoryParams> {\n\n    constructor() {\n        // No external dependencies needed - uses DagTreeView.Current directly\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagRunHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, startDate, endDate, status } = options.input;\n\n        let message = `Opening DAG Run History for: **${dagId}**`;\n        if (startDate) {\n            message += `\\nStart Date: **${startDate}**`;\n        }\n        if (endDate) {\n            message += `\\nEnd Date: **${endDate}**`;\n        }\n        if (status) {\n            message += `\\nStatus Filter: **${status}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagRunHistoryParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, startDate, endDate, status } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagRunHistoryTool.invoke');\n        \n        try {\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Validate date format if provided (YYYY-MM-DD)\n            const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n            if (startDate && !dateRegex.test(startDate)) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid startDate format: \"${startDate}\". Expected format: YYYY-MM-DD`)\n                ]);\n            }\n            if (endDate && !dateRegex.test(endDate)) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid endDate format: \"${endDate}\". Expected format: YYYY-MM-DD`)\n                ]);\n            }\n\n            // Validate status if provided\n            const validStatuses = ['success', 'failed', 'running', 'queued', 'upstream_failed', 'skipped', 'deferred'];\n            if (status && !validStatuses.includes(status.toLowerCase())) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(` Invalid status: \"${status}\". Valid values: ${validStatuses.join(', ')}`)\n                ]);\n            }\n\n            // Open the DagRunView with the specified parameters\n            DagRunView.render(dagId, startDate, endDate, status?.toLowerCase());\n\n            let successMessage = ` Opened DAG Run History for: **${dagId}**`;\n            const filters: string[] = [];\n            if (startDate) {\n                filters.push(`Start Date: ${startDate}`);\n            }\n            if (endDate) {\n                filters.push(`End Date: ${endDate}`);\n            }\n            if (status) {\n                filters.push(`Status: ${status}`);\n            }\n            if (filters.length > 0) {\n                successMessage += `\\n Filters applied: ${filters.join(', ')}`;\n            }\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagRunHistoryTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG Run History for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToDagViewTool - Language Model Tool for opening the DAG View panel\n * \n * This tool allows users to open the DagView for a specific DAG,\n * optionally navigating to a specific DAG run.\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { DagView } from '../dag/DagView';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for opening DAG View\n */\n\nexport interface IGoToDagViewParams {\n    dagId: string;\n    dagRunId?: string;\n}\n\n/**\n * GoToDagViewTool - Implements vscode.LanguageModelTool for opening DAG View\n * \n * This tool opens the DagView panel to display information about a specific DAG.\n * If a dagRunId is provided, it will navigate to that specific run.\n */\nexport class GoToDagViewTool implements vscode.LanguageModelTool<IGoToDagViewParams> {\n\n    constructor() {\n        // No external dependencies needed - uses DagTreeView.Current directly\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IGoToDagViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId, dagRunId } = options.input;\n\n        let message = `Opening DAG View for: **${dagId}**`;\n        if (dagRunId) {\n            message += `\\nDAG Run ID: **${dagRunId}**`;\n        }\n\n        return {\n            invocationMessage: message\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IGoToDagViewParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, dagRunId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('GoToDagViewTool.invoke');\n        \n        try {\n\n            // Check if API is available\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            // Open the DagView with the specified DAG ID and optional run ID\n            DagView.render(dagId, dagRunId);\n\n            let successMessage = ` Opened DAG View for: **${dagId}**`;\n            if (dagRunId) {\n                successMessage += `\\n Showing DAG Run: **${dagRunId}**`;\n            } else {\n                successMessage += `\\n Showing latest DAG run`;\n            }\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(successMessage)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToDagViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open DAG View for ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToPluginsViewTool - Language Model Tool for opening the Plugins view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { PluginsView } from '../admin/PluginsView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToPluginsViewTool - Opens the Plugins panel\n */\nexport class GoToPluginsViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Plugins View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToPluginsViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            PluginsView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Plugins View - showing installed Airflow plugins')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToPluginsViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Plugins View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToProvidersViewTool - Language Model Tool for opening the Providers view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ProvidersView } from '../admin/ProvidersView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToProvidersViewTool - Opens the Providers panel\n */\nexport class GoToProvidersViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Providers View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToProvidersViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ProvidersView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Providers View - showing installed Airflow providers with their versions')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToProvidersViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Providers View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToServerHealthViewTool - Language Model Tool for opening the Server Health view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { ServerHealthView } from '../admin/ServerHealthView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToServerHealthViewTool - Opens the Server Health panel\n */\nexport class GoToServerHealthViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Server Health View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToServerHealthViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            ServerHealthView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Server Health View - showing Airflow server health status, scheduler status, and metadata database status')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToServerHealthViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Server Health View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * GoToVariablesViewTool - Language Model Tool for opening the Variables view\n */\n\nimport * as vscode from 'vscode';\nimport { Session } from '../common/Session';\nimport { VariablesView } from '../admin/VariablesView';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * GoToVariablesViewTool - Opens the Variables panel\n */\nexport class GoToVariablesViewTool implements vscode.LanguageModelTool<void> {\n\n    constructor() {}\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        return {\n            invocationMessage: 'Opening Variables View...'\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('GoToVariablesViewTool.invoke');\n        \n        try {\n            if (!Session.Current.Api) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(' Not connected to an Airflow server. Please connect to a server first.')\n                ]);\n            }\n\n            VariablesView.render();\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(' Opened Variables View - showing Airflow variables (key-value configuration settings)')\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('GoToVariablesViewTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to open Variables View: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * ListActiveDagsTool - Language Model Tool for listing active DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ListActiveDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Listing active DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('ListActiveDagsTool.invoke');\n        \n        try {\n            const dags = await this.client.getDags(false); // false = active (not paused)\n\n            if (dags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No active DAGs found.\")\n                ]);\n            }\n\n            let message = `##  Active DAGs (${dags.length})\\n\\n`;\n            dags.forEach(dag => {\n                message += `- **${dag.dag_id}**`;\n                if (dag.description) {\n                    message += `: ${dag.description}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(dags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('ListActiveDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to list active DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * ListPausedDagsTool - Language Model Tool for listing paused DAGs\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ListPausedDagsTool implements vscode.LanguageModelTool<void> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        return {\n            invocationMessage: \"Listing paused DAGs...\"\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<void>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        // Track tool invocation\n        Telemetry.Current.send('ListPausedDagsTool.invoke');\n        \n        try {\n            const dags = await this.client.getDags(true); // true = paused\n\n            if (dags.length === 0) {\n                return new vscode.LanguageModelToolResult([\n                    new vscode.LanguageModelTextPart(\" No paused DAGs found.\")\n                ]);\n            }\n\n            let message = `##  Paused DAGs (${dags.length})\\n\\n`;\n            dags.forEach(dag => {\n                message += `- **${dag.dag_id}**`;\n                if (dag.description) {\n                    message += `: ${dag.description}`;\n                }\n                message += `\\n`;\n            });\n\n            message += `\\n---\\n**Raw Data:**\\n\\`\\`\\`json\\n${JSON.stringify(dags, null, 2)}\\n\\`\\`\\``;\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('ListPausedDagsTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to list paused DAGs: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * PauseDagTool - Language Model Tool for pausing a DAG\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IPauseDagParams {\n    dagId: string;\n}\n\nexport class PauseDagTool implements vscode.LanguageModelTool<IPauseDagParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IPauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Pause DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **PAUSE** the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n\\n`);\n        confirmationMessage.appendMarkdown('**Effect:** No new runs will be scheduled for this DAG.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Pausing DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Pause DAG',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IPauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('PauseDagTool.invoke');\n        \n        try {\n            await this.client.pauseDag(dagId, true); // true = pause\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Successfully PAUSED DAG: **${dagId}**`)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('PauseDagTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to pause DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * TriggerDagRunTool - Language Model Tool for triggering Airflow DAG runs\n * \n * This tool implements a state-changing action that requires explicit user confirmation\n * via the prepareInvocation method. It displays the target DAG ID and configuration\n * payload in a markdown-formatted confirmation dialog before execution.\n */\n\nimport * as vscode from 'vscode';\nimport * as fs from 'fs';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\n/**\n * Input parameters for triggering a DAG run\n */\nexport interface ITriggerParams {\n    dagId: string;\n    configJson?: string;\n    date?: string;\n}\n\n/**\n * TriggerDagRunTool - Implements vscode.LanguageModelTool for DAG triggering\n */\nexport class TriggerDagRunTool implements vscode.LanguageModelTool<ITriggerParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    /**\n     * SECURITY CRITICAL: Prepare invocation with user confirmation\n     * \n     * This method is called before invoke() and provides a confirmation gate\n     * for the user to review the exact DAG and configuration before triggering.\n     * \n     * @param options - Contains the parsed input parameters\n     * @param token - Cancellation token\n     * @returns PreparedToolInvocation with confirmation message\n     */\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<ITriggerParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation | undefined> {\n        const { dagId, configJson, date } = options.input;\n        \n        // Process configJson: check if it's a file path\n        let finalConfig = configJson || '{}';\n        let configSource = 'Inline';\n\n        if (configJson && !configJson.trim().startsWith('{')) {\n            // Assume it's a file path if it doesn't start with {\n            try {\n                // Remove quotes if present\n                const filePath = configJson.replace(/^['\"]|['\"]$/g, '');\n                if (fs.existsSync(filePath)) {\n                    finalConfig = fs.readFileSync(filePath, 'utf8');\n                    configSource = `File: ${filePath}`;\n                }\n            } catch (error) {\n                // If read fails, keep original string (validation will happen later)\n                console.warn(`Failed to read config file: ${error}`);\n            }\n        }\n\n        // Validate JSON\n        try {\n            JSON.parse(finalConfig);\n        } catch (e) {\n            throw new Error(`Invalid JSON configuration: ${e instanceof Error ? e.message : String(e)}`);\n        }\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Trigger DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to trigger the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n`);\n        if (date) {\n            confirmationMessage.appendMarkdown(`**Logical Date:** \\`${date}\\`\\n`);\n        }\n        confirmationMessage.appendMarkdown(`**Config Source:** ${configSource}\\n\\n`);\n        confirmationMessage.appendMarkdown('**Configuration Payload:**\\n');\n        confirmationMessage.appendCodeblock(finalConfig, 'json');\n        confirmationMessage.appendMarkdown('\\nDo you want to proceed?');\n\n        return {\n            invocationMessage: `Triggering DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm DAG Trigger',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    /**\n     * Execute the DAG trigger action\n     * \n     * @param options - Contains the validated input parameters\n     * @param token - Cancellation token\n     * @returns LanguageModelToolResult with success/error information\n     */\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<ITriggerParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId, configJson, date } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('TriggerDagRunTool.invoke');\n\n        try {\n            // Re-process config for invoke (same logic as prepare)\n            let finalConfig = configJson || '{}';\n            if (configJson && !configJson.trim().startsWith('{')) {\n                try {\n                    const filePath = configJson.replace(/^['\"]|['\"]$/g, '');\n                    if (fs.existsSync(filePath)) {\n                        finalConfig = fs.readFileSync(filePath, 'utf8');\n                    }\n                } catch (error) {\n                    // Ignore error here, will fail at JSON parse in client\n                }\n            }\n\n            const result = await this.client.triggerDagRun(dagId, finalConfig, date);\n\n            const message = [\n                ` **Success!** DAG Run triggered.`,\n                ``,\n                `- **DAG ID:** ${result.dag_id}`,\n                `- **Run ID:** ${result.dag_run_id}`,\n                `- **State:** ${result.state}`,\n                `- **Logical Date:** ${result.logical_date}`,\n                date ? `- **Requested Date:** ${date}` : ''\n            ].filter(Boolean).join('\\n');\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(message)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('TriggerDagRunTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to trigger DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/**\n * UnpauseDagTool - Language Model Tool for unpausing (activating) a DAG\n */\n\nimport * as vscode from 'vscode';\nimport { AirflowClientAdapter } from './AirflowClientAdapter';\nimport { AIHandler } from './AIHandler';\nimport { Telemetry } from '../common/Telemetry';\n\nexport interface IUnpauseDagParams {\n    dagId: string;\n}\n\nexport class UnpauseDagTool implements vscode.LanguageModelTool<IUnpauseDagParams> {\n    private client: AirflowClientAdapter;\n\n    constructor(client: AirflowClientAdapter) {\n        this.client = client;\n    }\n\n    async prepareInvocation(\n        options: vscode.LanguageModelToolInvocationPrepareOptions<IUnpauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.PreparedToolInvocation> {\n        const { dagId } = options.input;\n\n        const confirmationMessage = new vscode.MarkdownString();\n        confirmationMessage.isTrusted = true;\n        confirmationMessage.appendMarkdown('##  Unpause DAG Confirmation\\n\\n');\n        confirmationMessage.appendMarkdown(`You are about to **UNPAUSE** (activate) the following DAG:\\n\\n`);\n        confirmationMessage.appendMarkdown(`**DAG ID:** \\`${dagId}\\`\\n\\n`);\n        confirmationMessage.appendMarkdown('**Effect:** New runs will be scheduled for this DAG.\\n\\n');\n        confirmationMessage.appendMarkdown('Do you want to proceed?');\n\n        return {\n            invocationMessage: `Unpausing DAG: ${dagId}`,\n            confirmationMessages: {\n                title: 'Confirm Unpause DAG',\n                message: confirmationMessage\n            }\n        };\n    }\n\n    async invoke(\n        options: vscode.LanguageModelToolInvocationOptions<IUnpauseDagParams>,\n        token: vscode.CancellationToken\n    ): Promise<vscode.LanguageModelToolResult> {\n        const { dagId } = options.input;\n        AIHandler.Current.currentDagId = dagId;\n        \n        // Track tool invocation\n        Telemetry.Current.send('UnpauseDagTool.invoke');\n\n        try {\n            await this.client.pauseDag(dagId, false); // false = unpause\n\n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Successfully UNPAUSED DAG: **${dagId}**`)\n            ]);\n\n        } catch (error) {\n            // Track invocation error\n            Telemetry.Current.sendError('UnpauseDagTool.invocationError', error instanceof Error ? error : new Error(String(error)));\n            \n            return new vscode.LanguageModelToolResult([\n                new vscode.LanguageModelTextPart(` Failed to unpause DAG ${dagId}: ${error instanceof Error ? error.message : String(error)}`)\n            ]);\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { Session } from '../common/Session';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagLogView {\n    public static Current: DagLogView | undefined;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagId: string;\n    private dagRunId: string | undefined;\n    private taskId: string | undefined;\n    private tryNumber: number | undefined;\n\n    private dagRunJson: any;\n    private taskInstancesJson: any;\n    private logs: Map<string, any> = new Map(); // taskId -> logJson\n\n    private constructor(panel: vscode.WebviewPanel, dagId: string, dagRunId?: string, taskId?: string, tryNumber?: number) {\n        ui.logToOutput('DagLogView.constructor Started');\n        Telemetry.Current.send('DagLogView.constructor.called');\n\n        this._panel = panel;\n        this.dagId = dagId;\n        this.dagRunId = dagRunId;\n        this.taskId = taskId;\n        this.tryNumber = tryNumber;\n\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DagLogView.constructor Completed');\n    }\n\n    public static render(dagId: string, dagRunId?: string, taskId?: string, tryNumber?: number) {\n        ui.logToOutput('DagLogView.render Started');\n        Telemetry.Current.send('DagLogView.render.called');\n        if (DagLogView.Current) {\n            DagLogView.Current.dagId = dagId;\n            DagLogView.Current.dagRunId = dagRunId;\n            DagLogView.Current.taskId = taskId;\n            DagLogView.Current.tryNumber = tryNumber;\n            DagLogView.Current._panel.reveal(vscode.ViewColumn.One);\n            DagLogView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagLogView\", \"DAG Logs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n                retainContextWhenHidden: true\n            });\n\n            DagLogView.Current = new DagLogView(panel, dagId, dagRunId, taskId, tryNumber);\n        }\n    }\n\n    public async loadData() {\n        ui.logToOutput('DagLogView.loadData Started');\n        Telemetry.Current.send('DagLogView.loadData.called');\n        if (!Session.Current.Api) { return; }\n\n        // 1. Resolve dagRunId if missing\n        if (!this.dagRunId) {\n            const lastRunResult = await Session.Current.Api.getLastDagRun(this.dagId);\n            if (lastRunResult.isSuccessful && lastRunResult.result) {\n                this.dagRunJson = lastRunResult.result;\n                this.dagRunId = this.dagRunJson.dag_run_id;\n            } else {\n                ui.showErrorMessage(\"Could not fetch latest DAG run.\");\n                return;\n            }\n        } else {\n            // Fetch specific dag run details\n            const runResult = await Session.Current.Api.getDagRun(this.dagId, this.dagRunId);\n            if (runResult.isSuccessful) {\n                this.dagRunJson = runResult.result;\n            }\n        }\n\n        // 2. Fetch Task Instances\n        if (this.dagRunId) {\n            const tasksResult = await Session.Current.Api.getTaskInstances(this.dagId, this.dagRunId);\n            if (tasksResult.isSuccessful && tasksResult.result) {\n                this.taskInstancesJson = tasksResult.result;\n            }\n        }\n\n        // 3. Clear logs cache on reload\n        this.logs.clear();\n\n        // 4. Fetch logs for tasks\n        const tasks = this._getTasks();\n        \n        // Use Promise.all to fetch concurrently\n        await Promise.all(tasks.map(t => {\n            let tryNum = t.try_number;\n            // If specific task requested AND specific try requested, use that.\n            if (this.taskId && t.task_id === this.taskId && this.tryNumber !== undefined) {\n                tryNum = this.tryNumber;\n            }\n            return this.fetchLogForTask(t.task_id, tryNum);\n        }));\n\n        await this.renderHtml();\n    }\n\n    private _getTasks(): any[] {\n        if (!this.taskInstancesJson || !this.taskInstancesJson.task_instances) {\n            return [];\n        }\n        let tasks = [...this.taskInstancesJson.task_instances];\n\n        // Filter by taskId if provided\n        if (this.taskId) {\n            tasks = tasks.filter((t: any) => t.task_id === this.taskId);\n        }\n\n        return tasks.sort((a: any, b: any) => {\n             const dateA = a.start_date ? new Date(a.start_date).getTime() : 0;\n             const dateB = b.start_date ? new Date(b.start_date).getTime() : 0;\n             return dateA - dateB;\n        });\n    }\n\n    private async fetchLogForTask(taskId: string, tryNum?: number) {\n        if (!this.dagRunId) { return; }\n        \n        let targetTryNumber = tryNum;\n        if (targetTryNumber === undefined) {\n             const task = this.taskInstancesJson.task_instances.find((t: any) => t.task_id === taskId);\n             if (task) {\n                 targetTryNumber = task.try_number;\n             } else {\n                 targetTryNumber = 1; \n             }\n        }\n        \n        if (this.logs.has(taskId)) { return; }\n\n        const result = await Session.Current.Api?.getTaskInstanceLog(this.dagId, this.dagRunId, taskId, targetTryNumber!);\n        if (result?.isSuccessful) {\n            this.logs.set(taskId, result.result);\n        }\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DagLogView.renderHtml Started');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n    }\n\n    public dispose() {\n        DagLogView.Current = undefined;\n        this._panel.dispose();\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagLogView._getWebviewContent Started');\n        Telemetry.Current.send('DagLogView._getWebviewContent.called');\n        const elementsUri = ui.getUri(webview, extensionUri, [\n            \"node_modules\",\n            \"@vscode-elements\",\n            \"elements\",\n            \"dist\",\n            \"bundled.js\",\n        ]);\n\n        const mainUri = ui.getUri(webview, extensionUri, [\"media\", \"main.js\"]);\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        const tasks = this._getTasks();\n        \n        // Metadata\n        const dagRun = this.dagRunJson || {};\n        const startDate = dagRun.start_date ? ui.toISODateTimeString(new Date(dagRun.start_date)) : 'N/A';\n        const endDate = dagRun.end_date ? ui.toISODateTimeString(new Date(dagRun.end_date)) : 'Running';\n        const duration = dagRun.start_date ? ui.getDuration(new Date(dagRun.start_date), dagRun.end_date ? new Date(dagRun.end_date) : new Date()) : 'N/A';\n        const status = dagRun.state || 'N/A';\n\n        const taskSections = tasks.map(t => {\n            const logData = this.logs.get(t.task_id);\n            let contentHtml = '';\n\n            const isSuccess = t.state === 'success';\n            const isError = ['failed', 'upstream_failed', 'shutdown', 'restart'].includes(t.state);\n            let statusClass = 'status-other';\n            if (isSuccess) statusClass = 'status-success';\n            if (isError) statusClass = 'status-error';\n\n            let displayTry = t.try_number;\n            if (this.taskId && t.task_id === this.taskId && this.tryNumber !== undefined) {\n                displayTry = this.tryNumber;\n            }\n\n            if (logData) {\n                if (logData.content && Array.isArray(logData.content)) {\n                    contentHtml = logData.content.map((entry: any) => {\n                         const ts = entry.timestamp ? `[${entry.timestamp}]` : '';\n                         const lvl = entry.level ? `[${entry.level}]` : '';\n                         const logger = entry.logger ? `[${entry.logger}]` : '';\n                         const evt = entry.event || '';\n                         let extra = '';\n                         // Error detail\n                         if (entry.error_detail) {\n                             extra = `<pre class=\"error-detail\">${JSON.stringify(entry.error_detail, null, 2)}</pre>`;\n                         }\n                         \n                         let lineClass = 'log-line';\n                         if (lvl.toLowerCase().includes('error')) { lineClass += ' log-error'; }\n                         if (lvl.toLowerCase().includes('warn')) { lineClass += ' log-warn'; }\n\n                         return `<div class=\"${lineClass}\"><span class=\"log-ts\">${ts}</span> <span class=\"log-lvl\">${lvl}</span> <span class=\"log-logger\">${logger}</span> <span class=\"log-msg\">${this._escapeHtml(evt)}</span>${extra}</div>`;\n                    }).join('');\n                } else if (logData.detail) {\n                     contentHtml = `<div class=\"log-error\">${this._escapeHtml(logData.detail)}</div>`;\n                } else {\n                     contentHtml = `<pre>${this._escapeHtml(JSON.stringify(logData, null, 2))}</pre>`;\n                }\n            } else {\n                contentHtml = '<div class=\"loading-logs\">Loading logs...</div>'; \n            }\n\n            return `\n            <div class=\"task-section ${statusClass}\">\n                <div class=\"task-header\">\n                    <div class=\"header-left\">\n                        <span class=\"status-indicator\"></span>\n                        <span class=\"task-title\">${this._escapeHtml(t.task_id)}</span>\n                        <span class=\"status-pill\">${this._escapeHtml(t.state)}</span>\n                    </div>\n                    <div class=\"header-right\">\n                        <span class=\"task-try\">Try: ${displayTry}</span>\n                    </div>\n                </div>\n                <div class=\"log-container\" id=\"log-${t.task_id}\">\n                    ${contentHtml}\n                </div>\n            </div>`;\n        }).join('\\n');\n\n\n        return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n    <script type=\"module\" src=\"${elementsUri}\"></script>\n    <script type=\"module\" src=\"${mainUri}\"></script>\n    <link rel=\"stylesheet\" href=\"${styleUri}\">\n    <style>\n        :root {\n            --font-size-sm: 12px;\n            --font-size-md: 13px;\n            --font-size-lg: 15px;\n            --border-radius: 4px;\n            --spacing-xs: 4px;\n            --spacing-sm: 8px;\n            --spacing-md: 16px;\n            --spacing-lg: 24px;\n        }\n\n        body { \n            padding: var(--spacing-md); \n            display: flex; \n            flex-direction: column; \n            height: 100vh; \n            box-sizing: border-box; \n            background: var(--vscode-editor-background); \n            color: var(--vscode-editor-foreground);\n            font-family: var(--vscode-font-family);\n        }\n\n        .metadata { \n            margin-bottom: var(--spacing-lg); \n            padding: var(--spacing-md); \n            background: var(--vscode-editor-inactiveSelectionBackground); \n            border-radius: var(--border-radius); \n        }\n        .metadata-row { display: flex; gap: 32px; font-size: 13px; margin-bottom: 4px; }\n        .label { font-weight: 600; color: var(--vscode-descriptionForeground); width: 70px; display: inline-block; text-transform: uppercase; font-size: 11px; }\n        \n        .task-container { display: flex; flex-direction: column; gap: 16px; padding-bottom: 20px; }\n        \n        .task-section { \n            border: 1px solid var(--vscode-widget-border); \n            border-radius: var(--border-radius); \n            overflow: hidden; \n            background: var(--vscode-editor-background);\n        }\n        \n        .task-header { \n            padding: 8px 16px; \n            display: flex; \n            justify-content: space-between;\n            align-items: center; \n            border-bottom: 1px solid var(--vscode-widget-border);\n        }\n\n        .header-left { display: flex; align-items: center; gap: 12px; }\n        .header-right { display: flex; align-items: center; gap: 12px; }\n\n        .task-title { font-weight: 600; font-size: 14px; }\n        .task-try { font-size: 11px; color: var(--vscode-descriptionForeground); }\n        \n        .status-indicator {\n            width: 8px; height: 8px; border-radius: 50%;\n            display: inline-block;\n        }\n\n        .status-pill {\n            padding: 2px 8px;\n            border-radius: 10px;\n            font-size: 10px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n\n        /* Status Colors */\n        .task-section.status-success .task-header {\n            background-color: var(--vscode-notebook-cellEditorBackground); \n        }\n        .task-section.status-success .status-indicator {\n            background-color: var(--vscode-testing-iconPassed);\n        }\n        .task-section.status-success .status-pill {\n            background-color: var(--vscode-testing-iconPassed);\n            color: var(--vscode-editor-background);\n        }\n\n        .task-section.status-error .task-header {\n            background-color: rgba(255, 0, 0, 0.1); \n        }\n        .task-section.status-error .status-indicator {\n            background-color: var(--vscode-errorForeground);\n        }\n        .task-section.status-error .status-pill {\n            background-color: var(--vscode-errorForeground);\n            color: white;\n        }\n\n        .task-section.status-other .task-header {\n            background-color: var(--vscode-sideBarSectionHeader-background);\n        }\n        .task-section.status-other .status-indicator {\n            background-color: var(--vscode-descriptionForeground);\n        }\n        .task-section.status-other .status-pill {\n            background-color: var(--vscode-badge-background);\n            color: var(--vscode-badge-foreground);\n        }\n\n        .log-container { \n            padding: 16px;\n            max-height: 500px;\n            overflow-y: auto; \n            font-family: var(--vscode-editor-font-family);\n            font-size: 12px;\n            white-space: pre-wrap;\n            line-height: 1.5;\n        }\n        \n        .log-line { margin-bottom: 2px; }\n        .log-ts { color: var(--vscode-debugConsole-infoForeground); margin-right: 8px; opacity: 0.8; font-size: 0.9em; }\n        .log-lvl { font-weight: bold; margin-right: 8px; }\n        .log-logger { color: var(--vscode-textLink-foreground); margin-right: 8px; }\n        \n        .log-error { color: var(--vscode-errorForeground); }\n        .log-warn { color: var(--vscode-editorWarning-foreground); }\n        \n        .error-detail { \n            color: var(--vscode-textPreformat-foreground); \n            background-color: var(--vscode-textBlockQuote-background);\n            padding: 12px;\n            margin: 8px 0 8px 16px;\n            border-left: 3px solid var(--vscode-errorForeground);\n            border-radius: 3px;\n        }\n        .loading-logs { font-style: italic; color: var(--vscode-descriptionForeground); padding: 20px; text-align: center; }\n\n    </style>\n    <title>DAG Logs</title>\n</head>\n<body>\n    <div class=\"metadata\">\n        <div class=\"metadata-row\">\n            <div><span class=\"label\">DAG ID:</span> <span>${this.dagId}</span></div>\n            <div><span class=\"label\">Run ID:</span> <span>${this.dagRunId}</span></div>\n            <div><span class=\"label\">Status:</span> <span>${status}</span></div>\n        </div>\n        <div class=\"metadata-row\">\n            <div><span class=\"label\">Start:</span> <span>${startDate}</span></div>\n            <div><span class=\"label\">End:</span> <span>${endDate}</span></div>\n            <div><span class=\"label\">Duration:</span> <span>${duration}</span></div>\n        </div>\n    </div>\n\n    <div class=\"task-container\">\n        ${taskSections}\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n        // Just listener for now if we want to add interactivity later e.g. collapse/expand\n    </script>\n</body>\n</html>`;\n    }\n\n    private _escapeHtml(text: string): string {\n        if (!text) return '';\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagLogView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DagLogView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            async (message: any) => {\n                // No messages expected for now\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { DagView } from '../dag/DagView';\nimport { Session } from '../common/Session';\nimport { DagLogView } from './DagLogView';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class DagRunView {\n    public static Current: DagRunView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagRunsJson: any;\n    \n    // Filters\n    private selectedDagId: string = '';\n    private selectedStartDate: string = ui.toISODateString(new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)); // Default to 7 days ago\n    private selectedEndDate: string = ui.toISODateString(new Date());\n    private selectedStatus: string = '';\n    private allDagIds: string[] = [];\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('DagRunView.constructor Started');\n        Telemetry.Current.send('DagRunView.constructor.called');\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DagRunView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('DagRunView.loadData Started');\n        Telemetry.Current.send('DagRunView.loadData.called');\n\t\tif (!Session.Current.Api) { return; }\n        // Fetch all DAGs to populate dag_id filter\n        const dagsResult = await Session.Current.Api.getDagList();\n        if (dagsResult.isSuccessful && Array.isArray(dagsResult.result)) {\n            this.allDagIds = dagsResult.result.map((dag: any) => dag.dag_id).sort();\n            \n            // If no DAG is selected yet, select the first one\n            if (!this.selectedDagId && this.allDagIds.length > 0) {\n                this.selectedDagId = this.allDagIds[0];\n            }\n        }\n\n        // Fetch DAG runs for the selected DAG and date range\n        if (this.selectedDagId) {\n            const result = await Session.Current.Api.getDagRunHistory(this.selectedDagId);\n            if (result.isSuccessful && result.result && result.result.dag_runs) {\n                // Filter runs by date range on the client side\n                const startDateTime = new Date(this.selectedStartDate + 'T00:00:00Z').getTime();\n                const endDateTime = new Date(this.selectedEndDate + 'T23:59:59Z').getTime();\n                \n                this.dagRunsJson = result.result.dag_runs.filter((run: any) => {\n                    if (run.start_date) {\n                        const runTime = new Date(run.start_date).getTime();\n                        return runTime >= startDateTime && runTime <= endDateTime;\n                    }\n                    return false;\n                });\n            }\n        } else {\n            this.dagRunsJson = [];\n        }\n\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DagRunView.renderHtml Started');\n        Telemetry.Current.send('DagRunView.renderHtml.called');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('DagRunView.renderHtml Completed');\n    }\n\n    public static render(dagId?: string, startDate?: string, endDate?: string, status?: string) {\n        ui.logToOutput('DagRunView.render Started');\n        Telemetry.Current.send('DagRunView.render.called');\n        if (DagRunView.Current) {\n            // Apply optional filter parameters\n            if (dagId) { DagRunView.Current.selectedDagId = dagId; }\n            if (startDate) { DagRunView.Current.selectedStartDate = startDate; }\n            if (endDate) { DagRunView.Current.selectedEndDate = endDate; }\n            if (status) { DagRunView.Current.selectedStatus = status; }\n            DagRunView.Current._panel.reveal(vscode.ViewColumn.One);\n            DagRunView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dagRunView\", \"DAG Run History\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            DagRunView.Current = new DagRunView(panel);\n            // Apply optional filter parameters after creation\n            if (dagId) { DagRunView.Current.selectedDagId = dagId; }\n            if (startDate) { DagRunView.Current.selectedStartDate = startDate; }\n            if (endDate) { DagRunView.Current.selectedEndDate = endDate; }\n            if (status) { DagRunView.Current.selectedStatus = status; }\n            // Reload data with new parameters if any were provided\n            if (dagId || startDate || endDate || status) {\n                DagRunView.Current.loadData();\n            }\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('DagRunView.dispose Started');\n        Telemetry.Current.send('DagRunView.dispose.called');\n        DagRunView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DagRunView._getWebviewContent Started');\n        Telemetry.Current.send('DagRunView._getWebviewContent.called');\n\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Filter DAG runs based on selected status\n        let filteredRuns: any[] = [];\n        if (this.dagRunsJson && Array.isArray(this.dagRunsJson)) {\n            filteredRuns = this.dagRunsJson.filter((run: any) => {\n                // Filter by status\n                if (this.selectedStatus && run.state !== this.selectedStatus) {\n                    return false;\n                }\n                return true;\n            });\n        }\n\n        // Build table rows\n        let tableRows = '';\n        filteredRuns.forEach((run: any) => {\n            const dagId = run.dag_id || 'N/A';\n            const status = run.state || 'N/A';\n            const startDate = run.start_date ? ui.toISODateTimeString(new Date(run.start_date)) : 'N/A';\n            const duration = run.start_date && run.end_date ? ui.getDuration(new Date(run.start_date), new Date(run.end_date)) : 'Running';\n            const config = run.conf ? JSON.stringify(run.conf) : '{}';\n            const note = run.note || '';\n            const dagRunId = run.dag_run_id || '';\n\n            tableRows += `\n            <tr class=\"table-row\">\n                <td><a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-link\">${this._escapeHtml(dagId)}</a></td>\n                <td>\n                    <div style=\"display: flex; align-items: center;\">\n                        <div class=\"state-indicator state-${status}\" title=\"${this._escapeHtml(status)}\"></div>\n                        <span>${this._escapeHtml(status)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class=\"action-links\">\n                        <a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-log-link link-button\">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(startDate)}</td>\n                <td><span class=\"duration-badge\">${this._escapeHtml(duration)}</span></td>\n                <td><div class=\"code-block\" style=\"max-height: 50px; overflow: hidden; font-size: 11px;\">${this._escapeHtml(config)}</div></td>\n                <td>${this._escapeHtml(note)}</td>\n            </tr>`;\n        });\n\n        // Build dag_id filter options\n        const dagIdOptions = this.allDagIds.map(id => \n            `<option value=\"${this._escapeHtml(id)}\" ${id === this.selectedDagId ? 'selected' : ''}>${this._escapeHtml(id)}</option>`\n        ).join('');\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            /* Add state-specific colors here if standard style.css doesn't cover them all, \n               but assuming style.css has .state-* classes or DagView style block logic is global enough?\n               Actually DagView styles were inline in the file. I need to include them or rely on style.css.\n               Assuming style.css handles basic colors, but let's add the indicator styles to be safe \n               since they were in DagView's style block. */\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>DAG Run History</title>\n      </head>\n      <body>  \n        <h2>DAG Run History</h2>\n        \n        <div class=\"filters\">\n            <div class=\"filter-group\">\n                <label>DAG ID</label>\n                <select id=\"filter-dag-id\">\n                    ${dagIdOptions}\n                </select>\n            </div>\n            <div class=\"filter-group\">\n                <label>Start Date</label>\n                <input type=\"date\" id=\"filter-start-date\" value=\"${this.selectedStartDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>End Date</label>\n                <input type=\"date\" id=\"filter-end-date\" value=\"${this.selectedEndDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>Status</label>\n                <select id=\"filter-status\">\n                    <option value=\"\">All</option>\n                    <option value=\"success\" ${this.selectedStatus === 'success' ? 'selected' : ''}>Success</option>\n                    <option value=\"failed\" ${this.selectedStatus === 'failed' ? 'selected' : ''}>Failed</option>\n                    <option value=\"running\" ${this.selectedStatus === 'running' ? 'selected' : ''}>Running</option>\n                    <option value=\"queued\" ${this.selectedStatus === 'queued' ? 'selected' : ''}>Queued</option>\n                    <option value=\"upstream_failed\" ${this.selectedStatus === 'upstream_failed' ? 'selected' : ''}>Upstream Failed</option>\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"7\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            document.getElementById('filter-start-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-start-date', startDate: e.target.value });\n            });\n\n            document.getElementById('filter-end-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-end-date', endDate: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'deferred': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DagRunView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DagRunView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('DagRunView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"filter-dag-id\":\n                        this.selectedDagId = message.dagId;\n                        this.loadData();\n                        return;\n                    case \"filter-start-date\":\n                        this.selectedStartDate = message.startDate;\n                        this.loadData();\n                        return;\n                    case \"filter-end-date\":\n                        this.selectedEndDate = message.endDate;\n                        this.loadData();\n                        return;\n                    case \"filter-status\":\n                        this.selectedStatus = message.status;\n                        this.renderHtml();\n                        return;\n                    case \"open-dag-view\":\n                        // Open DagView with specific dag and run\n                        if (!Session.Current.Api) { return; }\n                        if (Session.Current.Api && message.dagId) {\n                            DagView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                    case \"view-dag-log\":\n                        if (message.dagId) {\n                            DagLogView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport * as vscode from \"vscode\";\nimport * as ui from '../common/UI';\nimport { DagView } from '../dag/DagView';\nimport { Session } from '../common/Session';\nimport { DagLogView } from './DagLogView';\nimport { Telemetry } from \"../common/Telemetry\";\n\nexport class DailyDagRunView {\n    public static Current: DailyDagRunView;\n    private readonly _panel: vscode.WebviewPanel;\n    private _disposables: vscode.Disposable[] = [];\n\n    private dagRunsJson: any;\n    \n    // Filters\n    private selectedDate: string = ui.toISODateString(new Date());\n    private selectedStatus: string = '';\n    private selectedDagId: string = '';\n    private allDagIds: string[] = [];\n\n    private constructor(panel: vscode.WebviewPanel) {\n        ui.logToOutput('DailyDagRunView.constructor Started');\n        Telemetry.Current.send('DailyDagRunView.constructor.called');\n        this._panel = panel;\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n        this._setWebviewMessageListener(this._panel.webview);\n        this.loadData();\n        ui.logToOutput('DailyDagRunView.constructor Completed');\n    }\n\n    public async loadData() {\n        ui.logToOutput('DailyDagRunView.loadData Started');\n        Telemetry.Current.send('DailyDagRunView.loadData.called');\n\t\tif (!Session.Current.Api) { return; }\n        // Fetch all DAGs to populate dag_id filter\n        const dagsResult = await Session.Current.Api.getDagList();\n        if (dagsResult.isSuccessful && Array.isArray(dagsResult.result)) {\n            this.allDagIds = dagsResult.result.map((dag: any) => dag.dag_id).sort();\n        }\n\n        // Fetch DAG runs for the selected date\n        // If a specific DAG is selected, query that DAG, otherwise query all\n        if (this.selectedDagId) {\n            const result = await Session.Current.Api.getDagRunHistory(this.selectedDagId, this.selectedDate);\n            if (result.isSuccessful && result.result && result.result.dag_runs) {\n                this.dagRunsJson = result.result.dag_runs;\n            }\n        } else {\n            // Query all DAGs for runs on the selected date\n            const allRuns: any[] = [];\n            for (const dagId of this.allDagIds) {\n                const result = await Session.Current.Api.getDagRunHistory(dagId, this.selectedDate);\n                if (result.isSuccessful && result.result && result.result.dag_runs) {\n                    allRuns.push(...result.result.dag_runs);\n                }\n            }\n            this.dagRunsJson = allRuns;\n        }\n\n        await this.renderHtml();\n    }\n\n    public async renderHtml() {\n        ui.logToOutput('DailyDagRunView.renderHtml Started');\n        Telemetry.Current.send('DailyDagRunView.renderHtml.called');\n        this._panel.webview.html = this._getWebviewContent(this._panel.webview, Session.Current.ExtensionUri!);\n        ui.logToOutput('DailyDagRunView.renderHtml Completed');\n    }\n\n    public static render() {\n        ui.logToOutput('DailyDagRunView.render Started');\n        Telemetry.Current.send('DailyDagRunView.render.called');\n        if (DailyDagRunView.Current) {\n            DailyDagRunView.Current._panel.reveal(vscode.ViewColumn.One);\n            DailyDagRunView.Current.loadData();\n        } else {\n            const panel = vscode.window.createWebviewPanel(\"dailyDagRunView\", \"Daily DAG Runs\", vscode.ViewColumn.One, {\n                enableScripts: true,\n            });\n\n            DailyDagRunView.Current = new DailyDagRunView(panel);\n        }\n    }\n\n    public dispose() {\n        ui.logToOutput('DailyDagRunView.dispose Started');\n        Telemetry.Current.send('DailyDagRunView.dispose.called');\n        DailyDagRunView.Current = undefined;\n\n        this._panel.dispose();\n\n        while (this._disposables.length) {\n            const disposable = this._disposables.pop();\n            if (disposable) {\n                disposable.dispose();\n            }\n        }\n    }\n\n    private _getWebviewContent(webview: vscode.Webview, extensionUri: vscode.Uri) {\n        ui.logToOutput('DailyDagRunView._getWebviewContent Started');\n        Telemetry.Current.send('DailyDagRunView._getWebviewContent.called');\n\n        const styleUri = ui.getUri(webview, extensionUri, [\"media\", \"style.css\"]);\n\n        // Filter DAG runs based on selected filters\n        let filteredRuns: any[] = [];\n        if (this.dagRunsJson && Array.isArray(this.dagRunsJson)) {\n            filteredRuns = this.dagRunsJson.filter((run: any) => {\n                // Filter by status\n                if (this.selectedStatus && run.state !== this.selectedStatus) {\n                    return false;\n                }\n\n                return true;\n            });\n        }\n\n        // Build table rows\n        let tableRows = '';\n        filteredRuns.forEach((run: any) => {\n            const dagId = run.dag_id || 'N/A';\n            const status = run.state || 'N/A';\n            const startDate = run.start_date ? ui.toISODateTimeString(new Date(run.start_date)) : 'N/A';\n            const duration = run.start_date && run.end_date ? ui.getDuration(new Date(run.start_date), new Date(run.end_date)) : 'Running';\n            const config = run.conf ? JSON.stringify(run.conf) : '{}';\n            const note = run.note || '';\n            const dagRunId = run.dag_run_id || '';\n\n            tableRows += `\n            <tr class=\"table-row\">\n                <td><a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-link\">${this._escapeHtml(dagId)}</a></td>\n                <td>\n                    <div style=\"display: flex; align-items: center;\">\n                        <div class=\"state-indicator state-${status}\" title=\"${this._escapeHtml(status)}\"></div>\n                        <span>${this._escapeHtml(status)}</span>\n                    </div>\n                </td>\n                <td>\n                    <div class=\"action-links\">\n                        <a href=\"#\" data-dag-id=\"${this._escapeHtml(dagId)}\" data-dag-run-id=\"${this._escapeHtml(dagRunId)}\" class=\"dag-log-link link-button\">Logs</a>\n                    </div>\n                </td>\n                <td>${this._escapeHtml(startDate)}</td>\n                <td><span class=\"duration-badge\">${this._escapeHtml(duration)}</span></td>\n                <td><div class=\"code-block\" style=\"max-height: 50px; overflow: hidden; font-size: 11px;\">${this._escapeHtml(config)}</div></td>\n                <td>${this._escapeHtml(note)}</td>\n            </tr>`;\n        });\n\n        // Build dag_id filter options\n        const dagIdOptions = this.allDagIds.map(id => `<option value=\"${this._escapeHtml(id)}\">${this._escapeHtml(id)}</option>`).join('');\n\n        const result = /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\">\n        <link rel=\"stylesheet\" href=\"${styleUri}\">\n        <style>\n            :root {\n                --font-size-sm: 12px;\n                --font-size-md: 13px;\n                --font-size-lg: 15px;\n                --border-radius: 4px;\n                --spacing-xs: 4px;\n                --spacing-sm: 8px;\n                --spacing-md: 16px;\n                --spacing-lg: 24px;\n            }\n\n            body {\n                padding: var(--spacing-md);\n                font-family: var(--vscode-font-family);\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n\n            h2 {\n                margin: 0 0 var(--spacing-lg) 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: var(--vscode-editor-foreground);\n                border-bottom: 1px solid var(--vscode-widget-border);\n                padding-bottom: var(--spacing-md);\n            }\n\n            /* Filters */\n            .filters {\n                display: flex;\n                gap: var(--spacing-md);\n                margin-bottom: var(--spacing-lg);\n                flex-wrap: wrap;\n                align-items: flex-end;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                padding: var(--spacing-md);\n                border-radius: var(--border-radius);\n            }\n            .filter-group {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n            .filter-group label {\n                font-size: 11px;\n                font-weight: 600;\n                text-transform: uppercase;\n                color: var(--vscode-descriptionForeground);\n            }\n            .filter-group select,\n            .filter-group input {\n                padding: 6px 8px;\n                border: 1px solid var(--vscode-input-border);\n                background-color: var(--vscode-input-background);\n                color: var(--vscode-input-foreground);\n                border-radius: 4px;\n                font-size: 13px;\n                min-width: 150px;\n            }\n\n            /* Tables */\n            table {\n                width: 100%;\n                border-collapse: separate;\n                border-spacing: 0;\n                margin-bottom: var(--spacing-lg);\n                font-size: var(--font-size-md);\n            }\n\n            th, td {\n                padding: 5px 8px;\n                text-align: left;\n                border-bottom: 1px solid var(--vscode-widget-border);\n            }\n\n            th {\n                font-weight: 600;\n                color: var(--vscode-descriptionForeground);\n                text-transform: uppercase;\n                font-size: 11px;\n                letter-spacing: 0.5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                position: sticky;\n                top: 0;\n            }\n\n            tr:last-child td {\n                border-bottom: none;\n            }\n\n            .table-row:hover td {\n                background-color: var(--vscode-list-hoverBackground);\n            }\n\n            /* States */\n            .state-indicator {\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin-right: 8px;\n                display: inline-block;\n            }\n            \n            .state-success { background-color: var(--vscode-testing-iconPassed); }\n            .state-failed { background-color: var(--vscode-errorForeground); }\n            .state-running { background-color: var(--vscode-charts-blue); }\n            .state-queued { background-color: var(--vscode-charts-yellow); }\n            .state-upstream_failed { background-color: var(--vscode-charts-orange); }\n            .state-skipped { background-color: var(--vscode-disabledForeground); }\n            .state-deferred { background-color: var(--vscode-charts-purple); }\n\n            a {\n                color: var(--vscode-textLink-foreground);\n                text-decoration: none;\n                cursor: pointer;\n            }\n            a:hover {\n                text-decoration: underline;\n                color: var(--vscode-textLink-activeForeground);\n            }\n\n            .duration-badge {\n                font-family: 'Courier New', monospace;\n                font-size: 12px;\n                opacity: 0.8;\n            }\n\n            .code-block {\n                font-family: var(--vscode-editor-font-family);\n                background-color: var(--vscode-textBlockQuote-background);\n                padding: 4px;\n                border-radius: 4px;\n            }\n        </style>\n        <title>Daily DAG Runs</title>\n      </head>\n      <body>  \n        <h2>Daily DAG Runs</h2>\n        \n        <div class=\"filters\">\n            <div class=\"filter-group\">\n                <label>Date</label>\n                <input type=\"date\" id=\"filter-date\" value=\"${this.selectedDate}\">\n            </div>\n            <div class=\"filter-group\">\n                <label>Status</label>\n                <select id=\"filter-status\">\n                    <option value=\"\">All</option>\n                    <option value=\"success\">Success</option>\n                    <option value=\"failed\">Failed</option>\n                    <option value=\"running\">Running</option>\n                    <option value=\"queued\">Queued</option>\n                    <option value=\"upstream_failed\">Upstream Failed</option>\n                </select>\n            </div>\n            <div class=\"filter-group\">\n                <label>DAG ID</label>\n                <select id=\"filter-dag-id\">\n                    <option value=\"\">All DAGs</option>\n                    ${dagIdOptions}\n                </select>\n            </div>\n        </div>\n        \n        <table>\n            <thead>\n                <tr>\n                    <th>DAG ID</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                    <th>Start Date</th>\n                    <th>Duration</th>\n                    <th>Config</th>\n                    <th>Note</th>\n                </tr>\n            </thead>\n            <tbody>\n            ${tableRows || '<tr><td colspan=\"7\" style=\"text-align:center; padding: 20px; opacity: 0.7;\">No runs found for the selected filters</td></tr>'}        \n            </tbody>\n        </table>\n\n        <script>\n            const vscode = acquireVsCodeApi();\n\n            document.getElementById('filter-date').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-date', date: e.target.value });\n            });\n\n            document.getElementById('filter-status').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-status', status: e.target.value });\n            });\n\n            document.getElementById('filter-dag-id').addEventListener('change', (e) => {\n                vscode.postMessage({ command: 'filter-dag-id', dagId: e.target.value });\n            });\n\n            // Handle dag-link clicks\n            document.querySelectorAll('.dag-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    // Handle clicks on child elements\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'open-dag-view', dagId, dagRunId });\n                });\n            });\n\n            // Handle dag-log-link clicks\n            document.querySelectorAll('.dag-log-link').forEach(link => {\n                link.addEventListener('click', (e) => {\n                    e.preventDefault();\n                    const target = e.target.closest('a') || e.target;\n                    const dagId = target.getAttribute('data-dag-id');\n                    const dagRunId = target.getAttribute('data-dag-run-id');\n                    vscode.postMessage({ command: 'view-dag-log', dagId, dagRunId });\n                });\n            });\n        </script>\n      </body>\n    </html>\n    `;\n\n        return result;\n    }\n\n    private _escapeHtml(text: string): string {\n        const map: { [key: string]: string } = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#039;'\n        };\n        return String(text).replace(/[&<>\"']/g, m => map[m]);\n    }\n\n    private _getStatusEmoji(status: string): string {\n        const statusMap: { [key: string]: string } = {\n            'success': '',\n            'failed': '',\n            'running': '',\n            'queued': '',\n            'upstream_failed': '',\n            'skipped': '',\n            'deferred': ''\n        };\n        return statusMap[status.toLowerCase()] || '';\n    }\n\n    private _setWebviewMessageListener(webview: vscode.Webview) {\n        ui.logToOutput('DailyDagRunView._setWebviewMessageListener Started');\n        Telemetry.Current.send('DailyDagRunView._setWebviewMessageListener.called');\n        webview.onDidReceiveMessage(\n            (message: any) => {\n                ui.logToOutput('DailyDagRunView._setWebviewMessageListener Message Received ' + message.command);\n                switch (message.command) {\n                    case \"filter-date\":\n                        this.selectedDate = message.date;\n                        this.loadData();\n                        return;\n                    case \"filter-status\":\n                        this.selectedStatus = message.status;\n                        this.renderHtml();\n                        return;\n                    case \"filter-dag-id\":\n                        this.selectedDagId = message.dagId;\n                        this.loadData();\n                        return;\n                    case \"open-dag-view\":\n                        // Open DagView with specific dag and run\n                        if (Session.Current.Api && message.dagId) {\n                            DagView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                    case \"view-dag-log\":\n                        if (message.dagId) {\n                            DagLogView.render(message.dagId, message.dagRunId);\n                        }\n                        return;\n                }\n            },\n            undefined,\n            this._disposables\n        );\n    }\n}\n","import * as vscode from 'vscode';\n\nexport class ReportTreeItem extends vscode.TreeItem {\n  constructor(\n    public readonly label: string,\n    public readonly collapsibleState: vscode.TreeItemCollapsibleState,\n    public readonly command?: vscode.Command,\n    public readonly iconPath?: vscode.ThemeIcon\n  ) {\n    super(label, collapsibleState);\n    this.command = command;\n    this.iconPath = iconPath;\n  }\n}\n","import * as vscode from 'vscode';\nimport { ReportTreeItem } from './ReportTreeItem';\nimport { Telemetry } from '../common/Telemetry';\n\nexport class ReportTreeView implements vscode.TreeDataProvider<ReportTreeItem> {\n  private _onDidChangeTreeData: vscode.EventEmitter<ReportTreeItem | undefined | null | void> = new vscode.EventEmitter<ReportTreeItem | undefined | null | void>();\n  readonly onDidChangeTreeData: vscode.Event<ReportTreeItem | undefined | null | void> = this._onDidChangeTreeData.event;\n\n  constructor() {\n    Telemetry.Current.send('ReportTreeView.constructor.called');\n  }\n\n  refresh(): void {\n    Telemetry.Current.send('ReportTreeView.refresh.called');\n    this._onDidChangeTreeData.fire();\n  }\n\n  getTreeItem(element: ReportTreeItem): vscode.TreeItem {\n    return element;\n  }\n\n  getChildren(element?: ReportTreeItem): Thenable<ReportTreeItem[]> {\n    if (!element) {\n      // Root level - return the report nodes\n      return Promise.resolve([\n        new ReportTreeItem(\n          'Daily DAG Runs',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewDagRuns',\n            title: 'View Daily DAG Runs',\n            arguments: []\n          },\n          new vscode.ThemeIcon('list-selection')\n        ),\n        new ReportTreeItem(\n          'DAG Run History',\n          vscode.TreeItemCollapsibleState.None,\n          {\n            command: 'dagTreeView.viewDagRunHistory',\n            title: 'View DAG Run History',\n            arguments: []\n          },\n          new vscode.ThemeIcon('history')\n        )\n      ]);\n    }\n    return Promise.resolve([]);\n  }\n}\n","/**\n * web-streams-polyfill v3.2.1\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.WebStreamsPolyfill = {}));\n}(this, (function (exports) { 'use strict';\n\n    /// <reference lib=\"es2015.symbol\" />\n    const SymbolPolyfill = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ?\n        Symbol :\n        description => `Symbol(${description})`;\n\n    /// <reference lib=\"dom\" />\n    function noop() {\n        return undefined;\n    }\n    function getGlobals() {\n        if (typeof self !== 'undefined') {\n            return self;\n        }\n        else if (typeof window !== 'undefined') {\n            return window;\n        }\n        else if (typeof global !== 'undefined') {\n            return global;\n        }\n        return undefined;\n    }\n    const globals = getGlobals();\n\n    function typeIsObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    const rethrowAssertionErrorRejection = noop;\n\n    const originalPromise = Promise;\n    const originalPromiseThen = Promise.prototype.then;\n    const originalPromiseResolve = Promise.resolve.bind(originalPromise);\n    const originalPromiseReject = Promise.reject.bind(originalPromise);\n    function newPromise(executor) {\n        return new originalPromise(executor);\n    }\n    function promiseResolvedWith(value) {\n        return originalPromiseResolve(value);\n    }\n    function promiseRejectedWith(reason) {\n        return originalPromiseReject(reason);\n    }\n    function PerformPromiseThen(promise, onFulfilled, onRejected) {\n        // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n        // approximation.\n        return originalPromiseThen.call(promise, onFulfilled, onRejected);\n    }\n    function uponPromise(promise, onFulfilled, onRejected) {\n        PerformPromiseThen(PerformPromiseThen(promise, onFulfilled, onRejected), undefined, rethrowAssertionErrorRejection);\n    }\n    function uponFulfillment(promise, onFulfilled) {\n        uponPromise(promise, onFulfilled);\n    }\n    function uponRejection(promise, onRejected) {\n        uponPromise(promise, undefined, onRejected);\n    }\n    function transformPromiseWith(promise, fulfillmentHandler, rejectionHandler) {\n        return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n    }\n    function setPromiseIsHandledToTrue(promise) {\n        PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n    }\n    const queueMicrotask = (() => {\n        const globalQueueMicrotask = globals && globals.queueMicrotask;\n        if (typeof globalQueueMicrotask === 'function') {\n            return globalQueueMicrotask;\n        }\n        const resolvedPromise = promiseResolvedWith(undefined);\n        return (fn) => PerformPromiseThen(resolvedPromise, fn);\n    })();\n    function reflectCall(F, V, args) {\n        if (typeof F !== 'function') {\n            throw new TypeError('Argument is not a function');\n        }\n        return Function.prototype.apply.call(F, V, args);\n    }\n    function promiseCall(F, V, args) {\n        try {\n            return promiseResolvedWith(reflectCall(F, V, args));\n        }\n        catch (value) {\n            return promiseRejectedWith(value);\n        }\n    }\n\n    // Original from Chromium\n    // https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n    const QUEUE_MAX_ARRAY_SIZE = 16384;\n    /**\n     * Simple queue structure.\n     *\n     * Avoids scalability issues with using a packed array directly by using\n     * multiple arrays in a linked list and keeping the array size bounded.\n     */\n    class SimpleQueue {\n        constructor() {\n            this._cursor = 0;\n            this._size = 0;\n            // _front and _back are always defined.\n            this._front = {\n                _elements: [],\n                _next: undefined\n            };\n            this._back = this._front;\n            // The cursor is used to avoid calling Array.shift().\n            // It contains the index of the front element of the array inside the\n            // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n            this._cursor = 0;\n            // When there is only one node, size === elements.length - cursor.\n            this._size = 0;\n        }\n        get length() {\n            return this._size;\n        }\n        // For exception safety, this method is structured in order:\n        // 1. Read state\n        // 2. Calculate required state mutations\n        // 3. Perform state mutations\n        push(element) {\n            const oldBack = this._back;\n            let newBack = oldBack;\n            if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n                newBack = {\n                    _elements: [],\n                    _next: undefined\n                };\n            }\n            // push() is the mutation most likely to throw an exception, so it\n            // goes first.\n            oldBack._elements.push(element);\n            if (newBack !== oldBack) {\n                this._back = newBack;\n                oldBack._next = newBack;\n            }\n            ++this._size;\n        }\n        // Like push(), shift() follows the read -> calculate -> mutate pattern for\n        // exception safety.\n        shift() { // must not be called on an empty queue\n            const oldFront = this._front;\n            let newFront = oldFront;\n            const oldCursor = this._cursor;\n            let newCursor = oldCursor + 1;\n            const elements = oldFront._elements;\n            const element = elements[oldCursor];\n            if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n                newFront = oldFront._next;\n                newCursor = 0;\n            }\n            // No mutations before this point.\n            --this._size;\n            this._cursor = newCursor;\n            if (oldFront !== newFront) {\n                this._front = newFront;\n            }\n            // Permit shifted element to be garbage collected.\n            elements[oldCursor] = undefined;\n            return element;\n        }\n        // The tricky thing about forEach() is that it can be called\n        // re-entrantly. The queue may be mutated inside the callback. It is easy to\n        // see that push() within the callback has no negative effects since the end\n        // of the queue is checked for on every iteration. If shift() is called\n        // repeatedly within the callback then the next iteration may return an\n        // element that has been removed. In this case the callback will be called\n        // with undefined values until we either \"catch up\" with elements that still\n        // exist or reach the back of the queue.\n        forEach(callback) {\n            let i = this._cursor;\n            let node = this._front;\n            let elements = node._elements;\n            while (i !== elements.length || node._next !== undefined) {\n                if (i === elements.length) {\n                    node = node._next;\n                    elements = node._elements;\n                    i = 0;\n                    if (elements.length === 0) {\n                        break;\n                    }\n                }\n                callback(elements[i]);\n                ++i;\n            }\n        }\n        // Return the element that would be returned if shift() was called now,\n        // without modifying the queue.\n        peek() { // must not be called on an empty queue\n            const front = this._front;\n            const cursor = this._cursor;\n            return front._elements[cursor];\n        }\n    }\n\n    function ReadableStreamReaderGenericInitialize(reader, stream) {\n        reader._ownerReadableStream = stream;\n        stream._reader = reader;\n        if (stream._state === 'readable') {\n            defaultReaderClosedPromiseInitialize(reader);\n        }\n        else if (stream._state === 'closed') {\n            defaultReaderClosedPromiseInitializeAsResolved(reader);\n        }\n        else {\n            defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n        }\n    }\n    // A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n    // check.\n    function ReadableStreamReaderGenericCancel(reader, reason) {\n        const stream = reader._ownerReadableStream;\n        return ReadableStreamCancel(stream, reason);\n    }\n    function ReadableStreamReaderGenericRelease(reader) {\n        if (reader._ownerReadableStream._state === 'readable') {\n            defaultReaderClosedPromiseReject(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        else {\n            defaultReaderClosedPromiseResetToRejected(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        reader._ownerReadableStream._reader = undefined;\n        reader._ownerReadableStream = undefined;\n    }\n    // Helper functions for the readers.\n    function readerLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released reader');\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderClosedPromiseInitialize(reader) {\n        reader._closedPromise = newPromise((resolve, reject) => {\n            reader._closedPromise_resolve = resolve;\n            reader._closedPromise_reject = reject;\n        });\n    }\n    function defaultReaderClosedPromiseInitializeAsRejected(reader, reason) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseReject(reader, reason);\n    }\n    function defaultReaderClosedPromiseInitializeAsResolved(reader) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseResolve(reader);\n    }\n    function defaultReaderClosedPromiseReject(reader, reason) {\n        if (reader._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(reader._closedPromise);\n        reader._closedPromise_reject(reason);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n    function defaultReaderClosedPromiseResetToRejected(reader, reason) {\n        defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n    }\n    function defaultReaderClosedPromiseResolve(reader) {\n        if (reader._closedPromise_resolve === undefined) {\n            return;\n        }\n        reader._closedPromise_resolve(undefined);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n\n    const AbortSteps = SymbolPolyfill('[[AbortSteps]]');\n    const ErrorSteps = SymbolPolyfill('[[ErrorSteps]]');\n    const CancelSteps = SymbolPolyfill('[[CancelSteps]]');\n    const PullSteps = SymbolPolyfill('[[PullSteps]]');\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\n    const NumberIsFinite = Number.isFinite || function (x) {\n        return typeof x === 'number' && isFinite(x);\n    };\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\n    const MathTrunc = Math.trunc || function (v) {\n        return v < 0 ? Math.ceil(v) : Math.floor(v);\n    };\n\n    // https://heycam.github.io/webidl/#idl-dictionaries\n    function isDictionary(x) {\n        return typeof x === 'object' || typeof x === 'function';\n    }\n    function assertDictionary(obj, context) {\n        if (obj !== undefined && !isDictionary(obj)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-callback-functions\n    function assertFunction(x, context) {\n        if (typeof x !== 'function') {\n            throw new TypeError(`${context} is not a function.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-object\n    function isObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    function assertObject(x, context) {\n        if (!isObject(x)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    function assertRequiredArgument(x, position, context) {\n        if (x === undefined) {\n            throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n        }\n    }\n    function assertRequiredField(x, field, context) {\n        if (x === undefined) {\n            throw new TypeError(`${field} is required in '${context}'.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-unrestricted-double\n    function convertUnrestrictedDouble(value) {\n        return Number(value);\n    }\n    function censorNegativeZero(x) {\n        return x === 0 ? 0 : x;\n    }\n    function integerPart(x) {\n        return censorNegativeZero(MathTrunc(x));\n    }\n    // https://heycam.github.io/webidl/#idl-unsigned-long-long\n    function convertUnsignedLongLongWithEnforceRange(value, context) {\n        const lowerBound = 0;\n        const upperBound = Number.MAX_SAFE_INTEGER;\n        let x = Number(value);\n        x = censorNegativeZero(x);\n        if (!NumberIsFinite(x)) {\n            throw new TypeError(`${context} is not a finite number`);\n        }\n        x = integerPart(x);\n        if (x < lowerBound || x > upperBound) {\n            throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n        }\n        if (!NumberIsFinite(x) || x === 0) {\n            return 0;\n        }\n        // TODO Use BigInt if supported?\n        // let xBigInt = BigInt(integerPart(x));\n        // xBigInt = BigInt.asUintN(64, xBigInt);\n        // return Number(xBigInt);\n        return x;\n    }\n\n    function assertReadableStream(x, context) {\n        if (!IsReadableStream(x)) {\n            throw new TypeError(`${context} is not a ReadableStream.`);\n        }\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamDefaultReader(stream) {\n        return new ReadableStreamDefaultReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadRequest(stream, readRequest) {\n        stream._reader._readRequests.push(readRequest);\n    }\n    function ReadableStreamFulfillReadRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readRequest = reader._readRequests.shift();\n        if (done) {\n            readRequest._closeSteps();\n        }\n        else {\n            readRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadRequests(stream) {\n        return stream._reader._readRequests.length;\n    }\n    function ReadableStreamHasDefaultReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamDefaultReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A default reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed,\n         * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamDefaultReaderRead(this, readRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                throw defaultReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamDefaultReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultReader;\n    }\n    function ReadableStreamDefaultReaderRead(reader, readRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            readRequest._closeSteps();\n        }\n        else if (stream._state === 'errored') {\n            readRequest._errorSteps(stream._storedError);\n        }\n        else {\n            stream._readableStreamController[PullSteps](readRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n    }\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    /* eslint-disable @typescript-eslint/no-empty-function */\n    const AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () { }).prototype);\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    class ReadableStreamAsyncIteratorImpl {\n        constructor(reader, preventCancel) {\n            this._ongoingPromise = undefined;\n            this._isFinished = false;\n            this._reader = reader;\n            this._preventCancel = preventCancel;\n        }\n        next() {\n            const nextSteps = () => this._nextSteps();\n            this._ongoingPromise = this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n                nextSteps();\n            return this._ongoingPromise;\n        }\n        return(value) {\n            const returnSteps = () => this._returnSteps(value);\n            return this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n                returnSteps();\n        }\n        _nextSteps() {\n            if (this._isFinished) {\n                return Promise.resolve({ value: undefined, done: true });\n            }\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('iterate'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    this._ongoingPromise = undefined;\n                    // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n                    // FIXME Is this a bug in the specification, or in the test?\n                    queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n                },\n                _closeSteps: () => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    resolvePromise({ value: undefined, done: true });\n                },\n                _errorSteps: reason => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    rejectPromise(reason);\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promise;\n        }\n        _returnSteps(value) {\n            if (this._isFinished) {\n                return Promise.resolve({ value, done: true });\n            }\n            this._isFinished = true;\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('finish iterating'));\n            }\n            if (!this._preventCancel) {\n                const result = ReadableStreamReaderGenericCancel(reader, value);\n                ReadableStreamReaderGenericRelease(reader);\n                return transformPromiseWith(result, () => ({ value, done: true }));\n            }\n            ReadableStreamReaderGenericRelease(reader);\n            return promiseResolvedWith({ value, done: true });\n        }\n    }\n    const ReadableStreamAsyncIteratorPrototype = {\n        next() {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n            }\n            return this._asyncIteratorImpl.next();\n        },\n        return(value) {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n            }\n            return this._asyncIteratorImpl.return(value);\n        }\n    };\n    if (AsyncIteratorPrototype !== undefined) {\n        Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n    }\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamAsyncIterator(stream, preventCancel) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n        const iterator = Object.create(ReadableStreamAsyncIteratorPrototype);\n        iterator._asyncIteratorImpl = impl;\n        return iterator;\n    }\n    function IsReadableStreamAsyncIterator(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n            return false;\n        }\n        try {\n            // noinspection SuspiciousTypeOfGuard\n            return x._asyncIteratorImpl instanceof\n                ReadableStreamAsyncIteratorImpl;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamAsyncIteratorBrandCheckException(name) {\n        return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n    }\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\n    const NumberIsNaN = Number.isNaN || function (x) {\n        // eslint-disable-next-line no-self-compare\n        return x !== x;\n    };\n\n    function CreateArrayFromList(elements) {\n        // We use arrays to represent lists, so this is basically a no-op.\n        // Do a slice though just in case we happen to depend on the unique-ness.\n        return elements.slice();\n    }\n    function CopyDataBlockBytes(dest, destOffset, src, srcOffset, n) {\n        new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n    }\n    // Not implemented correctly\n    function TransferArrayBuffer(O) {\n        return O;\n    }\n    // Not implemented correctly\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    function IsDetachedBuffer(O) {\n        return false;\n    }\n    function ArrayBufferSlice(buffer, begin, end) {\n        // ArrayBuffer.prototype.slice is not available on IE10\n        // https://www.caniuse.com/mdn-javascript_builtins_arraybuffer_slice\n        if (buffer.slice) {\n            return buffer.slice(begin, end);\n        }\n        const length = end - begin;\n        const slice = new ArrayBuffer(length);\n        CopyDataBlockBytes(slice, 0, buffer, begin, length);\n        return slice;\n    }\n\n    function IsNonNegativeNumber(v) {\n        if (typeof v !== 'number') {\n            return false;\n        }\n        if (NumberIsNaN(v)) {\n            return false;\n        }\n        if (v < 0) {\n            return false;\n        }\n        return true;\n    }\n    function CloneAsUint8Array(O) {\n        const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);\n        return new Uint8Array(buffer);\n    }\n\n    function DequeueValue(container) {\n        const pair = container._queue.shift();\n        container._queueTotalSize -= pair.size;\n        if (container._queueTotalSize < 0) {\n            container._queueTotalSize = 0;\n        }\n        return pair.value;\n    }\n    function EnqueueValueWithSize(container, value, size) {\n        if (!IsNonNegativeNumber(size) || size === Infinity) {\n            throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n        }\n        container._queue.push({ value, size });\n        container._queueTotalSize += size;\n    }\n    function PeekQueueValue(container) {\n        const pair = container._queue.peek();\n        return pair.value;\n    }\n    function ResetQueue(container) {\n        container._queue = new SimpleQueue();\n        container._queueTotalSize = 0;\n    }\n\n    /**\n     * A pull-into request in a {@link ReadableByteStreamController}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBRequest {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n         */\n        get view() {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('view');\n            }\n            return this._view;\n        }\n        respond(bytesWritten) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respond');\n            }\n            assertRequiredArgument(bytesWritten, 1, 'respond');\n            bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(this._view.buffer)) ;\n            ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n        }\n        respondWithNewView(view) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respondWithNewView');\n            }\n            assertRequiredArgument(view, 1, 'respondWithNewView');\n            if (!ArrayBuffer.isView(view)) {\n                throw new TypeError('You can only respond with array buffer views');\n            }\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBRequest.prototype, {\n        respond: { enumerable: true },\n        respondWithNewView: { enumerable: true },\n        view: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBRequest.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBRequest',\n            configurable: true\n        });\n    }\n    /**\n     * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableByteStreamController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the current BYOB pull request, or `null` if there isn't one.\n         */\n        get byobRequest() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('byobRequest');\n            }\n            return ReadableByteStreamControllerGetBYOBRequest(this);\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('desiredSize');\n            }\n            return ReadableByteStreamControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('close');\n            }\n            if (this._closeRequested) {\n                throw new TypeError('The stream has already been closed; do not close it again!');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n            }\n            ReadableByteStreamControllerClose(this);\n        }\n        enqueue(chunk) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('enqueue');\n            }\n            assertRequiredArgument(chunk, 1, 'enqueue');\n            if (!ArrayBuffer.isView(chunk)) {\n                throw new TypeError('chunk must be an array buffer view');\n            }\n            if (chunk.byteLength === 0) {\n                throw new TypeError('chunk must have non-zero byteLength');\n            }\n            if (chunk.buffer.byteLength === 0) {\n                throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n            }\n            if (this._closeRequested) {\n                throw new TypeError('stream is closed or draining');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n            }\n            ReadableByteStreamControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('error');\n            }\n            ReadableByteStreamControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ReadableByteStreamControllerClearPendingPullIntos(this);\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableByteStreamControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableByteStream;\n            if (this._queueTotalSize > 0) {\n                const entry = this._queue.shift();\n                this._queueTotalSize -= entry.byteLength;\n                ReadableByteStreamControllerHandleQueueDrain(this);\n                const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n                readRequest._chunkSteps(view);\n                return;\n            }\n            const autoAllocateChunkSize = this._autoAllocateChunkSize;\n            if (autoAllocateChunkSize !== undefined) {\n                let buffer;\n                try {\n                    buffer = new ArrayBuffer(autoAllocateChunkSize);\n                }\n                catch (bufferE) {\n                    readRequest._errorSteps(bufferE);\n                    return;\n                }\n                const pullIntoDescriptor = {\n                    buffer,\n                    bufferByteLength: autoAllocateChunkSize,\n                    byteOffset: 0,\n                    byteLength: autoAllocateChunkSize,\n                    bytesFilled: 0,\n                    elementSize: 1,\n                    viewConstructor: Uint8Array,\n                    readerType: 'default'\n                };\n                this._pendingPullIntos.push(pullIntoDescriptor);\n            }\n            ReadableStreamAddReadRequest(stream, readRequest);\n            ReadableByteStreamControllerCallPullIfNeeded(this);\n        }\n    }\n    Object.defineProperties(ReadableByteStreamController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        byobRequest: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableByteStreamController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableByteStreamController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableByteStreamController.\n    function IsReadableByteStreamController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n            return false;\n        }\n        return x instanceof ReadableByteStreamController;\n    }\n    function IsReadableStreamBYOBRequest(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBRequest;\n    }\n    function ReadableByteStreamControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        // TODO: Test controller argument\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableByteStreamControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableByteStreamControllerError(controller, e);\n        });\n    }\n    function ReadableByteStreamControllerClearPendingPullIntos(controller) {\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        controller._pendingPullIntos = new SimpleQueue();\n    }\n    function ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor) {\n        let done = false;\n        if (stream._state === 'closed') {\n            done = true;\n        }\n        const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n        if (pullIntoDescriptor.readerType === 'default') {\n            ReadableStreamFulfillReadRequest(stream, filledView, done);\n        }\n        else {\n            ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n        }\n    }\n    function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor) {\n        const bytesFilled = pullIntoDescriptor.bytesFilled;\n        const elementSize = pullIntoDescriptor.elementSize;\n        return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize);\n    }\n    function ReadableByteStreamControllerEnqueueChunkToQueue(controller, buffer, byteOffset, byteLength) {\n        controller._queue.push({ buffer, byteOffset, byteLength });\n        controller._queueTotalSize += byteLength;\n    }\n    function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor) {\n        const elementSize = pullIntoDescriptor.elementSize;\n        const currentAlignedBytes = pullIntoDescriptor.bytesFilled - pullIntoDescriptor.bytesFilled % elementSize;\n        const maxBytesToCopy = Math.min(controller._queueTotalSize, pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n        const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n        const maxAlignedBytes = maxBytesFilled - maxBytesFilled % elementSize;\n        let totalBytesToCopyRemaining = maxBytesToCopy;\n        let ready = false;\n        if (maxAlignedBytes > currentAlignedBytes) {\n            totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n            ready = true;\n        }\n        const queue = controller._queue;\n        while (totalBytesToCopyRemaining > 0) {\n            const headOfQueue = queue.peek();\n            const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n            const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n            if (headOfQueue.byteLength === bytesToCopy) {\n                queue.shift();\n            }\n            else {\n                headOfQueue.byteOffset += bytesToCopy;\n                headOfQueue.byteLength -= bytesToCopy;\n            }\n            controller._queueTotalSize -= bytesToCopy;\n            ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n            totalBytesToCopyRemaining -= bytesToCopy;\n        }\n        return ready;\n    }\n    function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, size, pullIntoDescriptor) {\n        pullIntoDescriptor.bytesFilled += size;\n    }\n    function ReadableByteStreamControllerHandleQueueDrain(controller) {\n        if (controller._queueTotalSize === 0 && controller._closeRequested) {\n            ReadableByteStreamControllerClearAlgorithms(controller);\n            ReadableStreamClose(controller._controlledReadableByteStream);\n        }\n        else {\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }\n    }\n    function ReadableByteStreamControllerInvalidateBYOBRequest(controller) {\n        if (controller._byobRequest === null) {\n            return;\n        }\n        controller._byobRequest._associatedReadableByteStreamController = undefined;\n        controller._byobRequest._view = null;\n        controller._byobRequest = null;\n    }\n    function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller) {\n        while (controller._pendingPullIntos.length > 0) {\n            if (controller._queueTotalSize === 0) {\n                return;\n            }\n            const pullIntoDescriptor = controller._pendingPullIntos.peek();\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerPullInto(controller, view, readIntoRequest) {\n        const stream = controller._controlledReadableByteStream;\n        let elementSize = 1;\n        if (view.constructor !== DataView) {\n            elementSize = view.constructor.BYTES_PER_ELEMENT;\n        }\n        const ctor = view.constructor;\n        // try {\n        const buffer = TransferArrayBuffer(view.buffer);\n        // } catch (e) {\n        //   readIntoRequest._errorSteps(e);\n        //   return;\n        // }\n        const pullIntoDescriptor = {\n            buffer,\n            bufferByteLength: buffer.byteLength,\n            byteOffset: view.byteOffset,\n            byteLength: view.byteLength,\n            bytesFilled: 0,\n            elementSize,\n            viewConstructor: ctor,\n            readerType: 'byob'\n        };\n        if (controller._pendingPullIntos.length > 0) {\n            controller._pendingPullIntos.push(pullIntoDescriptor);\n            // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n            // - No change happens on desiredSize\n            // - The source has already been notified of that there's at least 1 pending read(view)\n            ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n            return;\n        }\n        if (stream._state === 'closed') {\n            const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n            readIntoRequest._closeSteps(emptyView);\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n                ReadableByteStreamControllerHandleQueueDrain(controller);\n                readIntoRequest._chunkSteps(filledView);\n                return;\n            }\n            if (controller._closeRequested) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                readIntoRequest._errorSteps(e);\n                return;\n            }\n        }\n        controller._pendingPullIntos.push(pullIntoDescriptor);\n        ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor) {\n        const stream = controller._controlledReadableByteStream;\n        if (ReadableStreamHasBYOBReader(stream)) {\n            while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n                const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, pullIntoDescriptor) {\n        ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n        if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.elementSize) {\n            return;\n        }\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n        const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n        if (remainderSize > 0) {\n            const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            const remainder = ArrayBufferSlice(pullIntoDescriptor.buffer, end - remainderSize, end);\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, remainder, 0, remainder.byteLength);\n        }\n        pullIntoDescriptor.bytesFilled -= remainderSize;\n        ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n        ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n    }\n    function ReadableByteStreamControllerRespondInternal(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            ReadableByteStreamControllerRespondInClosedState(controller);\n        }\n        else {\n            ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerShiftPendingPullInto(controller) {\n        const descriptor = controller._pendingPullIntos.shift();\n        return descriptor;\n    }\n    function ReadableByteStreamControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return false;\n        }\n        if (controller._closeRequested) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableByteStreamControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n    }\n    // A client of ReadableByteStreamController may use these functions directly to bypass state check.\n    function ReadableByteStreamControllerClose(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            controller._closeRequested = true;\n            return;\n        }\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (firstPendingPullInto.bytesFilled > 0) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                throw e;\n            }\n        }\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamClose(stream);\n    }\n    function ReadableByteStreamControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        const buffer = chunk.buffer;\n        const byteOffset = chunk.byteOffset;\n        const byteLength = chunk.byteLength;\n        const transferredBuffer = TransferArrayBuffer(buffer);\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (IsDetachedBuffer(firstPendingPullInto.buffer)) ;\n            firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);\n        }\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        if (ReadableStreamHasDefaultReader(stream)) {\n            if (ReadableStreamGetNumReadRequests(stream) === 0) {\n                ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            }\n            else {\n                if (controller._pendingPullIntos.length > 0) {\n                    ReadableByteStreamControllerShiftPendingPullInto(controller);\n                }\n                const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n                ReadableStreamFulfillReadRequest(stream, transferredView, false);\n            }\n        }\n        else if (ReadableStreamHasBYOBReader(stream)) {\n            // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n        }\n        else {\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerError(controller, e) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ReadableByteStreamControllerClearPendingPullIntos(controller);\n        ResetQueue(controller);\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableByteStreamControllerGetBYOBRequest(controller) {\n        if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {\n            const firstDescriptor = controller._pendingPullIntos.peek();\n            const view = new Uint8Array(firstDescriptor.buffer, firstDescriptor.byteOffset + firstDescriptor.bytesFilled, firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n            const byobRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n            SetUpReadableStreamBYOBRequest(byobRequest, controller, view);\n            controller._byobRequest = byobRequest;\n        }\n        return controller._byobRequest;\n    }\n    function ReadableByteStreamControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function ReadableByteStreamControllerRespond(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (bytesWritten !== 0) {\n                throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n            }\n        }\n        else {\n            if (bytesWritten === 0) {\n                throw new TypeError('bytesWritten must be greater than 0 when calling respond() on a readable stream');\n            }\n            if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {\n                throw new RangeError('bytesWritten out of range');\n            }\n        }\n        firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n    }\n    function ReadableByteStreamControllerRespondWithNewView(controller, view) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (view.byteLength !== 0) {\n                throw new TypeError('The view\\'s length must be 0 when calling respondWithNewView() on a closed stream');\n            }\n        }\n        else {\n            if (view.byteLength === 0) {\n                throw new TypeError('The view\\'s length must be greater than 0 when calling respondWithNewView() on a readable stream');\n            }\n        }\n        if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n            throw new RangeError('The region specified by view does not match byobRequest');\n        }\n        if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {\n            throw new RangeError('The buffer of view has different capacity than byobRequest');\n        }\n        if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {\n            throw new RangeError('The region specified by view is larger than byobRequest');\n        }\n        const viewByteLength = view.byteLength;\n        firstDescriptor.buffer = TransferArrayBuffer(view.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, viewByteLength);\n    }\n    function SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize) {\n        controller._controlledReadableByteStream = stream;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._byobRequest = null;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._closeRequested = false;\n        controller._started = false;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        controller._autoAllocateChunkSize = autoAllocateChunkSize;\n        controller._pendingPullIntos = new SimpleQueue();\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableByteStreamControllerError(controller, r);\n        });\n    }\n    function SetUpReadableByteStreamControllerFromUnderlyingSource(stream, underlyingByteSource, highWaterMark) {\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingByteSource.start !== undefined) {\n            startAlgorithm = () => underlyingByteSource.start(controller);\n        }\n        if (underlyingByteSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingByteSource.pull(controller);\n        }\n        if (underlyingByteSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingByteSource.cancel(reason);\n        }\n        const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n        if (autoAllocateChunkSize === 0) {\n            throw new TypeError('autoAllocateChunkSize must be greater than 0');\n        }\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize);\n    }\n    function SetUpReadableStreamBYOBRequest(request, controller, view) {\n        request._associatedReadableByteStreamController = controller;\n        request._view = view;\n    }\n    // Helper functions for the ReadableStreamBYOBRequest.\n    function byobRequestBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n    }\n    // Helper functions for the ReadableByteStreamController.\n    function byteStreamControllerBrandCheckException(name) {\n        return new TypeError(`ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamBYOBReader(stream) {\n        return new ReadableStreamBYOBReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadIntoRequest(stream, readIntoRequest) {\n        stream._reader._readIntoRequests.push(readIntoRequest);\n    }\n    function ReadableStreamFulfillReadIntoRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readIntoRequest = reader._readIntoRequests.shift();\n        if (done) {\n            readIntoRequest._closeSteps(chunk);\n        }\n        else {\n            readIntoRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadIntoRequests(stream) {\n        return stream._reader._readIntoRequests.length;\n    }\n    function ReadableStreamHasBYOBReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamBYOBReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A BYOB reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            if (!IsReadableByteStreamController(stream._readableStreamController)) {\n                throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n                    'source');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readIntoRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Attempts to reads bytes into view, and returns a promise resolved with the result.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read(view) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('read'));\n            }\n            if (!ArrayBuffer.isView(view)) {\n                return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n            }\n            if (view.byteLength === 0) {\n                return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n            }\n            if (view.buffer.byteLength === 0) {\n                return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readIntoRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamBYOBReaderRead(this, view, readIntoRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                throw byobReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readIntoRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamBYOBReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBReader;\n    }\n    function ReadableStreamBYOBReaderRead(reader, view, readIntoRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'errored') {\n            readIntoRequest._errorSteps(stream._storedError);\n        }\n        else {\n            ReadableByteStreamControllerPullInto(stream._readableStreamController, view, readIntoRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamBYOBReader.\n    function byobReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n    }\n\n    function ExtractHighWaterMark(strategy, defaultHWM) {\n        const { highWaterMark } = strategy;\n        if (highWaterMark === undefined) {\n            return defaultHWM;\n        }\n        if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n            throw new RangeError('Invalid highWaterMark');\n        }\n        return highWaterMark;\n    }\n    function ExtractSizeAlgorithm(strategy) {\n        const { size } = strategy;\n        if (!size) {\n            return () => 1;\n        }\n        return size;\n    }\n\n    function convertQueuingStrategy(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        const size = init === null || init === void 0 ? void 0 : init.size;\n        return {\n            highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n            size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n        };\n    }\n    function convertQueuingStrategySize(fn, context) {\n        assertFunction(fn, context);\n        return chunk => convertUnrestrictedDouble(fn(chunk));\n    }\n\n    function convertUnderlyingSink(original, context) {\n        assertDictionary(original, context);\n        const abort = original === null || original === void 0 ? void 0 : original.abort;\n        const close = original === null || original === void 0 ? void 0 : original.close;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        const write = original === null || original === void 0 ? void 0 : original.write;\n        return {\n            abort: abort === undefined ?\n                undefined :\n                convertUnderlyingSinkAbortCallback(abort, original, `${context} has member 'abort' that`),\n            close: close === undefined ?\n                undefined :\n                convertUnderlyingSinkCloseCallback(close, original, `${context} has member 'close' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSinkStartCallback(start, original, `${context} has member 'start' that`),\n            write: write === undefined ?\n                undefined :\n                convertUnderlyingSinkWriteCallback(write, original, `${context} has member 'write' that`),\n            type\n        };\n    }\n    function convertUnderlyingSinkAbortCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSinkCloseCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return () => promiseCall(fn, original, []);\n    }\n    function convertUnderlyingSinkStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSinkWriteCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    function assertWritableStream(x, context) {\n        if (!IsWritableStream(x)) {\n            throw new TypeError(`${context} is not a WritableStream.`);\n        }\n    }\n\n    function isAbortSignal(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        try {\n            return typeof value.aborted === 'boolean';\n        }\n        catch (_a) {\n            // AbortSignal.prototype.aborted throws if its brand check fails\n            return false;\n        }\n    }\n    const supportsAbortController = typeof AbortController === 'function';\n    /**\n     * Construct a new AbortController, if supported by the platform.\n     *\n     * @internal\n     */\n    function createAbortController() {\n        if (supportsAbortController) {\n            return new AbortController();\n        }\n        return undefined;\n    }\n\n    /**\n     * A writable stream represents a destination for data, into which you can write.\n     *\n     * @public\n     */\n    class WritableStream {\n        constructor(rawUnderlyingSink = {}, rawStrategy = {}) {\n            if (rawUnderlyingSink === undefined) {\n                rawUnderlyingSink = null;\n            }\n            else {\n                assertObject(rawUnderlyingSink, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n            InitializeWritableStream(this);\n            const type = underlyingSink.type;\n            if (type !== undefined) {\n                throw new RangeError('Invalid type is specified');\n            }\n            const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n            const highWaterMark = ExtractHighWaterMark(strategy, 1);\n            SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n        }\n        /**\n         * Returns whether or not the writable stream is locked to a writer.\n         */\n        get locked() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('locked');\n            }\n            return IsWritableStreamLocked(this);\n        }\n        /**\n         * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n         * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n         * mechanism of the underlying sink.\n         *\n         * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n         * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n         * the stream) if the stream is currently locked.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('abort'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n            }\n            return WritableStreamAbort(this, reason);\n        }\n        /**\n         * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n         * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n         *\n         * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n         * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n         * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n         */\n        close() {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('close'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamClose(this);\n        }\n        /**\n         * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n         * is locked, no other writer can be acquired until this one is released.\n         *\n         * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n         * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n         * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n         */\n        getWriter() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('getWriter');\n            }\n            return AcquireWritableStreamDefaultWriter(this);\n        }\n    }\n    Object.defineProperties(WritableStream.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        getWriter: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStream',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStream.\n    function AcquireWritableStreamDefaultWriter(stream) {\n        return new WritableStreamDefaultWriter(stream);\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(WritableStream.prototype);\n        InitializeWritableStream(stream);\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    function InitializeWritableStream(stream) {\n        stream._state = 'writable';\n        // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n        // 'erroring' or 'errored'. May be set to an undefined value.\n        stream._storedError = undefined;\n        stream._writer = undefined;\n        // Initialize to undefined first because the constructor of the controller checks this\n        // variable to validate the caller.\n        stream._writableStreamController = undefined;\n        // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n        // producer without waiting for the queued writes to finish.\n        stream._writeRequests = new SimpleQueue();\n        // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n        // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n        stream._inFlightWriteRequest = undefined;\n        // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n        // has been detached.\n        stream._closeRequest = undefined;\n        // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n        // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n        stream._inFlightCloseRequest = undefined;\n        // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n        stream._pendingAbortRequest = undefined;\n        // The backpressure signal set by the controller.\n        stream._backpressure = false;\n    }\n    function IsWritableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n            return false;\n        }\n        return x instanceof WritableStream;\n    }\n    function IsWritableStreamLocked(stream) {\n        if (stream._writer === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamAbort(stream, reason) {\n        var _a;\n        if (stream._state === 'closed' || stream._state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        stream._writableStreamController._abortReason = reason;\n        (_a = stream._writableStreamController._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        // TypeScript narrows the type of `stream._state` down to 'writable' | 'erroring',\n        // but it doesn't know that signaling abort runs author code that might have changed the state.\n        // Widen the type again by casting to WritableStreamState.\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._pendingAbortRequest !== undefined) {\n            return stream._pendingAbortRequest._promise;\n        }\n        let wasAlreadyErroring = false;\n        if (state === 'erroring') {\n            wasAlreadyErroring = true;\n            // reason will not be used, so don't keep a reference to it.\n            reason = undefined;\n        }\n        const promise = newPromise((resolve, reject) => {\n            stream._pendingAbortRequest = {\n                _promise: undefined,\n                _resolve: resolve,\n                _reject: reject,\n                _reason: reason,\n                _wasAlreadyErroring: wasAlreadyErroring\n            };\n        });\n        stream._pendingAbortRequest._promise = promise;\n        if (!wasAlreadyErroring) {\n            WritableStreamStartErroring(stream, reason);\n        }\n        return promise;\n    }\n    function WritableStreamClose(stream) {\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseRejectedWith(new TypeError(`The stream (in ${state} state) is not in the writable state and cannot be closed`));\n        }\n        const promise = newPromise((resolve, reject) => {\n            const closeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._closeRequest = closeRequest;\n        });\n        const writer = stream._writer;\n        if (writer !== undefined && stream._backpressure && state === 'writable') {\n            defaultWriterReadyPromiseResolve(writer);\n        }\n        WritableStreamDefaultControllerClose(stream._writableStreamController);\n        return promise;\n    }\n    // WritableStream API exposed for controllers.\n    function WritableStreamAddWriteRequest(stream) {\n        const promise = newPromise((resolve, reject) => {\n            const writeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._writeRequests.push(writeRequest);\n        });\n        return promise;\n    }\n    function WritableStreamDealWithRejection(stream, error) {\n        const state = stream._state;\n        if (state === 'writable') {\n            WritableStreamStartErroring(stream, error);\n            return;\n        }\n        WritableStreamFinishErroring(stream);\n    }\n    function WritableStreamStartErroring(stream, reason) {\n        const controller = stream._writableStreamController;\n        stream._state = 'erroring';\n        stream._storedError = reason;\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n        }\n        if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n            WritableStreamFinishErroring(stream);\n        }\n    }\n    function WritableStreamFinishErroring(stream) {\n        stream._state = 'errored';\n        stream._writableStreamController[ErrorSteps]();\n        const storedError = stream._storedError;\n        stream._writeRequests.forEach(writeRequest => {\n            writeRequest._reject(storedError);\n        });\n        stream._writeRequests = new SimpleQueue();\n        if (stream._pendingAbortRequest === undefined) {\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const abortRequest = stream._pendingAbortRequest;\n        stream._pendingAbortRequest = undefined;\n        if (abortRequest._wasAlreadyErroring) {\n            abortRequest._reject(storedError);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n        uponPromise(promise, () => {\n            abortRequest._resolve();\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        }, (reason) => {\n            abortRequest._reject(reason);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        });\n    }\n    function WritableStreamFinishInFlightWrite(stream) {\n        stream._inFlightWriteRequest._resolve(undefined);\n        stream._inFlightWriteRequest = undefined;\n    }\n    function WritableStreamFinishInFlightWriteWithError(stream, error) {\n        stream._inFlightWriteRequest._reject(error);\n        stream._inFlightWriteRequest = undefined;\n        WritableStreamDealWithRejection(stream, error);\n    }\n    function WritableStreamFinishInFlightClose(stream) {\n        stream._inFlightCloseRequest._resolve(undefined);\n        stream._inFlightCloseRequest = undefined;\n        const state = stream._state;\n        if (state === 'erroring') {\n            // The error was too late to do anything, so it is ignored.\n            stream._storedError = undefined;\n            if (stream._pendingAbortRequest !== undefined) {\n                stream._pendingAbortRequest._resolve();\n                stream._pendingAbortRequest = undefined;\n            }\n        }\n        stream._state = 'closed';\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseResolve(writer);\n        }\n    }\n    function WritableStreamFinishInFlightCloseWithError(stream, error) {\n        stream._inFlightCloseRequest._reject(error);\n        stream._inFlightCloseRequest = undefined;\n        // Never execute sink abort() after sink close().\n        if (stream._pendingAbortRequest !== undefined) {\n            stream._pendingAbortRequest._reject(error);\n            stream._pendingAbortRequest = undefined;\n        }\n        WritableStreamDealWithRejection(stream, error);\n    }\n    // TODO(ricea): Fix alphabetical order.\n    function WritableStreamCloseQueuedOrInFlight(stream) {\n        if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamHasOperationMarkedInFlight(stream) {\n        if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamMarkCloseRequestInFlight(stream) {\n        stream._inFlightCloseRequest = stream._closeRequest;\n        stream._closeRequest = undefined;\n    }\n    function WritableStreamMarkFirstWriteRequestInFlight(stream) {\n        stream._inFlightWriteRequest = stream._writeRequests.shift();\n    }\n    function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {\n        if (stream._closeRequest !== undefined) {\n            stream._closeRequest._reject(stream._storedError);\n            stream._closeRequest = undefined;\n        }\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseReject(writer, stream._storedError);\n        }\n    }\n    function WritableStreamUpdateBackpressure(stream, backpressure) {\n        const writer = stream._writer;\n        if (writer !== undefined && backpressure !== stream._backpressure) {\n            if (backpressure) {\n                defaultWriterReadyPromiseReset(writer);\n            }\n            else {\n                defaultWriterReadyPromiseResolve(writer);\n            }\n        }\n        stream._backpressure = backpressure;\n    }\n    /**\n     * A default writer vended by a {@link WritableStream}.\n     *\n     * @public\n     */\n    class WritableStreamDefaultWriter {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n            assertWritableStream(stream, 'First parameter');\n            if (IsWritableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n            }\n            this._ownerWritableStream = stream;\n            stream._writer = this;\n            const state = stream._state;\n            if (state === 'writable') {\n                if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n                    defaultWriterReadyPromiseInitialize(this);\n                }\n                else {\n                    defaultWriterReadyPromiseInitializeAsResolved(this);\n                }\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'erroring') {\n                defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'closed') {\n                defaultWriterReadyPromiseInitializeAsResolved(this);\n                defaultWriterClosedPromiseInitializeAsResolved(this);\n            }\n            else {\n                const storedError = stream._storedError;\n                defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n                defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n            }\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the writers lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.\n         * A producer can use this information to determine the right amount of data to write.\n         *\n         * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n         * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n         * the writers lock is released.\n         */\n        get desiredSize() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('desiredSize');\n            }\n            if (this._ownerWritableStream === undefined) {\n                throw defaultWriterLockException('desiredSize');\n            }\n            return WritableStreamDefaultWriterGetDesiredSize(this);\n        }\n        /**\n         * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions\n         * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n         * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n         *\n         * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become\n         * rejected.\n         */\n        get ready() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n            }\n            return this._readyPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('abort'));\n            }\n            return WritableStreamDefaultWriterAbort(this, reason);\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n         */\n        close() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('close'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(stream)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamDefaultWriterClose(this);\n        }\n        /**\n         * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.\n         * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n         * now on; otherwise, the writer will appear closed.\n         *\n         * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n         * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n         * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n         * other producers from writing in an interleaved manner.\n         */\n        releaseLock() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('releaseLock');\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return;\n            }\n            WritableStreamDefaultWriterRelease(this);\n        }\n        write(chunk = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('write to'));\n            }\n            return WritableStreamDefaultWriterWrite(this, chunk);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultWriter.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        releaseLock: { enumerable: true },\n        write: { enumerable: true },\n        closed: { enumerable: true },\n        desiredSize: { enumerable: true },\n        ready: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultWriter.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultWriter',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStreamDefaultWriter.\n    function IsWritableStreamDefaultWriter(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultWriter;\n    }\n    // A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n    function WritableStreamDefaultWriterAbort(writer, reason) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamAbort(stream, reason);\n    }\n    function WritableStreamDefaultWriterClose(writer) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamClose(stream);\n    }\n    function WritableStreamDefaultWriterCloseWithErrorPropagation(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        return WritableStreamDefaultWriterClose(writer);\n    }\n    function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, error) {\n        if (writer._closedPromiseState === 'pending') {\n            defaultWriterClosedPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterClosedPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, error) {\n        if (writer._readyPromiseState === 'pending') {\n            defaultWriterReadyPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterReadyPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterGetDesiredSize(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (state === 'errored' || state === 'erroring') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n    }\n    function WritableStreamDefaultWriterRelease(writer) {\n        const stream = writer._ownerWritableStream;\n        const releasedError = new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);\n        WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n        // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n        // rejected until afterwards. This means that simply testing state will not work.\n        WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n        stream._writer = undefined;\n        writer._ownerWritableStream = undefined;\n    }\n    function WritableStreamDefaultWriterWrite(writer, chunk) {\n        const stream = writer._ownerWritableStream;\n        const controller = stream._writableStreamController;\n        const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n        if (stream !== writer._ownerWritableStream) {\n            return promiseRejectedWith(defaultWriterLockException('write to'));\n        }\n        const state = stream._state;\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n        }\n        if (state === 'erroring') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        const promise = WritableStreamAddWriteRequest(stream);\n        WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n        return promise;\n    }\n    const closeSentinel = {};\n    /**\n     * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class WritableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.\n         *\n         * @deprecated\n         *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.\n         *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.\n         */\n        get abortReason() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('abortReason');\n            }\n            return this._abortReason;\n        }\n        /**\n         * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.\n         */\n        get signal() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('signal');\n            }\n            if (this._abortController === undefined) {\n                // Older browsers or older Node versions may not support `AbortController` or `AbortSignal`.\n                // We don't want to bundle and ship an `AbortController` polyfill together with our polyfill,\n                // so instead we only implement support for `signal` if we find a global `AbortController` constructor.\n                throw new TypeError('WritableStreamDefaultController.prototype.signal is not supported');\n            }\n            return this._abortController.signal;\n        }\n        /**\n         * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n         *\n         * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n         * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n         * normal lifecycle of interactions with the underlying sink.\n         */\n        error(e = undefined) {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('error');\n            }\n            const state = this._controlledWritableStream._state;\n            if (state !== 'writable') {\n                // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n                // just treat it as a no-op.\n                return;\n            }\n            WritableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [AbortSteps](reason) {\n            const result = this._abortAlgorithm(reason);\n            WritableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [ErrorSteps]() {\n            ResetQueue(this);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultController.prototype, {\n        abortReason: { enumerable: true },\n        signal: { enumerable: true },\n        error: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations implementing interface required by the WritableStream.\n    function IsWritableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultController;\n    }\n    function SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledWritableStream = stream;\n        stream._writableStreamController = controller;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._abortReason = undefined;\n        controller._abortController = createAbortController();\n        controller._started = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._writeAlgorithm = writeAlgorithm;\n        controller._closeAlgorithm = closeAlgorithm;\n        controller._abortAlgorithm = abortAlgorithm;\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n        const startResult = startAlgorithm();\n        const startPromise = promiseResolvedWith(startResult);\n        uponPromise(startPromise, () => {\n            controller._started = true;\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, r => {\n            controller._started = true;\n            WritableStreamDealWithRejection(stream, r);\n        });\n    }\n    function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream, underlyingSink, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let writeAlgorithm = () => promiseResolvedWith(undefined);\n        let closeAlgorithm = () => promiseResolvedWith(undefined);\n        let abortAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSink.start !== undefined) {\n            startAlgorithm = () => underlyingSink.start(controller);\n        }\n        if (underlyingSink.write !== undefined) {\n            writeAlgorithm = chunk => underlyingSink.write(chunk, controller);\n        }\n        if (underlyingSink.close !== undefined) {\n            closeAlgorithm = () => underlyingSink.close();\n        }\n        if (underlyingSink.abort !== undefined) {\n            abortAlgorithm = reason => underlyingSink.abort(reason);\n        }\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\n    function WritableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._writeAlgorithm = undefined;\n        controller._closeAlgorithm = undefined;\n        controller._abortAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    function WritableStreamDefaultControllerClose(controller) {\n        EnqueueValueWithSize(controller, closeSentinel, 0);\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    function WritableStreamDefaultControllerGetChunkSize(controller, chunk) {\n        try {\n            return controller._strategySizeAlgorithm(chunk);\n        }\n        catch (chunkSizeE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n            return 1;\n        }\n    }\n    function WritableStreamDefaultControllerGetDesiredSize(controller) {\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function WritableStreamDefaultControllerWrite(controller, chunk, chunkSize) {\n        try {\n            EnqueueValueWithSize(controller, chunk, chunkSize);\n        }\n        catch (enqueueE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n            return;\n        }\n        const stream = controller._controlledWritableStream;\n        if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n            const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n            WritableStreamUpdateBackpressure(stream, backpressure);\n        }\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    // Abstract operations for the WritableStreamDefaultController.\n    function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller) {\n        const stream = controller._controlledWritableStream;\n        if (!controller._started) {\n            return;\n        }\n        if (stream._inFlightWriteRequest !== undefined) {\n            return;\n        }\n        const state = stream._state;\n        if (state === 'erroring') {\n            WritableStreamFinishErroring(stream);\n            return;\n        }\n        if (controller._queue.length === 0) {\n            return;\n        }\n        const value = PeekQueueValue(controller);\n        if (value === closeSentinel) {\n            WritableStreamDefaultControllerProcessClose(controller);\n        }\n        else {\n            WritableStreamDefaultControllerProcessWrite(controller, value);\n        }\n    }\n    function WritableStreamDefaultControllerErrorIfNeeded(controller, error) {\n        if (controller._controlledWritableStream._state === 'writable') {\n            WritableStreamDefaultControllerError(controller, error);\n        }\n    }\n    function WritableStreamDefaultControllerProcessClose(controller) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkCloseRequestInFlight(stream);\n        DequeueValue(controller);\n        const sinkClosePromise = controller._closeAlgorithm();\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(sinkClosePromise, () => {\n            WritableStreamFinishInFlightClose(stream);\n        }, reason => {\n            WritableStreamFinishInFlightCloseWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerProcessWrite(controller, chunk) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkFirstWriteRequestInFlight(stream);\n        const sinkWritePromise = controller._writeAlgorithm(chunk);\n        uponPromise(sinkWritePromise, () => {\n            WritableStreamFinishInFlightWrite(stream);\n            const state = stream._state;\n            DequeueValue(controller);\n            if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n                const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n                WritableStreamUpdateBackpressure(stream, backpressure);\n            }\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, reason => {\n            if (stream._state === 'writable') {\n                WritableStreamDefaultControllerClearAlgorithms(controller);\n            }\n            WritableStreamFinishInFlightWriteWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerGetBackpressure(controller) {\n        const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n        return desiredSize <= 0;\n    }\n    // A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n    function WritableStreamDefaultControllerError(controller, error) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        WritableStreamStartErroring(stream, error);\n    }\n    // Helper functions for the WritableStream.\n    function streamBrandCheckException$2(name) {\n        return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n    }\n    // Helper functions for the WritableStreamDefaultController.\n    function defaultControllerBrandCheckException$2(name) {\n        return new TypeError(`WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);\n    }\n    // Helper functions for the WritableStreamDefaultWriter.\n    function defaultWriterBrandCheckException(name) {\n        return new TypeError(`WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n    }\n    function defaultWriterLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released writer');\n    }\n    function defaultWriterClosedPromiseInitialize(writer) {\n        writer._closedPromise = newPromise((resolve, reject) => {\n            writer._closedPromise_resolve = resolve;\n            writer._closedPromise_reject = reject;\n            writer._closedPromiseState = 'pending';\n        });\n    }\n    function defaultWriterClosedPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseReject(writer, reason);\n    }\n    function defaultWriterClosedPromiseInitializeAsResolved(writer) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseResolve(writer);\n    }\n    function defaultWriterClosedPromiseReject(writer, reason) {\n        if (writer._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._closedPromise);\n        writer._closedPromise_reject(reason);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'rejected';\n    }\n    function defaultWriterClosedPromiseResetToRejected(writer, reason) {\n        defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterClosedPromiseResolve(writer) {\n        if (writer._closedPromise_resolve === undefined) {\n            return;\n        }\n        writer._closedPromise_resolve(undefined);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'resolved';\n    }\n    function defaultWriterReadyPromiseInitialize(writer) {\n        writer._readyPromise = newPromise((resolve, reject) => {\n            writer._readyPromise_resolve = resolve;\n            writer._readyPromise_reject = reject;\n        });\n        writer._readyPromiseState = 'pending';\n    }\n    function defaultWriterReadyPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseReject(writer, reason);\n    }\n    function defaultWriterReadyPromiseInitializeAsResolved(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseResolve(writer);\n    }\n    function defaultWriterReadyPromiseReject(writer, reason) {\n        if (writer._readyPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._readyPromise);\n        writer._readyPromise_reject(reason);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'rejected';\n    }\n    function defaultWriterReadyPromiseReset(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n    }\n    function defaultWriterReadyPromiseResetToRejected(writer, reason) {\n        defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterReadyPromiseResolve(writer) {\n        if (writer._readyPromise_resolve === undefined) {\n            return;\n        }\n        writer._readyPromise_resolve(undefined);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'fulfilled';\n    }\n\n    /// <reference lib=\"dom\" />\n    const NativeDOMException = typeof DOMException !== 'undefined' ? DOMException : undefined;\n\n    /// <reference types=\"node\" />\n    function isDOMExceptionConstructor(ctor) {\n        if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n            return false;\n        }\n        try {\n            new ctor();\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    function createDOMExceptionPolyfill() {\n        // eslint-disable-next-line no-shadow\n        const ctor = function DOMException(message, name) {\n            this.message = message || '';\n            this.name = name || 'Error';\n            if (Error.captureStackTrace) {\n                Error.captureStackTrace(this, this.constructor);\n            }\n        };\n        ctor.prototype = Object.create(Error.prototype);\n        Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n        return ctor;\n    }\n    // eslint-disable-next-line no-redeclare\n    const DOMException$1 = isDOMExceptionConstructor(NativeDOMException) ? NativeDOMException : createDOMExceptionPolyfill();\n\n    function ReadableStreamPipeTo(source, dest, preventClose, preventAbort, preventCancel, signal) {\n        const reader = AcquireReadableStreamDefaultReader(source);\n        const writer = AcquireWritableStreamDefaultWriter(dest);\n        source._disturbed = true;\n        let shuttingDown = false;\n        // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n        let currentWrite = promiseResolvedWith(undefined);\n        return newPromise((resolve, reject) => {\n            let abortAlgorithm;\n            if (signal !== undefined) {\n                abortAlgorithm = () => {\n                    const error = new DOMException$1('Aborted', 'AbortError');\n                    const actions = [];\n                    if (!preventAbort) {\n                        actions.push(() => {\n                            if (dest._state === 'writable') {\n                                return WritableStreamAbort(dest, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    if (!preventCancel) {\n                        actions.push(() => {\n                            if (source._state === 'readable') {\n                                return ReadableStreamCancel(source, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n                };\n                if (signal.aborted) {\n                    abortAlgorithm();\n                    return;\n                }\n                signal.addEventListener('abort', abortAlgorithm);\n            }\n            // Using reader and writer, read all chunks from this and write them to dest\n            // - Backpressure must be enforced\n            // - Shutdown must stop all activity\n            function pipeLoop() {\n                return newPromise((resolveLoop, rejectLoop) => {\n                    function next(done) {\n                        if (done) {\n                            resolveLoop();\n                        }\n                        else {\n                            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n                            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n                            PerformPromiseThen(pipeStep(), next, rejectLoop);\n                        }\n                    }\n                    next(false);\n                });\n            }\n            function pipeStep() {\n                if (shuttingDown) {\n                    return promiseResolvedWith(true);\n                }\n                return PerformPromiseThen(writer._readyPromise, () => {\n                    return newPromise((resolveRead, rejectRead) => {\n                        ReadableStreamDefaultReaderRead(reader, {\n                            _chunkSteps: chunk => {\n                                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                                resolveRead(false);\n                            },\n                            _closeSteps: () => resolveRead(true),\n                            _errorSteps: rejectRead\n                        });\n                    });\n                });\n            }\n            // Errors must be propagated forward\n            isOrBecomesErrored(source, reader._closedPromise, storedError => {\n                if (!preventAbort) {\n                    shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Errors must be propagated backward\n            isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Closing must be propagated forward\n            isOrBecomesClosed(source, reader._closedPromise, () => {\n                if (!preventClose) {\n                    shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n                }\n                else {\n                    shutdown();\n                }\n            });\n            // Closing must be propagated backward\n            if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n                const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n                }\n                else {\n                    shutdown(true, destClosed);\n                }\n            }\n            setPromiseIsHandledToTrue(pipeLoop());\n            function waitForWritesToFinish() {\n                // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n                // for that too.\n                const oldCurrentWrite = currentWrite;\n                return PerformPromiseThen(currentWrite, () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined);\n            }\n            function isOrBecomesErrored(stream, promise, action) {\n                if (stream._state === 'errored') {\n                    action(stream._storedError);\n                }\n                else {\n                    uponRejection(promise, action);\n                }\n            }\n            function isOrBecomesClosed(stream, promise, action) {\n                if (stream._state === 'closed') {\n                    action();\n                }\n                else {\n                    uponFulfillment(promise, action);\n                }\n            }\n            function shutdownWithAction(action, originalIsError, originalError) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), doTheRest);\n                }\n                else {\n                    doTheRest();\n                }\n                function doTheRest() {\n                    uponPromise(action(), () => finalize(originalIsError, originalError), newError => finalize(true, newError));\n                }\n            }\n            function shutdown(isError, error) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n                }\n                else {\n                    finalize(isError, error);\n                }\n            }\n            function finalize(isError, error) {\n                WritableStreamDefaultWriterRelease(writer);\n                ReadableStreamReaderGenericRelease(reader);\n                if (signal !== undefined) {\n                    signal.removeEventListener('abort', abortAlgorithm);\n                }\n                if (isError) {\n                    reject(error);\n                }\n                else {\n                    resolve(undefined);\n                }\n            }\n        });\n    }\n\n    /**\n     * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('desiredSize');\n            }\n            return ReadableStreamDefaultControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('close');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits close');\n            }\n            ReadableStreamDefaultControllerClose(this);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('enqueue');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits enqueue');\n            }\n            return ReadableStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('error');\n            }\n            ReadableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableStream;\n            if (this._queue.length > 0) {\n                const chunk = DequeueValue(this);\n                if (this._closeRequested && this._queue.length === 0) {\n                    ReadableStreamDefaultControllerClearAlgorithms(this);\n                    ReadableStreamClose(stream);\n                }\n                else {\n                    ReadableStreamDefaultControllerCallPullIfNeeded(this);\n                }\n                readRequest._chunkSteps(chunk);\n            }\n            else {\n                ReadableStreamAddReadRequest(stream, readRequest);\n                ReadableStreamDefaultControllerCallPullIfNeeded(this);\n            }\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStreamDefaultController.\n    function IsReadableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultController;\n    }\n    function ReadableStreamDefaultControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableStreamDefaultControllerError(controller, e);\n        });\n    }\n    function ReadableStreamDefaultControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableStream;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    // A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n    function ReadableStreamDefaultControllerClose(controller) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        controller._closeRequested = true;\n        if (controller._queue.length === 0) {\n            ReadableStreamDefaultControllerClearAlgorithms(controller);\n            ReadableStreamClose(stream);\n        }\n    }\n    function ReadableStreamDefaultControllerEnqueue(controller, chunk) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            ReadableStreamFulfillReadRequest(stream, chunk, false);\n        }\n        else {\n            let chunkSize;\n            try {\n                chunkSize = controller._strategySizeAlgorithm(chunk);\n            }\n            catch (chunkSizeE) {\n                ReadableStreamDefaultControllerError(controller, chunkSizeE);\n                throw chunkSizeE;\n            }\n            try {\n                EnqueueValueWithSize(controller, chunk, chunkSize);\n            }\n            catch (enqueueE) {\n                ReadableStreamDefaultControllerError(controller, enqueueE);\n                throw enqueueE;\n            }\n        }\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n    }\n    function ReadableStreamDefaultControllerError(controller, e) {\n        const stream = controller._controlledReadableStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ResetQueue(controller);\n        ReadableStreamDefaultControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableStreamDefaultControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    // This is used in the implementation of TransformStream.\n    function ReadableStreamDefaultControllerHasBackpressure(controller) {\n        if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n            return false;\n        }\n        return true;\n    }\n    function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (!controller._closeRequested && state === 'readable') {\n            return true;\n        }\n        return false;\n    }\n    function SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledReadableStream = stream;\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._started = false;\n        controller._closeRequested = false;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableStreamDefaultControllerError(controller, r);\n        });\n    }\n    function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream, underlyingSource, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSource.start !== undefined) {\n            startAlgorithm = () => underlyingSource.start(controller);\n        }\n        if (underlyingSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingSource.pull(controller);\n        }\n        if (underlyingSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingSource.cancel(reason);\n        }\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // Helper functions for the ReadableStreamDefaultController.\n    function defaultControllerBrandCheckException$1(name) {\n        return new TypeError(`ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n    }\n\n    function ReadableStreamTee(stream, cloneForBranch2) {\n        if (IsReadableByteStreamController(stream._readableStreamController)) {\n            return ReadableByteStreamTee(stream);\n        }\n        return ReadableStreamDefaultTee(stream);\n    }\n    function ReadableStreamDefaultTee(stream, cloneForBranch2) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgain = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function pullAlgorithm() {\n            if (reading) {\n                readAgain = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgain = false;\n                        const chunk1 = chunk;\n                        const chunk2 = chunk;\n                        // There is no way to access the cloning code right now in the reference implementation.\n                        // If we add one then we'll need an implementation for serializable objects.\n                        // if (!canceled2 && cloneForBranch2) {\n                        //   chunk2 = StructuredDeserialize(StructuredSerialize(chunk2));\n                        // }\n                        if (!canceled1) {\n                            ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgain) {\n                            pullAlgorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableStreamDefaultControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableStreamDefaultControllerClose(branch2._readableStreamController);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            // do nothing\n        }\n        branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n        branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n        uponRejection(reader._closedPromise, (r) => {\n            ReadableStreamDefaultControllerError(branch1._readableStreamController, r);\n            ReadableStreamDefaultControllerError(branch2._readableStreamController, r);\n            if (!canceled1 || !canceled2) {\n                resolveCancelPromise(undefined);\n            }\n        });\n        return [branch1, branch2];\n    }\n    function ReadableByteStreamTee(stream) {\n        let reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgainForBranch1 = false;\n        let readAgainForBranch2 = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function forwardReaderError(thisReader) {\n            uponRejection(thisReader._closedPromise, r => {\n                if (thisReader !== reader) {\n                    return;\n                }\n                ReadableByteStreamControllerError(branch1._readableStreamController, r);\n                ReadableByteStreamControllerError(branch2._readableStreamController, r);\n                if (!canceled1 || !canceled2) {\n                    resolveCancelPromise(undefined);\n                }\n            });\n        }\n        function pullWithDefaultReader() {\n            if (IsReadableStreamBYOBReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamDefaultReader(stream);\n                forwardReaderError(reader);\n            }\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const chunk1 = chunk;\n                        let chunk2 = chunk;\n                        if (!canceled1 && !canceled2) {\n                            try {\n                                chunk2 = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                        }\n                        if (!canceled1) {\n                            ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableByteStreamControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableByteStreamControllerClose(branch2._readableStreamController);\n                    }\n                    if (branch1._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);\n                    }\n                    if (branch2._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n        }\n        function pullWithBYOBReader(view, forBranch2) {\n            if (IsReadableStreamDefaultReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamBYOBReader(stream);\n                forwardReaderError(reader);\n            }\n            const byobBranch = forBranch2 ? branch2 : branch1;\n            const otherBranch = forBranch2 ? branch1 : branch2;\n            const readIntoRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                        const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                        if (!otherCanceled) {\n                            let clonedChunk;\n                            try {\n                                clonedChunk = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                            if (!byobCanceled) {\n                                ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                            }\n                            ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);\n                        }\n                        else if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: chunk => {\n                    reading = false;\n                    const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                    const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                    if (!byobCanceled) {\n                        ReadableByteStreamControllerClose(byobBranch._readableStreamController);\n                    }\n                    if (!otherCanceled) {\n                        ReadableByteStreamControllerClose(otherBranch._readableStreamController);\n                    }\n                    if (chunk !== undefined) {\n                        if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {\n                            ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);\n                        }\n                    }\n                    if (!byobCanceled || !otherCanceled) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamBYOBReaderRead(reader, view, readIntoRequest);\n        }\n        function pull1Algorithm() {\n            if (reading) {\n                readAgainForBranch1 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, false);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function pull2Algorithm() {\n            if (reading) {\n                readAgainForBranch2 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, true);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            return;\n        }\n        branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);\n        branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);\n        forwardReaderError(reader);\n        return [branch1, branch2];\n    }\n\n    function convertUnderlyingDefaultOrByteSource(source, context) {\n        assertDictionary(source, context);\n        const original = source;\n        const autoAllocateChunkSize = original === null || original === void 0 ? void 0 : original.autoAllocateChunkSize;\n        const cancel = original === null || original === void 0 ? void 0 : original.cancel;\n        const pull = original === null || original === void 0 ? void 0 : original.pull;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        return {\n            autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n                undefined :\n                convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize, `${context} has member 'autoAllocateChunkSize' that`),\n            cancel: cancel === undefined ?\n                undefined :\n                convertUnderlyingSourceCancelCallback(cancel, original, `${context} has member 'cancel' that`),\n            pull: pull === undefined ?\n                undefined :\n                convertUnderlyingSourcePullCallback(pull, original, `${context} has member 'pull' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSourceStartCallback(start, original, `${context} has member 'start' that`),\n            type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n        };\n    }\n    function convertUnderlyingSourceCancelCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSourcePullCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSourceStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertReadableStreamType(type, context) {\n        type = `${type}`;\n        if (type !== 'bytes') {\n            throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n        }\n        return type;\n    }\n\n    function convertReaderOptions(options, context) {\n        assertDictionary(options, context);\n        const mode = options === null || options === void 0 ? void 0 : options.mode;\n        return {\n            mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n        };\n    }\n    function convertReadableStreamReaderMode(mode, context) {\n        mode = `${mode}`;\n        if (mode !== 'byob') {\n            throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n        }\n        return mode;\n    }\n\n    function convertIteratorOptions(options, context) {\n        assertDictionary(options, context);\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        return { preventCancel: Boolean(preventCancel) };\n    }\n\n    function convertPipeOptions(options, context) {\n        assertDictionary(options, context);\n        const preventAbort = options === null || options === void 0 ? void 0 : options.preventAbort;\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        const preventClose = options === null || options === void 0 ? void 0 : options.preventClose;\n        const signal = options === null || options === void 0 ? void 0 : options.signal;\n        if (signal !== undefined) {\n            assertAbortSignal(signal, `${context} has member 'signal' that`);\n        }\n        return {\n            preventAbort: Boolean(preventAbort),\n            preventCancel: Boolean(preventCancel),\n            preventClose: Boolean(preventClose),\n            signal\n        };\n    }\n    function assertAbortSignal(signal, context) {\n        if (!isAbortSignal(signal)) {\n            throw new TypeError(`${context} is not an AbortSignal.`);\n        }\n    }\n\n    function convertReadableWritablePair(pair, context) {\n        assertDictionary(pair, context);\n        const readable = pair === null || pair === void 0 ? void 0 : pair.readable;\n        assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n        assertReadableStream(readable, `${context} has member 'readable' that`);\n        const writable = pair === null || pair === void 0 ? void 0 : pair.writable;\n        assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n        assertWritableStream(writable, `${context} has member 'writable' that`);\n        return { readable, writable };\n    }\n\n    /**\n     * A readable stream represents a source of data, from which you can read.\n     *\n     * @public\n     */\n    class ReadableStream {\n        constructor(rawUnderlyingSource = {}, rawStrategy = {}) {\n            if (rawUnderlyingSource === undefined) {\n                rawUnderlyingSource = null;\n            }\n            else {\n                assertObject(rawUnderlyingSource, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n            InitializeReadableStream(this);\n            if (underlyingSource.type === 'bytes') {\n                if (strategy.size !== undefined) {\n                    throw new RangeError('The strategy for a byte stream cannot have a size function');\n                }\n                const highWaterMark = ExtractHighWaterMark(strategy, 0);\n                SetUpReadableByteStreamControllerFromUnderlyingSource(this, underlyingSource, highWaterMark);\n            }\n            else {\n                const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n                const highWaterMark = ExtractHighWaterMark(strategy, 1);\n                SetUpReadableStreamDefaultControllerFromUnderlyingSource(this, underlyingSource, highWaterMark, sizeAlgorithm);\n            }\n        }\n        /**\n         * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n         */\n        get locked() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('locked');\n            }\n            return IsReadableStreamLocked(this);\n        }\n        /**\n         * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n         *\n         * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n         * method, which might or might not use it.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('cancel'));\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n            }\n            return ReadableStreamCancel(this, reason);\n        }\n        getReader(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('getReader');\n            }\n            const options = convertReaderOptions(rawOptions, 'First parameter');\n            if (options.mode === undefined) {\n                return AcquireReadableStreamDefaultReader(this);\n            }\n            return AcquireReadableStreamBYOBReader(this);\n        }\n        pipeThrough(rawTransform, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('pipeThrough');\n            }\n            assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n            const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n            const options = convertPipeOptions(rawOptions, 'Second parameter');\n            if (IsReadableStreamLocked(this)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n            }\n            if (IsWritableStreamLocked(transform.writable)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n            }\n            const promise = ReadableStreamPipeTo(this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n            setPromiseIsHandledToTrue(promise);\n            return transform.readable;\n        }\n        pipeTo(destination, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('pipeTo'));\n            }\n            if (destination === undefined) {\n                return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n            }\n            if (!IsWritableStream(destination)) {\n                return promiseRejectedWith(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`));\n            }\n            let options;\n            try {\n                options = convertPipeOptions(rawOptions, 'Second parameter');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream'));\n            }\n            if (IsWritableStreamLocked(destination)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream'));\n            }\n            return ReadableStreamPipeTo(this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n        }\n        /**\n         * Tees this readable stream, returning a two-element array containing the two resulting branches as\n         * new {@link ReadableStream} instances.\n         *\n         * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n         * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n         * propagated to the stream's underlying source.\n         *\n         * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n         * this could allow interference between the two branches.\n         */\n        tee() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('tee');\n            }\n            const branches = ReadableStreamTee(this);\n            return CreateArrayFromList(branches);\n        }\n        values(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('values');\n            }\n            const options = convertIteratorOptions(rawOptions, 'First parameter');\n            return AcquireReadableStreamAsyncIterator(this, options.preventCancel);\n        }\n    }\n    Object.defineProperties(ReadableStream.prototype, {\n        cancel: { enumerable: true },\n        getReader: { enumerable: true },\n        pipeThrough: { enumerable: true },\n        pipeTo: { enumerable: true },\n        tee: { enumerable: true },\n        values: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStream',\n            configurable: true\n        });\n    }\n    if (typeof SymbolPolyfill.asyncIterator === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.asyncIterator, {\n            value: ReadableStream.prototype.values,\n            writable: true,\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStream.\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableByteStream(startAlgorithm, pullAlgorithm, cancelAlgorithm) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, undefined);\n        return stream;\n    }\n    function InitializeReadableStream(stream) {\n        stream._state = 'readable';\n        stream._reader = undefined;\n        stream._storedError = undefined;\n        stream._disturbed = false;\n    }\n    function IsReadableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStream;\n    }\n    function IsReadableStreamLocked(stream) {\n        if (stream._reader === undefined) {\n            return false;\n        }\n        return true;\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamCancel(stream, reason) {\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        ReadableStreamClose(stream);\n        const reader = stream._reader;\n        if (reader !== undefined && IsReadableStreamBYOBReader(reader)) {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._closeSteps(undefined);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n        const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n        return transformPromiseWith(sourceCancelPromise, noop);\n    }\n    function ReadableStreamClose(stream) {\n        stream._state = 'closed';\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseResolve(reader);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._closeSteps();\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n    }\n    function ReadableStreamError(stream, e) {\n        stream._state = 'errored';\n        stream._storedError = e;\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseReject(reader, e);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._errorSteps(e);\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n        else {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._errorSteps(e);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamBrandCheckException$1(name) {\n        return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n    }\n\n    function convertQueuingStrategyInit(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n        return {\n            highWaterMark: convertUnrestrictedDouble(highWaterMark)\n        };\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const byteLengthSizeFunction = (chunk) => {\n        return chunk.byteLength;\n    };\n    try {\n        Object.defineProperty(byteLengthSizeFunction, 'name', {\n            value: 'size',\n            configurable: true\n        });\n    }\n    catch (_a) {\n        // This property is non-configurable in older browsers, so ignore if this throws.\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n    }\n    /**\n     * A queuing strategy that counts the number of bytes in each chunk.\n     *\n     * @public\n     */\n    class ByteLengthQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('highWaterMark');\n            }\n            return this._byteLengthQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by returning the value of its `byteLength` property.\n         */\n        get size() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('size');\n            }\n            return byteLengthSizeFunction;\n        }\n    }\n    Object.defineProperties(ByteLengthQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ByteLengthQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ByteLengthQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the ByteLengthQueuingStrategy.\n    function byteLengthBrandCheckException(name) {\n        return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n    }\n    function IsByteLengthQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof ByteLengthQueuingStrategy;\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const countSizeFunction = () => {\n        return 1;\n    };\n    try {\n        Object.defineProperty(countSizeFunction, 'name', {\n            value: 'size',\n            configurable: true\n        });\n    }\n    catch (_a) {\n        // This property is non-configurable in older browsers, so ignore if this throws.\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n    }\n    /**\n     * A queuing strategy that counts the number of chunks.\n     *\n     * @public\n     */\n    class CountQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('highWaterMark');\n            }\n            return this._countQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by always returning 1.\n         * This ensures that the total queue size is a count of the number of chunks in the queue.\n         */\n        get size() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('size');\n            }\n            return countSizeFunction;\n        }\n    }\n    Object.defineProperties(CountQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(CountQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'CountQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the CountQueuingStrategy.\n    function countBrandCheckException(name) {\n        return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n    }\n    function IsCountQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof CountQueuingStrategy;\n    }\n\n    function convertTransformer(original, context) {\n        assertDictionary(original, context);\n        const flush = original === null || original === void 0 ? void 0 : original.flush;\n        const readableType = original === null || original === void 0 ? void 0 : original.readableType;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const transform = original === null || original === void 0 ? void 0 : original.transform;\n        const writableType = original === null || original === void 0 ? void 0 : original.writableType;\n        return {\n            flush: flush === undefined ?\n                undefined :\n                convertTransformerFlushCallback(flush, original, `${context} has member 'flush' that`),\n            readableType,\n            start: start === undefined ?\n                undefined :\n                convertTransformerStartCallback(start, original, `${context} has member 'start' that`),\n            transform: transform === undefined ?\n                undefined :\n                convertTransformerTransformCallback(transform, original, `${context} has member 'transform' that`),\n            writableType\n        };\n    }\n    function convertTransformerFlushCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertTransformerStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertTransformerTransformCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    // Class TransformStream\n    /**\n     * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n     * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n     * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n     * made available for reading from the readable side.\n     *\n     * @public\n     */\n    class TransformStream {\n        constructor(rawTransformer = {}, rawWritableStrategy = {}, rawReadableStrategy = {}) {\n            if (rawTransformer === undefined) {\n                rawTransformer = null;\n            }\n            const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n            const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n            const transformer = convertTransformer(rawTransformer, 'First parameter');\n            if (transformer.readableType !== undefined) {\n                throw new RangeError('Invalid readableType specified');\n            }\n            if (transformer.writableType !== undefined) {\n                throw new RangeError('Invalid writableType specified');\n            }\n            const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n            const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n            const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n            const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n            let startPromise_resolve;\n            const startPromise = newPromise(resolve => {\n                startPromise_resolve = resolve;\n            });\n            InitializeTransformStream(this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n            SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n            if (transformer.start !== undefined) {\n                startPromise_resolve(transformer.start(this._transformStreamController));\n            }\n            else {\n                startPromise_resolve(undefined);\n            }\n        }\n        /**\n         * The readable side of the transform stream.\n         */\n        get readable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('readable');\n            }\n            return this._readable;\n        }\n        /**\n         * The writable side of the transform stream.\n         */\n        get writable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('writable');\n            }\n            return this._writable;\n        }\n    }\n    Object.defineProperties(TransformStream.prototype, {\n        readable: { enumerable: true },\n        writable: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStream',\n            configurable: true\n        });\n    }\n    function InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm) {\n        function startAlgorithm() {\n            return startPromise;\n        }\n        function writeAlgorithm(chunk) {\n            return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n        }\n        function abortAlgorithm(reason) {\n            return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n        }\n        function closeAlgorithm() {\n            return TransformStreamDefaultSinkCloseAlgorithm(stream);\n        }\n        stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, writableHighWaterMark, writableSizeAlgorithm);\n        function pullAlgorithm() {\n            return TransformStreamDefaultSourcePullAlgorithm(stream);\n        }\n        function cancelAlgorithm(reason) {\n            TransformStreamErrorWritableAndUnblockWrite(stream, reason);\n            return promiseResolvedWith(undefined);\n        }\n        stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n        // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n        stream._backpressure = undefined;\n        stream._backpressureChangePromise = undefined;\n        stream._backpressureChangePromise_resolve = undefined;\n        TransformStreamSetBackpressure(stream, true);\n        stream._transformStreamController = undefined;\n    }\n    function IsTransformStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n            return false;\n        }\n        return x instanceof TransformStream;\n    }\n    // This is a no-op if both sides are already errored.\n    function TransformStreamError(stream, e) {\n        ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e);\n        TransformStreamErrorWritableAndUnblockWrite(stream, e);\n    }\n    function TransformStreamErrorWritableAndUnblockWrite(stream, e) {\n        TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n        WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n        if (stream._backpressure) {\n            // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n            // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n            // _backpressure is set.\n            TransformStreamSetBackpressure(stream, false);\n        }\n    }\n    function TransformStreamSetBackpressure(stream, backpressure) {\n        // Passes also when called during construction.\n        if (stream._backpressureChangePromise !== undefined) {\n            stream._backpressureChangePromise_resolve();\n        }\n        stream._backpressureChangePromise = newPromise(resolve => {\n            stream._backpressureChangePromise_resolve = resolve;\n        });\n        stream._backpressure = backpressure;\n    }\n    // Class TransformStreamDefaultController\n    /**\n     * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n     *\n     * @public\n     */\n    class TransformStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.\n         */\n        get desiredSize() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('desiredSize');\n            }\n            const readableController = this._controlledTransformStream._readable._readableStreamController;\n            return ReadableStreamDefaultControllerGetDesiredSize(readableController);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('enqueue');\n            }\n            TransformStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors both the readable side and the writable side of the controlled transform stream, making all future\n         * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n         */\n        error(reason = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('error');\n            }\n            TransformStreamDefaultControllerError(this, reason);\n        }\n        /**\n         * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n         * transformer only needs to consume a portion of the chunks written to the writable side.\n         */\n        terminate() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('terminate');\n            }\n            TransformStreamDefaultControllerTerminate(this);\n        }\n    }\n    Object.defineProperties(TransformStreamDefaultController.prototype, {\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        terminate: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Transform Stream Default Controller Abstract Operations\n    function IsTransformStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n            return false;\n        }\n        return x instanceof TransformStreamDefaultController;\n    }\n    function SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm) {\n        controller._controlledTransformStream = stream;\n        stream._transformStreamController = controller;\n        controller._transformAlgorithm = transformAlgorithm;\n        controller._flushAlgorithm = flushAlgorithm;\n    }\n    function SetUpTransformStreamDefaultControllerFromTransformer(stream, transformer) {\n        const controller = Object.create(TransformStreamDefaultController.prototype);\n        let transformAlgorithm = (chunk) => {\n            try {\n                TransformStreamDefaultControllerEnqueue(controller, chunk);\n                return promiseResolvedWith(undefined);\n            }\n            catch (transformResultE) {\n                return promiseRejectedWith(transformResultE);\n            }\n        };\n        let flushAlgorithm = () => promiseResolvedWith(undefined);\n        if (transformer.transform !== undefined) {\n            transformAlgorithm = chunk => transformer.transform(chunk, controller);\n        }\n        if (transformer.flush !== undefined) {\n            flushAlgorithm = () => transformer.flush(controller);\n        }\n        SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm);\n    }\n    function TransformStreamDefaultControllerClearAlgorithms(controller) {\n        controller._transformAlgorithm = undefined;\n        controller._flushAlgorithm = undefined;\n    }\n    function TransformStreamDefaultControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n            throw new TypeError('Readable side is not in a state that permits enqueue');\n        }\n        // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n        // accept TransformStreamDefaultControllerEnqueue() calls.\n        try {\n            ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n        }\n        catch (e) {\n            // This happens when readableStrategy.size() throws.\n            TransformStreamErrorWritableAndUnblockWrite(stream, e);\n            throw stream._readable._storedError;\n        }\n        const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n        if (backpressure !== stream._backpressure) {\n            TransformStreamSetBackpressure(stream, true);\n        }\n    }\n    function TransformStreamDefaultControllerError(controller, e) {\n        TransformStreamError(controller._controlledTransformStream, e);\n    }\n    function TransformStreamDefaultControllerPerformTransform(controller, chunk) {\n        const transformPromise = controller._transformAlgorithm(chunk);\n        return transformPromiseWith(transformPromise, undefined, r => {\n            TransformStreamError(controller._controlledTransformStream, r);\n            throw r;\n        });\n    }\n    function TransformStreamDefaultControllerTerminate(controller) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        ReadableStreamDefaultControllerClose(readableController);\n        const error = new TypeError('TransformStream terminated');\n        TransformStreamErrorWritableAndUnblockWrite(stream, error);\n    }\n    // TransformStreamDefaultSink Algorithms\n    function TransformStreamDefaultSinkWriteAlgorithm(stream, chunk) {\n        const controller = stream._transformStreamController;\n        if (stream._backpressure) {\n            const backpressureChangePromise = stream._backpressureChangePromise;\n            return transformPromiseWith(backpressureChangePromise, () => {\n                const writable = stream._writable;\n                const state = writable._state;\n                if (state === 'erroring') {\n                    throw writable._storedError;\n                }\n                return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n            });\n        }\n        return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n    }\n    function TransformStreamDefaultSinkAbortAlgorithm(stream, reason) {\n        // abort() is not called synchronously, so it is possible for abort() to be called when the stream is already\n        // errored.\n        TransformStreamError(stream, reason);\n        return promiseResolvedWith(undefined);\n    }\n    function TransformStreamDefaultSinkCloseAlgorithm(stream) {\n        // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n        const readable = stream._readable;\n        const controller = stream._transformStreamController;\n        const flushPromise = controller._flushAlgorithm();\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        // Return a promise that is fulfilled with undefined on success.\n        return transformPromiseWith(flushPromise, () => {\n            if (readable._state === 'errored') {\n                throw readable._storedError;\n            }\n            ReadableStreamDefaultControllerClose(readable._readableStreamController);\n        }, r => {\n            TransformStreamError(stream, r);\n            throw readable._storedError;\n        });\n    }\n    // TransformStreamDefaultSource Algorithms\n    function TransformStreamDefaultSourcePullAlgorithm(stream) {\n        // Invariant. Enforced by the promises returned by start() and pull().\n        TransformStreamSetBackpressure(stream, false);\n        // Prevent the next pull() call until there is backpressure.\n        return stream._backpressureChangePromise;\n    }\n    // Helper functions for the TransformStreamDefaultController.\n    function defaultControllerBrandCheckException(name) {\n        return new TypeError(`TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n    }\n    // Helper functions for the TransformStream.\n    function streamBrandCheckException(name) {\n        return new TypeError(`TransformStream.prototype.${name} can only be used on a TransformStream`);\n    }\n\n    exports.ByteLengthQueuingStrategy = ByteLengthQueuingStrategy;\n    exports.CountQueuingStrategy = CountQueuingStrategy;\n    exports.ReadableByteStreamController = ReadableByteStreamController;\n    exports.ReadableStream = ReadableStream;\n    exports.ReadableStreamBYOBReader = ReadableStreamBYOBReader;\n    exports.ReadableStreamBYOBRequest = ReadableStreamBYOBRequest;\n    exports.ReadableStreamDefaultController = ReadableStreamDefaultController;\n    exports.ReadableStreamDefaultReader = ReadableStreamDefaultReader;\n    exports.TransformStream = TransformStream;\n    exports.TransformStreamDefaultController = TransformStreamDefaultController;\n    exports.WritableStream = WritableStream;\n    exports.WritableStreamDefaultController = WritableStreamDefaultController;\n    exports.WritableStreamDefaultWriter = WritableStreamDefaultWriter;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ponyfill.es2018.js.map\n","module.exports = require(\"vscode\");","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"node:process\");","module.exports = require(\"node:stream/web\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"worker_threads\");","/* c8 ignore start */\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\nif (!globalThis.ReadableStream) {\n  // `node:stream/web` got introduced in v16.5.0 as experimental\n  // and it's preferred over the polyfilled version. So we also\n  // suppress the warning that gets emitted by NodeJS for using it.\n  try {\n    const process = require('node:process')\n    const { emitWarning } = process\n    try {\n      process.emitWarning = () => {}\n      Object.assign(globalThis, require('node:stream/web'))\n      process.emitWarning = emitWarning\n    } catch (error) {\n      process.emitWarning = emitWarning\n      throw error\n    }\n  } catch (error) {\n    // fallback to polyfill implementation\n    Object.assign(globalThis, require('web-streams-polyfill/dist/ponyfill.es2018.js'))\n  }\n}\n\ntry {\n  // Don't use node: prefix for this, require+node: is not supported until node v14.14\n  // Only `import()` can use prefix in 12.20 and later\n  const { Blob } = require('buffer')\n  if (Blob && !Blob.prototype.stream) {\n    Blob.prototype.stream = function name (params) {\n      let position = 0\n      const blob = this\n\n      return new ReadableStream({\n        type: 'bytes',\n        async pull (ctrl) {\n          const chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE))\n          const buffer = await chunk.arrayBuffer()\n          position += buffer.byteLength\n          ctrl.enqueue(new Uint8Array(buffer))\n\n          if (position === blob.size) {\n            ctrl.close()\n          }\n        }\n      })\n    }\n  }\n} catch (error) {}\n/* c8 ignore end */\n","import Blob from './index.js'\n\nconst _File = class File extends Blob {\n  #lastModified = 0\n  #name = ''\n\n  /**\n   * @param {*[]} fileBits\n   * @param {string} fileName\n   * @param {{lastModified?: number, type?: string}} options\n   */// @ts-ignore\n  constructor (fileBits, fileName, options = {}) {\n    if (arguments.length < 2) {\n      throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)\n    }\n    super(fileBits, options)\n\n    if (options === null) options = {}\n\n    // Simulate WebIDL type casting for NaN value in lastModified option.\n    const lastModified = options.lastModified === undefined ? Date.now() : Number(options.lastModified)\n    if (!Number.isNaN(lastModified)) {\n      this.#lastModified = lastModified\n    }\n\n    this.#name = String(fileName)\n  }\n\n  get name () {\n    return this.#name\n  }\n\n  get lastModified () {\n    return this.#lastModified\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'File'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return !!object && object instanceof Blob &&\n      /^(File)$/.test(object[Symbol.toStringTag])\n  }\n}\n\n/** @type {typeof globalThis.File} */// @ts-ignore\nexport const File = _File\nexport default File\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:fs\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:path\");","import { statSync, createReadStream, promises as fs } from 'node:fs'\nimport { basename } from 'node:path'\nimport DOMException from 'node-domexception'\n\nimport File from './file.js'\nimport Blob from './index.js'\n\nconst { stat } = fs\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst blobFromSync = (path, type) => fromBlob(statSync(path), path, type)\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<Blob>}\n */\nconst blobFrom = (path, type) => stat(path).then(stat => fromBlob(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<File>}\n */\nconst fileFrom = (path, type) => stat(path).then(stat => fromFile(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst fileFromSync = (path, type) => fromFile(statSync(path), path, type)\n\n// @ts-ignore\nconst fromBlob = (stat, path, type = '') => new Blob([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], { type })\n\n// @ts-ignore\nconst fromFile = (stat, path, type = '') => new File([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], basename(path), { type, lastModified: stat.mtimeMs })\n\n/**\n * This is a blob backed up by a file on the disk\n * with minium requirement. Its wrapped around a Blob as a blobPart\n * so you have no direct access to this.\n *\n * @private\n */\nclass BlobDataItem {\n  #path\n  #start\n\n  constructor (options) {\n    this.#path = options.path\n    this.#start = options.start\n    this.size = options.size\n    this.lastModified = options.lastModified\n  }\n\n  /**\n   * Slicing arguments is first validated and formatted\n   * to not be out of range by Blob.prototype.slice\n   */\n  slice (start, end) {\n    return new BlobDataItem({\n      path: this.#path,\n      lastModified: this.lastModified,\n      size: end - start,\n      start: this.#start + start\n    })\n  }\n\n  async * stream () {\n    const { mtimeMs } = await stat(this.#path)\n    if (mtimeMs > this.lastModified) {\n      throw new DOMException('The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.', 'NotReadableError')\n    }\n    yield * createReadStream(this.#path, {\n      start: this.#start,\n      end: this.#start + this.size - 1\n    })\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n}\n\nexport default blobFromSync\nexport { File, Blob, blobFrom, blobFromSync, fileFrom, fileFromSync }\n","/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\n// TODO (jimmywarting): in the feature use conditional loading with top level await (requires 14.x)\n// Node has recently added whatwg stream into core\n\nimport './streams.cjs'\n\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\n/** @param {(Blob | Uint8Array)[]} parts */\nasync function * toIterator (parts, clone = true) {\n  for (const part of parts) {\n    if ('stream' in part) {\n      yield * (/** @type {AsyncIterableIterator<Uint8Array>} */ (part.stream()))\n    } else if (ArrayBuffer.isView(part)) {\n      if (clone) {\n        let position = part.byteOffset\n        const end = part.byteOffset + part.byteLength\n        while (position !== end) {\n          const size = Math.min(end - position, POOL_SIZE)\n          const chunk = part.buffer.slice(position, position + size)\n          position += chunk.byteLength\n          yield new Uint8Array(chunk)\n        }\n      } else {\n        yield part\n      }\n    /* c8 ignore next 10 */\n    } else {\n      // For blobs that have arrayBuffer but no stream method (nodes buffer.Blob)\n      let position = 0, b = (/** @type {Blob} */ (part))\n      while (position !== b.size) {\n        const chunk = b.slice(position, Math.min(b.size, position + POOL_SIZE))\n        const buffer = await chunk.arrayBuffer()\n        position += buffer.byteLength\n        yield new Uint8Array(buffer)\n      }\n    }\n  }\n}\n\nconst _Blob = class Blob {\n  /** @type {Array.<(Blob|Uint8Array)>} */\n  #parts = []\n  #type = ''\n  #size = 0\n  #endings = 'transparent'\n\n  /**\n   * The Blob() constructor returns a new Blob object. The content\n   * of the blob consists of the concatenation of the values given\n   * in the parameter array.\n   *\n   * @param {*} blobParts\n   * @param {{ type?: string, endings?: string }} [options]\n   */\n  constructor (blobParts = [], options = {}) {\n    if (typeof blobParts !== 'object' || blobParts === null) {\n      throw new TypeError('Failed to construct \\'Blob\\': The provided value cannot be converted to a sequence.')\n    }\n\n    if (typeof blobParts[Symbol.iterator] !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': The object must have a callable @@iterator property.')\n    }\n\n    if (typeof options !== 'object' && typeof options !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': parameter 2 cannot convert to dictionary.')\n    }\n\n    if (options === null) options = {}\n\n    const encoder = new TextEncoder()\n    for (const element of blobParts) {\n      let part\n      if (ArrayBuffer.isView(element)) {\n        part = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength))\n      } else if (element instanceof ArrayBuffer) {\n        part = new Uint8Array(element.slice(0))\n      } else if (element instanceof Blob) {\n        part = element\n      } else {\n        part = encoder.encode(`${element}`)\n      }\n\n      this.#size += ArrayBuffer.isView(part) ? part.byteLength : part.size\n      this.#parts.push(part)\n    }\n\n    this.#endings = `${options.endings === undefined ? 'transparent' : options.endings}`\n    const type = options.type === undefined ? '' : String(options.type)\n    this.#type = /^[\\x20-\\x7E]*$/.test(type) ? type : ''\n  }\n\n  /**\n   * The Blob interface's size property returns the\n   * size of the Blob in bytes.\n   */\n  get size () {\n    return this.#size\n  }\n\n  /**\n   * The type property of a Blob object returns the MIME type of the file.\n   */\n  get type () {\n    return this.#type\n  }\n\n  /**\n   * The text() method in the Blob interface returns a Promise\n   * that resolves with a string containing the contents of\n   * the blob, interpreted as UTF-8.\n   *\n   * @return {Promise<string>}\n   */\n  async text () {\n    // More optimized than using this.arrayBuffer()\n    // that requires twice as much ram\n    const decoder = new TextDecoder()\n    let str = ''\n    for await (const part of toIterator(this.#parts, false)) {\n      str += decoder.decode(part, { stream: true })\n    }\n    // Remaining\n    str += decoder.decode()\n    return str\n  }\n\n  /**\n   * The arrayBuffer() method in the Blob interface returns a\n   * Promise that resolves with the contents of the blob as\n   * binary data contained in an ArrayBuffer.\n   *\n   * @return {Promise<ArrayBuffer>}\n   */\n  async arrayBuffer () {\n    // Easier way... Just a unnecessary overhead\n    // const view = new Uint8Array(this.size);\n    // await this.stream().getReader({mode: 'byob'}).read(view);\n    // return view.buffer;\n\n    const data = new Uint8Array(this.size)\n    let offset = 0\n    for await (const chunk of toIterator(this.#parts, false)) {\n      data.set(chunk, offset)\n      offset += chunk.length\n    }\n\n    return data.buffer\n  }\n\n  stream () {\n    const it = toIterator(this.#parts, true)\n\n    return new globalThis.ReadableStream({\n      // @ts-ignore\n      type: 'bytes',\n      async pull (ctrl) {\n        const chunk = await it.next()\n        chunk.done ? ctrl.close() : ctrl.enqueue(chunk.value)\n      },\n\n      async cancel () {\n        await it.return()\n      }\n    })\n  }\n\n  /**\n   * The Blob interface's slice() method creates and returns a\n   * new Blob object which contains data from a subset of the\n   * blob on which it's called.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @param {string} [type]\n   */\n  slice (start = 0, end = this.size, type = '') {\n    const { size } = this\n\n    let relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size)\n    let relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size)\n\n    const span = Math.max(relativeEnd - relativeStart, 0)\n    const parts = this.#parts\n    const blobParts = []\n    let added = 0\n\n    for (const part of parts) {\n      // don't add the overflow to new blobParts\n      if (added >= span) {\n        break\n      }\n\n      const size = ArrayBuffer.isView(part) ? part.byteLength : part.size\n      if (relativeStart && size <= relativeStart) {\n        // Skip the beginning and change the relative\n        // start & end position as we skip the unwanted parts\n        relativeStart -= size\n        relativeEnd -= size\n      } else {\n        let chunk\n        if (ArrayBuffer.isView(part)) {\n          chunk = part.subarray(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.byteLength\n        } else {\n          chunk = part.slice(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.size\n        }\n        relativeEnd -= size\n        blobParts.push(chunk)\n        relativeStart = 0 // All next sequential parts should start at 0\n      }\n    }\n\n    const blob = new Blob([], { type: String(type).toLowerCase() })\n    blob.#size = span\n    blob.#parts = blobParts\n\n    return blob\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return (\n      object &&\n      typeof object === 'object' &&\n      typeof object.constructor === 'function' &&\n      (\n        typeof object.stream === 'function' ||\n        typeof object.arrayBuffer === 'function'\n      ) &&\n      /^(Blob|File)$/.test(object[Symbol.toStringTag])\n    )\n  }\n}\n\nObject.defineProperties(_Blob.prototype, {\n  size: { enumerable: true },\n  type: { enumerable: true },\n  slice: { enumerable: true }\n})\n\n/** @type {typeof globalThis.Blob} */\nexport const Blob = _Blob\nexport default Blob\n","/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nimport C from 'fetch-blob'\nimport F from 'fetch-blob/file.js'\n\nvar {toStringTag:t,iterator:i,hasInstance:h}=Symbol,\nr=Math.random,\nm='append,set,get,getAll,delete,keys,values,entries,forEach,constructor'.split(','),\nf=(a,b,c)=>(a+='',/^(Blob|File)$/.test(b && b[t])?[(c=c!==void 0?c+'':b[t]=='File'?b.name:'blob',a),b.name!==c||b[t]=='blob'?new F([b],c,b):b]:[a,b+'']),\ne=(c,f)=>(f?c:c.replace(/\\r?\\n|\\r/g,'\\r\\n')).replace(/\\n/g,'%0A').replace(/\\r/g,'%0D').replace(/\"/g,'%22'),\nx=(n, a, e)=>{if(a.length<e){throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e} arguments required, but only ${a.length} present.`)}}\n\nexport const File = F\n\n/** @type {typeof globalThis.FormData} */\nexport const FormData = class FormData {\n#d=[];\nconstructor(...a){if(a.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}\nget [t]() {return 'FormData'}\n[i](){return this.entries()}\nstatic [h](o) {return o&&typeof o==='object'&&o[t]==='FormData'&&!m.some(m=>typeof o[m]!='function')}\nappend(...a){x('append',arguments,2);this.#d.push(f(...a))}\ndelete(a){x('delete',arguments,1);a+='';this.#d=this.#d.filter(([b])=>b!==a)}\nget(a){x('get',arguments,1);a+='';for(var b=this.#d,l=b.length,c=0;c<l;c++)if(b[c][0]===a)return b[c][1];return null}\ngetAll(a,b){x('getAll',arguments,1);b=[];a+='';this.#d.forEach(c=>c[0]===a&&b.push(c[1]));return b}\nhas(a){x('has',arguments,1);a+='';return this.#d.some(b=>b[0]===a)}\nforEach(a,b){x('forEach',arguments,1);for(var [c,d]of this)a.call(b,d,c,this)}\nset(...a){x('set',arguments,2);var b=[],c=!0;a=f(...a);this.#d.forEach(d=>{d[0]===a[0]?c&&(c=!b.push(a)):b.push(d)});c&&b.push(a);this.#d=b}\n*entries(){yield*this.#d}\n*keys(){for(var[a]of this)yield a}\n*values(){for(var[,a]of this)yield a}}\n\n/** @param {FormData} F */\nexport function formDataToBlob (F,B=C){\nvar b=`${r()}${r()}`.replace(/\\./g, '').slice(-28).padStart(32, '-'),c=[],p=`--${b}\\r\\nContent-Disposition: form-data; name=\"`\nF.forEach((v,n)=>typeof v=='string'\n?c.push(p+e(n)+`\"\\r\\n\\r\\n${v.replace(/\\r(?!\\n)|(?<!\\r)\\n/g, '\\r\\n')}\\r\\n`)\n:c.push(p+e(n)+`\"; filename=\"${e(v.name, 1)}\"\\r\\nContent-Type: ${v.type||\"application/octet-stream\"}\\r\\n\\r\\n`, v, '\\r\\n'))\nc.push(`--${b}--`)\nreturn new B(c,{type:\"multipart/form-data; boundary=\"+b})}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:https\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:zlib\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:stream\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:buffer\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:util\");","export class FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n","\nimport {FetchBaseError} from './base.js';\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nexport class FetchError extends FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n","/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\n/**\n * isDomainOrSubdomain reports whether sub is a subdomain (or exact match) of\n * the parent domain.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isDomainOrSubdomain = (destination, original) => {\n\tconst orig = new URL(original).hostname;\n\tconst dest = new URL(destination).hostname;\n\n\treturn orig === dest || orig.endsWith(`.${dest}`);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isSameProtocol = (destination, original) => {\n\tconst orig = new URL(original).protocol;\n\tconst dest = new URL(destination).protocol;\n\n\treturn orig === dest;\n};\n","\n/**\n * Body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nimport Stream, {PassThrough} from 'node:stream';\nimport {types, deprecate, promisify} from 'node:util';\nimport {Buffer} from 'node:buffer';\n\nimport Blob from 'fetch-blob';\nimport {FormData, formDataToBlob} from 'formdata-polyfill/esm.min.js';\n\nimport {FetchError} from './errors/fetch-error.js';\nimport {FetchBaseError} from './errors/base.js';\nimport {isBlob, isURLSearchParameters} from './utils/is.js';\n\nconst pipeline = promisify(Stream.pipeline);\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if (isURLSearchParameters(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = Buffer.from(body.toString());\n\t\t} else if (isBlob(body)) {\n\t\t\t// Body is blob\n\t\t} else if (Buffer.isBuffer(body)) {\n\t\t\t// Body is Buffer\n\t\t} else if (types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof Stream) {\n\t\t\t// Body is stream\n\t\t} else if (body instanceof FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = formDataToBlob(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (Buffer.isBuffer(body)) {\n\t\t\tstream = Stream.Readable.from(body);\n\t\t} else if (isBlob(body)) {\n\t\t\tstream = Stream.Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof Stream) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await import('./utils/multipart-parser.js');\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS].body && this[INTERNALS].body.type) || '';\n\t\tconst buf = await this.arrayBuffer();\n\n\t\treturn new Blob([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst text = await this.text();\n\t\treturn JSON.parse(text);\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = deprecate(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true},\n\tdata: {get: deprecate(() => {},\n\t\t'data doesn\\'t exist, use json(), text(), arrayBuffer(), or body instead',\n\t\t'https://github.com/node-fetch/node-fetch/issues/1000 (response)')}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS].disturbed = true;\n\n\tif (data[INTERNALS].error) {\n\t\tthrow data[INTERNALS].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof Stream)) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nexport const clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof Stream) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new PassThrough({highWaterMark});\n\t\tp2 = new PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = deprecate(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nexport const extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif (isURLSearchParameters(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif (isBlob(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (Buffer.isBuffer(body) || types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof Stream) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nexport const getTotalBytes = request => {\n\tconst {body} = request[INTERNALS];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif (isBlob(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {Promise<void>}\n */\nexport const writeToStream = async (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tawait pipeline(body, dest);\n\t}\n};\n","/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\nimport {types} from 'node:util';\nimport http from 'node:http';\n\n/* c8 ignore next 9 */\nconst validateHeaderName = typeof http.validateHeaderName === 'function' ?\n\thttp.validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/* c8 ignore next 9 */\nconst validateHeaderValue = typeof http.validateHeaderValue === 'function' ?\n\thttp.validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nexport default class Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\t\t// No op\n\t\t} else if (typeof init === 'object' && !types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t/* c8 ignore next */\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nexport function fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n","const redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nexport const isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n","/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType} from './body.js';\nimport {isRedirect} from './utils/is-redirect.js';\n\nconst INTERNALS = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Response extends Body {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new Headers(options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS].status >= 200 && this[INTERNALS].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response(clone(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!isRedirect(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS].type = 'error';\n\t\treturn response;\n\t}\n\n\tstatic json(data = undefined, init = {}) {\n\t\tconst body = JSON.stringify(data);\n\n\t\tif (body === undefined) {\n\t\t\tthrow new TypeError('data is not JSON serializable');\n\t\t}\n\n\t\tconst headers = new Headers(init && init.headers);\n\n\t\tif (!headers.has('content-type')) {\n\t\t\theaders.set('content-type', 'application/json');\n\t\t}\n\n\t\treturn new Response(body, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:url\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"node:net\");","import {isIP} from 'node:net';\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy 8.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nexport function stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nexport const ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nexport const DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy 3. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nexport function validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy 3.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = isIP(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (url.host === 'localhost' || url.host.endsWith('.localhost')) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy 3.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing 3.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nexport function determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy 8.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nexport function parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and responses header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in  11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n","/**\n * Request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport {format as formatUrl} from 'node:url';\nimport {deprecate} from 'node:util';\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType, getTotalBytes} from './body.js';\nimport {isAbortSignal} from './utils/is.js';\nimport {getSearch} from './utils/get-search.js';\nimport {\n\tvalidateReferrerPolicy, determineRequestsReferrer, DEFAULT_REFERRER_POLICY\n} from './utils/referrer.js';\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} object\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\nconst doBadDataWarn = deprecate(() => {},\n\t'.data is not a valid RequestInit property, use .body instead',\n\t'https://github.com/node-fetch/node-fetch/issues/1000 (request)');\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nexport default class Request extends Body {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentials.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tif (/^(delete|get|head|options|post|put)$/i.test(method)) {\n\t\t\tmethod = method.toUpperCase();\n\t\t}\n\n\t\tif (!isRequest(init) && 'data' in init) {\n\t\t\tdoBadDataWarn();\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif ((init.body != null || (isRequest(input) && input.body !== null)) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\tclone(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// 5.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// 5.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// 5.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// 5.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// 5.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\t/** @returns {string} */\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\t/** @returns {string} */\n\tget url() {\n\t\treturn formatUrl(this[INTERNALS].parsedURL);\n\t}\n\n\t/** @returns {Headers} */\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\t/** @returns {AbortSignal} */\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = validateReferrerPolicy(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param {Request} request - A Request instance\n * @return The options object to be passed to http.request\n */\nexport const getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new Headers(request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = determineRequestsReferrer(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip, deflate, br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = getSearch(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\t/** @type {URL} */\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n","import {FetchBaseError} from './base.js';\n\n/**\n * AbortError interface for cancelled requests\n */\nexport class AbortError extends FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n","/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport http from 'node:http';\nimport https from 'node:https';\nimport zlib from 'node:zlib';\nimport Stream, {PassThrough, pipeline as pump} from 'node:stream';\nimport {Buffer} from 'node:buffer';\n\nimport dataUriToBuffer from 'data-uri-to-buffer';\n\nimport {writeToStream, clone} from './body.js';\nimport Response from './response.js';\nimport Headers, {fromRawHeaders} from './headers.js';\nimport Request, {getNodeRequestOptions} from './request.js';\nimport {FetchError} from './errors/fetch-error.js';\nimport {AbortError} from './errors/abort-error.js';\nimport {isRedirect} from './utils/is-redirect.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\nimport {isDomainOrSubdomain, isSameProtocol} from './utils/is.js';\nimport {parseReferrerPolicyFromHeader} from './utils/referrer.js';\nimport {\n\tBlob,\n\tFile,\n\tfileFromSync,\n\tfileFrom,\n\tblobFromSync,\n\tblobFrom\n} from 'fetch-blob/from.js';\n\nexport {FormData, Headers, Request, Response, FetchError, AbortError, isRedirect};\nexport {Blob, File, fileFromSync, fileFrom, blobFromSync, blobFrom};\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nexport default async function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new Request(url, options_);\n\t\tconst {parsedURL, options} = getNodeRequestOptions(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = dataUriToBuffer(request.url);\n\t\t\tconst response = new Response(data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? https : http).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL.toString(), options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tif (response && response.body) {\n\t\t\t\tresponse.body.destroy(error);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = fromRawHeaders(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (isRedirect(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL(location, request.url);\n\t\t\t\t} catch {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Nothing to do\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: clone(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// when forwarding sensitive headers like \"Authorization\",\n\t\t\t\t\t\t// \"WWW-Authenticate\", and \"Cookie\" to untrusted targets,\n\t\t\t\t\t\t// headers will be ignored when following a redirect to a domain\n\t\t\t\t\t\t// that is not a subdomain match or exact match of the initial domain.\n\t\t\t\t\t\t// For example, a redirect from \"foo.com\" to either \"foo.com\" or \"sub.foo.com\"\n\t\t\t\t\t\t// will forward the sensitive headers, but a redirect to \"bar.com\" will not.\n\t\t\t\t\t\t// headers will also be ignored when following a redirect to a domain using\n\t\t\t\t\t\t// a different protocol. For example, a redirect from \"https://foo.com\" to \"http://foo.com\"\n\t\t\t\t\t\t// will not forward the sensitive headers\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOptions.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof Stream.Readable) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = pump(response_, new PassThrough(), error => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\t/* c8 ignore next 3 */\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = pump(body, zlib.createGunzip(zlibOptions), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = pump(response_, new PassThrough(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflate(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflateRaw(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.once('end', () => {\n\t\t\t\t\t// Some old IIS servers return zero-length OK deflate responses, so\n\t\t\t\t\t// 'data' is never emitted. See https://github.com/node-fetch/node-fetch/pull/903\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = pump(body, zlib.createBrotliDecompress(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new Response(body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\twriteToStream(request_, request).catch(reject);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tconst onData = buf => {\n\t\t\tproperLastChunkReceived = Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tBuffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tBuffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\t\tsocket.on('data', onData);\n\n\t\trequest.on('close', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t\tsocket.removeListener('data', onData);\n\t\t});\n\t});\n}\n","export const getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n","/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @returns {Buffer} Buffer instance from Data URI\n * @api public\n */\nexport function dataUriToBuffer(uri) {\n    if (!/^data:/i.test(uri)) {\n        throw new TypeError('`uri` does not appear to be a Data URI (must begin with \"data:\")');\n    }\n    // strip newlines\n    uri = uri.replace(/\\r?\\n/g, '');\n    // split the URI up into the \"metadata\" and the \"data\" portions\n    const firstComma = uri.indexOf(',');\n    if (firstComma === -1 || firstComma <= 4) {\n        throw new TypeError('malformed data: URI');\n    }\n    // remove the \"data:\" scheme and parse the metadata\n    const meta = uri.substring(5, firstComma).split(';');\n    let charset = '';\n    let base64 = false;\n    const type = meta[0] || 'text/plain';\n    let typeFull = type;\n    for (let i = 1; i < meta.length; i++) {\n        if (meta[i] === 'base64') {\n            base64 = true;\n        }\n        else {\n            typeFull += `;${meta[i]}`;\n            if (meta[i].indexOf('charset=') === 0) {\n                charset = meta[i].substring(8);\n            }\n        }\n    }\n    // defaults to US-ASCII only if type is not provided\n    if (!meta[0] && !charset.length) {\n        typeFull += ';charset=US-ASCII';\n        charset = 'US-ASCII';\n    }\n    // get the encoded data portion and decode URI-encoded chars\n    const encoding = base64 ? 'base64' : 'ascii';\n    const data = unescape(uri.substring(firstComma + 1));\n    const buffer = Buffer.from(data, encoding);\n    // set `.type` and `.typeFull` properties to MIME type\n    buffer.type = type;\n    buffer.typeFull = typeFull;\n    // set the `.charset` property\n    buffer.charset = charset;\n    return buffer;\n}\nexport default dataUriToBuffer;\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".extension.js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from 'vscode';\nimport * as ui from './common/UI';\nimport { Session } from './common/Session';\nimport { DagTreeView } from './dag/DagTreeView';\nimport { DagTreeItem } from './dag/DagTreeItem';\nimport { AdminTreeView } from './admin/AdminTreeView';\nimport { ReportTreeView } from './report/ReportTreeView';\nimport { AIHandler } from './language_tools/AIHandler';\nimport { Telemetry } from './common/Telemetry';\nimport { version } from 'os';\nimport * as skills from './common/Skills';\n\n\n// this method is called when your extension is activated\n// your extension is activated the very first time the command is executed\nexport function activate(context: vscode.ExtensionContext) {\n\tui.logToOutput('Extension activation started');\n\n\tnew Telemetry(context);\n\tconst properties = {\n\t\textensionVersion: context.extension.packageJSON.version, \n\t\tvscodeVersion: vscode.version, \n\t\tosVersion: version(), \n\t\tplatform: process.platform, \n\t\tappName: vscode.env.appName, \n\t\tappHost: vscode.env.appHost,\n\t\tlanguage: vscode.env.language\n\t};\n\tTelemetry.Current.send('extension.activate.called', properties);\n\n\tnew Session(context);\n\tnew AIHandler();\n\n\tlet dagTreeView:DagTreeView = new DagTreeView();\n\tlet adminTreeView:AdminTreeView = new AdminTreeView();\n\tlet reportTreeView:ReportTreeView = new ReportTreeView();\n\n\t// Register the Admin Tree View\n\tvscode.window.registerTreeDataProvider('adminTreeView', adminTreeView);\n\tui.logToOutput('Admin Tree View registered');\n\n\t// Register the Report Tree View\n\tvscode.window.registerTreeDataProvider('reportTreeView', reportTreeView);\n\tui.logToOutput('Report Tree View registered');\n\n\t// register commands and keep disposables so they are cleaned up on deactivate\n\tconst commands: vscode.Disposable[] = [];\n\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.refreshServer', () => { dagTreeView.refresh(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.addServer', () => { dagTreeView.addServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.removeServer', () => { dagTreeView.removeServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.connectServer', () => { dagTreeView.connectServer(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.clearServers', () => { dagTreeView.clearServers(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.filter', () => { dagTreeView.filter(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showOnlyActive', () => { dagTreeView.showOnlyActive(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showOnlyFavorite', () => { dagTreeView.showOnlyFavorite(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagView', (node: DagTreeItem) => { dagTreeView.viewDagView(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.triggerDag', (node: DagTreeItem) => { dagTreeView.triggerDag(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.triggerDagWithConfig', (node: DagTreeItem) => { dagTreeView.triggerDagWConfig(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.checkDagRunState', (node: DagTreeItem) => { dagTreeView.checkDagRunState(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.checkAllDagsRunState', () => { dagTreeView.checkAllDagsRunState(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.pauseDAG', (node: DagTreeItem) => { dagTreeView.pauseDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.unPauseDAG', (node: DagTreeItem) => { dagTreeView.unPauseDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.cancelDagRun', (node: DagTreeItem) => { dagTreeView.cancelDagRun(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.lastDAGRunLog', (node: DagTreeItem) => { dagTreeView.lastDAGRunLog(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.dagSourceCode', (node: DagTreeItem) => { dagTreeView.dagSourceCode(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showDagInfo', (node: DagTreeItem) => { dagTreeView.showDagInfo(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.addToFavDAG', (node: DagTreeItem) => { dagTreeView.addToFavDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.deleteFromFavDAG', (node: DagTreeItem) => { dagTreeView.deleteFromFavDAG(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.showDagView', (node: DagTreeItem) => { dagTreeView.viewDagView(node); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewConnections', () => { dagTreeView.viewConnections(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewVariables', () => { dagTreeView.viewVariables(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewProviders', () => { dagTreeView.viewProviders(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewConfigs', () => { dagTreeView.viewConfigs(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewPlugins', () => { dagTreeView.viewPlugins(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewServerHealth', () => { dagTreeView.viewServerHealth(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagRuns', () => { dagTreeView.viewDagRuns(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.viewDagRunHistory', () => { dagTreeView.viewDagRunHistory(); }));\n\tcommands.push(vscode.commands.registerCommand('dagTreeView.AskAI', (node: DagTreeItem) => { AIHandler.Current.askAI(node.DagId, node.FileToken); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.installAirflowSkills', () => { skills.InstallSkills(); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.donate', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/sponsors/necatiarslan')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.newFeaturesSurvey', () => { vscode.env.openExternal(vscode.Uri.parse('https://bit.ly/airflow-extension-survey')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.requestFeature', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=feature-request&template=feature_request.md')); }));\n\tcommands.push(vscode.commands.registerCommand('airflow-ext.reportBug', () => { vscode.env.openExternal(vscode.Uri.parse('https://github.com/necatiarslan/airflow-vscode-extension/issues/new?labels=bug&template=bug_report.md')); }));\n\t\n\tfor (const c of commands) { context.subscriptions.push(c); }\n\n\n\tAIHandler.Current.registerChatParticipant();\n\tAIHandler.Current.registerAiTools();\n\n\tTelemetry.Current?.send('extension.activated');\n\tui.logToOutput('Extension activation completed');\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() {\n\tui.logToOutput('Extension is now deactive!');\n}\n"],"names":["installedChunks","defaultConfig","endpointUrl","S","propertyStorageOverride","isVal","getProperty","setProperty","_super","AppInsightsCore","_this","call","this","_self","_base","config","extensions","logger","notificationManager","cfg","e","logger_1","message","track","item","telemetryItem","trackStart","latency","itemExt","ext","sdk","ver","baseData","itemProperties","pluginVersionString","eventName","__ieDyn","STR_EMPTY","STR_DEFAULT_ENDPOINT_URL","STR_VERSION","STR_PROPERTIES","_a","FullVersionString","ObjHasOwnProperty","hasOwnProperty","_fieldTypeEventPropMap","isValueAssigned","value","getTenantId","apiKey","indexTenantId","isLatency","sanitizeProperty","name","property","stringifyObjects","propType","JSON","stringify","kind","toString","getCommonSchemaMetaData","type","encodedTypeValue","isDataType","getFieldValueType","extend","obj","obj2","obj3","obj4","obj5","extended","deep","i","length","arguments","theArgs","prop","arrayValue","arrayIndex","getTime","setProcessTelemetryTimings","event","identifier","evt","theType","objType","isChromium","isGreaterThanZero","_DYN_INITIALIZE","_DYN_INDEX_OF","_DYN_TIMINGS","_DYN_POLL_INTERNAL_LOGS","_DYN_VALUE","_DYN_LENGTH","_DYN_PROCESS_TELEMETRY_ST0","EventsDiscardedReason","Unknown","NonRetryableStatus","InvalidEvent","SizeLimitExceeded","KillSwitch","QueueFull","BeaconSendFailure","RT_PROFILE","STR_DROPPED","STR_REQUEUE","DEFAULT_CACHE_CONTROL","DEFAULT_CONTENT_TYPE","STR_CACHE_CONTROL","STR_CONTENT_TYPE_HEADER","STR_CLIENT_VERSION","STR_CLIENT_ID","STR_TIME_DELTA_TO_APPLY","STR_UPLOAD_TIME","STR_API_KEY","STR_MSA_DEVICE_TICKET","STR_AUTH_WEB_TOKEN","STR_AUTH_XTOKEN","STR_MSFPC","STR_TRACE","STR_USER","_DYN_ALLOW_REQUEST_SENDIN0","_DYN_SHOULD_ADD_CLOCK_SKE1","_DYN_GET_CLOCK_SKEW_HEADE2","_DYN_SET_CLOCK_SKEW","_DYN_CONCAT","_DYN_I_KEY","_DYN_COUNT","_DYN_EVENTS","_DYN_PUSH","_DYN_SPLIT","_DYN_TO_LOWER_CASE","_DYN_HDRS","_DYN_USE_HDRS","_DYN_SET_TIMEOUT_OVERRIDE","_DYN_CLEAR_TIMEOUT_OVERRI3","_DYN_OVERRIDE_ENDPOINT_UR4","_DYN_AVOID_OPTIONS","_DYN_ENABLE_COMPOUND_KEY","_DYN_DISABLE_XHR_SYNC","_DYN_DISABLE_FETCH_KEEP_A6","_DYN_USE_SEND_BEACON","_DYN_FETCH_CREDENTIALS","_DYN_ALWAYS_USE_XHR_OVERR7","_DYN_SERIALIZE_OFFLINE_EV8","_DYN_GET_OFFLINE_REQUEST_9","_DYN_CREATE_PAYLOAD","_DYN_CREATE_ONE_DSPAYLOAD","_DYN_PAYLOAD_BLOB","_DYN_HEADERS","_DYN__THE_PAYLOAD","_DYN_BATCHES","_DYN_SEND_TYPE","_DYN_CAN_SEND_REQUEST","_DYN_SEND_QUEUED_REQUESTS","_DYN_SET_UNLOADING","_DYN_SEND_SYNCHRONOUS_BAT10","_DYN__TRANSPORT","_DYN_GET_WPARAM","_DYN_IS_BEACON","_DYN_IS_TEARDOWN","_DYN__SEND_REASON","_DYN_SET_KILL_SWITCH_TENA11","_DYN__BACK_OFF_TRANSMISSI12","_DYN_IDENTIFIER","_DYN_AUTO_FLUSH_EVENTS_LI14","_DYN_SEND_ATTEMPT","_DYN_LATENCY","_DYN_SYNC","_getEventMsfpc","theEvent","intWeb","_getMsfpc","theEvents","msfpc","lp","EventBatch","iKey","addEvents","events","_msfpc","Msfpc","addEvent","fromEvent","numEvents","cnt","splice","create","ClockSkewManager","_allowRequestSending","_shouldAddClockSkewHeaders","_isFirstRequest","_clockSkewHeaderValue","_clockSkewSet","firstRequestSent","timeDeltaInMillis","_killedTokenDictionary","killTokens","killDuration","killedTokens","values","result","durationMs","parseInt","ex","tenantToken","killDictionary","undefined","retryPolicyGetMillisToBackoffForRetry","retriesSoFar","waitDuration","randomBackoff","Math","random","BaseBackoff","pow","MaxRecordSize","MaxBeaconRecordSize","metadata","f","rCheckDot","Serializer","perfManager","valueSanitizer","enableCompoundKey","getEncodedTypeOverride","excludeCsMetaData","strData","strBaseData","_checkForCompoundkey","_processSubKeys","_theSanitizer","_isReservedCache","_excludeCsMetaData","_getEncodedType","_sizeCfg","requestLimit","_getSizeLimtCfg","_requestSizeLimitBytes","_validateSizeLimit","_beaconRequestSizeLimitBytes","_maxRecordSize","recordLimit","_maxBeaconRecordSize","min","_processPathKeys","srcObj","target","thePath","checkReserved","metadataPathKeys","metadataCallback","processSubKeys","key","srcValue","path","name_1","theMetaPathKeys","destObj","test","subKeys","split","keyLen","slice","subKey","push","isReserved","_isReservedField","handleField","newValue","newPath","createPayload","retryCnt","isTeardown","isSync","isReducedPayload","sendReason","sendType","apiKeys","payloadBlob","overflow","sizeExceed","failedEvts","batches","isBeacon","appendPayload","payload","theBatch","maxEventsPerBatch","canAddEvents","payloadEvents","eventsAdded","sizeExceeded","isBeaconPayload","requestMaxSize","recordMaxSize","joinCount","eventBlob","getEventBlob","blobLength","evts","max","eventData","serializedEvent","time","_addMetadataCallback","serializedExt","pathKeys","getEncodedType","json","propKeys","propertyValue","propertyType","metaData","metaTarget","newTarget","t","_addJSONPropertyMetaData","eventExt","serializedData","baseType","serializedBaseData","data","cfgVal","defaultVal","idx","val","createTimeoutWrapper","argSetTimeout","argClearTimeout","set","callback","ms","args","_i","strSendAttempt","UrlQueryString","_eventActionMap","_collectorQsHeaders","_collectorHeaderToQs","_addCollectorHeaderQsMapping","qsName","headerName","allowQs","_hasHeader","headers","header","hasHeader","keys","lowerHeader","_addRequestDetails","details","useHeaders","url","HttpManager","maxConnections","maxRequestRetriesBeforeBackoff","actions","_urlString","_killSwitch","_paused","_clockSkewManager","_outstandingRequests","_postManager","_logger","_sendInterfaces","_core","_customHttpInterface","_queryStringParameters","_headers","_batchQueue","_serializer","_enableEventTimings","_cookieMgr","_isUnloading","_useHeaders","_xhrTimeout","_zipPayload","_disableXhrSync","_disableFetchKeepAlive","_canHaveReducedPayload","_addNoResponse","_unloadHooks","_sendHook","_sendListener","_responseHandlers","_isInitialized","_timeoutWrapper","_sendPostMgr","_fetchCredentials","_useBeacons","_maxEvtPerBatch","_getSenderInterface","transports","syncSupport","getSenderInst","_getSendPostMgrConfig","enableSendPromise","isOneDs","disableCredentials","fetchCredentials","disableXhr","disableBeacon","disableBeaconSync","disableFetchKeepAlive","timeWrapper","addNoResponse","senderOnCompleteCallBack","xdrOnComplete","_xdrOncomplete","fetchOnComplete","_fetchOnComplete","xhrOnComplete","_xhrOnComplete","beaconOnRetry","_onBeaconRetry","xdr","oncomplete","response","_doOnComplete","_handleCollectorResponse","onComplete","resValue","headerMap","status","responseText","handleResponse","request","canSend","thePayload","theUrl","urlString","nav_1","persistStorage","getPlugin","droppedBatches_1","sentBatches_1","sendBeacon","sentEvts","_sendBatchesNotification","_isBeaconPayload","_adjustSendType","_hasIdleConnection","_clearQueue","theQueue","_canSendPayload","theBatches","_createDebugBatches","_sendBatches","retryCount","orgBatches_1","isSynchronous_1","perfEvt","droppedBatches","serializationStart","sendInterface","sendTransport","_isSync","shift","isTenantKilled","_doPayloadSend","isSynchronous","useSendBeacon","_buildRequestDetails","requestDetails","hdrs","useHdrs","apiQsKeys","encodeURIComponent","wParam","_setTimingValue","timings","serializationCompleted","useSendHook_1","sendInterface_1","useHeaders_1","requestDetails_1","sendEventStart_1","batchLp","evtLp","orgPayloadData","_thePayload","_sendReason","timeout","disableXhrSync","sender","httpStatusCode","reason","isRetrying","backOffTrans","shouldRetry","killToken","removedEvents","retryCount_1","_doAction","batchReason","_clearBackOff","sendEventCompleted_1","sendEventCompleted","_addEventCompletedTimings","_addCompleteTimings","sendQueuedRequests","_handleRequestFinished","_retryRequestIfNeeded","preparePayload","processedPayload","sendPOST","hookData_1","senderCalled_1","cb","interval","responseHandlers","parse","webResult","sendSync","theAction_1","action","isSyncRequest_1","undefValue","_initDefaults","theConfig","core","postChannel","getCookieMgr","diagLog","coreConfig","channelConfig","extensionConfig","anonCookieName","qsParams","_addQueryStringParameter","_removeQueryStringParameter","payloadListener","httpInterface","httpXHROverride","maxEvtCfg","maxEvtPerBatch","xhrTimeout","csStream","sendPostConfig","SetConfig","SenderPostManager","syncHttpInterface","beaconHttpInterface","fetchSyncHttpInterface","beaconUnloadTransports","theTransports","unloadTransports","addResponseHandler","responseHandler","rm","index","indexOf","optimize","theBatches_1","batch","payloadData","addHeader","removeHeader","isCompletelyIdle","addBatch","teardown","hook","pause","resume","MaxEventsLimitInMem","strEventsDiscarded","defaultPostChannelConfig","eventsLimitInMem","v","immediateEventLimit","autoFlushEventsLimit","disableAutoBatchFlushLimit","overrideInstrumentationKey","overrideEndpointUrl","disableTelemetry","ignoreMc1Ms0CookieProcessing","setTimeoutOverride","clearTimeoutOverride","payloadPreprocessor","disableEventTimings","disableOptimizeObj","avoidOptions","alwaysUseXhrOverride","maxEventRetryAttempts","maxUnloadEventRetryAttempts","PostChannel","_postConfig","priority","version","_flushCallbackTimer","_immediateQueueSizeLimit","_queueSizeLimit","_scheduledTimer","_immediateTimer","_currentBackoffCount","_timerCount","_httpManager","_batchQueues","_autoFlushEventsLimit","_autoFlushBatchLimit","_delayedBatchSendLatency","_delayedBatchReason","_optimizeObject","_isPageUnloadTriggered","_maxEventSendAttempts","_maxUnloadEventSendAttempts","_evtNamespace","_ignoreMc1Ms0CookieProcessing","_disableAutoBatchFlushLimit","_notificationManager","_unloadHandlersAdded","_overrideInstrumentationKey","_disableTelemetry","_isTeardownCalled","_flushCallbackQueue","_immediateQueueSize","_queueSize","_profiles","_currentProfile","_removeUnloadHandlers","_batch","arr","rlt","_serialize","_cleanEvent","_handleUnloadEvents","_releaseAllQueues","_handleShowEvents","_addEventToQueues","append","evtLatency","queueSize","queueLimit","eventDropped","_addEventToProperQueue","dropLatency","dropNumber","currentLatency","eventBatch","_getEventBatch","droppedEvents","droppedCount","_notifyBatchEvents","_resetQueueCounts","_dropEventWithLatencyOrLess","_notifyEvents","_sendEventsForLatencyAndAbove","queued","_queueBatches","_hasEvents","_scheduleTimer","immediateTimeOut","_createTimer","timeOut","requeue","_requeueEvents","send","_sendingEvent","sent","_eventsSentEvent","drop","_eventsDropped","rspFail","_eventsResponseFail","oth","_otherEvent","_initializeProfiles","iKeyMap","_setAutoLimits","theTimerFunc","timerMultiplier","_clearScheduledTimer","cancel","batchQueue","_performAutoFlush","isAsync","doFlush","flush","sync","immediateQueue","normalQueue","_loop_1","eventsQueued","latencyToProcess","_flushImpl","_waitForIdleManager","maxSendAttempts","_callNotification","evtName","manager","notifyFunc","apply","extraArgs","isSyncRequest","getNotifyMgr","evtNamespace","_addHook","ctx","getExtCfg","existingGetWParamMethod","wparam","_hookWParam","excludePageUnloadEvents","disablePageUnloadEvents","disablePageShowEvents","setInitialized","processTelemetry","ev","itemCtx","_getTelCtx","processNext","getOfflineSupport","details_1","getUrl","serialize","shouldProcess","createOneDSPayload","_doTeardown","unloadCtx","unloadState","setEventQueueLimits","eventLimit","autoFlushLimit","_loadTransmitProfiles","profiles","profileName","profileValue","profLen","directValue","resolve","cleared","setMsaAuthTicket","ticket","setAuthPluginHeader","token","removeAuthPluginHeader","hasEvents","_setTransmitProfile","BaseTelemetryPlugin","BreezeChannelIdentifier","_stringToBoolOrDefault","theValue","defaultValue","cfgDfMerge","mrg","cfgDfValidate","validator","fallBackName","fb","cfgDfBoolean","_isConfigDefaults","_getDefault","dynamicHandler","cfgDefaults","defValue","isDefaultValid","dfVal","fallbacks","fallback","fbValue","_resolveDefaultValue","newValue_1","_applyDefaultValue","isValid","setFn","mergeDf","reference","readOnly","blkDynamicValue","rdOnly","blkVal","ref","usingDefault","cfgValue","dfName","dfValue","CFG_HANDLER_LINK","BLOCK_DYNAMIC","FORCE_DYNAMIC","_cfgDeepCopy","source","target_1","_canMakeDynamic","getFunc","state","throwInvalidAccess","aggregationErrorType","arrayMethodsToPatch","_throwDynamicError","desc","concat","_getOwnPropGetter","propDesc","get","_setDynamicProperty","getter","detail","n","h","trk","handler","fn","clr","checkDynamic","isObjectOrArray","_getProperty","_makeDynamicObject","activeHandler","act","chng","add","g","s","ro","upd","isReferenced","rf","hdlr","valueState","newIsObjectOrArray","_createDynamicProperty","_setDynamicPropertyState","flags","isDynamic","inPlace","blkProp","blockDynamicConversion","method","orgMethod","_patchArray","symPrefix","symPostfix","_createDynamicHandler","getDynamicConfigHandler","theState","uid","cfgHandler","notify","setDf","defaultValues","watch","configHandler","use","_createAndUseHandler","_block","allowUpdate","prevUpd","c","w","dynamicPropertySymbol","dynamicPropertyReadOnly","dynamicPropertyReferenced","dynamicPropertyBlockValue","dynamicPropertyDetail","_waitingHandlers","_watcherTimer","_useHandler","prevWatcher","bind","_notifyWatchers","notifyHandlers","watcherFailures_1","sourceErrors","self","errors","theMessage","srcError","throwAggregationError","_createState","createDynamicConfig","onConfigChange","_logInvalidAccess","createEnumStyle","createValueMap","ActiveStatus","NONE","PENDING","INACTIVE","ACTIVE","_b","_doc","strToGMTString","strToUTCString","strCookie","strExpires","strIsCookieUseDisabled","strDisableCookiesUsage","strConfigCookieMgr","_supportsCookies","_allowUaSameSite","_parsedCookieValue","_cookieCache","_globalCookieConfig","rootDefaultConfig","cookieCfg","enabled","ignoreCookies","blockedCookies","disableCookieDefer","cookieDomain","cookiePath","_getDoc","_isMgrEnabled","cookieMgr","isEnabled","_isIgnoredCookie","cookieMgrCfg","_isBlockedCookie","_isCfgEnabled","rootConfig","cookieMgrConfig","isCfgEnabled","cookieEnabled","createCookieMgr","_path","_domain","unloadHandler","_enabled","_getCookieFn","_setCookieFn","_delCookieFn","_pendingCookies","_formatDeletionValue","_formatCookieValue","_removePendingCookie","wasEnabled","getCookie","_getCookieValue","setCookie","_setCookieValue","delCookie","areCookiesSupported","pendingData","o","gblManager","setEnabled","maxAgeSec","domain","cookieValue","_extractParts","_isIE","expireMs","expiry","Date","setTime","_formatDate","userAgent","location","protocol","_formatSetCookieValue","del","purge","unload","doc","exception","parts","thePart","theDate","func","theCookie","perfEvtsSendAll","_runScheduledListeners","asyncNotifications","callbacks","arg","_runListeners","listeners","listener","NotificationManager","_listeners","_asyncNotifications","perfEvent","rn_1","waiting","_finishUnload","asyncUnload","TelemetryInitializerPlugin","_id","_initializers","addTelemetryInitializer","telemetryInitializer","id","theInitializer","remove","initializer","_addInitializer","doNotSendItem","telemetryInitializersCount","_runInitializers","strValidationError","strSdkUnloadingError","loggingLevelConsole","diagnosticLogInterval","_createPerfManager","notificationMgr","PerfManager","_isPluginPresent","thePlugin","plugins","exists","plugin","_deepMergeConfig","newValues","merge","_findWatcher","newWatcher","theListener","l","_configHandler","_eventQueue","_perfManager","_cfgPerfManager","_cookieManager","_pluginChain","_configExtensions","_channelConfig","_channels","_telemetryInitializerPlugin","_internalLogsEventName","_unloadHandlers","_hookContainer","_debugListener","_traceCtx","_instrumentationKey","_cfgListeners","_extensions","_pluginVersionStringArr","_pluginVersionString","_activeStatus","_endpoint","_initInMemoMaxSize","_isStatusSet","_initTimer","_internalLogPoller","_internalLogPollerListening","_forceStopInternalLogPoller","_setStatus","_releaseQueues","releaseQueue","pollInternalLogs","_startLogPoller","alwaysStart","queue","_addUnloadHook","isRunning","_flushInternalLogs","unref","_setPluginVersions","thePlugins","_addPluginVersions","channels","updateCfg","join","DiagnosticLogger","newLogger","cfgExtensions","_createTelCtx","theCtx","_getPluginChain","_initPluginChain","updateState","theExtensions","channelPriority","allExtensions","coreExtensions","extPriorities","extPriority","_validateExtensions","rootCtx","_doUpdate","_getPlugin","pluginIdentifier","theExt","channelHosts","getChannel","host","pluginState","removeCb","pluginsToRemove","_removePlugins","removed","removeComplete","unloadChain","newConfigExtensions","newChannelConfig","newQueue","channel","logMessage","dataType","_flushChannels","callBack","cbTimeout","doneIterating","cbTimer","doCallback","iterate","handled_1","updateCtx","_updateHook","_logOrThrowError","_notifyInvalidEvent","hooks","activeStatus","_setPendingStatus","prevCfgPerfMgr","rootCfg","initInMemoMaxSize","ikey","instrumentationKey","msg","promises","initTimeout","initTimeOut","allPromises","rejected","ikeyRes","endpointRes","_waitForInitPromises","_handleIKeyEndpointPromises","extCfg","unloadContainer","debugListener","disableDbgExt","_initDebugListener","enablePerfMgr","createPerfMgr","teeController","unloadHdl","_registerDelayedCfgListener","getChannels","controls","setCookieMgr","setPerfMgr","perfMgr","eventCnt","eventQueue","unloadComplete","flushComplete","processUnloadCtx","_doUnload","run","addPlugin","replaceExisting","addCb","existingPlugin","_addPlugin","added","removedPlugins_1","newConfig","mergeExisting","oldCfg","getTraceCtx","createNew","setTraceCtx","traceCtx","addUnloadHook","onCfgChange","unloadHook","fnd","_createUnloadHook","getWParam","enableWParam","runTargetUnload","doUnloadAll","targets","done","resolved","strGetPlugin","_isinitialized","_rootCtx","_nextPlugin","_unloadHandlerContainer","currentCtx","_setDefaults","pluginChain","nextPlugin","unloadDone","theUnloadCtx","theUnloadState","_unloadCallback","updateDone","theUpdateCtx","theUpdateState","_updateCallback","getCfg","isInitialized","next","env","ChannelControllerPriority","DisabledPropertyName","UInt32Mask","MaxUInt32","SEED1","SEED2","_mwcSeeded","_mwcW","_mwcZ","_autoSeedMwc","now","seedValue","random32","signed","getRandomValues","Uint32Array","mwcRandom32","instanceName","maxLength","number","chars","charAt","newId","_dataUid","_canAcceptData","nodeType","createUniqueNamespace","includeVersion","createElmNodeData","accept","addDefault","theCache","_getCache","kill","listenerFuncs","_aiNamespace","_listenerProxyFunc","dbgExt","getDebugExt","ns","getDebugListener","STR_WARN_TO_CONSOLE","loggingLevelTelemetry","maxMessageLimit","enableDebug","_logFuncs","_sanitizeDiagnosticText","text","_logToConsole","theConsole","logFunc","_InternalLogMessage","msgId","isUserAct","properties","strProps","diagnosticText","safeGetLogger","_loggingLevelConsole","_loggingLevelTelemetry","_maxInternalMessageLimit","_enableDebug","_unloadHandler","_messageCount","_messageLogged","_logInternalMessage","severity","messageKey","_debugExtMsg","throttleLimitMessage","throttleMessage","errorToConsole","_setDefaultsFromConfig","consoleLoggingLevel","debugToConsole","resetInternalMessageCount","logInternalMessage","_getLogger","_throwInternal","_warnToConsole","strJSON","strMsie","strTrident","strXMLHttpRequest","_isTrident","_navUserAgentCheck","_useXDomainRequest","_beaconsSupported","_hasProperty","theClass","supported","proto","tmp","getLocation","checkForMock","getConsole","console","hasJSON","Boolean","getJSON","getCrypto","getMsCrypto","isReactNative","nav","product","isIE","getIEVersion","userAgentStr","navigator_1","ua","tridentVer","isBeaconsSupported","useCached","isFetchSupported","withKeepAlive","isSupported","useXDomainRequest","XDomainRequest","isXhrSupported","fieldRedaction","input","redactUrls","hasCredentials","hasQueryParams","replace","sensitiveParams","questionMarkIndex","redactQueryParams","baseUrl","queryString","fragment","hashIndex","hasPotentialSensitiveParam","paramCheck","resultParts","anyParamRedacted","pairs","pair","equalsIndex","paramName","shouldRedact","j","redactQueryParameters","strAttachEvent","strAddEventHelper","strDetachEvent","strRemoveEventListener","strEvents","strVisibilityChangeEvt","strPageHide","strPageShow","strUnload","strBeforeUnload","strPageHideNamespace","strPageShowNamespace","rRemoveEmptyNs","rRemoveTrailingEmptyNs","_guid","elmNodeData","eventNamespace","_normalizeNamespace","_getEvtNamespace","theNamespace_1","parsedEvent","exec","sort","_getRegisteredEvents","aiEvts","registeredEvents","_doDetach","handlerRef","useCapture","_doUnregister","unRegFn","capture","mergeEvtNamespace","theNamespace","namespaces","eventOn","_doAttach","registeredEvent","guid","eventOff","evtName_1","found_1","eventCache","evtType","_unregisterEvents","regEvent","_addEventListeners","excludeEvents","addEventHandler","removeEventListeners","removeEventHandler","addPageUnloadEventListener","addEventListeners","removePageUnloadEventListener","addPageHideEventListener","newNamespaces","pageUnloadAdded","visibilityState","removePageHideEventListener","addPageShowEventListener","pageShowAdded","removePageShowEventListener","rCamelCase","rNormalizeInvalid","rLeadingNumeric","isNotNullOrUndefined","normalizeJsName","_all","letter","toUpperCase","match","strContains","search","toISOString","date","getExceptionName","object","setValue","field","valChk","srcChk","getSetValue","proxyFunctionAs","theFunc","overwriteTarget","funcName","srcFunc","src","originalArguments","_createProxyFunction","proxyFunctions","functionsToProxy","theFuncName","createClassFromInterface","defaults","optimizeObject","theObject","objExtend","obj1","obj6","argLen","isArgArray","isArgObj","isNewArray","clone","isFeatureEnabled","feature","sdkDefaultState","ft","featureOptIn","mode","getResponseText","xhr","formatErrorMessageXdr","formatErrorMessageXhr","prependTransports","newTransports","Object","strWithCredentials","openXhr","withCredentials","disabled","_wrapSetXhrProp","XMLHttpRequest","open","_appendHeader","theHeaders","getResponseHeader","_getAllResponseHeaders","headersString","headersArray","headerEntry","substring","convertAllHeadersToMap","UNDEFINED_VALUE","STR_CHANNELS","STR_CORE","STR_CREATE_PERF_MGR","STR_DISABLED","STR_EXTENSION_CONFIG","STR_EXTENSIONS","STR_PROCESS_TELEMETRY","STR_PRIORITY","STR_EVENTS_SENT","STR_EVENTS_DISCARDED","STR_EVENTS_SEND_REQUEST","STR_PERF_EVENT","STR_OFFLINE_STORE","STR_OFFLINE_SENT","STR_OFFLINE_DROP","STR_GET_PERF_MGR","STR_DOMAIN","STR_PATH","STR_NOT_DYNAMIC_ERROR","STR_REDACTED","DEFAULT_SENSITIVE_PARAMS","strExecutionContextKey","strParentContextKey","strChildrenContextKey","PerfEvent","payloadDetails","theDetails_1","start","complete","childTime","childEvts","childEvt","exTime","ParentContextKey","ChildrenContextKey","fire","doPerfActiveKey","doPerf","mgrSource","getSource","currentActive","children","getGblPerfMgr","strHasRunFlags","strGetTelCtx","_chainId","_createInternalContext","telemetryChain","startAt","_nextProxy","_onComplete","proxy","createTelemetryProxyChain","_getNextProxyStart","context","_next","nextProxy","completeDetails","_getExtCfg","getConfig","extConfig","hasNext","getNext","setNext","that","createIfMissing","idCfg","createProcessTelemetryContext","internalContext","createProcessTelemetryUnloadContext","createProcessTelemetryUpdateContext","firstProxy","lastProxy_1","newProxy","chainId","hasProcessTelemetry","hasSetNext","proxyChain","_processChain","hasRun","pluginCore","update","_setNext","processPluginFn","hasRunContext","nextId","error","hasNextRun","createTelemetryPluginProxy","_noResponseQs","STR_POST_METHOD","_enableSendPromise","_diagLog","_isOneDs","_onCompleteFuncs","_disableCredentials","_fallbackInst","_disableXhr","_disableBeacon","_disableBeaconSync","_syncFetchPayload","_sendCredentials","_onError","_onNoPayloadUrl","_doBeaconSend","plainTextBatch","Blob","_beaconSender","onRetry","_xhrSender","thePromise","resolveFunc","rejectFunc","reject","endPointUrl","_doOnReadyFunc","onReadyFunc","setRequestHeader","onreadystatechange","readyState","onload","onerror","ontimeout","_doFetchSender","requestHeaders","Headers","batchLength","ignoreResponse","responseHandled","init","body","credentials","keepalive","Request","_handleError","res","statusCode","_onFetchComplete","onCompleteFunc","fetch","response_1","ok","resp","statusText","_xdrSender","_window","onloadFunc","onprogress","hostingProtocol","endpoint","lastIndexOf","location_1","getSyncFetchPayload","transportType","sendPostFunc","_transport","getFallbackInst","zipPayload","reader_1","ReadableStream","controller","enqueue","TextEncoder","encode","close","pipeThrough","getReader","chunks_1","totalLength_1","callbackCalled_1","read","processChunk","combined","Uint8Array","offset","chunks_2","chunk","_chunkCount","_isValid","len","invalidValue","pluginStateData","_getPluginState","initializePlugins","processContext","initPlugins","lastPlugin","sortPlugins","extA","extB","bHasProcess","createDistributedTraceContext","parentCtx","trace","getName","setName","getTraceId","traceId","setTraceId","getSpanId","spanId","setSpanId","getTraceFlags","setTraceFlags","newTraceFlags","createUnloadHandlerContainer","handlers","createUnloadHookContainer","_hooks","oldHooks","_DYN_WARN_TO_CONSOLE","_DYN_THROW_INTERNAL","_DYN_WATCH","_DYN_APPLY","_DYN_SPLICE","_DYN_LOGGER","_DYN_CANCEL","_DYN_REMOVE_NOTIFICATION_0","_DYN_ADD_NOTIFICATION_LIS1","_DYN_IS_INITIALIZED","_DYN_GET_NOTIFY_MGR","_DYN_GET_PLUGIN","_DYN_NAME","_DYN_PROCESS_NEXT","_DYN_GET_PROCESS_TEL_CONT2","_DYN_ENABLED","_DYN_STOP_POLLING_INTERNA3","_DYN_UNLOAD","_DYN_ON_COMPLETE","_DYN_VERSION","_DYN_LOGGING_LEVEL_CONSOL4","_DYN_CREATE_NEW","_DYN_TEARDOWN","_DYN_MESSAGE_ID","_DYN_MESSAGE","_DYN_DIAG_LOG","_DYN__DO_TEARDOWN","_DYN_UPDATE","_DYN_GET_NEXT","_DYN_SET_NEXT_PLUGIN","_DYN_USER_AGENT","_DYN_REPLACE","_DYN_SUBSTRING","_DYN_TYPE","_DYN_EVT_NAME","_DYN_STATUS","_DYN_GET_ALL_RESPONSE_HEA5","_DYN_IS_CHILD_EVT","_DYN_DATA","_DYN_GET_CTX","_DYN_SET_CTX","_DYN_ITEMS_RECEIVED","_DYN_URL_STRING","_DYN_TIMEOUT","_DYN_TRACE_FLAGS","strShimFunction","strShimObject","strShimUndefined","strShimPrototype","ObjClass","ObjProto","strHasOwnProperty","__assignFn","p","extendStaticsFn","d","b","__proto__","Array","__extendsFn","__","constructor","String","__spreadArrayFn","to","from","il","SampleRate","ProcessLegacy","HttpMethod","DEFAULT_BREEZE_ENDPOINT","DEFAULT_BREEZE_PATH","strNotSpecified","_DYN_INGESTIONENDPOINT","_DYN_TO_STRING","_DYN_REMOVE_ITEM","_DYN_STRINGIFY","_DYN_PATHNAME","_DYN_MATCH","_DYN_PROPERTIES","_DYN_MEASUREMENTS","_DYN_SIZE_IN_BYTES","_DYN_TYPE_NAME","_DYN_EXCEPTIONS","_DYN_SEVERITY_LEVEL","_DYN_PROBLEM_GROUP","_DYN_PARSED_STACK","_DYN_HAS_FULL_STACK","_DYN_ASSEMBLY","_DYN_FILE_NAME","_DYN_LINE","_DYN_AI_DATA_CONTRACT","_DYN_DURATION","dataSanitizeKeyAndAddUniqueness","map","origLength","nameTrunc","dataSanitizeKey","uniqueField","dsPadNumber","dataSanitizeString","valueTrunc","dataSanitizeUrl","dataSanitizeInput","dataSanitizeMessage","messageTrunc","dataSanitizeProperties","tempProps_1","dataSanitizeMeasurements","measurements","tempMeasurements_1","measure","_msgId","inputTrunc","num","Event","aiDataContract","envelopeType","Trace","severityLevel","msToTimeSpan","totalms","isNaN","sec","hour","days","PageView","duration","dataSanitizeId","PageViewPerformance","unused","cs4BaseData","perfTotal","networkConnect","sentRequest","receivedResponse","domProcessing","IS_FRAME","PARSE_FILENAME_LINE_COL","PARSE_FILENAME_LINE_ONLY","NoMethod","strError","strStack","strStackDetails","strErrorSrc","strMessage","strDescription","_parseSequence","re","m","ln","col","chk","frame","pre","hdl","_handleFilename","_stringify","convertToString","_formatMessage","errorType","evtMessage","_isStackDetails","_convertStackObj","errorStack","items","_getStackFromErrorObj","errorObj","errorMessage","stack","lines","entry","_getOperaStack","_getErrorType","typeName","results","_formatErrorCode","Exception","exceptions","_isExceptionInternal","isManual","_createExceptionDetails","CreateAutoException","lineNumber","columnNumber","errorSrc","stackDetails","CreateFromInterface","parsedStack","_populateFrameSizeInBytes","stackFrameAiDataContract","level","assembly","fileName","line","sizeInBytes","_stackFrameFromInterface","_createExDetailsFromInterface","prototype","toInterface","problemGroup","CreateSimpleException","formatError","exDetailsAiDataContract","outerId","hasFullStack","_toInterface","_parsedFrameToInterface","theStack","_isExceptionDetailsInternal","frames","level_1","foundStackStart_1","totalSizeInBytes_1","trimmedFrame","_isStackFrame","theFrame","parsedFrame","sequence","matches","_parseFilename","_extractStackFrame","left","right","size","acceptedLeft","acceptedRight","howMany","_parseStack","exceptionTrunc","dataSanitizeException","_formatStackTrace","lineCol","lineNo","filename","DataPoint","count","stdDev","Metric","metrics","dataPoint","_document","_htmlAnchorIdx","_htmlAnchorElement","urlParseHost","inclPort","fullHost","port","urlParseFullHost","_internalEndpoints","isInternalApplicationInsightsEndpoint","RemoteDependencyData","absoluteUrl","commandName","success","resultCode","requestAPI","correlationContext","dependencyKind","dependencySource","dependencyTypeName","dependencyFields","anchorIdx","anchorCache","tempAnchor","parsedUrl","createElement","href","pathName","pathname","AjaxHelperParseDependencyPath","_disableEvents","StorageType","LocalStorage","SessionStorage","_canUseSessionStorage","_storagePrefix","_getVerifiedStorageObject","storageType","storage","setItem","fail","getItem","_getSessionStorageObject","utlCanUseSessionStorage","reset","utlGetSessionStorage","utlSetSessionStorage","requestContextHeader","requestContextTargetKey","requestContextAppIdFormat","requestIdHeader","traceParentHeader","traceStateHeader","sdkContextHeader","sdkContextHeaderAppIdRequest","requestContextHeaderLowerCase","parseResponse","itemsAccepted","itemsReceived","_aiNameFunc","baseName","aiName","_aiApplication","_aiDevice","_aiLocation","_aiOperation","_aiSession","_aiUser","_aiCloud","_aiInternal","ContextTagKeys","applicationVersion","applicationBuild","applicationTypeId","applicationId","applicationLayer","deviceId","deviceIp","deviceLanguage","deviceLocale","deviceModel","deviceFriendlyName","deviceNetwork","deviceNetworkName","deviceOEMName","deviceOS","deviceOSVersion","deviceRoleInstance","deviceRoleName","deviceScreenResolution","deviceType","deviceMachineName","deviceVMName","deviceBrowser","deviceBrowserVersion","locationIp","locationCountry","locationProvince","locationCity","operationId","operationName","operationParentId","operationRootId","operationSyntheticSource","operationCorrelationVector","sessionId","sessionIsFirst","sessionIsNew","userAccountAcquisitionDate","userAccountId","userId","userStoreRegion","userAuthUserId","userAnonymousUserAcquisitionDate","userAuthenticatedUserAcquisitionDate","cloudName","cloudRole","cloudRoleVer","cloudRoleInstance","cloudEnvironment","cloudLocation","cloudDeploymentUnit","internalNodeName","internalSdkVersion","internalAgentVersion","internalSnippet","internalSdkSrc","CtxTagKeys","Envelope","sampleRate","tags","Data","STR_DURATION","_DYN_TAGS","_DYN_DEVICE_TYPE","_DYN_TRACE_ID","_DYN_DATA_TYPE","_DYN_ENVELOPE_TYPE","_DYN_ENQUEUE","_DYN_EMIT_LINE_DELIMITED_0","_DYN_CLEAR","_DYN_MARK_AS_SENT","_DYN_CLEAR_SENT","_DYN_BUFFER_OVERRIDE","_DYN__BUFFER__KEY","_DYN__SENT__BUFFER__KEY","_DYN__MAX__BUFFER__SIZE","_DYN_TRIGGER_SEND","_DYN__SENDER","_DYN_ENDPOINT_URL","_DYN_INSTRUMENTATION_KEY","_DYN_CUSTOM_HEADERS","_DYN_MAX_BATCH_SIZE_IN_BY1","_DYN_ONUNLOAD_DISABLE_BEA2","_DYN_IS_BEACON_API_DISABL3","_DYN_ALWAYS_USE_XHR_OVERR4","_DYN_ENABLE_SESSION_STORA5","_DYN__BUFFER","_DYN_ONUNLOAD_DISABLE_FET6","_DYN_DISABLE_SEND_BEACON_7","_DYN_GET_SENDER_INST","_DYN__ON_ERROR","_DYN__ON_PARTIAL_SUCCESS","_DYN__ON_SUCCESS","_DYN_ITEMS_ACCEPTED","_DYN_BASE_TYPE","_DYN_SAMPLE_RATE","strBaseType","strProperties","strTrue","_setValueIf","_extractPropsAndMeasurements","_convertPropsUndefinedToCustomDefinedValue","customUndefinedValue","_createEnvelope","envelope","startTime","iKeyNoDashes","envTags","itmExt","itmTags","extUser","user","authId","localId","extApp","app","sesId","extDevice","device","deviceClass","ip","model","web","browserLang","browserVer","browser","envData","envBaseData","envProps","screenRes","userConsent","extOs","os","osVer","extTrace","parentID","tgs","tg","theTags","EnvelopeCreator","Version","_extractPartAExtensions","EnvelopeCreatorInit","EventEnvelopeCreator","customProperties","customMeasurements","BaseSendBuffer","_buffer","_bufferFullMessageSent","_maxRetryCnt","maxRetryCnt","_get","_set","buffer","getItems","batchPayloads","payloads","payloadStr_1","canUseSessionStorage","newBuffer","SessionStorageSendBuffer","ArraySendBuffer","PREVIOUS_KEYS","_namePrefix","namePrefix","bufferItems","_getBuffer","itemsInSentBuffer","previousItems","_getItemsFromPreviousKey","prefixEvents","_getPreviousEvents","notDeliveredItems","_removePayloadsFromBuffer","remaining","payloadStr","_getBufferBase","bufferJson","buffer_1","_setBuffer","prefixedKey","transFormedItems_1","internalItem","utlRemoveSessionStorage","sentElements","unsentItems","sentItems","VERSION","BUFFER_KEY","SENT_BUFFER_KEY","MAX_BUFFER_SIZE","_serializeObject","circularReferenceCheck","output","_serializeStringMap","_serializeArray","contract","isRequired","isHidden","isArray","isPresent","isObj","sources","expectedType","parseFloat","HashCodeScoreGenerator","getHashCodeScore","getHashCode","INT_MAX_VALUE","hash","charCodeAt","abs","SamplingScoreGenerator","hashCodeGenerator","getSamplingScore","telemetryTrace","Sample","throwInternal","samplingRate","samplingScoreGenerator","isSampledIn","samplingPercentage","_getResponseText","defaultAppInsightsChannelConfig","maxBatchInterval","isRetryDisabled","convertUndefined","retryCodes","corsPolicy","CrossOriginResourcePolicyHeader","EnvelopeTypeCreator","props","currentContextId","bd","uri","refUri","pageType","isLoggedIn","pageTags","pageViewData","exData","baseMetricData","average","sampleCount","remoteDepData","responseCode","Sender","_consecutiveErrors","_retryAt","_timeoutHandle","_stamp_specific_redirects","_syncUnloadSender","_offlineListener","_endpointUrl","_orgEndpointUrl","_maxBatchSizeInBytes","_beaconSupported","_beaconOnUnloadSupported","_beaconNormalSupported","_customHeaders","_convertUndefined","_isRetryDisabled","_maxBatchInterval","_sessionStorageUsed","_bufferOverrideUsed","_alwaysUseCustomSend","_fetchKeepAlive","_xhrSend","_fallbackSend","_disableBeaconSplit","_retryCodes","_xdrOnLoad","_xhrReadyStateChange","countOfItemsInPayload","_checkResponsStatus","responseURL","_getPayloadArr","oriPayload","_validate","diagLogger","_sample","_getEnvelope","defaultEnvelopeIkey","aiEnvelope","constructEnvelope","valid","_createPayload","_getHeaders","_doSend","markAsSent","_onSuccess","_getOnComplete","_getPayload","result_2","resolveFn_1","rejectFn_1","callbackExecuted_1","_checkMaxSize","incomingPayload","incomingSize","isOnline","responseUrl","_appId","appId","_checkAndUpdateEndPointUrl","_resendPayload","_isRetriable","_doUnloadSend","_isStringArr","_fetchKeepAliveSender","transport","payloadSize","linearFactor","payload_1","delayInSeconds","backOffSlot","backOffDelay","retryAfterTimeSpan","_setRetryTime","_setupTimer","retryInterval","timerValue","result_1","rsp","onunloadFlush","parentEvtNamespace","_navigator","_isListening","listenerList","rState","onLine","uState","_currentState","calCurrentState","_enableEvents","ononline","_setOnline","_setOffline","listnerNoticeCheck","newState","offlineState","isListening","win","addListener","setOnlineState","createOfflineListener","storagePrefix","senderConfig","curExtUrl","coreUrl","customHeader","bufferOverride","shouldUpdate","disableValidation","disableInstrumentationKeyValidation","RegExp","_validateInstrumentationKey","payloadArr","droppedPayload","customInterface","syncInterface","xhrInterface","syncTransports","filter","payloadItem","getOfflineListener","forcedSender","sendRequest","_getNotifyMgr","eventsSendRequest","_notifySendRequest","ieVer","failed","retry","errors_1","reverse","extracted","_onPartialSuccess","orig","parseConnectionString","connectionString","kvPairs","fields","kv","kvParts","endpointsuffix","locationPrefix","_DYN_CONNECTION_STRING","_DYN_USER_OVERRIDE_ENDPOI0","defaultConfigValues","ApplicationInsights","_config","_track","_initialize","configCs","ikeyPromise","curCs","instrumentationkey","urlPromise","ingest","ingestionendpoint","cs","initialize","Constructor","Prototype","strFunction","DynInstFuncTable","DynProxyTag","DynClassName","DynInstChkTag","DynAllowInstChkTag","DynProtoDefaultOptions","UnknownValue","str__Proto","DynProtoBaseProto","DynProtoGlobalSettings","DynProtoCurrent","strUseBaseInst","strSetInstFuncs","Obj","_objGetPrototypeOf","_objGetOwnProps","_gbl","_gblInst","_isObjectOrArrayPrototype","_isObjectArrayOrFunctionPrototype","Function","_getObjProto","newProto","curProto","_forEachProp","_isDynamicCandidate","skipOwn","_throwTypeError","_hasVisited","_populatePrototype","className","baseInstFuncs","setInstanceFunc","instFuncTable","instFuncs_1","dynProtoProxy","instFunc","currentDynProtoProxy","canAddInst","objProto","visited","protoFunc","_getInstFunc","_getProtoFunc","_createDynamicPrototype","_getObjName","unknownValue","dynamicProto","delegateFunc","options","classProto","thisTarget","thisProto","_checkPrototype","perfOptions","useBaseInst","instFuncs","_getInstanceFuncs","baseFuncs","_instFuncProxy","funcHost","baseProto","_getBaseFuncs","STR_PROMISE","REJECTED","doAwaitResponse","doAwait","resolveFn","rejectFn","finallyFn","then","err","finally","doFinally","_hasInitEvent","STRING_STATES","DISPATCH_EVENT","_hasInitEventFn","createEvent","initEvent","_hasPromiseRejectionEvent","_promiseCls","_allSyncSettledCreator","_promiseCreator","NODE_UNHANDLED_REJECTION","UNHANDLED_REJECTION","toLowerCase","_currentPromiseId","_uniquePromiseId","dumpFnObj","_createPromise","newPromise","processor","executor","_settledValue","_thePromise","additionalArgs","_state","_hasResolved","_queue","_handled","_unHandledRejectionHandler","_then","onResolved","onRejected","_processQueue","pop","_strState","pending","_createSettleIfFn","allowState","_notifyUnhandledRejection","process","emit","gbl","populateEvent","useNewEvent","theEvt","emitEvent","onFinally","thenFinally","catchFinally","_rejectFn","_createAllPromise","values_1","pending_1","syncItemProcessor","createAsyncPromise","callbackTimeout","timeoutItemProcessor","createNativePromise","PrmCls","createSyncPromise","createSyncAllSettledPromise","processItem","createPromise","createAllPromise","_pureAssign","func1","func2","_pureRef","_primitiveTypes","UNDEF_VALUE","NULL_VALUE","FUNCTION","OBJECT","PROTOTYPE","__PROTO__","UNDEFINED","CONSTRUCTOR","SYMBOL","LENGTH","NAME","CALL","TO_STRING","GET_OWN_PROPERTY_DESCRIPTOR","StrCls","StrProto","MathCls","ArrCls","ArrProto","ArrSlice","POLYFILL_TAG","POLYFILL_TYPE_NAME","safe","argArray","_createIs","_createObjIs","theName","objToString","isUndefined","isNullOrUndefined","isStrictNullOrUndefined","isDefined","isString","isFunction","isObject","isDate","isNumber","isBoolean","isError","isPromiseLike","isTruthy","_returnNothing","_returnFalse","asString","dumpObj","format","propertyValueDump","throwError","Error","throwTypeError","TypeError","_throwIfNullOrUndefined","_throwIfNotString","objHasOwnProperty","_objGetOwnPropertyDescriptor$2","objHasOwn","polyObjHasOwn","objForEachKey","callbackfn","thisArg","arrForEach","theArray","_unwrapFunction","_unwrapFunctionWithPoly","clsProto","polyFunc","clsFn","_unwrapProp","propName","_objGetOwnPropertyDescriptor$1","propMap","objDefineProp","objDefineProperties","objDefine","_createProp","_createKeyValueMap","keyType","valueType","completeFn","writable","theMap","_assignMapValue","enumerable","objIsFrozen","_objFreeze","_doNothing","_getProto","objAssign","objKeys","_deepFreeze","_key","propValue","objFreeze","objDeepFreeze","objGetPrototypeOf","createEnum","createEnumKeyMap","createTypeMap","mapClass","createSimpleMap","_globalCfg","_wellKnownSymbolMap","asyncIterator","hasInstance","isConcatSpreadable","iterator","matchAll","species","toPrimitive","toStringTag","unscopables","GLOBAL_CONFIG_KEY","_getGlobalValue","globalThis","window","global","_getGlobalConfig","mathMin","mathMax","strSlice","strSubstring","strSubstr","polyStrSubstr","strLeft","_globalLazyTestHooks","objCreate","polyObjCreate","newObj","tempFunc","utcNow","polyUtcNow","fnApply","_initTestHooks","getLazy","lazyValue","lzy","configurable","_polySymbols","_wellKnownSymbolCache","mathRandom","_uniqueInstanceId","UNIQUE_REGISTRY_ID","_polyId","polyNewSymbol","description","uniqueId","symString","_setProp","theSymbol","polyfillTypeName","polySymbolFor","registry","gblCfg","gblSym","k","_globalSymbolRegistry","newSymbol_1","regId_1","createCachedValue","toJSON","_cachedGlobal","WINDOW","_getGlobalInstFn","getFn","cachedValue","getGlobal","getInst","hasDocument","getDocument","hasWindow","getWindow","hasNavigator","getNavigator","_symbol","_symbolFor","_iterSymbol$1","isNode","versions","node","_initSymbol","_getSymbolKey","hasSymbol","getSymbol","getKnownSymbol","noPoly","knownName","sym","polyGetKnownSymbol","newSymbol","symbolFor","isIterator","isIterable","iterForOf","iter","iterResult","throw","return","arrAppend","elms","elm","arrIndexOf","arrMap","arrSlice","end","_isProtoArray","arrReduce","objSetPrototypeOf","_polyObjSetPrototypeOf","_setName","baseClass","createCustomError","constructCb","errorBase","theBaseClass","orgName","captureFn","captureStackTrace","_createCustomError","orgProto","_createTrimFn","exp","_fnToString","_objCtrFnString","_gblWindow","strTrim","mathFloor","mathCeil","isPlainObject","_defaultDeepCopyHandler","plainObjDeepCopyHandler","defaultDeepCopyHandlers","copyTo","_deepCopy","visitMap","userHandler","newCtx","isPlain","isPrim","isPrimitiveType","origin","copy","newKey","_copyProps","theEntry","newEntry","_getSetVisited","deepExtend","theArg","objCopyProps","_doExtend","_perf","getLength","perfNow","perf","mathRound","objGetOwnPropertyDescriptor","strEndsWith","polyStrEndsWith","searchString","searchValue","strIndexOf","strStartsWith","polyStrStartsWith","position","pos","REF","UNREF","HAS_REF","_createTimeoutWith","startTimer","overrideFn","isArr","timeoutFn","_setTimeoutFn","globalOverrides","tmOut","setTimeout","_resolveTimeoutFn","clearFn","_clearTimeoutFn","clearTimeout","_resolveClearTimeoutFn","timerFn","dn","refreshFn","cancelFn","theTimerHandler","timerId","_unref","_cancel","_refresh","refresh","_createTimerHandler","scheduleTimeout","scheduleTimeoutWith","createTimeout","require","InstantiationStatus","TelemetryUtil","applyReplacements","replacementOptions","option","lookup","replacementString","shouldUseOneDataSystemSDK","getAdditionalCommonProperties","osShim","platform","architecture","release","getInstance","_instance","BaseTelemetryReporter","telemetrySender","vscodeAPI","initializationOptions","userOptIn","errorOptIn","disposables","_onDidChangeTelemetryLevel","EventEmitter","onDidChangeTelemetryLevel","telemetryLogger","createTelemetryLogger","updateUserOptIn","onDidChangeEnableStates","isErrorsEnabled","isUsageEnabled","instantiateSender","telemetryLevel","internalSendTelemetryEvent","dangerous","sendEventData","logUsage","sendTelemetryEvent","sendRawTelemetryEvent","modifiedProperties","propertyKey","TelemetryTrustedValue","sendDangerousTelemetryEvent","internalSendTelemetryErrorEvent","logError","sendTelemetryErrorEvent","sendDangerousTelemetryErrorEvent","dispose","Promise","all","BaseTelemetrySender","clientFactory","_instantiationStatus","NOT_INSTANTIATED","_exceptionQueue","_clientFactory","_telemetryClient","logEvent","INSTANTIATED","sendErrorData","errorData","errorProperties","_flushQueues","forEach","INSTANTIATING","client","catch","TelemetryReporter","customFetcher","xhrOverride","fetcher","dataString","Buffer","async","responseHeaders","byteLength","req","on","responseData","write","machineId","appInsightsClient","basicAISDK","startsWith","authConfig","disableAjaxTracking","disableExceptionTracking","disableFetchTracking","disableCorrelationHeaders","disableCookiesUsage","autoTrackPageVisitTime","emitLineDelimitedJson","appInsightsClientFactory","appInsightsCore","oneDs","postPlugin","collectorChannelPlugin","internalTesting","workspace","getConfiguration","getAICore","completedFlush","oneDataSystemClientFactory","initializationOpts","additionalCommonProperties","super","freeGlobal","module","exports","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","base64","a","padding","bitStorage","bitCounter","fromCharCode","DOMException","MessageChannel","port1","ab","ArrayBuffer","postMessage","fs","crypto","_c","constants","TEMPLATE_PATTERN","CREATE_FLAGS","O_CREAT","O_EXCL","O_RDWR","IS_WIN32","EBADF","errno","ENOENT","_removeObjects","FN_RMDIR_SYNC","rmdirSync","_gracefulCleanup","rimraf","dirPath","recursive","FN_RIMRAF_SYNC","rmSync","tmpName","_parseArguments","opts","realpath","tmpdir","_getTmpDir","tmpDir","_assertOptionsBase","_getRelativePath","dir","_isUndefined","template","_assertAndSanitizeOptions","sanitizedOptions","tries","_getUniqueName","_generateTmpName","stat","tmpNameSync","_getTmpDirSync","_getRelativePathSync","_assertAndSanitizeOptionsSync","statSync","_removeFileAsync","fdPath","_handler","_isENOENT","unlink","_removeFileSync","rethrownException","closeSync","_isExpectedError","unlinkSync","_prepareTmpFileRemoveCallback","fd","removeCallbackSync","_prepareRemoveCallback","removeCallback","keep","unshift","_prepareTmpDirRemoveCallback","removeFunction","unsafeCleanup","rmdir","fileOrDirName","cleanupCallbackSync","called","_cleanupCallback","toRemove","_randomChars","rnd","randomBytes","pseudoRandomBytes","RANDOM_CHARS","actualOptions","getOwnPropertyNames","prefix","pid","postfix","isAbsolute","basename","detachDescriptor","discardDescriptor","pathToResolve","dirname","parentDir","_resolvePath","resolvedPath","relativePath","relative","realpathSync","_err","_resolvePathSync","code","defineProperty","mkdir","dirSync","mkdirSync","file","possibleErr","discardOrDetachDescriptor","fileSync","openSync","setGracefulCleanup","AdminTreeItem","vscode","TreeItem","label","collapsibleState","command","iconPath","_onDidChangeTreeData","onDidChangeTreeData","Telemetry","Current","getTreeItem","element","getChildren","TreeItemCollapsibleState","None","title","ThemeIcon","ConfigsView","panel","_disposables","ui","logToOutput","_panel","onDidDispose","_setWebviewMessageListener","webview","loadData","Session","Api","isSuccessful","configJson","renderHtml","html","_getWebviewContent","ExtensionUri","render","reveal","ViewColumn","One","createWebviewPanel","enableScripts","disposable","extensionUri","elementsUri","getUri","mainUri","styleUri","tableRows","sections","section","sectionName","_escapeHtml","onDidReceiveMessage","ConnectionsView","getConnections","connectionsJson","toolkitUri","connections","conn","connId","conn_id","connType","conn_type","schema","PluginsView","getPlugins","pluginsJson","executors","macros","ProvidersView","getProviders","providersJson","providers","provider","packageName","package_name","ServerHealthView","getHealth","healthJson","metadatabase","_getHealthEmoji","scheduler","latestHeartbeat","toISODateTimeString","latest_scheduler_heartbeat","triggerer","latest_triggerer_heartbeat","dag_processor","latest_dag_processor_heartbeat","Server","apiUrl","statusLower","VariablesView","getVariables","variablesJson","variables","variable","default","includes","getJwtToken","jwtToken","username","apiUserName","password","apiPassword","getHeaders","showWarningMessage","checkConnection","getDagList","MethodResult","allDags","showApiErrorMessage","showErrorMessage","triggerDag","dagId","conf","logical_date","getDagRun","dagRunId","getLastDagRun","history","getDagRunHistory","dag_runs","dag_run_id","startDate","endDate","pauseDag","isPaused","is_paused","getSourceCode","fileToken","content","getImportErrors","getTaskInstanceLog","taskId","tryNumber","logRes","logJson","getTaskInstanceLogText","taskInstancesResult","getTaskInstances","taskInstance","task_instances","find","ti","task_id","try_number","logJsonResult","logText","logContent","getLastDagRunLogText","getDagRunLogText","logTextResult","getDagInfo","genericGet","getDagTasks","cancelDagRun","getTaskXComs","updateDagRunNote","note","DagView","goToDagRun","DagTreeView","notifyDagStateWithDagId","loadDagInfoOnly","notifyDagPaused","notifyDagUnPaused","ServerList","Context","LoadState","SaveState","globalState","apiUrlTemp","apiUserNameTemp","apiPasswordTemp","AirflowApi","SetServer","server","ChangeServer","RemoveServer","AddServer","some","TestServer","serverConfig","ClearServers","GetServer","GetWorkspaceFolders","workspaceFolders","GetWorkspaceFolder","folders","HasWorkspaceFolder","terminal","createTerminal","show","sendText","CleanupSkillsExistsCache","_skillsExists","skillsFolderUri","Uri","joinPath","existsSync","fsPath","reporter","isTelemetryEnabled","subscriptions","sendError","errorOrProps","pathList","asWebviewUri","popupMessage","outputChannel","createOutputChannel","clear","appendLine","showInfoMessage","jsonResult","preText","extVersion","readFileSync","__dirname","encoding","openTextDocument","showTextDocument","viewColumn","preview","convertMsToTime","valueOf","jsonString","dateString","dNum","logsOutputChannel","toLocaleString","showInformationMessage","padTo2Digits","padStart","milliseconds","seconds","floor","minutes","hours","dagTreeItemList","visibleDagList","loadDagTreeItemsFromApiResponse","dagList","dag","treeItem","DagTreeItem","getVisibleDagList","FilterString","doesFilterMatch","ShowOnlyActive","IsPaused","ShowOnlyFavorite","IsFav","apiResponse","dag_id","LatestDagRunId","LatestDagState","_IsFav","IsFiltered","ApiResponse","DagId","IsActive","is_active","Owners","owners","Tags","FileToken","file_token","FavoriteDags","setContextValue","refreshUI","isDagRunning","contextValue","ThemeColor","filterString","words","word","trim","treeDataProvider","DagTreeDataProvider","view","createTreeView","showCollapseAll","loadState","setFilterMessage","dagStatusInterval","clearInterval","withProgress","ProgressLocation","Window","progress","report","increment","loadDags","viewDagView","addToFavDAG","deleteFromFavDAG","createAndOpenTempFile","extension","tmpFile","appendFileSync","openFile","startDagStatusInterval","setInterval","refreshRunningDagState","handleTriggerSuccess","responseTrigger","MessageHub","DagTriggered","dagTreeView","noDagIsRunning","triggerDagWConfig","triggerDagConfig","showInputBox","placeHolder","checkAllDagsRunState","checkDagRunState","dagState","pauseDAG","DagPaused","unPauseDAG","DagUnPaused","DagRunCancelled","lastDAGRunLog","DagLogView","dagSourceCode","showDagInfo","filterStringTemp","saveState","showOnlyActive","showOnlyFavorite","addServer","userNameTemp","passwordTemp","newServer","removeServer","selected","showQuickPick","canPickMany","selectedItems","connectServer","clearServers","setViewTitle","loadLatestRunStatusForAllDags","visibleDags","dagItem","runResult","total_entries","showOutputMessage","getBoolenSign","ShowOnlyActiveTemp","ShowOnlyFavoriteTemp","FavoriteDagsTemp","viewConnections","viewVariables","viewProviders","viewConfigs","viewPlugins","viewDagRuns","DailyDagRunView","viewDagRunHistory","DagRunView","viewServerHealth","dagHistorySelectedDate","toISODateString","activetabid","loadAllDagData","resetDagData","dagJson","dagRunJson","dagRunHistoryJson","dagTaskInstancesJson","dagTasksJson","stopCheckingDagRunStatus","getLastRun","renderHmtl","Two","startCheckingDagRunStatus","goToDag","getRunHistory","start_date","end_date","logical_date_string","start_date_string","hasDagRun","getDuration","runningOrFailedTasks","schedule","next_run","isPausedText","taskRows","operator","taskDependencyTree","tasks","buildTaskDependencyTree","runHistoryRows","showDAGRunLog","getRunHistoryAndRenderHtml","showSourceCode","askAI","showTaskInstanceLog","xcomTaskId","showTaskXComs","getTasksAndRenderHtml","activeid","newNote","prompt","logs","AIHandler","askAIWithContext","dagRun","taskInstances","isJsonString","isValidDate","dagView","resultTasks","taskMap","Map","task","rootTasks","upstream_task_ids","Set","treeHtml","buildTree","has","itemHtml","downstreamIds","downstream_task_ids","downstreamId","rootTask","aIHandler","stream","aiContext","askAIContext","tools","inputSchema","required","timeRangeHours","dagIdFilter","messages","LanguageModelChatMessage","User","recentHistory","turn","ChatRequestTurn","ChatResponseTurn","responseContent","part","ChatResponseMarkdownPart","Assistant","currentDagId","usedAppreciated","models","lm","selectChatModels","vendor","family","modelId","markdown","keepGoing","isCancellationRequested","chatResponse","toolCalls","LanguageModelToolCallPart","toolCall","toolName","toolInput","resultText","invokeTool","LanguageModelTextPart","LanguageModelToolResultPart","callId","skills","AreSkillsInstalled","vscodeMarkdownLink","MarkdownString","isTrusted","enabledCommands","isChatCommandAvailable","commands","getCommands","latestDagLogs","sourceResult","logResult","appName","commandId","executeCommand","query","registerChatParticipant","participant","chat","createChatParticipant","registerAiTools","airflowClient","AirflowClientAdapter","triggerDagRunTool","registerTool","TriggerDagRunTool","getFailedRunsTool","GetFailedRunsTool","listActiveDagsTool","ListActiveDagsTool","listPausedDagsTool","ListPausedDagsTool","getRunningDagsTool","GetRunningDagsTool","pauseDagTool","PauseDagTool","unpauseDagTool","UnpauseDagTool","getDagRunsTool","GetDagRunsTool","cancelDagRunTool","CancelDagRunTool","analyseDagLatestRunTool","AnalyseDagLatestRunTool","getDagHistoryTool","GetDagHistoryTool","getDagRunDetailTool","GetDagRunDetailTool","getTodayTool","GetTodayTool","getDagSourceCodeTool","GetDagSourceCodeTool","goToDagViewTool","GoToDagViewTool","goToDagLogViewTool","GoToDagLogViewTool","goToDagRunHistoryTool","GoToDagRunHistoryTool","goToProvidersViewTool","GoToProvidersViewTool","goToConnectionsViewTool","GoToConnectionsViewTool","goToVariablesViewTool","GoToVariablesViewTool","goToConfigsViewTool","GoToConfigsViewTool","goToPluginsViewTool","GoToPluginsViewTool","goToServerHealthViewTool","GoToServerHealthViewTool","triggerDagRun","run_id","execution_date","queryFailedRuns","failedRuns","filterFailedRuns","dagListResult","resultData","runPromises","dags","runs","getDags","getRunningDags","runningDags","latestRun","getLatestDagRun","latest_run_state","latest_run_id","getTaskLog","dagRuns","cutoffTime","setHours","getHours","failedStates","error_message","extractErrorMessage","getDagSource","getDagSourceCode","dagInfoResult","prepareInvocation","invocationMessage","invoke","LanguageModelToolResult","taskLogs","tasksToLog","aFailed","bFailed","log","buildAnalysisReport","getStatusEmoji","durationSec","tasksByState","entries","round","taskLog","runInfo","confirmationMessage","appendMarkdown","confirmationMessages","queryDate","summaryMessage","runDate","deriveDagRunState","getEarliestStartDate","getLatestEndDate","every","startDates","earliest","endDates","latest","targetDate","endTime","statusEmoji","sourceCode","timeRange","dagFilter","noFailuresMessage","stateEmoji","today","formattedDate","dayOfWeek","toLocaleDateString","weekday","year","month","day","successMessage","dateRegex","validStatuses","filters","finalConfig","configSource","filePath","warn","appendCodeblock","retainContextWhenHidden","lastRunResult","tasksResult","taskInstancesJson","_getTasks","tryNum","fetchLogForTask","targetTryNumber","taskSections","logData","contentHtml","statusClass","displayTry","ts","timestamp","lvl","extra","error_detail","lineClass","selectedDagId","selectedStartDate","selectedEndDate","selectedStatus","allDagIds","dagsResult","startDateTime","endDateTime","dagRunsJson","runTime","filteredRuns","_getStatusEmoji","selectedDate","allRuns","dagIdOptions","ReportTreeItem","factory","SymbolPolyfill","Symbol","noop","globals","typeIsObject","x","rethrowAssertionErrorRejection","originalPromise","originalPromiseThen","originalPromiseResolve","originalPromiseReject","promiseResolvedWith","promiseRejectedWith","PerformPromiseThen","promise","onFulfilled","uponPromise","uponFulfillment","uponRejection","transformPromiseWith","fulfillmentHandler","rejectionHandler","setPromiseIsHandledToTrue","queueMicrotask","globalQueueMicrotask","resolvedPromise","reflectCall","F","V","promiseCall","SimpleQueue","_cursor","_size","_front","_elements","_back","oldBack","newBack","QUEUE_MAX_ARRAY_SIZE","oldFront","newFront","oldCursor","newCursor","elements","peek","front","cursor","ReadableStreamReaderGenericInitialize","reader","_ownerReadableStream","_reader","defaultReaderClosedPromiseInitialize","defaultReaderClosedPromiseResolve","defaultReaderClosedPromiseInitializeAsResolved","defaultReaderClosedPromiseInitializeAsRejected","_storedError","ReadableStreamReaderGenericCancel","ReadableStreamCancel","ReadableStreamReaderGenericRelease","defaultReaderClosedPromiseReject","defaultReaderClosedPromiseResetToRejected","readerLockException","_closedPromise","_closedPromise_resolve","_closedPromise_reject","AbortSteps","ErrorSteps","CancelSteps","PullSteps","NumberIsFinite","Number","isFinite","MathTrunc","trunc","ceil","assertDictionary","assertFunction","assertObject","assertRequiredArgument","assertRequiredField","convertUnrestrictedDouble","censorNegativeZero","convertUnsignedLongLongWithEnforceRange","upperBound","MAX_SAFE_INTEGER","integerPart","assertReadableStream","IsReadableStream","AcquireReadableStreamDefaultReader","ReadableStreamDefaultReader","ReadableStreamAddReadRequest","readRequest","_readRequests","ReadableStreamFulfillReadRequest","_closeSteps","_chunkSteps","ReadableStreamGetNumReadRequests","ReadableStreamHasDefaultReader","IsReadableStreamDefaultReader","IsReadableStreamLocked","closed","defaultReaderBrandCheckException","resolvePromise","rejectPromise","ReadableStreamDefaultReaderRead","_errorSteps","releaseLock","_disturbed","_readableStreamController","defineProperties","AsyncIteratorPrototype","getPrototypeOf","ReadableStreamAsyncIteratorImpl","preventCancel","_ongoingPromise","_isFinished","_preventCancel","nextSteps","_nextSteps","returnSteps","_returnSteps","ReadableStreamAsyncIteratorPrototype","IsReadableStreamAsyncIterator","_asyncIteratorImpl","streamAsyncIteratorBrandCheckException","setPrototypeOf","NumberIsNaN","CreateArrayFromList","CopyDataBlockBytes","dest","destOffset","srcOffset","ArrayBufferSlice","begin","CloneAsUint8Array","O","byteOffset","DequeueValue","container","_queueTotalSize","EnqueueValueWithSize","Infinity","RangeError","ResetQueue","ReadableStreamBYOBRequest","IsReadableStreamBYOBRequest","byobRequestBrandCheckException","_view","respond","bytesWritten","_associatedReadableByteStreamController","ReadableByteStreamControllerRespond","respondWithNewView","isView","ReadableByteStreamControllerRespondWithNewView","ReadableByteStreamController","byobRequest","IsReadableByteStreamController","byteStreamControllerBrandCheckException","ReadableByteStreamControllerGetBYOBRequest","desiredSize","ReadableByteStreamControllerGetDesiredSize","_closeRequested","_controlledReadableByteStream","ReadableByteStreamControllerClose","ReadableByteStreamControllerEnqueue","ReadableByteStreamControllerError","ReadableByteStreamControllerClearPendingPullIntos","_cancelAlgorithm","ReadableByteStreamControllerClearAlgorithms","ReadableByteStreamControllerHandleQueueDrain","autoAllocateChunkSize","_autoAllocateChunkSize","bufferE","pullIntoDescriptor","bufferByteLength","bytesFilled","elementSize","viewConstructor","readerType","_pendingPullIntos","ReadableByteStreamControllerCallPullIfNeeded","shouldPull","_started","ReadableStreamHasBYOBReader","ReadableStreamGetNumReadIntoRequests","ReadableByteStreamControllerShouldCallPull","_pulling","_pullAgain","_pullAlgorithm","ReadableByteStreamControllerInvalidateBYOBRequest","ReadableByteStreamControllerCommitPullIntoDescriptor","filledView","ReadableByteStreamControllerConvertPullIntoDescriptor","readIntoRequest","_readIntoRequests","ReadableStreamFulfillReadIntoRequest","ReadableByteStreamControllerEnqueueChunkToQueue","ReadableByteStreamControllerFillPullIntoDescriptorFromQueue","currentAlignedBytes","maxBytesToCopy","maxBytesFilled","maxAlignedBytes","totalBytesToCopyRemaining","ready","headOfQueue","bytesToCopy","destStart","ReadableByteStreamControllerFillHeadPullIntoDescriptor","ReadableStreamClose","_byobRequest","ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue","ReadableByteStreamControllerShiftPendingPullInto","ReadableByteStreamControllerRespondInternal","firstDescriptor","ReadableByteStreamControllerRespondInClosedState","remainderSize","remainder","ReadableByteStreamControllerRespondInReadableState","transferredBuffer","firstPendingPullInto","ReadableStreamError","SetUpReadableStreamBYOBRequest","_strategyHWM","viewByteLength","SetUpReadableByteStreamController","startAlgorithm","pullAlgorithm","cancelAlgorithm","highWaterMark","r","AcquireReadableStreamBYOBReader","ReadableStreamBYOBReader","ReadableStreamAddReadIntoRequest","IsReadableStreamBYOBReader","byobReaderBrandCheckException","ReadableStreamBYOBReaderRead","DataView","BYTES_PER_ELEMENT","ctor","emptyView","ReadableByteStreamControllerPullInto","ExtractHighWaterMark","strategy","defaultHWM","ExtractSizeAlgorithm","convertQueuingStrategy","convertQueuingStrategySize","convertUnderlyingSinkAbortCallback","original","convertUnderlyingSinkCloseCallback","convertUnderlyingSinkStartCallback","convertUnderlyingSinkWriteCallback","assertWritableStream","IsWritableStream","supportsAbortController","AbortController","WritableStream","rawUnderlyingSink","rawStrategy","underlyingSink","abort","convertUnderlyingSink","InitializeWritableStream","sizeAlgorithm","WritableStreamDefaultController","writeAlgorithm","closeAlgorithm","abortAlgorithm","SetUpWritableStreamDefaultController","SetUpWritableStreamDefaultControllerFromUnderlyingSink","locked","streamBrandCheckException$2","IsWritableStreamLocked","WritableStreamAbort","WritableStreamCloseQueuedOrInFlight","WritableStreamClose","getWriter","AcquireWritableStreamDefaultWriter","WritableStreamDefaultWriter","_writer","_writableStreamController","_writeRequests","_inFlightWriteRequest","_closeRequest","_inFlightCloseRequest","_pendingAbortRequest","_backpressure","_abortReason","_abortController","_promise","wasAlreadyErroring","_resolve","_reject","_reason","_wasAlreadyErroring","WritableStreamStartErroring","closeRequest","writer","defaultWriterReadyPromiseResolve","closeSentinel","WritableStreamDefaultControllerAdvanceQueueIfNeeded","WritableStreamDealWithRejection","WritableStreamFinishErroring","WritableStreamDefaultWriterEnsureReadyPromiseRejected","WritableStreamHasOperationMarkedInFlight","storedError","writeRequest","WritableStreamRejectCloseAndClosedPromiseIfNeeded","abortRequest","defaultWriterClosedPromiseReject","WritableStreamUpdateBackpressure","backpressure","defaultWriterReadyPromiseInitialize","defaultWriterReadyPromiseReset","_ownerWritableStream","defaultWriterReadyPromiseInitializeAsResolved","defaultWriterClosedPromiseInitialize","defaultWriterReadyPromiseInitializeAsRejected","defaultWriterClosedPromiseResolve","defaultWriterClosedPromiseInitializeAsRejected","IsWritableStreamDefaultWriter","defaultWriterBrandCheckException","defaultWriterLockException","WritableStreamDefaultControllerGetDesiredSize","WritableStreamDefaultWriterGetDesiredSize","_readyPromise","WritableStreamDefaultWriterAbort","WritableStreamDefaultWriterClose","WritableStreamDefaultWriterRelease","WritableStreamDefaultWriterWrite","_readyPromiseState","defaultWriterReadyPromiseReject","defaultWriterReadyPromiseResetToRejected","releasedError","_closedPromiseState","defaultWriterClosedPromiseResetToRejected","WritableStreamDefaultWriterEnsureClosedPromiseRejected","chunkSize","_strategySizeAlgorithm","chunkSizeE","WritableStreamDefaultControllerErrorIfNeeded","WritableStreamDefaultControllerGetChunkSize","WritableStreamAddWriteRequest","enqueueE","_controlledWritableStream","WritableStreamDefaultControllerGetBackpressure","WritableStreamDefaultControllerWrite","abortReason","IsWritableStreamDefaultController","defaultControllerBrandCheckException$2","signal","WritableStreamDefaultControllerError","_abortAlgorithm","WritableStreamDefaultControllerClearAlgorithms","createAbortController","_writeAlgorithm","_closeAlgorithm","WritableStreamMarkCloseRequestInFlight","sinkClosePromise","WritableStreamFinishInFlightClose","WritableStreamFinishInFlightCloseWithError","WritableStreamDefaultControllerProcessClose","WritableStreamMarkFirstWriteRequestInFlight","WritableStreamFinishInFlightWrite","WritableStreamFinishInFlightWriteWithError","WritableStreamDefaultControllerProcessWrite","_readyPromise_resolve","_readyPromise_reject","NativeDOMException","DOMException$1","isDOMExceptionConstructor","createDOMExceptionPolyfill","ReadableStreamPipeTo","preventClose","preventAbort","shuttingDown","currentWrite","shutdownWithAction","aborted","addEventListener","isOrBecomesErrored","shutdown","WritableStreamDefaultWriterCloseWithErrorPropagation","destClosed","waitForWritesToFinish","oldCurrentWrite","originalIsError","originalError","doTheRest","finalize","newError","removeEventListener","resolveLoop","rejectLoop","resolveRead","rejectRead","ReadableStreamDefaultController","IsReadableStreamDefaultController","defaultControllerBrandCheckException$1","ReadableStreamDefaultControllerGetDesiredSize","ReadableStreamDefaultControllerCanCloseOrEnqueue","ReadableStreamDefaultControllerClose","ReadableStreamDefaultControllerEnqueue","ReadableStreamDefaultControllerError","ReadableStreamDefaultControllerClearAlgorithms","_controlledReadableStream","ReadableStreamDefaultControllerCallPullIfNeeded","ReadableStreamDefaultControllerShouldCallPull","SetUpReadableStreamDefaultController","convertUnderlyingSourceCancelCallback","convertUnderlyingSourcePullCallback","convertUnderlyingSourceStartCallback","convertReadableStreamType","convertReadableStreamReaderMode","convertPipeOptions","isAbortSignal","assertAbortSignal","rawUnderlyingSource","underlyingSource","pull","convertUnderlyingDefaultOrByteSource","InitializeReadableStream","underlyingByteSource","SetUpReadableByteStreamControllerFromUnderlyingSource","SetUpReadableStreamDefaultControllerFromUnderlyingSource","streamBrandCheckException$1","rawOptions","convertReaderOptions","rawTransform","transform","readable","convertReadableWritablePair","pipeTo","destination","tee","reason1","reason2","branch1","branch2","resolveCancelPromise","reading","readAgainForBranch1","readAgainForBranch2","canceled1","canceled2","cancelPromise","forwardReaderError","thisReader","pullWithDefaultReader","chunk1","chunk2","cloneE","pull1Algorithm","pull2Algorithm","pullWithBYOBReader","forBranch2","byobBranch","otherBranch","byobCanceled","clonedChunk","otherCanceled","CreateReadableByteStream","compositeReason","cancelResult","ReadableByteStreamTee","readAgain","CreateReadableStream","ReadableStreamDefaultTee","impl","AcquireReadableStreamAsyncIterator","convertIteratorOptions","convertQueuingStrategyInit","byteLengthSizeFunction","ByteLengthQueuingStrategy","_byteLengthQueuingStrategyHighWaterMark","IsByteLengthQueuingStrategy","byteLengthBrandCheckException","countSizeFunction","CountQueuingStrategy","_countQueuingStrategyHighWaterMark","IsCountQueuingStrategy","countBrandCheckException","convertTransformerFlushCallback","convertTransformerStartCallback","convertTransformerTransformCallback","TransformStream","rawTransformer","rawWritableStrategy","rawReadableStrategy","writableStrategy","readableStrategy","transformer","readableType","writableType","convertTransformer","readableHighWaterMark","readableSizeAlgorithm","writableHighWaterMark","writableSizeAlgorithm","startPromise_resolve","startPromise","_writable","CreateWritableStream","_transformStreamController","_backpressureChangePromise","TransformStreamDefaultControllerPerformTransform","TransformStreamDefaultSinkWriteAlgorithm","_readable","flushPromise","_flushAlgorithm","TransformStreamDefaultControllerClearAlgorithms","TransformStreamError","TransformStreamDefaultSinkCloseAlgorithm","TransformStreamDefaultSinkAbortAlgorithm","TransformStreamSetBackpressure","TransformStreamDefaultSourcePullAlgorithm","TransformStreamErrorWritableAndUnblockWrite","_backpressureChangePromise_resolve","InitializeTransformStream","TransformStreamDefaultController","transformAlgorithm","TransformStreamDefaultControllerEnqueue","transformResultE","flushAlgorithm","_controlledTransformStream","_transformAlgorithm","SetUpTransformStreamDefaultController","SetUpTransformStreamDefaultControllerFromTransformer","IsTransformStream","streamBrandCheckException","IsTransformStreamDefaultController","defaultControllerBrandCheckException","terminate","TransformStreamDefaultControllerTerminate","readableController","ReadableStreamDefaultControllerHasBackpressure","emitWarning","assign","params","blob","ctrl","arrayBuffer","_File","fileBits","lastModified","blobFromSync","fromBlob","blobFrom","fileFrom","fromFile","fileFromSync","BlobDataItem","mtimeMs","createReadStream","toIterator","_Blob","blobParts","encoder","endings","decoder","TextDecoder","str","decode","it","relativeStart","relativeEnd","span","subarray","FormData","getAll","formDataToBlob","B","FetchBaseError","FetchError","systemError","erroredSysCall","syscall","isURLSearchParameters","delete","isBlob","pipeline","promisify","INTERNALS","Body","boundary","isBuffer","types","isAnyArrayBuffer","disturbed","error_","bodyUsed","consumeBody","formData","ct","parameters","URLSearchParams","toFormData","buf","alloc","accum","accumBytes","destroy","readableEnded","_readableState","ended","deprecate","instance","p1","p2","getBoundary","PassThrough","pipe","getNonSpecFormDataBoundary","extractContentType","validateHeaderName","validateHeaderValue","raw","isBoxedPrimitive","Proxy","receiver","Reflect","reduce","for","redirectStatus","isRedirect","Response","contentType","counter","redirected","redirect","URL","stripURLForUseAsAReferrer","originOnly","ReferrerPolicy","isUrlPotentiallyTrustworthy","hostIp","hostIPVersion","isIP","endsWith","isOriginPotentiallyTrustworthy","isRequest","doBadDataWarn","parsedURL","inputBody","referrer","parsedReferrer","follow","compress","agent","insecureHTTPParser","referrerPolicy","validateReferrerPolicy","AbortError","supportedSchemas","options_","contentLengthValue","totalBytes","getLengthSync","hasKnownLength","getTotalBytes","referrerURLCallback","referrerOriginCallback","policy","referrerSource","referrerURL","referrerOrigin","currentURL","determineRequestsReferrer","lastOffset","getSearch","getNodeRequestOptions","firstComma","meta","charset","typeFull","unescape","abortAndFinalize","request_","LAST_CHUNK","previousChunk","isChunkedTransfer","properLastChunkReceived","socket","onSocketClose","errorCallback","onData","compare","prependListener","removeListener","fixResponseChunkedTransferBadEnding","endedWithEventsCount","_eventsCount","hadError","response_","array","fromRawHeaders","rawHeaders","locationURL","requestOptions","hostname","isDomainOrSubdomain","responseReferrerPolicy","policyTokens","parseReferrerPolicyFromHeader","once","responseOptions","statusMessage","codings","zlibOptions","finishFlush","writeToStream","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","definition","chunkId","u","nmd","paths","installedChunk","moreModules","modules","chunkIds","ids","runtime","installChunk","extensionVersion","packageJSON","vscodeVersion","osVersion","appHost","language","adminTreeView","AdminTreeView","reportTreeView","ReportTreeView","registerTreeDataProvider","registerCommand","InstallSkills","openExternal"],"sourceRoot":""}