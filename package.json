{
  "name": "airflow-vscode-extension",
  "displayName": "Airflow",
  "description": "Apache Airflow Extension to List/Trigger DAGs, View Logs and much more",
  "version": "1.8.0",
  "publisher": "NecatiARSLAN",
  "icon": "media/airflow-extension-logo.png",
  "repository": {
    "type": "git",
    "url": "https://github.com/necatiarslan/airflow-vscode-extension"
  },
  "engines": {
    "vscode": "^1.104.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./dist/extension.js",
  "contributes": {
    "chatParticipants": [
      {
        "id": "airflow-ext.participant",
        "name": "airflow",
        "fullName": "Airflow Assistant",
        "description": "Analyze Airflow DAGs and Logs",
        "isSticky": true
      }
    ],
    "languageModelTools": [
      {
        "name": "trigger_dag_run",
        "displayName": "Trigger DAG Run",
        "modelDescription": "Triggers a specific Apache Airflow DAG run via the REST API. Use this tool when the user wants to execute or start a DAG workflow. Required inputs: dag_id (string) - the unique identifier of the DAG to trigger, config_json (string) - a JSON string containing the DAG run configuration parameters (e.g., {\"param1\": \"value1\"}). This is a state-changing operation that requires user confirmation.",
        "icon": "$(run)",
        "tags": [
          "airflow",
          "control",
          "dag",
          "trigger",
          "execution"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to trigger"
            },
            "config_json": {
              "type": "string",
              "description": "JSON string containing configuration parameters OR an absolute file path to a JSON file."
            },
            "date": {
              "type": "string",
              "description": "The logical date (execution date) for the DAG run in ISO 8601 format (e.g., '2023-12-01T10:00:00Z'). Optional."
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "get_failed_runs",
        "displayName": "Get Failed DAG Runs",
        "modelDescription": "Retrieves a summary list of DAG runs that have failed (status: failed, upstream_failed, or skipped) within a specified time range using the Airflow batch API. Use this tool for monitoring and observability to help users identify problems. Optional inputs: time_range_hours (integer, defaults to 24) - how many hours back to search, dag_id_filter (string, optional) - filter results to a specific DAG ID. Returns a JSON array of failed run objects.",
        "icon": "$(warning)",
        "tags": [
          "airflow",
          "monitoring",
          "failed",
          "observability",
          "debugging"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "time_range_hours": {
              "type": "integer",
              "description": "Number of hours to look back for failed runs (default: 24)",
              "default": 24
            },
            "dag_id_filter": {
              "type": "string",
              "description": "Optional: Filter by specific DAG ID"
            }
          }
        }
      },
      {
        "name": "list_active_dags",
        "displayName": "List Active DAGs",
        "modelDescription": "Lists all Airflow DAGs that are currently active (not paused). Use this tool when the user asks to see running or enabled DAGs. Returns a list of DAG IDs and their details.",
        "icon": "$(play)",
        "tags": [
          "airflow",
          "monitoring",
          "dags",
          "list",
          "active"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      },
      {
        "name": "list_paused_dags",
        "displayName": "List Paused DAGs",
        "modelDescription": "Lists all Airflow DAGs that are currently paused. Use this tool when the user asks to see disabled or stopped DAGs. Returns a list of DAG IDs and their details.",
        "icon": "$(debug-pause)",
        "tags": [
          "airflow",
          "monitoring",
          "dags",
          "list",
          "paused"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {},
          "required": []
        }
      },
      {
        "name": "pause_dag",
        "displayName": "Pause DAG",
        "modelDescription": "Pauses a specific Airflow DAG. This stops new runs from being scheduled. Use this tool when the user wants to stop, disable, or pause a DAG. Required input: dag_id (string). This is a state-changing operation that requires user confirmation.",
        "icon": "$(debug-pause)",
        "tags": [
          "airflow",
          "control",
          "dag",
          "pause",
          "stop"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to pause"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "unpause_dag",
        "displayName": "Unpause DAG",
        "modelDescription": "Unpauses (activates) a specific Airflow DAG. This allows new runs to be scheduled. Use this tool when the user wants to start, enable, or unpause a DAG. Required input: dag_id (string). This is a state-changing operation that requires user confirmation.",
        "icon": "$(play)",
        "tags": [
          "airflow",
          "control",
          "dag",
          "unpause",
          "start"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to unpause"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "get_dag_runs",
        "displayName": "Get DAG Runs",
        "modelDescription": "Retrieves the run history for a specific Airflow DAG. Returns run ID, start time, duration, and status (success, failed, running, etc.) for each run. Optional input: date (string in YYYY-MM-DD format, defaults to today). Use this tool when the user wants to see the execution history or status of DAG runs.",
        "icon": "$(history)",
        "tags": [
          "airflow",
          "monitoring",
          "dag",
          "runs",
          "history"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to query"
            },
            "date": {
              "type": "string",
              "description": "Optional: Date to filter runs (YYYY-MM-DD format, defaults to today)"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "stop_dag_run",
        "displayName": "Stop DAG Run",
        "modelDescription": "Stops the currently running DAG run for a specific Airflow DAG. Use this tool when the user wants to stop, cancel, or terminate a running DAG execution. The DAG run will be marked as failed and stopped. Required input: dag_id (string). This is a state-changing operation that requires user confirmation.",
        "icon": "$(debug-stop)",
        "tags": [
          "airflow",
          "control",
          "dag",
          "stop",
          "cancel"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG whose run should be stopped"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "analyse_dag_latest_run",
        "displayName": "Analyse DAG Latest Run",
        "modelDescription": "Performs a comprehensive analysis of the latest DAG run. Retrieves and analyzes: DAG run details, all task instances with their states, DAG source code, and task logs (focusing on failed tasks). Use this tool when the user wants a complete diagnostic report of a DAG execution, understand what went wrong, or get a detailed analysis of task execution. Required input: dag_id (string). This provides the most comprehensive diagnostic information.",
        "icon": "$(search)",
        "tags": [
          "airflow",
          "analysis",
          "debugging",
          "dag",
          "diagnostic",
          "logs"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to analyze"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      },
      {
        "name": "get_dag_history",
        "displayName": "Get DAG History",
        "modelDescription": "Retrieves the run history for a specific DAG on a given date. Returns a list of runs with their date/time, status, duration, and any notes. Optional input: date (string in YYYY-MM-DD format, defaults to today). Use this tool when the user wants to see the execution history for a specific day or review past runs.",
        "icon": "$(history)",
        "tags": [
          "airflow",
          "monitoring",
          "dag",
          "history",
          "runs"
        ],
        "inputSchema": {
          "type": "object",
          "properties": {
            "dag_id": {
              "type": "string",
              "description": "The unique identifier (ID) of the DAG to query"
            },
            "date": {
              "type": "string",
              "description": "Optional: Date to filter runs (YYYY-MM-DD format, defaults to today)"
            }
          },
          "required": [
            "dag_id"
          ]
        }
      }
    ],
    "commands": [
      {
        "command": "dagTreeView.AskAI",
        "title": "Ask AI",
        "icon": "$(sparkle)"
      },
      {
        "command": "dagTreeView.refreshServer",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "dagTreeView.connectServer",
        "title": "Connect to Airflow Server",
        "icon": "$(plug)"
      },
      {
        "command": "dagTreeView.addServer",
        "title": "Add Airflow Server",
        "icon": "$(add)"
      },
      {
        "command": "dagTreeView.removeServer",
        "title": "Remove Airflow Server",
        "icon": "$(remove)"
      },
      {
        "command": "dagTreeView.filter",
        "title": "Filter",
        "icon": "$(filter)"
      },
      {
        "command": "dagTreeView.showOnlyActive",
        "title": "Active Only",
        "icon": "$(circle-large-filled)"
      },
      {
        "command": "dagTreeView.showOnlyFavorite",
        "title": "Favorites Only",
        "icon": "$(bookmark)"
      },
      {
        "command": "dagTreeView.viewDagView",
        "title": "View",
        "icon": "$(preview)"
      },
      {
        "command": "dagTreeView.triggerDag",
        "title": "Trigger",
        "icon": "$(run)"
      },
      {
        "command": "dagTreeView.triggerDagWithConfig",
        "title": "Trigger DAG w/Config"
      },
      {
        "command": "dagTreeView.checkDagRunState",
        "title": "Check Run State"
      },
      {
        "command": "dagTreeView.checkAllDagsRunState",
        "title": "Check All Run State"
      },
      {
        "command": "dagTreeView.pauseDAG",
        "title": "Pause DAG"
      },
      {
        "command": "dagTreeView.unPauseDAG",
        "title": "UnPause DAG"
      },
      {
        "command": "dagTreeView.addToFavDAG",
        "title": "Fav DAG"
      },
      {
        "command": "dagTreeView.deleteFromFavDAG",
        "title": "UnFav DAG"
      },
      {
        "command": "dagTreeView.lastDAGRunLog",
        "title": "Run Log",
        "icon": "$(output)"
      },
      {
        "command": "dagTreeView.dagSourceCode",
        "title": "Source Code",
        "icon": "$(code)"
      },
      {
        "command": "dagTreeView.showDagInfo",
        "title": "DAG Info",
        "icon": "$(info)"
      },
      {
        "command": "dagTreeView.showDagView",
        "title": "DAG View"
      },
      {
        "command": "dagTreeView.clearServers",
        "title": "Clear Servers"
      },
      {
        "command": "dagTreeView.viewConnections",
        "title": "View Connections",
        "icon": "$(link)"
      },
      {
        "command": "dagTreeView.viewVariables",
        "title": "View Variables",
        "icon": "$(symbol-variable)"
      },
      {
        "command": "dagTreeView.viewProviders",
        "title": "View Providers",
        "icon": "$(package)"
      },
      {
        "command": "dagTreeView.viewDagRuns",
        "title": "View DAG Runs",
        "icon": "$(list-selection)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "dagTreeView.refreshServer",
          "when": "view == dagTreeView",
          "group": "navigation@7"
        },
        {
          "command": "dagTreeView.connectServer",
          "when": "view == dagTreeView",
          "group": "navigation@6"
        },
        {
          "command": "dagTreeView.addServer",
          "when": "view == dagTreeView",
          "group": "navigation@5"
        },
        {
          "command": "dagTreeView.removeServer",
          "when": "view == dagTreeView",
          "group": "navigation@4"
        },
        {
          "command": "dagTreeView.filter",
          "when": "view == dagTreeView",
          "group": "navigation@3"
        },
        {
          "command": "dagTreeView.showOnlyActive",
          "when": "view == dagTreeView",
          "group": "navigation@2"
        },
        {
          "command": "dagTreeView.showOnlyFavorite",
          "when": "view == dagTreeView",
          "group": "navigation@1"
        },
        {
          "command": "dagTreeView.clearServers",
          "when": "view == dagTreeView",
          "group": "other"
        },
        {
          "command": "dagTreeView.viewConnections",
          "when": "view == dagTreeView",
          "group": "other"
        },
        {
          "command": "dagTreeView.viewVariables",
          "when": "view == dagTreeView",
          "group": "other"
        },
        {
          "command": "dagTreeView.viewProviders",
          "when": "view == dagTreeView",
          "group": "other"
        },
        {
          "command": "dagTreeView.viewDagRuns",
          "when": "view == dagTreeView",
          "group": "other"
        }
      ],
      "view/item/context": [
        {
          "command": "dagTreeView.viewDagView",
          "when": "view == dagTreeView",
          "group": "inline"
        },
        {
          "command": "dagTreeView.triggerDag",
          "when": "view == dagTreeView",
          "group": "inline"
        },
        {
          "command": "dagTreeView.lastDAGRunLog",
          "when": "view == dagTreeView",
          "group": "inline"
        },
        {
          "command": "dagTreeView.showDagInfo",
          "when": "view == dagTreeView",
          "group": "inline"
        },
        {
          "command": "dagTreeView.AskAI",
          "when": "view == dagTreeView",
          "group": "inline"
        },
        {
          "command": "dagTreeView.triggerDagWithConfig",
          "when": "view == dagTreeView",
          "group": "trigger"
        },
        {
          "command": "dagTreeView.checkDagRunState",
          "when": "view == dagTreeView",
          "group": "trigger"
        },
        {
          "command": "dagTreeView.checkAllDagsRunState",
          "when": "view == dagTreeView",
          "group": "trigger"
        },
        {
          "command": "dagTreeView.pauseDAG",
          "when": "view == dagTreeView && viewItem =~ /#!IsPaused#/",
          "group": "pause"
        },
        {
          "command": "dagTreeView.unPauseDAG",
          "when": "view == dagTreeView && viewItem =~ /#IsPaused#/",
          "group": "pause"
        },
        {
          "command": "dagTreeView.addToFavDAG",
          "when": "view == dagTreeView && viewItem =~ /#!IsFav#/",
          "group": "fav"
        },
        {
          "command": "dagTreeView.deleteFromFavDAG",
          "when": "view == dagTreeView && viewItem =~ /#IsFav#/",
          "group": "fav"
        },
        {
          "command": "dagTreeView.dagSourceCode",
          "when": "view == dagTreeView",
          "group": "other"
        },
        {
          "command": "dagTreeView.showDagView",
          "when": "view == dagTreeView",
          "group": "other"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "airflow-explorer",
          "title": "Airflow",
          "icon": "media/airflow-extension-logo.png"
        }
      ]
    },
    "views": {
      "airflow-explorer": [
        {
          "id": "dagTreeView",
          "name": "Airflow",
          "icon": "media/airflow-extension-logo.png"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "dagTreeView",
        "contents": "To connect to Airflow Click Below \n [Connect to Airflow](command:dagTreeView.addServer)\n\n You should enable REST Api in the Airflow to connect.\n For now, only basic authentication (username/password) supported.\n [Learn More](https://github.com/necatiarslan/airflow-vscode-extension/blob/main/README.md) \n\n Click [here](https://www.youtube.com/watch?v=ZeWDVPNDXZg) on how to run Airflow in your local machine in 5 mins."
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js"
  },
  "devDependencies": {
    "@types/base-64": "^1.0.2",
    "@types/glob": "^9.0.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "24.x",
    "@types/vscode": "^1.104.0",
    "@typescript-eslint/eslint-plugin": "^8.48.0",
    "@typescript-eslint/parser": "^8.48.0",
    "@vscode/test-electron": "^2.5.2",
    "eslint": "^9.39.1",
    "glob": "^13.0.0",
    "mocha": "^11.7.5",
    "ts-loader": "^9.5.4",
    "typescript": "^5.9.3",
    "webpack": "^5.103.0",
    "webpack-cli": "^6.0.1"
  },
  "dependencies": {
    "@vscode-elements/elements": "^2.3.1",
    "@vscode/codicons": "^0.0.43",
    "ajv": "^8.17.1",
    "base-64": "^1.0.0",
    "node-fetch": "^3.3.2",
    "tmp": "^0.2.5"
  }
}
